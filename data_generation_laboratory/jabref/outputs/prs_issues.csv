Issue_NumberPR_NumberIssue_TitleIssue_BodyIssue_CommentsPR_TitlePR_BodyPR_CommentsPR_Author_NamePR_Author_UsernamePR_Closed_Date
959.012"Cleanup entries: Rely on ""field formatter""""The first two cleanups can be achieved using the ""field formatters"".
- [ ] ""Run Unicode converter on title, author(s), and abstract"". Even though this affects multiple fields, this should be configured in ""Run field formatter"". 
- [ ] ""Convert 1st, 2nd, ... to real superscripts"". Even though this also affects multiple fields, this should also be configured in ""Run field formatter"". 
- [ ] With the fieldname `all` is it possible to target all fields. This should be documented somewhere. Currently, the gray text at ""Enter field name"" doesn't show that.

![grabbed_20160314-085315](https://cloud.githubusercontent.com/assets/1366654/13738037/330a638a-e9c2-11e5-8ca9-b7e596147328.png)""All the points are already fixed in the latest master version.
 =||= ""BugFix for #959 ""StringIndexOutOfBoundsException with invalid Preview text""""Fixed #959 ""StringIndexOutOfBoundsException with invalid Preview text"". java.lang.StringIndexOutOfBoundsException handled: message dialogue shows with last five words before illegal backslash expression and trace is written in stderr."Ingvar JackalIngvarJackal07/16/14, 06:57:22 PM
155.0172Consistent encoding strings"JabRef's [current encoding list](https://github.com/JabRef/jabref/blob/be4b2aa2d7744b8b4e28c4662b2145a76470e4be/src/main/java/net/sf/jabref/logic/l10n/Encodings.java) lists possible encodings. 

The strings have flaws:
- `UTF8` and `UTF-16` are possible encodings. I really dislike the inconsistency between them: `UTF8` has no `-`, but `UTF-16` has: Both should have a dash resulting in `UTF-8`. (see https://de.wikipedia.org/wiki/UTF-8)
-  `Cp1251` should be `CP1251` (see http://man7.org/linux/man-pages/man7/cp1251.7.html for example). Similar for all other code pages
-  `ISO8859_15` should be `ISO8859-15` (see https://de.wikipedia.org/wiki/ISO_8859-15). Similar for all other encodings

On the one hand, I am very well aware that a change here results in a large compatibility code where the old strings have to be mapped to the new strings. On the other hand, I would like to see JabRef having strings not causing confusion.

Related: #118, #131 ""I fully agree with what you write and just had a look at this issue.

As far as I can see, we can just replace the faulty names with the correct ones in `ALL_ENCODINGS` and add the correct names to `ENCODING_NAMES_LOOKUP`. This means we have two keys (the correct name and the old name) for the same encoding. This should not break anything, since `ALL_ENCODINGS` is only used to display available encoding names in the UI and `ENCODING_NAMES_LOOKUP` is used for for actually applying an encoding. Hence, duplicate keys won't hurt as long as the values are ok (which, I assume, they are).

To sum up: This change looks pretty easy to me, but perhaps I just overlooked a difficult problem. Can you point me to code that breaks with the above changes?
 =||= Can the user select the encoding in the UI? Do we want to automatically upgrade from an old encoding name to the new encoding name? Where are the used encodings stored?
 =||= - _Can the user select the encoding in the UI?_

Yes, at various positions, for instance when a save action fails with an `UnsupportedCharsetException`. Example code is:

```
Object choice = JOptionPane.showInputDialog(frame, Localization.lang(""Select encoding""), Localization.lang(""Save database""),
                        JOptionPane.QUESTION_MESSAGE, null, Encodings.ENCODINGS, encoding);
```
- _Do we want to automatically upgrade from an old encoding name to the new encoding name?_

Can you describe some more what exactly you mean by automatic upgrade? Me changing source code would be a manual upgrade.
- _Where are the used encodings stored?_

Encodings are stored [in the Encodings class](https://github.com/JabRef/jabref/blob/be4b2aa2d7744b8b4e28c4662b2145a76470e4be/src/main/java/net/sf/jabref/logic/l10n/Encodings.java) as linked by Olly above.
 =||= - Do we want to automatically upgrade from an old encoding name to the new encoding name?

Yes! I know that this will introduce backward compatibility issues. However, we should move forward ^^.
(I think Simon meant the encoding string in the `.bib` file)
 =||= :+1: 

Automatic upgrade: replace the encoding in the first line of the .bib file with a newer encoding: utf8 --> utf-8

Are encodings stored in the preferences as well? Do we have to upgrade there, too?
 =||= _Are encodings stored in the preferences as well? Do we have to upgrade there, too?_

I have no idea, but would be very glad if you find out :)
 =||= `JabRefPreferences.DEFAULT_ENCODING` can be selected from the list of encodings. Hence, it can contain an old encoding which would need to be migrated to a newer one as well. 
 =||= The only critical position where encodings were hardcoded were the preferences. Thanks @simonharrer!

I added compatibility code to automatically update the preferences and this issue should be fixed.
 =||= "Fix encoding stringsFixes #155Jörg Lenhardlenhard09/18/15, 02:21:46 PM
290.0300SourceForge references"In PR #286 I have replaced most references to sourceforge.net, but the following would need a bit more work (from someone else):

In ManageJournalsPanel.java, there is a default link to a journal abbreviation list:
`http://jabref.sf.net/journals/journal_abbreviations_general.txt`

I guess that in the long run, this file is better moved to GitHub? I can of course change the source, but do not know enough about GitHub (nor have enough access rights) to be able to place the file somewhere sensible.""http://jabref.sourceforge.net/journals/journal_abbreviations_general.txt is currently a 404.

My proposal would be: Remove the hint to the list ""maintained"" by us :see_no_evil: and the default URL. 
 =||= For the record: The new URL of the list is https://raw.githubusercontent.com/JabRef/reference-abbreviations/master/journals/journal_abbreviations_general.txt
 =||= "Fix #290 by removing the suggested url and text Removes the reference to a missing file earlier hosted on jabref.sf.net. Closes #290 Oscar Gustafssonoscargus11/07/15, 07:48:52 PM
498.0452Open pdf file when clicking pdf icon"... is working fine.

Seriously, you expect us to invest our time for free on something, but don't bother to provide more description than a single sentence? If you can't be bothered with error diagnosis, why should we?
 =||= I'm sorry. I enabled the ""Show PDF/PS- column"" in ""Entry table columns"". In ""General"" under ""File"", I add my pdf document. This shows a pdf icon with a magnifying glass in it. When i click this icon the pdf file doesn't open. I also can't sort on files with/without pdf file attached.
 =||= Thanks, that is something we can work with.

Do you mean the icon marked here?
<img src=""https://cloud.githubusercontent.com/assets/1515701/11713287/c025a9b2-9f32-11e5-8748-8c85b4a573e3.png"" width=""200"" height=""400"" />
As the tooltip says, this is not supposed to open the pdf file, but tries searching for it. You can open the pdf by clicking the pdf icon in the entry table.
 =||= I mean the symbol next to ""InProc..."" and ""Article"" in your image. I enabled the ""Show one letter heading for icon columns"" and the icon is under the letter ""P"". The tooltip says ""Open PDF"".

![image](https://cloud.githubusercontent.com/assets/16107991/11742288/f8a1a454-9ffe-11e5-85e8-ee2837c20ff9.png)

The icon becomes selected, but the pdf doesn't open.
 =||= Thanks, I can reproduce this. Propably, this is due to pdf/ps fields being no longer supported, but not yet fully banished from the UI. This will be fixed with #452

Could you try to select Options -> Preferences -> Entry Table Colums -> Check ""Show file column""?
Then, another column should appear with the PDF icon and this should open on click (at least it does for me). If it does, you could even deselect ""Show PDF/PS column"" in the preferences.
 =||= Selecting **Show file column** instead of _Show PDF/PS-column_ in Options -> Preferences -> Entry Table Colums solved my issue. Thank you.
 =||= Good to hear! I'll leave this issue open as a reminder until we have resolved the UI.
 =||= "Revise maintable"Complete check and rewrite of MainTable and related classes

This will fix and implement:
- [x] #315 
- [x] #384 - show tooltip for header columns
- [x] #384 - show tooltip for contents which are too long for table columns
- [x] #443 
- [x] #445 
- [x] Add ability to drag and drop specialfield columns
- ~~[ ] Allow storing position of specialfield columns~~ postponed to another PR
- [x] remove table column for ""PDF/PS"" which is obsolete (fixes #498)
- [x] remove option ""Show one letter heading for icon columns"" which is now obsolete
- [x] Changed default order in main table: # | all file based icons (file, URL/DOI, ...) | all bibtex field based icons (bibtexkey, entrytype, author, title, ...) | all special field icons
- ~~[ ] #490~~ postponed
- ~~[ ] Think about ""must be implemented ""vernünftig (matthias)"" ""Entry table -> fit table horizontally ...."""" from the minutes~~ postponed
- [x] final cleanup + CHANGELOG"Matthias Geigermatthiasgeiger12/15/15, 10:39:22 AM
545.0595JabRef 3.0: ACM Fetcher: Cannot parse number of hits"When I do a search in the ACM in JabRef (no matter which one ), I get the following error.

```
java.io.IOException: Cannot parse number of hits
    at net.sf.jabref.importer.fetcher.ACMPortalFetcher.getNumberOfHits(ACMPortalFetcher.java:427)
    at net.sf.jabref.importer.fetcher.ACMPortalFetcher.processQueryGetPreview(ACMPortalFetcher.java:136)
    at net.sf.jabref.importer.fetcher.GeneralFetcher$3.run(GeneralFetcher.java:241)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
```""I can confirm this. I've started to see if I can solve it, and have passed the hits parsing. However, many other things have changed in the search results so it may take a while to get it back.
 =||= OK, seems like I got some time on my hands anyway...

Try it out at http://builds.jabref.org/acmfetcher/
 =||= "Fixed #545 - ACM fetcher works againFixed #545 and some PMD cleanup.Oscar Gustafssonoscargus12/28/15, 12:58:31 AM
599.0600Import from external database fails for 3.1 and PostgreSQL"Hi,

Just tried out 3.1.  Thank you for all of the enhancements, especially the new look!.

I tried to import from an existing database but it failed with the following error in a pop-up window:

""Could not import from SQL database for the following reason:
java.util.ConcurrentModificationException""

There were no obvious command line messages.  I used ./gradlew run to test.

Cheers,

Fred""I guess I need to look a bit closer or have more coffee.  Here are messages after an attempt to import:
java.util.ConcurrentModificationException
        at java.util.ArrayList$Itr.checkForComodification(ArrayList.java:901)
        at java.util.ArrayList$Itr.next(ArrayList.java:851)
        at net.sf.jabref.sql.importer.DBImporter.performImport(DBImporter.java:108)
        at net.sf.jabref.sql.importer.DbImportAction.performImport(DbImportAction.java:160)
        at net.sf.jabref.sql.importer.DbImportAction.run(DbImportAction.java:131)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:497)
        at spin.Invocation.evaluate(Invocation.java:175)
        at spin.off.SpinOffEvaluator$1.run(SpinOffEvaluator.java:108)
        at java.lang.Thread.run(Thread.java:745)

Hope this helps!

Connect to external database works.  Export to external database seem to be working but not with escaped characters (issue #473).

Cheers,

Fred
 =||= Thanks, with the stacktrace I can spot the error in the code even without executing it. The following snippet from `DBImporter` (lines 107 - 112) is problematic:

``` java
List<String> colNames = this.readColumnNames(conn);
  for (String next : colNames) {
    if (!columnsNotConsideredForEntries.contains(next)) {
       colNames.add(next);
    }
}
```

The list named `colNames` is modified while iterating over it, hence the `ConcurrentModificationException`. This should be fixable by using a different temporary list and is propably caused by one of my resource usage improvements. We'll notify you when a fix is available for testing!
 =||= @fishforbreakfast Could you please check out https://circle-artifacts.com/gh/JabRef/jabref/2214/artifacts/0/home/ubuntu/jabref/build/releases/JabRef-3.2dev--snapshot--2015-12-28--fix-599--372d06d.jar and test if this solves your problem (or alternatively report any errors)?
 =||= Hi,

Thanks for the fix.  It seems to be working, at least with one of my largest reference databases.  I still have the export issue though (issue #473).

Cheers,

Fred
 =||= Great! I'll merge this into master then. We'll follow up on the export in #473.
 =||= Thank you very much for the fix!  If I can post more information on #473 I will do so.

Cheers,

Fred
 =||= "Avoid ConcurrentModificationException when reading column namesFixes #599 Jörg Lenhardlenhard12/29/15, 01:23:26 PM
627.0663Remove references to ResolvePDF in the default exportsWith the removed pdf field, the export formatter ResolvePDF is removed, although it still is referenced in the export files.Fixed some issues in exporter"Fixed an issue in the MS Office 2007 exporter and some code cleanups.

Removed all(?) references to the pdf field and the non-existing ResolvePDF export formatter.

Removed duplicate lines in the ChangeLog for 3.2, fixes #627."Oscar Gustafssonoscargus01/19/16, 10:35:24 AM
492.0842Copy to clipboard disabled for every field in FieldEditorOnly available when text is selected."Here on my system, If field editor is opened and if nothing is selected, nothing is copied at Edit/Copy (or click on copy).
 =||= ""Paste from clipboard"" should be disabled if clipboard is empty.
 =||= Bonus: Show current clipboard content
 =||= http://www.javapractices.com/topic/TopicAction.do?Id=82
 =||= "Fixed #492: All text is copied if nothing is marked and preview of pa…"Fixed #492

When nothing is selected the whole field is copied. If the field is empty, the right click copy item is disabled.

Preview of text to be pasted in tool tip. Now maximum 20 characters. Should it be longer?"Oscar Gustafssonoscargus02/22/16, 09:16:08 AM
856.0874OpenOffice Manual connect  - Clicking on browse does nothing"While setting up my Libre Ofifce connection around for #815 I noticed that Browse does nothing.
However, directly inserting the correct path works.

There is also some odd behaviour with Autodetection.
When I chose the correct path for Autodection it displays an error message "" Autodection failed"", but it still connects.""Fixed it. Doing some refactoring now.
 =||= "Fixing OpenOffice Citation with curly braces and manual connection browsing"- [X] Change in CHANGELOG.md described?
- [X] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes?
- [X] Tests green?

Fixed #856: Clicking on browse for manual OpenOffice does now work
Fixed #815: Curly braces in OO/LO citation no longer ignored
- Code cleanup: Replaced ActionListener with Lamdbas

One point for discussion: DefaultFormBuilder (jgoodies) is deprecated. Is there already a replacement for the creation? I found this thread:
http://stackoverflow.com/questions/33044573/jgoodies-what-is-the-nextline-equivalent-in-formbuilder
@oscargus  @koppor "ChristophSiedlerchr03/02/16, 07:18:17 AM
815.0874Curly braces ignored in in-text citations"In the reference,

```
@Manual{JabRef_software,
  Title                    = {JabRef},
  Author                   = {{JabRef Development Team}},
  Year                     = {2015},
  Version                  = {Version 2.11.1},
  Url                      = {http://www.jabref.org}
}
```

The curly braces in the Author field are ignored, causing, for example, its associated in-text citation to be presented as ""(Team, 2015)"", rather than, ""(JabRef Development Team, 2015)"". Curly braces should be honored in in-text citations.""What do you mean by in-text citation? 
The above reference shows ""JabRef Development Team"" in the main table and 
`Manual (JabRef_software) JabRef Development Team JabRef 2015` in the preview. Both seem to be correct.
 =||= Please post a [minimal working example](http://meta.tex.stackexchange.com/a/231/9075) including the `.tex` and the `.bib` file and the tools you are using (biber or bibtex, pdflatex or latex, ...)
 =||= Sorry, for not mentioning that this is from JabRef to LibreOffice Writer (version 5.0.5.2), so there is no .tex file. I can whip up a .bib file if that would be helpful, however.

By ""in-text citation,"" I mean the writing signifying that a work has been cited that appears in the body of a document. So if this were part of a journal article that I used JabRef (Team 2015) to help me create a bibliography for, the in-text citation would be ""(Team 2015)"". [Though ideally it should be ""(JabRef Development Team 2015)"".]
 =||= I can just comment briefly: there is code to check for this case, namely a method isInstitution(). Not sure exactly where I saw it though...
 =||= I can confirm this bug. Version LO: 5.0.2.2 (x64) on Window 7.
I'll look through it.
 =||= "Fixing OpenOffice Citation with curly braces and manual connection browsing"- [X] Change in CHANGELOG.md described?
- [X] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes?
- [X] Tests green?

Fixed #856: Clicking on browse for manual OpenOffice does now work
Fixed #815: Curly braces in OO/LO citation no longer ignored
- Code cleanup: Replaced ActionListener with Lamdbas

One point for discussion: DefaultFormBuilder (jgoodies) is deprecated. Is there already a replacement for the creation? I found this thread:
http://stackoverflow.com/questions/33044573/jgoodies-what-is-the-nextline-equivalent-in-formbuilder
@oscargus  @koppor "ChristophSiedlerchr03/02/16, 07:18:17 AM
295.0877"""change case"" for multiple references""I dont know if this is relevent or not. 
When we want to change the case of titles of serveral references, we need to do ""right-click, change case"" for every reference, I was wondering if it is possible to change case in a batch way, or for a multiple selection.
This could be added in ""Cleanup entries"" for example,
Thank you all :)""One could clearly think of an extended Cleanup functionality, being able to perform clean-ups on specific user-specified fields. For example, at the moment, some of the clean-ups are only performed on specified fields (such as Unicode conversion), which is defined by the developers. Clearly, it would be better to be able to apply ""all"" clean-up actions on ""all"" fields (for some definition of ""all"", some of the actions, such as page number clean-up clearly only makes sense on the pages field).

I will think about how to implement this, as I would also find it useful.
 =||= Thinking again: are there any other fields than title where this would make sense? In that case, it would be a rather quick fix.
 =||= Thanks for your suggestion. 
I think this might be indeed useful and could be performed as a cleanup action.

We developers are currently discussing the serialization and clean up mechanisms and how to configure them, so I'll add this to our agenda.

@oscargus So please wait with introducing this feature :wink:

The most sensible use case are changing the cases of titles. But (depending on the quality of the BibTeX sources) it _might_ be also useful to change the ""casing"" for other field such as  `booktitle`, `journal`, `series`, and so one... But this must be all configurable and would require quite some effort to be implemented (and it's questionable how often is would be actually used). 
 =||= glad that you think that it would be useful.
but, we know that it takes time, 
thanks again for all these efforts :)
 =||= "Add ability to run arbitrary formatters as cleanup actions"Add ability to run arbitrary formatters as cleanup actions by reusing save actions. Thus some old cleanup entries could be removed. This also implements/fixes #295. Moreover, an erase formatter is added which just deletes the corresponding field.

![untitled](https://cloud.githubusercontent.com/assets/5037600/13373692/d6ea20c2-dd6e-11e5-93d2-346a0bd30634.png)

Code changes:
- Rename SaveActions to FieldFormatterCleanups
- Some smaller refactorings to reuse SaveActions (mainly to separate them from MetaData)

:
- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes?
- [x] Tests green?"Tobias Dieztobiasdiez03/13/16, 10:39:30 PM
466.0879Cleanup Entries -> Rename PDFs Doesn't Preserve Key Case"If the filename of a linked PDF is converted to lowercase outside of JabRef, when JabRef runs a Cleanup -> Rename PDFs, it does not rename/move the file back to ""proper"" upper/lower case consistent with its associated key.

For example, a file with key `Article_2015_NT_Woolley_191--207` will not be renamed to `Article_2015_NT_Woolley_191--207.pdf` from `article_2015_nt_woolley_191--207.pdf`.""Just checking (I have no idea how the code works, but I browsed it at least): what operating system do you run? Does JabRef show a dialog ""File rename failed for XX entries?""?
 =||= @oscargus Thanks for looking into this.  I'm running two versions of OSX (10.9.5/Mavericks and 10.11/El Capitan) and both exhibit this problem.

JabRef does not show a dialog.  However, the status bar shows ""Status: No entry needed a cleanup"".

However, if I rename the file from ""article_2015_nt_woolley_191--207.pdf"" to ""a**r**rticle_2015_nt_woolley_191--207.pdf"" and then update the filename in JabRef, it will rename the file, with proper capitalization, to the key.  

Having not looking at it (I've never worked in Java), I'm guessing that it's doing a case-insensitive query on the filetype to see if it agrees with the key, if so, it finds ""nothing to update"".  If there is a mismatch in the content, not the case, it will update both content and case.  If this is true, hopefully making that case-insensitive query to be case-sensitive will not be a large change.
 =||= I've checked the code further now and the main suspect is a call to File.exists(), which depending on the file system may or may not consider the case.

Do you know if your file system is case sensitive or case insensitive?

I think you partly can tell the answer of the above question based on if the problem is ""only"" cosmetic or if it actually prevents you from opening the file from JabRef. (With the reservation that opening files may use other methods which breaks my assumption.)
 =||= As far as I know, OSX should be case sensitive (being Unix-based).  When I navigate in the Terminal, it is most definitely case sensitive.

To your point, this issue is ""only"" cosmetic in that JabRef can still open the file.  

However, I fear that this can cause issues when working between platforms (e.g., when I access the files using JabRef on Linux).  Also, it is inconsistent with the purpose of the ""clean up"" command.

As I indicated, I'm not a Java developer; however, I wonder if the `getCanonicalPath()` and `getCanonicalFile()` functions might address the issue...?
 =||= OK! I've seen those commands in the threads as well, but it's not clear (to me at least) where they would be useful in the current implementation. It seems like there are some issues in this regard with OSX as the Java API is not always consistent with the file system, but I thought it was primarily the other way around.

I agree with you though that ideally it should work the way that you want. Especially from the Linux aspect. A most likely feasible work-around is to do the cleanup on Linux, then it would probably work as expected.

I can confirm that it works the same way on Windows anyway.

The ""problem"" is somehow that currently the implementation (appears to) builds on the standard API with well defined calls, while solving this would require ""hacks"" as I understand it. But it is probably worth solving.
 =||= "Fix #466: Rename PDF cleanup now also changes case of file name"Fixes #466.
- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes?
- [x] Tests green?"Tobias Dieztobiasdiez02/28/16, 11:38:16 AM
402.0893Corrupt file field content causes UI problems."As can be seen in #399 and https://github.com/JabRef/jabref/issues/184#issuecomment-159187452 invalid file links produce crazy effects in the UI.

Potential Problems:
- unescaped `:` in windows paths (as `:` is used as delimiter)
- unescaped `\`
- creative escapes as mentioned in #399: File = {:C$\backslash$:/Users/[myname]/Dropbox/Studies/Books/Analysis/[Hedy{_}Attouch,{_}Giuseppe{_}Buttazzo,{_}Gerard{_}MichailleVariationalBV.pdf:pdf}
- invalid number of elements delimited by `:` ?""related/affected https://github.com/JabRef/jabref/issues/98
 =||= Maybe adding `RemoveLatexCommands` somewhere at the default preview is a quick fix? See
http://jabref.sourceforge.net/help/CustomExports.php
 =||= related?  #557
 =||= add tests to `FileFieldTest` @matthiasgeiger 
 =||= Adding tests to FileFieldTest does not make sense - the problem here is a NPE which has been fixed in #893.

However, I might be useful if ""wrong"" `file` field contents are reported to the user somehow - but this is another issue ;-)
 =||= "Fix filetype icon issues"Fixes #402: No more NPEs in the global search table if file type is not present
Fixes #598: No more red rectangles if a new file type is added or an existing file type is modified.
- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes? - Not applicable, as mostly UI affected
- [x] Tests green?"Matthias Geigermatthiasgeiger02/29/16, 06:38:48 PM
598.0893additional file type just shows as red rectangle"i use JabRef for many years, but i find window style changes from V3.1, i hava a small issue about icon of file type.
In China, .caj is very popular because many Phd thesis download form www.cnki.net and this is a private file format. But i add .caj type into Jabref, the icon is normally, but when i reopen Jabref, icon become red rectangle as fig. I want to know the reason and how to solve this problem. My platform is OSX 10.11, Thanks! 
![image](https://cloud.githubusercontent.com/assets/10328093/12015647/6fe3d20c-ad7a-11e5-8dbe-524b047e2d05.png)
![image](https://cloud.githubusercontent.com/assets/10328093/12015802/aef70746-ad7c-11e5-923f-891e2eab27c3.png)
Windows version also has the same problem.(Windows 7)
![image](https://cloud.githubusercontent.com/assets/10328093/12015811/d6310eb0-ad7c-11e5-9dc4-5b8125b0a556.png)""The red image just shows that there is no dedicated icon for that type of file. All missing icons are shown like that.

I guess that there may be a better default icon for external files though. 
 =||= Ahh, sorry, my bad. It seems like it works when the file type is added. On load, JabRef looks for an icon called ""new"" (which doesn't exist).
 =||= Fixed in master. You can try out the fix in about 20 min with the build available at http://builds.jabref.org/master/
 =||= Hi,
Is this supposed to be fixed in the dev snapshot ?

I just tried JabRef-3.3dev--snapshot--2016-02-16--master--eabc584.jar, expecting the problem to be solved, but it isn't. To reproduce: 
- Open jabref, edit external file types, add a specific command to launch pdf files. Save and close dialog.
- For now, the pdf icons still look good. 
- Close and open jabref : red squares are back.

Where can I get a fixed version ? 

Just to be complete: I'm using ubuntu 15.04 (vivid), and java version: 1.8.0_72. 
 =||= I also repeat the bug in OS X, if i modify the internal file linkage of PDF, red rectangle will appear. But in fact, we are not often change the PDF settings because JabRef can detect the PDF view software if Acrobat or other can installing correctly. So this Bug is very concealed. Ha ha!
 =||=  I've got the pdf application set to a custom script which opens side by side the pdf and a file to take notes on it, which explains how I stumbled into the bug. I'd guess this would happen for other filetypes, and maybe even when changing other fields, though I haven't checked.
 =||= Thanks !
 =||= "Fix filetype icon issues"Fixes #402: No more NPEs in the global search table if file type is not present
Fixes #598: No more red rectangles if a new file type is added or an existing file type is modified.
- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes? - Not applicable, as mostly UI affected
- [x] Tests green?"Matthias Geigermatthiasgeiger02/29/16, 06:38:48 PM
649.0926Key bindings not working in preview panelThe key binding for print preview is not working (nor is the in #648 introduced key binding for copy preview working). Maybe it has something to do with the toolbar not being visible in the preview panel. Not sure how to enable it though...Key bindings are now working in preview panel"Fixes #649.
Until now the toolbar within the Preview panel held the key bindings which weren't active when the toolbar wasn't created. Now the Preview panel itself carries the key bindings.
- [x] Change in CHANGELOG.md described?
- [X] Changes in pull request outlined? (What, why, ...)
- [ ] Tests created for changes?
- [x] Tests green?"Christian Bartschchriba03/09/16, 09:16:06 PM
410.0929"""Find unlinked files"" freezes when using for PDF""Using ""Find unlinked files"" does not work. 
Scanning the directory works fine, but when I press ""Apply"" it displays ""Importing into Database..."" without ever making progress.

The problem occurs only for PDFs. It is independent of filename and directory. It is also independent of file content, i.e. it even occurs for empty PDFs.

I am using Windows 7 and the problem occurs for both JabRef 2.11.1 and JabRef 3.0""Thank you for opening the issue. We are open for pull requests fixing this bug. 
 =||= I don't know what that means, but I assume I have to wait for the next release?
 =||= @Bananach We are working on it.
 =||= Confirmed. I can reproduce something when I click on apply and then close the window which is openend after clicking on apply - which makes JabRef unusable. 
 =||= Refs #507 
 =||= @Bananach You can try the latest build at http://builds.jabref.org/master/. This issue should be fixed there.
 =||= i have used the newest build http://builds.jabref.org/master/JabRef-3.8.2-dev--snapshot--2017-01-16--master--9e48a5ff8.jar and use debian stretch with Java (oracle tested: 
ou have the recommended Java installed (Version 8 Update 111

the find unlinked works for the first file, sometimes even for the second (if the window is closed in between) fails later. it fails immediately if more than one file is selected from the unlinked files. 
the feature would be a great help - please fix it!
thank you!
 =||= I can confirm that the bug is still there in the latest dev version. I will have a look. =||= See  #2309 =||= """"Find unlinked files"" freezes when using for PDF""1. Fixed #410 Reason was an IllegalArgumentException thrown by DOI class when pasting the contents of the whole first PDF page to the constructor.
2. The DOI class can only handle real DOIs and does not extract Strings that might look like a DOI from the text, therefore the whole DOI scraper was removed in https://github.com/JabRef/jabref/commit/acdcd829c304e03b9bfd92d6eba383b5a1d52108
3. The whole PDFImporter class is screwed and a monkeypatch. It should be reimplemented from scratch."Stefan Kolbstefan-kolb03/10/16, 04:36:08 PM
936.0937Preview panel is not updated when an entry is cut/deleted"When an entry is cut or deleted the Preview Panel is not updated.

Tested with the current master at 7aa371c931ea51e7c092632e3e3f817c4861f66b.

![notupdated](https://cloud.githubusercontent.com/assets/15333371/13703378/f48015de-e795-11e5-94f3-e130f76353b8.gif)""Nice video :smile: for reproducing the issue! 
 =||= "Preview panel is now updated when an entry is cut/deleted"Fixes #936.
When an entry is cut/deleted the preview panel will be hidden due to the fact that no entry is selected anymore.
- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [ ] Tests created for changes?
- [x] Tests green?"Christian Bartschchriba03/11/16, 03:39:33 PM
935.0942Add support for parsing of encrypted PDFsA refactoring revealed that there is a TODO at the PDFContentImporter. It seems that [Bouncy Castle](https://www.bouncycastle.org/documentation.html) was not included during development and a quick hack was not to support encrypted PDFs at all. Some papers, however, are encrypted should be supported."Are there really that much use cases were papers are encrypted? And is it really necessary to extract information from that papers or is it even possible (must be IEEE or Springer)? What might be more interesting is too add functionality to decrypt PDFs in general and store a decrypted version.
 =||= PDFs are also encrypted when one sets a password for editing. This sometimes is the case at publications.
 =||= "Add support for write-protected PDFs"This PR shows how support for write-protected PDFs can be added to JabRef.

If we do not want to be a ""cryptographic"" software, I can just remove the dependency on `org.bouncycastle:bcprov-jdk15on:1.54`. Then, JabRef will compile, but throw an exception if write-protected PDFs are opened. I can adjust the test cases accordingly.
## Crypto Discussion

This fixes #935.

When importing PDFs, which carry a password for editing, both the XMP Metadata parser and the PDFContentImporter can handle this.

Now, the [Legion of the Bouncy Castle Java cryptography APIs](http://bouncycastle.org/java.html) are part of JabRef, which makes JabRef subject to export restrictions. [Bouncy Castle is approved classified under ECCN code 5D002 and approved for export under License Exception TSU](http://www.bouncycastle.org/wiki/display/JA1/Frequently+Asked+Questions#FrequentlyAskedQuestions-11.WhatisBouncyCastle%27sexportclassificationintheUnitedStatesofAmerica?). According to https://www.bis.doc.gov/index.php/policy-guidance/encryption/classification, JabRef can now only be exported ""to any end-user located or headquartered in a country listed in Supplement No. 3 to Part 740"", which is [AustriaAustraliaBelgiumBulgariaCanadaCyprusCzech RepublicEstoniaDenmarkFinlandFranceGermanyGreeceHungaryIcelandIrelandItalyJapanLatviaLithuaniaLuxembourgMaltaNetherlandsNew ZealandNorwayPolandPortugalRomaniaSlovakiaSloveniaSpainSwedenSwitzerlandTurkeyUnited Kingdom](https://www.law.cornell.edu/cfr/text/15/part-740/appendix-SupplementNo3).

The current code, however, also allows BouncyCastle to be removed and JabRef still compiles. It internally throw a NoClassDefFound Exception, which is handled properly.

I am unsure, how to proceed. [Debian also distributes bouncy-castle](https://packages.debian.org/de/sid/libbcprov-java)."Oliver Koppkoppor04/13/16, 06:34:40 AM
991.0996Insert entry in an empty database leads to KeyCollisionException"JabRef 3.3dev--snapshot--2016-03-18--master--57963f7 on Windows 10

When I delete an entry at a database and refetch the entry via the DOI to BibTeX converter, the entry is marked as duplicate in the fetch dialog.

Steps to repoduce:
1. Create new database
2. Search for `10.1007/978-3-642-36926-1_34` in the DOI to BibTeX fetcher.
3. In the untitled dialog for adding entries, the arcticle appears
4. Click ""OK""
5. Wrong behavior: The checkmark in ""Keep"" disappears
6. Add the checkmark at ""Keep""
7. Click ""OK"" again
8. Wrong beheavior: nothing shown at the UI
9. Click ""Cancel""
10. Open Error console

```
Exception in thread ""AWT-EventQueue-0"" net.sf.jabref.model.database.KeyCollisionException: ID is already in use, please choose another
    at net.sf.jabref.model.database.BibDatabase.insertEntry(BibDatabase.java:163)
    at net.sf.jabref.gui.ImportInspectionDialog.generateKeys(ImportInspectionDialog.java:489)
```"fix entry deletion from database"Fixes #991, a Bug introduced in b3aee00bae8b589aa1252ef182f8b3293d06bd69.

While moving from `Map` to `List` as the data structure for the stored `BibEntries` is has been forgotten to adjust the `removeEntry`-Method.
- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [x] Tests created for changes?
- [x] Tests green?"Christian Bartschchriba03/21/16, 09:40:24 PM
957.0999Save actions: better field selection"At ""Save sort order"" in the same dialog, one can also select a field. I would have expected the same choice for the selection of the fields to apply the save action. Is that possible? Reason: I am too lazy to input the field name manually.

![grabbed_20160313-212741](https://cloud.githubusercontent.com/assets/1366654/13731147/ab897bee-e962-11e5-84ff-a9546b62021e.png)""Please not that there is the ""special field"" ""all"" which applies the save action on all fields. 
 =||= I will look into this, Together with #958 
@koppor 
Edit//  When you select a field in the combo box e.g. address, it get's displayed in the text field.
However, it currently does not get displayed on the combobox itself.
 =||= @Siedlerchr Yes, I know. That was sort of a quick hack to enable quick selection of common fields, but also the input of arbitrary fields (not contained in the combobox list). Don't know, whether that's possible with a normal JCombobox, too.
 =||= For the sort criterion:
A solution to this would be to use an Editable Combobox (Default Combobox with Editable=true)
https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#editable
- Enables the selection of items
- Add new items not in the list of the combobox.
  => This would make the textfield unnecessary.

For the Save Action I would suggest the same solution
 =||= This save sort order selection with the Combobox and the Textfield is also used in the Preferences->Export sorting, it is the same class (SaveOrderConfigDisplay) which is used for both 

A rework would then profit in both cases. 
 =||= "DB properties layout and save order config changed"- [x] Change in CHANGELOG.md described?
- [x] Changes in pull request outlined? (What, why, ...)
- [x] Tests green?

Fixes  #957  and #958 

Fix height of the dialog and add spacing between OK/Cancel Button and  border
Changed JComboxBox to editable and removed the unnecessary textfields
Added JCombobox for selecting the fields to apply the selected formatter to
Changed position of Delete Button
Removed IndexOutOfBound Exception when no item is selected

Edit// I just see this PR is #999 ;)"ChristophSiedlerchr03/23/16, 07:55:16 PM
963.01041Nicer serialization of database bibtex mode"If I switch to bibtex mode, JabRef writes

```
@Comment{jabref-meta: DATABASE_TYPE:BibTeX;}
```

Biblatex mode is

```
@Comment{jabref-meta: DATABASE_TYPE:BibLaTeX;}
```

Proposal: no use of uppercase letters

```
@Comment{jabref-meta: databaseType:bibtex;}
@Comment{jabref-meta: databaseType:biblatex;}
```

Reason: consistency with other metadata. See https://github.com/JabRef/jabref/blob/master/src/test/java/net/sf/jabref/importer/fileformat/BibtexParserTest.java#L1431

I know that we both have camelcase and usage of dashes and underscores. The JabCon addition by Jörg (`saveOrderConfig`) used the camelcase and we should not introduce other serialization kinds, should we?""You keep `BibTeX` and `BibLaTeX` (instead of `bibtex` and `biblatex`) because of https://github.com/koppor/jabref/issues/73? :innocent: 
 =||= "Write database type in lower case into the bib file"This finally fixes #963. A quick fix has been introduced in 661eea007e555, but that does not cover the lower case writing of the type.

```
@Comment{jabref-meta: DATABASE_TYPE:BibTeX;}
```

finally gets

```
@Comment{jabref-meta: databaseType:bibtex;}
```
- [ ] Change in CHANGELOG.md described -> This has been introduced in the development versions after the last release, thus no entry required
- [x] Tests created for changes -> tests have been adapted to match this new implementation"Oliver Koppkoppor03/30/16, 02:45:19 PM
672.01089Fix width of file fields"![grabbed_20160115-023141](https://cloud.githubusercontent.com/assets/1366654/12343004/2eaa7070-bb30-11e5-84d1-0b3c5f2bbc78.png)

Refs #113, #98 

(request as of 20150326 by stekks)"FileList field size now dependent on its content"Fixes #672.
The FileList (within the EntryEditor) now automatically resizes its Columns dependent on the length of its content.

![java 2016-04-03 12-13-50-65](https://cloud.githubusercontent.com/assets/15333371/14231930/de478ace-f995-11e5-8ef7-3efff0f97eb4.jpg)
- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Screenshots added (for bigger UI changes)"Christian Bartschchriba04/13/16, 01:49:26 PM
1109.01117Localization: Duplicates or error in Synclang.py?"I have just run syncLang.py on the branch Master.
Numerous duplicated, obsolete and missing entries are reported (see below).

I thought the current development process was ensuring clean localization files, i.e. without missing entries but also without obsolete or duplicated entries.

Did I miss something?
- src/main/resources/l10n/JabRef_de.properties: 18 duplicates. 4 empty values. 
- src/main/resources/l10n/JabRef_es.properties: 13 duplicates. 234 empty values. 
- src/main/resources/l10n/JabRef_pt_BR.properties: 22 duplicates. 183 empty values. 
- src/main/resources/l10n/JabRef_da.properties: 2 duplicates. 440 empty values. 
- src/main/resources/l10n/JabRef_sv.properties: 17 duplicates. 709 empty values. 
- src/main/resources/l10n/JabRef_zh.properties: 545 duplicates. 497 empty values. 

```
./src/main/java/net/sf/jabref/external/DroppedFileHandler.java:323:Missing key: File_directory_is_not_set_or_does_not_exist!
./src/main/java/net/sf/jabref/external/FindFullTextAction.java:72:Missing key: Main_file_directory_not_set!
./src/main/java/net/sf/jabref/collab/FileUpdatePanel.java:49:Missing key: The_file<BR>'%0'<BR>has_been_modified<BR>externally!
./src/main/java/net/sf/jabref/gui/StringDialog.java:246:Missing key: The_label_of_the_string_cannot_contain_the_'#'_character.
./src/main/java/net/sf/jabref/gui/preftabs/NetworkTab.java:66:Missing key: Attention:_Password_is_stored_in_plain_text!
Possible obsolete key: Accepting_the_change_replaces_the_complete_groups_tree_with_the_externally_modified_groups_tree.
Possible obsolete key: Attention\:_Password_is_stored_in_plain_text\!
Possible obsolete key: Convert_to_BibLatex_format_(for_example,_move_the_value_of_the_'journal'_field_to_'journaltitle')
Possible obsolete key: Copied_key
Possible obsolete key: Could_not_export_to_SQL_database_for_the_following_reason\:
Possible obsolete key: Could_not_resolve_BibTeX_entry_for_citation_marker_'%0'.
Possible obsolete key: File_directory_is_not_set_or_does_not_exist\!
Possible obsolete key: Main_file_directory_not_set\!
Possible obsolete key: Modified_groups_tree
Possible obsolete key: No_entries_found._Please_make_sure_you_are_using_the_correct_import_filter.
Possible obsolete key: Note\:_A_full_text_search_is_currently_not_supported_for_%0
Possible obsolete key: Note_that_you_must_specify_the_fully_qualified_class_name_for_the_look_and_feel,
Possible obsolete key: Please_enter_a_search_term._For_example,_to_search_all_fields_for_<b>Smith</b>,_enter\:<p><tt>smith</tt><p>To_search_the_field_<b>Author</b>_for_<b>Smith</b>_and_the_field_<b>Title</b>_for_<b>electrical</b>,_enter\:<p><tt>author\=smith_and_title\=electrical</tt>
Possible obsolete key: Revert_to_original_source
Possible obsolete key: Shortcut
Possible obsolete key: Size
Possible obsolete key: The_character_format_is_controlled_by_the_citation_property_'CitationCharacterFormat'_in_the_style_file.
Possible obsolete key: The_file<BR>'%0'<BR>has_been_modified<BR>externally\!
Possible obsolete key: The_label_of_the_string_cannot_contain_the_'\#'_character.
Possible obsolete key: The_paragraph_format_is_controlled_by_the_property_'ReferenceParagraphFormat'_or_'ReferenceHeaderParagraphFormat'_in_the_style_file.
Possible obsolete key: The_search_is_case_sensitive.
Possible obsolete key: This_makes_JabRef_look_up_each_file_link_and_check_if_the_file_exists._If_not,_you_will_be_given_options<BR>to_resolve_the_problem.
Possible obsolete key: This_operation_requires_all_selected_entries_to_have_BibTeX_keys_defined.
Possible obsolete key: Toggled_print_status_for_%0_entries
Possible obsolete key: Toggled_relevance_for_%0_entries
Possible obsolete key: Unable_to_autodetect_OpenOffice/LibreOffice_installation._Please_choose_the_installation_directory_manually.
Possible obsolete key: Unable_to_find_the_requested_Look_&_Feel_and_thus_the_default_one_is_used.
Possible obsolete key: You_can_add_additional_journal_names_by_setting_up_a_personal_journal_list,<br>as_well_as_linking_to_external_journal_lists.
Possible obsolete key: You_must_select_a_valid_style_file.
Possible obsolete key: You_must_select_either_a_valid_style_file,_or_use_one_of_the_default_styles.
Possible obsolete key: cut_entry
Possible obsolete key: delete_entry
Possible obsolete key: occurrences
Possible obsolete key: paste_entry
```""First, there are two syncLang.py, one in the root which emerged a week ago and one in scripts. Not sure why the second emerged, but I guess it might be to detect duplicates which I do not think that the old one managed (but it might be misplaced or experimental...).

There should be no obsolete keys and there are tests for that. Duplicates are not tested for, but are more likely to happen now that we have more relaxed merging rules. Not a proper answer, but at least some context. This is something that clearly can be improved. Especially duplicate detection and possibly tests for that. (New and obsolete should behave properly...)
 =||= Isn't it necessary to run them from gradlew?`I always ran the gradlew task
like it is doumented in the wikie

2016-04-06 8:40 GMT+02:00 Oscar Gustafsson notifications@github.com:

> First, there are two syncLang.py, one in the root which emerged a week ago
> and one in scripts. Not sure why the second emerged, but I guess it might
> be to detect duplicates which I do not think that the old one managed (but
> it might be misplaced or experimental...).
> 
> There should be no obsolete keys and there are tests for that. Duplicates
> are not tested for, but are more likely to happen now that we have more
> relaxed merging rules. Not a proper answer, but at least some context. This
> is something that clearly can be improved. Especially duplicate detection
> and possibly tests for that. (New and obsolete should behave properly...)
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly or view it on GitHub
> https://github.com/JabRef/jabref/issues/1109#issuecomment-206147730
 =||= FYI I used the one in the root directory (using command line), and indeed, these scripts are quite different in content.
 =||= We should only have one of these scripts and it should be inside the script directory not inside the root folder.
 =||= The script in the root directory should be deleted. It is outdated and will produce wrong results. I will do this right now. 

As @oscargus said, we have tests which ensure that there are no obsolete or missing translation keys.

As @Siedlerchr seid, it is advised to run the script through gradle which ensures it is executed with the correct python version.

```
$ ./gradlew -b localization.gradle checkTranslationsSummary
:checkTranslationsSummary
src/main/resources/l10n\JabRef_da.properties: 2 duplicates.
src/main/resources/l10n\JabRef_de.properties: 18 duplicates.
src/main/resources/l10n\JabRef_es.properties: 13 duplicates.
src/main/resources/l10n\JabRef_fa.properties: 1471 empty values.
src/main/resources/l10n\JabRef_fr.properties: ok
src/main/resources/l10n\JabRef_in.properties: 466 empty values.
src/main/resources/l10n\JabRef_it.properties: 231 empty values.
src/main/resources/l10n\JabRef_ja.properties: 149 empty values.
src/main/resources/l10n\JabRef_nl.properties: 792 empty values.
src/main/resources/l10n\JabRef_no.properties: 439 empty values.
src/main/resources/l10n\JabRef_pt_BR.properties: 22 duplicates.
src/main/resources/l10n\JabRef_ru.properties: 232 empty values.
src/main/resources/l10n\JabRef_sv.properties: 1 duplicates.
src/main/resources/l10n\JabRef_tr.properties: 78 empty values.
src/main/resources/l10n\JabRef_vi.properties: 584 empty values.
src/main/resources/l10n\JabRef_zh.properties: 545 duplicates.
src/main/resources/l10n\Menu_da.properties: 15 empty values.
src/main/resources/l10n\Menu_de.properties: ok
src/main/resources/l10n\Menu_es.properties: 1 empty values.
src/main/resources/l10n\Menu_fa.properties: 9 empty values.
src/main/resources/l10n\Menu_fr.properties: ok
src/main/resources/l10n\Menu_in.properties: 15 empty values.
src/main/resources/l10n\Menu_it.properties: 6 empty values.
src/main/resources/l10n\Menu_ja.properties: 4 empty values.
src/main/resources/l10n\Menu_nl.properties: 7 empty values.
src/main/resources/l10n\Menu_no.properties: 13 empty values.
src/main/resources/l10n\Menu_pt_BR.properties: 1 empty values.
src/main/resources/l10n\Menu_ru.properties: 6 empty values.
src/main/resources/l10n\Menu_sv.properties: 10 empty values.
src/main/resources/l10n\Menu_tr.properties: 3 empty values.
src/main/resources/l10n\Menu_vi.properties: 17 empty values.
src/main/resources/l10n\Menu_zh.properties: 6 empty values.

BUILD SUCCESSFUL

Total time: 10.612 secs
```

This shows that indeed we have duplicated values, for which we currently do not have any tests. Maybe, we should add a test for these as well. 

The gradle script has several tasks:

```
$ ./gradlew -b localization.gradle tasks
:tasks

------------------------------------------------------------
All tasks runnable from root project
------------------------------------------------------------

[...]

Other tasks
-----------
checkTranslations - Print empty and duplicate translations.
checkTranslationsSummary - Print summary of empty and duplicate translations.
compareAndUpdateTranslationsWithEnglishTranslation - Prints differences between the English translation and translations in other languages, and updates translations if possible.
compareTranslationsWithEnglishTranslation - Prints differences between the English translation and translations in other languages.
```
 =||= Cool! Haven't tried all the tasks! :+1:

A note is that if there are duplicates then the number of empty values are not printed. Would be a neat minor enhancement.
 =||= Duplicates in the property files are no longer possible if you want the build to work. 
 =||= "Add test to ensure no duplicates are in the property files"Fixes #1109 by adding a test which detects duplicates in property files. 

Currently, all duplicates have been removed, except the ca. 500 duplicates in the zh.properties file. "Simon Harrersimonharrer04/06/16, 12:20:43 PM
318.01149Normalize to Bibtex name format"Rightclick formatter in authors field goes wrong.

Minimal example:

```
Stefan Kolb and J{\""o}rg Lenhard and Guido Wirtz
```

turns out to be

```
Kolb, Stefan and J{\""o}rg Lenhard and Wirtz, Guido
```

but should be

```
Kolb, Stefan and Lenhard, J{\""o}rg and Wirtz, Guido
```
- [x] `NameListNormalizer` should be transformed to a Formatter on that occasion.

On another note: is this really THE BibTex name format? This should help with multiple firstnames?!""Yes, the Lastname, Firstname is THE BibTeX name format (if you should pick one). This is the only one that can handle Jr. and it also doesn't rely on ""von"" being spelled correctly (without capitals) for correct results.

A (possibly) related problem: The first name abbreviation for author column (and probably elsewhere) doesn't work as expected. Not sure if this happens to J{\""o}rg, but for sure H{\aa}kan is abbreviated to H{\aa}. instead of H.
 =||= What about Andreas Jr. {von Lastname}?
 =||= Assuming his name is Andreas von Lastname, Jr. the correct way would be ""von Lastname, Jr., Andreas"". Your entry results in: von Lastname, A. J. or A. J. von Lastname.

""In BibTeX's world view, a name has four components:
1) First name (which includes any middle names provided)
2) von (""de la"" or ""van der"" like components)
3) Last (Surname without the von part)
4) Jr (Things like ""Jr."", ""III"", etc)""

http://nwalsh.com/tex/texhelp/bibtx-23.html says

 To summarize, you may type a name in one of three forms:
""First von Last"" ""von Last, First"" ""von Last, Jr, First""
You may almost always use the first form; you shouldn't if either there's a Jr part or the Last part has multiple tokens but there's no von part. 
 =||= There are more issues here:

```
Heng-Yu Jian and Xu, Z. and Chang, M.-C.F.
```

becomes

```
Heng-Yu Jian and Xu, Z. and Chang, M. -. C. F.
```

but I would expect

```
Jian, Heng-Yu and Xu, Z. and Chang, M.-C. F.
```

```
Oscar Gustafsson and Linda S. DeBrunner and Victor DeBrunner and H{\aa}kan Johansson
```

becomes

```
Gustafsson, Oscar and Linda S. DeBrunner and Victor DeBrunner and H{\aa}kan Johansson
```

while I would expect

```
Gustafsson, Oscar and DeBrunner,  Linda S. and DeBrunner, Victor and Johansson, H{\aa}kan
```

So, some observations/guesses:
- Adding spaces after dots is good, unless there's a dash
- Last names with double capital letters doesn't work (Victor Debrunner resulted in Debrunner, Victor, but Linda S. Debrunner remained the same)
- First names with dashes doesn't work
 =||= It is worth noting that the function producing the author string for the table column works better.
 =||= See https://github.com/JabRef/jabref/pull/319#issuecomment-155918893 - maybe test cases for `net.sf.jabref.model.entry.AuthorList` should be added testing for your input strings and whether they are parsed correctly.
 =||= I think we should use BibtexNameFormatter, since that method is quite likely to get it correct. :-)
 =||= "Replace NormalizeNamesFormatter by AuthorList and so fix #318"- Fixes #318 (and refs #950)
- Removes comma as delimiter of author names (in NormalizenamesFormatter).
  The problem is that comma separated authors cannot be distingued from one author in BibTeX format.
  For example `Name, della, first` could be three names separated by commas or if interpreted as valid BibTeX string it is one author with lastname=name, jrpart=della, firstname=first.
- Add colon as delimiter of author names (in AuthorListParser).

Thanks at all, but especially @oscargus, for creating many tests. Made implementing this PR way easier! 
## 
- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)"Tobias Dieztobiasdiez04/10/16, 06:30:42 PM
1270.01277Delete temporary files after saving a database"JabRef version 3.3 on Linux 3.16.7-35-default (openSuSE 13.2)

Steps to reproduce:
1. Activate autosave.
2. Autosave files not wriiten into the same directory as the *.bib file but to /tmp.
3. Even after saving, autosave files persist.""I don't think this behaviour is an enhancement but rather a bug. A version of a database that has been edited is written to /tmp every five minutes by default as long as you don't save it to the working directory. Quite annoying if it's large.
 =||= @adessec When it's always the same temp file that is updated than it is totally okay and totally consistent behavior. 
However, it would be nice to configure the autosave to the working directoy.
 =||= Unfortunately it is not always the same temp file - they just multiply. At the moment, I have one small +-JF...tmp, one small jabref...tmp, one large jabref...tmp, and nine large jabref...save.bib. Nothing has been updated.
 =||= According to the [help](http://help.jabref.org/en/Autosave/)

> The autosave file will be deleted whenever you actively save the database, and if you quit JabRef normally.

So if this does not work, then it is indeed a bug. Moreover, according to the same help page, the auto save file should actually be named `$file$` (so extra dollar signs) and be put in the same folder (and I get same expression reading the code).

Moreover, I can't find anything in the code which would suggest that a file is written to a `/tmp` folder...
 =||= Ok, I think I found the problem. Should be fixed with #1277.
 =||= Thank you for fixing this.
 =||= Thank you for reporting the bug and helping JabRef. 

PS: Donations keep us going. ;-) http://www.jabref.org/#donations
 =||= "Fix 1270: autosave is working again"Fixed #1270. The auto save file was actually not saved at the desired place and thus the temp files were left over.
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)"Tobias Dieztobiasdiez04/25/16, 12:39:30 PM
651.01443Author parser has problem with latex symbolsThe author `H{'e}l\grave{e}ne Fiaux` is shown as `Fiaux, H'e.` in entry preview. Would have expected `Fiaux, H`."Yeap.

I remove all the latex stuf, and opened ok (the EOF error persist).
 =||= One should probably use the bibtex-VM-based name formatters.
 =||= Note that the above is a bad example since the correct way to write the acute accent is `\'{e}` and `H\'{e}l\grave{e}ne Fiaux` is correctly written as `Fiaux, H.`.

However, `H{e}lene Fiaux` results in the unexpected `Fiaux, He`.
 =||= I propose to close this as it is only a very minor bug which only occurs in very special circumstances with bad input. Any objections @JabRef/developers ?
 =||= "Fix #651: Improve parsing of author names containing braces"Fixes #651.
- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)"Tobias Dieztobiasdiez05/24/16, 12:26:22 PM
1450.01463Entry editor missing after changing autocompletion settings"Using 3.3 release (64 bit) under Windows 10 Pro x64 Java 8 91.
Disabled autocompletion and entry editor disappeared immediately (tried C-e, double click and menu icon to no avail). Resetting settings from dialogue did not solve the problem. Neither uninstalling and reinstalling Jabref.

`java -jar JabRef-3.3.jar -d all` at the command prompt solved the problem.

importing the saved settings from just after the problem started (attached file) reproduces the problem. (My settings have a very long history as I have been using Jabref for ages...).

The bad preferences are in the file below.

[jabref.prefs.txt](https://github.com/JabRef/jabref/files/281949/jabref.prefs.txt)""@aphalo: Thanks for reporting!

I can confirm that importing the above preferences disables the entry editor. I can add that also importing other working preferences does not make the editor re-appear. Only the solution you described repairs JabRef""s behavior.

Starting from default preferences and disabling auto completion is all that is needed to reproduce this bug.
 =||= Actually the entry editor is not missing - but due to a bug it has the height of only 1 pixel. As the bug occurs when the preferences dialog is closed even restoring the default preferences was not possible using the UI.

The bug should be fixed in the references PR - please verify using a build from: http://builds.jabref.org/fix-1450/
 =||= I am having this issue in the Mac right now: on the latter builds (Jabref 4). 

I was using it fine last week. Suddenly, double clicking the entry in the table doesn't open the editor. It might have sth to do with the java.  =||= Restarting the computer; nor using the menu or the shortcut are helping. Downgrading to the official release (3.8.2) also doesn't fix it.  Completely removed and re-installed it. Still not opening the editor. 

This is strange.  =||= Resetting the Preference fixed it.  =||= "Fix for #1450"This fixes #1450 

After changing the preferences the mainTable is using a new `SplitPane` object to divide table and `EntryEditor` - in the course of creating the actual table existing entryEditors are closed which causes a saving of the current `EntryEditor` height in the prefs. As this is calculated based on the (already new) `SplitPane` a wrong value ""1"" is stored.

To prevent this the previous state of the divider for the SplitPane is restored based on the prefs before the mainTable is recreated.
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)"Matthias Geigermatthiasgeiger05/31/16, 01:30:49 PM
1181.01470"""Normalize to BibTeX name format"" should help when manually importing entries.""JabRef as of 2016-04-12, 39f7ed7

Steps:
1. Use ISBN to BibTeX fetcher with 978-3-642-02373-6
2. Go to required fields
3. Editor is empty
4. Go to http://www.springer.com/us/book/9783642023736
5. Copy the editors string `Ali Babar, M., Dingsøyr, T., Lago, P., van der Vliet, H.`
6. Right click in the editors field and select ""Normalize to BibTeX name format""
7. Result: `Ali Babar, M., Dingsøyr T. Lago P. van der Vliet H.`

Expected: `Babar, Ali and M. and Dingsøyr, T. and Lago, P. and van der Vliet, H.`

JabRef 3.2: `Babar, Ali and M. and Dingsøyr and T. and Lago and P. and van der Vliet and H.`

Refs #318 and  #950""The comma as a separator of author names was removed in https://github.com/JabRef/jabref/pull/1149. It is just not clear how to consistently guess the right naming schema. Just replace the commas separating authors by semicolons and everything should work as expected. 
 =||= Ah, great hint. Then, the implementation is easy:

Check
- only `,` (no `;`, no `and`)
- even number of `,`

Then, convert every second `,` to `;` and then run the implemented algorithm.
 =||= But then `Name, della, first` would be recognized as two names although it is valid BibTeX syntax for one name with vonPart = della.
 =||= Oh, I see it at http://maverick.inria.fr/~Xavier.Decoret/resources/xdkbibtex/bibtex_summary.html, section ""Names specifications"". According to that explanation `della` would be the `Jr` part, not the `von` part. Reading that and also assuming that I never saw three commas, I would accept that this ""helper"" formats 1% of the cases wrong.
 =||= -- sorry comment should be placed in the PR
 =||= Fixed by #1470
 =||= ""Fixes #1181: Improved ""Normalize to BibTeX name format""""Fixed #1181: Improved ""Normalize to BibTeX name format"": Separated names with colons only work now
- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
- [x] Screenshots added (for bigger UI changes)"bruehldev09/12/16, 09:02:05 PM
1481.01488Mac OS X binary seems broken for JabRef 3.4 release"I downloaded JabRef 3.4 binary from JabRef homepage and  tried to start Application by double click on El Capitan with java 1.8. The leftmost menu ""JabRef"" appears, but other menus don't appear and the program cannot be quitted.

At this stage, running 'ps ax | grep JabRef' gives 'path/to/JabRef.app/Contents/MacOS/JavaApplicationStub' so I tried to run it from the command line. Then it emits following stderr:

> JavaApplicationStub[3373:64431] Apple AWT Startup Exception: Cannot lock focus on image <NSImage 0x11bf59070 Size={0, 0} Reps=()>, because it is size zero.
> JavaApplicationStub[3373:64431] Apple AWT Restarting Native Event Thread

The program runs successfully if it is run manually by ""java -jar path/to/JabRef.app/Contents/java/app/JabRef-3.4.jar"".""@chochreiner Could you please have a look if you have some time?
 =||= the problem is most likely this commit 327b16452a83377e24e7966fedc1d3fc87d2b224 - I may find some time have a more detailed look at it later this week
 =||= I tried downloading the latest release and the development version and had the same problem. Run-in Mac OS 10.10.5. Both seemed to install fine but when opening no windows appears. it also would not quit and required a Force Quit.
 =||= Have same problem on OS X 10.11.5
 =||= @koppor do you have a license for install4j so that I can test the build on OSX?
 =||= I sent you the JabRef license code.
 =||= This issue should be fixed now. You can use a development Version from http://builds.jabref.org/master/ which should be working as expected.
 =||= Great, thanks! New dev version works fine :)
 =||= "Fixes build for OSX #1481"Fixes #1481
The metadata of the logo was broken which caused Jabref to be stuck at startup on OSX."Christoph Hochreinerchochreiner06/09/16, 01:29:36 PM
1430.01489"Reproducible bug in ""review changes"" ""JabRef version 3.3 and also in
JabRef 3.4dev--snapshot--2016-05-19--master--ed638e2
windows 7 6.1 amd64 
Java 1.8.0_66

When multiple users (in the test case: 2) work on the same file which is located on a network drive.

Steps to reproduce:
1   (Pc1) open database       (Pc2) open database
2   (Pc1) create test  
3   (Pc1) save  
4                             (Pc2) review changes
5                             (Pc2) add entry-accept
6   (Pc1) save  
7                             (Pc2) review changes 
8                             (Pc2) delete entry accept
9                             (Pc2) save
10  (Pc1) review changes  
11  (Pc1) delete entry-not accept  
12  (Pc1) save  
13                            (Pc2) review changes
14                            (Pc2) add entry-accept
15  (Pc1) save  
16                            (Pc2) review changes 
17                            (Pc2) delete entry -not accept

After step 5 both local copies should be identical with the file content. Regardless, after saving again another change shows up and now wants to delete the previously added file.

On a large scale you add up with multiple copies of the same reference and/or a deleted reference, dependent on what changes each user accepts. We had to go back to 3.2, it also shows glitches with multiple users on one file but less often and so far, not reproducible.""Thanks for your report :+1: 
We are working on improving multi-user support. Stay tuned.
 =||= Refs #970.
 =||= From time to time we have 3-4 users working on the same db.bib file (about 6500 referencies in it). File is located on network drive. Sometimes someone loses their changes. Not all users are so advanced to see _Review changes_ block in the sidebar.

As I see the workflow: Two users open db.bib file and edit some entries (add/fix/remove) for a long time. Each JabRef instance remembers what entries are modified by local user. Regulary (after autosave timeout) local file with changes is saved. When second instance finds that remote file is changed it should merge changes from local memory and remote file that are not intersecting (and maybe run autosave again in the background).

For intersecting changes show _Review changes_ and highlight (blink?) it somehow on sidebar.

Thanks.
 =||= The bigger problem for us is not that _Review changes_ is not visible enough, it just has a bug.
We did some more testing and can even reproduce it on one PC with two instances of JabRef opened.
The easiest test is:
- open the same file in two different JabRef instances (1 and 2)
- in 1: add new BibTex entry (article)
- in 1: save file
- in 2: _Review changes_ shows up -> click it and accept changes (do not save the file)
- in 1: don't change anything and save file again
- in 2: _Review changes_ shows up -> now it wants to delete the added article while nothing has changed!

Version 3.2 does not have this issue but 3.3 and 3.4 do.

I know you work hard on the data base connection feature but maybe there is a fast fix for this in the meantime...
 =||= @JabRef/developers WDYT?
 =||= I would try to create a test case checking for this behavior. Then run git
bisect to find out which commit smashes the behavior. My guess is that
#1126 could have something to with it, but I'm not sure at all.
 =||= #1126 is not related as it was released only in 3.4, but not in 3.3. Hence, the issue is caused by something else. 
 =||= Error somehwere in between these 80 commits https://github.com/JabRef/jabref/compare/a71c2b0de5568f11aa73a1dbafc8b82e5da8b91a...fc7e175b3e79c268d6210a83ad307e7e1710f28f

Will try to refine it further.
 =||= Quite complicated. It is probably related to the IDs of BibEntries. Here my git bisect log

```
# bad: [fc7e175b3e79c268d6210a83ad307e7e1710f28f] Removed method placeDialog
# good: [a71c2b0de5568f11aa73a1dbafc8b82e5da8b91a] Merge pull request #981 from oscargus/nomoreprintstacktrace
git bisect start 'fc7e175b3e79c268d6210a83ad307e7e1710f28f' 'a71c2b0de5568f11aa73a1dbafc8b82e5da8b91a'
# skip: [59e38da438d097a7701225789279a5e52c2fbf47] Merge pull request #1020 from oscargus/filefieldtranslations
git bisect skip 59e38da438d097a7701225789279a5e52c2fbf47
# skip: [31125c16070c351cb12299cffdd8dca3724a911c] French localization: translation of empty strings
git bisect skip 31125c16070c351cb12299cffdd8dca3724a911c
# skip: [e6357375e4799c8aaae278856e817784f08346a9] Disabled NPE test
git bisect skip e6357375e4799c8aaae278856e817784f08346a9
# skip: [01772dc5082523ddc22558846f09153edd85bd78] Merge pull request #1016 from oscargus/showzoomlevel
git bisect skip 01772dc5082523ddc22558846f09153edd85bd78
# skip: [5affc1b26aa9d2bf3ee3365ae78007bd8f1cdeb5] Removed unused support for creating a new entry by dragging a file and dragging multiple files
git bisect skip 5affc1b26aa9d2bf3ee3365ae78007bd8f1cdeb5
# skip: [8fd97f5363584a00b3c2b14cb813f4d09cb66de5] Simplified translations in SynchronizeFileField
git bisect skip 8fd97f5363584a00b3c2b14cb813f4d09cb66de5
# skip: [1ffcedf9847d3cdc5ae1afe561b85b773dc07848] Remove Optional for String value and enforce empty String
git bisect skip 1ffcedf9847d3cdc5ae1afe561b85b773dc07848
# skip: [8c208a0380ecf96f14272f71326a65c7299656f4] Use static method inside tests
git bisect skip 8c208a0380ecf96f14272f71326a65c7299656f4
# skip: [be288d086ceb3b24f45d6bde37f71fbdd96a7840] Fixed problem with Filepath Paths.get(url.toUri()).toFile() is now the correct way to handle Files from URLs. See http://stackoverflow.com/questions/6164448/convert-url-to-normal-windows-filename-java
git bisect skip be288d086ceb3b24f45d6bde37f71fbdd96a7840
# skip: [57963f792beab60a4d43cd95056c34e997d58207] Merge pull request #982 from tobiasdiez/importOrder
git bisect skip 57963f792beab60a4d43cd95056c34e997d58207
# good: [792995792a0c75580713b687307f64145490a9d1] Fix compilation error
git bisect good 792995792a0c75580713b687307f64145490a9d1
# skip: [e477631e657359fba6e7dc3af758b18be93fc7ac] Merge pull request #1010 from oscargus/exportformattest
git bisect skip e477631e657359fba6e7dc3af758b18be93fc7ac
# good: [7965ce6496e5340642294dcc6d8c73023fc32165] Merge pull request #974 from tobiasdiez/alwaystrim
git bisect good 7965ce6496e5340642294dcc6d8c73023fc32165
```
 =||= Okay, I have wrote a fix, but I am not completely sure whether this really solves the problem. Maybe you could also help to test this. In a few minutes, a new release in the fix-1430 folder will be available at http://builds.jabref.org/fix-1430/ - could you confirm that this fixes your issue?
 =||= WOHOOO - it works!
I first tested the wrong fix (fix-1476) ...
fix 1430 does resolve the short test case I submitted yesterday.
We'll test it some more during the day and I'll keep you updated.
thx a lot!
 =||= Excellent. Sadly, there are no automated tests for the collaboration feature - hence we currently rely on user feedback. But we are open for contributions in that area, if someone wants to put this under test. 
 =||= @wilthan any news regarding further testing?
 =||= @simonharrer: we did not see any more issues during our regular work. Typically we have 3-5 people working with one network file for about 8h a day.
-> the fix 1430 seems to have resolved the issue
thx again!
 =||= Ok, will merge it in. Thanks for the feedback! :)
 =||= "Try to fix 1430, worked locallyCould have fixed #1430 Simon Harrersimonharrer06/13/16, 03:57:34 PM
1431.01517Importer open dialog improvements"![image](https://cloud.githubusercontent.com/assets/2141507/15421447/9e12e31a-1e73-11e6-950c-0037dc4708c0.png)

The open dialog of the importer `import into...(new | current) db` needs several improvements:
- [ ] the file type selection must filter the view based on suppported types
- [ ] the file type selection should display supported file endings for each type, e.g., medline|Pubmed? (*.nbib, ...)""Some of the backend code required for this improvement is available with https://github.com/JabRef/jabref/pull/1207.
 =||= Regarding file filters, I recently added the code for this in the BrowseAction.
Have a look at this commit: #1304 
The whole code for file opening will be finally reworked in #1336 (Atm I don't have time for that)
 =||= "Import dialog shows file extensions and filters the view"Fixes #1431. 

The open dialog of the `importer import into (new | current) database` now shows the filextensions behind the filetypename and filters the view based on it (if no extension is know it shows all files).

Right now almost no extensions are known, but this should change when #1487 is merged.
- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)"Christian Bartschchriba06/28/16, 10:00:33 AM
1527.01583'Get BibTeX data from DOI' Removes Marking"If I right-click on a 'marked' entry  in the main table and successfully update the BibTeX data from DOI, the entry is no longer marked.

Version: 3.5dev, commit 87389811baa50f750853e2b1fd1de07e10bf13e3""Thanks for the report! 

Behavior is confirmed...

We are accepting pull requests... :stuck_out_tongue_winking_eye: 
 =||= "Fixed #1527 and some refactoring/cleanups"Fixed #1527 and did some refactoring and cleanups.
- [x] Change in CHANGELOG.md described"Oscar Gustafssonoscargus07/15/16, 07:55:59 AM
1249.01584Date formatter"Using more and more biblatex format, I would like to have the possibility to have a date formatter. 
Could be similar to already existing one : \format[CurrentDate]{yyyy.MM.dd}""So if I understand you correctly, you want a formatter which formats the date field to a specific form (say yyyy/mm/dd)?
 =||= Yes exactly! 
For now date field is output as yyyy-MM-dd but I would like the possibility to use at MM/yyyy for my document's needs. Thanks.
 =||= @melTr Biblatex explicitly needs the Date format in ISO, from the BibLaTeX reference manual: 
http://tug.ctan.org/macros/latex/exptl/biblatex/doc/biblatex.pdf
2.3.8 Date Specifications 

> The date fields date,origdate,eventdate, and urldate require a date
> specification in yyyy-mm-dd format. Date ranges are given as yyyy-mm-dd/yyyy-mm-dd.[...]

The formatted display of the date in the citation/bibliography is depending on the biblatex style and language you use and of couse if you provide the arguments:
See 3.1.1 Load-time Options for an example
 =||= @Siedlerchr : @melTr is talking about a LayoutFormatter to export the .bib-file to some other suitable format (or to use with OpenOffice/LibreOffice).
 =||= Ah now I get it :) It was a bit confusing for me.
 =||= "Added layout DateFormatter, see #1249"Added a configurable layout formatter for dates. Fixes #1249.
- [x] Change in CHANGELOG.md described
- [x] Tests created for changes"Oscar Gustafssonoscargus07/15/16, 08:22:56 AM
1639.01641Jabref websearch: Google Scholar shows no results on second pop-up menu"JabRef 3.5
windows 10 10.0 amd64 
Java 1.8.0_101

The Jabref websearch with Google Scholar does not show any results on the second pop-up menu
Steps to reproduce:
1. Set Web search in Jabref to ""Google Scholar""
2. Copy ""On the relationship between tooth shape and masticatory efficiency: a finite element study"" into the Web search field
3. Fetch
4. One article is found
5. Tick the ""Keep"" box and click on ""OK""
6. The second menu turns up: No entry to select is shown. The ""Select all"", ""Deselect all"", ""Delete"", ""Generate now"", ""OK"" and ""Cancel"" buttons are all shown as activable.

I guess this is the exact same problem as described in:
https://sourceforge.net/p/jabref/mailman/message/32485880/

I haven't had this problem with an earlier development version of Jabref 3.5 (JabRef-3.5dev--snapshot--2016-06-28--master--a24b544), but since I've upgraded I've encountered it now a couple of times. Can you confirm this issue?

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->""I can confirm it. Probably related to the email you found in that it is a consequence of Google Scholar changing format on the web page. Here it seems like they changed relative links to full links as the error message reads:

```

12:20:11.696 [JabRef CachedThreadPool] WARN  net.sf.jabref.importer.fetcher.GoogleScholarFetcher - Cannot download entry from Google scholar
java.net.UnknownHostException: scholar.google.comhttp
    at java.net.AbstractPlainSocketImpl.connect(Unknown Source) ~[?:1.8.0_101]
    at java.net.PlainSocketImpl.connect(Unknown Source) ~[?:1.8.0_101]
```

so what was earlier a relative link `/...` is now a full link `http://...`.
 =||= There will be a fix at http://builds.jabref.org/fix1639 in five or so minutes that you can try out.
 =||= Thank you very much! Man, Jabref and its developers are just great - the more I'm using it, the happier I am I haven't switched to a (commercial) alternative!
 =||= I can confirm that the bug has been fixed in:

JabRef 3.6dev--snapshot--2016-07-29--fix1639--e838541
 =||= Great! Thanks for the positive words and for reporting and checking it! Not always that it is solvable in five minutes/one line though. :-)
 =||= Indeed thanks to everyone on the Jabref team for geting this very useful feature back up and running.  Nice one guys :-) 👍 
 =||= "Fixed #1639"Fixed #1639 as Google now moved the link generation to http://scholar.googleusercontent.com the full link is now provided.
- [x] Change in CHANGELOG.md described
- [x] Manually tested changed features in running JabRef"Oscar Gustafssonoscargus07/29/16, 10:59:42 AM
1716.01717Parsing/Writing of Entry fields containing an @ broken"JabRef version 3.6dev

Steps to reproduce:
1. Use the character ""@"" in a field of an entry
2. Save the file; Entry looks like this:

```
@Article{asda,
  author = {böser Tit@l},
  title  = {change...},
}
```
1. Change the entry
2. Save again - file is broken:

```
@Article{asda,
  author = {böser Tit

@Article{asda,
  author = {böser Tit@l},
  title  = {change...},
}
```

I don't have any clue why this is happening. But this is clearly a blocker for a 3.6 release. @lenhard You want to waste some of your valuable vacation time? :wink: ""Caused by https://github.com/JabRef/jabref/pull/1638/files#diff-db4bf84f8c8b14426629f6fbb0ac1665R637 ...

Let's see whether I can quickly fix this without breaking the ""@Comment"" functionality introduced in #1638 
 =||= Original reported USER robustness feature request.
Ver2.9.2 managed to read the file that had been corrupted by Ver3.6dev, but could not open if   Ver3.6dev saved it/exported it again! The development version could open the file it created, but not any second saved or exported versions! Doesn't make sense to me, but again a pre V3 seems more robust. Robustness is more important than speed for me.

Is it possible to read .bib a file in a way that, if a single entry corrupts, JabRef detects the start of the next entry so that only the affected part is lost (not the whole file)? Exporting corrupt entries to ""corrupt bib entries.txt"" would allow easier checking and resurrecting the entries as required by non-experts.

Sometimes I do direct PFE edits on my bib file. This is a great strength of JabRef/.bib files and so far so good, but entry corruption is easy. 

The current error message for this issue identified the last line in the file, and I only identified it by luck the last listed entry in Jabref corresponded to the fault in the file! By adding a 'new entry' identifier to the read in parser the error location could also be more closely specified. I imagine searching for @'something' and where the 'something' was all entry types used in the .bib file. If this adds too much time if put inline could it be a 'try read corrupt file' option?
 =||= "Fixes broken serialization of bibentries containing an @"Fixes #1716.
- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- ~~Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- ~~Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)~~

As this is rather crucial it would be great if someone else checks what I have done ;-)

To explain: 

```
-                // get the text before the entry
-                String prolog = parsedSerialization.substring(0, parsedSerialization.lastIndexOf('@'));
```

... did not work properly if an `@` is used within an entry.

However, determining from the complete parsed serialization where the entry begins and what are comments before the entry is not so trivial. Thus, I added another attribute in the bibentry `commentsBeforeEntry` in which the serialized form of the comments stored in front of the entry is directly saved during parsing the entry."Matthias Geigermatthiasgeiger08/12/16, 10:07:06 AM
1726.01732Big undo/redo text in status barThe more advanced undo/redo messages are quite nice (I think), but now I realized that they are also shown in the status bar on undo/redo. I think that easiest (and best?) solution is simply to remove the update of the status bar on undo/redo."I'm not sure whats the point here. Can you explain a little bit more please? 
 =||= It is just a heads up that I have realized that the following can happen:

<img width=""794"" alt=""capture16"" src=""https://cloud.githubusercontent.com/assets/8114497/17637408/994d3990-60e3-11e6-8cf4-7b119811e822.PNG"">

Just so no one have to write upset issues about it. :-)
 =||= Oh ouch ok...
 =||= "Changed possibly giant undo/redo texts in status field"Fixes #1726. Now it only says ""Undo"" or ""Redo"", although the (much) more detailed information can be obtained from the tooltip.

Nothing in CHANGELOG since this is an inter-version issue."Oscar Gustafssonoscargus08/14/16, 10:31:06 PM
1724.01733ConcurrentModificationException when removing a field in the source editor"JabRef version latest dev on both CentOS and Windows 10

Steps to reproduce:
1. Remove a field completely in the source editor
2. Save database (or change tab or change entry)

```
Exception in thread ""AWT-EventQueue-0"" java.util.ConcurrentModificationException
    at java.util.HashMap$HashIterator.nextNode(HashMap.java:1437)
    at java.util.HashMap$EntryIterator.next(HashMap.java:1471)
    at java.util.HashMap$EntryIterator.next(HashMap.java:1469)
    at net.sf.jabref.gui.entryeditor.EntryEditor.storeSource(EntryEditor.java:812)
    at net.sf.jabref.gui.entryeditor.EntryEditor.access$16(EntryEditor.java:780)
    at net.sf.jabref.gui.entryeditor.EntryEditor$StoreFieldAction.actionPerformed(EntryEditor.java:1241)
    at net.sf.jabref.gui.entryeditor.EntryEditor.updateField(EntryEditor.java:952)
    at net.sf.jabref.gui.entryeditor.EntryEditor$FieldListener.focusLost(EntryEditor.java:1026)
    at java.awt.AWTEventMulticaster.focusLost(AWTEventMulticaster.java:230)
    at java.awt.Component.processFocusEvent(Component.java:6425)
    at java.awt.Component.processEvent(Component.java:6289)
    at java.awt.Container.processEvent(Container.java:2236)
    at java.awt.Component.dispatchEventImpl(Component.java:4889)
    at java.awt.Container.dispatchEventImpl(Container.java:2294)
    at java.awt.Component.dispatchEvent(Component.java:4711)
    at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1954)
    at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:995)
    at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:661)
    at java.awt.Component.dispatchEventImpl(Component.java:4760)
    at java.awt.Container.dispatchEventImpl(Container.java:2294)
    at java.awt.Component.dispatchEvent(Component.java:4711)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
    at java.awt.EventQueue.access$500(EventQueue.java:97)
    at java.awt.EventQueue$3.run(EventQueue.java:709)
    at java.awt.EventQueue$3.run(EventQueue.java:703)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)
    at java.awt.EventQueue$4.run(EventQueue.java:731)
    at java.awt.EventQueue$4.run(EventQueue.java:729)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

```"Fixed ConcurrentModificationException when removing a field in the so…"Fixes #1724. Really simple it turned out...

No CHANGELOG since I'm not sure if it was in 3.5.
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Oscar Gustafssonoscargus08/14/16, 10:30:21 PM
1519.01734"ISBN2BibTex  adds the word ""Seiten""  in Biblatex pagetotal number ""JabRef version 3.4  Windows 7 x64

ISBN2BibTex fetcher includes the word ""Seiten"" in pagetotal.

Sample ISBN:
978-0131873216

In the pagetotal field, I get ""988 Seiten"".
It should be only the number.
Quote from BibLaTeX manual:

> pagetotal
> field (literal)
> The total number of pages of the work""Hm, maybe this is related to the external service.
 =||= Yeah, that seems to be related to  the Ebook.de API.
I maybe find some time to look into that. 
 =||= Like I thought, it is already included in the Bib(la)tex response from the ebook.de API.
@koppor  Do you know who is responsible for the API from ebook.de? 
 =||= I contacted Oliver from @freiheit-com. Let's see.
 =||= @koppor Any news on this topic?
 =||= I wrote them a reminder email just now.
 =||= If it is not solved externally, I would suggest adding a simple replace before 3.6 is released.
 =||= "Removed Seiten from pagetotal and fixed a totally unrelated NPE"Fixed #1519 and an unrelated NPE due to bad documentation (it says that it can be null, but it couldn't and there is a use case where it now is null). Added tests for the fixed NPE.
- [x] Change in CHANGELOG.md described
- [x] Tests added
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Oscar Gustafssonoscargus08/14/16, 05:53:20 PM
1499.01755 { } braces in author/editor names are not treated correctly"JabRef version 3.4 on Windows 10

Having a corporate as author (editor) and inputting it in Jabref in curly braces (as mentioned in Section 2.3.3. of the manual of the biblatex package) Jabref should recognise this and display it in the entry table accordingly.

For normal entries (forename and surname) there is already some recognition, because only the surname is shown. This should be expended to corporates.

This bug is related to #1497, which concerns the export of such corporates, while here the display inside Jabref is concerned.

![image](https://cloud.githubusercontent.com/assets/19827673/16057666/69b2fddc-327b-11e6-909a-e0a6a39a0bf4.png)""Thanks for your report! 

I just confirmed that this is not working as expected. It was working in earlier versions of JabRef (might be introduced by #1282 - but have not checked it, yet).

A kind of workaround: In _Options_ > _Preferences_ > _Entry Table_ the author display style for the entry table can be configured. Using one of the first three option ""Show names unchanged"" or ""Show firstname lastname"" in combination with ""Do not abbreviate names"" displays the corporate author correctly - but of course this also has an impact on displaying all other authors, too.
 =||= Same problem also for other names which are using braces - see #1528 
 =||= Just a minor note: `AuthorList` seems to parse this as well as `\relax` properly. I wonder where it goes wrong...
 =||= There is a working version to be tested at http://builds.jabref.org/fix1499/

Turned out that the problem was very simple to solve. So simple that it was hard to find...
 =||= "Fixed name column rendering #1499 and #1531"Fixed #1499 and #1531. Better to format the author names before converting LaTeX to Unicode... Bah!

<img width=""368"" alt=""capture17"" src=""https://cloud.githubusercontent.com/assets/8114497/17715209/7202747c-6403-11e6-877b-723da18781fe.PNG"">
- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Oscar Gustafssonoscargus08/17/16, 07:20:09 AM
1762.01785Google Scholar: Preview with wrong encoding"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef 3.6dev--snapshot--2016-08-16--master--257ba21 windows 10 10.0 amd64 Java 1.8.0_101

Steps to reproduce:
1. Web search interface
2. Google Scholar
3. Fetch
4. Preview with wrong encoding

![scholar](https://cloud.githubusercontent.com/assets/15456836/17736650/550a85cc-6489-11e6-9f4f-d0068af0cac6.png)""Confirmed in latest dev build. Mabye somehow related to #1694 
Search term used: `non linear component analysis as a kernal eigenvalue`
 =||= Have not checked the source... @oscargus Have you made a change in one of your recent PRs that always an encoding must be set in the fetchers? I don't exactly remember this... 
 =||= Yes, put what I did was to remove

```
public String downloadToString() throws IOException {
   return downloadToString(Globals.prefs.getDefaultEncoding());
 }
```

and replace  `downloadToString()` with a direct call to `downloadToString(Globals.prefs.getDefaultEncoding())`, see https://github.com/JabRef/jabref/commit/90044ac423016f8b5931ea6a4067ff314ed3047a

While this is the only change from our side, it is not obvious that this should affect it.
 =||= Could it be that they are not using HTML-encoded characters anymore, but UTF-8?
 =||= Okay... I think I got it.

The problem is that we are using the user agent ""JabRef"" google is serving the results not in ""UTF-8"" but in ""ISO-8859-1""... We are using `new URLDownload(urlQuery).downloadToString(Globals.prefs.getDefaultEncoding());` - which is generally a bad idea. Thus it works if a user is using ISO-8859-1 as default encoding but not in all other cases...

The question is how solve this... we can either switch the user-agent to a ""Mozilla-like-String"" to get UTF-8 data from Google _AND_ hard-code `downloadToString(StandardCharsets.UTF_8)` or we use ""JabRef"" and use the ISO charset (both variant also solve #1694)

Opinions?
 =||= Hm. Theoretically UTF-8 would be the prefered version. Not sure if google treats our ""JabRef"" Useragent any differently than any other string (except for the encoding)
 =||= I think hard-coding is fine. As long as the imported entries are converted
to plain ASCII-LaTeX it should work fine for either case (probably slightly
better for UTF-8, depending on how clever Google is). If we should try to
convert to some other encoding we open for lots of work (or at least the
need for some library).

I'd go with some Mozilla-like-string and UTF-8, as is done in some of the
other fetchers (I assume there is no way to tell Google what encoding we
want, or, as part of the download read the header, get the header
information and use that in a clever way). (ISO wouldn't work for #1694,
right?)
 =||= Best would be JabRef as user agent and UTF-8 as response, if this is somehow possible. 
 =||= > Try adding ""&oe=utf-8"" to the calling URL. 
> Found at http://www.codesimple.net/2006/08/google-maps-utf-8-problem_9034.html

Will check later if this also helps for Google scholar queries...
 =||= "Tell google explicitly to send UTF-8 and always use UTF-8"Fixes #1762 and #1694

Use `&oe=utf-8` to tell google to deliver content in UTF-8 - more over explicitly use UTF-8 in the JabRef code instead of beeing dependent on the prefs.
- ~~[ ] Change in CHANGELOG.md described~~ - has been introduced in dev version
- [x] Manually tested changed features in running JabRef"Matthias Geigermatthiasgeiger08/20/16, 09:52:53 PM
1760.01809Preview not updated properly"JabRef 3.6dev--snapshot--2016-07-29--fix1639--e838541
windows 10 10.0 amd64 
Java 1.8.0_101

Steps to reproduce:
1. Select an entry. The entry preview (correctly) appears at the bottom of Jabref.
2. Now select several entries, e. g. the first two entries below the entry you had intially selected. I've done this by holding SHIFT and clicking onto the last entry I want to select.
3. Three entries are now selected. The entry preview of the initially selected entry is still visible. So far, so good.
4. Now select another entry among the three entries that you selected beforehand. This is now the only entry that is selected (indicated in ""blue"" by Jabref). The entry preview, however, is not updated properly. It still shows the entry preview of the entry that you had selected at the start.
5. If you select now another entry and then go back to the entry selected in 4), the entry preview will be updated correctly.""Thank you for your report :+1:
This should be fixed in current `master`. Please try the latest build from http://builds.jabref.org/master.
 =||= I can confirm that this issue has been fixed in:
JabRef 3.6dev--snapshot--2016-08-23--master--9ac0e67

It seems now, however, that the default for the groups interface has changed. Beforehand, the groups interface was automatically toggled on. Now, even if I toggle on the groups interface, save the database, close it and then reopen it, the groups interface won't appear automatically. I have to toggle it on again, manually. Can you confirm this or is it just that I don't find the respective setting under preferences? 
 =||= @AEgit This is a different issue. Can you please open a new one for this? I think this should be saved between interactions.
 =||= Alright, I just wanted to check, whether it's not just me who has missed a change in the settings/preferences.

Here's the new bug (?) report:
https://github.com/JabRef/jabref/issues/1825
 =||= "Fix preview update when selecting single entry after selecting multiple entries"Fixes #1760.

Preview is now updated correctly when selecting a single entry after selecting multiple entries."Christian Bartschchriba08/23/16, 08:10:56 AM
1804.01823"Url field vanishes after running ""Check integrity"" ""Originally reported by Sait_Umar in the forum:

http://discourse.jabref.org/t/check-integrity-removing-my-url-fields/123/4

<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef 3.5 and Jabref 3.6dev
windows 7 6.1 amd64 
Java 1.8.0_102 

<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->

Tested both biblatex and bibtex entries:

Steps to reproduce:
1.  Create a new bib database (In file.bib some entries contain url fields)
2.  Enter entry with url content http:://www.google.de 
2.  Run ""check integrity...""
3.  Make a small correction at  some place, e.g. change the title
4.   save database
5.   See if url fields are still there.

=> After saving the url field is completely vanished 

No errors, no info in log file ""Caused by:

``` java
            // the url field should not be checked for hashes, as they are legal in this field
            fields.remove(FieldName.URL);
```
 =||= "Fixed #1804: URL field is not removed by integrity check"Better to disable the check than remove the field from the entry. ;-)

Fixes #1804 
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes (one may think of adding a test that no fields are removed from the entry in the integrity check, but I haven't done that here, ideally the entry should have every possible field included...)
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Oscar Gustafssonoscargus08/23/16, 07:49:12 AM
1881.01888New database is marked as changedIf a completely new database is created there should be no confirmations required to close it."This is already the case? 

_File_ -> _New Database_ 

*- do nothing - *

_File_ -> _Close Database_

No message is shown.
 =||= Not in my development version... Just noticed it, so I think it is something quite recent.
 =||= I can confirm this behaviour in the dev version on Windows, to
 =||= My bad. I'll add a PR fixing this in a minute.
 =||= "Do not mark a new database as changed"Fixes #1881 . I missed an if-statement when inverting an if/else in #1830 
- ~~[ ] Change in CHANGELOG.md described~~ - introduced in development version only (fortunately)
- [x] Manually tested changed features in running JabRef"Oscar Gustafssonoscargus08/30/16, 11:53:14 AM
1882.01893Invalid Bibtexkey freeze"JabRef 3.7dev--snapshot--2016-08-28--master--a2eb303
windows 10 10.0 amd64 
Java 1.8.0_101

Steps to reproduce:
1. Entry editor > Bibtexkey
2. Insert {
3. Button Save database
4. Freeze

Remark: Same freeze as in #1757, but with bibtexkey field. So same solution to fix as in #1863. I'll fix that."Fix Invalid Bibtexkey freeze"Fixes #1882. Reference: #1863.
- [x] Change in CHANGELOG.md described
- [x] Manually tested changed features in running JabRef"Jürgen Langegrimes208/31/16, 03:05:55 PM
1949.01952Wrong error message for No File Directory "JabRef version JabRef 3.6 on Mac OX X 10.11.6

Steps to reproduce:
1. Ensure that ""Main file directory"" is empty under File in preference 
2. Attempt to download file using ""get full text""
3. Note that the message tells you to go to the wrong location (see screen shots) as this setting is not under external programs

<img width=""550"" alt=""screen shot 2016-09-11 at 00 09 50"" src=""https://cloud.githubusercontent.com/assets/1075126/18414067/e2d2b30a-77b4-11e6-9a92-c0c152e663ea.png"">

<img width=""1033"" alt=""screen shot 2016-09-11 at 00 09 58"" src=""https://cloud.githubusercontent.com/assets/1075126/18414069/ef9be2f0-77b4-11e6-865e-96b192685a75.png"">""Related: https://github.com/JabRef/jabref/pull/1921
 =||= "Fix wrong path in error message"Fixes #1949, an error message directs to the wrong preference tab.
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Boceckboceckts09/12/16, 10:18:30 AM
2001.02006Regression: New entry in Biblatex mode freezes"JabRef 3.7dev--snapshot--2016-09-16--master--fcec333
windows 10 10.0 amd64 
Java 1.8.0_101

Steps to reproduce:
1. File > New Biblatex database
2. Bibtex > New entry > Article
3. Freeze""This calls for an integration test. Refs #1700. I tried with b1ec0e3c2cc24072cd0d0fbe6d233dbf8011c12d and English UI and I can confirm this issue.

```
Exception in thread ""AWT-EventQueue-0"" java.lang.NullPointerException
        at net.sf.jabref.gui.EntryTypeDialog.stopFetching(EntryTypeDialog.java:262)
        at net.sf.jabref.gui.EntryTypeDialog.actionPerformed(EntryTypeDialog.java:272)
```

Refs #1925 and #1987

I think, it works in JabRef 3.6, thus we do not need a CHANGELOG entry for it.
 =||= "Fix EntryTypeDialog using BibLaTeX-mode"While fixing another bug (#1987) in the EntryTypeDialog I created a new one. To fix this bug I added the IdFetcher section to the BibLaTeX-mode, as it was intended. Before, it was only in the BibTeX mode. The problem was that the fetcherWorker was null in the BibLaTeX-mode, because `createIdFetcherPanel()` was only called in the `else` part. So the fetcherWorker was never initialized.
The ParameterizedDialogNewEntryTest works fine again.
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef

Fixes #2001"Sascha Zellerzesaro09/17/16, 12:35:35 PM
2029.02031Localization tests refer to nonexistant Gradle tasks"e.g. to remove obsolete or missing language keys 

`gradlew -b localization.gradle generateMissingTranslationKeys`

Caused by #2010 "Fix localization task hints"fixes: #2029

Replaces hints to the old gradle localization task names with the new ones."Christian Bartschchriba09/25/16, 07:42:03 AM
1542.02034Bad web search error messages "The web search gives inconsistent, wrong or no feedback, when trying to fetch without being connected to the internet. 

Steps to reproduce:
1. Disconnect from the internet
2. Enter something into the web search text field
3. Press fetch 
4. Enjoy flickering windows and exceptions depending on the selected search portal

The error messages should be consistent and tell the user what went wrong.""Maybe some of the Localised Error Messages from the Update-Checker can be reused here..
 =||= Further improvement  idea: Display HTTP Error Code (e.g. 403 Forbidden). That came up in #1583
 =||= As I just noticed #1523 addresses the same issue.
Therefore this or the other one should be closed and reference to the other one.
 =||= "Fix bad web search error messages"Fixes #1542

I rewrote the error messages when the fetchers fail (or added them)."Christian Bartschchriba10/03/16, 02:47:39 PM
2054.02055Ignore update does not work"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef version 3.5 on Windows 10

<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->

Steps to reproduce:
1. Open JabRef 3.5 -> Update notification appears
2. Click ""Ignore this update""
3. Close and Restart JabRef -> update notification appears again

@JabRef/stupro 

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

```
Put the excerpt of the log file here
```"Fix ignore version"Fixes #2054 

Made a rookie mistake and ignored the already ignored version again.
Reworked the preferences to the new design."Christian Bartschchriba09/24/16, 07:17:00 PM
2090.02093Glitch in main menu edit"JabRef 3.7dev--snapshot--2016-09-28--master--6ba3b9a
windows 10 10.0 amd64 
Java 1.8.0_101

Two consecutive separators (case: special table fields not checked in preferences)

![glitch](https://cloud.githubusercontent.com/assets/15456836/18938876/39836302-85fc-11e6-9227-c0e8a1ca738b.png)""Fixed with #2093 
 =||= "Two separator glitch in menu edit"Fixes #2090
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jürgen Langegrimes209/29/16, 10:45:11 AM
2021.02094Cannot import non-XML preferences, cannot import BibTeX key generator preferences"JabRef version 3.6 on Mac OSX 10.11.6

Steps to reproduce:
1. Install JabRef 3.6 in a different location than JabRef 3.5.

The Preferences -> BibTeX key generator preferences appear lost.
1. Import preferences -> browse to preferences location.
2. Select file format: ""All Files"" and the format does NOT change (it remains XML file).

Renaming my preferences file from jabref.prefs to jabref.prefs.xml allows it to be selected/imported and I am told to restart JabRef for changes to take effect.  When I restart, the BibTeX key generator preferences have not been changed.""I'll have a look.
 =||= The keypattern part should be fixed for version 3.6... (see #1704) 

@jkulesza Are you using the ""portable mode"" of JabRef, i.e., your prefs are always saved in an XML file?

Normally JabRef 3.6 should automatically use (and convert) the preferences from earlier versions without manual import as the prefs are stored in a system file/registry.
 =||= @matthiasgeiger, No, I'm not (knowingly) using JabRef in ""portable mode.""  I originally installed it, imported my saved preferences (exported on another computer), and then they are loaded on each launch with no action on my part.  Only after performing the upgrade did I have a problem.

From your comment, it seems like everything ""should just work."" However, I assure you that things are as I reported.  What can I do to test / help you debug (I'll be in my office tomorrow to try whatever you suggest)?
 =||= Okay I was able to solve the problem regarding the automatic preference migration. This is now fixed in the current development builds. 

However, this automatic conversion is only performed once (at the first startup of JabRef 3.6 or 3.7dev) - so it will not be executed for you @jkulesza 

**Please make a backup before any changes** and if you have any trouble please upload the prefs file here or send it us privately to developers@jabref.org. 

To reenable the automatic migration you'll have to remove a ""node"" in the preferences stored at `~/Library/Preferences/` - there should be a JabRef related file (sorry I don't have a Mac and I don't know how exactly the file is named). In this file you'll have to remove the `\net\sf\jabref\bibtexkeypatterns` entry (again I do not exactly know how this is stored at your Mac)

Note for windows users: Remove the node `HKEY_CURRENT_USER\SOFTWARE\JavaSoft\Prefs\net\sf\jabref\bibtexkeypatterns` using `regedit` to reenable the automatic migration
 =||= Ah... regarding your second problem: Changing the filefilter from `*.xml` to `All files` is working for me... Is this problem specific for the preferences import dialog or are all file dialogs affected? (e.g. ""File"" -> ""import into current database"")
 =||= @matthiasgeiger Sorry for the slow reply; I've been away at a conference.

I've downloaded and installed:
 JabRef 3.7dev--snapshot--2016-09-28--master--555944f
mac os x 10.11.6 x86_64 
Java 1.8.0_102

Some remarks:
1. For other users' reference, opening $HOME/Library/Preferences/net.sf.jabref.plist within Xcode and removing the entry cited (bibtexkeypatterns) allowed the preferences to be brought in.  Thank you!
2. Changing from *.xml to All Files appears to only be an issue within the preferences.  When I try File -> Import into Current Database, I can change file types as expected.  Are there other dialogs I can test against?
3. Renaming my preferences file to ...xml and importing still does not work (though, with Point #1, this is moot).
 =||= It's worth noting that I can also not _export_ my preferences in a format other than XML.
 =||= Well... The content of the preferences file is always XML-Code - so exporting it only as an XML file is sensible. However, import should be possible regardless of the file extension I think...

@Siedlerchr and @stefan-kolb: Can you investigate the file dialog problem? Should be caused by #1771, #1774 or #1737
 =||= I cannot reproduce this behavior on the current `master`. Import and export is working as expected.
 =||= Mac specific problem? 
@chochreiner Can you reproduce this one? :wink:
 =||= Regarding the file dialog, I am not sure, but I think that only XML is set as File Filter. Not sure if you can switch to All files. 
 =||= You can, I tested it.
 =||= I can reproduce this bug on MacOS 10.12 on the master
 =||= "Make all files selectable in file chooser dialogs"make all files selectable in filechooser

 fixed #2021
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Christoph Hochreinerchochreiner10/14/16, 08:52:53 AM
2104.02106Empty modal error box when saving database with parsing error"JabRef version 3.6 on Windows 10

Steps to reproduce:
1. Open Jabref
2. Create a database
3. Add an entry (I used article)
4. Save the database (if you skip this step, the problem does not occur. See later.)
5. Open the ""{} Bibtex Source"" editing tab
6. Insert an extra comma just after the last one (the one closing the last field). Other mistakes may work as well; I have not tried.
7. Click on the ""save"" button on the toolbar.

At this point, in addition to a ""legitimate"" error box signaling the inconsistency, another empty one appears that prevents any further action (see attached graphics). Jabref must be terminated forcefully.
Note that, as mentioned in step 4, if the database has not been saved before, the ""save as"" dialog box appears instead of the empty error box, and the user can proceed regularly by saving the database first, and responding to the error message then.
![jabreferror](https://cloud.githubusercontent.com/assets/3365569/18994837/a094ea1a-86f7-11e6-9e05-48f12bdbc85e.PNG)""Confirmed. I try to fix this.
 =||= "Crash after saving BibTeX source with parsing error"Fixes #2104.
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jürgen Langegrimes210/03/16, 12:45:26 PM
2109.02114Ctrl-s doesn't trigger parsing error message"Latest dev version

Steps to reproduce:
1. Entry editor > Bibtex source tab
2. Generate parsing error. example: },,
3. Ctrl-s
4. The parsing error message is not triggered

File > Save database and Save button work, shortcut not."Ctrl-s parsing error message"Fixes #2109. Ctrl-s doesn't trigger parsing error message.
Problem: conflict of local shortcut (of the entry editor) with the global shortcut.
Solution: local shortcut removed. (The action assigned to local and global shortcut is essentially the same (save database))
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jürgen Langegrimes210/04/16, 11:41:33 AM
2105.02125Entry preview not updated properly"JabRef 3.7dev--snapshot--2016-09-30--latex-free-fields--0ee1d17
windows 10 10.0 amd64 
Java 1.8.0_101

Select a group that contains articles
1. Perform a search
2. One of the articles within that group is found by the search and is selected (indicated in blue)
3. The entry preview of the selected article is displayed
4. If we select now another article in the same group that is also found by the search, the entry preview is not shown - it still shows the previous article. This behaviour doesn't seem to happen in a repoducible way. It could be that only newly created entries (indicated in green) are affected by this, i. e. if you switch over to a newly created entry, the entry preview of this entry won't be shown. Instead it will show the entry preview of the previous entry,
5. This does not apply to articles that are not part of the same group (indicated in grey)

This issue was first mentioned here:
https://github.com/JabRef/jabref/issues/1993#issue-177367050

Similar (but different) problems have been mentioned here:
https://github.com/JabRef/jabref/issues/1760
https://github.com/JabRef/jabref/issues/1903""@bartsch-dev Maybe you have time to have a look at the end of next week?
 =||= Ok, so it appears that newly created entries and entries that are newly assigned to a group are affected by this behaviour.

To reproduce it, the following steps need to be taken:
1. Select a group that contains articles/items
2. Create a new article/item in this group or assign an existing article from another group to this group
3. Select another article that is or is not part of the group: The entry preview of that article is correctly displayed.
4. Now select the newly created/assigned article: The entry preview is NOT updated properly. Instead of showing the entry preview of the selected article, the entry preview of the previously selected article is still shown.
   If you select another article and then select again the newly created/assigned article, the problem persists: The entry preview of the selected newly created/assigned article is not shown. Instead, the entry preview of the article that you just selected previously is shown.
5. If you create/assign another new article to the group, it exhibits the same problems. The ""old new article"" (i. e. the one, that we crated at step 2) behaves now properly and shows the entry preview when selected.
 =||= This bug is also present in the current master build:
JabRef 3.7dev--snapshot--2016-10-03--master--565676c
 =||= The issue can be reproduced even easier.
1. have at least 2 entries
2.  open the entry editor and close it 
   - the preview will be rendered correctly
3. select the other entry 
   - the preview will be rendered correctly
4. select the first entry (the one you opened the editor with)
5. the preview will not be updated
 =||= I can confirm that this bug has been fixed in the following master build:
JabRef 3.7dev--snapshot--2016-10-07--master--03bc4a3

Thanks a lot!

It seems, however, that another bug was introduced. See here:
https://github.com/JabRef/jabref/issues/2136
 =||= "Fix entry preview not updated properly"Fixes: #2105.
### Steps to reproduce:
1. have at least 2 entries
2. open the entry editor and close it 
   - the preview will be rendered correctly
3. select the other entry 
   - the preview will be rendered correctly
4. select the first entry (the one you opened the editor with)
5. the preview will not be updated

The problem is that the editor variable doesn't get cleared when the editor closes, thus the bottom component in the main table doesn't get updated if that entry is the last one which had the editor open."Christian Bartschchriba10/07/16, 03:34:52 PM
2142.02129New entry is not focused when search is active"1. open `complex.bib`
2. sort by `author/editor`
3. search for `bard`
4. double click on ""Boström"" (which is not a search hit) -> entry editor opens
5. BibTeX -> New entry
6. Press ""Article""

Expected: Entry editor for the new article opens
Behavior: First search hit is focused.""Will be fixed by https://github.com/JabRef/jabref/pull/2129.
 =||= "Don't change the selected entry after search if you edit an entry"Fixes: https://github.com/koppor/jabref/issues/172.
**Edit:** Fixes #2142.

When the search is active and you edit an entry until the entry doesn't match the search an longer the first match would be selected.

Now, if you edit an entry the selected entry won't change. "Christian Bartschchriba10/11/16, 02:33:31 AM
2119.02161Subgroups can no longer be created using drag'n'drop"JabRef 3.7dev--snapshot--2016-09-29--latex-free-fields--93e665e
windows 10 10.0 amd64
Java 1.8.0_101
1. Create two new groups
2. Try to drag'n'drop one of the groups onto the other group to create a group-subgroup structure
3. Nothing happens, i. e. no subgroup is created
4. The only way to create subgroups is to use the ""Move"" and ""Right""/""Left"" command

This issue might be a duplicate of this one here https://github.com/JabRef/jabref/issues/2098, but I wasn't sure, so I thought to better report it separately.""Can we add the 'bug' label to this one?
 =||= Thank you very much!

I can confirm that this bug has been solved in:
JabRef 3.7dev--snapshot--2016-10-14--master--fb0990d
 =||= The only thing I notice is a bit of a delay, when reassigning a group. But this is probably related to the problem reported here:
https://github.com/JabRef/jabref/issues/2148
 =||= "Fix group drag and drop"This fixes #2119 and #2098 
- ~~[ ] Change in CHANGELOG.md described~~ Introduced in dev builds
- ~~[ ] Tests created for changes~~
- ~~[ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- ~~[ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"Matthias Geigermatthiasgeiger10/14/16, 07:25:33 AM
2133.02163MatchesHighlighter doensn't respect HTML"`net.sf.jabref.logic.search.MatchesHighlighter#highlightWordsWithHTML` doesn't respect existing HTML.

It's clearly visible in the preview panel.
- If you use the Preview style, have `br` in your entry, and search for it: 
  ![html_preview](https://cloud.githubusercontent.com/assets/15333371/19156078/e7d820fc-8be0-11e6-8b71-97c2dc327b3c.PNG)
- if you use CitationStyle and search for `<`
  ![html_citationstyle](https://cloud.githubusercontent.com/assets/15333371/19156086/f1b01058-8be0-11e6-8977-b75dddd7ad13.PNG)"Fix highlighting issues"Fixes #2133.

Earlier, highlighting was done manually by adding tags to matches in the html text being sent to the pane. Instead, I have opted to make use of the highlighting features of the JEditorPane class. This gives the additional benefit that the highlight colour is changed automatically based on the system theme. 

Changes 
- Created JEditorPaneWithHighlighting class
- Removed MatchHighlighter class and its tests
- Removed highlighting related tests from LayoutEntryTest
- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Shitikanthshitikanth11/07/16, 05:25:10 AM
2168.02169ADS Fetcher (Test) fails "Latest dev version https://github.com/JabRef/jabref/commit/955b94d7221e5ee3c102731f885eb395e1c2ad64

From what I see, the entry returned from the fetcher contains the field    `eid = {#10}`

```

java.lang.AssertionError: expected:<Optional[@article{2012LRR....15...10F,
  archiveprefix = {arXiv},
  author = {Famaey, B. and McGaugh, S. S.},
  doi = {10.12942/lrr-2012-10},
  eprint = {1112.3960},
  journal = {Living Reviews in Relativity},
  keywords = {astronomical observations, Newtonian limit, equations of motion, extragalactic astronomy, cosmology, theories of gravity, fundamental physics, astrophysics},
  month = {#sep#},
  title = {Modified Newtonian Dynamics (MOND): Observational Phenomenology and Relativistic Extensions},
  volume = {15},
  year = {2012}
}]> but was:<Optional[@article{2012LRR....15...10F,
  archiveprefix = {arXiv},
  author = {Famaey, B. and McGaugh, S. S.},
  doi = {10.12942/lrr-2012-10},
  eid = {#10},
  eprint = {1112.3960},
  journal = {Living Reviews in Relativity},
  keywords = {astronomical observations, Newtonian limit, equations of motion, extragalactic astronomy, cosmology, theories of gravity, fundamental physics, astrophysics},
  month = {#sep#},
  pages = {#10},
  title = {Modified Newtonian Dynamics (MOND): Observational Phenomenology and Relativistic Extensions},
  volume = {15},
  year = {2012}
}]>
    at org.junit.Assert.fail(Assert.java:88)
    at org.junit.Assert.failNotEquals(Assert.java:834)
    at org.junit.Assert.assertEquals(Assert.java:118)
    at org.junit.Assert.assertEquals(Assert.java:144)
    at net.sf.jabref.logic.importer.fetcher.AstrophysicsDataSystemTest.testPerformSearchByFamaeyMcGaughEntry(AstrophysicsDataSystemTest.java:161)
```""Should we separate the fetcher tests from the normal tests? Similar to the
database and integration tests? This would enable a separation and keep
avoid failing tests being unrelated to a certain PR.
 =||= "fix failing ADS test"Added missing fields 
Fixes #2168"ChristophSiedlerchr10/16/16, 11:47:50 AM
2177.02179Clear Bibtexkey NullPointerException"JabRef 3.7dev--snapshot--2016-10-18--master--8f7ae51
windows 10 10.0 amd64 
Java 1.8.0_101

Steps to reproduce:
1. Entry editor > clear field bibtexkey
2. Save database
3. NullPointerException

```
[AWT-EventQueue-0] ERROR net.sf.jabref.gui.BasePanel - runCommand error: field value must not be null
java.lang.NullPointerException: field value must not be null
    at java.util.Objects.requireNonNull(Objects.java:228) ~[?:1.8.0_101]
    at net.sf.jabref.model.entry.BibEntry.setField(BibEntry.java:416) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at net.sf.jabref.model.entry.BibEntry.setField(BibEntry.java:457) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at net.sf.jabref.model.entry.BibEntry.setCiteKey(BibEntry.java:200) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at net.sf.jabref.gui.entryeditor.EntryEditor$StoreFieldAction.actionPerformed(EntryEditor.java:1126) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at net.sf.jabref.gui.entryeditor.EntryEditor.storeCurrentEdit(EntryEditor.java:704) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at net.sf.jabref.gui.BasePanel.storeCurrentEdit(BasePanel.java:1780) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at net.sf.jabref.gui.exporter.SaveDatabaseAction.run(SaveDatabaseAction.java:121) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_101]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_101]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_101]
    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_101]
    at spin.Invocation.evaluate(Invocation.java:175) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
    at spin.off.SpinOffEvaluator$1.run(SpinOffEvaluator.java:108) ~[JabRef-3.7dev--snapshot--2016-10-18--master--8f7ae51.jar:?]
```

> FindBugs reports: EntryEditor.java:1108 Nullcheck of newValue at line 1110 of value previously dereferenced in net.sf.jabref.gui.entryeditor.EntryEditor$StoreFieldAction.actionPerformed(ActionEvent) [Scary(9), High confidence]""Another related bug, which is more visible to the end user.

Steps to reproduce:
1. Open database
2. Edit some field for an entry
3. Open another entry and clear its bibtexkey
4. Save database
5. Quit JabRef (by pressing Ctrl-q or from the menu) and select discard changes when prompted

![JabRef waiting for save operation to finish](https://cloud.githubusercontent.com/assets/544054/19501176/61b5de02-9571-11e6-8adf-14efd6a59ae3.png)
 =||= "Clear bibtexkey exception"Fixes #2177. NullPointerException caused by clearing bibtexkey field in entry editor.
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jürgen Langegrimes210/19/16, 02:01:39 PM
2208.02211Move default focus from search to Main Table for better handling of pasting entries"Very annoying in current master:

Create some entries
Delete one entry
Cursors moves to Seach field
Paste an entry from clipboard (bibtex code)
Entry code appears in search field""@bartsch-dev Could you have a look? 😇
 =||= "Prevent the search to get focus when deleting/pasting an entry"Fixes: #2208

When you delete an entry the focus will no longer jump to the searchbar, instead it will select the next entry (also counts for pasting)."Christian Bartschchriba10/30/16, 03:48:06 PM
2220.02225Entry editor freeze"JabRef 3.7-dev--snapshot--2016-11-01--master--458ee79
windows 10 10.0 amd64 
Java 1.8.0_111

Steps to reproduce:

1. open entry editor
2. change entry
3. Freeze. 50% CPU

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->""Can you do a git bisect run to determine which commit is the cause?
 =||= The last commit 458ee7999699b3489684178605c3f8f55294fd63 seems to be bad.
 =||= I can confirm the behavior on current master. This renders JabRef completely unusable and is a blocker for a release of 3.7.
 =||= The commit points to https://github.com/JabRef/jabref/pull/2199. I contacted @bartsch-dev 
 =||= I cannot exactly reproduce this. After entering something inside the entry editor it should automatically freeze the program? I can edit and change between entries with no problems. When I add a new entry afterwards I get kind of a freeze. But some things are still functional in Jabref. i just cannot enter things in the entry editor or select different entries.
 =||= When I edit an exiting entry, I have following issues:
1. Open entry
2. Edit ""title"" field: Add three letters ""abc""
3. Click textfield of ""journaltitle"".
4. Field does not get focus
5. Click textfield of ""journaltitle"".
6. Field gets focus
 =||= I tried to fix it, can you please try it out?
I also noticed that with #2075 the entry editor has become noticeable slower.
 =||= Can you provide a build? I want to test it also.

@stefan-kolb: No. Open the entry editor by double-click on an entry in main table. Go to another entry in the main table. You don't need to edit or change a field in the entry editor at all.
 =||= The PR is #2225. I (manually) mirrored the branch `fixEditorFreeze` at the JabRef repo. <s>It doesn't build as we have [issues with the Medline test on the master branch](https://travis-ci.org/JabRef/jabref/builds/172742443). The latter refs https://github.com/koppor/jabref/issues/181</s>. Please find the build at https://builds.jabref.org/fixEditorFreeze/.

You can just checkout the branch or add [bartsch's fork](https://github.com/bartsch-dev/jabref) as additional git remote for fetching.
 =||= JabRef 3.7-dev--snapshot--2016-11-02--fixEditorFreeze--d1c1801
windows 10 10.0 amd64 
Java 1.8.0_111

Thanks for the build. With the tested build the bug is fixed. Thanks for the fix and the improvement of the entry editor code.
 =||= "Fix editor freeze"Possibly fixes: #2220.

Mainly I removed `SwingUtilities.invokeLater(() ->`. I also added some lines to remove the event listener from the old entry editors. "Christian Bartschchriba11/04/16, 06:46:13 AM
2224.02227Label underline does not work inside word?"`Toggle_groups_interface=Toggle_&groups_interface`
This displays as `Toggle_&groups_interface` but not as expected as `Toggle_groups_interface`
and only highlights the g when pressing `ALT`."Fixes for group pane toggling"fixes #2224 (Mnemonics for ""Toggle Group Pane"") and #2201 resp. #1825

- [x] Change in CHANGELOG.md described
- ~~[ ] Tests created for changes~~
- ~~[ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- ~~[ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)~~
- ~~[ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"Matthias Geigermatthiasgeiger11/03/16, 02:11:02 AM
2200.02230Sorting by title is broken"JabRef version 3.6 and current master

[As reported in the forum](http://discourse.jabref.org/t/sorting-by-any-column/282) sorting by title does not sort ALL entries correctly: 

![](https://cdn-standard.discourse.org/uploads/jabref/original/1X/cf6e4e54a76fdba993be0a2d9f006ba0c68accc5.PNG)

In fact there seem to be two independent lists which are sorted correctly. Without a look at the good I could not find a pattern which entries are assigned to which list...""Okay I found the reason... `{ }` are not ignored during sort. Thus all titles with curly braces appear before the remaining entries.
 =||= Thank you for explanation about the title. At least it can sort two lists separately. Unfortunately, it doesn't explain sorting by 'times-cited' or 'year' (fields with numbers).
![sorting_issue_times_cited](https://cloud.githubusercontent.com/assets/7868389/19760642/87322158-9c2a-11e6-99c6-d0c222e0de32.PNG) 

Every entry which has this field comes from the same source and every one is in {}. It seems that Jabref cannot sort the number inside the brackets, because all entries without them are sorted correctly.
 =||= It looks like JabRef consider the 'times-cited"" as a text and not as a number.
 =||= But it managed somehow to sort the titles inside {} (just takes { as first letter), yet it cannot do the same with 'numbers treated as text'. The same things happens with year which is much more popular field than times-cited.
 =||= Indeed, @mlep is right, times-cited and year are sorted based on their textual representation. 

@mzagorowska In this representation, the sorting is absolutely fine. You can reproduce the same behavior in the folder system of your operating system (at least in windows). If you create folders with names '2', '201', etc. they will be sorted in exactly the same fashion as above.

This is just to explain the behavior, not to justify it. Of course it would make sense to interpret these columns as numbers and sort them according to their numerical order. It might make sense for a few more fields that typically store numerical values, such as the volume of an article. 

Since there are no mandatory type definitions for fields in BibTeX, JabRef does not really take this into account so far and I cannot say how easy or difficult it will be to implement this. But I think this would be a sensible enhancement.
 =||= ![grabbed_20161027-143046](https://cloud.githubusercontent.com/assets/676652/19767205/f7a8205a-9c51-11e6-893c-255459e6cfdb.png)

Year sorting seems to be numeric - at least in current master.
 =||= Not really:
![sorting_issue_year](https://cloud.githubusercontent.com/assets/7868389/19767982/5a89013a-9c4d-11e6-922f-5d31863d823d.PNG)

(every year here is in {}).
 =||= Just to make sure: 
If you switch to the source panel in the editor is format shown there for year:
`year      = {{2000}},` 

or 

`year      = {2000},`?
 =||= The first one. Full example of an entry:
@InProceedings{Adaptive_Wang2010,
  author                     = {Wang, Wei and Wen, Changyun},
  title                      = {{Adaptive Output Feedback Controller Design For A Class of Uncertain Nonlinear Systems with Actuator Failures}},
  booktitle                  = {{49TH IEEE CONFERENCE ON DECISION AND CONTROL (CDC)}},
  year                       = {{2010}},
  language                   = {{English}},
  series                     = {{IEEE Conference on Decision and Control}},
  note                       = {{49th IEEE Conference on Decision and Control (CDC), Atlanta, GA, DEC 15-17, 2010}},
  organization               = {{IEEE}},
  publisher                  = {{IEEE}},
  isbn                       = {{978-1-4244-7746-3}},
  pages                      = {{1749-1754}},
  doi                        = {{10.1109/CDC.2010.5717733}},
  abstract                   = {{In this paper, we aim to design adaptive output feedback controllers for
   a class of uncertain nonlinear multiple-input single-output (MISO)
   systems in the presence of stuck type actuator failures. The class of
   MISO system has a characteristic that the relative degrees with respect
   to each of the inputs are not necessarily the same. We first design a
   pre-filter for each input and then derive the state space representation
   of a newly constructed plant. The design of control variable will be
   provided by making certain modifications on traditional backstepping
   technique. It will be shown that with our proposed scheme, the effects
   due to actuator failures can be compensated and global boundedness of
   the closed-loop signals is still ensured. Further, the system output can
   asymptotically track a given reference signal.}},
  address                    = {{345 E 47TH ST, NEW YORK, NY 10017 USA}},
  affiliation                = {{Wang, W (Reprint Author), Nanyang Technol Univ, Sch Elect & Elect Engn, Nanyang Ave, Singapore 639798, Singapore. Wang, Wei; Wen, Changyun, Nanyang Technol Univ, Sch Elect & Elect Engn, Singapore 639798, Singapore.}},
  author-email               = {{wang0336@ntu.edu.sg ecywen@ntu.edu.sg}},
  book-group-author          = {{IEEE}},
  doc-delivery-number        = {{BWV28}},
  file                       = {:Adaptive_Output_Feedback_Controller_Design_Wang2010.pdf:PDF},
  groups                     = {Reconfiguration},
  issn                       = {{0191-2216}},
  keywords-plus              = {{FAULT-TOLERANT CONTROL; RECONFIGURABLE FLIGHT CONTROL; TRACKING CONTROL; COMPENSATION; ACCOMMODATION}},
  number-of-cited-references = {{22}},
  research-areas             = {{Automation & Control Systems; Engineering}},
  researcherid-numbers       = {{Wen, Changyun/A-5018-2011}},
  times-cited                = {{5}},
  type                       = {{Proceedings Paper}},
  unique-id                  = {{ISI:000295049102016}},
  usage-count-last-180-days  = {{0}},
  usage-count-since-2013     = {{3}},
  web-of-science-categories  = {{Automation & Control Systems; Engineering, Electrical & Electronic}},
}
 =||= Okay, thank you!

The problems are caused by the double-braces `{{  }}` used by you in various fields. These braces are fine for text fields whose casing should be protected, e.g., title, but they should not be used in fields like ""times-cited"" or ""years"" are in this fields just numbers are expected. 

Nonetheless, the incorrect sorting of `title` still is a bug.

Have you put those fields manually or have you configured JabRef to do this?
 =||= OK, this might be a problem. Unfortunately, such formatting was not my idea, such entries are taken directly from Web of Science database. Apparently, I cannot just copy and paste the .bib file from their website. Thank you for your help!

But as you have said, the title problem remains.
 =||= Find-ReplaceAll should solve most of your problems: Just replace `{{` with `{` and `}}` with `}` 

However, please make a backup of the bib-file first 😉 
 =||= To get a numeric sorting for any custom field, we would need to make the field type numeric inside our implementation (I think there are several field types like month etc pp that are treated differently). I don't think this is possible for the user at the moment but only inside the code.
 =||= @matthiasgeiger @mzagorowska The find-replace may corrupt your database.
example: title={{C}hina and the {P}acific ocean},
 =||= Regarding the sorting bug, we need to use the latex free version of the entry title in case we want to have such a sorting.
 =||= @mlep Exactly, I think that {{ is sometimes necessary (as in your example). We have a choice between correct sorting or correct title. The only solution I can think of is to have every title in {{ }}, but I have no idea how to change existing entries (not manually).
 =||= @mzagorowska Generally, there is no reason to have a whole content between {{ and }}. Maybe you can ask on the forum how to change this issue without trouble.
 =||= @JabRef/developers What is our decision on this? Should we ignore LaTeX commands for sorting? I tend to say so.
 =||= :+1: for ignoring the LaTeX commands - think, we should just use the latex-free version of the BibEntry, shouldn't we?
 =||= Yes. However, this sorting stuff is organized using the GlazedLists lib - thus, requires some time to dig into the details how to change the current behavior.
 =||= Does the LaTeX-free version really solve the problem here? I mean does that actually remove the double braces? Because the bracing isn't really LaTeX-specific, is it?
 =||= JavaFX? 😇 
 =||= At least running ""Latex To Unicode"" removes the braces...
 =||= Just a note regarding sorting (that we might want to discuss in another issue maybe): The sorting of titles in libraries and also in other reference managers, such as EndNote, avoids the words ""A"", ""An"", or ""The"" at the beginning of titles for the sorting. The reason for this is that you usually have a huge amount of entry titles starting with this and if you take into account ""A"" the sorting becomes less useful. We might want to consider doing the same in JabRef.

Personally, I like it more if we take these words into account for the sorting, but I have been told that the other way is the professional one.
 =||= "Fix maintable sorting"Fixes #2200 by using the latex free value of the field for sorting the main table.

However, just using `getLatexFreeField()` was not possible as the table is using `getFieldOrAlias`. Thus I introduced a new method `getFieldOrAliasLatexFree()` which is based on the previous implementation of `getFieldOrAlias()` using lambdas. This approach is used instead of formatting the `getFieldOrAlias()` result for performance reasons as the latex-free field values are cached in the `BibEntry`.

*Sidenote: If this approach is approved by you, the same should be applied to `BibDatabase.getResolvedFields()` which is used in `MainTableColumn.getColumnValue()` to show a latex-free version of the contents in the main table)*

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- ~~[ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- ~~[ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)~~
- ~~[ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"Matthias Geigermatthiasgeiger11/04/16, 08:56:56 AM
2279.02281Jabref changes the file permissions of the database"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef version 3.7 on Ubuntu 16.04

If you save the database it changes the permissions of the file to 600 (read/write for user and no access to anybody else). This can be a problem in shared databases where all users belong to the same group, but are different users.""JabRef uses standard Java classes to write the file on save, essentially an `OutputStreamWriter`. I guess the permissions of the file are somehow derived from the permissions of the user that executes the process. For the record: What are the permissions before they are re-written by JabRef? What happens when other programs implemented in Java write to that shared folder your database is in? Do permissions change?

I am not yet convinced that your problem is not due to the configuration of your system. Lacking a Ubuntu installation, I cannot verify your problem unfortunately.
 =||= Jabref version 3.6 did not have that problem. Let's say that you have a file with rw permissions for user/group/everyone. In v3.6 when you save it the permissions stay the same. In v3.7 they change to rw for user and no access for group/everyone.
Therefore I believe it has to do with changes in the latest version.
 =||= Thanks for the reply @g-mos! If 3.6 is doing this correctly in your environment, then so should 3.7. 

I am a little bit at a loss as to what might be causing this behavior, but maybe one of the other developers knows more.
 =||= "Fix #2279: File permissions are kept upon save"Fixes #2279.
JabRef does not directly writes to the bib-file upon save but creates a temporary file which is then copied over the original one. In this process the original file permissions get lost. Should be fixed with this PR (I have not tried it...).
I pushed the code to the branch https://github.com/JabRef/jabref/tree/filePermissions but for some reason the setup files do not show up on [builds.jabref.org](http://builds.jabref.org/)

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?
"Tobias Dieztobiasdiez11/18/16, 04:56:51 PM
2311.02314DBLP fetcher seems to be broken"JabRef version 3.7 and `master` 

Steps to reproduce:

1. Search for an arbitrary search term using DBLP

```
15:39:27.560 [JabRef CachedThreadPool] ERROR net.sf.jabref.gui.importer.fetcher.DBLPFetcher - Error while fetching from DBLP
java.net.MalformedURLException: no protocol: URL#10133
	at java.net.URL.<init>(URL.java:586) ~[?:1.8.0_60]
	at java.net.URL.<init>(URL.java:483) ~[?:1.8.0_60]
	at java.net.URL.<init>(URL.java:432) ~[?:1.8.0_60]
	at net.sf.jabref.logic.net.URLDownload.<init>(URLDownload.java:71) ~[main/:?]
	at net.sf.jabref.gui.importer.fetcher.DBLPFetcher.processQuery(DBLPFetcher.java:87) ~[main/:?]
	at net.sf.jabref.gui.importer.fetcher.GeneralFetcher.lambda$actionPerformed$165(GeneralFetcher.java:217) ~[main/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [?:1.8.0_60]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [?:1.8.0_60]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_60]
```"Rework DBLPFetcher to new structure"also fixes #2311 

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- ~~[ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- ~~[ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~
"Matthias Geigermatthiasgeiger11/26/16, 06:45:18 AM
2261.02331Reset preferences & Import preferences not working for custom entry types."JabRef 3.6
windows 7 6.1 amd64 
Java 1.8.0_111

Reset preferences and Import preferences does not work for custom entry types.

Steps to reproduce the reset issue:
1. Customize entry types, e.g. by adding new entry types and/or by removing and/or adding fields
2. Close/Start JabRef
3. Watch preferences in JabRef preferences -> custom entry types can be found there -> ok
4. Reset preferences
5. Close/Start JabRef
6. Watch preferences in JabRef preferences -> custom entry types can still be found there 

Steps to reproduce the import issue:
1. Customize entry types, e.g. by adding new entry types and/or by removing and/or adding fields
2. Close/Start JabRef
3. Export preferences
4. Import preferences in JabRef installed on a different system (Win 7 as well in my case)
5. Watch preferences in JabRef preferences -> imported custom entry types can not be found""Could you try the latest dev build from https://builds.jabref.org?
 =||= JabRef 3.7-dev--snapshot--2016-11-10--master--2441675
windows 7 6.1 amd64 
Java 1.8.0_111

I tried the reset & import issue with the above version. Unfortunately still the same behavior.
 =||= Hi!
A global reset of type customizations is not possible at the moment. 
To reset changes in standard types and to remove custom types you have open the ""BibTeX"" -> ""Customize Entry Types"" dialog and to reset/remove each customized type manually.

And you are right, importing custom types is currently not possible.
 =||= Hi!
The same issue has been around for a while:

#772

Fixing would be greatly appreciated, especially for cases where many users share one database and need to exchange preferences.
 =||= "Improve entrytype customization"Goals:
- Entry customization based on BibDatabaseMode
  - [x] working for custom entry types defined in bib DB
  - [x] storage is working for new customized entries (instead of creating three/four prefs Strings for each customized entry type in the form (""custom_type_1_name"", ""custom_type_1_REQ"", ...) two distinct pref nodes (one for BibTeX one for BibLaTeX) for customized entry types are used which simply use the custom type name as key and the string serialization as value (--> parsing can be reused))
  - [x] loading is working for newly created customized entries
  - [x] write prefs migration (is performed on first startup of new version, existing prefs will be put as new custom types for `defaultBibDatabaseMode`, old prefs are not deleted)
- enable testing with cleanup after test execution
  - [x] bibtex
  - [x] biblatex
- various bug fixes and improvements, e.g., #2318 #772 #366 #365 
  - [x] refactor/rewrite parts of `EntryCustomizationDialog` to improve performance (refs #2318)
  - [x] fixes #2261 (and also clearing of bibtexKeyPatterns using ""reset preferences"")
  - [x] #772: Deleting custom type, restoring customized default type from exported prefs, no multiple import of customized entry types
  - [x] #366: Check ""Resetting overridden default entry types does not work, sometimes even crashes"" - not reproducible in reworked state (ask @stefan-kolb whether still an issue) - related to #2318? --> caused by running through all entries in all open DBs
  - [x] If a customized type is declared in a file it will be tried to import the declarations - if a customType already exists, a warning should be shown that it will be overwritten
     - before this PR (no import of already existing customizations):
![custom-import-before](https://cloud.githubusercontent.com/assets/676652/21097503/131ecd16-c065-11e6-9c8e-f23cb8d453e1.png)
     - now (more control): 
![custom-import-new](https://cloud.githubusercontent.com/assets/676652/21097446/bf88c724-c064-11e6-8cc4-4a16c4d18dc5.png)

  - [x] a customized standard type should not appear in the ""custom"" section of the ""New entry"" dialog, and not in the ""custom entries"" section of the ""change entry type"" menu

- [x] CHANGELOG"Matthias Geigermatthiasgeiger12/16/16, 03:51:58 PM
2335.02339Biblatex Cleanup for moving year+ month to Date field not working"Version 3.7, I think it dit not work in 3.6, too.
According to the code, the Biblatex Cleanup should cleanup/move the fields year + months etc to date


However, it currently gives always ""No Entry needed a cleanup"".
'Tested with different entrytypes and both year and month were set.

```
@Article{Orlowski;2011,
  author        = {Adam Czarnecki; Cezary Orłowski;},
  title         = {Application of Ontology In the ITIL Domain},
  year          = {2011},
  month         = jan,
}
```


https://github.com/JabRef/jabref/blob/master/src/main/java/net/sf/jabref/logic/cleanup/BiblatexCleanup.java"Fix biblatex cleanup for date field"This fixes #2335 
Moved biblatex Cleanup to new test
- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [X] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)

"ChristophSiedlerchr12/08/16, 08:59:09 AM
2334.02361"""Remove entry selection from this group"" removes entries from similarly named groups""JabRef 3.7
windows 10 10.0 amd64 
Java 1.8.0_111

Steps to reproduce:

1. Create a Bibtex file with the groups ""mygroup"" and ""mygroup_alternative"". Assign a few entries to both of the groups.
2. Select the entries in ""mygroup"" and remove them from the group using ""Remove entry selection from this group"".
3. The entries have been removed from both ""mygroup"" and ""mygroup_alternative"". Indeed, if you check the group assignments of the entries they now contain ""_alternative"" as group assignment, i. e., the first part of the group name has been deleted. As no group ""_alternative"" exists, the items appear to not be assigned to any group.

Note that this bug is related to a workaround/solution to the issue of group hierarchy in JabRef:
https://github.com/JabRef/jabref/issues/1495

If someone was to use

Asthma
    Asthma treatment
    Asthma diagnosis

as proposed in https://github.com/JabRef/jabref/issues/1495, I suspect that the same problem would arise (?).""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= I can confirm that this bug has been fixed in JabRef 3.8-dev--snapshot--2016-12-12--master--59d9e35.
Thank you very much for your hard work! =||= "Fix a few group related issues"This PR fixes #2334, #1873 and #1681.
Since I didn't understood the groups code, I also refactored it. Main changes:
- Split `KeywordGroup` class into `WordKeywordGroup`, which splits field content into words and then matches them, and `RegexKeywordGroup` that uses a regular expression for this job.
- Extract serialization of groups to `GroupSerializer` (previously every group decided about its own serialization via the `toString` method)
- Move a few things from model and logic to gui since they mostly contained ui-related stuff (e.g. GroupDesrciptions)

---

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez12/11/16, 09:01:43 PM
1873.02361Group names are matched wrong"JabRef version 3.6 (also 3.5) on Ubuntu 14.04

Group membership of entries is stored in the groups-field. Groups are identified by their name. Multiple groups are separated by commas. It seems that during matching (for marking group memberships in the groups interface), group names are split at commas and spaces. These facts lead to the following undesired behaviours:
1. If an entry's group field contains 'a b' it is considered a member the groups 'a', 'b', and 'a b'.
2. If an entry's group field contains 'a' it is considered a member of the groups 'something'/'a' and 'anything'/'a'.
3. If an entry's group field contains 'a b', you can remove it from group 'a'. Resulting in the entry being considered a member of 'b' (in combination with 2., possibly in some other branch of the group tree).

This behaviour might completely break the group-entry relations.

Steps to reproduce:
1. download and open [jabref_bug.bib.txt](https://github.com/JabRef/jabref/files/440689/jabref_bug.bib.txt)
2. Add the entry 'demo' to the group 'some rating'/'very good'
3. Observe, that the entry now belongs to all four (leaf) groups
4. Remove the entry from group 'some rating'/'good'
5. Observe that the entry now only belongs to group 'other rating'/'very'""Possible duplicate of #1495.
 =||= Hi Michael!
Thanks for your report. I can confirm the behavior - and yes, you are right this a quite serious problem (and also related to #1495 but not exactly a duplicate).

Regards
Matthias
 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= "Fix a few group related issues"This PR fixes #2334, #1873 and #1681.
Since I didn't understood the groups code, I also refactored it. Main changes:
- Split `KeywordGroup` class into `WordKeywordGroup`, which splits field content into words and then matches them, and `RegexKeywordGroup` that uses a regular expression for this job.
- Extract serialization of groups to `GroupSerializer` (previously every group decided about its own serialization via the `toString` method)
- Move a few things from model and logic to gui since they mostly contained ui-related stuff (e.g. GroupDesrciptions)

---

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez12/11/16, 09:01:43 PM
1721.02368Wrong usage of BibEntry field `id`"The field `id` in `BibEntry` is the internal ID used by JabRef and **NOT** the bibtexKey (which is set using (`setCiteKey(...)`). Moreover, the ID should be unique.

However, a lot of the importers and also at other spots either the bibtexkey, or a fixed value is used to set the ID.

I'm not sure whether this is already causing real trouble, but it is at least a source for potential bugs if we rely on the uniqueness of the IDs somewhere in the code.

Thus: `setId()` and the constructors of `BibEntry` should always use `IdGenerator.next()` to create a valid, unique ID value.""I think it is only `EntryFromPDFCreator` that actually does something wrong (the remaning search hits on ""id"" in importers is the ""id"" field in the import rather than the entry field, at least after a quick search). I fully agree with you that there should be no disadvantages and only advantages that the constructors handles the id (I do not even see the purpose of `setId()` then, all other uses of `setId()` just gets the next id anyway).
 =||= It would probably be good to do the corresponding changes in `BibtexString` as well.
 =||= As far as I know the id is used only in two places:
- keep the order of bib entries when writing the file (IdComparator or something like this)
- sync with external database

I'm not sure, but I kind of remember that the recent database sync redesign introduced another id field. If this is the case, then I would propose to remove the old id completely.
 =||= Also: detect circular referencing when resolving strings.
 =||= There is another potential use case: when clicking on an entry in the integrity check dialog the entry is selected based on BibTeX key. Here it would be better to select it based on Id  (although of course show the key as now).
 =||= "Never manually set ID of a BibEntry"The internal ID of a BibEntry should never be set manually. Closes #1721

DONE:
- Removed constructors that allow setting the ID of an entry
- __Every__ BibEntry now gets an ID on creation
- A clone of a BibEntry __always gets a unique ID__ now
- Only option to change ID of an entry is now via `setID()`

PENDING:
- [ ] Is IDGenerator really global and consistent between calls now?
- [ ] Can we import Bibentries without an open Database? See c884745. Importers used a static ID value before. Not 100% sure if this change has any side effects.
- [ ] setID may still be replaced for some occurences?! Maybe we can even remove this execpt for a few test cases or so."Stefan Kolbstefan-kolb12/17/16, 05:56:38 PM
2370.02372Relevance and read status cells: double-click behavior inverted"JabRef version 3.7 on Windows 7

Steps to reproduce:

1. Enable special fields ""Show relevance"" and ""Show read status""
2. Expected behavior: Double-click on relevance cell toggles relevance, double-click on read cell displays read status options.
3. Actual behavior: Relevance cell toggles read status options, read status cell toggles relevance.""Thanks for reporting! I can confirm this bug.

This should be easy to fix, though. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= @tobiasdiez I can confirm that this is fixed. Thank you very much! =||= "Relevance and Read status Field actions were switched"Fixes #2370
"Stefan Kolbstefan-kolb12/12/16, 06:55:04 PM
2011.02375Add cleanup for escaping comments"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef 3.6
windows 7 6.1 amd64 
Java 1.8.0_66

Steps to reproduce:
1. import from pubmed the ID 27623067:
2. run pdflatex with a file where this used
3. failure to compile due to % sign in the abstract: error message ! File ended while scanning use of \field.

files to reproduce the error can be found here:
http://b-kleine.com/technical/tex_20160918/

edit: this error must have happened very recently since files imported on 2016-09-14 imported correctly.""Thanks for your report! As this is not only a pubmed related thing, but a more general problem. 
So, I suggest creating a CleanUpAction to automatically encode %-signs.
 =||= This CleanUpAction should also be included in the `doPostCleanup` method of all fetchers. Refs https://github.com/JabRef/jabref/pull/1929#r78319240 @tobiasdiez 
 =||= Note that biber writes on this topic

> [P]lease note that biber will not attempt to sanitise the content of bibtex data sources. That is, don’t expect it to auto-escape any TeX special characters like ‘&’ or ‘%’ which it finds in, for example, your TITLE fields. It used to do this in earlier versions in some cases but as of version 0.9, it doesn’t because it’s fraught with problems and leads to inconsistent expectations and behaviour between different data source types. In your bibtex data sources, please make sure your entries are legal TeX code.

I think JabRef should not escape special characters, especially not always on writing. The cleanup operation is ok because then the user has to decide what he wants to do. For the same reason as above, I would not include it in the `doPostCleanup` operation of the pubmed fetcher.
 =||= I strongly support @tobiasdiez on this. A long time ago, we decided the following development rationale for JabRef: ""If in doubt, do as biber does"". 

Moreover, this cleanup should go into `LatexCleanupFormatter`, I think. This formatter already takes care of escaping and fixing LaTeX-related stuff.
 =||= Has this issue been resolved? With JabRef 3.7dev--snapshot--2016-09-25--medlineutf8--95f7f84, windows 7 6.1 amd64, Java 1.8.0_66 I still ran into the % trap.
 =||= @bernhard-kleine As there are no other comments here since my last one seven days ago: no, it has not.

Also, we will not do this automatically for importing pubmed entries (since the error is really on the side of pubmed which produces broken bibtex).
 =||= Thank you for your report :+1:
This should be fixed in current `preserve-percent-sign`. Please try the latest build from http://builds.jabref.org/preserve-percent-sign.
You can now use `LateXCleanup` inside `quality->cleanups` to escape `%` to `\%` =||= "Preserve % sign inside BibTeX fields via cleanup"Resolves #2011
You can now use LateXCleanup inside quality->cleanups to escape `%` to `\%`"Stefan Kolbstefan-kolb12/15/16, 02:37:51 PM
2390.02396Integrity check shows wrongfully that institution is a biblatex only element"JabRef version JabRef 3.8
windows 10 10.0 amd64 
Java 1.8.0_112

Steps to reproduce:

1. Have DB with bibtex mode and a techreport entry
2. Integrity check reports that institution is only for biblatex (proof below)
3. But this is wrong, see https://de.wikipedia.org/wiki/BibTeX

![image](https://cloud.githubusercontent.com/assets/375693/21286183/563def64-c44d-11e6-8c86-4882c7d77367.png)"[WIP] Introduce explicit list of ALL_BIBLATEX_ONLY_FIELDS"This fixes #2390. The last implementation used `EntryConverter.FIELD_ALIASES_LTX_TO_TEX`. This implementation is based on `BibtexEntryTypes` and `BiblatexEntryTypes`. 

## Issue
`JabRefPreferences.CUSTOM_TAB_NAME_num_` should be used to really determine the fields to check. This, however, is really a **huge** architectural rework.

It has to be checked, in following (seldom) situation:

- Field X is defined in JabRef's BiblatexEntryTypes
- Field X is added by the user to a general tab

JabRef now complains that X is Biblatex only.

## Further changes
 * ISBN and ISBN are now BibTeX fields, too.
   - Reason: Even though, both are not listed in [WikiPedia](https://en.wikipedia.org/wiki/BibTeX) and the [lncs style](ftp://ftp.springer.de/pub/tex/latex/llncs/latex2e/splncs03.bst), I see them so hard tied to a book and article, that I would add it. In the case of a DOI, JabRef (more or less) enforces it by offering that field in the ""General"" tab. Moreover, [it is part of plainnat.bst](http://tex.stackexchange.com/a/52046/9075) and [natbib](https://www.ctan.org/pkg/natbib) is a popular package.
 * `FieldName.COMMENT` instead of `FieldName.COMMENTS` (affects OaiImporter only)
 * Preferences: Use FieldName constants at `setLanguageDependentDefaultValues()`

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [n/a] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [n/a] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [n/a] If you changed the localization: Did you run `gradle localizationUpdate`?"Oliver Koppkoppor12/18/16, 12:35:01 PM
2394.02400Group names including brackets and spaces do not filter group anymore in v3.8"In version 3.7 is organized static groups with names like:
[a] Group1
     [aa] Subgroup1
     [bb] Subgroup2
[b] Group2
     [aa] Subgroup1
     [bb] Subgroup2

The letters in brackets are part of the group or subgroup name. I use this to achieve alphabetical ordering of my groups. This worked fine in v3.7
In version 3.8 names of groups/subgroups that contain brackets and spaces do not work anymore. Clicking on the subgroup names does not filter the group members. 
This happens under Windows 7 as well as under Ubuntu 16.04."Thanks for reporting this issue. It should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= Thanks, works perfectly. =||= Fix #2394 groups matching with brackets in name"Fixes #2394.

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez12/18/16, 04:48:55 PM
2426.02445Backslashes are repeatedly escaped on save in Content-Selectors"Hello,

JabRef version: JabRef 3.8; linux 4.4.0-57-generic amd64; Java 1.8.0_111 on Ubuntu 16.04
Steps to reproduce:

1. Create a new, empty database (bibtex mode)
2. Add a keyword under manage content selectors for journal: Test {\""U}mlaut
3. Hit Save
4. Check comment in editor: ... Test {\\""U}mlaut ...
5. Restart Jabref
6. Hit Save
7. Check comment in editor: ...Test {\\\\""U}mlaut

So with every save each Backslash is escaped again and again. 

### 1. Save
```
% Encoding: ISO-8859-1

@Comment{jabref-meta: databaseType:bibtex;}

@Comment{jabref-meta: selector_journal:Test {\\""U}mlaut;}
```

### 2. Save
```
% Encoding: ISO-8859-1

@Comment{jabref-meta: databaseType:bibtex;}

@Comment{jabref-meta: selector_journal:Test {\\\\""U}mlaut;}
```

I hope this provides all necassary and relevant information. I hope I haven't missed something. :-)""Thanks for your report! This sounds like something that is hopefully not too hard to fix. I will have a look at it after new year. =||= @universal In a few minutes, a dev version of JabRef that fixes this issue should be available here: http://builds.jabref.org/contentselector-escaping/ Can you please try it out?

Please note that meta data information in JabRef has to be escaped. Thus, if you enter a new selector keyword `{\""U}mlaut` in the UI, it should be written into the bibfile on save as `{\\""U}mlaut`, but upon parsing `{\""U}mlaut` should be displayed in the UI and written into an entry if you select it. =||= "Escaping of escape symbols in the MetaData"Fixes #2426 and is ready for review.

# Old discussion
Attempts to fix  #2426.

Is not yet functional, since the issue goes somewhat deeper and affects LaTeX-encoding things in all MetaData, also groups. The problem is line 64 in MetaDataSerializer:
```
 stringBuilder.append(StringUtil.quote(dataItem, MetaData.SEPARATOR_STRING, MetaData.ESCAPE_CHARACTER)).append(MetaData.SEPARATOR_STRING);
```
For every MetaData item, all special characters are quoted, including the quoting symbol (`\`). Thus, if there is a `\` in the MetaData, it is quoted during serialization, resulting in `\\`, which is read as such and requoted on the next serialization, resulting in `\\\\` and so on. 

Unfortunately, unquoting the text during parsing and quoting it again during writing does not help, since a single `\` will simply be lost. E.g.: unquoting `\""U` would result in `""U`, which upon quoting anew would stay `""U`.

The same problem should occur for groups, if I am not mistaken.

I now have the following options to resolve the problem:
 1. Add special handling for content selectors to avoid quoting for them
 2. Change `StringUtil.quote` to avoid quoting the quoting char (`\`)
 3. Add another method in StringUtil that avoids quoting the quoting char and use it for MetaData in general.

I am afraid that changing `StringUtil.quote` has wider implications that I am not aware of., especially relating to groups Hence, there is a need for discussion. 

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
"Jörg Lenhardlenhard01/05/17, 09:26:24 PM
2447.02450Timestamp settings might break EntryEditor"JabRef version 3.8.1 portable (.jar file)<!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... --> Windows 7 Pro and Ubuntu 16.04

To summarise, I can view large database (>1000 references, bib file > 2.5 MB) but cannot edit it with version 3.8.1. The same database can be edited with version 3.8. 

Version 3.8.1 can only edit small database. 

Steps to reproduce:

1. create large database (mine is 2.52 MB bib file containing 1080 references of articles)
2. open the file with JabRef 3.8.1 portable (.jar executable)
3. I can view the references but cannot enter edit mode (hit enter key, click Edit Entry button in toolbar, double click any entry, ... Nothing works). But the same database can be edited with version 3.8 portable. 
4. create small database (mine is bib file with 14 KB containing 32 articles.)
6. version 3.8.1 portable works perfectly. 

If it helps,  I also tried version 3.8.1 (.exe file) installed in Windows 7 Pro. Same problem for large database. ""Refs #1094 =||= Thanks koppor, but I don't think that's the same issue.  1094 is about the performance for large file which I assume they can still edit it though the response time is long. Mine is that you cannot edit any entry with 3.8.1 but you can edit with 3.8.. The loading time is slow but acceptable. So I assume we are talking about the different bugs (if what 1094 describes can be called bug). =||= There might be a problem with your preferences. Can you export them using Preferences -> Export and upload the file here so that we can investigate the problem. Probably, a reset (Preferences -> Reset) already solves the issue. =||= You are absolutely right about preferences, tobiasdiez. I messed quite a lot the repreferences and to be reproducible, I did the following:

1. To have a clean start, I deleted all jabref preference .xml files and I also deleted in Windows registry [HKEY_CURRENT_USER\Software\JavaSoft\Prefs\net\sf\jabref] where previous preferences has been kept.
One question here by the way: why preferences has been stored in Windows registry? Shouldn't the java runnable file be a portable application?

2. Open jabref-3.8.1.jar  --> Options --> Preferences  --> enable memory stick mode and biblatex as default bibliography mode --> export preferences as jabref-v3.8.1_ini01.xml (attached) --> OK to close option. --> open the large bib file that couldn't be edited previously and now I can edit it. I noticed the slightly quick loading time also. --> close jabref and jabref.xml is generated automatically which is very similar to the initial one attached. (I also export the jabref in windows registry as ini.reg to be used to compare the preferences later.)

3. open jabref-3.8.1.jar again and make some modification in options --> preferences and click OK to exit. Now I **cannot** edit the bib file. So the problem lies indeed in the preferences. --> close jabref  --> jabref.xml is automatically updated. I renamed it as jabref_with.error.xml and attached it here as well. 
(preferences in windows registry has been updated as well. I also exported and compared to the initial one)

4. I'll try to eliminate one by one the modified preferences to see where the problem is. 

----
It seems xml file is not supportted. I renamed it to txt to upload them. 

----
Update:

It seems that the problem comes from only one field: timestamp. So I deleted the uploaded files. 

The format of timestamp in previous preference is yyyy.MM.dd HH:mm. If I change it to yyyy-MM-dd HH:mm then everything works. So the difference is the - and . in date format. 

I tried back and forth several times and every time when I use . as separator , I cannot edit the entry but with - as separator I can. 

Problem solved for now, though it still remains unclear why previous versions (up to to 3.8) work fine with period in date format. 





 =||= Refs https://github.com/koppor/jabref/issues/166 and #2176 

Thank you for the test. We really need to find out, why `yyyy.mm.dd` is sometimes set as timestamp. =||= `yyyy.mm.dd` is given as an example in in help, while the default timestamp (`yyyy-mm-dd`) is not specified. See http://help.jabref.org/en/TimeStamp =||= ... might be caused by some changes of me in the context of introducing `LGoodDatePicker`... I'll investigate... =||= I found the problem and fixed it. A development build with a fixed version is available here: http://builds.jabref.org/another-datepicker-fix/ =||= "unregister DateChangeListener in manual update method"Fixes #2447 

- [x] Change in CHANGELOG.md described
- ~~[ ] Tests created for changes~~
- ~~[ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- ~~[ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)~~
- ~~[ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"Matthias Geigermatthiasgeiger01/06/17, 08:20:15 PM
2458.02459"""\~"" Escape Sequence Does Not Display Correctly in Entry Table""JabRef 3.8.1 on Linux Mint 17.3

The Latex backslash tilde escaped diacritic ""\\\~"" does not display correctly in the entry table. So, for example, the bibtex entry of ""Monta\\\~{n}a"" displays as ""Monta na"". Note the space in the middle of the word. The ""\\"" escape character seems to be ignored and the ""~"" character treated as a non-breaking space.

Peter""Hi Peter,

thanks for reporting. I can confirm this, it is a bug in our LaTeX to Unicode converter. 

For the record:
 - input: Monta\\~{n}a
 - desired output: Montaña =||= Turns out it was not a problem in the converter. We simply forgot to apply the converter for the author column.

@pirlite2 In a few minutes a new version of JabRef that fixes this issue will be available at http://builds.jabref.org/fix-conversion-of-tilde-n/ Could you please install this and verify that it solves your problem? =||= Yep! That fixes ""Monta\~{n}a"". Thanks.

Curious fix though as many characters with diacritics displayed fine before!

I have, however, found another problem. ""Mali\'{n}ski"" does not display correctly - it displays as ""Mali'nski"". Note the acute accent does not appear over the 'n' but before it, implying that the ""\\"" is ignored and the single quote is interpreted literally. 

Peter =||= Sorry. Damn Markdown! I should have checked the preview before posting.

I meant ""Mali\\'{n}ski""

Peter =||= @pirlite2  Does this happen with the fixed version?
Regarding the Markdown here, best way is to put such encoded things into code tags  =||= I'm afraid so. It happens with both versions - the 3.8.1 release and the fixed version.
 =||= > Curious fix though as many characters with diacritics displayed fine before!

For most fields they should work fine. The author field is just very special. In contrast to other fields it has an internal structure (different items separated by `and`, `,`, etc.), which is why we have a separate and complex parsing for it. And there, we forgot to perform the Unicode conversion.

Anyway, I can confirm that ""Mali\\'{n}ski"" does not render as it should. Hopefully, this is just a problem in the Unicode conversion this time. I will look into this and follow up with a separate PR, probably later today. =||= @pirlite2: This particular conversion probably never worked before. It should work now, though. Could you be so kind and try it out again? A working JabRef should be available here: http://builds.jabref.org/fix-apostroph-n-formatting/ =||= Yep. That works brilliantly! Thanks. =||= @lenhard:
I just tried the new version 3.8.2. I can confirm that this works for the author column in the entry table. In the entry preview of the article, however, you still get ""Mali\'{n}ski"".

Might be related to this issue (?):
https://github.com/JabRef/jabref/issues/2460 =||= @AEgit: Thanks for noticing! I think it would be best if you open a new issue for this. I guess it is a similar problem: We are not applying our LatexToUnicode conversion somewhere in the entry preview. 

#2460 is something different. There, we do apply the conversion, but the conversion somehow does not work correctly. =||= @lenhard : Done, see here:
https://github.com/JabRef/jabref/issues/2498 =||= "Fix conversion of tilde n"And although I said that I would not work on JabRef for the next two weeks, here is a PR. This stuff is addictive and I need help :-/

Fixes #2458. Author name formatting in the main table is handled different from the formatting of the remaining columns and we simply forgot to perform the unicode conversion also for the author column.

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
- [X] Manually tested changed features in running JabRef
"Jörg Lenhardlenhard01/12/17, 10:43:50 PM
2472.02473ACM fetcher adds junk to database"JabRef 3.8 Windows 10 x64

**Biblatex Mode**

1. Web Search 
2. ACM Portal | Guide to Computing LIerature
3. Search for:  Information Extraction from Voicemail
4. Check the corresponding entry (Huang...)
5. Click ok -> Generate Keys is activated -> Okay
6., Open BibTex DB in Editor, see the correct entry plus this junk:

```
<div class=""small-text"" align=""right"" style=""margin-right:10px"">
	
	BibTeX |
    
    <a href=""javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('exportformats.cfm?id=1220631&expformat=endnotes','theformats');"" >EndNote</a>  |  
    
    <a href=""javascript:ColdFusion.Window.show('theformats');ColdFusion.navigate('exportformats.cfm?id=1220631&expformat=acmref','theformats');"" >ACM Ref</a>
    
</div>

<PRE id=""1220631"">
```"Remove html code from ACM fetcher"Remove html code from ACM fetcher

Fixes #2472 

<!-- describe the changes you have made here: what, why, ... -->

- [X] Change in CHANGELOG.md described
~~- [ ] Tests created for changes~~
~~- [ ] Screenshots added (for bigger UI changes)~~
- [X] Manually tested changed features in running JabRef
- [X] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
~~- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"ChristophSiedlerchr01/20/17, 03:22:33 PM
2475.02480"duplicate entries with ""subdatabase on .aux file"" tool and crossreferences""version JabRef 3.8.1 on [Debian stretch](https://packages.debian.org/stretch/jabref) (2017-01-20)

When using the tool ""create subdatabase on .aux file"" with a reference database.bib using crossrefrences, the generated subdatabase has duplicate entries for the crossreferenced entries. Then bibtex makes error with the generated subdatabse due to the duplicate entries

Steps to reproduce (1 create aux file from tex and then use jabref on .aux file). Filenames are `jabref.tex` and `ref.bib`

1. jabref.tex
```
    \documentclass[letterpaper, 10pt]{article}
    \usepackage[authoryear]{natbib}
    \usepackage{lipsum}
    \begin{document}
    \lipsum[1-4]
    \cite{Lastname1xxxxa,Lastname2xxxxa,Lastnamexxxxa}
    \bibliographystyle{apalike}
    \bibliography{ref}
    \end{document} 
````
2. ref.bib (3 entries)
   
``` 
    @InCollection{Lastname1xxxxa,
      author    = {Lastname1, Firstname},
      title     = {Title},
      year      = {xxxx},
      volume    = {xx},
      number    = {xx},
      pages     = {x--xx},
      crossref  = {Lastnamexxxxa},
    }
    
    @InCollection{Lastname2xxxxa,
      author    = {Lastname2, Firstname},
      title     = {Title},
      year      = {xxxx},
      volume    = {xx},
      number    = {xx},
      pages     = {x--xx},
      crossref  = {Lastnamexxxxa},
   }
    
    @Book{Lastnamexxxxa,
      title  = {Title},
      year   = {xxxx},
      editor = {Lastname, Firstname},
      volume = {xx},
      number = {xx},
    }
    
    @Comment{jabref-meta: databaseType:bibtex;}
```
3. Makefile

```
    jabref:
	pdflatex jabref.tex; bibtex jabref.aux; pdflatex jabref.tex
	jabref --nogui --aux jabref,ref-generated.bib ref.bib
```

4. ref-generated.bib output (now with 4 entries, aka one duplicate)

```
@InCollection{Lastname2xxxxa,
  author    = {Lastname2, Firstname},
  title     = {Title},
  year      = {xxxx},
  volume    = {xx},
  number    = {xx},
  pages     = {x--xx},
  crossref  = {Lastnamexxxxa},
  owner     = {Néhémie Strupler},
  timestamp = {2017.01.20},
}

@InCollection{Lastname1xxxxa,
  author    = {Lastname1, Firstname},
  title     = {Title},
  year      = {xxxx},
  volume    = {xx},
  number    = {xx},
  pages     = {x--xx},
  crossref  = {Lastnamexxxxa},
  owner     = {Néhémie Strupler},
  timestamp = {2017.01.20},
}

@Book{Lastnamexxxxa,
  title  = {Title},
  year   = {xxxx},
  editor = {Lastname, Firstname},
  volume = {xx},
  number = {xx},
}

@Book{Lastnamexxxxa,
  title  = {Title},
  year   = {xxxx},
  editor = {Lastname, Firstname},
  volume = {xx},
  number = {xx},
}

@Comment{jabref-meta: databaseType:biblatex;}
```

->The entry @Book is now duplicated. Of course you could clean the subdatabase but this bug wasn't present in earlier version. Sadly I am not sure when it appeared but I think that this bug wasn't present in the version 3.4. I can't say when it appeared exactly and if it is related (only) to 3.8...

Thanks for your great work, and I am sorry that I can't help further""Hi @nehemie 

Thanks for your report. I wish all users would provide a minimal working example, as you did :)

I can confirm the error and implemented a fix. A working version is available at http://builds.jabref.org/fix-aux-duplicates/ Just to be sure, could you please install this version and check that it fixes your issue?

As a side note: I think in BibTeX it is mandatory that entries which are being crossref'd have to appear in the file before the entries which reference them. Resorting the entries has no effect on the issue described here, though. 

Regards
Jörg =||= "Fix aux duplicates"Fixes #2475

A very simple change. Our aux export had some problems when there were crossrefs to other entries. Such references could result in multiple additions of the referenced entry to the generated bib file. A simple check avoids this

- [X] Change in CHANGELOG.md described
- [X] Manually tested changed features in running JabRef"Jörg Lenhardlenhard01/23/17, 07:07:49 PM
2486.02487Force Shutdown after accepting external changes"JabRef 3.8.1-dev
windows 7 6.1 amd64 
Java 1.8.0_92

External changes mean that JabRef will no longer shut down normally and you have to force kill the process.

Steps to reproduce:

1. Open a database in JabRef
2. Change the file externally
3. JabRef notices external changes
4. Review and accept all external changes
5. Try closing the window (click on X). JabRef refuses to shut down and the following message appears in the error console.

```
14:38:15.275 [AWT-EventQueue-0] INFO  net.sf.jabref.logic.importer.OpenDatabase - Opening: \\nas-a1\redirected$\jorglenh\Desktop\test.bib
14:38:39.993 [AWT-EventQueue-0] ERROR net.sf.jabref.FallbackExceptionHandler - Uncaught exception Occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalArgumentException: missing event subscriber for an annotated method. Is net.sf.jabref.logic.autosaveandbackup.BackupManager@7772aed registered?
	at com.google.common.eventbus.SubscriberRegistry.unregister(SubscriberRegistry.java:111) ~[guava-20.0.jar:?]
	at com.google.common.eventbus.EventBus.unregister(EventBus.java:201) ~[guava-20.0.jar:?]
	at net.sf.jabref.model.metadata.MetaData.unregisterListener(MetaData.java:257) ~[main/:?]
	at net.sf.jabref.logic.autosaveandbackup.BackupManager.shutdown(BackupManager.java:149) ~[main/:?]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184) ~[?:1.8.0_92]
	at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175) ~[?:1.8.0_92]
	at java.util.HashMap$KeySpliterator.forEachRemaining(HashMap.java:1548) ~[?:1.8.0_92]
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:481) ~[?:1.8.0_92]
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471) ~[?:1.8.0_92]
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151) ~[?:1.8.0_92]
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174) ~[?:1.8.0_92]
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:1.8.0_92]
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418) ~[?:1.8.0_92]
	at net.sf.jabref.logic.autosaveandbackup.BackupManager.shutdown(BackupManager.java:85) ~[main/:?]
	at net.sf.jabref.gui.JabRefFrame.quit(JabRefFrame.java:859) ~[main/:?]
	at net.sf.jabref.gui.JabRefFrame$CloseAction.actionPerformed(JabRefFrame.java:1778) ~[main/:?]
	at net.sf.jabref.gui.JabRefFrame$2.windowClosing(JabRefFrame.java:604) ~[main/:?]
	at java.awt.AWTEventMulticaster.windowClosing(AWTEventMulticaster.java:349) ~[?:1.8.0_92]
	at java.awt.Window.processWindowEvent(Window.java:2054) ~[?:1.8.0_92]
	at javax.swing.JFrame.processWindowEvent(JFrame.java:305) ~[?:1.8.0_92]
	at java.awt.Window.processEvent(Window.java:2013) ~[?:1.8.0_92]
	at java.awt.Component.dispatchEventImpl(Component.java:4889) ~[?:1.8.0_92]
	at java.awt.Container.dispatchEventImpl(Container.java:2294) ~[?:1.8.0_92]
	at java.awt.Window.dispatchEventImpl(Window.java:2746) ~[?:1.8.0_92]
	at java.awt.Component.dispatchEvent(Component.java:4711) ~[?:1.8.0_92]
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) ~[?:1.8.0_92]
	at java.awt.EventQueue.access$500(EventQueue.java:97) ~[?:1.8.0_92]
	at java.awt.EventQueue$3.run(EventQueue.java:709) ~[?:1.8.0_92]
	at java.awt.EventQueue$3.run(EventQueue.java:703) ~[?:1.8.0_92]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_92]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76) ~[?:1.8.0_92]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86) ~[?:1.8.0_92]
	at java.awt.EventQueue$4.run(EventQueue.java:731) ~[?:1.8.0_92]
	at java.awt.EventQueue$4.run(EventQueue.java:729) ~[?:1.8.0_92]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_92]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:76) ~[?:1.8.0_92]
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) ~[?:1.8.0_92]
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201) [?:1.8.0_92]
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_92]
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_92]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_92]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_92]
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_92]

```"Make sure that unregistered event sources do not stop JabRef from shu…"…tting down

Fixes #2486. Unregistering event sources that have not been registered before should not stop JabRef from shutting down orderly. This PR logs such a problem instead of halting the shutdown of the program

- [X] Change in CHANGELOG.md described
- [X] Manually tested changed features in running JabRef
"Jörg Lenhardlenhard01/26/17, 12:35:40 PM
2251.02496Shortcut F8 not working"JabRef 3.7-dev--snapshot--2016-11-08--master--fffad83
windows 10 10.0 amd64 
Java 1.8.0_111

The shortcut `F8` for `Cleanup entries...` is not working for me.""Thank you for your report :smile:
I can reproduce the behavior.
 =||= @mairdl @Braunch Can you have a look?
 =||= I will have a look. 
 =||= I think it has something to do with the mainTable selecting the authors row when pressing F8. It's a JTable functionality. I tried adding this line `inputMap.put(KeyStroke.getKeyStroke(""F8""), ""none"");` in the `MainTable` constructor. But this didn't override the F8 functionality. Does someone have any ideas how to fix this?
 =||= Just noticed, that <kdb>F7</kbd> for ""Automatically set file links"" seems to work. Can you investigate the differences between these two functionalities?
 =||= http://www.java-forum.org/thema/f8-im-jtable.70666/

Why not use <kbd>Alt</kbd>+<kbd>F8</kbd>?
 =||= We should try to evade the alt key since it often is reserved for OS specific keybindings. I found that link before and I read the KeyBindings Javadoc what brought me to my attempt. But it does not work and I don't know why. @matthiasgeiger same for F9, it's just because the F8 key is used by the JTable.
 =||= I think, the decision is to change both <kbd>F8</kbd> and <kbd>F9</kbd> to include the <kbd>Alt</kbd> key. =||= <kbd>F9</kbd> works perfectly here, so I change only <kbd>F8</kbd> =||= "Change key binding for cleanup from F8 to ALT+F8"Fixes #2251. This solution is the quick solution by changing the shortcut. The alternative is to change the ActionTable etcl.

- [x] Change in CHANGELOG.md described
- [no] Tests created for changes
- [n/a] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [n/a] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [n/a] If you changed the localization: Did you run `gradle localizationUpdate`?"Oliver Koppkoppor01/29/17, 07:27:38 PM
2500.02507Entry preview: wrong display of apostrophe (treated as special character)"JabRef version 3.8.2 and  JabRef-4.0.0-dev--snapshot--2017-01-29--masr--7191a7055.jar 
on Linux LMDE Betsy



Steps to reproduce:

1. Create a new entry
2. As title of the article, type ````L'oscillation```` (for example)
3. In the table entry, the title is displayed as ````Lòscillation````
Note: the display is OK in the entry preview

![apostrophe](https://cloud.githubusercontent.com/assets/6931104/22422399/6b22c9a6-e6ec-11e6-96b3-e0a50f2ca94c.png)""The reason for this is that we are doing a LaTeX to unicode conversion for the entry table. Unfortunately, the plain text `L'oscillation` can be interpreted as valid LaTeX. There is no clean way to solve this issue, as there is no way to know that this text is not meant as LaTeX.

The only thing I can think of is to offer a preference option to turn of LaTeX rendering for the main table.  So that people can decide what is more important to them: LaTeX rendering including the above error, or no LaTeX rendering. @JabRef/developers WDYT? =||= Isn't the ""correct"" LaTeX command (without the usage of special packages) `{\'o}` or `\'{o}`? =||= @matthiasgeiger  Indeed! Stupid me, I should have tested this in a tex editor directly! In this case, it is just a bug in our converter, which is something that can be solved :-) Preferably with #2465 =||= Similar issue with some TeX special characters.
For example, ````Topo\_2d```` is displayed as ````Topo2d```` (no underscore) =||= The more issues we get in the display, the more I am convinced that we should use an external library for tex to unicode conversion. =||= Similar issue with author name (with Preferences set to `LatexToUnicode` instead of `HTMLChars`):

O'Connor

is displayed

as

OĆonnor =||= So, after some contemplation, I am almost certain that the issues described here are caused by this PR: #2464 

There, I implemented special handling for `'n`, which really is a valid in LaTeX. Unfortunately this seems to have affected all other occurrences of `'` and other letters. @JabRef/developers We should probably revert #2464 and go for a new solution for #2458. =||= "Fix apostrophe conversion"Fixes #2500. This repairs the apostrophe handling in the LaTeX to unicode conversion broken by #2464 and maintains the special handling of apostrophes in conjunction with the character 'n' that #2464 intended to fix. 

It increases complexity and reduces performance in the unicode conversion a tiny bit (through the additional checks that are now in there). Ultimately, the goal should be to replace the conversion with an external library.

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
- [X] Manually tested changed features in running JabRef"Jörg Lenhardlenhard02/01/17, 10:48:42 AM
2509.02514Office 207 XML export Nunber + Pubstate"TODO: Check export:
http://tex.stackexchange.com/questions/351303/exporting-references-to-ms-word-with-bibtex4word/351452#351452"Fix export of number + pubstate in OFFice XML"Fixes #2509
Export/import volumes <-> numberofvolume
Export pubstate field as bibtex only field

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
~~- [ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
~~- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"ChristophSiedlerchr02/03/17, 10:40:07 AM
2522.02527Not possible to save a database"JabRef_windows-x64_4_0_0-dev--snapshot--2017-02-05--multicleanup--ddecdfd3f
Windows 7
java 1.8.0_121

Steps to reproduce:

1. open a new database 
2. input from medline PMID 27151464
3. run cleanup
4. try **save** or **save as**

this does not give any reaction; the program when run exit notices there is something to save but the file dialog does not open.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

```
Put the excerpt of the log file here
```
btw: where to find the log file?""Unfortunately, I cannot reproduce this problem.

Can't you save the database at all? Or does this depend on the clean up? If so, can you provide a screenshot of your cleanup settings?

> btw: where to find the log file?

Since 4.0.0dev you can find it using `Help` -> `View event log` =||= ```

Opening: K:\BuchprojektSpringer\VierteAuflage\Literatur\adiponectin.bib

java.util.concurrent.ExecutionException: java.lang.IllegalArgumentException: Folder parameter must be a valid folder

runCommand error: null

java.lang.NullPointerException
	at net.sf.jabref.gui.exporter.SaveDatabaseAction.saveAs(SaveDatabaseAction.java:314)
	at net.sf.jabref.gui.BasePanel.runCommand(BasePanel.java:988)
	at net.sf.jabref.gui.JabRefFrame$GeneralAction.actionPerformed(JabRefFrame.java:1097)
	at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
	at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
	at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
	at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
	at javax.swing.AbstractButton.doClick(Unknown Source)
	at javax.swing.plaf.basic.BasicMenuItemUI.doClick(Unknown Source)
	at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(Unknown Source)
	at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
	at java.awt.Component.processMouseEvent(Unknown Source)
	at javax.swing.JComponent.processMouseEvent(Unknown Source)
	at java.awt.Component.processEvent(Unknown Source)
	at java.awt.Container.processEvent(Unknown Source)
	at java.awt.Component.dispatchEventImpl(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Window.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)

``` =||= This looks like the same problem in #2511  =||= Just one question, did you use the installer or did you just used the jar file? =||= Okay I found the reason: 
JabRef stores the least recently used directory to be able to show it again on the next FileDialog. If this ""working directory"" no longer exists the error shown above occurs.

""Quick"" solution would be to fallback to the default ""working directory"", i.e., the user home if the working dir is no longer existent. However, I'm not sure where to fix this as `FileDialog` is already deprecated... @JabRef/developers Has someone time to change to `DialogService` and check whether this service is also affected (I think so)? =||= Ahh... @bernhard-kleine to get it back working before we have published a fix you have to reset your preferences either completely using the UI (`Options` -> `Preferences` -> `Reset preferences`) or if you are using the jar version using the command: `java -jar <JarFileName> -d workingDirectory` =||= You could also simply change/reset the value in the registry (at least on
windows).


2017-02-06 14:38 GMT+01:00 Matthias Geiger <notifications@github.com>:

> Ahh... @bernhard-kleine <https://github.com/bernhard-kleine> to get it
> back working before we have published a fix you have to reset your
> preferences either completely using the UI (Help -> Preferences -> Reset
> preferences) or if you are using the jar version using the command: java
> -jar <JarFileName> -d workingDirectory
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/2522#issuecomment-277683027>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AATi5BAZzJZPBVUFKpuG6GdfrpanZec2ks5rZyJUgaJpZM4L35HV>
> .
>
 =||= I can wait for a fix since I am working still with txs 3.8.2. I installed the snapshot in parallel.
 =||= "Fix error when path is no valid directory"Fixes the exception Folder parameter must be a valid folder
Internal fix, 4.0.0 only
When no working directory is set and last used path was an actual file, File Dialog could not be opened.
Fixes #2522 "ChristophSiedlerchr02/08/17, 04:40:47 PM
2431.02531Can download article by DOI but not title"If I click the New Bibtex Entry button, paste this DOI:

    http://dx.doi.org/10.1016/j.engappai.2016.01.001

into the ID field, and then click the Generate button, then Jabref successfully downloads the article's BibTeX entry.

But if I instead paste the article's title into the ID field, change the ID Type to Title, and then click Generate, I get the error shown in this screenshot:

![image](https://cloud.githubusercontent.com/assets/3851891/21470766/0d0087c4-ca5d-11e6-8aa2-0fd1e2bbfb01.png)

I'm using the title string:

    Traffic flow optimization: A reinforcement learning approach

This is with: 

    JabRef 3.8.1 windows 7 6.1 amd64  Java 1.8.0_111""Hi, yes it's a bit confusing. 
The ID-based fetcher is the prefered way. You enter an unique identifier, e.g. a DOI, an ISBN or another identifier. Then the bibtextdata is pulled from that identifier.

The title based fetcher works the other way round: It searches www.crossref.org for the title and tries to get a doi for it. If a doi is found, the bibtexdata is pulled from it. 
Also a manual search at Crossref with the title revealed the article with a doi, it might be a problem with the CrossRef api.


 =||= It is a problem of the Crossref API. For some reason it only lists the entry as second result, but we only check the best result inside the CrossRef fetcher:
https://search.crossref.org/?q=Traffic+flow+optimization%3A+A+reinforcement+learning+approach =||= Ok, I relaxed the Crossref fetcher a bit. It checks more results now, in case the Crossref API does some wierd things like in that case.
You can try a build from http://builds.jabref.org/crossref-fetcher. =||= "Check more results returned by CrossRef API for matching"Resolves #2431

Changes:
- We will now check 5 results instead of just the first one for a matching title."Stefan Kolbstefan-kolb02/09/17, 09:26:25 AM
2534.02536Main window: author: compound names cut off even using {}"Using JabRef-4.0.0-dev--snapshot--2017-02-10--master--2b886cb71.jar,
if the author is set as
````  author   = {Franck {Taboado Varia}},````
it is displayed in the main window as 
````Varia````

I.e., the output is the same as for 
````author={Franck Taboado Varia},````
It means the additional {} (used to group the compound last name) are not taken into account.""Can confirm this, however, it is only in the MainTable, the preview dialog shows it correctly.
Probably refs #2532  =||= I just tested this with 3.8.2 and there the bug is, too.
In the entry preview I get: `Taboado Varia, F.`
 =||= This is not related to #2532, but to the unicode conversion in the main table as whole. A fix is provided in  #2536 and a working version should be available at http://builds.jabref.org/maintable-authors/

@mlep Can you please try this out and check if it solves the issue for you? =||= It looks it is fixed. Thanks! =||= "Maintable authors"Fixes #2534 which resulted in authors with multiple surnames having their names cut off.

- [X] Change in CHANGELOG.md described
- [X] Manually tested changed features in running JabRef"Jörg Lenhardlenhard02/10/17, 05:06:57 PM
2470.02548JabRef causes permanent discrete GPU usage"JabRef version 3.8.1 on macOS 10.12.2

Steps to reproduce:

1. Run JabRef
2. Go to About This Mac -> Display
3. Check current GPU in use


JabRef requires for some reason a discrete GPU, which seriously affects a battery life. Tested with both MacOS packed .app and cross-platform .jar

Is it really necessary? Or it is possible to turn off discrete GPU dependancy in the future release?""I've solved the problem by adding following lines into the `info.plist`

```plist
<key>NSSupportsAutomaticGraphicsSwitching</key>
<string>YES</string>
```

It's a temporary solution, since plist will be changed on a next JabRef autoupdate, so it should be added to the configs during the app build. =||= Thanks for the report and the solution!
We will try to integrate that into the App build information

2017-01-16 19:55 GMT+01:00 Alexey Kondratov <notifications@github.com>:

> I've solved the problem by adding following lines into the info.plist
>
> <key>NSSupportsAutomaticGraphicsSwitching</key>
> <string>YES</string>
>
> It's a temporary solution, since plist will be changed on a next JabRef
> autoupdate, so it should be added to the configs during the app build.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/2470#issuecomment-272938408>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AATi5P_AfXOwhBNgYExtlXgVuhKYUoWsks5rS70mgaJpZM4Lk1za>
> .
>
 =||= The question really is why does this happen? =||= It's difficult to suggest anything, since I don't know an internal structure and technologies of JabRef (I only know that it uses Java), but for example:

```
By default, once your application creates an OpenGL context (by either calling OpenGL directly or an
 API that relies on OpenGL such as Core Animation, Core Image, etc), the MacBook Pro automatically
 switches to the higher-end discrete GPU for performance concerns and won't switch back until the
 application quits. On OS X 10.6 and earlier, you are not allowed to choose to run on the integrated
 GPU instead. Starting with OS X 10.7, you may utilize the integrated GPU on the MacBook Pros if you
 want to, for example, to save battery life.
```

https://developer.apple.com/library/content/qa/qa1734/_index.html =||= Hi @ololobus! 
Which Java version are you using? 
If I understand [this bugreport for OpenJDK](https://bugs.openjdk.java.net/browse/JDK-8132759) (which is a backport for [this one](https://bugs.openjdk.java.net/browse/JDK-8041900)) correctly, the problem should be fixed since OpenJDK 1.8.0_92. =||= Hi @matthiasgeiger,

```shell
|--> java -version
java version ""1.8.0_112""
Java(TM) SE Runtime Environment (build 1.8.0_112-b16)
Java HotSpot(TM) 64-Bit Server VM (build 25.112-b16, mixed mode)
``` =||= Thanks! This is Oracle JDK, right?  =||= Yes, it is right =||= As we don't have any developer coding on a Mac... Could you please check whether this problem is also present if you use a recent OpenJDK? 

If not, this seems to be a general Oracle Java bug and not really caused by JabRef.

 =||= I will try one day, but there are no official fresh builds of OpenJDK for Mac (there is only a critically outdated port `openjdk6`, so I guess the only way is to build it from source). Thus, the probability that someone uses JabRef with OpenJDK under Mac OS X tends to zero.

Anyway, I clearly solved the issue for myself by adding two lines into `info.plist` of your app, it just allows OS to automatically switch GPU for the current app. If you want to solve the issue for other casual OSX users of JabRef you can do it too, but during your app package build process. =||= @chochreiner Does this also happen for you? Should I add this to the installer by default? =||= @ololobus @chochreiner If it is a problem, it should be fixed by the latest build from http://builds.jabref.org/osx-gpu. Please confirm if possible 😄  =||= @stefan-kolb just tried your dev build, works well on integrated gpu :)
To be sure compared it with a clean installation of the latest release (3.8) from website and yes, current version requires discrete gpu =||= "JabRef causes permanent discrete GPU usageResolves #2470Stefan Kolbstefan-kolb02/15/17, 07:04:21 PM
2493.02549Correct capitalisation of 'biblatex'The name of  LaTeX `biblatex` package has always been written all-lowercase except at the start of sentences, _i.e._ it follows normal capitalisation rules in English. Currently, JabRef calls it 'BibLaTeX' both on the website and in the program: please can this be corrected."Refs https://github.com/koppor/jabref/issues/73 - I update it accordingly. =||= @josephwright Could you also correct the spelling on CTAN: https://www.ctan.org/pkg/biblatex?lang=en ?

It is this page that led us to think that 'BibLaTeX' was correct. =||= ![grabbed_20170127-135020](https://cloud.githubusercontent.com/assets/1366654/22371491/a7c7a054-e497-11e6-80b7-9f3903e4f1a8.png)

Please note there are no news since nearly 5 years on CTAN on biblatex.

I double checked with CTAN's webmaster and they say that the feed generation works. Maybe there were no public announcements on CTAN? =||= @lenhard  I'll talk to CTAN about their text: the official documentation has always had all-lowercase. 
 =||= @koppor I know there have been lots of releases! I guess something odd it the way they've added this stuff (it did not used to be there). =||= Minor comment for CTAN: Even worse, there is biblateX --> https://www.ctan.org/ctan-ann/id/mailman.307.1473360229.1426.ctan-ann@ctan.org =||= "Correct naming of biblatexResolves #2493Stefan Kolbstefan-kolb02/15/17, 07:04:54 PM
2095.02550"Replace ""Database"" by ""Library"" in the translation""Following the discussion of https://github.com/JabRef/jabref/pull/1988, we decided to replace ""Database"" by ""Library"". This also has huge impact on the code (BibDatabase vs. BibLibrary)

Reasoning: 

1. Avoiding confusion with [SQL databases](https://help.jabref.org/en/SQLDatabase)
2. To be in line with [other bibliography management tools](https://github.com/JabRef/jabref/wiki/Alternatives).""A remark: Bibtexing, the official BibTeX specification uses the term ""database file"".
 =||= Current state: We changed the localization (#2550) and will change the code gradually. =||= I noticed that this change messed up the Italian translation.
The word ""database"" was kept untraslated in the Italian translation, since it is commonly used. However replacing all occurrences of ""database"" with  in the .properties files produced some very odd translations. The reason is the different grammatical gender of the two words in Italian: ""database"" is masculine, but ""library"" if left untraslated, would be feminine, as the corresponding meaning ""biblioteca"". Therefore all the inflections are wrong (articles, verbs, adjectives).
So, to fix the translation we have some options: 
- put back ""database"" in the translation (in other languages the change had not such effect, e.g. ""Datebank"" in german)
- keep ""library"" untraslated, but fixing the inflections
- decide on a translation: ""biblioteca"", ""libreria"", ""file"", ""base di dati di riferimenti bibliografici"", other?

Some help from other translators would be much appreciated. =||= It should be ""Bibliothek"" in German. I have to check.

Is it easy to check Mendely, Zotero, or similar apps how they translate in
Italian?

We did not want to use ""file"", because its too technical. We dropped
""database"" to avoid confusion with SQL databases.

""libreria"" sounds best :)

Am 15.04.2017 15:24 schrieb ""Ambrogio Oliva"" <notifications@github.com>:

I noticed that this change messed up the italian translation.
The word ""database"" was kept untraslated in the Italian translation, since
it is commonly used. However replacing all occurrences of ""database"" with
in the .properties files produced some very odd translations. The reason is
the different grammatical gender of the two words in Italian: ""database"" is
masculine, but ""library"" if left untraslated, would be feminine, as the
corresponding meaning ""biblioteca"". Therefore all the inflections are wrong
(articles, verbs, adjectives).
So, to fix the translation we have some options:

   - put back ""database"" in the translation (in other languages the change
   had not such effect, e.g. ""Datebank"" in german)
   - keep ""library"" untraslated, but fixing the inflections
   - decide on a translation: ""biblioteca"", ""libreria"", ""file"", ""base di
   dati di riferimenti bibliografici"", other?

Some help from other translators would be much appreciated.

—
You are receiving this because you modified the open/close state.
Reply to this email directly, view it on GitHub
<https://github.com/JabRef/jabref/issues/2095#issuecomment-294293179>, or mute
the thread
<https://github.com/notifications/unsubscribe-auth/ABTaflJMb6SEg-T8qE5K2gSC69JkeeGcks5rwMURgaJpZM4KJ4IJ>
.
 =||= I checked today the German translations, and there ""library"" is still translated ""Datenbank"". In Spanish still ""base de datos"". In French ""base"" was changed to ""fichier"" (=file), not to ""bibliothèque"".
In Zotero interface the Italian translation is ""libreria""; Mendeley does not seem to have translations.
The word ""libreria"" actually means ""bookshelf"", so it may be appropriate as a translation, even though it sound to me a lazy translation (a ""false friend"").
Maybe the other italian translator @frithnanth could give some advice. =||= In French, ""bibliothèque"" would not carry the meaning of a list of references (""Bibliothèque"" is about the actual books on the shelf). Historically, ""Fichier"" was the box where the paperrecords were stored (one sheet per book). It happens that now we use ""Fichier"" for ""computer file"" too. =||= ""Database"" can be translated into Italian as ""banca dati"" (""data bank"") or ""archivio"" (""archive""). I prefer the second one, since the first sounds a bit bureaucratic. =||= German is fixed in #2747. Wrong usage of ""library"" in the context of SQL databases is fixed in https://github.com/JabRef/jabref/pull/2748. =||= Thanks to @frithnanth for fixing and updating the Italian translation. (BTW, the Italian word ""libreria"" also means ""bookshop""). =||= @JabRef/translators Could you please check your translations whether ""library"" is correctly translated? =||= Actually, the word ""libreria"" in Italian means both ""bookshop"" and
""bookshelf"".

On Tue, Apr 18, 2017 at 7:29 PM, Ambrogio Oliva <notifications@github.com>
wrote:

> Thanks to @frithnanth <https://github.com/frithnanth> for fixing and
> updating the Italian translation. (BTW, the Italian word ""libreria"" also
> means ""bookshop"").
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/2095#issuecomment-294919485>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ADyA2EIR-XidLxX9M8RK27GVr7EpvRMKks5rxPMIgaJpZM4KJ4IJ>
> .
>

-- 
Fernando Santagata
 =||= "Bib database -> libraryResolves #2095Stefan Kolbstefan-kolb02/15/17, 10:34:39 PM
2570.02575ArXiV fetcher returns wrong entries when DOI is not in catalog"Every time I am using the quality -> lookup full text documents I get a pdf which is completely irrelevant
Any suggestions ?

I am using jabref 3.8.2 , java-runtime 8, antergos os , gnome 3.22.2""Can you give us a concrete example please? Everytime makes no sense. This should only happen in rare occasions. =||= Of course, here are a couple of examples:

1) Wess and Zumino, Superspace formulation of Supergravity, Phys.Lett. 1977 ----> 
     
  T. Altherr, E. Petitgirard, T. del Rı́o Gaztelurrutia, Photon Propagation in Dense Media,
  arXiv:hep-ph/9212264

2) Stelle, K.S. and West, Peter C., Minimal Auxiliary Fields for Supergravity, Phys.Lett. 1978  ------>

Gregory W. Anderson and Tomáš Blažek, E 6 unification model building II.Clebsch-Gordan coefficients of 78⊗78, arXiv:hep-ph/0006017

For full details look at the picture attached. For every single one of these entries the ""Look for full text documents"" downloaded a pdf file which is completely unrelated.
![screenshot from 2017-02-20 09-40-52](https://cloud.githubusercontent.com/assets/13489663/23117614/dcecfa1a-f750-11e6-8408-ea04834dd78f.png)

Also, I have a couple observations that may be useful to CSI the problem.
I) The same wrong pdf was downloaded for many different entries,
II) All of them are downloaded from arXiv,
III) The wanted-to-download-pdfs are available at Sciencedirect and I have access to them
  =||= Thanks for reporting this. It is a problem of the Arxiv API. It just returns an entry for a correct DOI that is incorrect. Apparently the `doi:*` query string does not work as expected. Will look into that! =||= http://export.arxiv.org/api/query?search_query=all:10.1016/0370-2693(77)90015-6
https://arxiv.org/help/api/user-manual#search_query_and_id_list

```
    @Test
    public void findByDOINotAvailableInCatalog() throws IOException {
        entry.setField(""doi"", ""10.1016/0370-2693(77)90015-6"");

        assertEquals(Optional.empty(), finder.findFullText(entry));
    }
``` =||= @JabRef/developers We need to ask if they can fix this behavior in the arXiV API or we need to remove the fetching by DOI from the ArXiV fetcher!
`http://export.arxiv.org/api/query?search_query=doi:10.1016/0370-2693(77)90015-6`
 =||= This seems like a bug from Arxiv and has already been reported:
  https://groups.google.com/forum/#!msg/arxiv-api/ew7nadnvAxw/uOwSok-ACQAJ;context-place=forum/arxiv-api =||= "Check similarity of entry when using DOI retrieval with ArXiVResolves #2570Stefan Kolbstefan-kolb02/21/17, 06:02:56 PM
2574.02576Science Direct fetcher is broken"> URL no longer available inside id=`pdfLink`
http://www.sciencedirect.com/science/article/pii/0370269377900156?via%3Dihub
Only new design? Some articles?
This one still works:
http://www.sciencedirect.com/science/article/pii/S1674775515001079

```
<div class=""PdfDropDownMenu""><ul><li><a href=""/science/article/pii/0370269377900156/pdf?md5=3db7bb02cd67f3d839b1e563e6f21b00&amp;pid=1-s2.0-0370269377900156-main.pdf"" target=""_blank"" aria-label=""Download single PDF. Opens in a new window."" aria-expanded=""true"" aria-live=""polite"" rel=""nofollow"" data-hack=""#""><span class=""Icon Pdf"" style=""display: inline-block; height: 16px; width: 16px;""><svg fill=""#fff"" tabindex=""-1"" focusable=""false"" height=""32"" width=""32"" viewBox=""0 0 32 32"" y=""40"" style=""width: 100%; height: 100%;""><defs><linearGradient id=""a"" gradientTransform=""matrix(.054 0 0 .05 -39.302 -11.44)"" gradientUnits=""userSpaceOnUse"" x1=""1010"" x2=""1200"" y1=""686"" y2=""339""><stop offset=""0"" stop-color=""#fff""></stop><stop offset=""1"" stop-color=""#e1e1e1""></stop></linearGradient></defs><path d=""M7 .362h17.875l6.763 6.1V31.64H6.948V16z"" fill=""url(#a)"" stroke=""#000"" stroke-width="".703""></path><path d=""M.167 2.592H22.39V9.72H.166z"" fill=""#da0000"" stroke=""#aaa"" stroke-width="".315""></path><path d=""M5.97 3.638h1.62c1.053 0 1.483.677 1.488 1.564.008.96-.6 1.564-1.492 1.564h-.644v1.66h-.977V3.64m.977.897v1.34h.542c.27 0 .596-.068.596-.673-.002-.6-.32-.667-.596-.667h-.542m3.8.036v2.92h.35c.933 0 1.223-.448 1.228-1.462.008-1.06-.316-1.45-1.23-1.45h-.347m-.977-.94h1.03c1.68 0 2.523.586 2.534 2.39.01 1.688-.607 2.4-2.534 2.4h-1.03V3.64m4.305 0h2.63v.934h-1.657v.894H16.6V6.4h-1.56v2.026h-.97V3.638"" fill=""#fff9f9""></path><path d=""M19.462 13.46c.348 4.274-6.59 16.72-8.508 15.792-1.82-.85 1.53-3.317 2.92-4.366-2.864.894-5.394 3.252-3.837 3.93 2.113.895 7.048-9.25 9.41-15.394zM14.32 24.874c4.767-1.526 14.735-2.974 15.152-1.407.824-3.157-13.72-.37-15.153 1.407zm5.28-5.043c2.31 3.237 9.816 7.498 9.788 3.82-.306 2.046-6.66-1.097-8.925-4.164-4.087-5.534-2.39-8.772-1.682-8.732.917.047 1.074 1.307.67 2.442-.173-1.406-.58-2.44-1.224-2.415-1.835.067-1.905 4.46 1.37 9.065z"" fill=""#f91d0a""></path></svg></span><!-- react-text: 451 -->Article<!-- /react-text --></a></li><li><a href=""#"" aria-label=""Download whole issue.""><span class=""Icon Pdf"" style=""display: inline-block; height: 16px; width: 16px;""><svg fill=""#fff"" tabindex=""-1"" focusable=""false"" height=""32"" width=""32"" viewBox=""0 0 32 32"" y=""40"" style=""width: 100%; height: 100%;""><defs><linearGradient id=""a"" gradientTransform=""matrix(.054 0 0 .05 -39.302 -11.44)"" gradientUnits=""userSpaceOnUse"" x1=""1010"" x2=""1200"" y1=""686"" y2=""339""><stop offset=""0"" stop-color=""#fff""></stop><stop offset=""1"" stop-color=""#e1e1e1""></stop></linearGradient></defs><path d=""M7 .362h17.875l6.763 6.1V31.64H6.948V16z"" fill=""url(#a)"" stroke=""#000"" stroke-width="".703""></path><path d=""M.167 2.592H22.39V9.72H.166z"" fill=""#da0000"" stroke=""#aaa"" stroke-width="".315""></path><path d=""M5.97 3.638h1.62c1.053 0 1.483.677 1.488 1.564.008.96-.6 1.564-1.492 1.564h-.644v1.66h-.977V3.64m.977.897v1.34h.542c.27 0 .596-.068.596-.673-.002-.6-.32-.667-.596-.667h-.542m3.8.036v2.92h.35c.933 0 1.223-.448 1.228-1.462.008-1.06-.316-1.45-1.23-1.45h-.347m-.977-.94h1.03c1.68 0 2.523.586 2.534 2.39.01 1.688-.607 2.4-2.534 2.4h-1.03V3.64m4.305 0h2.63v.934h-1.657v.894H16.6V6.4h-1.56v2.026h-.97V3.638"" fill=""#fff9f9""></path><path d=""M19.462 13.46c.348 4.274-6.59 16.72-8.508 15.792-1.82-.85 1.53-3.317 2.92-4.366-2.864.894-5.394 3.252-3.837 3.93 2.113.895 7.048-9.25 9.41-15.394zM14.32 24.874c4.767-1.526 14.735-2.974 15.152-1.407.824-3.157-13.72-.37-15.153 1.407zm5.28-5.043c2.31 3.237 9.816 7.498 9.788 3.82-.306 2.046-6.66-1.097-8.925-4.164-4.087-5.534-2.39-8.772-1.682-8.732.917.047 1.074 1.307.67 2.442-.173-1.406-.58-2.44-1.224-2.415-1.835.067-1.905 4.46 1.37 9.065z"" fill=""#f91d0a""></path></svg></span><!-- react-text: 464 -->Article + other articles in this issue<!-- /react-text --></a></li></ul></div>
```

We use the Elsevier API for getting the Sciencedirect web page link and then scrape the web page for the deep link."Add logic for new Sciencedirect pagesFixes #2574Stefan Kolbstefan-kolb02/21/17, 05:55:55 PM
2580.02583Editing keywords clears priority, ranking, quality and relevance"JabRef version 3.8.2 on Windows 10

Editing keywords clears the fields priority, ranking, quality and relevance

Steps to reproduce:

__Write values of special fields as separate fields to BiBTeX__ enabled!
1. Add a value to any of the fields: priority, ranking, quality and relevance
2. Edit the keyword field
3. Save or change focus from the keywords field in the entry editor

The fields priority, ranking, quality and relevance are now removed.

No events reported in the log""Please have a look at your preferences: Options->Preferences->Entry table columns.

Do you have ""synchronize with keywords"" enabled by any chance? In this case, the fields you describe above are synchronized with your keywords. Thus, if you enter something else in the keywords field and no information regarding these fields is present, they are cleared. =||= No, I have ""Write values of special fields as separate fields to BiBTeX"" enabled. (And I can see these special fields in the .bib file, and they are removed when editing keywords) =||= Ok, thanks. I can confirm this. It seems that the keyword synchronization kicks in for the special fields even though it should not. =||= Thank you for your report :+1:
This should be fixed in current `sync-special-fields`. Please try the latest build from http://builds.jabref.org/sync-special-fields. =||= "Keyword - Special field synchronization"Fixes #2580 
Synch should now work appropriately.

Few questions here @koppor and all others:

- [x] If keyword sync is enabled, there is the possibility that we have multiple `rank1, rank4` keywords.
Only the first one is synched with the special field. Was this always like this? Seems like a bug to me. 

- [x] If we change the preferences from write special fields to file to keyword synchronization the data gets lost. Did I introduce this or was this a bug?"Stefan Kolbstefan-kolb02/22/17, 05:24:44 PM
2577.02592PDF importation freezes when filename contains a curly bracket"When I try to import PDFs via the Quality -> Find unlinked files, the process freezes when a PDF containing a curly bracket ( ""{"" or ""}"" ) in its filename is encountered.

JabRef version 4.0.0-dev (snapshot 2017-02-18) on Win 10 (1607)

Steps to reproduce:

1. Open Quality -> Find unlinked files
2. Select a folder containing at least one PDF with a curly bracket in its name
3. Scan directory
4. Make sure the offending file is selected
5. Apply

After the last step, the process goes through all valid files (showing ""Importing into database... M of N""), but freezes the whole JabRef once it gets to the offending file.""Probably related to #2439. It seems like our pdf-handling code has problems with curly braces. =||= Not confirmed! I am working with 3.8.2 and snapshots JabRef 4.0.0-dev--snapshot--2017-02-24--master--83219486e and others before, I didnot have issues with braces. Just tested =||= I could reproduce the bug:
But it is not a problem of the braces, it happens when you an ""unselect all"" and then only select one file

```
21:52:04.655 [JabRef CachedThreadPool] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception Occurred in Thread[JabRef CachedThreadPool,6,main]
java.lang.IndexOutOfBoundsException: Cannot get at -1 on list of size 2
	at ca.odell.glazedlists.TransformedList.get(TransformedList.java:105) ~[glazedlists_java15-1.9.1.jar:1.9.1]
	at org.jabref.gui.maintable.MainTable.getEntryAt(MainTable.java:347) ~[bin/:?]
	at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:172) ~[bin/:?]
	at org.jabref.pdfimport.PdfImporter.importPdfFilesInternal(PdfImporter.java:159) ~[bin/:?]
	at org.jabref.pdfimport.PdfImporter.importPdfFiles(PdfImporter.java:113) ~[bin/:?]
	at org.jabref.gui.importer.EntryFromPDFCreator.createBibtexEntry(EntryFromPDFCreator.java:64) ~[bin/:?]
	at org.jabref.gui.importer.EntryFromFileCreator.createEntry(EntryFromFileCreator.java:90) ~[bin/:?]
	at org.jabref.gui.importer.EntryFromFileCreatorManager.addEntriesFromFiles(EntryFromFileCreatorManager.java:131) ~[bin/:?]
	at org.jabref.gui.FindUnlinkedFilesDialog.lambda$2(FindUnlinkedFilesDialog.java:526) ~[bin/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_121]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_121]
	at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]

``` =||= @programagor The issue is not related to the filename, but happens when you select a pdf and don't create an entry from it (just select nothing), then it throws an exception which breaks JabRef  =||= "Fix pdf file import when only one file selected and no entry created"Fixes #2577 
Problem is not the filename 
Problem: You still get a warning that one file could not be imported, although it successfully worked.

I have unfortunately no idea if this code is at all correct, the DroppedFileHandler stuff looks suspicious to me, as it is normally used wit Drag and drop.

**Question**: Is there somewhere a method for linking pdfs?


<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [X] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr02/28/17, 01:11:38 PM
2596.02601The JabRef goes mad after clicking `Enable saving actions` in database properties."<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 
Version information:
```
JabRef 3.8.2
windows 10 10.0 amd64 
Java 1.8.0_121
```

Steps to reproduce:

1. Open `database properties` dialog, and Click `Enable saving actions`.
2. Using `Tasks Manager` in Windows 10, you will see JabRef costing a high quota of CPU, esp. higher than 30% for my laptop.
3. The directory contains the `BibTex` file will continuously generate new *.sav.log file and delete it again and again.
4. When open the error console, there is nothing in the `Exception` tab.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

Only one log of opening my database found in the error console
```
20:15:08.224 [AWT-EventQueue-0] INFO  net.sf.jabref.logic.importer.OpenDatabase - Opening: D:\git\JabRefBibs\MyFullResearch.bib
```

Additionally, when I disabled the saving actions, everything becomes still at once.""I cannot reproduce this. When I enable save actions on my bib file, there is no performance increase or weird creation of save files.

I assume your problem is the following: You have a large bib file with many things to fix. When you first enable save actions, every action taken triggers a change event, which results in the sav file being created. Since there are many entries and many things to fix, this happen a lot of times. However, this is a one time process. Once the save actions have reformatted your fields, or whatever you configured them to do, the next save will be significantly faster since fewer actions will be performed.

How large is your file? Which save actions are you using? How many line changes are there after the 'mad' save? (Since your file seems to be in git that should be very easy to find out). =||= My `BibTex` file is 249KB large, including 199 entries. And I use `BibLaTex` mode.

Here is my enabled save actions.
```Tex
@Comment{jabref-meta: saveActions:enabled;
date[normalize_date]
pages[normalize_page_numbers]
month[normalize_month]
all-text-fields[latex_to_unicode,ordinals_to_superscript]
title[html_to_unicode]
;}
```

Strange enough, I checked my bib file, and I found there was not a single line really changed except those lines about `jabref-meta`. And the system keeps generating new *.sav.log file and deleting it. =||= Ok, thanks! With this information I can reproduce the behavior! 

The problem is the following save action
`all-text-fields[latex_to_unicode,ordinals_to_superscript]`

In this configuration you are telling JabRef: ""Convert all LaTeX stuff to Unicode (latex_to_unicode) and convert all ordinals to LaTeX superscript (ordinals_to_superscript)."" This contradicts with each other since JabRef is trying to remove all LaTeX stuff and add LaTeX stuff at the same time. It seems, strangely, that JabRef is stuck in a loop as a result.

You will have to select, though: Do you want all LaTeX code to be replaced by Unicode or do you want to have things like `\texsuperscript` in your entries? Both things at the same time are not possible.

Using just one of the formatters works fine for me. =||= Thank you so much for your explanation in such details. I removed `ordinals_to_superscript`, and it suddenly becomes clear.

Howerver, what I want to mention here is that these save actions are actually the recommended ones of `JabRef`. I just click the label `Recommended for BibLaTeX`, and these very save actions come out there. It must be so weired that there could be some issues to fix for the recommendation.

Did I make it clear? And I hope these feedbacks could be of help. =||= Thank you so much for your explanation in such details. I removed `ordinals_to_superscript`, and it suddenly becomes clear.

Howerver, what I want to mention here is that these save actions are actually the recommended ones of `JabRef`. I just click the label `Recommended for BibLaTeX`, and these very save actions come out there. It must be so weired that there could be some issues to fix for the recommendation.

Did I make it clear? And I hope these feedbacks could be of help. =||= Thanks for pointing this out, this needs to be changed! I guess that the combination worked at the time when it was defined. We are constantly improving the formatters, for instance the latex to unicode formatter was heavily extended recently. Due to such changes, the configuration might have been broken. =||= Thank you very much! It will be great then. =||= "Remove OrdinalsToSuperscriptFormatter from recommended biblatex save actions"Fixes #2596

The LatexToUnicode is conflicting with the OrdinalsToSuperscriptFormatter but both are recommended for the same fields for biblatex. This PR removes the latter. Since biblatex is usually used together with UTF-8 and Unicode conversion should be sufficient."Jörg Lenhardlenhard03/05/17, 08:38:10 PM
2355.02626F4 should open currently selected file"<kbd>F4</kbd> opens the first attached file. When in the General tab another file is selected, this should be opened.

![not-functioning](https://cloud.githubusercontent.com/assets/1366654/21022964/db19a334-bd7e-11e6-8cbc-acaf6f090e7f.gif)

This is https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=445301""F4 is hooked to the mainTable but not the file table in the general tab that's why it opens another PDF all the time.
`mainTable.getSelectedEntries();`
For me this is not a bug but a misinterpreted feature 😉  =||= "F4 opens selected file in current JTable contextResolves #2355Stefan Kolbstefan-kolb03/09/17, 12:18:25 PM
2573.02641Integrate github plugins for automatic bug report"Issues made with JabRef directly result in very short issues (see #2571). Is it possible to show the issue template (https://github.com/JabRef/jabref/blob/master/.github/ISSUE_TEMPLATE.md) in the JabRef UI to force the user to fill that out?""Told you it is a bad idea to make bug reporting so very easy :-P

I expect that we will get spammed by useless reports now... =||= But it is a true errors . Maybe the automatic bug report is too simple. =||= "Improve issue reporting a bit"See #2573.
I also wanted to add the log details to the report without the necessity to paste them later on. Dunno why this was implemented this way initially (See https://github.com/JabRef/jabref/pull/1383). However, the explorer will cut off the arguments at some point so this did not work for me.
I  think it is not convenient if the user needs to add this info manually.
Maybe someone else has an idea how to change this.

I still think the current addition fixes #2573 for now.

![image](https://cloud.githubusercontent.com/assets/2141507/23855724/23d92b22-07f7-11e7-83ea-7a81c7225982.png)

![image](https://cloud.githubusercontent.com/assets/2141507/23855733/30e3d056-07f7-11e7-80c8-f3ef9dcf4a35.png)"Stefan Kolbstefan-kolb03/14/17, 05:13:44 PM
2484.02644Jabref 3.8.1 can't connect to open office 4.1.3"
JabRef version 3.8.1 on Mac OS X 10.9.5

connecting to OpenOffice 4.1.3 fails with a message that the file /Applications/OpenOffice.app/Contents/Resources/java/unoil.jar cannot be found.

In the OpenOffice application folder the Resources/java folder is missing. The jar file is located in /Applications/OpenOffice.app/Contents/MacOS/classes/

A workaround seems to be in 'repairing' the OpenOffice application on the disk by using Terminal as follows:
_$ cd /Applications/OpenOffice.app/Contents/Resources
$ ln -sf ../MacOS/classes/ java_

After this workaround JabRef connected to the running instance of OO, correctly reporting the file that was open.

As a caveat, I have not tried using this beyond establishing connection.

A better solution would be for JabRef to look for jar files in both the Macos/classes and Resources/java folders.""@chochreiner Maybe you can have a look when you have some time (it is not that urgent).
All the preferences should be stored inside `OpenOfficePreferences.java`. 
```
    public static final String DEFAULT_OSX_PATH = ""/Applications/OpenOffice.org.app"";
    public static final String OSX_EXECUTABLE_SUBPATH = ""/Contents/MacOS/"";
    public static final String OSX_EXECUTABLE = ""soffice.bin"";
    public static final String OSX_JARS_SUBPATH = ""/Contents/Resources/java"";
```
Maybe, the `OSX_JARS_SUBPATH ` is obsolete for OO 4.x.
Maybe, we should also just scan for all necessary files based on _ONE_ root folder configuration or a list of root folders. Would make changes between version more robust. =||= @eduardkareletc I'm trying to refactor the OO logic. Maybe you can try a build from https://builds.jabref.org/openoffice and give me feedback. =||= Hello Stefan,

These are rather chaotic times for me right now, but I may be able to 
look at it this Friday.

What is it you want feedback on?
As I recall, I found a work around by creating a symbolic link in the OO 
bundle which made the jar files accessible at two  different loactions.
  I am not sure I understand how the issue relates to refactoring, and 
what you expect me to do.

Cheers
Eduard



Stefan Kolb wrote:
>
> @eduardkareletc <https://github.com/eduardkareletc> I'm trying to 
> refactor the OO logic. Maybe you can try a build from 
> https://builds.jabref.org/openoffice and give me feedback.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub 
> <https://github.com/JabRef/jabref/issues/2484#issuecomment-286479587>, 
> or mute the thread 
> <https://github.com/notifications/unsubscribe-auth/ALfUeeCphUVf8htq5GJTH8AyfCRhSDbEks5rlsFtgaJpZM4LrsI_>.
>

 =||= @eduardkareletc I just want to know if it fixes your problem and if it's still working in general for you. =||= I'll have a look later this week.

Stefan Kolb wrote:
>
> @eduardkareletc <https://github.com/eduardkareletc> I just want to 
> know if it fixes your problem and if it's still working in general for 
> you.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub 
> <https://github.com/JabRef/jabref/issues/2484#issuecomment-286725529>, 
> or mute the thread 
> <https://github.com/notifications/unsubscribe-auth/ALfUeQMFva9aWTjz6S2QbAuWlPrFcUTTks5rl9e4gaJpZM4LrsI_>.
>

 =||= "Refactor OO connection"Also fixes #2484

Trying to simplify OO detection logic.
- Removed cancel option in auto detection logic
- Removed some of the preferences variables for OO directories and try to keep only the root directory and search for the necessary files inside this directory
- Added two file finder helper methods inside FileUtil
- Lots of variable, method, and class renamings
- Used java.nio were possible
- Some graphical UI improvements

Tested on
- [x] Windows with LibreOffice 5 and multiple installations
- [ ] Windows Open Office 4 (will only work with 32-bit JRE!)
```
java.lang.UnsatisfiedLinkError: C:\Program Files (x86)\OpenOffice 4\program\jpipe.dll: Can't load IA 32-bit .dll on a AMD 64-bit platform
```
- [x] Linux LibreOffice 5
`unoil.jar` is missing. However, it would even work without that jar. Not sure whats the problem here and why it is gone. Two other jars `java_uno` and `unoloader`are there. Looks like we can maybe include the uno libraries from Gradle (https://mvnrepository.com/artifact/org.openoffice) rather than loading them from the classpath of the installation?! Maybe a license problem @koppor ?
For Ubuntu you need to install the additional package:
http://packages.ubuntu.com/de/xenial/libreoffice-java-common.
- [x] Linux Open Office
- [x] OSX OpenOffice
- [x] OSX LibreOffice"Stefan Kolbstefan-kolb03/17/17, 10:08:42 AM
2660.02661Add an option to clear the log inside the error consoleIn order to reproduce issues without restarting JabRef.Add possibility to clear the log at runtime"Resolves #2660

@tobiasdiez The dialog is not modal, but does not update itself when new events arrive, i.e., needs to be closed and opened again to see new events. Is this expected? Can we fix this?"Stefan Kolbstefan-kolb03/17/17, 03:26:06 PM
2676.02684Filename field in file annotations tab is too small when filename exceeds length of field"Happens when filename is too long for the default field length.

![image](https://cloud.githubusercontent.com/assets/2141507/24149841/3427b61c-0e44-11e7-93b6-c544b2f805db.png)""We should just not show the full name before clicking on the dropdown field if possible. =||= I guess it would be better to show only the filename without the path. =||= Would also be ok. Potentially the easiest way to bypass the length problem. But still, the field should be able to abbreviate this automatically?! =||= can't we use the magic being done for the labelling of our tabs of opened
libraries?

Am 21.03.2017 14:59 schrieb ""Stefan Kolb"" <notifications@github.com>:

> Would also be ok. Potentially the easiest way to bypass the length
> problem. But still, the field should be able to abbreviate this
> automatically?!
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/2676#issuecomment-288086645>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTafsjyL9wBta1WwObMZ2la6Y8yQBHpks5rn9fegaJpZM4Mj0Yv>
> .
>
 =||= I have created a PR for this (https://github.com/JabRef/jabref/issues/2684). In my opinion it was easier to show only the file than to fiddle around with the internals of the JComboBox of Swing. =||= "FileAnnotationTab now only shows the FileName, not the full path."Fixes #2676"Linus DietzLinusDietz03/25/17, 03:48:33 PM
2698.02707Despite checked Listen to remote operation on port 6050 new jabref sessions are created upon using jabfox" 
JabRef 4.0.0-dev--snapshot--2017-03-27--master--893f0d659
Windows 7 6.1 amd64 
Java 1.8.0_121



Steps to reproduce:

1. Check Options->Advanced->Listen to remote operation on port 6050
2. Use Jabfox with Zotero for Import from Firefox
3. Use the Task Manager to observe that a new Jabref session is created.

![grafik](https://cloud.githubusercontent.com/assets/9216487/24552089/714ede06-1625-11e7-9418-e5fb0ebac6fe.png)
the last jabref session was created while I looked in the taskmanager what happens""I would like to add that when starting Jabref twice (e.g. double click on the icon in the symbol bar)  only one process takes over, but the other stays and is not closed. You cannot even move to that process. Seems the same issue. =||= @bernhard-kleine I tried to fix this and was (hopefully) successful. At least it works for me locally now. Could you give it a try with a version available here http://builds.jabref.org/shutdown-duplicates/ and check that the problem is also gone on your system? =||= This functionality is already merged into master, however, I'm leaving this open until @bernhard-kleine could verify that it actually solves his problem.

If it turns out, that it is indeed resolved, it can be closed and the `shutdown-duplicates` branch be deleted. =||= Importing one entry, it looks that the second process is killed after importing, There are, however, issues with duplicates, but I will raise that in an other issue. =||= "Make sure that JavaFx shuts down in case another JabRef instance is a…"…lready open

Fixes #2698. The problem was that JavaFX requires `Platform.exit();` to be called on shutdown. Otherwise the JavaFX application thread does not terminate. In the case of this issue, a GUI was never opened and therefore this statement was never reached. This should be mitigated now.

- [X] Change in CHANGELOG.md described
- [X] Manually tested changed features in running JabRef"Jörg Lenhardlenhard04/03/17, 03:46:13 PM
2687.02709The generated BibTeX keys of  two different imported entries are not unique?!!"JabRef version 3.8.2 on Windows 7


Steps to reproduce:

1. Import these three articles with different DOI
10.1103/PhysRevB.87.195439
10.1103/PhysRevB.87.205427
10.1209/0295-5075/102/27001
2. check the BibTeX keys of them, they are the same
3. Now, can not use Latex editor to cite them separately.
""Thank you for your report, I can confirm this with current master 9205a024e04955abb43e28ef29b62e438e9caf06.
Indeed, this should not happen.

 =||= I had a look in the code and infact JabRef does not enforce unique bibtex keys for entries.

Possible fix: [org.jabref.gui.Basepanel](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/BasePanel.java).insertEntry() (line 1180) should check for duplicate keys and automatically append a letter to the bibtex key.

Other fix: When importing entries using a fetcher automatically generate a key with the JabRef Key generator.

@JabRef/Developers what do you think about this matter?
 =||= I would say that the fetcher should automatically generate a new key, since the key delivered from the fetchers is often meaningless / adheres to the convention of the provider not the user. 
Maybe this can be combined with https://github.com/JabRef/jabref/issues/1283. =||= I did the import with a snapshot from 7 days ago. It work well using the new entry->DOI ->generate way.
No duplicates. Maybe you should explain where you import from? =||= I tried http://dx.doi.org/10.1103/PhysRevB.87.195439 and http://dx.doi.org/10.1103/PhysRevB.87.205427. The BibTeX there have different keys. @alshehab211 could you state how you imported the entries, please?  =||= @koppor uhm? Have you tried to download them via the new entry dialog? For me this is still as @alshehab211 reports it.  =||= @koppor using the New BibTex entry in Jabref with ID type: DOI =||= I can confirm the issue in the latest master:
I inserted them using the ""+"" Icon-Button in the toolbar, and then copy pasting the doi-url (including the http prefix)
![grafik](https://cloud.githubusercontent.com/assets/320228/24515276/6793c722-1577-11e7-8baa-dc33df7a0011.png)
 =||= @bernhard-kleine Yes, the two entries are not identified as duplicates but JabRef import them with the same BibTeX keys. =||= So short poll which solution from https://github.com/JabRef/jabref/issues/2687#issuecomment-289283811 should be implemented:

* Check for duplicates and append a letter such that the second entry would be Van_Duppen2013a
* Automatically generate a key with the JabRef Key generator each time a fetcher is used.
 =||= This problem is arising when the first author has more than an article in the same year?! =||= @alshehab211 Not particularly. We use a fetcher which at the moment just copies the key from the database which is queried. If this database contains any duplicate keys they are imported as they come. =||= @lynyus which database? if you can see the pages also are not imported for the mentioned entries?! (10.1103/PhysRevB.87.195439 & 10.1103/PhysRevB.87.205427) although the pages no. present in the BibTex in the journal database?!
 =||= @alshehab211 it's from doi.org, nevertheless, when we call the download method in [DoiFetcher#55](https://github.com/JabRef/jabref/blob/79be111cff51adc355f9990df3074c5695856143/src/main/java/org/jabref/logic/importer/fetcher/DoiFetcher.java#L55), the entry already has the other key format. =||= When will the updated version of jabref be released where this error is fixed? =||= We have not yet a clear roadmap for the release of 4.0. Since a lot has changed in the new version, we will probably release an alpha / beta version first. Until then you may try out the latest development version from http://builds.jabref.org/master/, but please be aware that this version might have some issues and prepare accordingly with backups of your bib files etc. =||= "EntryTypeDialog Fetching Autogenerates BibTeX Key"This is aimed to resolve #2687.
I struggled a bit to decide where to add the generation of keys, as they depend on the database. Finally, I have added it directly in the EntryTypeDialog, as I felt that [BasePanel](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/BasePanel.java).insertEntry() (line 1180) would have too many side-effects for manual inserting.
An alternative would be to write two insertEntry() methods in the BasePanel, one for normal inserts, and one with regeneration of keys.

Also I have deleted the IdBasedEntryFetcher.java, as it was not used anymore anywhere.


- [x] Change in CHANGELOG.md described
~~- [ ] Tests created for changes~~
~~- [ ] Screenshots added (for bigger UI changes)~~
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
~~- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"Linus DietzLinusDietz04/04/17, 10:55:57 AM
2664.02711Latex2Unicode Formatter: Captial letters after an underscore are wrapped in braces"While checking the problem with the Underscores in the groups from  #2599, I noticed it's a problem of the Latex2Unicode formatter:  

Create a new entry with title `Underscore_Underscore`
Save
In the main table the entry is shown as `Underscore_(U)nderscore`

""Is it possible to file an issue at https://github.com/tomtung/latex2unicode/issues? =||= Hmm I think the behavior of determining subscript is consistent with latex (although if not in the math environment a compile error would be thrown). In other words, I guess latex2unicode is doing its job as intended?

Maybe JabRef can add some extra logic to determine when latex2unicode should kick in? =||= When interpreting `_` with LaTeX, the `_` command is a command stating that the following character should be go to subscript. If one does not want that, one has to load the [underscore](https://www.ctan.org/tex-archive/macros/latex/contrib/underscore) package. See http://tex.stackexchange.com/q/48632/9075.

Maybe, JabRef should escape the underscore when doing the conversion (this assumes that the user loads the underscore package)? Or warn the user?  =||= Solution idea: `_` is only converted if followed by `_{...} `. - IDEA: replace _ by ARBITRARYSTRING, then convert to unicode and then convert back. =||= @tomtung probably, in `text_u` the `u` should be converted to subscript letter in unicode and show it as textᵤ =||= @tobiasdiez yeah that's the current behavior. Also I use `_(whatever)` to represent subscript when there are no corresponding Unicode subscript characters available. =||= "Avoid conversion of single underscores"Fixes #2664

Single underscores that are not followed by `{` are not converted to unicode during the LaTeX to unicode conversion. This is not actually correct according to the rules of LaTeX, but seems to be an important exception required by our users.

This is achieved by the following:
 1. Replace all single underscores with `JABREFUNDERSCORE`
 2. Do the unicode conversion
 3. Replace `JABREFUNDERSCORE` with an underscore

TODO: We should find a better magic word instead of `JABREFUNDERSCORE`, because every character will be processed by latex2unicode and that costs performance. However, it should still be long and unique enough so that we avoid accidental conversions. Suggestions anyone?

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
- [X] Manually tested changed features in running JabRef"Jörg Lenhardlenhard04/06/17, 01:48:24 PM
2859.02862MSBibEntry office xml import and (re-)export of yearAccessed monthAccessed dayAccessed"Bug report: After import of fields yearAccessed monthAccessed dayAccessed from an office xml file, they are stored in format mm dd, yy in the field msbib-accessed (or mm dd, yyyy).

Re-export fails as it expects format \d{2}\s*[.,-/]\s*\d{2}\s*[.,-/]\s*\d{2,4} but \d{2} \d{2}, \d{2,4} doesn't match.

Possible fixes: change DATE_PATTERN s.t. month and day may be separated by \s*[ .,-/]
OR line 168 of MSBibEntry.java to `sbDateAccesed.append(', ');` (Typo ""Accesed"" present in source code).

Additionally, shouldn't the biblatex field ""urldate"" be exported to the fields yearAccessed monthAccessed dayAccessed in an office xml file? And vice versa for import? In that case importing into msbib-accessed should be replaced by importing into urldate (except for possible cases where urldate wouldn't be appropriate).

In case that urldate doesn't correspond to yearAccessed monthAccessed dayAccessed in some or all cases, importing into msbib-accessed could be changed to yyyy-mm-dd (yy-mm-dd) to make it coherent with biblatex date format. Parse msbib-accessed as year month date if pattern \d{2,4}\s*-\s*\d{2}\s*-\s*\d{2} is matched, if not try DATE_PATTERN \d{2}\s*[ .,-/]\s*\d{2}\s*[.,-/]\s*\d{2,4} for month year day.""@gnu9 Thanks for your report!

@Siedlerchr : You have worked on this, if I recall it correctly. Can you comment here? =||= Okay, I looked into the code and I think I can understand the issue with the regex. I would propse to store the date from import into yyyy-mm-ddd (ISO8601).  I will try to get rid of the regex, as we have some methods for parsing dates in several formats. But as I am currently busy with another project it could take some time I can get to work on this =||= The issue with the date exporting should be fixed now.  Would you please create a new issue for the sugesestion about the urldate?`Makes it easier to keep track of it

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= "Fix export and import of MS office day/year/month acessed fields"Fix possible NPE in Date parsing
Fixes #2859 

<!-- describe the changes you have made here: what, why, ... -->

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
~~- [ ] Screenshots added (for bigger UI changes)~~
- [X] Manually tested changed features in running JabRef
- [X] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
~~- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"ChristophSiedlerchr05/24/17, 12:27:11 PM
2843.02875Bibliographic fields missing"JabRef version snapshot 15 may on Debian 8 Jessie AMD64

Steps to reproduce:

1. Launch JabRef
2. Select and view a bibliographic item
3. Fields are blanck
4. Go to source editor --> all fields are filled
5. Returns to the main board --> all fields are regularly filled

I attach screenshot:
![schermata del 2017-05-16 08-23-08](https://cloud.githubusercontent.com/assets/1306260/26092384/f29506ac-3a10-11e7-96b0-cdab3690bd27.png)""This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= Sorry, but it doesn't work. All fields are not visible:

![schermata del 2017-05-18 16-51-18](https://cloud.githubusercontent.com/assets/1306260/26208512/96cd42cc-3bea-11e7-8118-a7e6249a168c.png)

I used JabRef-4.0.0-dev--snapshot--2017-05-18--master--018173ebd.jar =||= Thanks for the feedback. I don't have a Linux system at hand to test this right now. Can someone of the @JabRef/developers reproduce these problems (and fix them 😸 ) =||= I have the same issue on OpenSuse 13.2 (jre1.8.0_131), JabRef-4.0.0-dev--snapshot--2017-05-23--master--6db383443.jar
#2851  =||= @Doc73 @ninfito We believe that we have fixed this issue. Can you please try out the fix here: http://builds.jabref.org/fixEntryEditor/ and report if it works for you? =||= Thanks! It's working!

There is a small delay between the click on the bibliographic item and the appearance of entries in the editor, but it works very well. =||= Perfect! Thanks for the feedback. The fixed version is now merged into master and can be downloaded as usual from http://builds.jabref.org/master/. =||= "Fix entry editor"<!-- describe the changes you have made here: what, why, ... -->
Fixes #2843 and #2851.
This was a tricky bug: JavaFX creates empty dummy cells at the end of a list view. For some reason the list view for the linked files had an initial size of `1.7976931348623157E308` and, well, creating that many dummy cells takes a while (probably longer than the universe took to create humans) and eventually lead to a freeze of the JavaFX thread.
The fix was easy, just add `maxHeight=""100""` and be happy (finally, after trying to debug the problem for ages).

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez05/31/17, 08:13:36 AM
2917.02918Issue with java.lang.NullPointerException: Files"java.nio.file.Files.exists
	
	
org.jabref.gui.util.FileDialogConfiguration$Builder.withInitialDirectory
	
FileDialogConfiguration.java
	
82
org.jabref.gui.util.FileDialogConfiguration$Builder.withInitialDirectory
	
FileDialogConfiguration.java
	
90
org.jabref.gui.preftabs.PreferencesDialog.lambda$new$4
	
PreferencesDialog.java
	
168

Probably `directory` is null at https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/util/FileDialogConfiguration.java#L90
<a href=""https://stamp2.app.insightsportal.visualstudio.com/PortalRedirection/NavigateToPortal?subscriptionId=47cf7e0e-fb38-4184-aa27-6bd33822da55&resourceGroup=JabRef&componentName=JabRef%20application&bladeDetails=SearchResultExceptionDetailBlade%2Fid%2F%257B%2522id%2522%253A%2522fe7979e1-51d4-11e7-8bab-5322c40909fe%2522%252C%2522name%2522%253A%2522java.lang.NullPointerException%2522%252C%2522eventTime%2522%253A%25222017-06-15T14%253A14%253A43.886Z%2522%252C%2522eventType%2522%253A2%252C%2522componentId%2522%253A%257B%2522SubscriptionId%2522%253A%252247cf7e0e-fb38-4184-aa27-6bd33822da55%2522%252C%2522ResourceGroup%2522%253A%2522JabRef%2522%252C%2522Name%2522%253A%2522JabRef%2520application%2522%257D%252C%2522timeContext%2522%253A%257B%2522durationMs%2522%253A86400000%252C%2522endTime%2522%253A%25222017-06-15T20%253A00%253A00.000Z%2522%252C%2522createdTime%2522%253A%2522Thu%2520Jun%252015%25202017%252021%253A43%253A08%2520GMT%252B0200%2520(W.%2520Europe%2520Standard%2520Time)%2522%252C%2522isInitialTime%2522%253Afalse%252C%2522grain%2522%253A1%252C%2522useDashboardTimeRange%2522%253Afalse%257D%252C%2522filters%2522%253A%257B%2522context.device.type%2522%253A%255B%2522PC%2522%255D%252C%2522basicException.typeName%2522%253A%255B%2522java.lang.NullPointerException%2522%255D%257D%257D"" target=""_blank"">View this instance in the Azure portal<\a>
<a href=""https://stamp2.app.insightsportal.visualstudio.com/PortalRedirection/NavigateToPortalFeature?subscriptionId=47cf7e0e-fb38-4184-aa27-6bd33822da55&resourceGroup=JabRef&resourceName=JabRef%20application&featureName=Search&bladeDetails=SearchBlade&InitialFilter=%257B%2522eventTypes%2522%253A%255B2%255D%252C%2522typeFacets%2522%253A%257B%2522basicException.problemId%2522%253A%255B%2522java.lang.NullPointerException%2520at%2520java.nio.file.Files.provider%2522%255D%257D%252C%2522isPermissive%2522%253Afalse%257D&InitialTime=%257B%2522durationMs%2522%253A86400000%252C%2522endTime%2522%253A%25222017-06-16T02%253A14%253A43.886Z%2522%252C%2522createdTime%2522%253A%25222017-06-15T19%253A51%253A07.857Z%2522%252C%2522isInitialTime%2522%253Afalse%252C%2522grain%2522%253A1%252C%2522useDashboardTimeRange%2522%253Afalse%257D"" target=""_blank"">View similar exceptions in this time range<\a>"I'll take a look at it =||= Fix NPE cases in FileDialog Configuration"Add test for fileDialogConfiguration Builder

Fixes #2917 
<!-- describe the changes you have made here: what, why, ... -->

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
~~- [ ] Screenshots added (for bigger UI changes)~~
~~- [ ] Manually tested changed features in running JabRef~~
- [X] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
~~- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?~~"ChristophSiedlerchr06/17/17, 02:56:54 PM
2901.02923Keybinding Exception when doing CTRL+Z or SHIFT+ sth (but works)"Latest master

Edit entry, change author for example or in code editor:
1. Remove some value
2 . Type CTRL+Z
3. Exception occurs
4. But Undo is executed

```
14:32:44.708 [AWT-EventQueue-0] WARN  org.jabref.gui.BasePanel - Nothing to undo
javax.swing.undo.CannotUndoException: null
	at javax.swing.undo.UndoManager.undo(UndoManager.java:411) ~[?:1.8.0_131]
	at org.jabref.gui.undo.CountingUndoManager.undo(CountingUndoManager.java:30) ~[bin/:?]
	at org.jabref.gui.BasePanel$UndoAction.action(BasePanel.java:2172) [bin/:?]
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:1016) [bin/:?]
	at org.jabref.gui.entryeditor.EntryEditor$UndoAction.actionPerformed(EntryEditor.java:827) [bin/:?]
	at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1663) [?:1.8.0_131]
	at javax.swing.JComponent.processKeyBinding(JComponent.java:2882) [?:1.8.0_131]
	at javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:307) [?:1.8.0_131]
	at javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:250) [?:1.8.0_131]
	at javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:2974) [?:1.8.0_131]
	at javax.swing.JComponent.processKeyBindings(JComponent.java:2966) [?:1.8.0_131]
	at javax.swing.JComponent.processKeyEvent(JComponent.java:2845) [?:1.8.0_131]
	at javafx.embed.swing.JFXPanel.processKeyEvent(JFXPanel.java:463) [jfxrt.jar:?]
	at java.awt.Component.processEvent(Component.java:6310) [?:1.8.0_131]
	at java.awt.Container.processEvent(Container.java:2236) [?:1.8.0_131]
	at java.awt.Component.dispatchEventImpl(Component.java:4889) [?:1.8.0_131]
	at java.awt.Container.dispatchEventImpl(Container.java:2294) [?:1.8.0_131]
	at java.awt.Component.dispatchEvent(Component.java:4711) [?:1.8.0_131]
	at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1954) [?:1.8.0_131]
	at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:806) [?:1.8.0_131]
	at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1074) [?:1.8.0_131]
	at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:945) [?:1.8.0_131]
	at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:771) [?:1.8.0_131]
	at java.awt.Component.dispatchEventImpl(Component.java:4760) [?:1.8.0_131]
	at java.awt.Container.dispatchEventImpl(Container.java:2294) [?:1.8.0_131]
	at java.awt.Window.dispatchEventImpl(Window.java:2746) [?:1.8.0_131]
	at java.awt.Component.dispatchEvent(Component.java:4711) [?:1.8.0_131]
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) [?:1.8.0_131]
	at java.awt.EventQueue.access$500(EventQueue.java:97) [?:1.8.0_131]
	at java.awt.EventQueue$3.run(EventQueue.java:709) [?:1.8.0_131]
	at java.awt.EventQueue$3.run(EventQueue.java:703) [?:1.8.0_131]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_131]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) [?:1.8.0_131]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90) [?:1.8.0_131]
	at java.awt.EventQueue$4.run(EventQueue.java:731) [?:1.8.0_131]
	at java.awt.EventQueue$4.run(EventQueue.java:729) [?:1.8.0_131]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_131]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) [?:1.8.0_131]
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) [?:1.8.0_131]
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201) [?:1.8.0_131]
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_131]
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_131]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_131]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_131]
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_131]

```

2nd example: 
2.  HOLD SHIFT + Type sth to get captial letters
Capital letters occur 

```
14:32:57.596 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalArgumentException: Cannot parse key binding SHIFT
	at javafx.scene.input.KeyCombination.valueOf(KeyCombination.java:429) ~[jfxrt.jar:?]
	at org.jabref.gui.keyboard.KeyBindingRepository.checkKeyCombinationEquality(KeyBindingRepository.java:81) ~[bin/:?]
	at org.jabref.gui.keyboard.KeyBindingRepository.checkKeyCombinationEquality(KeyBindingRepository.java:170) ~[bin/:?]
	at org.jabref.gui.keyboard.KeyBindingRepository.mapToKeyBinding(KeyBindingRepository.java:135) ~[bin/:?]
	at org.jabref.gui.entryeditor.EntryEditor.lambda$2(EntryEditor.java:183) ~[bin/:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventFilterRecord.handleCapturingEvent(CompositeEventHandler.java:282) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchCapturingEvent(CompositeEventHandler.java:98) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchCapturingEvent(EventHandlerManager.java:223) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchCapturingEvent(EventHandlerManager.java:180) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchCapturingEvent(CompositeEventDispatcher.java:43) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:52) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[jfxrt.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[jfxrt.jar:?]
	at javafx.scene.Scene$KeyHandler.process(Scene.java:3964) ~[jfxrt.jar:?]
	at javafx.scene.Scene$KeyHandler.access$1800(Scene.java:3910) ~[jfxrt.jar:?]
	at javafx.scene.Scene.impl_processKeyEvent(Scene.java:2040) ~[jfxrt.jar:?]
	at javafx.scene.Scene$ScenePeerListener.keyEvent(Scene.java:2501) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$300(EmbeddedScene.java:310) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_131]
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$keyEvent$301(EmbeddedScene.java:296) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_131]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_131]
```
""The first problem occurs because the JFXPanel passed the key pressed event up to it's Swing parent which then executes the method in the entryEditor.

The second problem is a bit weird. I tried to debug through it. At some point there is suddenly a value null =||= I also don't really understand why we need a custom `checkKeyCombinationEquality` method. The `KeyCombination` class already contains a `match` method which looks like what is needed (but does not work). =||= Yes, this is really mysterious. I replaced it with caling the match method and now the exceptions are gone and the key codes seem to work. Tried several things manually.
I tried to debug through it and I don't why some of the tests fail, but I guess it has sth to do with the binding/preferences stuff (although debugging shows the correct values)

 =||= "Fix key combination related exceptions"Use keyCombination match method
Manual tests sucessful, some unit tests fail for unknown reasons 

Fixes #2901 



<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr06/18/17, 02:24:53 PM
2938.02939Deleting a file in the entry editor deletes the file on disk"This should not happen.

By default in the old entry editor,the file never got deleted in the filesystem
So we should add a second confirmation dialog""![grafik](https://user-images.githubusercontent.com/320228/27508424-c8b15d34-58e4-11e7-8c89-ea97a9df8bde.png)
 =||= "Ask before deleting associated files from disk in entry"Add new dialog

Fixes #2938 
![grafik](https://user-images.githubusercontent.com/320228/27508424-c8b15d34-58e4-11e7-8c89-ea97a9df8bde.png)


<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [x] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr06/26/17, 12:04:27 PM
2932.02978Group information in new database not stored"Current master.

I debugged a bit through and found that in the ` MetaDataSerializer.getSerializedStringMap ` the `metaData.getGroups() `returns null/empty optional. In the metadata class the `groupsRoot ` is null.

Furthermore I found out that `setGroups()` in `Metadata `is never called (except from the importer and some tests)
 "So at what point in the code are the new groups (most important the root) actually created? I had a look at the code and have a hard time finding it. =||= Fix group storage"Fixes #2932

It seems that up to now all group related changes in the UI were not actually stored in the MetaData and lost on save. This PR resets the group-related information in the MetaData whenever something group-related changes.

Hopefully I found all positions where that may happen. If tested it manually, but someone else needs to do this, too!

It also seems that IntelliJ decided to remove trailing whitespaces in the Changelog when I added my entry...

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard07/07/17, 02:55:51 PM
2960.02991Duplicate finder ignores book edition"My bibtex file contains two editions of a book, but the ""find duplicates"" function considers them to be duplicates and tries to merge them.

Also, shouldn't the jabref gitup bug reporter accept bibtex files for uploading?  As it is, it's necessary to rename them to *.txt.

JabRef version 

JabRef 4.0.0-dev--snapshot--2017-06-29--master--7e50e84a1
Windows 7 6.1 amd64 
Java 1.8.0_131

Steps to reproduce:

1. Load the attached bib file
2. Quality--> Find Duplicates
3. A window should pop up with a merge suggestion


[example2editionBooks.txt](https://github.com/JabRef/jabref/files/1119705/example2editionBooks.txt)""Hey @notuntoward,
whether this is a bug or a feature is actually a question.

My feeling is that you are right as the two BibEntries correspond to different physical entities. However, I can imagine that for many users the actual edition does not matter so much and that they would prefer to keep only the BibEntry of the latest edition.

I guess we will discuss what is the best behavior. =||= OK.  In my case, I like to keep both editions around because 

1.) I have different markups in the different book pdf revisions, and I'd like to refer to them in my own notes (instead of manually copying markups from one pdf to the next)
2.) An old paper may have referred to the old revision of the book (with a certain page number)

As the JabRef duplicate detector is now, I see this duplicate warning every time I do an integrity check.  I can get around that by selecting to keep both revisions, but I have to remember to do that while I'm hurriedly clicking through all the other stuff.  At some point, I'm going to forget and accidentally delete one of the book revisions. =||= Hey, @notuntoward, I had a look and improved the duplicate checker as you suggested. Would you mind checking my changes are working out well for you? You can download the improved version here: https://builds.jabref.org/master/ =||= Hi Linus, this works perfectly.  Thanks. =||= "Check for different editions in the duplicate check"Fixes #2960 by checking for different editions before the actual duplicate check.
If both BibEntries have a Edition field that mismatches, it cannot be a duplicate.

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes"Linus DietzLinusDietz07/10/17, 03:36:14 PM
2970.03005"Resizing of the window ""Select files"" does not scale properly""Windows should be scalable and move the buttons intelligent within a given range.
Scaling should be limited to the minimum/maximum size.

![selection_082](https://user-images.githubusercontent.com/298682/27860029-22d52478-617b-11e7-98e6-309262bf395c.png)
![selection_083](https://user-images.githubusercontent.com/298682/27860030-24b4c582-617b-11e7-8411-74c7149aa729.png)
![selection_084](https://user-images.githubusercontent.com/298682/27860033-27e49cd2-617b-11e7-9ecf-56cc040e91d8.png)

```
JabRef 4.0.0-dev--snapshot--2017-07-03--master--6897b10fb
Linux 4.4.0-78-generic amd64 
Java 1.8.0_131
```""perhaps related to or duplicate of #2927 =||= I will try to convert that dialog to javafx , this will hopefully also
resolve the problem with the freezing

Am 07.07.2017 7:03 vorm. schrieb ""Jonas Stein"" <notifications@github.com>:

> perhaps related to or duplicate of #2927
> <https://github.com/JabRef/jabref/issues/2927>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/2970#issuecomment-313587499>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AATi5LHAv2ajMHSTFLRrrMqRm8h8DxPCks5sLbwPgaJpZM4OOIey>
> .
>
 =||= in 

```
JabRef 4.1
Linux 4.14.12-gentoo+ amd64 
Java 1.8.0_152 

```

This looks like this after minimize, maximize the window:

![selection_438](https://user-images.githubusercontent.com/298682/34698912-f1213d92-f4da-11e7-9429-02ff28f67aae.png)
 =||= This should be fixed in the latest development version. Could you please check the build from https://builds.jabref.org/maintable-beta/. Thanks! Note this version is in a very early beta stage and might not work as expected. See #3621 for further details. =||= "javafx replacement for file dialog"Fixes #2970 

The open functionality has been removed -> Directly possible in the entry editor
Contextmenu on maintable ->attach file now opens a file chooser dialog and afterwards this dialog for editing, e.g. adding a description


![grafik](https://user-images.githubusercontent.com/320228/37621264-b4418358-2bbe-11e8-9925-6dbb77943ee7.png)

Only resizable to max screen size: (on my 24"" with 1920x1200)
![grafik](https://user-images.githubusercontent.com/320228/37621410-209c0f32-2bbf-11e8-8b65-92ed8c83b51a.png)



<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr03/26/18, 06:25:44 PM
3036.03058Jabref freezes when dragging entries to groups panel or moving entries within groups"JabRef version 4-beta2 on Ubuntu 16.04 with open JDK 1.8.0_131 (happens also under Windows 7)

Steps to reproduce:

Issue A:
1. Drag new entry into a group
2. Jabref freezes - need to kill process to continue

Workaround: Assign a new entry to a group by  using right-click context menu -> add to group
This will add an article to the assigned group.

Issue B:
1. Drag an entry in the groups menu into a different position
2. Jabref freezes - need to kill process to continue

Workaround: None found yet.""I can confirm both issue A (dragging an item/article to a group) and issue B (dragging a group to a new position in the groups panel) on:

JabRef 4.0-dev--snapshot--2017-07-19--master--2f12fecfb
Windows 10 10.0 amd64 
Java 1.8.0_141 =||= The available snapshot **2017-07-25--master--0847f5d15.exe** does not solve this. Where to get the files? =||= Hi!
Please try the Files from http://builds.jabref.org/fixGroupFreez/ 

Thank you! =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= @Siedlerchr, @matthiasgeiger. Development version from 7/31/2017 has resolved the issue. I tested it on Ubuntu 16.10 and on Windows 7. Thank you for the quick fix. =||= I can confirm that this issue is fixed in:
JabRef 4.0-dev--snapshot--2017-08-06--master--ee4f25242
Windows 10 10.0 amd64 
Java 1.8.0_141 =||= "Fix group freeze by running markBasechange in swing thread"This fixes #3036 

I debugged a bit and found that this was a threading problem. When assiging an entry to a group, the markBaseChanged was executed in the JavaFX Thread and not in the Swing thread.


<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr07/30/17, 07:17:16 PM
3067.03070Del key in search box deletes entry"JabRef 4.0-dev--snapshot--2017-08-02--master--63414b030
Windows 10 10.0 amd64 
Java 1.8.0_66
Steps to reproduce:

1. Type a known author in the search box
2. When the first suggestion comes up, hit enter
3. Now press shift+home to select the entire content of the search box and press del
4. The first bib entry is removed (in addition to the contents of the search box)

""Do you mean the search field at the top in JabRef or do you mean typing an author in the entry editor?
In the entry editor it works, but apparently not in the search field on top of JabRef.


PS: You should upgrade your java version, the latest java version is 144:
http://www.oracle.com/technetwork/java/javase/downloads/index.html =||= Same problem as in #2855 =||= Yes I meant in the search box on top. =||= "Fix del/copy/paste key trigger main table action in search bar"Fixes #3067, same reason and fix as in entry editor

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr08/04/17, 10:30:23 PM
3075.03077Group names "JabRef-4.0-dev--snapshot--2017-08-03--master--ea29f5600.jar

Steps to reproduce:

1. Create group ""one""
2. Create group ""two""
3. Create group ""one, two""
4. Add article to group ""one, two""

The article is presented in all tree groups.""I am not 100% sure, but this behavior might actually be intended.

@tobiasdiez Can you clarify? =||= Yes this behavior is kind of by design since the group membership is stored as a comma separated list. If you want to use the comma in the group name, you have to change the keyword separator under Preferences > Groups > ""When adding/removing keywords, separate them by"" (note that this leads to problems if you already have entries belonging to more then one group or have multiple keywords).

With https://github.com/JabRef/jabref/pull/3077 a proper error message will be displayed when a group name contains the keyword separator.
 =||= Is the group separator saved in the BibTeX file? I import jabref - generated bibliographies using zotero better bibtex (bbt) and this new groups format is a bit of a challenge.  =||= No the keyword separator is only stored in the preferences and not in the bib file (but we probably want to change this at some point). =||= "Add warning message if group with same name is already present"Add warning message if group with same name is already present or new group name contains keyword separator. Fixes #3075 and closes #1495.

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [x] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez08/06/17, 11:44:19 AM
1495.03077Group hierarchy lost when moving to BibEntry"When moving from JabRef 9.10 to 3.4, the philosophy governing groups changed. Rather than 
a key being linked to a group in ""jabref-meta: groupstree"" the group is attached to the individual entry, as in ""groups    = {culture},"", 

The big disadvantage is that groups are no longer in a hierarchy but a independent. As the result, a key associated, say, with ""culture"", is associated with that term everywhere it appears in the database. So when I select ""culture"", hundreds of keys are elected that use the word ""culture"" in a different context or meaning. If I understand the situation there is no way now to avoid the hundreds of irrelevant links. 

The issue is now to avoid duplicating the situation in the future. I find that if a BibEntries share a
string, they are viewed as the same. Since they are case sensitive, I can distinguish Culture, cUlture, cuLture, etc. Then go through all the keys selected by ""culture"" and re-associate them with one of the new names. Since this is hundreds of hours of work, I wonder if there is a better method.""So the issue is when the group name is used multiple times in a large group hierarchy at different places? Like you have `GroupA -> culture, GroupB -> GroupC -> culture` and in this case the two groups will be merged falsely? Did I get your question right?

JabRef should not be doing something like this. We need a step to uniquify the group names before they are converted. What do you think @tobiasdiez ? Or this this already done? I am a little bit uncertain if I have understood the question correctly.
 =||= Hi. This is exactly that.

I usually use one group per project/paper, each one having subgroups with generic names, such as ""to_review"", ""introduction"", ""materials"", ""pathophysiology"" etc. With JabRef3.4, a given ""to_review"" subgroup contains the articles from all the ""to_review"" subgroups.
 =||= Since movement from JabRef 9.10 to 3.4 resulted in massive loss of information, I reverted to the former and recovered the jabref-meta: groupstree for each database. While I lack any expertise, it seems that the hierarchical structure of group names could be readily preserved. For example, here is a hierarchical group tree:

  1
   -A 
   -- a
 2
 -B
 --a
 3 
 -C
 -- b

So a bibliographic entry that is associated only the first ""a"", and with ""C"" and ""b"" would have the field:

  groups = {1,A,a; 3,C; 3,C,b},

If this could be done, I recommend it.
 =||= Refs #628: ""Feature: Hierarchical Keywords""
 =||= Okay, this is confirmed. 

A solution using like 1>A>a or something like this sounds reasonable.

A quickfix is not possible. This requires a major rework as a lot of issues are caused by this.
- the name and the keyword differ in static group
- explicit group needs to now its context always to compute the correct key (or the other classes must ensure that the correct keyword is always set which encodes the group hierarchy)

@tobiasdiez we should discuss this when you are back
 =||= I could implement that the whole hierarchy is always written in the groups field. But what about cases where the same group name is used on the same level, i.e. 1 > A > a and 1 > A > a with different entries? should this case just be forbidden upon creation of the group?
 =||= @tobiasdiez I think so: duplicate names should not be allowed for sibling groups, just like file names in a classic file system.
 =||= @tobiasdiez I don't get your example. Does that mean, that it is not possible to have the same group `a` associated with two different entries? (With `a` being nested in `A`, being nested in `1`). I would allow two entries belonging to the same group... Maybe, I did get something wrong.
 =||= I can confirm this bug for the build ""2016-07-13--master--304d280"".
 =||= @HainesB reported a similar issue at https://sourceforge.net/p/jabref/mailman/message/35303493/. Maybe, he is willing to test the fix as soon as we had time to implement it.
 =||= Come to think of it, maybe it is not quite that bad... In bug #1508 there was an example when repeating a group was undesirable:
- Asthma
  - Treatment
- Diabetes
  - Treatment

But repeating groups enables one to create such structure:
- Asthma
  - Asthma treatment
  - Asthma diagnosis
- Diabetes
  - Diabetes treatment
  - Diabetes diagnosis
- Treatment
  - Asthma treatment
  - Diabetes treatment

And such structure might be desirable.

Perhaps a better (and easier) solution would be to make GUI aware of such possibilities (""Add existing group as subgroup"", a dialog informing that the newly entered group name is not unique and asking what should be done)?
 =||= I think the above example is overly complex and has several pitfalls (i.e. deleting content from a groups one is not aware of that it is duplicated and one is therefore triggering unwanted side effects). Actually, the usecase illustrated above can be simply imitated by using three distinct groups asthma, diabetes and treatment. If you have this groups you can always select multiple groups and compute an intersection between them.

Therefore, my proposal here is to keep it simple and use default behaviors, that people do expect (i.e. filesystem-like, without special cases like symlinks/hardlinks/etc). Thus, save groups simply like filesystem paths.  =||= But currently the groups don't behave like filesystem paths. There's no filesystem analog for ""have this file appear in any directory called ""treatment"" wherever that folder is on the disk.

The sample of @mpatas is fairly typical for me. I collect way, way too many references when I write a paper and I tend to separate them by theme so I know where to find them easily when I'm tangling with that theme. (edit: I know, keywords, but I like the visual representation of the tree) =||= (and the hardlinks behavior is already in JabRef and any other reference manager I can think of. A reference can legitimately and easily be in multiple reference groups, and no group has any special status as the ""actual"" location of the reference. Symlinks would indeed be confusing that way.) =||= When I download a file, to prevent a name clash the file is
automatically appended with an incremental number such as Alpha,
Alpha-1, Alpha-2.

Couldn't the group name creation process in JabRef be similarly equipped
so that when a new group is created having the name of an existing
group, an incremental number, perhaps no visible, is appended?

Haines Brown
 =||= @tillschaefer 
> Actually, the usecase illustrated above can be simply imitated by using three distinct groups asthma, diabetes and treatment. If you have this groups you can always select multiple groups and compute an intersection between them.

That is true. Yet there are use cases of a somewhat different kind where this solution seems to be rather awkward. For example:

- Biology
  - Biochemistry
- Chemistry
  - Biochemistry

In general, grouping of references by topic will result in something like that for any multidisciplinary topic. Of course, one can make ""Biochemistry"" a group that is not a subgroup of either group, but that would seem to lose some of the benefits of hierarchical structure (for example, the ability to collapse the groups one is not interested in at the moment).

If done carefully, such structure with repeated groups should avoid any unintended side effects. Although, of course, done carelessly it could even result in cycles... =||= Hereby, I officially surrender in front of this bug. 
The following steps are needed in order to fix the issue:
- Static groups should match against the path in tree instead of its name, i.e. `Biology > Biochemistry` instead of only `Biochemistry`.
- Migrate old groups to this new format.
- Update a static group as soon as its position in the tree is changed.

While each step in itself is not that difficult to accomplish, I have not the time to implement it right now. Sorry for the inconvenience caused!

However, there are two workarounds:
- Instead of creating a static group `Biochemistry` use a keyword group that matches `Biology > Biochemistry` in the `groups` field. You can have multiple keyword groups with the same name but different search pattern, so this should work as desired.
- Use hierarchical keywords (e.g. `keywords = { Biology > Biochemistry, Chemistry > Biochemistry }`) and use the new automatic group feature of JabRef 4.0 (released soon) to generate a working groups tree 
````
- Biology
  - Biochemistry
- Chemistry
  - Biochemistry
````
 =||= What about creating an additional uniqueID and a mapping from this ID to the displayed group name?

If a group name is already unique - use the name as ID.
If a group name is duplicated - create unique IDs `name1`, `name2` or sth else.

In the groups field the uniqueID should be stored. (This is a downside as there is a divergence between uniqueID and displayed group name - but I think in most cases groups won't be edited manually so this is not a real issue...)

The `ID -> display name` map should not be stored in some existing metadata but should be added to a new one. Thus, it should be possible to use the current implementation of the ""search logic"" by using the unique ID as search term. Also an automatic migration to the new format should be possible, and the groupstree is generally usable in older versions as well...

Only in the UI some bigger changes should be needed to show the display names...

As I have not looked at the groups code for ages... do I miss something? Or would this generally be feasible?

 =||= I haven't followed the whole history of the groups format, but it looks to me like most of these comments boil down to ""let's just go back to groups format 3"". If the point of groups format after-3 (4?) was that you could edit the group assignment in the entry itself without having to look up stuff elsewhere, none of the above seem to accomplish that.

Can't we just copy the hierarchical tags idea for groups as suggested above? So something like

* Asthma
  * Treatment
* Diabetes
  * Treatment

would be represented as 

```
groups = { Asthma/Treatment, Diabetes/Treatment }
```

(or whatever other separator is deemed more appropriate) and have JabRef figure out on its own how that translates visually.



 =||= @retorquere To use this as an identifier for the groups would be possible, too. But this would cause either a lot of overhead if groups are moved in the tree, or would lead to inconsistencies between the actual position in the tree vs. the assumed position in the tree:

Let's assume that the structure:

- Asthma
   - Treatment
- Diabetes

Is changed to:

- Asthma
- Diabetes
   - Treatment

The entries assigned to this group would have the ""key"" `groups = { Asthma/Treatment }` although the ""Treatment"" group is now a subgroup of ""Diabetes"". And changing the keys of all affected entries would massively affect the performance in huge databases... 😞 
 =||= @matthiasgeiger then perhaps the desiderata ""easy to edit by hand with no more context than the reference"" (groups format post-3) and ""easy to keep consistent and well-performing"" (groups format 3) are at odds with each other... personally I still prefer format 3; the various downsides discussed above undo the benefits of post-3 from my pov. =||= I'm not sure whether I remember this correctly, but I think the main reason to change the group format was a more technical one, as the ""static"" groups are now implemented exactly the same way as all other groups: Now it is possible to simply perform a search in the background - as it is the case for keyword or freetext based groups. The ""easy to edit by hand and directly showing the groups in the entry"" was a nice side effect.
But perhaps @tobiasdiez could provide some more insights in this... =||= But if that was the aim, surely the current implementation doesn't accomplish this. The ""static"" groups as we had them in groups format 3 is not implemented in the new format (as per this issue). The new groups format implements *a* kind of static grouping, and it seems plausible it now uses the same search-based infrastructure as the other grouping methods did, but in the format-3 version even search-based groups could live nested under other groups -- why isn't that still possible? =||= As one stuck with format 3, let me throw in another consideration. When you
have databases having 15-20,000 entries as I do, a manual conversion of
group names is prohibitive.

Haines Brown
 =||= But would you do that manual conversion by hand? By script? Or using JabRef? Because only in the first case it would seem to be prohibitive. For the other two it would just be an implementation detail? I'd probably reach for option 1 only when my file is corrupt. =||= Just out of curiosity: When talking about ""groups format 3"" and ""groups format 4"", do you mean JabRef 3.x vs. JabRef 4.x? I thought the change in group structure happened between JabRef 2.11 and JabRef 3.x?

Or are you talking about new changes in JabRef 4.x?
Or is the ""groups format"" not related to the JabRef version? =||= I'm not sure how the groups format relates to JabRef versions; there used to be a 

```
@comment{jabref-meta: groupsversion:3;}
```

in the Bib(La)TeX files created by JabRef, now there is

```
@comment{jabref-meta: databaseType:biblatex;}
```

or

```
@comment{jabref-meta: databaseType:bibtex;}
```

since this is the first new format I've seen since `groupsversion:3` was depracated, I've been calling it `format 4`, but only because it's `3+1`, no other reason. I don't know what the internal name is the JabRef devs use for either of these formats.
 =||= Thanks for the clarification! =||= Mapping this to JabRef versions its ""up to JabRef 3.3"" and ""since JabRef 3.4"" =||= The main advantages of the new format are outlined in https://github.com/JabRef/jabref/issues/629. The id-based strategy suggested by @matthiasgeiger should work but removes some of the advantages (at least for groups with duplicate names). The issue is not that a solution is not technically feasible but that I don't see an easy solution, i.e. a lot of time is needed to program it.

Maybe I should stress the point, that the workaround above is very easy, has the same behavior as explicit groups and results in no performance loss or other problems (that I can see). The idea is the following. Assuming that you already have a tree with the groups `Asthma` and `Diabetes` and want to add two explicit groups `Treatment` as subgroups. Instead of creating `Threatment` as an explicit group (since this would lead exactly into this bug), we will add it as a keyword-based group working on the `groups` field and searching for `Asthma > Treatment` and `Diabetes > Treatment`.
So you would end up with the following tree:
   - Asthma (explicit group, or whatever you want)
        - Treatment (keyword group: field = `groups`, search text = `Asthma > Treatment`)
    - Diabetes (explicit group, or whatever you want)
        - Treatment (keyword group: field = `groups`, search text = `Diabetes > Treatment`)

If you now add an entry to the first `Treatment` group `Asthma > Treatment` will be added to the `groups` field, while for the second group you get `Diabetes > Treatment`. Hence only the correct entries are matched by each `Treatment` group.  In the end, you implement the solution proposed above by hand.

Note, that if you still use an older JabRef < 3.4 you can simply change the explicit groups with duplicate names accordingly to this scheme (using JabRef, rightclick on group -> edit -> change to keyword group with `field = groups` and search text whatever you want - all your entries are automatically assigned to this new group). Now you can upgrade to later JabRef versions and don't have the trouble that groups are accidentally merged.  =||= I wonder, are we still doing something regarding this issue? Any actions planned?

Because as far as I can see, the groups format is pretty much stable as it is now. So I guess this issue can be closed. =||= Shouldn't this be kept open? Because the actual issue has not been fixed, there are only workarounds for it - as far as I understand. I, for example, opted to replace subgroup names that appear multiple times in my database with a new name that is based on both the parent group and the subgroup. While this certainly works, it is just a workaround. I think something that could help alleviate the problem a bit would be JabRef notifying the user that a specific group name has already been used (similar to the duplicate Bibtex key notification). This would not solve the issue, but I think it would be a very helpful workaround.

From @tobiasdiez replies, however, I understand that solving the issue itself would require an awful lot of work, which is (currently?) not feasible, especially since there exist workarounds. My suggestion would be to keep the issue open, but maybe add a tag, that this is a longterm problem that may or may not be solved in the distant future (if such a tag exists). =||= yes, please keep this open. the problem can silently destroy your grouping. there is no warning issued to the creator of such a group. it just merges groups with the same name and this is not an expected behaviour.  =||= @AEgit @tillschaefer Thanks for the explanation!

Sure we can keep this open. And now I recall what we wanted to do here:
 - Implement a warning message if users create groups with duplicate names.

I'll be optimistic and add this to the 4.0 milestone as well. Let's see if we can make that depending on how well the next beta goes. =||= @lenhard: Cheers, thanks a lot! Yea, I think the warning message would be very helpful. =||= A warning message is now shown.
Sadly a real fix of this issue requires a lot of time that currently none of the developers can invest. Thus, I put this issue on-hold. =||= Cheers, thank you for the work. I think the warning message is a good workaround. =||= "Add warning message if group with same name is already present"Add warning message if group with same name is already present or new group name contains keyword separator. Fixes #3075 and closes #1495.

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [x] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez08/06/17, 11:44:19 AM
3080.03084Automatic Bug Report - 20170806233800 Unable to attach file"Unable to attach file using 4.0_v_2.9.2.r7151.b7743c4d7
JabRef 4.0-dev
Linux 4.12.4-1-arch amd64 
Java 1.8.0_144

Steps to reproduce:

1. Open jabref
2. ...Select/right click entry in library
3. ...Select ""Attach file"", navigate to and select a .pdf file
4. At this stage, the correct file path appears in the pop-up box and can be opened
5 Click ""OK"" - no icon in entry list, and no change in .bib file
<details>
<summary>Detail information:</summary>

```
There seem to be problems with OpenJDK and the default GTK Look&Feel. Using Metal L&F instead. Change to another L&F with caution.
Opening: /home/ian/my_db.bib
runCommand error: null
java.lang.UnsupportedOperationException
	at java.util.AbstractList.add(AbstractList.java:148)
	at java.util.AbstractList.add(AbstractList.java:108)
	at org.jabref.model.entry.BibEntry.addFile(BibEntry.java:833)
	at org.jabref.gui.filelist.AttachFileAction.action(AttachFileAction.java:35)
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:1027)
	at org.jabref.gui.menus.RightClickMenu$GeneralAction.actionPerformed(RightClickMenu.java:312)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.AbstractButton.doClick(AbstractButton.java:376)
	at javax.swing.plaf.basic.BasicMenuItemUI.doClick(BasicMenuItemUI.java:833)
	at javax.swing.plaf.basic.BasicMenuItemUI$Handler.mouseReleased(BasicMenuItemUI.java:877)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2236)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2294)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)
	at java.awt.Container.dispatchEventImpl(Container.java:2280)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

```

</details>""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you.
The version should be ready in a couple of minutes =||= Many thanks, Christophe - yes, installing the latest development version
has fixed the problem. Thanks to you and the whole team for your hard work
on JabRef!

Ian


On Wed, August 9, 2017 11:39 am, Christoph wrote:
> Thank you for reporting this issue. We think, that is already fixed in
> our development version and consequently the change will be included in
> the next release.
>
> We would like to ask you to use a development build from
> https://builds.jabref.org/master and report back if it works for you.
>
>
> --
> You are receiving this because you authored the thread.
> Reply to this email directly or view it on GitHub:
> https://github.com/JabRef/jabref/issues/3080#issuecomment-321230845


 =||= "Fix attach file action from contextmenu"Return new ArrayList instead of unmodiefable emptyList()

Fixes #3080 

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr08/09/17, 11:39:34 AM
3074.03092Adding from DOI does not generate timestamp"JabRef version 
JabRef 4.0-dev--snapshot--2017-08-03--master--e9fbf1963
Linux 4.4.0-21-generic amd64 
Java 1.8.0_144
on
Ubuntu 14.04

Steps to reproduce:

1. 
Check on Options --> Preferences --> General --> Mark new entries with addition date
Check on Options --> Preferences --> General --> Overwrite
Field name: timestamp

2. Add an entry by DOI. I have tried several and the same behavior happens. Here is a sample: 10.1002/jae.2557

3. Entry is added, but timestamp is not populated.

I have confirmed that adding an entry manually still creates a timestamp.""Thank you for your report :+1:
This should be fixed in current `master`. Please try the latest build from http://builds.jabref.org/fetcher-timestamp. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= I checked the latest master build and the behavior is as expected now. Thanks! =||= "Fetcher timestampFixes #3074.Stefan Kolbstefan-kolb08/10/17, 02:09:05 PM
3086.03097Changes in Source Tab are not saved correctly without switching to another tab"JabRef version 4.0-beta2 on Debian 9 Stretch AMD64

Steps to reproduce:

1. Add a book entry
2. Add `title`, `author` etc. and save
3. Add `subtitle` and save
4. Switch to another entry
5. Return to the previous entry --> `subtitle` disappeared!!!!

It is very annoying and happens also with other fields.""Which java version? Did you try our latest build? You can also try `snap install jabref --edge --devmode`. - [snapd should be available at Debian testing](https://snapcraft.io/docs/core/install-debian). =||= Hi @Doc73,
I cannot reproduce the problem on my machine with your description neither using the 4.0-beta2 nor using the most recent dev builds...

Can you please check whether this problem is also present in the dev builds available from https://builds.jabref.org/master ?

 =||= Dear all,
I use latest `openjdk-jre` version available in Debian Stable repositories, i. e. 8u141-b15-1~deb9u1, with `openjfx` v. 8u111-b14-1.

I can reproduce it sistematically with beta2. Try this way:
1. Add a book with author, title, date, key
2. Search the item with a field common to other items, in order to have other items in table with the one just added.
3. In biblatex **source editor**, add ex. gr. `titleaddon`
4. In the table, switch with arrows to another item
5. Return to previous item

Later I'll try dev builds.

EDIT
From other tests, it seems that the issue happens whenever I add an entry in **source editor**. =||= I can confirm that the real issue is that every changes made directly into the source editor are not saved, even if you press the CTRL+S keys. :-( =||= Thanks for the clarification.

I can now reproduce the problem in 4.0-beta2 and `master`: Changes in the source tab are not stored when switching to another entry. 
However, if you switch to another tab first before selecting another entry this problem does not happen. This might be a workaround for you.

Potentially related to #2946 resp. 03861a35028f162bf0034a143648641ca93aee7c - @tobiasdiez can you check whether this is easily solvable?

*//Edit: Also related https://github.com/JabRef/jabref/issues/3063*

Best regards,
Matthias =||= @matthiasgeiger
Yes, I noticed this workaround. 
BTW, thank you very much!  =||= @Doc73 @matthiasgeiger I think I have fixed this. Can you please try out http://builds.jabref.org/fix-sourcetab-update/ and see if it works for you? =||= @lenhard 
Many thanks! It seems working! =||= Problem: in editor, bibtex source tab not updating.

Steps:  
1. add article
2. go to optional fields, add DOI
3. fetch DOI data and accept ""replace""
4. Fields all okay in Required tab
5. All fields blank in Bibtex source tab.


JabRef 4.0-dev--snapshot--2017-08-11--master--18fffc6b9
Linux 4.8.0-58-generic amd64 
Java 1.8.0_144 =||= @wujastyk This should also be fixed by the change of @lenhard I just merged into the master branch. 

Please try the newest version from https://builds.jabref.org/master. Thanks! =||= JabRef 4.0-dev--snapshot--2017-08-13--master--ce5038dd3
Linux 4.8.0-58-generic amd64
Java 1.8.0_144

Problem persists.  Exactly as previously described.  :-(



On 13 August 2017 at 21:06, Matthias Geiger <notifications@github.com>
wrote:

> @wujastyk <https://github.com/wujastyk> This should also be fixed by the
> change of @lenhard <https://github.com/lenhard> I just merged into the
> master branch.
>
> Please try the newest version from https://builds.jabref.org/master.
> Thanks!
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3086#issuecomment-322060782>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhtdhgSxqttsuN7WI-PgDkQhq6cJUks5sX0k8gaJpZM4OwY5r>
> .
>
 =||= @wujastyk I've tried with the same JabRef version, but on Win7, but I cannot reproduce your problem. Can you give a DOI? I do the following:
 1. add article 
 2. go to General fields tab, add DOI https://doi.org/10.1016/j.future.2017.01.006
 3. Click get BibTeX data from DOI
 4. Click replace
 5. All fields properly populated in the required tab and and in the BibTeX source tab

 =||= I do the same, but I enter the doi in the Optional Fields tab

Sent from Android phone

On 14 Aug 2017 9:46 am, ""Jörg Lenhard"" <notifications@github.com> wrote:

> @wujastyk <https://github.com/wujastyk> I've tried with the same JabRef
> version, but on Win7, but I cannot reproduce your problem. Can you give a
> DOI? I do the following:
>
>    1. add article
>    2. go to General fields tab, add DOI https://doi.org/10.1016/j.
>    future.2017.01.006
>    3. Click get BibTeX data from DOI
>    4. Click replace
>    5. All fields properly populated in the required tab and and in the
>    BibTeX source tab
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3086#issuecomment-322121835>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhixF8ZohtNoHz8qqOjpzX65px0QTks5sX_tegaJpZM4OwY5r>
> .
>
 =||= @wujastyk Did you customize your entry types somehow? (http://help.jabref.org/en/CustomEntryTypes) =||= I was able to reproduce the problem and I opened #3103 for this bug. =||= Yes.

Now offline for the rest of tge day, flying Vienna-Edmonton.

Sent from Android phone

On 14 Aug 2017 10:49 am, ""Oliver Kopp"" <notifications@github.com> wrote:

> @wujastyk <https://github.com/wujastyk> Did you customize your entry
> types somehow? (http://help.jabref.org/en/CustomEntryTypes)
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3086#issuecomment-322133589>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhhiIZyp5CmDObBvwXAmHOGsr0f_Qks5sYAongaJpZM4OwY5r>
> .
>
 =||= Have a good flight!
Should now be fixed in recent master builds. =||= Yes, with

JabRef 4.0-dev--snapshot--2017-08-14--master--0b779cdc4
Linux 4.8.0-58-generic amd64
Java 1.8.0_144

this bug is fixed.  Thanks!

Dominik


On 14 August 2017 at 20:49, Matthias Geiger <notifications@github.com>
wrote:

> Have a good flight!
> Should now be fixed in recent master builds.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3086#issuecomment-322275957>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhuRwGk4_1VNEUKqxrYF2gUfWzYjGks5sYJbUgaJpZM4OwY5r>
> .
>
 =||= "Store changes in source tab when new entry is selected"Fixes #3086 

The problem was that the source tab only stored changes on focus change and this did not happen when you just select a new entry in the main table.

The PR modifies an attribute in the `EntryEditor` (`movingToDifferentEntry`) and turns it into a `BooleanProperty` so that you can bind to it and react to changes.

EDIT: Also fixes a second (unreported) issue: Now the base panel is marked as dirty when you type something in the source tab.

EDIT 2: Fixes also  #3063

Now the Other fields tab is rebuilt whenever an other field is newly added or removed at the BibEntry. This is achieved with the event system and a new subtype of FieldChangedEvent.

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [x] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard08/13/17, 07:04:45 PM
3103.03104Source panel in Entry Editor is not updated correctly in some circumstances"As reported by @wujastyk in https://github.com/JabRef/jabref/issues/3086#issuecomment-322035643 the source panel is not updated correctly in all cases.

Steps:
- add article **and display BibTeX source** (this is important!)
- go to optional fields, add DOI
- fetch DOI data and accept ""replace""
- Fields all okay in Required tab
- All fields blank in Bibtex source tab - **or there are some strange display errors**

As outlined above the problem does only occur if the BibTeX source panel has shown in empty entry before fetching the BibTeX data by DOI.""The problem seems to be that there are things not happening on the FXApplicationThread.
```
Aug 14, 2017 2:17:28 PM com.google.common.eventbus.EventBus$LoggingHandler handleException
SEVERE: Exception thrown by subscriber method listen(org.jabref.model.entry.event.EntryChangedEvent) on subscriber org.jabref.gui.entryeditor.SourceTab@58a7e8fd when dispatching event: org.jabref.model.entry.event.FieldAddedOrRemovedEvent@6b2f7fae
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:236)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator$VetoableSubListDecorator.clear(VetoableListDecorator.java:529)
	at com.sun.javafx.binding.ContentBinding$ListContentBinding.onChanged(ContentBinding.java:114)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:439)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:417)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.publishNotifications(MemoizationList.java:58)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.access$300(MemoizationList.java:30)
	at org.reactfx.collection.MemoizationListImpl.sourceChanged(MemoizationList.java:89)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.SuspendableBase.resume(SuspendableBase.java:64)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.MultiGuard.close(Guard.java:83)
	at org.reactfx.Suspendable$1.resumeSource(Suspendable.java:118)
	at org.reactfx.Suspendable$1.suspendSource(Suspendable.java:104)
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18)
	at org.reactfx.EventStreams$3.lambda$observeInputs$0(EventStreams.java:105)
	at org.reactfx.value.ChangeListenerWrapper.accept(Val.java:786)
	at org.reactfx.util.AbstractReducingStreamNotifications.lambda$head$0(NotificationAccumulator.java:248)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.value.ValBase.invalidate(ValBase.java:32)
	at org.reactfx.SuspendableBoolean.release(SuspendableBoolean.java:24)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.Suspendable.suspendWhile(Suspendable.java:49)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.update(GenericEditableStyledDocumentBase.java:222)
	at org.reactfx.util.Tuple3.exec(Tuple3.java:43)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.replace(GenericEditableStyledDocumentBase.java:129)
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.replace(SimpleEditableStyledDocument.java:7)
	at org.fxmisc.richtext.GenericStyledArea.replace(GenericStyledArea.java:1302)
	at org.fxmisc.richtext.GenericStyledArea.replaceText(GenericStyledArea.java:1297)
	at org.fxmisc.richtext.model.EditActions.clear(EditActions.java:140)
	at org.jabref.gui.entryeditor.SourceTab.listen(SourceTab.java:74)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)
	at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)
	at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)
	at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)
	at com.google.common.eventbus.EventBus.post(EventBus.java:217)
	at org.jabref.model.database.BibDatabase.relayEntryChangeEvent(BibDatabase.java:580)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)
	at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)
	at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)
	at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)
	at com.google.common.eventbus.EventBus.post(EventBus.java:217)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:427)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:448)
	at org.jabref.gui.mergeentries.MergeFetchedEntryDialog$ReplaceAction.actionPerformed(MergeFetchedEntryDialog.java:137)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2236)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2294)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)
	at java.awt.Container.dispatchEventImpl(Container.java:2280)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)
	at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:184)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:229)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:227)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:227)
	at java.awt.Dialog.show(Dialog.java:1084)
	at java.awt.Component.show(Component.java:1671)
	at java.awt.Component.setVisible(Component.java:1623)
	at java.awt.Window.setVisible(Window.java:1014)
	at java.awt.Dialog.setVisible(Dialog.java:1005)
	at org.jabref.gui.mergeentries.FetchAndMergeWorker.done(FetchAndMergeWorker.java:67)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
``` =||= "Source tab doi"Fixes #3103 by making sure that updates to the source tab are always performed on the FXApplication Thread.

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard08/14/17, 04:14:16 PM
3101.03105Move to group works like add to group"JabRef version 4.0-beta2 on Ubuntu 17.04 with oracle JVM

Steps to reproduce:

1. Add an entry to a group
2. Right click and press move to group
3. The entry is added to the new group but not removed from the old one""I can confirm this.

@tobiasdiez What is the actual desired behavior for ""Move to group""? Clear all prior groups and move it to the new one? =||= I noticed another thing, dragging and dropping an entry into a group works as add to group too. No idea what is the indented behaviour but as user I would expect it to move the entry not to simply add it. =||= @lenhard, yes I also would expect ""Move to group"" to remove the selected entries from their previous groups and then adds them to the new one. It seems that https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupAddRemoveDialog.java#L176 is missing a `if(move) { foreach group.removeEntries(...)}` statement. 

@diravan, I think you can control the drag & drop behavior by using the Ctrl (and/or Shift) modifier. I.e. holding Ctrl/Shift and drop the entries should move them.  =||= "Remove entries from prior groups if move operation is selected"Fixes #3101

There is one problem left to conclude this. It does the proper operation on the selected entries and updates the group tree. However, it does not update the coloring in the group tree. @tobiasdiez Could you give me a hint on how I can achieve this?

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard08/16/17, 09:30:18 AM
2718.03120Check integrity action filter should have an option to select none and allIt is tedious to deselect all of the issues first to select a single one after that to fix it"I can take this one on.  Any suggestions on things to look into before starting? =||= Hi,

thanks for your interest in working at this!  For contributing just have a look at our Contributing guide:
https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md

The code is structured into gui, logic and model. 
If you have any further questions, don't hesistate to ask
 =||= "Additional filter functionality for Check Integrity popup"Fixes #2718 

I added new 'Filter All' and 'Filter None' buttons.  They can be clicked by the user to
check/uncheck all options in the filter menu.  When one of the buttons gets clicked the system will iterate through the existing menu components and toggle the checkmarks and info displayed.

I wasnt sure on the best placement of the buttons in the window so went with the simplest solution
![image](https://user-images.githubusercontent.com/17808285/29439562-4f3e84fe-8373-11e7-9d15-5e811d90578a.png)

Updated localization info with text for aforementioned buttons.
"AndrewAndrew-Lev08/18/17, 11:16:23 AM
3136.03137"Missing ""Normalize to BibTeX name format""""The functionality ""Normalize to BibTeX name format"" got lost from 3.8.2 to 4.0 beta 3:

JabRef 3.8.2:

![grafik](https://user-images.githubusercontent.com/1366654/29488210-8e56b780-8506-11e7-8987-b5964c3bde77.png)

JabRef 4.0 beta3:

![grafik](https://user-images.githubusercontent.com/1366654/29488217-bc29901a-8506-11e7-803a-6da64105dba4.png)



""Re-add ""Normalize to BibTex name format"" context menu item and menu i…""…tem tooltips

Fixes #3136

Also re-adds tooltips to context menu items which had been commented out.

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard08/20/17, 03:48:09 PM
2539.03147Call for function: export the pdfs of all the selected entrys to a new folder"some times, i want share some of the literature pdfs to friends, it is very easy to select the wanted entrys from the Jabref, but hard to pick out the seleted pdfs.

I hope there is a function to export the pdfs of the selected entrys to a new folder.

thanks""I agree, that would a very nice feature to have. I guess, it is also already somewhat implemented in JabRef, as JabRef is already able to move files from one folder to another. Just copying (instead of moving) the files from one folder to another, user-specified folder would probably already do the trick, I guess. =||= @Vaver  @AEgit  I have implemented the export functionality that works for all linked files:

http://builds.jabref.org/exportPDF/

Please beware that the current dev versions are still in alpha state and still miss some functionality. 
Do a backup of your db before testing.

You can use it like any other export function. Select the entries then choose  Export -> Files Exporter 
However there is currently one thing I can not change: You have to enter an arbitrary string in the save dialog as ""filename"".  The entered name is ignored, it is just needed to get the directory.
 =||= @Siedlerchr : Thank you very much! I can confirm that this feature works in the posted build!

And immediately a warning or potential improvement due to (my) typical noob behaviour. I went for ""Export"" instead of ""Export selected"". This lead to JabRef copying over all linked files (in my case ~100 GB) - even when you stop JabRef, it will continue copying over those files. Only by killing the relevant process I was able to stop the copy process.
To prevent this, it might be helpful to add a warning or something along the lines (or let the noobs be noobs ;)).

Thanks again! =||= Thanks for reporting. I will try to see if I can add a break to stop the process. 
 =||= @Vaver  @AEgit  I recently finished an improved functionality of this feature. Could you please test and give feedback on it?
http://builds.jabref.org/exportPdf/ =||= JabRef 4.1-dev--snapshot--2017-10-26--exportPdf--88faa7ce3
Windows 10 10.0 amd64 
Java 1.8.0_151

@Siedlerchr This looks really good! Thank you very much!

I think the only thing that could be improved is the visual feedback during the copying process. Currently, if files of many entries are copied over to another folder, JabRef does not show, how long it will take to copy all the files. As far as I can tell, it is therefore currently also not possible to stop the copying process at a certain point in time, unless the relevant process is killed (copying over the files will continue even when JabRef is stopped - see https://github.com/JabRef/jabref/issues/2539#issuecomment-291973170).

But overall this is a massive improvement - I especially like the final table showing the results of the copying process including the full path. I also appreciated that files are not overwritten, when found in the same folder - you could add the possibility to ask the user whether she/he wants to overwrite preexisting files, but I don't think this is a big issue at all. After all, this can be sorted out before starting the copying process by the user with the folder manager of choice. =||= Thank you very much for your feedback, regarding Cancel, have you tried clicking cancel on the progress dialog? It should cancel the whole copying process. Regarding the duration, I will see if there is a way to calculate time =||= Hmmm I didn't see any progress dialog, to be honest - if there's one, that would probably solve all my issues.

EDIT: I've checked it again, just to be sure. I definitely cannot see any progress dialog - I only see the final results table. =||= @AEgit I noticed that the progess dialog was not shown during progress due to the execution order, Changed that now. You can try it out in a couple of minutes, if the tests succed https://github.com/JabRef/jabref/pull/3147 =||= Ok, I'll do that once the updated build is available. =||= Is this fix already part of the master?
Because with this version the PDF copying does not work anymore: only some, but not all of the selected items are copied and no final results table is shown.

JabRef 4.1-dev--snapshot--2017-11-01--master--d5f0b695f
Windows 10 10.0 amd64 
Java 1.8.0_151 =||= Ah shit I now got it, too. I will fix it asap =||= Okay, I found the issue. Now both Progessdialog + result table are shown:  ac723bf
Regarding the copying: I did not change any of that. It iterates over all selected entires and gets the files for each entry =||= JabRef 4.1-dev--snapshot--2017-11-01--master--ac723bf6d
Windows 10 10.0 amd64 
Java 1.8.0_151

Ok, progress dialog and result table work now.
Regarding the copying: I'll see whether I can reproduce this behaviour (so far it has happened 2 times, but afterwards things worked flawlessly).

The ""Cancel"" button on the progress button seems to have no effect - JabRef continues copying over files (only the progress bar is no longer shown). =||= "Export pdf/linked files "Fixes #2539 

Followup from #2706  because somehow my new changes did not update the PR correctly.


![grafik](https://user-images.githubusercontent.com/320228/31773816-3ef12f96-b4e4-11e7-800f-90413d074280.png)



<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [x] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr11/01/17, 03:28:24 PM
3106.03155New gitignore config ignores lib folder"In #3091 we updated our gitignore to a suggestion from gitignore.io

Unfortunately, this includes *.jar and this makes git ignore our /lib folder. Tracking this down just cost me a few hours....

@koppor What are your thoughts on this? It means that we cannot blindly take the suggestions from gitignore.io Is there a way to exclude jar files from their generated configuration?""Damn it. - Who versions jar files 🤔. I would suggest to keep it (I really like that community-driven approach and especially like the ignore files for latex, jabref, windows, microsoft office) and add a howto to CONTRIBUTING if one wants to add a JAR manually. =||= @github really ignores all `.jar` files: https://github.com/github/gitignore/blob/690a433b668348c33087d34fafe2155ebe8bb4cf/Java.gitignore#L14 =||= We could just add a `!/lib/*.jar ` https://stackoverflow.com/questions/987142/make-gitignore-ignore-everything-except-a-few-files =||= I have no strong opinion how we adjust the .gitignore file, just that we do it. Right now, parts of our source tree are not in version control. It would probably be best to get rid of the libs (Spin and mac-extensions). But I guess we don't want to drop support for Mac ;)

And we need to make sure that a future update of the .gitignore doesn't break this again. =||= "Update .gitignoreThis implements https://github.com/JabRef/jabref/issues/3106#issuecomment-322461597 and thus fixes #3106.Oliver Koppkoppor08/25/17, 01:01:37 PM
3161.03162Protected terms/Add selected text  not bringing up previous lists"JabRef 4.0-dev--snapshot--2017-08-27--master--6a26798aa
Linux 4.8.0-58-generic amd64 
Java 1.8.0_144

1. In editing tab, title field,
2. select a word,
3. right click and choose ""protected terms/Add selected text to list""

previous lists aren't shown, and can't be selected.  the only option is to create a new list.

Also, because one can't select an existing list, ""Format Field"" does nothing.

Problem disappears if one closes the editing window and re-opens it.
""This only occurs when you inside the editor create a new list and then **immediately** want to assign terms to this new list. If you switch to an other entry it shows up. And next time you start JabRef, the list is shown. 
@lenhard  This sounds like one of these ""mark as dirty"" issues you recently worked in the entry editor. Any idea?

 =||= To me this sounds more as if the list is passed to the entry editor when it is created. That would explain why it is only available when you switch to a new entry editor.

All in all this is not too critical, but probably also not too hard to fix. =||= And I think I have fixed this.

@wujastyk Could you please try out the version available at http://builds.jabref.org/protected-terms-update/ and let me know if it works for you? =||= JabRef 4.0-dev--snapshot--2017-08-28--master--a88c20201
Linux 4.11.0-14-generic amd64
Java 1.8.0_144


I started today's JabRef on a different computer.  Went to editor field,
right clicked and chose ""Protected terms"".  I could select ""New"".  But I
couldn't find a way to tell JabRef that I already have a .terms list and I
want to use the one I've got.

I picked ""new"" and selected the existing file and was told it would be
overwritten.  But it wasn't.  When I came back to the field editor, I still
couldn't Protect terms.  So I closed the editor, and reopened it, and
*then* my .terms file was displayed.  I could add terms, and ""format field.""

Screenshot attached.



​
--
Professor Dominik Wujastyk <http://ualberta.academia.edu/DominikWujastyk>
​,​

Singhmar Chair in Classical Indian Society and Polity
​,​

Department of History and Classics <http://historyandclassics.ualberta.ca/>
​,​
University of Alberta, Canada
​.​

South Asia at the U of A:

​sas.ualberta.ca​
​​


On 28 August 2017 at 01:59, Jörg Lenhard <notifications@github.com> wrote:

> And I think I have fixed this.
>
> @wujastyk <https://github.com/wujastyk> Could you please try out the
> version available at http://builds.jabref.org/protected-terms-update/ and
> let me know if it works for you?
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3161#issuecomment-325286894>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhqEmwuGrNVbtxCUcjNvnY7YN2Mndks5scnNcgaJpZM4PD4Iv>
> .
>
 =||= "Update protected terms list in context menu when a new list is added."Fixes  #3161

The result of the dialog needs to be evaluated *after* the dialog is actually finished and the update of the context menu needs to be called.

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard08/28/17, 08:39:17 PM
3130.03163Several problems in the new entry editor"JabRef 4.0-beta3
Windows 10 10.0 amd64 
Java 1.8.0_121

Steps to reproduce:

1. Enter Author or Editor Names Lastname, A. (does not matter if one or more)
2. Alert Triangle schown
3. Hovering with mouse over it (Not usual BibTex format)

Ich can understand the intention behind it, but since I am getting these alert messages in quite a few  entries and field I am slightly annoyed and they are not necessary. I use jabref with TexMaker and MikTex 2.9 as well as the apalike package and if I swap the lastname and firstname it will not compile properly, therfore with the setup I use it works fine, so why the Triangle 

![2017-08-18 5](https://user-images.githubusercontent.com/29122575/29478980-0ad9a372-8470-11e7-953d-af6455cb9b98.png)


now the next Problem is in the Edition field. If I type in ""8"" same annyoing trangle. Telling me I should start with capital letters (now just with a sense of Humor I would love to see he capital of the number ""8"" ;)

![2017-08-18 4](https://user-images.githubusercontent.com/29122575/29478955-f72055ec-846f-11e7-80eb-aef49cdbe6a3.png)

Oh and while you show me the capital letters of 8, continue with those of the year ;). Here it tells me that I need to put capitals in {}.

![2017-08-18 6](https://user-images.githubusercontent.com/29122575/29479059-63b69388-8470-11e7-8a28-5dc13bb7415e.png)

The next issue concerns file attatchements. It is hard to see even one fileattached and impossible to see two, if two are attatched (for example chapters by the same author)

![2017-08-18 7](https://user-images.githubusercontent.com/29122575/29479252-5df314fc-8471-11e7-910d-4f36174b0991.png)

And no matter what  I do, I cannot get around to using annotations as the bottom window remains simply grey. Pdf annotations were made using nitro pdf. And have worked with the 4.0 beta.

![2017-08-19](https://user-images.githubusercontent.com/29122575/29479542-144b2afe-8473-11e7-97ec-a237fc4bb40a.png)
 
Those are the issues I was able to identifiy in the past 10 minutes and was not able to resolve

<details>
<summary>Detail information:</summary>

```
Opening: C:\Users\Vieth\OneDrive\Abschicken\P-VEMA\VEMA.bib
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Warning: no message translation for ""Names are not in the standard BibTeX format."" for locale de
Error while saving file.
org.jabref.logic.exporter.SaveException: Error in field 'edition': Braces don't match.
	at org.jabref.logic.exporter.BibtexDatabaseWriter.writeEntry(BibtexDatabaseWriter.java:169)
	at org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(BibDatabaseWriter.java:198)
	at org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(BibDatabaseWriter.java:150)
	at org.jabref.logic.autosaveandbackup.BackupManager.performBackup(BackupManager.java:122)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.autosaveandbackup.BackupManager.lambda$new$0(BackupManager.java:49)
	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.util.concurrent.FutureTask.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
```

</details>.""Refs  #3100 =||= I discovered another bug, with the same above setup using ""InCollection"". The Adress Field is clearly needed or at least is optional. However it is not only in the optional fields tab, but also ignored field tab.

deleting it in one, will automatically delete it in the other as well. It also appears in ""book"" entries. I cannot imagine, that that is wanted.  =||= To give some general feedback on how we're proceeding:
 - The validations will be made optional, so that you can turn them off (in 4.0)
 - The visibility of file attachments will be improved (in 4.0). Could you perhaps try out this version http://builds.jabref.org/increase-textarea-size/ It assigns a minimum height to all text fields, so hopefully file attachments should be more readable. Do you think that's better? Would you want an even bigger minimum size or a smaller one?
 - Regarding the annotations maybe @lynyus has some questions to you to help with reproducing this.
 - Regarding fields: Did you customize your entrytypes somehow? At least I don't have an ignored field tab. =||= Thanks for the feedback. I will try the build as soon as possible, however as I am just setting up the thesis literature I am trying to play around with it as little as possible.

 

As for the “ignore” I am Using it in German and it is “Abgelehnte Felder” or basically the third tab from the left being the one following optional. And no, I did not customize. I will try to show it in a screen shot following this message.

 

 

To give some general feedback on how we're proceeding:

*	The validations will be made optional, so that you can turn them off (in 4.0)
*	The visibility of file attachments will be improved (in 4.0). Could you perhaps try out this version http://builds.jabref.org/increase-textarea-size/ It assigns a minimum height to all text fields, so hopefully file attachments should be more readable. Do you think that's better? Would you want an even bigger minimum size or a smaller one?
*	Regarding the annotations maybe @lynyus <https://github.com/lynyus>  has some questions to you to help with reproducing this.
*	Regarding fields: Did you customize your entrytypes somehow? At least I don't have an ignored field tab.

—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub <https://github.com/JabRef/jabref/issues/3130#issuecomment-323737523> , or mute the thread <https://github.com/notifications/unsubscribe-auth/AbxgD5Bz73TSe5QaFZg6QyIylnn_H-Dnks5saX5GgaJpZM4O8GPX> .  <https://github.com/notifications/beacon/AbxgD9kNQdxdNqD0OgWDnB0AgSwnbx2pks5saX5GgaJpZM4O8GPX.gif> 

 =||= @lenhard 

I tried the larger size field in file attatchements and it is improved now showing 2 entries ( i filled it with three, but the third is easily excessible. And it is an improvement, that I can now actually read which file the one in question is so thumbs up for that.
![2017-08-21 3](https://user-images.githubusercontent.com/29122575/29530500-5e7e3124-86a4-11e7-840a-f6570e6569cb.png)

Now here are the promised screenshots regarding the troubling fields. As you can see both screenshots are from the same entry and show the problem. The field is double placed and I did not have that in the early beta releases. In this case the field in question is Adress.
![2017-08-21 5](https://user-images.githubusercontent.com/29122575/29530726-76df99a0-86a5-11e7-9eaf-53b11700b317.png)

![2017-08-21](https://user-images.githubusercontent.com/29122575/29530556-9ee49bb8-86a4-11e7-893a-69cffc6df919.png)


As for the annotations @lynyus even after rebooting my laptop and even with the new build I am staring at a gray area. The program recognizes that a file with annotations is attatched but is not able to load the area. Additionally I am getting a server error notice at the very bottom 

![2017-08-21 4](https://user-images.githubusercontent.com/29122575/29530639-0bb9aae4-86a5-11e7-8fdd-c2a2742591ed.png)
 =||= Could you please check whether some error messages are shown in the error log window after you try to show some annotations?

Thanks! =||= Der aktuelle Log file
<details>
  <summary>Log File</summary>
  
  ```
Opening: C:\Users\Vieth\OneDrive\Thesis\TeX\thesis.bib
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Could not connect to the updateserver.
java.net.ConnectException: Connection timed out: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
	at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
	at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
	at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
	at java.net.PlainSocketImpl.connect(Unknown Source)
	at java.net.SocksSocketImpl.connect(Unknown Source)
	at java.net.Socket.connect(Unknown Source)
	at sun.security.ssl.SSLSocketImpl.connect(Unknown Source)
	at sun.security.ssl.BaseSSLSocketImpl.connect(Unknown Source)
	at sun.net.NetworkClient.doConnect(Unknown Source)
	at sun.net.www.http.HttpClient.openServer(Unknown Source)
	at sun.net.www.http.HttpClient.openServer(Unknown Source)
	at sun.net.www.protocol.https.HttpsClient.<init>(Unknown Source)
	at sun.net.www.protocol.https.HttpsClient.New(Unknown Source)
	at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
	at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
	at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
	at org.jabref.logic.util.Version.getAllAvailableVersions(Version.java:96)
	at org.jabref.gui.worker.VersionWorker.doInBackground(VersionWorker.java:55)
	at org.jabref.gui.worker.VersionWorker.doInBackground(VersionWorker.java:29)
	at javax.swing.SwingWorker$1.call(Unknown Source)
	at java.util.concurrent.FutureTask.run(Unknown Source)
	at javax.swing.SwingWorker.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.entryeditor.fileannotationtab.fileannotationtab
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101)
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125)
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137)
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:214)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
file:/C:/Program%20Files/JabRef/JabRef-4.0-dev--snapshot--2017-08-20--increase-textarea-size--0f902ad34.jar!/org/jabref/gui/entryeditor/fileannotationtab/FileAnnotationTab.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441)
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409)
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99)
	... 51 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.Trampoline.invoke(Unknown Source)
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at sun.reflect.misc.MethodUtil.invoke(Unknown Source)
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566)
	... 54 more
Caused by: com.google.common.util.concurrent.UncheckedExecutionException: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2218)
	at com.google.common.cache.LocalCache.get(LocalCache.java:4147)
	at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:4151)
	at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:5140)
	at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:5146)
	at org.jabref.logic.pdf.FileAnnotationCache.getFromCache(FileAnnotationCache.java:50)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.initialize(FileAnnotationTabViewModel.java:41)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabViewModel.<init>(FileAnnotationTabViewModel.java:37)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTabController.initialize(FileAnnotationTabController.java:51)
	... 64 more
Caused by: java.time.format.DateTimeParseException: Text 'o˛>%Øècè{©©“6üäh4Íß5hï' could not be parsed at index 0
	at java.time.format.DateTimeFormatter.parseResolved0(Unknown Source)
	at java.time.format.DateTimeFormatter.parse(Unknown Source)
	at java.time.LocalDateTime.parse(Unknown Source)
	at org.jabref.model.pdf.FileAnnotation.extractModifiedTime(FileAnnotation.java:86)
	at org.jabref.logic.pdf.PdfAnnotationImporter.createMarkedAnnotations(PdfAnnotationImporter.java:89)
	at org.jabref.logic.pdf.PdfAnnotationImporter.importAnnotations(PdfAnnotationImporter.java:54)
	at org.jabref.logic.pdf.EntryAnnotationImporter.lambda$importAnnotationsFromFiles$2(EntryAnnotationImporter.java:53)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.logic.pdf.EntryAnnotationImporter.importAnnotationsFromFiles(EntryAnnotationImporter.java:53)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:37)
	at org.jabref.logic.pdf.FileAnnotationCache$1.load(FileAnnotationCache.java:34)
	at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3708)
	at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2416)
	at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2299)
	at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2212)
	... 72 more

Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
  ```
</details>
 =||= One hell of a log 😁

However, this should help in investigating the problem... =||= I guess you could say I transferred the equivalent of my thesis into the log :D

Have fun with it. Thought you would have fun with the whole picture which is a bunch of 0 and 1 s for me ;)

 

 =||= 
![2017-08-22 1](https://user-images.githubusercontent.com/29122575/29561149-b385a8ba-8734-11e7-89a9-8856189f965c.png)
The problem I described with the fields, seems to be a more general problem. As it concens  not only the address part but as I just discovered also month (wich I am not using) in articles.

Same entry and you get this
![2017-08-22](https://user-images.githubusercontent.com/29122575/29561135-ab464312-8734-11e7-941c-aa1a51571d34.png)

I wondered if that could have to do with pre defined citation styles you can chose in the option as some citation styles do not urse certain information, for example APA does not refer to month in articles, but that does not explain, the ""address"" with books or incollection, as it is needed  =||= With #3141 the increased size of the file field is now merged into master. So this part of the issue is resolved.

Still missing:
 - Get rid of broken validation messages (PR ready  #3154)
 - Repair the file annotation tab =||= @lenhard  great :D but what would be a weekend without any more issues to resolve. Just the next one popped out of the blue.

I was trying to edit the publisher field. While the suggestions are great and generally a wonderful idea, they are not so great when covering up the field you want to type in, creating a rather annoying instead of helpful environment as you are not able  to see the editable area. This issue occured in a smaller window as well as in the fullsize window. (Screenshots)

![2017-08-25 1](https://user-images.githubusercontent.com/29122575/29731033-12e10196-89e3-11e7-8067-667f5beb79f9.png)
![2017-08-25](https://user-images.githubusercontent.com/29122575/29731032-12df5b5c-89e3-11e7-8790-936d5f0076f3.png)

Additionally the autosuggestion/ autocompletion was first great, but after a while, when editing an entry and constantly popping up it is rather annoying. Also once suggestion chosen, you would think it would stop for that very entry, however it does not and suggests to you to use the suggestion you just used.

Have a great weekend =||= Hey, @HViethen85, I have created a fix for the FileAnnotations part of this issue! Would you mind downloading the build from http://builds.jabref.org/file-annotations-parsing-fix and give us a shout if it works?
Also I would really be interested which program you are using for creating PDF annotations. =||= Hi there @lynyus 
As mentioned above I use NITRO pdf. The annotations were all created with nitro or foxit. Lately (but not for the sample documents (as Jabref and Nitro do not like each other when sharing strorage on my laptop I have been using adobe, but have no idea how that copes with the annotations as I have not included adobe annotation documents so far)

I did as you told me. And to some extend it does work, resizing is fine, so is the generla mock up. (next comment after screenshots 1-3)
![2017-08-28 4](https://user-images.githubusercontent.com/29122575/29775662-4121962c-8c06-11e7-9273-320970eea6df.png)

![2017-08-28 1](https://user-images.githubusercontent.com/29122575/29775639-2b834054-8c06-11e7-80e1-4adc183e8da9.png)
![2017-08-28 3](https://user-images.githubusercontent.com/29122575/29775640-2b850380-8c06-11e7-97c5-b5fcb236032f.png)


However, there are still issues. I uesed documents, I had used with e previous version, in which JabRef was able to extract comments. However now I get this
![2017-08-28](https://user-images.githubusercontent.com/29122575/29775720-895e204a-8c06-11e7-86d9-fa5f0ccf499c.png)

I also find it irritating to habe the page and then N/A next to it. However, if the intention is that once a comment is left, that this is transferred to that area for example to identifiy specific topics etc.  it is okay. (I rarely use notes). Additionally I am not able to figure out why the extractions have letterseperations, where there are none? (Screenshots above). Great is the ability to preview the annotation while hovering over the expected entry. Great and a wonderful improvement is the drop down menu.

Yet, this build interferes with MS Outlook and the Opra Browser. While I was previously able to Type, do research and have the database open it now causes my laptop (which is a bit picky anyways) to crash. I cannot close or open programs or am told to end the process, am not able to open a tab anymore in my browser and for the annoations or anything to open in JabRef it took nearly 10 minutes. While the layout has gotten better the overall usability dropped. 

Oh and for the fun of it there are a few nice red messages in my log (gibbrisch for me but I expect fun for you)
Der aktuelle Log file
<details>
  <summary>Log File</summary>
  
  ```Opening: C:\Users\Vieth\OneDrive\Thesis\TeX\thesis.bib
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Warning: no message translation for ""Set current user name as owner."" for locale de
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Expected a parseable date string! However, this text could not be parsed: 'J\ŒfıHl«⁄‰⁄˘¼o%“k™¡'
Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Warning: no message translation for ""This file was found automatically. Do you want to link it to this entry?"" for locale de
Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.gui.AbstractView.lambda$getView$2(AbstractView.java:36)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.scene.Node$ReadOnlyObjectWrapperManualFire.fireSuperValueChangedEvent(Node.java:831)
	at javafx.scene.Node.invalidatedScenes(Node.java:883)
	at javafx.scene.Node.setScenes(Node.java:921)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:498)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.initialize(FileAnnotationTab.java:36)
	at org.jabref.gui.entryeditor.fileannotationtab.FileAnnotationTab.notifyAboutFocus(FileAnnotationTab.java:31)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:216)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at com.sun.javafx.scene.control.behavior.TabPaneBehavior.selectTab(TabPaneBehavior.java:122)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1332)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabHeaderSkin$5.handle(TabPaneSkin.java:1317)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$294(EmbeddedScene.java:256)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$mouseEvent$295(EmbeddedScene.java:244)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Unknown Source)

Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de
Warning: no message translation for ""There exists already a group with the same name."" for locale de`

  ```
</details> =||= @lynyus sorry I fear that log is even worse than the other one. And i did use the clear log prior.

;) =||= Hell, yeah. I'll look into this, but another day. The first glimpse tells me that the annotations created by Nitro are quite different then those created using Foxit, Okular, or Acrobat... For the time being, I can only advise you to use one of these PDF viewers, as I have tested them myself.  =||= Thanks. Yup don't worry Jabref an I have a difficult marriage, but we are hanging in there as i find it much more appealing than the alternatives. I have swaped to acrobat as foxit and Nitro did not cope well with highlights in documents stored in onedrive while in adobe all works fine using multiple devices.

Have a great week and good job so far. =||= "Fix unparseable FileAnnotation dates"This should be the last aspect for being able to close #3130. @HViethen85 should consider using another PDF Annotation tool (; However, the fault is of course on our side since we didn't validate the date format before.


- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef"Linus DietzLinusDietz08/28/17, 02:46:28 PM
3170.03171Undo in EntryEditor Source Tab leads to exception "Remove File link from entry Editor:
Go to Source Tab -> Hit CTRL + Z Exception occurs
Hit it again and the whole entry is duplicated: More than one entry found exception

The author field is somehow duplicated:
![grafik](https://user-images.githubusercontent.com/320228/29866072-8c54f59a-8d77-11e7-89b3-273d37c1f8a9.png)


```
11:35:24.112 [AWT-EventQueue-0] INFO  org.jabref.logic.importer.OpenDatabase - Opening: X:\Users\CS\Documents\_JABREFTEMP\newBiblatexTEst.bib
11:36:09.334 [AWT-EventQueue-0] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception Occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:236) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423) ~[jfxrt.jar:?]
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.LabeledSkinBase.updateChildren(LabeledSkinBase.java:580) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.LabeledSkinBase.handleControlPropertyChanged(LabeledSkinBase.java:181) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.ListCellSkin.handleControlPropertyChanged(ListCellSkin.java:49) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase.lambda$registerChangeListener$61(BehaviorSkinBase.java:197) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.MultiplePropertyChangeListenerHandler$1.changed(MultiplePropertyChangeListenerHandler.java:55) ~[jfxrt.jar:?]
	at javafx.beans.value.WeakChangeListener.changed(WeakChangeListener.java:89) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146) ~[jfxrt.jar:?]
	at javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectProperty.setValue(ObjectProperty.java:69) ~[jfxrt.jar:?]
	at javafx.scene.control.Labeled.setGraphic(Labeled.java:423) ~[jfxrt.jar:?]
	at org.jabref.gui.util.ViewModelListCellFactory$1.updateItem(ViewModelListCellFactory.java:99) ~[bin/:?]
	at javafx.scene.control.ListCell.updateItem(ListCell.java:471) ~[jfxrt.jar:?]
	at javafx.scene.control.ListCell.lambda$new$160(ListCell.java:167) ~[jfxrt.jar:?]
	at javafx.collections.WeakListChangeListener.onChanged(WeakListChangeListener.java:88) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233) ~[jfxrt.jar:?]
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482) ~[jfxrt.jar:?]
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205) ~[jfxrt.jar:?]
	at javafx.collections.ModifiableObservableListBase.addAll(ModifiableObservableListBase.java:113) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ContentBinding$ListContentBinding.onChanged(ContentBinding.java:117) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ListExpressionHelper$Generic.notifyListeners(ListExpressionHelper.java:593) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ListExpressionHelper$Generic.fireValueChangedEvent(ListExpressionHelper.java:571) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ListExpressionHelper.fireValueChangedEvent(ListExpressionHelper.java:109) ~[jfxrt.jar:?]
	at javafx.beans.property.ListPropertyBase.fireValueChangedEvent(ListPropertyBase.java:200) ~[jfxrt.jar:?]
	at javafx.beans.property.ListPropertyBase.lambda$new$39(ListPropertyBase.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(ListListenerHelper.java:164) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233) ~[jfxrt.jar:?]
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482) ~[jfxrt.jar:?]
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205) ~[jfxrt.jar:?]
	at javafx.collections.ModifiableObservableListBase.setAll(ModifiableObservableListBase.java:90) ~[jfxrt.jar:?]
	at javafx.beans.binding.ListExpression.setAll(ListExpression.java:370) ~[jfxrt.jar:?]
	at org.jabref.gui.util.BindingsHelper.lambda$5(BindingsHelper.java:121) ~[bin/:?]
	at org.jabref.gui.util.BindingsHelper$BidirectionalListBinding.changed(BindingsHelper.java:192) ~[bin/:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(StringPropertyBase.java:103) ~[jfxrt.jar:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(StringPropertyBase.java:110) ~[jfxrt.jar:?]
	at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:144) ~[jfxrt.jar:?]
	at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:49) ~[jfxrt.jar:?]
	at javafx.beans.property.StringProperty.setValue(StringProperty.java:65) ~[jfxrt.jar:?]
	at javafx.beans.property.StringProperty.setValue(StringProperty.java:57) ~[jfxrt.jar:?]
	at org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(BindingsHelper.java:164) ~[bin/:?]
	at org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(BindingsHelper.java:157) ~[bin/:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182) [jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) [jfxrt.jar:?]
	at javafx.beans.binding.ObjectBinding.invalidate(ObjectBinding.java:172) [jfxrt.jar:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(BindingHelperObserver.java:51) [jfxrt.jar:?]
	at com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(MapListenerHelper.java:320) [jfxrt.jar:?]
	at com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72) [jfxrt.jar:?]
	at com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115) [jfxrt.jar:?]
	at com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173) [jfxrt.jar:?]
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:422) [bin/:?]
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:448) [bin/:?]
	at org.jabref.gui.undo.UndoableFieldChange.undo(UndoableFieldChange.java:54) [bin/:?]
	at javax.swing.undo.UndoManager.undoTo(UndoManager.java:335) [?:1.8.0_144]
	at javax.swing.undo.UndoManager.undo(UndoManager.java:413) [?:1.8.0_144]
	at org.jabref.gui.undo.CountingUndoManager.undo(CountingUndoManager.java:30) [bin/:?]
	at org.jabref.gui.BasePanel$UndoAction.action(BasePanel.java:2171) [bin/:?]
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:1028) [bin/:?]
	at org.jabref.gui.entryeditor.EntryEditor$UndoAction.actionPerformed(EntryEditor.java:898) [bin/:?]
	at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1663) [?:1.8.0_144]
	at javax.swing.JComponent.processKeyBinding(JComponent.java:2882) [?:1.8.0_144]
	at javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:307) [?:1.8.0_144]
	at javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:250) [?:1.8.0_144]
	at javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:2974) [?:1.8.0_144]
	at javax.swing.JComponent.processKeyBindings(JComponent.java:2966) [?:1.8.0_144]
	at javax.swing.JComponent.processKeyEvent(JComponent.java:2845) [?:1.8.0_144]
	at javafx.embed.swing.JFXPanel.processKeyEvent(JFXPanel.java:463) [jfxrt.jar:?]
	at java.awt.Component.processEvent(Component.java:6310) [?:1.8.0_144]
	at java.awt.Container.processEvent(Container.java:2236) [?:1.8.0_144]
	at java.awt.Component.dispatchEventImpl(Component.java:4889) [?:1.8.0_144]
	at java.awt.Container.dispatchEventImpl(Container.java:2294) [?:1.8.0_144]
	at java.awt.Component.dispatchEvent(Component.java:4711) [?:1.8.0_144]
	at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1954) [?:1.8.0_144]
	at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:806) [?:1.8.0_144]
	at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1074) [?:1.8.0_144]
	at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:945) [?:1.8.0_144]
	at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:771) [?:1.8.0_144]
	at java.awt.Component.dispatchEventImpl(Component.java:4760) [?:1.8.0_144]
	at java.awt.Container.dispatchEventImpl(Container.java:2294) [?:1.8.0_144]
	at java.awt.Window.dispatchEventImpl(Window.java:2746) [?:1.8.0_144]
	at java.awt.Component.dispatchEvent(Component.java:4711) [?:1.8.0_144]
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) [?:1.8.0_144]
	at java.awt.EventQueue.access$500(EventQueue.java:97) [?:1.8.0_144]
	at java.awt.EventQueue$3.run(EventQueue.java:709) [?:1.8.0_144]
	at java.awt.EventQueue$3.run(EventQueue.java:703) [?:1.8.0_144]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_144]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) [?:1.8.0_144]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90) [?:1.8.0_144]
	at java.awt.EventQueue$4.run(EventQueue.java:731) [?:1.8.0_144]
	at java.awt.EventQueue$4.run(EventQueue.java:729) [?:1.8.0_144]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_144]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) [?:1.8.0_144]
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) [?:1.8.0_144]
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201) [?:1.8.0_144]
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_144]
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_144]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_144]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_144]
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_144]
11:36:09.445 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalArgumentException: Unexpected change received.
Expected:
PlainTextChange{
	position: 0
	type: DELETION
	removed: @Article{Pascanu2013,
  author        = {Razvan Pascanu and Guido Montufar and Yoshua Bengio},
  title         = {On the number of response regions of deep feed forward networks with piece-wise linear activations},
  date          = {2013-12-20},
  eprint        = {1312.6098v5},
  eprintclass   = {cs.LG},
  eprinttype    = {arXiv},
  abstract      = {This paper explores the complexity of deep feedforward networks with linear pre-synaptic couplings and rectified linear activations. This is a contribution to the growing body of work contrasting the representational power of deep and shallow network architectures. In particular, we offer a framework for comparing deep and shallow models that belong to the family of piecewise linear functions based on computational geometry. We look at a deep rectifier multi-layer perceptron (MLP) with linear outputs units and compare it with a single layer version of the model. In the asymptotic regime, when the number of inputs stays constant, if the shallow model has $kn$ hidden units and $n_0$ inputs, then the number of linear regions is $O(k^{n_0}n^{n_0})$. For a $k$ layer model with $n$ hidden units on each layer it is $\Omega(\left\lfloor {n}/{n_0}\right\rfloor^{k-1}n^{n_0})$. The number $\left\lfloor{n}/{n_0}\right\rfloor^{k-1}$ grows faster than $k^{n_0}$ when $n$ tends to infinity or when $k$ tends to infinity and $n \geq 2n_0$. Additionally, even when $k$ is small, if we restrict $n$ to be $2n_0$, we can show that a deep model has considerably more linear regions that a shallow one. We consider this as a first step towards understanding the complexity of these models and specifically towards providing suitable mathematical tools for future analysis.},
  keywords      = {cs.LG, cs.NE},
  owner         = {Christoph Schwentker},
  timestamp     = {2017-08-30},
}
	inserted: 
}
Received:
PlainTextChange{
	position: 0
	type: INSERTION
	removed: 
	inserted: @Article{Pascanu2013,
  author        = {Razvan Pascanu and Guido Montufar and Yoshua Bengio},
  title         = {On the number of response regions of deep feed forward networks with piece-wise linear activations},
  date          = {2013-12-20},
  eprint        = {1312.6098v5},
  eprintclass   = {cs.LG},
  eprinttype    = {arXiv},
  abstract      = {This paper explores the complexity of deep feedforward networks with linear pre-synaptic couplings and rectified linear activations. This is a contribution to the growing body of work contrasting the representational power of deep and shallow network architectures. In particular, we offer a framework for comparing deep and shallow models that belong to the family of piecewise linear functions based on computational geometry. We look at a deep rectifier multi-layer perceptron (MLP) with linear outputs units and compare it with a single layer version of the model. In the asymptotic regime, when the number of inputs stays constant, if the shallow model has $kn$ hidden units and $n_0$ inputs, then the number of linear regions is $O(k^{n_0}n^{n_0})$. For a $k$ layer model with $n$ hidden units on each layer it is $\Omega(\left\lfloor {n}/{n_0}\right\rfloor^{k-1}n^{n_0})$. The number $\left\lfloor{n}/{n_0}\right\rfloor^{k-1}$ grows faster than $k^{n_0}$ when $n$ tends to infinity or when $k$ tends to infinity and $n \geq 2n_0$. Additionally, even when $k$ is small, if we restrict $n$ to be $2n_0$, we can show that a deep model has considerably more linear regions that a shallow one. We consider this as a first step towards understanding the complexity of these models and specifically towards providing suitable mathematical tools for future analysis.},
  file          = {:TopHat_discoveringsplicejunctionswithRNA-Seq  - TopHat_ discovering splice junctions with RNA-Seq.pdf:PDF},
  keywords      = {cs.LG, cs.NE},
  owner         = {Christoph Schwentker},
  timestamp     = {2017-08-30},
}
}
	at org.fxmisc.undo.impl.UndoManagerImpl.changeObserved(UndoManagerImpl.java:189) ~[undofx-1.2.2.jar:?]
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.FilterStream.lambda$observeInputs$0(FilterStream.java:20) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.MappedStream.lambda$observeInputs$0(MappedStream.java:25) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.util.QueuingStreamNotifications.lambda$head$0(NotificationAccumulator.java:217) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.SuspendableBase.resume(SuspendableBase.java:64) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.MultiGuard.close(Guard.java:83) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.Suspendable$1.resumeSource(Suspendable.java:118) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.Suspendable$1.suspendSource(Suspendable.java:104) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.EventStreams$3.lambda$observeInputs$0(EventStreams.java:105) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.value.ChangeListenerWrapper.accept(Val.java:786) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.util.AbstractReducingStreamNotifications.lambda$head$0(NotificationAccumulator.java:248) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.value.ValBase.invalidate(ValBase.java:32) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.SuspendableBoolean.release(SuspendableBoolean.java:24) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49) ~[reactfx-2.0-M5.jar:?]
	at org.reactfx.Suspendable.suspendWhile(Suspendable.java:49) ~[reactfx-2.0-M5.jar:?]
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.update(GenericEditableStyledDocumentBase.java:222) ~[richtextfx-0.7-M5.jar:?]
	at org.reactfx.util.Tuple3.exec(Tuple3.java:43) ~[reactfx-2.0-M5.jar:?]
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.replace(GenericEditableStyledDocumentBase.java:129) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.replace(SimpleEditableStyledDocument.java:7) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.replace(GenericStyledArea.java:1302) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.replaceText(GenericStyledArea.java:1297) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.lambda$createPlainUndoManager$43(GenericStyledArea.java:1566) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.undo.impl.UndoManagerImpl.lambda$performChange$0(UndoManagerImpl.java:176) ~[undofx-1.2.2.jar:?]
	at org.reactfx.Suspendable.suspendWhile(Suspendable.java:49) ~[reactfx-2.0-M5.jar:?]
	at org.fxmisc.undo.impl.UndoManagerImpl.performChange(UndoManagerImpl.java:176) ~[undofx-1.2.2.jar:?]
	at org.fxmisc.undo.impl.UndoManagerImpl.undo(UndoManagerImpl.java:94) ~[undofx-1.2.2.jar:?]
	at org.fxmisc.richtext.model.UndoActions.undo(UndoActions.java:19) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.richtext.StyledTextAreaBehavior.lambda$static$4(StyledTextAreaBehavior.java:70) ~[richtextfx-0.7-M5.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputMapTemplate.lambda$consume$32(InputMapTemplate.java:107) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.PatternActionTemplate.lambda$null$44(InputMapTemplate.java:242) ~[wellbehavedfx-0.3.jar:?]
	at java.util.Optional.map(Optional.java:215) ~[?:1.8.0_144]
	at org.fxmisc.wellbehaved.event.template.PatternActionTemplate.lambda$getInputHandlerTemplateMap$45(InputMapTemplate.java:242) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputHandlerTemplateMap.lambda$sequence$39(InputHandlerTemplateMap.java:25) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputHandlerTemplateMap.lambda$sequence$39(InputHandlerTemplateMap.java:24) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputMapTemplate$2.lambda$null$35(InputMapTemplate.java:180) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputHandlerTemplateMap.lambda$sequence$39(InputHandlerTemplateMap.java:24) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputMapTemplate$1.lambda$null$30(InputMapTemplate.java:92) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputHandlerTemplateMap.lambda$sequence$39(InputHandlerTemplateMap.java:24) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputHandlerTemplateMap.lambda$sequence$39(InputHandlerTemplateMap.java:24) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputMapTemplate$1.lambda$null$30(InputMapTemplate.java:92) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputHandlerTemplateMap.lambda$sequence$39(InputHandlerTemplateMap.java:24) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.template.InputMapTemplate$HandlerTemplateConsumer$1.lambda$accept$29(InputMapTemplate.java:36) ~[wellbehavedfx-0.3.jar:?]
	at org.fxmisc.wellbehaved.event.InputHandler.handle(InputHandler.java:15) ~[wellbehavedfx-0.3.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[jfxrt.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[jfxrt.jar:?]
	at javafx.scene.Scene$KeyHandler.process(Scene.java:3964) ~[jfxrt.jar:?]
	at javafx.scene.Scene$KeyHandler.access$1800(Scene.java:3910) ~[jfxrt.jar:?]
	at javafx.scene.Scene.impl_processKeyEvent(Scene.java:2040) ~[jfxrt.jar:?]
	at javafx.scene.Scene$ScenePeerListener.keyEvent(Scene.java:2501) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$null$300(EmbeddedScene.java:310) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_144]
	at com.sun.javafx.tk.quantum.EmbeddedScene.lambda$keyEvent$301(EmbeddedScene.java:296) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_144]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
```"Add undo functionality to the source tab"Fixes #3170 The problem here, as far as I understand, was that the undo didn't happen on the FXApplication thread.

On top of that, I found the the source tab isn't integrated in the undo framework at all, so I have added this as well. However, it doesn't work problem-free. It seems that the FX CodeArea consumes undo events as well. So when you hit undo in the sourcetab, the CodeArea does the undo and then the UndoManager tries to do it again and fails. It has no consequence, though, apart from an exception, the undo happens anyway.

Since this is an improvement (add undo to source tab again), I would like to merge this even if it's not perfect. I have zero time to dig deeper into these FX problems, and I assume that no one else will do it. So, we can just merge the current state. 

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard08/31/17, 11:00:42 AM
3190.03203Deleting a group via groups interface does not remove that group reference from BibTex source"JabRef 4.0-dev
Linux 4.4.0-92-generic amd64
Java 1.8.0_131

Steps to reproduce:

1. Open group interface. (Groups -> toggle groups interface)
2. Create a group
3. Add an item to the group
4. Right click on the group in the group interface -> remove group and subgroups

The group gets removed but the reference to it in the BibTeX source of each item that was in the group does not. (i.e. groups = {abc}).
This causes an unstable state where jabref might freeze if you try adding that item to another group because of a null pointer.

 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception Occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException: null"This is a bug. It is reproducible. While removing or changing group name from entry editor works fine but from groups menu it shows unexpected behaviour.  =||= When groups are removed, also remove them from entries"Fixes #3190

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard09/14/17, 11:50:12 AM
3204Drop latex editor support"Fixes #3204 
This removes  LatexEditor support (""Push to LatexEditor"") in JabRef. 

As stated in #3199 the last update to LatexEditor was made in 2009 (see http://www.latexeditor.org/news.html ) and the software can be considered outdated.

I removed LatexEditor from the applications list in PushToApplications class. I deleted the PushToLatexEditor class since it is now unused.
gradlew check was successful.

I am new here (first pull request) and also still fairly new to Java, so any c&c would be greatly appreciated. Especially let me know if either the practice of commits or this request is not up-to-standard :)

Cheers,
Ben

edit: 
removed LatexEditor from Preferences and corrected the URL link style in Changelog :)"Benjamin KöhlerBKDevelop09/08/17, 05:34:14 PM
3208.03210Description of LinkedFiles is not synced to the bibtex code/database "Existing files and descriptions are shown, but not changed on editing.

Follow up from  https://github.com/JabRef/jabref/issues/2930#issuecomment-328354137"Add file description to gui and fix sync bug"Fixes #3208





<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr09/20/17, 08:26:23 AM
2471.03285SAO/NASA ADS Bibcode Web Search"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef version 3.8.1 on Windows 7
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->

After version 3.6; ADS Bibcode fetcher returns abstract text as left-aligned. However, v3.6 was returning abstract text as justified. It was more readable previous version 3.6 than now it has.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

""We could also take this as a chance to implement the new API 
Refs https://github.com/adsabs/adsabs-dev-api/issues/30 =||= "Fix #2471: remove line breaks from abstracts in ADS fetcher"<!-- describe the changes you have made here: what, why, ... -->

Fixes #2471 by removing all new line characters from the abstracts.

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez10/12/17, 02:53:27 AM
3280.03288"When PDF file is highlighted without any comment, File annotations display ""N/A"", it is better to leave it empty""<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef version 4.0<!-- version as shown in the about box --> on Windows 10<!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... --> 
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->

Just as the following screenshot, N/A seems a little intrusive for users.

![na](https://user-images.githubusercontent.com/13306020/31342889-974cc6c4-ad40-11e7-8f71-24f902598c74.png)

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->"And on the left panel, I do think it is best to display the so-called `Marking`, and try to remove `CRLF`/`\n`/`\r`'s from the `Marking` content. =||= @psychelzh @tobiasdiez  I'll be happy to take this. Please assign it to me =||= @PammyS nice to hear! If you have any questions, feel free to ask here. I can't assign you to this issue since you have not made any contribution before. =||= I am not sure if we can remove these line breaks from the extracted markings, as it is quite unclear if they come from line break in the paper or from a new paragraph... However, who has a marking spanning several paragraphs or headings? =||= I tend to suggest that the line breaks can be safely removed. Just as you put, few people will try to mark several paragraphs; and if so, they can also be merged, can't they? @lynyus  =||= The `N/A` string is now removed, but the line breaks of the marking are still there. By the way, in https://github.com/JabRef/jabref/pull/3285 I added a new formatter that removes line breaks. So one just needs to run it on the marking.  =||= Did you mean that users can remove the line breaks mannually in future releases? But how can that be done? =||= Empty String instead of N/A in file annotations"Resolves #3280

@JabRef/developers Any votes against this? @lynyus "Stefan Kolbstefan-kolb10/12/17, 02:49:08 AM
3255.03293"import: file open dialog should have ""supported formates"" filetype""Using 4.0 stable with Windows 10.

The file open dialog while import should have a ""supported formates"" filetype. The list of supported file types is quite long and it costs time to find the correct type.""File open dialog should have ""supported formates"" file type""Resolves #3255 

![image](https://user-images.githubusercontent.com/2141507/31504861-c3689474-af73-11e7-9914-efd019b4ea3d.png)
"Stefan Kolbstefan-kolb10/13/17, 02:05:16 PM
3294.03299Jabref freezes after merging of entries"JabRef version JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar on Ubuntu 16.04


I had a bibliography entry and I tried to update its info based on the doi. After I choose what to keep from which side the program freezes on the replace original entry. This has happened also before on previous 4.0 / 4.1 versions, but its the first time I have the dump file.
Additionally, irrelevant of the log file the db is a shared database also backed up on a local file.

<details>
  <summary>Log File</summary>
AI: INFO 12-10-2017 20:54, 20: Configuration file has been successfully found as resource
20:54:11.904 [AWT-EventQueue-0] INFO  org.jabref.logic.importer.OpenDatabase - Opening: /xxx/xxx/xxx/Jabref.bib
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case
log4j:WARN No appenders could be found for logger (io.netty.util.internal.logging.InternalLoggerFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
21:02:17.214 [pool-3-thread-4] WARN  org.jabref.logic.net.URLDownload - Fix SSL exceptions by accepting ALL certificates
Oct 12, 2017 9:09:52 PM com.google.common.eventbus.EventBus$LoggingHandler handleException
SEVERE: Exception thrown by subscriber method listen(org.jabref.model.entry.event.EntryChangedEvent) on subscriber org.jabref.gui.entryeditor.EntryEditor[,0,460,1605x406,layout=java.awt.BorderLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=] when dispatching event: org.jabref.model.entry.event.FieldChangedEvent@42a4643b
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:236)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator$VetoableSubListDecorator.clear(VetoableListDecorator.java:529)
	at com.sun.javafx.binding.ContentBinding$ListContentBinding.onChanged(ContentBinding.java:114)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:439)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:417)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.publishNotifications(MemoizationList.java:58)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.access$300(MemoizationList.java:30)
	at org.reactfx.collection.MemoizationListImpl.sourceChanged(MemoizationList.java:89)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.SuspendableBase.resume(SuspendableBase.java:64)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.MultiGuard.close(Guard.java:83)
	at org.reactfx.Suspendable$1.resumeSource(Suspendable.java:118)
	at org.reactfx.Suspendable$1.suspendSource(Suspendable.java:104)
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18)
	at org.reactfx.EventStreams$3.lambda$observeInputs$0(EventStreams.java:105)
	at org.reactfx.value.ChangeListenerWrapper.accept(Val.java:786)
	at org.reactfx.util.AbstractReducingStreamNotifications.lambda$head$0(NotificationAccumulator.java:248)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.value.ValBase.invalidate(ValBase.java:32)
	at org.reactfx.SuspendableBoolean.release(SuspendableBoolean.java:24)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.Suspendable.suspendWhile(Suspendable.java:49)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.update(GenericEditableStyledDocumentBase.java:222)
	at org.reactfx.util.Tuple3.exec(Tuple3.java:43)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.replace(GenericEditableStyledDocumentBase.java:129)
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.replace(SimpleEditableStyledDocument.java:7)
	at org.fxmisc.richtext.GenericStyledArea.replace(GenericStyledArea.java:1302)
	at org.fxmisc.richtext.GenericStyledArea.replaceText(GenericStyledArea.java:1297)
	at org.fxmisc.richtext.model.EditActions.clear(EditActions.java:140)
	at org.jabref.gui.entryeditor.SourceTab.updateSourcePane(SourceTab.java:74)
	at org.jabref.gui.entryeditor.EntryEditor.listen(EntryEditor.java:237)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)
	at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)
	at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)
	at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)
	at com.google.common.eventbus.EventBus.post(EventBus.java:217)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:429)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:448)
	at org.jabref.gui.mergeentries.MergeFetchedEntryDialog$ReplaceAction.actionPerformed(MergeFetchedEntryDialog.java:137)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2236)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2294)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)
	at java.awt.Container.dispatchEventImpl(Container.java:2280)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)
	at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:184)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:229)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:227)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:227)
	at java.awt.Dialog.show(Dialog.java:1084)
	at java.awt.Component.show(Component.java:1671)
	at java.awt.Component.setVisible(Component.java:1623)
	at java.awt.Window.setVisible(Window.java:1014)
	at java.awt.Dialog.setVisible(Dialog.java:1005)
	at org.jabref.gui.mergeentries.FetchAndMergeWorker.done(FetchAndMergeWorker.java:67)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

</details>""I don't believe that I actually get the proper message when the program freezes. Today after a merge I got the following log (which in my eyes sees similar) but the program DID NOT freeze. It continued. 
<details>
  <summary>Log File</summary>
```
AI: INFO 13-10-2017 16:25, 20: Configuration file has been successfully found as resource
16:25:05.465 [AWT-EventQueue-0] INFO  org.jabref.logic.importer.OpenDatabase - Opening: /home/gerassimos/Documents/Jabref.bib
log4j:WARN No appenders could be found for logger (com.microsoft.applicationinsights.core.dependencies.http.client.protocol.RequestAddCookies).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case
16:26:21.623 [pool-3-thread-4] ERROR org.jabref.logic.util.io.CiteKeyBasedFileFinder - Problem in finding files
java.nio.file.NoSuchFileException: /mnt/cheal/mnt/herbopublic/Bibliography/papers
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144) ~[?:1.8.0_144]
	at sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99) ~[?:1.8.0_144]
	at java.nio.file.Files.readAttributes(Files.java:1737) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.getAttributes(FileTreeWalker.java:219) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:276) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:322) ~[?:1.8.0_144]
	at java.nio.file.FileTreeIterator.<init>(FileTreeIterator.java:72) ~[?:1.8.0_144]
	at java.nio.file.Files.find(Files.java:3687) ~[?:1.8.0_144]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findFilesByExtension(CiteKeyBasedFileFinder.java:91) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findAssociatedFiles(CiteKeyBasedFileFinder.java:42) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.FileFinder.findAssociatedFiles(FileFinder.java:23) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.findAssociatedNotLinkedFiles(LinkedFilesEditorViewModel.java:165) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.lambda$bindToEntry$3(LinkedFilesEditorViewModel.java:150) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.BackgroundTask.call(BackgroundTask.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423) [jfxrt.jar:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_144]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
16:26:34.412 [pool-3-thread-1] ERROR org.jabref.logic.util.io.CiteKeyBasedFileFinder - Problem in finding files
java.nio.file.NoSuchFileException: /mnt/cheal/mnt/herbopublic/Bibliography/papers
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144) ~[?:1.8.0_144]
	at sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99) ~[?:1.8.0_144]
	at java.nio.file.Files.readAttributes(Files.java:1737) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.getAttributes(FileTreeWalker.java:219) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:276) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:322) ~[?:1.8.0_144]
	at java.nio.file.FileTreeIterator.<init>(FileTreeIterator.java:72) ~[?:1.8.0_144]
	at java.nio.file.Files.find(Files.java:3687) ~[?:1.8.0_144]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findFilesByExtension(CiteKeyBasedFileFinder.java:91) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findAssociatedFiles(CiteKeyBasedFileFinder.java:42) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.FileFinder.findAssociatedFiles(FileFinder.java:23) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.findAssociatedNotLinkedFiles(LinkedFilesEditorViewModel.java:165) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.lambda$bindToEntry$3(LinkedFilesEditorViewModel.java:150) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.BackgroundTask.call(BackgroundTask.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423) [jfxrt.jar:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_144]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
Oct 13, 2017 4:27:08 PM com.google.common.eventbus.EventBus$LoggingHandler handleException
SEVERE: Exception thrown by subscriber method listen(org.jabref.model.entry.event.EntryChangedEvent) on subscriber org.jabref.gui.entryeditor.EntryEditor[,0,460,1605x406,layout=java.awt.BorderLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=] when dispatching event: org.jabref.model.entry.event.FieldChangedEvent@5d09343d
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:236)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator$VetoableSubListDecorator.clear(VetoableListDecorator.java:529)
	at com.sun.javafx.binding.ContentBinding$ListContentBinding.onChanged(ContentBinding.java:114)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:439)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:417)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.publishNotifications(MemoizationList.java:58)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.access$300(MemoizationList.java:30)
	at org.reactfx.collection.MemoizationListImpl.sourceChanged(MemoizationList.java:89)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.SuspendableBase.resume(SuspendableBase.java:64)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.MultiGuard.close(Guard.java:83)
	at org.reactfx.Suspendable$1.resumeSource(Suspendable.java:118)
	at org.reactfx.Suspendable$1.suspendSource(Suspendable.java:104)
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18)
	at org.reactfx.EventStreams$3.lambda$observeInputs$0(EventStreams.java:105)
	at org.reactfx.value.ChangeListenerWrapper.accept(Val.java:786)
	at org.reactfx.util.AbstractReducingStreamNotifications.lambda$head$0(NotificationAccumulator.java:248)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.value.ValBase.invalidate(ValBase.java:32)
	at org.reactfx.SuspendableBoolean.release(SuspendableBoolean.java:24)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.Suspendable.suspendWhile(Suspendable.java:49)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.update(GenericEditableStyledDocumentBase.java:222)
	at org.reactfx.util.Tuple3.exec(Tuple3.java:43)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.replace(GenericEditableStyledDocumentBase.java:129)
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.replace(SimpleEditableStyledDocument.java:7)
	at org.fxmisc.richtext.GenericStyledArea.replace(GenericStyledArea.java:1302)
	at org.fxmisc.richtext.GenericStyledArea.replaceText(GenericStyledArea.java:1297)
	at org.fxmisc.richtext.model.EditActions.clear(EditActions.java:140)
	at org.jabref.gui.entryeditor.SourceTab.updateSourcePane(SourceTab.java:74)
	at org.jabref.gui.entryeditor.EntryEditor.listen(EntryEditor.java:237)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)
	at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)
	at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)
	at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)
	at com.google.common.eventbus.EventBus.post(EventBus.java:217)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:429)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:448)
	at org.jabref.gui.mergeentries.MergeFetchedEntryDialog$ReplaceAction.actionPerformed(MergeFetchedEntryDialog.java:137)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2236)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2294)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)
	at java.awt.Container.dispatchEventImpl(Container.java:2280)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)
	at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:184)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:229)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:227)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:227)
	at java.awt.Dialog.show(Dialog.java:1084)
	at java.awt.Component.show(Component.java:1671)
	at java.awt.Component.setVisible(Component.java:1623)
	at java.awt.Window.setVisible(Window.java:1014)
	at java.awt.Dialog.setVisible(Dialog.java:1005)
	at org.jabref.gui.mergeentries.FetchAndMergeWorker.done(FetchAndMergeWorker.java:67)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

16:27:08.377 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IndexOutOfBoundsException: 1509 not in [0, 1]
	at org.reactfx.util.Lists.checkPosition(Lists.java:110) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.util.Lists.checkPosition(Lists.java:105) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.util.FingerTree$NonEmptyFingerTree.locateProgressively(FingerTree.java:51) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.ReadOnlyStyledDocument$Pos.offsetBy(ReadOnlyStyledDocument.java:378) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.ReadOnlyStyledDocument.offsetToPosition(ReadOnlyStyledDocument.java:207) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.offsetToPosition(GenericEditableStyledDocumentBase.java:119) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.offsetToPosition(SimpleEditableStyledDocument.java:7) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.lambda$new$7(GenericStyledArea.java:664) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val$2.computeValue(Val.java:705) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.getValue(ValBase.java:17) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.newObserver(ValBase.java:40) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.newObserver(ValBase.java:8) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:110) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addListener(Val.java:70) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.observeInvalidations(Val.java:432) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.MappedVal.connect(MappedVal.java:28) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.observeInputs(ValBase.java:26) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.observeInvalidations(Val.java:61) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val$1.observeInputs(Val.java:104) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.EventStream.subscribe(EventStream.java:53) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.SuspendableBase.observeInputs(SuspendableBase.java:49) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addListener(Val.java:70) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val$2.connect(Val.java:693) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.observeInputs(ValBase.java:26) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addListener(Val.java:80) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.EventStreams$3.observeInputs(EventStreams.java:106) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.EventStream.subscribe(EventStream.java:53) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.createCell(GenericStyledArea.java:1375) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.lambda$new$13(GenericStyledArea.java:760) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellPool.getCell(CellPool.java:20) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellListManager.cellForItem(CellListManager.java:75) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.collection.MappedList.get(MappedList.java:27) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.collection.MemoizationListImpl.get(MemoizationList.java:99) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellListManager.getCell(CellListManager.java:64) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellPositioner.getSizedCell(CellPositioner.java:129) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellPositioner.placeStartAt(CellPositioner.java:95) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:183) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.Navigator.visit(Navigator.java:111) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:49) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:67) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
	at org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:165) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Scene.doLayoutPass(Scene.java:552) ~[jfxrt.jar:?]
	at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2397) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.Toolkit.lambda$runPulse$30(Toolkit.java:355) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_144]
	at com.sun.javafx.tk.Toolkit.runPulse(Toolkit.java:354) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:381) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:510) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:490) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.lambda$runToolkit$404(QuantumToolkit.java:319) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$49(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
AI: INFO 13-10-2017 16:25, 20: Configuration file has been successfully found as resource
16:25:05.465 [AWT-EventQueue-0] INFO  org.jabref.logic.importer.OpenDatabase - Opening: /home/gerassimos/Documents/Jabref.bib
log4j:WARN No appenders could be found for logger (com.microsoft.applicationinsights.core.dependencies.http.client.protocol.RequestAddCookies).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case
16:26:21.623 [pool-3-thread-4] ERROR org.jabref.logic.util.io.CiteKeyBasedFileFinder - Problem in finding files
java.nio.file.NoSuchFileException: /mnt/cheal/mnt/herbopublic/Bibliography/papers
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144) ~[?:1.8.0_144]
	at sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99) ~[?:1.8.0_144]
	at java.nio.file.Files.readAttributes(Files.java:1737) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.getAttributes(FileTreeWalker.java:219) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:276) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:322) ~[?:1.8.0_144]
	at java.nio.file.FileTreeIterator.<init>(FileTreeIterator.java:72) ~[?:1.8.0_144]
	at java.nio.file.Files.find(Files.java:3687) ~[?:1.8.0_144]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findFilesByExtension(CiteKeyBasedFileFinder.java:91) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findAssociatedFiles(CiteKeyBasedFileFinder.java:42) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.FileFinder.findAssociatedFiles(FileFinder.java:23) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.findAssociatedNotLinkedFiles(LinkedFilesEditorViewModel.java:165) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.lambda$bindToEntry$3(LinkedFilesEditorViewModel.java:150) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.BackgroundTask.call(BackgroundTask.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423) [jfxrt.jar:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_144]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
16:26:34.412 [pool-3-thread-1] ERROR org.jabref.logic.util.io.CiteKeyBasedFileFinder - Problem in finding files
java.nio.file.NoSuchFileException: /mnt/cheal/mnt/herbopublic/Bibliography/papers
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_144]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileAttributeViews$Basic.readAttributes(UnixFileAttributeViews.java:55) ~[?:1.8.0_144]
	at sun.nio.fs.UnixFileSystemProvider.readAttributes(UnixFileSystemProvider.java:144) ~[?:1.8.0_144]
	at sun.nio.fs.LinuxFileSystemProvider.readAttributes(LinuxFileSystemProvider.java:99) ~[?:1.8.0_144]
	at java.nio.file.Files.readAttributes(Files.java:1737) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.getAttributes(FileTreeWalker.java:219) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.visit(FileTreeWalker.java:276) ~[?:1.8.0_144]
	at java.nio.file.FileTreeWalker.walk(FileTreeWalker.java:322) ~[?:1.8.0_144]
	at java.nio.file.FileTreeIterator.<init>(FileTreeIterator.java:72) ~[?:1.8.0_144]
	at java.nio.file.Files.find(Files.java:3687) ~[?:1.8.0_144]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findFilesByExtension(CiteKeyBasedFileFinder.java:91) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.CiteKeyBasedFileFinder.findAssociatedFiles(CiteKeyBasedFileFinder.java:42) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.logic.util.io.FileFinder.findAssociatedFiles(FileFinder.java:23) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.findAssociatedNotLinkedFiles(LinkedFilesEditorViewModel.java:165) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.fieldeditors.LinkedFilesEditorViewModel.lambda$bindToEntry$3(LinkedFilesEditorViewModel.java:150) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.BackgroundTask.call(BackgroundTask.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:63) [JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423) [jfxrt.jar:?]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_144]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_144]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_144]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
Oct 13, 2017 4:27:08 PM com.google.common.eventbus.EventBus$LoggingHandler handleException
SEVERE: Exception thrown by subscriber method listen(org.jabref.model.entry.event.EntryChangedEvent) on subscriber org.jabref.gui.entryeditor.EntryEditor[,0,460,1605x406,layout=java.awt.BorderLayout,alignmentX=0.0,alignmentY=0.0,border=,flags=9,maximumSize=,minimumSize=,preferredSize=] when dispatching event: org.jabref.model.entry.event.FieldChangedEvent@5d09343d
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:236)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator$VetoableSubListDecorator.clear(VetoableListDecorator.java:529)
	at com.sun.javafx.binding.ContentBinding$ListContentBinding.onChanged(ContentBinding.java:114)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:439)
	at org.reactfx.collection.ChangeListenerWrapper.onChange(LiveList.java:417)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.publishNotifications(MemoizationList.java:58)
	at org.reactfx.collection.MemoizationListImpl$MemoizedView.access$300(MemoizationList.java:30)
	at org.reactfx.collection.MemoizationListImpl.sourceChanged(MemoizationList.java:89)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.collection.MappedList.sourceChanged(MappedList.java:41)
	at org.reactfx.util.ListNotifications.lambda$takeHead$0(NotificationAccumulator.java:317)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.SuspendableBase.resume(SuspendableBase.java:64)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.MultiGuard.close(Guard.java:83)
	at org.reactfx.Suspendable$1.resumeSource(Suspendable.java:118)
	at org.reactfx.Suspendable$1.suspendSource(Suspendable.java:104)
	at org.reactfx.util.NonAccumulativeStreamNotifications.lambda$head$0(NotificationAccumulator.java:134)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.ProperEventStream.emit(ProperEventStream.java:18)
	at org.reactfx.EventStreams$3.lambda$observeInputs$0(EventStreams.java:105)
	at org.reactfx.value.ChangeListenerWrapper.accept(Val.java:786)
	at org.reactfx.util.AbstractReducingStreamNotifications.lambda$head$0(NotificationAccumulator.java:248)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:68)
	at org.reactfx.ObservableBase.notifyObservers(ObservableBase.java:57)
	at org.reactfx.value.ValBase.invalidate(ValBase.java:32)
	at org.reactfx.SuspendableBoolean.release(SuspendableBoolean.java:24)
	at org.reactfx.CloseableOnceGuard.close(Guard.java:49)
	at org.reactfx.Suspendable.suspendWhile(Suspendable.java:49)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.update(GenericEditableStyledDocumentBase.java:222)
	at org.reactfx.util.Tuple3.exec(Tuple3.java:43)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.replace(GenericEditableStyledDocumentBase.java:129)
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.replace(SimpleEditableStyledDocument.java:7)
	at org.fxmisc.richtext.GenericStyledArea.replace(GenericStyledArea.java:1302)
	at org.fxmisc.richtext.GenericStyledArea.replaceText(GenericStyledArea.java:1297)
	at org.fxmisc.richtext.model.EditActions.clear(EditActions.java:140)
	at org.jabref.gui.entryeditor.SourceTab.updateSourcePane(SourceTab.java:74)
	at org.jabref.gui.entryeditor.EntryEditor.listen(EntryEditor.java:237)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:91)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:150)
	at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:76)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:399)
	at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:71)
	at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:116)
	at com.google.common.eventbus.EventBus.post(EventBus.java:217)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:429)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:448)
	at org.jabref.gui.mergeentries.MergeFetchedEntryDialog$ReplaceAction.actionPerformed(MergeFetchedEntryDialog.java:137)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2236)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2294)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4888)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4525)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4466)
	at java.awt.Container.dispatchEventImpl(Container.java:2280)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)
	at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:184)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:229)
	at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:227)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:227)
	at java.awt.Dialog.show(Dialog.java:1084)
	at java.awt.Component.show(Component.java:1671)
	at java.awt.Component.setVisible(Component.java:1623)
	at java.awt.Window.setVisible(Window.java:1014)
	at java.awt.Dialog.setVisible(Dialog.java:1005)
	at org.jabref.gui.mergeentries.FetchAndMergeWorker.done(FetchAndMergeWorker.java:67)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

16:27:08.377 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IndexOutOfBoundsException: 1509 not in [0, 1]
	at org.reactfx.util.Lists.checkPosition(Lists.java:110) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.util.Lists.checkPosition(Lists.java:105) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.util.FingerTree$NonEmptyFingerTree.locateProgressively(FingerTree.java:51) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.ReadOnlyStyledDocument$Pos.offsetBy(ReadOnlyStyledDocument.java:378) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.ReadOnlyStyledDocument.offsetToPosition(ReadOnlyStyledDocument.java:207) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.offsetToPosition(GenericEditableStyledDocumentBase.java:119) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.offsetToPosition(SimpleEditableStyledDocument.java:7) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.lambda$new$7(GenericStyledArea.java:664) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val$2.computeValue(Val.java:705) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.getValue(ValBase.java:17) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.newObserver(ValBase.java:40) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.newObserver(ValBase.java:8) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:110) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addListener(Val.java:70) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.observeInvalidations(Val.java:432) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.MappedVal.connect(MappedVal.java:28) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.observeInputs(ValBase.java:26) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.observeInvalidations(Val.java:61) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val$1.observeInputs(Val.java:104) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.EventStream.subscribe(EventStream.java:53) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.SuspendableBase.observeInputs(SuspendableBase.java:49) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addListener(Val.java:70) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val$2.connect(Val.java:693) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.ValBase.observeInputs(ValBase.java:26) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.value.Val.addListener(Val.java:80) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.EventStreams$3.observeInputs(EventStreams.java:106) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.EventStream.subscribe(EventStream.java:53) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.createCell(GenericStyledArea.java:1375) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.richtext.GenericStyledArea.lambda$new$13(GenericStyledArea.java:760) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellPool.getCell(CellPool.java:20) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellListManager.cellForItem(CellListManager.java:75) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.collection.MappedList.get(MappedList.java:27) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.reactfx.collection.MemoizationListImpl.get(MemoizationList.java:99) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellListManager.getCell(CellListManager.java:64) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellPositioner.getSizedCell(CellPositioner.java:129) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.CellPositioner.placeStartAt(CellPositioner.java:95) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:183) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.Navigator.visit(Navigator.java:111) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:49) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:67) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
	at org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:165) ~[JabRef-4.1-dev--snapshot--2017-10-10--fix3235--a43057b72.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Scene.doLayoutPass(Scene.java:552) ~[jfxrt.jar:?]
	at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2397) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.Toolkit.lambda$runPulse$30(Toolkit.java:355) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_144]
	at com.sun.javafx.tk.Toolkit.runPulse(Toolkit.java:354) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:381) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:510) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:490) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.lambda$runToolkit$404(QuantumToolkit.java:319) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$49(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_144]
```
</details> =||= `org.jabref.logic.util.io.CiteKeyBasedFileFinder - Problem in finding files java.nio.file.NoSuchFileException: /mnt/cheal/mnt/herbopublic/Bibliography/papers at `

=> Seems like there is a problem with finding the path when Auto file link is triggered
And the first log states some problem with the fx thread
 =||= Hi, could you please test with the current version from here?
http://builds.jabref.org/mergeFreeze/ =||= First of all I would like to thank you all, for the hard work you are doing on Jabref.
based on @Siedlerchr's point I now knew what exactly was the problem (the network drive was sometimes off as it seems). Therefore I test-drived the fix with a normal and a ""broken"" network drive around 5 times. The fix seems to work in all cases. You can close this bug. =||= Thanks for the extensive testing! =||= "Fix exception/freezing on EntryChangedEvent in Entry Editor"
Fixes #3294  Digging down in the log file I found that the problem is that the sourceTab.update is not executed in the FXThread. This could also be 

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr10/14/17, 07:05:24 PM
3264.03303"Unable to ""open folder"" in case of filename with spaces""JabRef version 4.00 on CentOS 7.1

Expected:
When selecting the ""Open folder"" from the entry context menu, the folder containing the article should open.

What Happens:
Jabref opens a lot of locations based on the number of words in the name. Every word in the name is appended to the root location and get opened in Nautilus. 
For instance - if the file name is ""someone2010 - A Sample file.pdf"" saved in ~/, then the following folder will be invoked - 

~/someone2010
~/A
~/Sample
...

Steps to reproduce:
1. Create a BibTeX entry.
2. Attach a file with space in the name
3. Right-click on the entry, Select ""Open Folder"" or Ctrl + Shift + O""@lynyus Maybe the file path needs to be in quotes? `cmd = ""nautilus "" + filePath;` -> Linux.java l.59. Might also be the case for the other open commands in linux. =||= Thank you for your report :+1:
This should be fixed in current `nautilus-space-fp`. Please try the latest build from http://builds.jabref.org/nautilus-space-fp. =||= Great! Thank you :+1:  =||= "Open Unix filenames with spaces"Resolves #3264
We need to check if we need to escape the other unix paths too."Stefan Kolbstefan-kolb11/23/17, 08:37:09 AM
3307.03308Cannot resolve '\textendash', etc. when displaying article title"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef version `4.0`<!-- version as shown in the about box --> on Windows 10<!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->

See the following screenshot. `\textendash` cannot be resolved to the corresponding character.

![image](https://user-images.githubusercontent.com/13306020/31583271-bd65aa0e-b1ca-11e7-8d63-6a282aaa4f71.png)

![image](https://user-images.githubusercontent.com/13306020/31584134-f5601196-b1da-11e7-9504-fa87875c7413.png)


<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->""Maybe other `LaTex` [Text commands (encoding)](http://tex.loria.fr/ctan-doc/macros/latex/doc/html/usrguide/node28.html) are not resolved, either. =||= For the record, this is not a problem in latex2unicode which translates the `\textendash` correctly. I guess this s a part of the html translation for the preview. =||= Yeah, you are right.
![image](https://user-images.githubusercontent.com/13306020/31586301-9b2011dc-b201-11e7-9644-220b48b2eae1.png)
 =||= I added the command to the conversion table. Could you please check out the version here: http://builds.jabref.org/textendash/ and let me know if the problem is resolved at your end? =||= Thank you, and I will test it tomorrow, because it is too late here in China. =||= Great, it works! Here is a screenshot. BTW, will all the encoding symbols be supported now?
![image](https://user-images.githubusercontent.com/13306020/31592237-64bed580-b259-11e7-829e-2b0c28786d40.png)
 =||= It's a bit difficult to say what all means here, since we don't really know what is missing.

Could you perhaps provide a list of encoding symbols that you want, but which do not work at the moment? With such a list, it should be no big hassle to complete the implementation. =||= No more wrongly encoding ones encountered, only some supported ones, say `\textquotedblleft` and `\textquotedblright`. I guess there could be a complete list in the `LaTex` documentation, e.g. [one](http://tex.loria.fr/ctan-doc/macros/latex/doc/html/usrguide/node28.html) that I had found and posted above, but would it be a huge work? =||= We're trying to minimize developer time consumption :) Hence, it would be cool if someone just checks which of the things listed on the page you you linked are missing.

But overall there are not too many symbols, so this should be doable. =||= It would be so kind of you if they are all supported! 👍  =||= @psychelzh If you find symbols that are not working, then you can help us and provide a list in the form
` {""unicode character"", ""html macro"", ""$\\latex command$""},`
similar to https://github.com/JabRef/jabref/pull/3308/files#diff-6b1e5b042a6b79fceea700ac0592dbd0R297. Thanks! =||= No problem, I am very glad to do this! 😄  =||= I have tested the `{\textquotesingle}` conversion newly generated developing version
```
JabRef 4.1-dev--snapshot--2017-12-07--master--0ee2090ad
Windows 10 10.0 amd64 
Java 1.8.0_151
```

I checked that this version should have included #3487, but, unfortunately, `{\textquotesingle}` cannot be converted to `'` in the html preview. I wonder whether the lines that I have added really works or not. If not, what should be done? @lenhard @tobiasdiez 

![default](https://user-images.githubusercontent.com/13306020/33720392-c6f4d42a-db9e-11e7-8bcc-c376c490dc79.jpg)



 =||= @psychelzh I had a look at this and actually the mapping in your PR has not been correct, we should have tested this more. When adding the mapping at this stage, we no longer need brackets or backslashes.

I have fixed the mapping in #3496 and added a test for it as well. With that setting the conversion works for me. Let's wait until this is reviewed and then it should be in master soon. =||= Okay. I think I know what happened now. And thank you for your quick response! @lenhard  =||= @lenhard I have tested the conversion on the snapshot version of

```
JabRef 4.1-dev--snapshot--2017-12-08--master--6f39151a7
Windows 10 10.0 amd64 
Java 1.8.0_151
```

But to my surprise, the html preview cannot convert `&apos;` to `'`, either. This is my screenshot.

![image](https://user-images.githubusercontent.com/13306020/33792556-5ee306cc-dcde-11e7-8ed8-26c21c1ccd42.png)
 =||= @lenhard Sorry to disturb you again. Any suggestions about the failure of conversion from `&apos;` to `'`? =||= @psychelzh Oh my, it seems that our preview component does not handle `&apos;` correctly... 

From https://www.w3.org/TR/xhtml1/#C_16

> The named character reference `&apos;` (the apostrophe, U+0027) was introduced in XML 1.0 but does not appear in HTML. Authors should therefore use `&#39;` instead of `&apos;` to work as expected in HTML 4 user agents.

I've done this replacement in the current dev version and now the apostrophe is displayed correctly in the preview. One day, we'll have a preview panel with better HTML capabilities. =||= @lenhard Maybe the better rendering comes already with #3504. =||= @tobiasdiez Yes indeed. I just tested the PR and there `apos;` works as desired. We can change the mapping back in that PR, or keep it as it is. =||= "Add \textendash to the html conversion table"Fixes #3307 by adding \textendash to the html conversion table

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard10/16/17, 09:06:11 AM
3342.03343Exception in opening bib file"
At some point during the 4.1dev development this started to happen. The problem is not there with 4.0
and was not there with 4.1dev until a couple of weeks ago.

It is unusual in that the exception only occurs when giving a bib file to jabref e.g.

 java -jar /usr/share/jabref VU_bibtex_master.bib

When you just start jabref via ""java -jar /usr/share/jabref"" it starts and then I can open the bib file fine.
It does not depend on the name or content of the bib file. I tried java 1.8.0_151 or _152. The error is:

=======================
12:10:20.060 [AWT-EventQueue-0] INFO  org.jabref.logic.importer.OpenDatabase - Opening: VU_bibtex_master.bib
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case
12:10:21.285 [AWT-EventQueue-0] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.NullPointerException: null
        at org.jabref.gui.util.FileUpdateMonitor.addListenerForFile(FileUpdateMonitor.java:75) ~[jabref:?]
        at org.jabref.collab.DatabaseChangeMonitor.lambda$new$0(DatabaseChangeMonitor.java:40) ~[jabref:?]
        at java.util.Optional.ifPresent(Optional.java:159) ~[?:1.8.0_162-ea]
        at org.jabref.collab.DatabaseChangeMonitor.<init>(DatabaseChangeMonitor.java:38) ~[jabref:?]
        at org.jabref.gui.BasePanel.<init>(BasePanel.java:231) ~[jabref:?]
        at org.jabref.gui.JabRefFrame.addTab(JabRefFrame.java:1598) ~[jabref:?]
        at org.jabref.gui.JabRefFrame.addParserResult(JabRefFrame.java:1301) ~[jabref:?]
        at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:134) ~[jabref:?]
        at org.jabref.JabRefGUI.<init>(JabRefGUI.java:63) ~[jabref:?]
        at org.jabref.JabRefMain.lambda$start$1(JabRefMain.java:150) ~[jabref:?]
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue.access$500(EventQueue.java:97) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue$3.run(EventQueue.java:709) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue$3.run(EventQueue.java:703) ~[?:1.8.0_162-ea]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_162-ea]
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) ~[?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_162-ea]
^C$ export JAVA_HOME=/usr/java/jdk1.8.0;java -jar /usr/share/jabref VU_bibtex_master.bib   
12:19:40.295 [AWT-EventQueue-0] INFO  org.jabref.logic.importer.OpenDatabase - Opening: VU_bibtex_master.bib
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case
12:19:41.395 [AWT-EventQueue-0] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.NullPointerException: null
        at org.jabref.gui.util.FileUpdateMonitor.addListenerForFile(FileUpdateMonitor.java:75) ~[jabref:?]
        at org.jabref.collab.DatabaseChangeMonitor.lambda$new$0(DatabaseChangeMonitor.java:40) ~[jabref:?]
        at java.util.Optional.ifPresent(Optional.java:159) ~[?:1.8.0_162-ea]
        at org.jabref.collab.DatabaseChangeMonitor.<init>(DatabaseChangeMonitor.java:38) ~[jabref:?]
        at org.jabref.gui.BasePanel.<init>(BasePanel.java:231) ~[jabref:?]
        at org.jabref.gui.JabRefFrame.addTab(JabRefFrame.java:1598) ~[jabref:?]
        at org.jabref.gui.JabRefFrame.addParserResult(JabRefFrame.java:1301) ~[jabref:?]
        at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:134) ~[jabref:?]
        at org.jabref.JabRefGUI.<init>(JabRefGUI.java:63) ~[jabref:?]
        at org.jabref.JabRefMain.lambda$start$1(JabRefMain.java:150) ~[jabref:?]
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue.access$500(EventQueue.java:97) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue$3.run(EventQueue.java:709) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue$3.run(EventQueue.java:703) ~[?:1.8.0_162-ea]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_162-ea]
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) ~[?:1.8.0_162-ea]
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) ~[?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_162-ea]
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_162-ea]
"PS: Using Linux x86_64 =||= Thanks for your report, I could reproduce the issue under Win and prepared a fix. Will be in the next dev version, as soon as #3343  is merged  =||= Fix NPE when calling with bib file as cmd argument"Fixes #3342, follow up issue from #3325 
Use toAbsolutePath before calling of getParent

<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr10/24/17, 06:55:46 PM
2802.03351cite command is not employed"JabRef 4.0.0-beta
Linux 4.10.11-200.fc25.x86_64 amd64
Java 1.8.0_131

Maybe I got something wrong: I opened the preferences | External Programmes and specified ""Cite command"" as \autocite. But Ctrl+K still gets me \cite. I would have assumed, Ctrl+K should get my specified cite command now.""Well actually Ctrl+K is just the shortcut for putting \cite{bibtexkey} into your clipboard. At the moment this cannot be customized.
If I get it right, the preferences concerning external programs is about pushing bibtex keys into the auto-completion of the external editors.

@JabRef/Developers: what do you think about this use case: should we merge this functionality, such that CTRL+K can be customized? =||= It should use the same (!) setting. Not two different settings

Am 04.05.2017 14:03 schrieb ""Linus Dietz"" <notifications@github.com>:

> Well actually Ctrl+K is just the shortcut for putting \cite{bibtexkey}
> into your clipboard. At the moment this cannot be customized.
> If I get it right, the preferences concerning external programs is about
> pushing bibtex keys into the auto-completion of the external editors.
>
> @JabRef/Developers: what do you think about this use case: should we merge
> this functionality, such that CTRL+K can be customized?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/2802#issuecomment-299165730>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTafvfTcLkp4-d_9XEHgrh34gJNGiIJks5r2b5qgaJpZM4NLR7K>
> .
>
 =||= thanks @simonharrer 

my status is: running JabRef with  ./gradlew run does not change the behaviour that I originally reported

JabRef 4.0.0-dev
Linux 4.13.8-200.fc26.x86_64 i386 
Java 1.8.0_144
 =||= @ilippert  You have to use the latest dev version: http://builds.jabref.org/master/ =||= sorry, yes, it works wonderfully! (forgot git updating) =||= "Use CITE_COMMENT not only for external latex editors but also for cop…"…y to clipboard

Fixes #2802

#hacktoberfest"Simon Harrersimonharrer10/26/17, 07:22:37 AM
3144.03362Journal abreviation and integrity check"JabRef version 3.8.2 and 4.0 on macOS 10.12

Using integrity check on my database, I noticed that as soon as there is a point (""."") in the journal's name, it creates a warning when I check the integrity of my database. I do not know if it is really a bug or a feature but it is not really convenient. For example, according to http://www.ams.org/msnhtml/serials.pdf (a good source for journal abreviations I guess)
ESAIM. Mathematical Modelling and Numerical Analysis = ESAIM Math. Model. Numer. Anal.  

but since there is a point in the full name (ESAIM.   ...) it is considered by JabRef as an abbreviation and gives a warning during integrity check. I tried to add this journal to my personal journal list but it does not change anything.

If it is not a bug, I suggest to check if it is a known full name (done in 4.0 I think) or if it is a known abbreviation, otherwise Jabref could give this kind of warning: ""journal's name not recognized"".""Integrity check ""Abbreviation Detection"" detects abbreviated names for journals and booktitles based on the internal list instead of only looking for ""."" signs. ""Fixes #3144 

#hacktoberfest"Simon Harrersimonharrer11/05/17, 07:19:06 PM
3346.03368Automatically set file links - shortcut F7 not working"**JabRef version**
JabRef 4.0
Linux 4.4.8-040408-generic amd64 
Java 1.8.0_151

**Steps to reproduce:**
1. Select an entry without the file link for which there is a matching file.
2. Press F7. The file link should be set automatically but is not.
3. Select the item from menu (Automatically set file links). The link is set correctly.
4. Press F4. The file just set opens correctly.

The button within the entry editor (Automatically set file links for this entry) is also not working.

Not sure whether this is related, but there is an exception in the log, enclosing below.
<details>
  ```
Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IndexOutOfBoundsException: 619 not in [0, 1]
	at org.reactfx.util.Lists.checkPosition(Lists.java:110)
	at org.reactfx.util.Lists.checkPosition(Lists.java:105)
	at org.reactfx.util.FingerTree$NonEmptyFingerTree.locateProgressively(FingerTree.java:51)
	at org.fxmisc.richtext.model.ReadOnlyStyledDocument$Pos.offsetBy(ReadOnlyStyledDocument.java:378)
	at org.fxmisc.richtext.model.ReadOnlyStyledDocument.offsetToPosition(ReadOnlyStyledDocument.java:207)
	at org.fxmisc.richtext.model.GenericEditableStyledDocumentBase.offsetToPosition(GenericEditableStyledDocumentBase.java:119)
	at org.fxmisc.richtext.model.SimpleEditableStyledDocument.offsetToPosition(SimpleEditableStyledDocument.java:7)
	at org.fxmisc.richtext.GenericStyledArea.lambda$new$7(GenericStyledArea.java:664)
	at org.reactfx.value.Val$2.computeValue(Val.java:705)
	at org.reactfx.value.ValBase.getValue(ValBase.java:17)
	at org.reactfx.value.ValBase.newObserver(ValBase.java:40)
	at org.reactfx.value.ValBase.newObserver(ValBase.java:8)
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:110)
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52)
	at org.reactfx.value.Val.addListener(Val.java:70)
	at org.reactfx.value.Val.observeInvalidations(Val.java:432)
	at org.reactfx.value.MappedVal.connect(MappedVal.java:28)
	at org.reactfx.value.ValBase.observeInputs(ValBase.java:26)
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108)
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100)
	at org.reactfx.value.Val.observeInvalidations(Val.java:61)
	at org.reactfx.value.Val$1.observeInputs(Val.java:104)
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108)
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100)
	at org.reactfx.EventStream.subscribe(EventStream.java:53)
	at org.reactfx.SuspendableBase.observeInputs(SuspendableBase.java:49)
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108)
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52)
	at org.reactfx.value.Val.addListener(Val.java:70)
	at org.reactfx.value.Val$2.connect(Val.java:693)
	at org.reactfx.value.ValBase.observeInputs(ValBase.java:26)
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108)
	at org.reactfx.value.Val.addInvalidationObserver(Val.java:52)
	at org.reactfx.value.Val.addListener(Val.java:80)
	at org.reactfx.EventStreams$3.observeInputs(EventStreams.java:106)
	at org.reactfx.ObservableBase.addObserver(ObservableBase.java:108)
	at org.reactfx.ObservableBase.observe(ObservableBase.java:100)
	at org.reactfx.EventStream.subscribe(EventStream.java:53)
	at org.fxmisc.richtext.GenericStyledArea.createCell(GenericStyledArea.java:1375)
	at org.fxmisc.richtext.GenericStyledArea.lambda$new$13(GenericStyledArea.java:760)
	at org.fxmisc.flowless.CellPool.getCell(CellPool.java:20)
	at org.fxmisc.flowless.CellListManager.cellForItem(CellListManager.java:75)
	at org.reactfx.collection.MappedList.get(MappedList.java:27)
	at org.reactfx.collection.MemoizationListImpl.get(MemoizationList.java:99)
	at org.fxmisc.flowless.CellListManager.getCell(CellListManager.java:64)
	at org.fxmisc.flowless.CellPositioner.getSizedCell(CellPositioner.java:129)
	at org.fxmisc.flowless.CellPositioner.placeStartAt(CellPositioner.java:95)
	at org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:183)
	at org.fxmisc.flowless.Navigator.visit(Navigator.java:111)
	at org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:49)
	at org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:67)
	at javafx.scene.Parent.layout(Parent.java:1087)
	at org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:165)
	at javafx.scene.Parent.layout(Parent.java:1087)
	at javafx.scene.Parent.layout(Parent.java:1093)
	at javafx.scene.Parent.layout(Parent.java:1093)
	at javafx.scene.Parent.layout(Parent.java:1093)
	at javafx.scene.Parent.layout(Parent.java:1093)
	at javafx.scene.Scene.doLayoutPass(Scene.java:552)
	at javafx.scene.Scene$ScenePulseListener.pulse(Scene.java:2397)
	at com.sun.javafx.tk.Toolkit.lambda$runPulse$29(Toolkit.java:398)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.Toolkit.runPulse(Toolkit.java:397)
	at com.sun.javafx.tk.Toolkit.firePulse(Toolkit.java:424)
	at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:510)
	at com.sun.javafx.tk.quantum.QuantumToolkit.pulse(QuantumToolkit.java:490)
	at com.sun.javafx.tk.quantum.QuantumToolkit.lambda$runToolkit$403(QuantumToolkit.java:319)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)
  ```
</details>""There are also some additional reports regarding this functionality in the discourse Forum: http://discourse.jabref.org/t/automatically-set-file-links-f7-not-working-any-more/859 =||= I see this too: #2985 =||= Hi,
could you please try the current version from here?
http://builds.jabref.org/autofilelink/ =||= "Rework AutoSetFileLinks"Fixes #3346 

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr10/31/17, 10:09:21 AM
3376.03378"4.0 Crossref Websearch fails with ""Parser error""""JabRef version 
```
JabRef 4.0
Linux 4.12.12-gentoo+ amd64 
Java 1.8.0_152
```

Steps to reproduce:
search for 10.1103/PhysRevLett.119.177201
![selection_369](https://user-images.githubusercontent.com/298682/32225308-f9e659ac-be44-11e7-905d-9849edc8fe66.png)

![selection_368](https://user-images.githubusercontent.com/298682/32225318-06442a94-be45-11e7-9556-d568ddf263be.png)
```

14:11:58.427 [JabRef CachedThreadPool] ERROR org.jabref.gui.importer.fetcher.SearchBasedEntryFetcher - Error while fetching from Crossref
org.jabref.logic.importer.FetcherException: An internal parser error occurred
	at org.jabref.logic.importer.SearchBasedParserFetcher.performSearch(SearchBasedParserFetcher.java:72) ~[JabRef-4.0.jar:?]
	at org.jabref.gui.importer.fetcher.SearchBasedEntryFetcher.processQuery(SearchBasedEntryFetcher.java:37) ~[JabRef-4.0.jar:?]
	at org.jabref.gui.importer.fetcher.GeneralFetcher.lambda$actionPerformed$5(GeneralFetcher.java:216) ~[JabRef-4.0.jar:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_152]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_152]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_152]
Caused by: org.jabref.logic.importer.ParseException: CrossRef API JSON format has changed
	at org.jabref.logic.importer.fetcher.CrossRef.jsonItemToBibEntry(CrossRef.java:131) ~[JabRef-4.0.jar:?]
	at org.jabref.logic.importer.fetcher.CrossRef.lambda$getParser$3(CrossRef.java:88) ~[JabRef-4.0.jar:?]
	at org.jabref.logic.importer.SearchBasedParserFetcher.performSearch(SearchBasedParserFetcher.java:60) ~[JabRef-4.0.jar:?]
	... 5 more
Caused by: org.json.JSONException: JSONObject[""title""] not found.
	at org.json.JSONObject.get(JSONObject.java:471) ~[JabRef-4.0.jar:?]
	at org.json.JSONObject.getJSONArray(JSONObject.java:618) ~[JabRef-4.0.jar:?]
	at org.jabref.logic.importer.fetcher.CrossRef.jsonItemToBibEntry(CrossRef.java:113) ~[JabRef-4.0.jar:?]
	at org.jabref.logic.importer.fetcher.CrossRef.lambda$getParser$3(CrossRef.java:88) ~[JabRef-4.0.jar:?]
	at org.jabref.logic.importer.SearchBasedParserFetcher.performSearch(SearchBasedParserFetcher.java:60) ~[JabRef-4.0.jar:?]
	... 5 more

```""Thanks for bringing this up!

The error message reads `CrossRef API JSON format has changed`. I wish they would do this less frequently... Anyway, we will have to adapt the code to conform to the new format. =||= Appologies to CrossRef, they did not change the format. The error was actually that the search returned a few entries from CrossRef that do have titles and our code wasn't able to handle that.

I submitted a fix as pull request, it should be merged soon. =||= "Treat CrossRef titles as optional"Fixes #3376

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard10/31/17, 06:59:47 PM
3391.03393Preferences: Metal Look and Feel is listed twice"```
JabRef 4.1-dev--snapshot--2017-11-01--master--84e90719a
Linux 4.12.12-gentoo+ amd64 
Java 1.8.0_152
```

![selection_384](https://user-images.githubusercontent.com/298682/32316492-b5dd4104-bfb0-11e7-893c-c09f706fcc36.png)""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= fixed, thank you.

![selection_389](https://user-images.githubusercontent.com/298682/32369800-f38259ec-c08a-11e7-9c44-3eed0d95115d.png)
 =||= "Don't list same look and feels more than once"Fixes #3391 
Tested with Xubuntu 16.10

<!-- describe the changes you have made here: what, why, ... -->

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr11/03/17, 10:12:48 AM
3347.03401NPE when saving new database with entries  (DatabaseChangeMonitor is null)"Create a  new database
Copy/Paste some bibtex entry
Hit CTRL +S

```
17:07:25.852 [AWT-EventQueue-0] ERROR org.jabref.gui.BasePanel - runCommand error: null
java.lang.NullPointerException: null
	at org.jabref.gui.BasePanel.isUpdatedExternally(BasePanel.java:1823) ~[bin/:?]
	at org.jabref.gui.exporter.SaveDatabaseAction.checkExternalModification(SaveDatabaseAction.java:403) ~[bin/:?]
	at org.jabref.gui.exporter.SaveDatabaseAction.init(SaveDatabaseAction.java:90) ~[bin/:?]
	at org.jabref.gui.BasePanel.runWorker(BasePanel.java:250) ~[bin/:?]
	at org.jabref.gui.exporter.SaveDatabaseAction.runCommand(SaveDatabaseAction.java:285) ~[bin/:?]
	at org.jabref.gui.exporter.SaveDatabaseAction.saveAs(SaveDatabaseAction.java:331) ~[bin/:?]
	at org.jabref.gui.exporter.SaveDatabaseAction.saveAs(SaveDatabaseAction.java:305) ~[bin/:?]
	at org.jabref.gui.exporter.SaveDatabaseAction.init(SaveDatabaseAction.java:100) ~[bin/:?]
	at org.jabref.gui.BasePanel.runWorker(BasePanel.java:250) ~[bin/:?]
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:1025) [bin/:?]
	at org.jabref.gui.JabRefFrame$GeneralAction.actionPerformed(JabRefFrame.java:2052) [bin/:?]
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022) [?:1.8.0_152]
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348) [?:1.8.0_152]
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402) [?:1.8.0_152]
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259) [?:1.8.0_152]
	at javax.swing.AbstractButton.doClick(AbstractButton.java:376) [?:1.8.0_152]
	at javax.swing.AbstractButton.doClick(AbstractButton.java:356) [?:1.8.0_152]
	at javax.swing.plaf.basic.BasicMenuItemUI$Actions.actionPerformed(BasicMenuItemUI.java:811) [?:1.8.0_152]
	at javax.swing.SwingUtilities.notifyAction(SwingUtilities.java:1663) [?:1.8.0_152]
	at javax.swing.JComponent.processKeyBinding(JComponent.java:2882) [?:1.8.0_152]
	at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(JMenuBar.java:699) [?:1.8.0_152]
	at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(JMenuBar.java:706) [?:1.8.0_152]
	at javax.swing.JMenuBar.processBindingForKeyStrokeRecursive(JMenuBar.java:706) [?:1.8.0_152]
	at javax.swing.JMenuBar.processKeyBinding(JMenuBar.java:677) [?:1.8.0_152]
	at javax.swing.KeyboardManager.fireBinding(KeyboardManager.java:307) [?:1.8.0_152]
	at javax.swing.KeyboardManager.fireKeyboardAction(KeyboardManager.java:293) [?:1.8.0_152]
	at javax.swing.JComponent.processKeyBindingsForAllComponents(JComponent.java:2974) [?:1.8.0_152]
	at javax.swing.JComponent.processKeyBindings(JComponent.java:2966) [?:1.8.0_152]
	at javax.swing.JComponent.processKeyEvent(JComponent.java:2845) [?:1.8.0_152]
	at java.awt.Component.processEvent(Component.java:6310) [?:1.8.0_152]
	at java.awt.Container.processEvent(Container.java:2237) [?:1.8.0_152]
	at java.awt.Component.dispatchEventImpl(Component.java:4889) [?:1.8.0_152]
	at java.awt.Container.dispatchEventImpl(Container.java:2295) [?:1.8.0_152]
	at java.awt.Component.dispatchEvent(Component.java:4711) [?:1.8.0_152]
	at java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1954) [?:1.8.0_152]
	at java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:806) [?:1.8.0_152]
	at java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1074) [?:1.8.0_152]
	at java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:945) [?:1.8.0_152]
	at java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:771) [?:1.8.0_152]
	at java.awt.Component.dispatchEventImpl(Component.java:4760) [?:1.8.0_152]
	at java.awt.Container.dispatchEventImpl(Container.java:2295) [?:1.8.0_152]
	at java.awt.Window.dispatchEventImpl(Window.java:2746) [?:1.8.0_152]
	at java.awt.Component.dispatchEvent(Component.java:4711) [?:1.8.0_152]
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) [?:1.8.0_152]
	at java.awt.EventQueue.access$500(EventQueue.java:97) [?:1.8.0_152]
	at java.awt.EventQueue$3.run(EventQueue.java:709) [?:1.8.0_152]
	at java.awt.EventQueue$3.run(EventQueue.java:703) [?:1.8.0_152]
	at java.security.AccessController.doPrivileged(Native Method) [?:1.8.0_152]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) [?:1.8.0_152]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90) [?:1.8.0_152]
	at java.awt.EventQueue$4.run(EventQueue.java:731) [?:1.8.0_152]
	at java.awt.EventQueue$4.run(EventQueue.java:729) [?:1.8.0_152]
	at java.security.AccessController.doPrivileged(Native Method) [?:1.8.0_152]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) [?:1.8.0_152]
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) [?:1.8.0_152]
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201) [?:1.8.0_152]
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_152]
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_152]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_152]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_152]
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_152]

```"The flaw is [here](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/BasePanel.java#L229-L231) and [here](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/BasePanel.java#L1826). On a new database with no file connected, we don't initialize `changeMonitor`. I guess we need to incluce `baseChanged` in that test but I cannot overlook the consequences, so I leave this for someone else to fix. =||= Fix NPE when saving new file"<!-- describe the changes you have made here: what, why, ... -->

Fixes #3347. No changelog entry since bug was introduced after release of 4.0.

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez11/04/17, 10:09:49 AM
3311.03403Filepath saved on Windows does not open on Linux"```
JabRef 4.0
Linux 4.10.0-37-generic amd64 
Java 1.8.0_144
```

Steps to reproduce:

1. create an idential folderstructure on Windows and on Linux (f.e. use sync-systems like: dropbox, onedrive, googledrive, owncloud)
2. JabRef on Windows&Linux must have the same ""Main file directory"" (f.e. Linux: /home/jkalliau/ownCloud and Windows: C:/Users/jkalliau/ownCloud)
3. add a PDF-File to an article in JabRef to a bibtex-file on Windows
4. try to open this PDF-File in JabRef on Linux

The problem is that Windows saves:
```
File = {:..\\..\\Literature\\DNA\\Weitere\\Bai_Martin_Scheres_Dietz_2012_PNAS.pdf:PDF},
file = {:PhDJK\\Literature\\MD\\Amber17.pdf:PDF},
```
But Linux saves as:
```
file = {:PhDJK/Literature/MD/Amber17.pdf:PDF},
```
With JabRef 3.8.2 neither Windows nor Linux had problems using different File-Structures, but now with JabRef 4 on Linux it does (JabRef can't find the file). :-(

On Windows with JabRef4.0 it still works also with Linux-Filepathes.

This bib-file has developed over some time with JabRef 3.x and it always worked to open with JabRef 3.8.2 on Windows and on Linux, also both added file-paths in a different form.

I would stay with JabRef 3.8.2, but due to [bug #2879](https://github.com/JabRef/jabref/issues/2879) I prefer JabRef 4.

Otherwise I might have to use [sed](https://en.wikipedia.org/wiki/Sed) to correct the path-mistakes.

<details>
  <summary>bib-file with filepath saved on Windows</summary>
    ```
% Encoding: UTF-8


@Article{bai2012cryo,
  Title                    = {{Cryo-EM} structure of a {3D} {DNA-origami} object},
  Author                   = {Bai, Xiao-chen and Martin, Thomas~G and Scheres, Sjors~HW and Dietz, Hendrik},
  Journal                  = {Proceedings of the National Academy of Sciences},
  Year                     = {2012},

  Month                    = dec,
  Number                   = {49},
  Pages                    = {20012--20017},
  Volume                   = {109},

  Adsnote                  = {Provided by the SAO/NASA Astrophysics Data System},
  Adsurl                   = {http://adsabs.harvard.edu/abs/2012PNAS..10920012B },
  Doi                      = {10.1073/pnas.1215713109},
  File                     = {:..\\..\\Literature\\DNA\\Weitere\\Bai_Martin_Scheres_Dietz_2012_PNAS.pdf:PDF},
  Groups                   = {DNA},
  Keywords                 = {rank2},
  Publisher                = {National Acad Sciences}
}

@Article{case2017amber,
  author  = {Case, David A and Walker, Ross C and Cheatham III, Thomas E and Simmerling, Carlos LI and Roitberg, Adrian and Merz, Kenneth M and Luo, Ray and Darden, Tom A and Wang, Junmei and Duke, Robert E and Daniel R. Roe and Scott LeGrand and Jason Swails and Andreas W. Götz and David Cerutti and Tyler Luchko and Gérald Monard and Celeste Sagui and Feng Pan and Charles Lin and Daniel Mermelstein and Pengfei Li and Alexey Onufriev and Saeed Izadi and Romain M. Wolf and Xiongwu Wu and Holger Gohlke and Nadine Homeyer and Ruxi Qi and Wesley M. Botello-Smith and Li Xiao and D’Artagnan Greene and Tim Giese and Taisung Lee and Darrin York and Jian Liu and Hai Nguyen and Igor Omelyan and Andriy Kovalenko and Peter A. Kollman and Zhang, W and others},
  title   = {Amber 2017 Reference Manual (Covers Amber16 and AmberTools17)},
  journal = {University of California, San Francisco},
  year    = {2017},
  month   = may,
  day     = {29},
  file    = {:PhDJK\\Literature\\MD\\Amber17.pdf:PDF},
  url     = {http://ambermd.org/doc12/Amber17.pdf},
}

@Comment{jabref-meta: databaseType:bibtex;}

@Comment{jabref-meta: grouping:
0 AllEntriesGroup:;
1 StaticGroup:DNA\;0\;1\;\;\;\;;
}
  ```
</details>""@Siedlerchr You have recently modified the file path serialization, right? Can you comment on this? =||= I will look into this, first guess is that the relative path is passed as
String to the open method


Am 17.10.2017 2:24 nachm. schrieb ""Jörg Lenhard"" <notifications@github.com>:

> @Siedlerchr <https://github.com/siedlerchr> You have recently modified
> the file path serialization, right? Can you comment on this?
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3311#issuecomment-337214329>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AATi5DMB-ywN5Xe5hFN5nLL69DggN50dks5stJxjgaJpZM4P6kZ8>
> .
>
 =||= @JoKalliauer We think we have a fix for this. Can you please try out the version that includes the fix, which is available here: http://builds.jabref.org/linuxlink/ and let us know if it works for you. =||= ```
JabRef 4.1-dev--snapshot--2017-11-04--linuxlink--4ffdabf5c
Linux 4.10.0-38-generic amd64 
Java 1.8.0_151
```
```
JabRef 4.1-dev--snapshot--2017-11-04--linuxlink--4ffdabf5c
Windows 7 6.1 amd64 
Java 1.8.0_152
```


Thanks now JabRef4.1LinuxLink on Windows adds forward slashes, but the file-references from my JabRef3.8-Win.bib file can still not be opened on JabRef4.1LinuxLink  on Linux, therefore I had to use the terminal-command to change the old JabRef-file:
```
sed -ri 's/  (f|F)ile[ ]+= \{:([-[:alnum:] _.\/\;\:]+)\\\\([-[:alnum:] _.\\\/\;\:\(\)]+).([[:alpha:]]{3}):(MHT|PDF|Text|JPG-Bild|Word)\},/  \1ile = \{:\2\/\3.\4:\5\},/' filename.bib
```
Therefore old JabRef3.8-files are not update-able to JabRef4.1. (only by hand or the command above)

In linuxlink seems some translation missing (see Error-Log below).

<details>
  <summary>Error-Log</summary>

```
Warning: no message translation for ""Show console output (only necessary when the launcher is used)"" for locale de
Opening: /home/jkalliau/ownCloud/Master/BP2/literature.bib
Opening: /home/jkalliau/ownCloud/Master/jk/JK2EuroC/a4sample.bib
Opening: /home/jkalliau/ownCloud/PhDJK/LaTeX/Style/LiteratureJK.bib
Warning: no message translation for ""JabRef cannot access the file because it is being used by another process."" for locale de
Warning: no message translation for ""JabRef cannot access the file because it is being used by another process."" for locale de
Warning: no message translation for ""JabRef cannot access the file because it is being used by another process."" for locale de
Warning: no message translation for ""JabRef cannot access the file because it is being used by another process."" for locale de
Warning: no message translation for ""JabRef cannot access the file because it is being used by another process."" for locale de
Warning: no message translation for ""JabRef cannot access the file because it is being used by another process."" for locale de
```

</details> =||= Thanks for your feedback!
You could run a cleanup operation to rename the files, that should then set the files links correctly.

Regarding the translations:
They will usually be added before the next release, (at least the German, to avoid double work during dev).
The changes are now in the master. So you can switch to that to stay on top with actual changes  =||= @lenhard: Please remove the  `waiting-for-feedback`-label, or is there feedback missing? =||= @JoKalliauer Nope, I've removed the label. =||= " Replace LinkedFiles backslashes with forward slashes"Follow up from #3364 (damn case sensitivy) 
Fixes #3311 

<!-- describe the changes you have made here: what, why, ... -->

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr11/18/17, 02:17:01 PM
3389.03404[Fatal Error] :1:1: Content is not allowed in prolog."In version 
```
JabRef 4.1-dev--snapshot--2017-10-31--master--1ebdea452
Linux 4.12.12-gentoo+ amd64 
Java 1.8.0_152
```
I get on stderr:
```
[Fatal Error] :1:1: Content is not allowed in prolog.
```

Reproduce:
when simply opening the window by clicking on the menu `Options/Preferences`

```
12:20:10.329 [AWT-EventQueue-0] WARN  org.jabref.logic.l10n.Localization - Warning: could not get message translation for ""Create_blank_entry_linking_the_PDF"" for locale en
12:20:10.329 [AWT-EventQueue-0] WARN  org.jabref.logic.l10n.Localization - Warning: could not get message translation for ""Create_entry_based_on_XMP-metadata"" for locale en
12:20:10.329 [AWT-EventQueue-0] WARN  org.jabref.logic.l10n.Localization - Warning: could not get message translation for ""Create_entry_based_on_content"" for locale en
12:20:10.329 [AWT-EventQueue-0] WARN  org.jabref.logic.l10n.Localization - Warning: could not get message translation for ""Only_attach_PDF"" for locale en
[Fatal Error] :1:1: Content is not allowed in prolog.
12:20:11.300 [SwingWorker-pool-4-thread-7] ERROR org.jabref.logic.citationstyle.CitationStyle - Error while parsing source
org.xml.sax.SAXParseException: Content is not allowed in prolog.
	at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:257) ~[?:1.8.0_152]
	at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:339) ~[?:1.8.0_152]
	at org.jabref.logic.citationstyle.CitationStyle.createCitationStyleFromSource(CitationStyle.java:66) [JabRef--master--latest.jar:?]
	at org.jabref.logic.citationstyle.CitationStyle.createCitationStyleFromFile(CitationStyle.java:98) [JabRef--master--latest.jar:?]
	at org.jabref.logic.citationstyle.CitationStyle.discoverCitationStyles(CitationStyle.java:126) [JabRef--master--latest.jar:?]
	at org.jabref.gui.preftabs.PreviewPrefsTab$1.doInBackground(PreviewPrefsTab.java:201) [JabRef--master--latest.jar:?]
	at org.jabref.gui.preftabs.PreviewPrefsTab$1.doInBackground(PreviewPrefsTab.java:198) [JabRef--master--latest.jar:?]
	at javax.swing.SwingWorker$1.call(SwingWorker.java:295) [?:1.8.0_152]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_152]
	at javax.swing.SwingWorker.run(SwingWorker.java:334) [?:1.8.0_152]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_152]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_152]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_152]
[Fatal Error] :1:1: Content is not allowed in prolog.
12:20:11.310 [SwingWorker-pool-4-thread-7] ERROR org.jabref.logic.citationstyle.CitationStyle - Error while parsing source
org.xml.sax.SAXParseException: Content is not allowed in prolog.
```"Strip invalid prolog when loading CitationStyles"Fixes #3389 by skipping invalid parts of the prolog of citation styles.

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard11/05/17, 07:20:29 PM
3046.03405Duplicates of fields corrupt Entry Editor display"data in a shorthand field gets displayed in a keywords field.

JabRef version 

JabRef 4.0-dev--snapshot--2017-07-19--master--2f12fecfb
Linux 4.8.0-58-generic amd64 
Java 1.8.0_131


Steps to reproduce:

1. In biblatex source tab, enter:

```
@Book{pys,
  title     = {Pātañjalayogaśāstra},
  shorthand = {PYŚ},
}
```

2. switch to the Optional fields tab

3. looks like the attached image.

It's a bit odd too, because the field data area for ""shorthand"" doesn't display.



![screenshot from 2017-07-24 17-20-55](https://user-images.githubusercontent.com/762246/28530554-847ce5ee-7094-11e7-873e-545d5e006591.png)""I cannot reproduce this on Win7 with current master. Could this be related in some way to a custom field configuration? When I add a `@Book` entry in biblatex mode, then the ""Keywords"" field is displayed in the General tab and not in the Optional fields tab. Moreover, I have no Shorthand field anywhere in the entry editor. =||=  Yes, I had diddled with ""Customize the entry types.""  And by mistake, I had ""pubstate"" twice in the Book entry type (as is seen in my screenshot above).  When I deleted the extra ""pubstate"", the display looks correct, and the shorthand displays correctly in the Shorthand field. 

So, it's a recondite buglet.  If you have a field twice in your data entry tab, then you may see artefacts.

Thanks,
Dominik

JabRef 4.0-dev--snapshot--2017-07-19--master--2f12fecfb
Linux 4.8.0-58-generic amd64 
Java 1.8.0_131


![screenshot from 2017-07-24 20-50-06](https://user-images.githubusercontent.com/762246/28539371-b41f5a3a-70b1-11e7-81dc-e0dfaa1c80a8.png)
 =||= Thanks for the update! 
As you noted this is only a minor aspect which will not affect many users - thus, I don't add it to the 4.0 milestone. =||= "Fix #3046: No longer allow duplicate fields in customized entry types"<!-- describe the changes you have made here: what, why, ... -->
Fixes #3046 (problems in the entry editor caused by duplicate fields in customized entry types) by no longer allowing duplicate fields, i.e. moved from List to Set.

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez11/06/17, 03:43:08 AM
3414.03420Error in SyncLang.py"@LinusDietz  Could you please take a look?
```
$ ./gradlew localizationUpdate
Starting a Gradle Daemon (subsequent builds will be faster)
Task :jmh Last added: null
:localizationUpdate  File ""E:\workspace\JabRef\jabref\scripts\syncLang.py"", line 17
    def get_current_branch(self) -> str:
                                ^
SyntaxError: mismatched input '-' expecting COLON
 FAILED

FAILURE: Build failed with an exception.


```""You need at least python 3.6 =||= Ah okay, then please adapt the  localization.gradle file, because it currently is configured to run in jython - which does not support python 3.6
https://stackoverflow.com/questions/11767713/adding-script-to-build-gradle =||= yep, I'm already on it... =||= "Backport of syncLang to python2"fixes #3414,

makes https://github.com/JabRef/jabref/pull/3415 obsolete..."Linus DietzLinusDietz11/09/17, 02:10:44 PM
3485.03486Check Integrity: Linking to EntryEditor problems"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.1dev (2017-12-03--master--56aa71671) on Windows 10

Steps to reproduce:

1. Perform an integrity check
2. double-click on various entries in the issue list

Causes concurrentModificationExceptions and IllegalStateExceptions as something is not correctly executed on the JavaFX Thread. See log below...

<details>
  <summary>Log File</summary>
  
  ```
Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.util.ConcurrentModificationException
	at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
	at java.util.AbstractList$Itr.next(Unknown Source)
	at org.jabref.gui.entryeditor.EntryEditor.setFocusToField(EntryEditor.java:501)
	at org.jabref.gui.BasePanel.lambda$editEntryByIdAndFocusField$34(BasePanel.java:1222)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.BasePanel.editEntryByIdAndFocusField(BasePanel.java:1218)
	at org.jabref.gui.actions.IntegrityCheckAction.lambda$actionPerformed$0(IntegrityCheckAction.java:134)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.mouseReleased(Unknown Source)
	at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
	at java.awt.Component.processMouseEvent(Unknown Source)
	at javax.swing.JComponent.processMouseEvent(Unknown Source)
	at java.awt.Component.processEvent(Unknown Source)
	at java.awt.Container.processEvent(Unknown Source)
	at java.awt.Component.dispatchEventImpl(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Window.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.util.ConcurrentModificationException
	at java.util.AbstractList$Itr.checkForComodification(Unknown Source)
	at java.util.AbstractList$Itr.next(Unknown Source)
	at org.jabref.gui.entryeditor.EntryEditor.setFocusToField(EntryEditor.java:501)
	at org.jabref.gui.BasePanel.lambda$editEntryByIdAndFocusField$34(BasePanel.java:1222)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.BasePanel.editEntryByIdAndFocusField(BasePanel.java:1218)
	at org.jabref.gui.actions.IntegrityCheckAction.lambda$actionPerformed$0(IntegrityCheckAction.java:134)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.mouseReleased(Unknown Source)
	at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
	at java.awt.Component.processMouseEvent(Unknown Source)
	at javax.swing.JComponent.processMouseEvent(Unknown Source)
	at java.awt.Component.processEvent(Unknown Source)
	at java.awt.Container.processEvent(Unknown Source)
	at java.awt.Component.dispatchEventImpl(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Window.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.FieldsEditorTab.bindToEntry(FieldsEditorTab.java:221)
	at org.jabref.gui.entryeditor.EntryEditorTab.notifyAboutFocus(EntryEditorTab.java:35)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:186)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at org.jabref.gui.entryeditor.EntryEditor.setFocusToField(EntryEditor.java:504)
	at org.jabref.gui.BasePanel.lambda$editEntryByIdAndFocusField$34(BasePanel.java:1222)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.BasePanel.editEntryByIdAndFocusField(BasePanel.java:1218)
	at org.jabref.gui.actions.IntegrityCheckAction.lambda$actionPerformed$0(IntegrityCheckAction.java:134)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.mouseReleased(Unknown Source)
	at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
	at java.awt.Component.processMouseEvent(Unknown Source)
	at javax.swing.JComponent.processMouseEvent(Unknown Source)
	at java.awt.Component.processEvent(Unknown Source)
	at java.awt.Container.processEvent(Unknown Source)
	at java.awt.Component.dispatchEventImpl(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Window.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.FieldsEditorTab.bindToEntry(FieldsEditorTab.java:221)
	at org.jabref.gui.entryeditor.EntryEditorTab.notifyAboutFocus(EntryEditorTab.java:35)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:186)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at org.jabref.gui.entryeditor.EntryEditor.setFocusToField(EntryEditor.java:504)
	at org.jabref.gui.BasePanel.lambda$editEntryByIdAndFocusField$34(BasePanel.java:1222)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.BasePanel.editEntryByIdAndFocusField(BasePanel.java:1218)
	at org.jabref.gui.actions.IntegrityCheckAction.lambda$actionPerformed$0(IntegrityCheckAction.java:134)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.mouseReleased(Unknown Source)
	at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
	at java.awt.Component.processMouseEvent(Unknown Source)
	at javax.swing.JComponent.processMouseEvent(Unknown Source)
	at java.awt.Component.processEvent(Unknown Source)
	at java.awt.Container.processEvent(Unknown Source)
	at java.awt.Component.dispatchEventImpl(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Window.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.updateContent(TabPaneSkin.java:1581)
	at com.sun.javafx.scene.control.skin.TabPaneSkin$TabContentRegion.lambda$new$491(TabPaneSkin.java:1548)
	at javafx.beans.WeakInvalidationListener.invalidated(WeakInvalidationListener.java:83)
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.Tab.setContent(Tab.java:344)
	at org.jabref.gui.entryeditor.FieldsEditorTab.bindToEntry(FieldsEditorTab.java:221)
	at org.jabref.gui.entryeditor.EntryEditorTab.notifyAboutFocus(EntryEditorTab.java:35)
	at org.jabref.gui.entryeditor.EntryEditor.lambda$new$1(EntryEditor.java:186)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74)
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735)
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:656)
	at org.jabref.gui.entryeditor.EntryEditor.setFocusToField(EntryEditor.java:504)
	at org.jabref.gui.BasePanel.lambda$editEntryByIdAndFocusField$34(BasePanel.java:1222)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.BasePanel.editEntryByIdAndFocusField(BasePanel.java:1218)
	at org.jabref.gui.actions.IntegrityCheckAction.lambda$actionPerformed$0(IntegrityCheckAction.java:134)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.fireValueChanged(Unknown Source)
	at javax.swing.DefaultListSelectionModel.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.setValueIsAdjusting(Unknown Source)
	at javax.swing.plaf.basic.BasicTableUI$Handler.mouseReleased(Unknown Source)
	at java.awt.AWTEventMulticaster.mouseReleased(Unknown Source)
	at java.awt.Component.processMouseEvent(Unknown Source)
	at javax.swing.JComponent.processMouseEvent(Unknown Source)
	at java.awt.Component.processEvent(Unknown Source)
	at java.awt.Container.processEvent(Unknown Source)
	at java.awt.Component.dispatchEventImpl(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
	at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
	at java.awt.Container.dispatchEventImpl(Unknown Source)
	at java.awt.Window.dispatchEventImpl(Unknown Source)
	at java.awt.Component.dispatchEvent(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.awt.EventQueue$4.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)

  ```
</details>"Might be fixed by #3427. =||= Fix threading issues "Fixes #3485 and #3435 

<!-- describe the changes you have made here: what, why, ... -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr12/05/17, 11:41:24 AM
3490.03494PDF import is running outside of JavaFX Thread"java.lang.IllegalStateException: Not on FX application thread; currentThread = JabRef CachedThreadPool
...
com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173) ~[jfxrt.jar:?]
        at org.jabref.model.entry.BibEntry.setField(BibEntry.java:412) ~[main/:?]
        at org.jabref.model.entry.BibEntry.setField(BibEntry.java:438) ~[main/:?]
        at org.jabref.gui.externalfiles.DroppedFileHandler.doLink(DroppedFileHandler.java:452) ~[main/:?]
        at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:213) ~[main/:?]
        at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:173) ~[main/:?]
        at org.jabref.pdfimport.PdfImporter.importPdfFilesInternal(PdfImporter.java:135) ~[main/:?]
        at org.jabref.pdfimport.PdfImporter.importPdfFiles(PdfImporter.java:89) ~[main/:?]
        at org.jabref.gui.groups.EntryTableTransferHandler.lambda$handleDraggedFiles$0(EntryTableTransferHandler.java:306) ~[main/:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_152]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_152]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_152] 

Steps:

1. Download PDF
2. Drop it to the entry table
3. Say ""Only import PDF""
  ![grafik](https://user-images.githubusercontent.com/1366654/33706626-fcfc9b3a-db34-11e7-8645-a4b0b3bf3a03.png)
4. Move file and let it rename
  ![grafik](https://user-images.githubusercontent.com/1366654/33706646-1149c0ae-db35-11e7-971e-771af580627e.png)
5. File is moved, but not renamed.

<details>

```
java.lang.IllegalStateException: Not on FX application thread; currentThread = JabRef CachedThreadPool
        at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279) ~[jfxrt.jar:?]
        at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423) ~[jfxrt.jar:?]
        at javafx.scene.Parent$2.onProposedChange(Parent.java:367) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108) ~[jfxrt.jar:?]
        at com.sun.javafx.scene.control.skin.LabeledSkinBase.updateChildren(LabeledSkinBase.java:580) ~[jfxrt.jar:?]
        at com.sun.javafx.scene.control.skin.LabeledSkinBase.handleControlPropertyChanged(LabeledSkinBase.java:181) ~[jfxrt.jar:?]
        at com.sun.javafx.scene.control.skin.ListCellSkin.handleControlPropertyChanged(ListCellSkin.java:49) ~[jfxrt.jar:?]
        at com.sun.javafx.scene.control.skin.BehaviorSkinBase.lambda$registerChangeListener$61(BehaviorSkinBase.java:197) ~[jfxrt.jar:?]
        at com.sun.javafx.scene.control.MultiplePropertyChangeListenerHandler$1.changed(MultiplePropertyChangeListenerHandler.java:55) ~[jfxrt.jar:?]
        at javafx.beans.value.WeakChangeListener.changed(WeakChangeListener.java:89) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
        at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105) ~[jfxrt.jar:?]
        at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112) ~[jfxrt.jar:?]
        at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146) ~[jfxrt.jar:?]
        at javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82) ~[jfxrt.jar:?]
        at javafx.beans.property.ObjectProperty.setValue(ObjectProperty.java:69) ~[jfxrt.jar:?]
        at javafx.scene.control.Labeled.setGraphic(Labeled.java:423) ~[jfxrt.jar:?]
        at org.jabref.gui.util.ViewModelListCellFactory$1.updateItem(ViewModelListCellFactory.java:130) ~[main/:?]
        at javafx.scene.control.ListCell.updateItem(ListCell.java:471) ~[jfxrt.jar:?]
        at javafx.scene.control.ListCell.lambda$new$160(ListCell.java:167) ~[jfxrt.jar:?]
        at javafx.collections.WeakListChangeListener.onChanged(WeakListChangeListener.java:88) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73) ~[jfxrt.jar:?]
        at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233) ~[jfxrt.jar:?]
        at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482) ~[jfxrt.jar:?]
        at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541) ~[jfxrt.jar:?]
        at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205) ~[jfxrt.jar:?]
        at javafx.collections.ModifiableObservableListBase.addAll(ModifiableObservableListBase.java:113) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.BidirectionalContentBinding$ListContentBinding.onChanged(BidirectionalContentBinding.java:138) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ListExpressionHelper$Generic.notifyListeners(ListExpressionHelper.java:593) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ListExpressionHelper$Generic.fireValueChangedEvent(ListExpressionHelper.java:571) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ListExpressionHelper.fireValueChangedEvent(ListExpressionHelper.java:109) ~[jfxrt.jar:?]
        at javafx.beans.property.ListPropertyBase.fireValueChangedEvent(ListPropertyBase.java:200) ~[jfxrt.jar:?]
        at javafx.beans.property.ListPropertyBase.lambda$new$39(ListPropertyBase.java:56) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(ListListenerHelper.java:164) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73) ~[jfxrt.jar:?]
        at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233) ~[jfxrt.jar:?]
        at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482) ~[jfxrt.jar:?]
        at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541) ~[jfxrt.jar:?]
        at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205) ~[jfxrt.jar:?]
        at javafx.collections.ModifiableObservableListBase.setAll(ModifiableObservableListBase.java:90) ~[jfxrt.jar:?]
        at javafx.beans.binding.ListExpression.setAll(ListExpression.java:370) ~[jfxrt.jar:?]
        at org.jabref.gui.util.BindingsHelper.lambda$bindContentBidirectional$4(BindingsHelper.java:124) ~[main/:?]
        at org.jabref.gui.util.BindingsHelper$BidirectionalListBinding.changed(BindingsHelper.java:214) ~[main/:?]
        at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
        at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(StringPropertyBase.java:103) ~[jfxrt.jar:?]
        at javafx.beans.property.StringPropertyBase.markInvalid(StringPropertyBase.java:110) ~[jfxrt.jar:?]
        at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:144) ~[jfxrt.jar:?]
        at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:49) ~[jfxrt.jar:?]
        at javafx.beans.property.StringProperty.setValue(StringProperty.java:65) ~[jfxrt.jar:?]
        at javafx.beans.property.StringProperty.setValue(StringProperty.java:57) ~[jfxrt.jar:?]
        at org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(BindingsHelper.java:186) ~[main/:?]
        at org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(BindingsHelper.java:179) ~[main/:?]
        at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
        at javafx.beans.binding.ObjectBinding.invalidate(ObjectBinding.java:172) ~[jfxrt.jar:?]
        at com.sun.javafx.binding.BindingHelperObserver.invalidated(BindingHelperObserver.java:51) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(MapListenerHelper.java:320) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115) ~[jfxrt.jar:?]
        at com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173) ~[jfxrt.jar:?]
        at org.jabref.model.entry.BibEntry.setField(BibEntry.java:412) ~[main/:?]
        at org.jabref.model.entry.BibEntry.setField(BibEntry.java:438) ~[main/:?]
        at org.jabref.gui.externalfiles.DroppedFileHandler.doLink(DroppedFileHandler.java:452) ~[main/:?]
        at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:213) ~[main/:?]
        at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:173) ~[main/:?]
        at org.jabref.pdfimport.PdfImporter.importPdfFilesInternal(PdfImporter.java:135) ~[main/:?]
        at org.jabref.pdfimport.PdfImporter.importPdfFiles(PdfImporter.java:89) ~[main/:?]
        at org.jabref.gui.groups.EntryTableTransferHandler.lambda$handleDraggedFiles$0(EntryTableTransferHandler.java:306) ~[main/:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_152]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_152]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_152]
```

</details>"Link PDF on JavaFX thread"Fixes  #3490.

There's a checkstyle problem at the moment, but is present on master. It's a false positive and we have to see how to get around that.

----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard12/07/17, 01:31:28 PM
3500.03502Importing from the ACM Digital Library hangs after selection"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [X] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.1-dev--snapshot--2017-12-08--master--6f39151a7, Linux 4.13.0-17-generic amd64, Java 1.8.0_121 on Ubuntu 17.10
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->


Steps to reproduce:

1. Search for a paper on the ACM Portal.
2. Select to import one the returned entries.

Expected result:
Entry appears in my bibliography.

Actual result:
JabRef hangs.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  10:06:08.970 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException: null     
        at org.jabref.gui.search.GlobalSearchBar.lambda$new$5(GlobalSearchBar.java:196) ~[JabRef--master--latest.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295) ~[jfxrt.jar:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_121]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294) ~[jfxrt.jar:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
        at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
        at com.sun.glass.ui.gtk.GtkApplication.lambda$null$49(GtkApplication.java:139) ~[jfxrt.jar:?]
        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]                     
File: grouptree.fxml not found, attempting with camel case                         
File: grouptree.css not found, attempting with camel case                          
10:06:44.558 [JabRef CachedThreadPool] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JabRef CachedThreadPool,6,main]
java.lang.StringIndexOutOfBoundsException: String index out of range: -1           
        at java.lang.String.substring(String.java:1960) ~[?:1.8.0_121]             
        at org.jabref.gui.importer.fetcher.ACMPortalFetcher.downloadEntryBibTeX(ACMPortalFetcher.java:325) ~[JabRef--master--latest.jar:?]
        at org.jabref.gui.importer.fetcher.ACMPortalFetcher.getEntries(ACMPortalFetcher.java:181) ~[JabRef--master--latest.jar:?]
        at org.jabref.gui.importer.fetcher.GeneralFetcher.lambda$actionPerformed$2(GeneralFetcher.java:198) ~[JabRef--master--latest.jar:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[?:1.8.0_121]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[?:1.8.0_121]
        at java.lang.Thread.run(Thread.java:745) [?:1.8.0_121]
  ```
</details>"I can only reproduce the fetcher bug itself, seems like there has been an update to the acm page  =||= The outdated jdk version could be part of the problem. The latest development snapshot should display a warning that says that you need at least 1.8.0_144. =||= update user agent and change acm to https"Fix acm fetcher
Fixes #3500 

<!-- describe the changes you have made here: what, why, ... -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr12/11/17, 09:05:16 AM
3359.03506key generator fails to parse colon"It seems that in 4.0 (Mac version), when I customize the key generator to [author][year][veryshorttitle], the generated keys will include the trailing colon if there is one in the title. It also includes other special characters like (`). 

I remember this wasn't the case in 3.6.""Could you please re-check the behavior with the most recent development version available here: http://builds.jabref.org/master/ and report what you find?

Since the release of 4.0 there have been changes in the key generation, which might also have affected this. =||= Sorry, on my mac it says things like file damaged and should be moved to trash. Your FAQ says I can avoid this by changing the security setting to allow apps from 'anywhere', but I don't have this option on my OS (Sierra, 10.12.6). =||= I can verify that this happens in the latest 11-13 build on Windows:
```
JabRef 4.1-dev--snapshot--2017-11-13--master--c1d425a31
Windows 10 10.0 amd64 
Java 1.8.0_152
```

Not only the special characters like colon or '`' are kept in the key phrase, I also think it is not necessary to keep the curly brackets in the file name when the PDF file is downloaded from the fetcher automatically based on the bibtex information (the curly brackets are from the title entry in the bibtex code). But this could be a separate issue.  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= "Fix #3359: Automatically remove colon and apostrophe from key pattern"<!-- describe the changes you have made here: what, why, ... -->

Fixes #3359. Colons and apostrophes are now removed from the generated key pattern.
I also refactored the key generator, mainly converting the static methods to instance methods.

----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez01/02/18, 08:19:10 PM
3493.03507It should be possible to delete an attached file"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

![grafik](https://user-images.githubusercontent.com/1366654/33706962-238c01f4-db36-11e7-94ea-104d0f905bc1.png)

There also should be a `-` icon at the right side, shouldn't it?""There never was an icon and delete via del key is already possible =||= It does not work here. You are invited to connect using Teamviewer.

> Java(TM) SE Runtime Environment (build 1.8.0_144-b01) =||= I also cannot select the second entry. Double click works.
 =||= confirmed, that's weird. It was definitely working at some recent point. So I would label it as regression bug,
 =||= 1. There was an icon `-` in the old entry editor to remove the assignment of a file.
2. DELETE key removed the assignment.
3.  Deleting a file was only possible via right-klick and delete from file system.
 =||= Okay, works as expected: Check your file dir settings:
The code checks if the file exists  in the file directories.

![grafik](https://user-images.githubusercontent.com/320228/33770000-6aae4546-dc2c-11e7-86de-d2f967fc40c6.png)

Although the gui doesn't indicate it, you can select the second entry. 
 =||= There should a log message why no popup comes.

Even if the file does not exist, it has to be possible to remove the
assignment!

Am 08.12.2017 15:30 schrieb ""Christoph"" <notifications@github.com>:

> Okay, works as expected: Check your file dir settings:
> The code checks if the file exists in the file directories.
>
> [image: grafik]
> <https://user-images.githubusercontent.com/320228/33770000-6aae4546-dc2c-11e7-86de-d2f967fc40c6.png>
>
> Although the gui doesn't indicate it, you can select the second entry.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3493#issuecomment-350276599>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTafpq7MiS-YESWF5dzvB_RaORI3ZDVks5s-UgHgaJpZM4Q5Ne0>
> .
>
 =||= Right click -> Remove file entry

2017-12-09 13:22 GMT+01:00 Oliver Kopp <notifications@github.com>:

> There should a log message why no popup comes.
>
> Even if the file does not exist, it has to be possible to remove the
> assignment!
>
> Am 08.12.2017 15:30 schrieb ""Christoph"" <notifications@github.com>:
>
> > Okay, works as expected: Check your file dir settings:
> > The code checks if the file exists in the file directories.
> >
> > [image: grafik]
> > <https://user-images.githubusercontent.com/320228/
> 33770000-6aae4546-dc2c-11e7-86de-d2f967fc40c6.png>
> >
> > Although the gui doesn't indicate it, you can select the second entry.
> >
> > —
> > You are receiving this because you authored the thread.
> > Reply to this email directly, view it on GitHub
> > <https://github.com/JabRef/jabref/issues/3493#issuecomment-350276599>,
> or mute
> > the thread
> > <https://github.com/notifications/unsubscribe-
> auth/ABTafpq7MiS-YESWF5dzvB_RaORI3ZDVks5s-UgHgaJpZM4Q5Ne0>
> > .
> >
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3493#issuecomment-350458261>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AATi5KJouCfniX6IAt0LjrpYqibQbuWKks5s-nt9gaJpZM4Q5Ne0>
> .
>
 =||= The ENTF key should work. It used so to be like that in 3.x

Am 09.12.2017 13:33 schrieb ""Christoph"" <notifications@github.com>:

> Right click -> Remove file entry
>
> 2017-12-09 13:22 GMT+01:00 Oliver Kopp <notifications@github.com>:
>
> > There should a log message why no popup comes.
> >
> > Even if the file does not exist, it has to be possible to remove the
> > assignment!
> >
> > Am 08.12.2017 15:30 schrieb ""Christoph"" <notifications@github.com>:
> >
> > > Okay, works as expected: Check your file dir settings:
> > > The code checks if the file exists in the file directories.
> > >
> > > [image: grafik]
> > > <https://user-images.githubusercontent.com/320228/
> > 33770000-6aae4546-dc2c-11e7-86de-d2f967fc40c6.png>
> > >
> > > Although the gui doesn't indicate it, you can select the second entry.
> > >
> > > —
> > > You are receiving this because you authored the thread.
> > > Reply to this email directly, view it on GitHub
> > > <https://github.com/JabRef/jabref/issues/3493#issuecomment-350276599>,
> > or mute
> > > the thread
> > > <https://github.com/notifications/unsubscribe-
> > auth/ABTafpq7MiS-YESWF5dzvB_RaORI3ZDVks5s-UgHgaJpZM4Q5Ne0>
> > > .
> > >
> >
> > —
> > You are receiving this because you commented.
> > Reply to this email directly, view it on GitHub
> > <https://github.com/JabRef/jabref/issues/3493#issuecomment-350458261>,
> or mute
> > the thread
> > <https://github.com/notifications/unsubscribe-auth/
> AATi5KJouCfniX6IAt0LjrpYqibQbuWKks5s-nt9gaJpZM4Q5Ne0>
> > .
> >
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3493#issuecomment-350458759>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTaftpPKWft6vCkN_c1HnMRk-S83MPpks5s-n4MgaJpZM4Q5Ne0>
> .
>
 =||= Will move the file exist check =||= "Add option to remove the link when file is no longer found"Fixes  #3493

When pressing the DEL key and the file can not be found, this dialog pops up and you can remove the  file from the entry


<!-- describe the changes you have made here: what, why, ... -->

 
```
Opening: X:\Users\CS\Documents\_JABREFTEMP\bibliography.bib
Opening: X:\Users\CS\Documents\_JABREFTEMP\newBiblatexTEst.bib
Could not find file 'O’Keefe2009 - Feature selection and weighting methods in sentiment analysis.pdf'.
Could not find file 'Saggion2007 - Ontology-based Information Extraction for Business Intelligence.pdf'.

```
----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr12/22/17, 10:10:28 AM
3491.03508Double click on an entry on file list should open the PDF"As is:

![grafik](https://user-images.githubusercontent.com/1366654/33706710-4557e95c-db35-11e7-87d0-c42291ebe9c6.png)

opens:

![grafik](https://user-images.githubusercontent.com/1366654/33706727-4bd06ba6-db35-11e7-9d99-fee24167e818.png)

Should be: 

- [ ] Double click directly opens the PDF
- [ ] Furthermore, there is no button to open the PDF. The Lupe searches for a PDF, but does not open one""I think  this is consistent with the 3.x version. Only in the  main table the file will be opened directly. Otherwise the ""modify file"" dialog in your screenshot pops up where you can add a description or similar  and clicking on open will open the file
Maybe we can simply add a new icon for opening the file =||= "Implement #3491: Clicking the PDF icon in the linked files editor opens the file"Resolves #3491. A click on the PDF icon on a linked file in the entry editor opens the file. This is consistent with the behavior in the main table and thus I didn't added a new button and / or changed the double-click behavior as it was suggested in the issue.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez12/10/17, 01:53:58 PM
3472.03509Default settings for filename format and autolink files don't play nice together."I ran into the need to autolink files. I had generated the bibtex keys using (the reasonable) default setting `[auth][year]`. And renamed the files using a filename format `\bibtexkey - ...`

As example consider I have following papers:

- Einstein 1902 ""Kinetische Theorie des ...
- Einstein 1902 ""Thermodynamische Theorie der...
- Einstein (year unknown) ""Ein den Elementarprozess der...
- Unknown author - unknown year ""hello...

The autogenerated keys would be ""Einstein1902"", ""Einstein1902a"", ""Einstein"", """".  The problem is that ""Einstein1902"" will try to autolink both 1902 papers.  The ""Einstein"" will try to autolink all three.  An the one with the empty key will try to autolink all of the papers.

I think it would be good to have save defaults.   

For myself I adjusted the autolink regex so that it checks for a whitespace or dot after the bibtex key - I think that might be a saver default.
However the case of empty keys still should be treated.""There is an option to autolink files only with exact matches. That should help in your case.
Regarding empty key, this should not happen =||= @Siedlerchr That would require renaming all the files to just bibtexkey and extension.  Having a little more info is nice. It's clear that I can tune it to my liking. However I would argue that the defaults should be free from such pitfalls. =||= I also think there is room for improvement, especially since we get quite a few ""bug reports"" based on this behavior. I would suggest that only files are linked that start with the key and the key is followed by some non-alphanumeric character, ie. `Einstein1902-something` is matched but `Einstein1902something` is not. =||= The names of the files I autolink either strictly follow the bibtexkey or have the bibtexkey and an extension that follows this pattern (I'm usually using this to autolink supplementary material): `Einstein1902_My_extension`

I just wanted to let you know about it, as changing the default behaviour might result in unexpected behaviour for users like me. =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= "Fixes #3472: Files starting with BibTeX key of a similar entry are no longer found by mistake"<!-- describe the changes you have made here: what, why, ... -->
Fixes #3472.
The auto-link algorithm just checked if the file starts with the BibTeX key. This leads to a lot of false positives since ""Einstein1902a.pdf"" is found for the entry ""Einstein1902"" although this pdf probably belongs to a second paper by Einstein that was published in the same year. 
This is fixed in this PR.
With the proposed implementation also the pdf file ""Einstein1902aboutSomething.pdf"" is no longer found (since there is really no possibility in telling the difference to ""Einstein1902a - a second paper.pdf""). Thus the user is advised to add some non-letter character after the key.

----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez12/23/17, 02:06:10 PM
3538.03539Custom data in Type field in techreport not stored "<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 
Originally reported in the forum:
http://discourse.jabref.org/t/content-of-field-type-disappears-when-saving/947

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

1. Create a techreport entry
2. Enter a type e.g. myCustomTypeOfReports
3. Move to other field -> Content is gone 

I suspect that it is a simliar databinding issue in relation to the date field #3483 "Fix options databinding by adding elements if they are not in the initial map"Fixes #3538 

I dunno if this is the best idea, but it works...


<!-- describe the changes you have made here: what, why, ... -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr12/17/17, 08:30:39 PM
3476.03551automatically added file link has absolute instead of relative path"- [x ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef 4.1-dev--snapshot--2017-11-30--master--d45d7ca38
Linux 3.16.0-38-generic amd64 
Java 1.8.0_151
on Mint 17 (Ubuntu 14.04)

Steps to reproduce:

1. import new entry
2. add file with bibtex key into file directory
3. open new entry in entry editor

I just switched from v4.0 to the latest development version, because Medline import did not work in v4.0 anymore. Unfortunately, now files appear to be added with absolute paths to the library. E.g., I added entry Lake2016 and Jabref now automatically adds the corresponding file as `/home/bitzer/papers/Lake2016.pdf` instead of as `Lake2016.pdf` as before. So I have to manually edit the file link to get the relative path. Is that intended behaviour and how do I get Jabref to automatically add relative links again?""Hi,
relative links are created automatically. And this depends on your settings, there are 4 settings for files:
1. Checkbox: Use bibfile as main file location -> Overwrites all other settings
2. Main file directory. globally in JabRef, valid for all files
3. Use and Library setting in the properties of the bib file: Here you can also enter relative path.
So depending on your settings, JabRef will relatvize all paths against the first found file directory.
 =||= Hi,

all of these 3 were set in Jabref 4.0 and are still set in the development version I'm using now (1. checked, 2. set to `/home/bitzer/papers` and 3. set to `/home/bitzer/papers`, too). Still, version 4.0 added relative paths while the development version adds absolute paths. =||= Is the location of the bibfile the same as /home/bitzer/papers? If not then uncheck the combobox =||= Yes, the bibfile is in /home/bitzer/papers itself. Also the issue persists in the newest version JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar =||= Ah I now can reproduce your  behavior. It is the auto link which adds it as absolute path. If you manually select the file, it is correct. I will be working on a fix for this
 =||= Cool, thank you! =||= "Make path relative when adding automatically found file"Fixes #3476

<!-- describe the changes you have made here: what, why, ... -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr12/21/17, 01:16:21 PM
2852.03553Performance problems with new groups search/filter and large databases"JabRef 4.0.0-dev--snapshot--2017-05-18--master--018173ebd
Windows 10 10.0 amd64 
Java 1.8.0_131

The newly implemented groups filter/search (https://github.com/JabRef/jabref/pull/2588) exhibits massive performance problems when used on a large database (>10,000 entries, ~1,000 static groups).

1. Open large database
2. Start to enter any term you want to search for in the ""Filter Groups"" part of the groups panel.
3. You will immediately see a massive performance decrease. It takes minutes to just complete entering the word you want to search for (because the filtering starts immediately). The groups filtering itself also takes minutes to complete. During that time JabRef behaves as if it had crashed.

This issue has been reported before (https://github.com/JabRef/jabref/pull/2588#issuecomment-283042778, https://github.com/JabRef/jabref/pull/2588#issuecomment-302629336) but I have been advised to open a new ticket so that the issue is not forgotten. ""This should be fixed in the latest development version. For a very large groups tree, the filtering process still takes a moment and is not as fluid as I would like but at least it works now. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= JabRef 4.0.0-dev--snapshot--2017-05-20--master--01e854829
Windows 10 10.0 amd64 
Java 1.8.0_131

I can confirm, that the performance has drastically improved. A group search takes no longer a couple of minutes. However, as you say, the performance is still not very high for large databases. In my case it takes 14 sec after entering a search/filter term for the group to be displayed. If you are switching often from groups to groups, I think this is a bit too much.
As a workaround: Would it be possible to not start immediately filtering/searching for groups while entering the search term? I. e., could you make the groups search/filter so that you have to press ""Enter"" to actually start the filtering/searching. This might already improve the subjective performance (?).
I would suggest to keep this issue open.

Thank you so much for your work! =||= When we are done with optimizing the entry editor, the time has come to address the performance issues in the groups panel.

I'll be so enthusiastic and add this to the 4.1 milestone. We'll see how it works out. =||= That sounds awesome: Thank you very much! =||= @AEgit To profile this, I need an example database of the size you mentioned. Can you point me to one?  =||= @halirutan I think @lenhard should still have my example database with 6,500 entries. My current one consists of over 12,000 entries, but I think the old example should be fine. Please let me know, if you don't have access to that example database - if that is not the case, I'll send you a new example database via email (for various reasons I would prefer not to make the database available to the public, so I cannot upload it here). =||= @AEgit Send me yours to my mail on GitHub. If I have time, I look into it and see if I can point out some hot spots we should look in to.  =||= @halirutan Database has been sent. Thank you for your help! =||= @AEgit @halirutan Sorry for being late. We have the prior file as well, but if you've already exchanged the new one, there's no reason to send it again, I guess. =||= I guess I found the problem and @lenhard or @tobiasdiez should be able to provide a fix easily. When I see this right, then the flaw lies [here](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/util/RecursiveTreeItem.java#L97-L109):

``` java
    private boolean showNode(T t) {
        if (filter.get() == null) {
            return true;
        }

        if (filter.get().test(t)) {
            // Node is directly matched -> so show it
            return true;
        }

        // Are there children (or children of children...) that are matched? If yes we also need to show this node
        return childrenFactory.call(t).stream().anyMatch(this::showNode);
    }
```

What happens is that every node in the groups view decides for itself if it is visible or not. To do this, intermediate nodes need to check if any of their children are visible because then, they need to be visible as well; no matter if they themselves match.

With a nested group structure of say depth 3, this means that nodes in level 1 check themselves and all their children. Despite the fact, that we now already calculated the visibility information of *all* children, each node at level 2 will do the exact same work again.

To give an example: Consider 1 root node with 3 children and each of the children again 3 children. This gives 13 nodes we need to check. What we instead do is

1. Check for the root node: tests all 13 nodes
2. Check for each of the 3 first level children: 3x4 nodes
3. Check each level 2 child: 9 nodes

Makes 34 node tests altogether. We need to remember the visibility of a node once we have calculated it for a particular search term. =||= I believe one crucial step, no matter if we can increase the performance of the group-search itself, is to unbind the search field from an instant search action. I have tried to do this, by replacing the direct `bind` with

```
 final Timer searchTask = FxTimer.create(Duration.ofMillis(400), () -> {                          
    LOGGER.info(""Run Search "" + searchField.getText());                                          
    viewModel.filterTextProperty().setValue(searchField.textProperty().getValue());              
});                                                                                              
searchField.textProperty().addListener((observable, oldValue, newValue) -> searchTask.restart());
```

This works pretty well. So we only start the search 400ms after the user typed. Everytime the user hits a key in the search-field, the timer is restarted. With this, editing the search-field doesn't lag even with large databases.

@AEgit I have pushed a new branch `fix-GroupSearchPerformance` that includes this. Would you mind to try [this version](https://builds.jabref.org/fix-GroupSearchPerformance/) on your machine? I have tested it with your database, but my pc might be somewhat more powerful. =||= JabRef 4.1-dev--snapshot--2017-11-16--fix-GroupSearchPerformance--08d8a2ca0
Windows 10 10.0 amd64 
Java 1.8.0_151

@halirutan Thank you very much! This is exactly why I wanted to express in my convoluted comment: https://github.com/JabRef/jabref/issues/2852#issuecomment-302862994

This makes the group search/filter much faster in terms of user experience. So, this is definitely an improvement!
Something I noticed, however, is that after a couple of group searches/filter actions, the filtering becomes again slower. Similarly, when removing the groups filter, it takes a couple of seconds every time to display the complete group structure.
I'm just wondering, why the groups filter search requires much more resources than the normal search. If I use ""groups = mykeyword"", the articles belonging to the respective group will be shown immediately (what's missing is just showing the respective group in the groups panel). Is it the filtering/searching itself that takes so much time in the groups filter process, or is it the displaying part, that requires so much CPU power?

Note also, that I'm running JabRef on a quite powerful machine (Core i7 4+4HT cores with 2.2 GHz, 16 GB RAM, SSD), so on other machines this might take a bit longer.

Thank you for your help!

EDIT: I also found another bug with the group filter, which is reported here:
https://github.com/JabRef/jabref/issues/3436 =||= > Something I noticed, however, is that after a couple of group searches/filter actions, the filtering becomes again slower.

@AEgit I did not fix the overal complexity issue I pointed out in https://github.com/JabRef/jabref/issues/2852#issuecomment-338916089. The recursive groups tree is implemented using a very general recursive structure that is used in other places too. Currently, I don't see how I can fix this on my own and be sure I don't break anything else. Sorry. =||= @halirutan Yes, thank you very much! I just mentioned those issues, to make sure that other people following this thread would notice that - while much has been done to improve the performance - there still persist some issues (caused by the structural problem you mentioned). =||= @halirutan Thanks for looking into this and implementing an improvement. I think you could go for a PR with your delayed filtering.

Regarding the overall complexity problem, I had a look at this some time ago, but did not arrive at a proper solution. The underlying problem is that every node tries to decide its own visibility locally. But ultimately it is not a decision that can be made based on local knowledge, because it depends on its children. This means that the current solution has to be rewritten and the filtering needs to be triggered once and only once from the root of the group tree. This requires some major changes to the node structure and I am also unsure how to fix this without breaking something else.  =||= > But ultimately it is not a decision that can be made based on local knowledge, because it depends on its children. This means that the current solution has to be rewritten and the filtering needs to be triggered once and only once from the root of the group tree

@lenhard Exactly. There is another solution which, unfortunately, is highly impractical as well: The node stores the result of the last run *and* knows the last search term. This, however, means that you need to cache the `Predicate` in the current templated implementation which comes down to holding a reference to the complete `NodeViewModel` when I saw this right. The node could then decide if the predicate is the same and use the result of the last search and doesn't need to dive into children again.

I haven't profiled it carefully, but my guess is that as it stands the implementation has memory problems when searching repeatedly in large groups. At least this is suggested by what @AEgit described with ""after a couple of group searches/filter actions, the filtering becomes again slower"".  =||= @AEgit Would you test this PR http://builds.jabref.org/fix-GroupSearchPerformance/

It should be considerably faster and it contains (a) a delay in the search field so that it waits until you finished typing and (b) a cache that prevents the described repeated calculation of visibility. =||= @halirutan Thank you very much! The behaviour in:

JabRef 4.1-dev--snapshot--2017-12-20--fix-GroupSearchPerformance--12aab7e26
Windows 10 10.0 amd64 
Java 1.8.0_151

is much much better! A nice Christmas present ;) =||= @AEgit I changed a few things to the code. Can you please have a look, if it is still working for you. Thanks. The link is the same http://builds.jabref.org/fix-GroupSearchPerformance/ but it's a newer version (in a few minutes). =||= JabRef 4.1-dev--snapshot--2017-12-27--fix-GroupSearchPerformance--4246be769
Windows 10 10.0 amd64 
Java 1.8.0_151

@tobiasdiez Unfortunately the new version is not working as expected. While it still filters the groups, when a filtered group is selected, the associated entries are not updated accordingly in the main table view. This was not the case with the previous version:

JabRef 4.1-dev--snapshot--2017-12-20--fix-GroupSearchPerformance--12aab7e26
Windows 10 10.0 amd64 
Java 1.8.0_151 =||= Thanks for the feedback @AEgit. This bug should be fixed now as well. =||= @AEgit Tobi fixed the bug and the branch is now merged. I haven't had the time to profile through the current state, but when Tobi fixed the repeated creation of tree elements it should be acceptable now. Anyway, great work of testing JabRef with incredibly large databases so that we get a feeling for the bottlenecks. =||= @tobiasdiez and @halirutan Thank you very much! I can confirm, that this bug is fixed in:

JabRef 4.2-dev--snapshot--2018-01-03--master--193bbbca6
Windows 10 10.0 amd64 
Java 1.8.0_151

The only remaining issue with the groups filtering is the one reported here:
https://github.com/JabRef/jabref/issues/3436

Thanks a lot for your help!
   =||= "Fix group search performance"This includes currently 2 changes:
Fixes #2852

1. The input field for the group search is delayed now. It waits until the user has finished typing and starts the search afterward. This increases the usability and prevents lags during typing.
2. The RecursiveTreeElement caches the current predicate so that branches of the group tree are not tested over and over again. This is an ugly solution so far but we need to test if this or something similar (but beautiful) boosts the performance considerably.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Patrick Scheibehalirutan01/03/18, 07:13:15 PM
3576.03578missing dot in files exported "issues with JabRef version 4.1
however, 4.0 is fine.

Steps to reproduce:

1. File - Export
2. Select MS2007 XML format
3. Save

Expected: a file saved with name ""NAME.XML""
Got: a file saved with name ""NAMEXML""""Probably related to #3565 =||= I'm having the same problem. Additionally, it's ignoring entirely the file extension for a custom export. =||= @ziruizhuang @tgkolda I think, I fixed the bug. Could you please try out the version from https://builds.jabref.org/fixExport3576/ and report back if these issues are indeed resolved. @tgkolda what do you mean with ""custom export""? =||= @tobiasdiez  Thanks for your response. The fixExport3576 version didn't run at all for me, so I couldn't check the fix. Sorry. As for custom export, I refer to this capability: https://help.jabref.org/en/CustomExports, of which I am an enthusiastic user.

 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= solved this issue, yet introduced another one.
The export format varies, so usually  we call a format ""Microsoft Word Citation (*.XML)"" ""Open Document Citation (*.XML)"", etc. 
Instead, in the latest snapshot(http://builds.jabref.org/master/JabRef_windows-x64_4_2-dev--snapshot--2018-01-05--master--d6435d56d.exe), there are multiple ""XML file (*.XML)"". Although they are all en-capsuled using XML, but they are different formats and now we cannot identify one from another. 
  
opened a new issue in #3605 =||= "Refactor export code to fix #3576"<!-- describe the changes you have made here: what, why, ... -->
Fixes  #3576.
I refactored the export package so that it now has a similar structure of the importer and a similar code can now be used for imports and exports. Since the issue #3576 didn't occurred for imports, this refactoring automatically fixes the problem for the export.

Notable changes:
- `ExportFormat` is renamed to `Exporter`
- `ExportFormats` is renamed to `ExportFactory` and no longer static.
- `FileExtensions` is renamed to `FileType`

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Tobias Dieztobiasdiez01/02/18, 09:13:38 PM
3562.03579Library properties: no change but..."After opening the library properties window, if you click directly on OK, the file is shown as modified while no properties was modified by the user.

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists 

JabRef 4.1-dev--snapshot--2017-12-21--master--55abd5e2e
Linux 3.11-2-amd64 amd64 
Java 1.8.0_131


Steps to reproduce:

1. File -> New bibTeX library
2. File -> Save library as...
3. Enter a file name, like test.bib
4. Click on OK
Note that, at this point, the file is not shown as modified (no star in the name tab). Which is ok.
3. File -> Library properties
4. Click on OK  (without modifying any properties)
The file is shown as modified (star in the name tab)

Nothing special in the console."can I work on this ? =||= Sure, go ahead =||= Library properties: no change but.. (issue #3562)"<!-- describe the changes you have made here: what, why, ... -->
When user wanted to lead default Library properties, after clicking OK button even though there was no modification in Library property the bibTeX tab marked as modified. I fixed this bug so no need to  worry about this anymore.  

Fixes #3562 

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"JozsefPJozeph12/31/17, 04:33:52 PM
3584.03588Deleting an entry causes NPE exception"Delete an entry in the current master 64c774b 

```
SEVERE: Exception thrown by subscriber method listen(org.jabref.model.database.event.EntryRemovedEvent) on subscriber org.jabref.gui.BasePanel$EntryRemovedListener@600cdad9 when dispatching event: org.jabref.model.database.event.EntryRemovedEvent@3850ee8f
java.lang.NullPointerException
	at org.jabref.gui.BasePanel$EntryRemovedListener.listen(BasePanel.java:2092)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:87)
	at com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:144)
	at com.google.common.eventbus.Subscriber$1.run(Subscriber.java:72)
	at com.google.common.util.concurrent.MoreExecutors$DirectExecutor.execute(MoreExecutors.java:398)
	at com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:67)
	at com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:108)
	at com.google.common.eventbus.EventBus.post(EventBus.java:212)
	at org.jabref.model.database.BibDatabase.removeEntry(BibDatabase.java:252)
	at org.jabref.model.database.BibDatabase.removeEntry(BibDatabase.java:236)
	at org.jabref.gui.BasePanel.delete(BasePanel.java:803)
	at org.jabref.gui.BasePanel.lambda$7(BasePanel.java:369)
```""@tobiasdiez Seems to be a followup error from your recent changes:

       BibEntry previewEntry = selectionListener.getPreview().getEntry();
getPreview returns null =||= "Initialize previe before MainPanel to prevent NPEs on delete"Fixes #3584

(No changelod needed as this is a followup from #3574 

<!-- describe the changes you have made here: what, why, ... -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr12/29/17, 10:49:56 AM
3356.03591LaTeX `\textit{..}` is not redered correctly in Main table"Entry to reproduce:

```
@Article{Abdala2007,
  author    = {Fernando Abdala},
  title     = {{{Redescription} {of} \textit{Platycraniellus elegans} ({Therapsida}, {Cynodontia}) {from} {the} {Lower} {Triassic} {of} {South} {Africa}, {and} {the} {cladistic} {relationships} {of} {eutheriodonts}}},
  journal   = {Palaeontology},
  year      = {2007},
  volume    = {50},
  number    = {3},
  pages     = {591--618},
  month     = {may},
  doi       = {10.1111/j.1475-4983.2007.00646.x},
  file      = {Abdala2007.pdf:Abdala2007.pdf:PDF},
  groups    = {Nanictosaurus, Ictidosuchoides},
  keywords  = {Platycraniellus elegans, Cynodontia, galesaurids, Early Triassic, South Africa.},
  publisher = {Wiley-Blackwell},
  url       = {http://dx.doi.org/10.1111/j.1475-4983.2007.00646.x},
}
```

Gives the following representation in the main table

<img width=""1385"" alt=""screen shot 2017-10-26 at 12 38 55"" src=""https://user-images.githubusercontent.com/511683/32048833-22992f12-ba4b-11e7-9e84-86a441474b3c.png"">

The Preview is not affected.

```
MacOS Sierra 10.12.6
JabRef current master branch
Mac OS X 10.12.6 x86_64 
Java 1.8.0_144
```""This issue seems not related to JabRef. It is related to `JLabel` and Swing. A minimal working example can be [found here](https://gist.github.com/halirutan/875bb442ed1fffb3a12c9b5ed63561a6) (I'll attach the code below). I'm not setting any different font or font size. Still, what I get is

<img width=""512"" alt=""screen shot 2017-10-26 at 14 37 44"" src=""https://user-images.githubusercontent.com/511683/32053321-411c1520-ba5b-11e7-9b90-87ca726a4d59.png"">

Note that I see the correctly rendered label in the debugger. So the Unicode conversion is correct

<img width=""417"" alt=""screen shot 2017-10-26 at 14 38 53"" src=""https://user-images.githubusercontent.com/511683/32053361-6d851634-ba5b-11e7-97c0-d3f352ba66c7.png"">

There are several similar issues on SO but none fits to such a simple example. Can someone on OS X try this by creating a class in the jabref package and pasting the content?

``` java
package org.jabref;


import java.awt.GridLayout;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.WindowConstants;

import org.jabref.model.strings.LatexToUnicodeAdapter;

public class SwingJLabelTester extends JPanel{

    private SwingJLabelTester() {
        super(new GridLayout(3,1));  //3 rows, 1 column
        final String latexString = LatexToUnicodeAdapter.format(""This is a \\textit{test for italics} and \\textbf{a test for bold}"");
        final JLabel label = new JLabel(latexString, SwingConstants.CENTER);
        label.setVerticalTextPosition(SwingConstants.BOTTOM);
        label.setHorizontalTextPosition(SwingConstants.CENTER);
        add(label);
    }

    private static void createAndShowGUI() {
        final JFrame frame = new JFrame(""LabelDemo"");
        frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
        frame.add(new SwingJLabelTester());
        frame.setSize(400,400);
        frame.setVisible(true);
    }

    public static void main(final String[] args) {
        SwingUtilities.invokeLater(SwingJLabelTester::createAndShowGUI);
    }

}
``` =||= The problem reminded me of the issue https://github.com/JabRef/jabref/issues/2784 and the follow up discussion we had on this.  =||= See discussion here:
https://github.com/JabRef/jabref/issues/2784
here:
https://github.com/JabRef/jabref/pull/2752
and here:
https://github.com/JabRef/jabref/pull/3008

I thought this was fixed with https://github.com/JabRef/jabref/pull/3008, but I encounter this issue again in:
JabRef 4.1-dev--snapshot--2017-10-23--master--451b6f3de
Windows 10 10.0 amd64 
Java 1.8.0_151

Could it be that when reinstalling a new version of JabRef, old preferences for system fonts are imported, which cause the issue (see also https://github.com/JabRef/jabref/pull/3008)? =||= @Siedlerchr @AEgit Oh god, this is a lot of information. I only skimmed over some issues to see if this has been reported recently. This quote from @lenhard 

> Before that change, you could have italics in the main table with the right font. Now, I can't find one that supports it.

It was my first guess as well and I tried different settings but nothing helped. That's why I implemented the test-class. Additionally, I read through some SO posts and finally [asked with this minimal example here](https://stackoverflow.com/questions/46954858/jlabel-and-unicode-on-os-x).

When it is indeed a font issue that comes and goes with setting different fonts it would be bad since users can change this as they like. Since the main table is only displayed and not edited directly, would it be an option to use HTML like we do in the preview? =||= HTML could be an option, should be possible, https://docs.oracle.com/javase/tutorial/uiswing/components/html.html
In JabRef all MainTable stuff is in the org.jabref.gui.maintable package  =||= Maybe a stupid question: Was there a reason for why HTML wasn't used in the first place for the main table? Could this influence the performance in large databases? =||= The first time I started (after new installation)

JabRef 4.1-dev--snapshot--2017-10-26--master--3d4b5104d
Windows 10 10.0 amd64 
Java 1.8.0_151

this issue seemed to be fixed, i. e. the `\textit{}` was interpreted correctly and text appeared in italics in the main table.

The second time I started the same JabRef version, the issue reported above reappeared, i. e. text that should render in italics is replaced by squares in the main table. This issue persists when restarting JabRef. This indicates, I guess, that something changes in the default settings between the first installation of JabRef and subsequent use. =||= We could use the latex2html converter, similar as in #3574  =||= This should be fixed in the latest development version. Could you please check the build from https://builds.jabref.org/maintable-beta/. Thanks! Note this version is in a very early beta stage and might not work as expected. See https://github.com/JabRef/jabref/pull/3621 for further details. =||= I can confirm that this has been fixed in:

JabRef 4.2-dev--snapshot--2018-01-30--maintable-beta--85342350f
Windows 10 10.0 amd64 
Java 1.8.0_161

Thank you for your help!

Note, however, that the performance of the search has dropped significantly in the new build and other issues appear to persist (see https://github.com/JabRef/jabref/issues/1513#issuecomment-361528430). =||= Unfortunately, the problem still exists with `JabRef_windows-x64_4_2-dev--snapshot--2018-02-05--master--e33bd5888` and Windows 8.1 with JRE 8 (Update 166).
Interstingly, it works with Win10. =||= @tolot27 You are using the wrong branch. This is not yet in master, but in the maintable-beta branch linked by @tobiasdiez above. =||= I've tried the maintable-beta branch but the problem persists. =||= As the discussion in #4236 shows, more users have problems with italics even with the new master branch. I'll thus reopen it. Probably, it depends on the active (system?) font. =||= Cannot reproduce this issue for:

JabRef 5.0-dev--snapshot--2018-07-25--master--077fdacc2
Windows 10 10.0 amd64 
Java 1.8.0_181

Note, however, my post here: https://github.com/JabRef/jabref/issues/3356#issuecomment-339913701
If this issue exists, it might be difficult to reproduce it consistently if it has to do with the way JabRef is closed/the database is saved. I have tried to reopen my database multiple times and did not encounter the issue, but I cannot guarantee, that this is the case for everyone. =||= I tested it with 4.3.1 and 5.0-dev--snapshot--2018-07-25--master--077fdacc2 and cannot reproduce the bug anymore. =||= It might be a font Unicode issue on older Windows Versions.

 It would be nice if someone of the Mac or Linux user can check that as well. =||= @Siedlerchr In Linux, with Java 1.7u162 this works for me. If someone wonders how to quickly use the test-code that [I provide here](https://gist.github.com/halirutan/875bb442ed1fffb3a12c9b5ed63561a6) in IDEA:

1. Copy the code
2. Have the JabRef project open
3. Create a new scratch file using `Ctrl+Shift+A` and type `scratch`. Select Java
4. Paste the code in there, go over the class error and press `Alt+Enter` to rename the file to the class name
5. Use the small ""run"" button on the left side, next to the main method

It should look like this

![img](http://i.imgur.com/PYda5Pl.png)

Although I don't see a vast difference between plain and bold text, at least I have no missing characters. =||= Thanks for the test, but are you aware that it runs completely on JavaFX now (maintable and entry editor)?

I think we can close this again, as windows 7 specific  =||= @Siedlerchr this ""problem"" might still exists in Mac OS X.

<img width=""587"" alt=""Skärmavbild 2020-05-28 kl  13 33 12"" src=""https://user-images.githubusercontent.com/2598631/83174468-71c7d580-a0e8-11ea-819b-9e5fe1553479.png"">

I have managed to get some inconsistent behaviours on this one (sometimes italic and bold works as expected and sometimes not at all, and sometimes like on the screenshot, it partially works).

Should I open up a new issue or is this better solved in some other way?

Version of screenshot is
JabRef 5.1--2020-05-28--ffa07cd
Mac OS X 10.15.5 x86_64 
Java 14.0.1

red highlights are added by me =||= For the author/editor field it's not that relevant, title or any other fields are more important  =||= Maybe related: https://docs.jabref.org/installation#some-characters-are-not-displayed-in-the-main-table-math-characters-or-some-upper-cased-letter  =||= I could look at it tomorrow, the behaviour is the same/similar in author/title and I can get it to both work/break, the only difference between the 2 screenshots are a resizing event.

<img width=""536"" alt=""Skärmavbild 2020-05-28 kl  14 38 21"" src=""https://user-images.githubusercontent.com/2598631/83180142-f9194700-a0f0-11ea-8ea2-13a6c01059dc.png"">

<img width=""536"" alt=""Skärmavbild 2020-05-28 kl  14 38 37"" src=""https://user-images.githubusercontent.com/2598631/83180152-fe769180-a0f0-11ea-9e0d-7ad45488c6c9.png"">

Also note that the preview in the bottom right doesn't display the same thing as the maintable. Even if this is just a Mac OS X ""thing"", does it seem reasonable that I take a closer look at it? =||= @k3KAW8Pnf7mkmdSMPHz27  The entry preview is controlled over html code in the preferences under Entry preview.  It's essentially a web browser component. (WebView)
The main table uses plain Unicode as it does not support html formatting,

I guess there is something wrong with the latex2unicode parsing as well
And tip: you can also make the preview a new tab in the entry editor =||= > And tip: you can also make the preview a new tab in the entry editor
I see 😀 

I'll not put more time into this then, I am off to find some more beginner friendly issue to tackle 😎  =||= Feel free to take any open issue you want. 
We still have enough for everyone 😉😜
Easy beginner issues are also tagged with the good first issue label  =||= "Maintable leaves the Swing year and comes back in a new JavaFX dress"<!-- describe the changes you have made here: what, why, ... -->

2017:
![old](https://user-images.githubusercontent.com/5037600/34457968-d66229c8-edc1-11e7-9a2b-cae5ec8b1bfd.png)


2018:
![image](https://user-images.githubusercontent.com/5037600/34472026-e1498894-ef57-11e7-961c-c64a5030227f.png)


There are still many many things missing for a fully working version but I thought I give you an early preview. Feedback welcome.
Happy new year everybody!

Fixes #3356, fixes #3532 and fixes #3112.

Known bugs: (ticked = resolved)
- [ ] Changes to entries don't mark database as changed.
- [x] Changes to entries are not reflected in main table.
- [x] Cleanup does not work.
- [x] Ctrl + A in entry editor selects all entries in table. [not reproducable]
- [x] Escape does not close entry editor.
- [x] Column width is not correct if the option ""Resize to fit window width"" is activated
- [ ] Select multiple entries by holding mouse button: [code to fix](https://community.oracle.com/thread/2621389)

Status of features:
- [x] Sorting (Shift + click for multi-column sort)
- [x] Filtering by search and groups 
- [ ] Context menus for the icons
- [ ] Right-click menu
- [ ] Setting special fields like reading status / priority / ... through the main table
- [ ] Marked entries are not highlighted
- [ ] Drag & drop to and from the table
- [ ] Float mode does not work
- [ ] Color cells in table depending on whether the field is optional/required


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?

  
  
  
  
  
  "Tobias Dieztobiasdiez01/29/18, 12:11:18 PM
3532.03591Selecting new entry causes editing panel to become corrupted and not accept input"MacOS 10.12.6
java version ""1.8.0_151""
Version: JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar
Invoked with ""java -jar"" on a command line

I moved to using the latest version of JabRef a couple of days ago (as above), and
have a new bug. JabRef works well for while, but at a certain point, trying
to add a new entry causes the field area to hang and become
non-responsive. (Figure hopefully included.) 

The following error is generated:

19:30:17.470 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IndexOutOfBoundsException: [-2147483648, 16) is not a valid range within [0, 16)
	at org.reactfx.util.Lists.checkRange(Lists.java:128) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.reactfx.util.Lists.checkRange(Lists.java:123) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.reactfx.collection.MemoizationListImpl.forget(MemoizationList.java:184) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.CellListManager.cropTo(CellListManager.java:82) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.CellPositioner.cropTo(CellPositioner.java:29) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.Navigator.cropToNeighborhoodOf(Navigator.java:227) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:200) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.Navigator.visit(Navigator.java:129) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:85) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:78) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
	at org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:257) ~[JabRef-4.1-dev--snapshot--2017-12-08--master--6f39151a7.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
	at javafx.scene.Scene.doLayoutPass(Scene.java:552) ~[jfxrt.jar:?]
	at javafx.scene.Scene.preferredSize(Scene.java:1646) ~[jfxrt.jar:?]
	at javafx.scene.Scene.impl_preferredSize(Scene.java:1720) ~[jfxrt.jar:?]
	at javafx.stage.Window$9.invalidated(Window.java:846) ~[jfxrt.jar:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:109) ~[jfxrt.jar:?]
	at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:144) ~[jfxrt.jar:?]
	at javafx.stage.Window.setShowing(Window.java:922) ~[jfxrt.jar:?]
	at javafx.stage.Window.show(Window.java:937) ~[jfxrt.jar:?]
	at com.sun.javafx.stage.EmbeddedWindow.show(EmbeddedWindow.java:58) ~[jfxrt.jar:?]
	at javafx.embed.swing.JFXPanel.lambda$addNotify$49(JFXPanel.java:799) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_151]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	~[jfxrt.jar:?]


The previous versions I was using,

JabRef-4.1-dev--snapshot--2017-11-13--master--c1d425a31.jar and

JabRef-4.1-dev--snapshot--2017-10-29--autofilelink--19481127d.jar

didn't have this problem.

![screen shot 2017-12-14 at 7 40 10 pm](https://user-images.githubusercontent.com/32746366/34021238-aa7a3584-e106-11e7-9aba-8a3a53c21c6b.jpg)

Clicking the check mark top-left of the panel closes and opens the panel correctly, but doesn't restore it to a working state. The following info is generated:

java.lang.RuntimeException: Requested texture dimensions (2516x2147483647) require dimensions (2516x0) that exceed maximum texture size (16384)
	at com.sun.prism.es2.ES2RTTexture.create(ES2RTTexture.java:220)
	at com.sun.prism.es2.ES2ResourceFactory.createRTTexture(ES2ResourceFactory.java:157)
	at com.sun.javafx.tk.quantum.UploadingPainter.run(UploadingPainter.java:117)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at com.sun.javafx.tk.RenderJob.run(RenderJob.java:58)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)
	at java.lang.Thread.run(Thread.java:748)
""Have the same issue. Looks to be an overflow bug. 

> java.lang.IndexOutOfBoundsException: [-2147483648, 16)

Are older snapshot builds available anywhere?  =||= @algoterranean 
Could you please test the latest master from git? Unfortunately our build pipeline is broken atm due to a certificate issue, therefore the newer builds are not avaiable as binary.
Just do a git clone and aftwerwards a ./gradlew run to build and execute the version.
(You need to install a jdk8)
 =||= I am still getting an error with a clone of master (commit `15787da3c0`):

`11:04:52.401 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IndexOutOfBoundsException: [-2147483648, 12) is not a valid range within [0, 12)
        at org.reactfx.util.Lists.checkRange(Lists.java:128) ~[reactfx-2.0-M5.jar:?]
        at org.reactfx.util.Lists.checkRange(Lists.java:123) ~[reactfx-2.0-M5.jar:?]
        at org.reactfx.collection.MemoizationListImpl.forget(MemoizationList.java:184) ~[reactfx-2.0-M5.jar:?]
        at org.fxmisc.flowless.CellListManager.cropTo(CellListManager.java:82) ~[flowless-0.6.jar:?]
        at org.fxmisc.flowless.CellPositioner.cropTo(CellPositioner.java:29) ~[flowless-0.6.jar:?]
        at org.fxmisc.flowless.Navigator.cropToNeighborhoodOf(Navigator.java:227) ~[flowless-0.6.jar:?]
        at org.fxmisc.flowless.Navigator.placeStartAtMayCrop(Navigator.java:200) ~[flowless-0.6.jar:?]
        at org.fxmisc.flowless.Navigator.visit(Navigator.java:129) ~[flowless-0.6.jar:?]
        at org.fxmisc.flowless.StartOffStart.accept(TargetPosition.java:85) ~[flowless-0.6.jar:?]
        at org.fxmisc.flowless.Navigator.layoutChildren(Navigator.java:78) ~[flowless-0.6.jar:?]
        at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
        at org.fxmisc.flowless.VirtualFlow.layoutChildren(VirtualFlow.java:257) ~[flowless-0.6.jar:?]
        at javafx.scene.Parent.layout(Parent.java:1087) ~[jfxrt.jar:?]
        at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
        at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
        at javafx.scene.Parent.layout(Parent.java:1093) ~[jfxrt.jar:?]
        at javafx.scene.Scene.doLayoutPass(Scene.java:552) ~[jfxrt.jar:?]
        at javafx.scene.Scene.preferredSize(Scene.java:1646) ~[jfxrt.jar:?]
        at javafx.scene.Scene.impl_preferredSize(Scene.java:1720) ~[jfxrt.jar:?]
        at javafx.stage.Window$9.invalidated(Window.java:864) ~[jfxrt.jar:?]
        at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:109) ~[jfxrt.jar:?]
        at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:144) ~[jfxrt.jar:?]
        at javafx.stage.Window.setShowing(Window.java:940) ~[jfxrt.jar:?]
        at javafx.stage.Window.show(Window.java:955) ~[jfxrt.jar:?]
        at com.sun.javafx.stage.EmbeddedWindow.show(EmbeddedWindow.java:58) ~[jfxrt.jar:?]
        at javafx.embed.swing.JFXPanel.lambda$addNotify$51(JFXPanel.java:833) ~[jfxrt.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_152]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]` =||= Okay. This error indicates a threading issue between the swing and javafx stuff.
  Can you please tell exactly what you did? (E.g. using a context menu or menu point)
Do you have any custom types etc? 
Are you on Windows/LInux/Mac? =||= I am on OSX 10.12.5, JDK 8u152. 

I think I narrowed it down slightly. To replicate:

Start JabRef.
File -> New BibTex Library.
Add a new BibTex entry (using the toolbar icon) 
![image](https://user-images.githubusercontent.com/6758520/34082280-b9b59b44-e320-11e7-81fb-921a430603af.png)
Select Article button. 
Select ""{} BibTeX source"" tab.
Enter/paste in bibtex entry.
Go to General tab.

Add new BibTex entry, using the toolbar again, select Article, and this is where the error occurs.

This error does not occur if I go, for example, to Required Fields tab after the BibTex entry. I haven't tested out all of the tabs yet, but so far it only occurs if I go to the General tab.

Hope that makes sense.  =||= Thanks for the detailed steps,
I could reproduce this on Windows, too and I tried to track it down, but with no success atm. There must be sth wrong with the interplay of swing/javafx in the entryeditor:
The main action happens inside the  method in EntryEditor.java 
`    public void setEntry(BibEntry entry) {
`
There must be sth wrong with the Threads. I also tried wrapping another few things in the FX Thread, but with no sucess. Error persists

Btw, you can directly paste (and copy also) your bibtex code on the main table, it will then automatically create an entry.
 =||= I investigated this problem a bit and found out the following:
- It only happens for the ""General"" tab
- You don't need to create new entries. The error also happens in the following scenario: edit source of one entry, switch to ""General"" tab, close entry editor, open entry editor again
- It is important that you close and reopen the entry editor. If you switch to a different entry for example, everything works just find.

Strange bug. I'll wait until https://github.com/JabRef/jabref/pull/3427 is merged and then have another look on how to fix it. =||= Thanks for the update.  =||= This should be fixed in the latest development version. Could you please check the build from https://builds.jabref.org/maintable-beta/. Thanks! Note this version is in a very early beta stage and might not work as expected. See https://github.com/JabRef/jabref/pull/3621 for further details. =||= "Maintable leaves the Swing year and comes back in a new JavaFX dress"<!-- describe the changes you have made here: what, why, ... -->

2017:
![old](https://user-images.githubusercontent.com/5037600/34457968-d66229c8-edc1-11e7-9a2b-cae5ec8b1bfd.png)


2018:
![image](https://user-images.githubusercontent.com/5037600/34472026-e1498894-ef57-11e7-961c-c64a5030227f.png)


There are still many many things missing for a fully working version but I thought I give you an early preview. Feedback welcome.
Happy new year everybody!

Fixes #3356, fixes #3532 and fixes #3112.

Known bugs: (ticked = resolved)
- [ ] Changes to entries don't mark database as changed.
- [x] Changes to entries are not reflected in main table.
- [x] Cleanup does not work.
- [x] Ctrl + A in entry editor selects all entries in table. [not reproducable]
- [x] Escape does not close entry editor.
- [x] Column width is not correct if the option ""Resize to fit window width"" is activated
- [ ] Select multiple entries by holding mouse button: [code to fix](https://community.oracle.com/thread/2621389)

Status of features:
- [x] Sorting (Shift + click for multi-column sort)
- [x] Filtering by search and groups 
- [ ] Context menus for the icons
- [ ] Right-click menu
- [ ] Setting special fields like reading status / priority / ... through the main table
- [ ] Marked entries are not highlighted
- [ ] Drag & drop to and from the table
- [ ] Float mode does not work
- [ ] Color cells in table depending on whether the field is optional/required


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?

  
  
  
  
  
  "Tobias Dieztobiasdiez01/29/18, 12:11:18 PM
3112.03591Colouring item count in groups panel does not work reliably"JabRef 4.0-dev--snapshot--2017-08-16--maintable-update--69f717336
Windows 10 10.0 amd64
Java 1.8.0_141

When selecting an item in the main table, the associated group (or rather the number giving the number of associated items) should be coloured. This is not the case with newly assigned items. It does appear, however, that this feature is generally buggy - also items that have not been newly assigned to a group are not always coloured in the group panel (sometimes it works, sometimes it does not).
It's difficult for me to replicate this behaviour. As far as I can tell, one way of experiencing reliably this bug is by doing the following.

1) Open a JabRef database
2) Select an item - the associated item count in the groups panel should be coloured (although sometimes it won't)
3) Assign this item to a new group - the item count of the new group will not be coloured

Note, that I've also noticed that colours can ""persist"" in the main table, although no or only one item is selected. Example:
1) Open a JabRef database
2) Select multiple items which are associated with different groups - the item counts of the different groups should be coloured
3) Now deselect all items and select only one that is associated with a single group - only the item count of that group should be coloured. But actually all item counts of the previously selected items/groups are still coloured.""@tobiasdiez In order to make addressing this bug a little easier, could you please point me to the code that does the coloring of the group tree? I have a hard time locating it at the moment. =||= @lenhard The coloring is determined by [pseudo classes](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupTree.css#L24) that are [bound](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupTreeController.java#L122) to the [anySelectedEntriesMatchedProperty/allSelectedEntriesMatchedProperty](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupNodeViewModel.java#L52) of the groups node view model. =||= The bug still exists in recent master branch, I fixed this bug in this [commits] (https://github.com/springzfx/jabref/commit/a907fb60ae86a28bd63858b7f3f648235baebf3d)

The cause of this bug is that the local variable ""pseudoClassState"" is garbaged by java gc. There is no reference to this variable except an weak one from ""bind"" function. =||= @springzfx thank you very much! Please create a PR for your changes, so we can integrate it.  =||= Does the same apply with toggle buttons like entry preview? I have disabled it and still the previews open on a single click. To reproduce it, the bottom details layer needs to be disabled. =||= Thanks to @springzfx  this issue is now resolved in the latest master version.


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0-dev--snapshot--2018-10-28--master--05047f32a
Windows 10 10.0 amd64 
Java 1.8.0_191

This bug has been partially solved. If you repeat the following steps you can still reliably reproduce the bug:

1. Open a JabRef database
2. Select an item - the associated item count in the groups panel should be coloured (this works now!)
3.  Assign this item to a new group - the item count of the new group will not be coloured (this does not work)

So, problem 2 has been solved, but problem 3 persists. There is a simple workaround for problem 3, though: If you select another group in the groups panel or another item in the main table and the select the newly assigned item, all (!) corresponding groups will be coloured.
So, basically, the only minor problem that persists is that an item that is newly assigned to a group will not lead to an immediate update of the colouring of that group. Instead, we have to manually trigger the update of the groups panel.

 =||= Shoud be fixed now in latest master. I cannot longer reproduce it.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0-dev--snapshot--2019-09-18--master--1601770f4
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft

I can confirm that this issue is fixed in the latest dev version. Cheers! =||= "Maintable leaves the Swing year and comes back in a new JavaFX dress"<!-- describe the changes you have made here: what, why, ... -->

2017:
![old](https://user-images.githubusercontent.com/5037600/34457968-d66229c8-edc1-11e7-9a2b-cae5ec8b1bfd.png)


2018:
![image](https://user-images.githubusercontent.com/5037600/34472026-e1498894-ef57-11e7-961c-c64a5030227f.png)


There are still many many things missing for a fully working version but I thought I give you an early preview. Feedback welcome.
Happy new year everybody!

Fixes #3356, fixes #3532 and fixes #3112.

Known bugs: (ticked = resolved)
- [ ] Changes to entries don't mark database as changed.
- [x] Changes to entries are not reflected in main table.
- [x] Cleanup does not work.
- [x] Ctrl + A in entry editor selects all entries in table. [not reproducable]
- [x] Escape does not close entry editor.
- [x] Column width is not correct if the option ""Resize to fit window width"" is activated
- [ ] Select multiple entries by holding mouse button: [code to fix](https://community.oracle.com/thread/2621389)

Status of features:
- [x] Sorting (Shift + click for multi-column sort)
- [x] Filtering by search and groups 
- [ ] Context menus for the icons
- [ ] Right-click menu
- [ ] Setting special fields like reading status / priority / ... through the main table
- [ ] Marked entries are not highlighted
- [ ] Drag & drop to and from the table
- [ ] Float mode does not work
- [ ] Color cells in table depending on whether the field is optional/required


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?

  
  
  
  
  
  "Tobias Dieztobiasdiez01/29/18, 12:11:18 PM
3596.03597NPE in ExportFactory prevents JabRef from starting"Start JabRef -> NPE 
@tobiasdiez  You have introduced a circular dependency
In the creation of the exportFactory the getfileExtension is called, which internally acesses Globals.exportFactory   which is at that point not yet initialized


```
11:06:58.982 [AWT-EventQueue-0] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.NullPointerException: null
	at org.jabref.preferences.CustomExportList.getFileExtension(CustomExportList.java:47) ~[main/:?]
	at org.jabref.preferences.CustomExportList.createFormat(CustomExportList.java:101) ~[main/:?]
	at org.jabref.preferences.CustomExportList.readPrefs(CustomExportList.java:78) ~[main/:?]
	at org.jabref.preferences.CustomExportList.getCustomExportFormats(CustomExportList.java:64) ~[main/:?]
	at org.jabref.logic.exporter.ExporterFactory.create(ExporterFactory.java:67) ~[main/:?]
	at org.jabref.JabRefMain.start(JabRefMain.java:146) ~[main/:?]
	at org.jabref.JabRefMain.lambda$0(JabRefMain.java:53) ~[main/:?]
```"Lookup filetypes in enum set to prevent NPE due to uninitialized expo…"…rterFactory

Fixes #3596

This is my initial idea. Maybe we can optimize this

<!-- describe the changes you have made here: what, why, ... -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"ChristophSiedlerchr01/04/18, 10:09:47 AM
3598.03600Disable autocomplete in the search field"JabRef version <4.1> on <Linux 4.4.103-18.41-default amd64, Java 1.8.0_151>

If I start searching a database, a drop-down menu appears below the search window although I have tried to globally disable autocomplete in the preferences. Shouldn't there be a way to totally disable this feature for each and every place where it might pop up?

Steps to reproduce:

1. Open an existing database.
2. Begin typing into the search window.
3. Unwanted drop-down menu appears."There is a preference option that you can set as part of the entry editor preferences, which turns off the autocompletion there. I think we should just extend the preference to capture the search box as well.  =||= Make it possible to disable autocompletion in the search bar"Fixes #3598 by covering the autocompletion in the search bar with the same preference option as in the entry editor. 


----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?"Jörg Lenhardlenhard01/03/18, 07:40:57 PM
3605.03606Export dialog with unclear format list"issues with JabRef version 4.2 snapshot (http://builds.jabref.org/master/JabRef_windows-x64_4_2-dev--snapshot--2018-01-05--master--d6435d56d.exe)

Steps to reproduce:

* File - Export

**Expected:** a list of formats such as ""MS2007 XML format (*.XML)"", ""Open Document Citation (*.XML)""

**Got:** a list of formats with only the filename extension for indication, such as ""XML file (*.XML)"", ""XML file (*.XML)""

Although they are all en-capsuled using XML, but they are different formats and now we cannot identify one from another. Other formats suffer from this issue as well.
  ""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= "Add exporter desc to enum analog to import"Fixes #3605

Follow up from #3576 

<!-- describe the changes you have made here: what, why, ... -->

![jabrefextension](https://user-images.githubusercontent.com/320228/34617477-df47f5b2-f23b-11e7-907e-a0d1e595406e.png)



----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?

  "ChristophSiedlerchr01/06/18, 11:17:58 AM
3145.03610Validation messages are displayed at wrong position"Latest master. The validation messages in the entry editor are shifted to the bottom (by what appears to be a fixed constant):
![image](https://user-images.githubusercontent.com/5037600/29570175-f90a1d8c-8755-11e7-9b57-2ff7e3e7bbfa.png)""Confirmed, but it's not only that.

For me, DOI and URL warnings in the general fields tab are shifted upwards by a threshold.

I just reset my master branch to the beta3 and it was already broken there. Now I wonder, did the feature ever work? Were there library updates that broke this? We surely didn't change the code. =||= No it never worked as desired (I just tested it with my original branch). I filed [a bug report at controlsfx](https://bitbucket.org/controlsfx/controlsfx/issues/791/update-position-of-decoration-when-target).

EDIT: there are currently 2 PRs in the pipeline that attempt to fix this issue [682](https://bitbucket.org/controlsfx/controlsfx/pull-requests/682/fix-for-issue-791-update-position-of). Once they are merged, the new snapshot is available here: https://oss.sonatype.org/content/repositories/snapshots/org/controlsfx/controlsfx/8.40.15-SNAPSHOT/ =||= Damn :-( How did we not see that? I was very convinced that I saw it working.

What does that mean for 4.0? I would suggest that we add a preference option for enabling/disabling validation that is initially set to disabled. When the feature works properly, we can add the UI part to that allows you to enable the preference. That way, we keep the code, but do not annoy users. =||= Strangely if I click into an ""invalid"" editor field the sign is then positioned at the right position...  and yes: I first noticed this in the branch of @lenhard's resizing - and I was pretty sure that I have never seen it displayed in that wrong way before... 😕  =||= @matthiasgeiger I would assume that with the CSS patch by @lenhard leads to the initial size not being 0 and thus the issue https://bitbucket.org/controlsfx/controlsfx/issues/791/update-position-of-decoration-when-target is risen:

> The problem is that size listener is only registered if the initial size was 0

Please sign it at bitbucket and cast a vote for the issue. Maybe that helps to get the CustomFX library fixed. =||= @koppor My CSS patch is not the cause. We are talking about the master branch here and my patch is still an unmerged PR. =||= The validation feature is now masked by a preference option. It will be re-enabled once the bug is fixed in controlsfx. Hence this can be removed from the 4.0 milestone and I'll re-categorize it from bug to feature. =||= "Implements #3145: Show validation messages in entry editor"<!-- describe the changes you have made here: what, why, ... -->
The bug mentioned in #3145 was finally fixed in controlsfx. Thus we can reenable the validation messages.
Closes #3145.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
- [ ] If you changed the localization: Did you run `gradle localizationUpdate`?

  "Tobias Dieztobiasdiez01/12/18, 03:19:05 PM
3648.03670chaining of modifiers does not work (in all cases?)"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef version 4.1 on Debian buster/sid

Steps to reproduce:

1. chain modifiers for the BibTeX key generator [as described in the docs](https://help.jabref.org/en/BibtexKeyPatterns#modifiers)
2. have a BibTex file where both modifiers would have an effect
3. observe that only the last modifier will be applied

<details>

Despite the configured pattern `[auth:(_):lower][veryshorttitle:lower:(_)]` , the example BibTex:
```
@Article{Interesting,
  title     = {The Interesting Title},
}
```
leads to the BibTex key as seen above.

Expected key (and BibTex, again):

```
@Article{_interesting,
  title     = {The Interesting Title},
}
```

</details>

Thanks for this powerful piece of FLOSS!"Great. Thank you very much @tobiasdiez ! =||= Fixes #3648: Chained modifiers work again"<!-- describe the changes you have made here: what, why, ... -->

Fixes #3648. 

The problem was that `resultingLabel = formatter.get().format(label);` always used the original input and not the result of the previous modifier.

----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [ ] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez01/30/18, 03:46:20 PM
3679.03690Delete from disk should not be default option/selected on DELETE in file tab"![image](https://user-images.githubusercontent.com/2141507/35624303-e83114da-068e-11e8-9b3d-d38aa0c4fd9a.png)

Changing the buttons should be sufficient.""Hi! :wave: 

I have submitted a pull request (#3690) aiming to fix this issue (and another issue with the ""Cancel"" button, which I discovered during testing my first change). I would appreciate it if you could review the changes and suggest possible improvements! =||= "[WIP] File link deletion dialog improvements"This pull request fixes the following issues:

* When a file link in a bibliography entry is deleted by the user, a dialog is displayed. Previously, the default (first) dialog option deleted the linked file from disk. The default behaviour has been changed to just removing the file link from the entry.

  This is a fix to issue #3679 
Fixes #3679 

* When clicking the ""Cancel"" button in the file link deletion dialog, the file  was being deleted from the list. This behaviour has been fixed by changing the return value of the `delete()` method when the ""Cancel"" button is chosen.

## Example screenshot:

![2018-02-04-001057_477x142_scrot](https://user-images.githubusercontent.com/20418176/35773368-0191977e-0950-11e8-90cb-ba778105f3e3.png)

## Checklist:

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Screenshots added
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)

---

I am unsure whether the remaining checklist items are applicable to this pull request.
I would be willing to provide tests for the `delete()` method; however, the `DialogService` member cannot be stubbed-in/mocked as it is (as it is marked `final`), and therefore I can't control the returned chosen option from inside the unit test.

I would appreciate any pointers and suggestions."Bartłomiej Dachbdach02/05/18, 11:04:08 AM
3646.03709JabRef doesn't start if AutomaticKeywordGroup uses a semicolon as separator"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef version 4.1 on Windows 10
(JabRef 4.1, Windows 10 10.0 amd64, Java 1.8.0_144)

Steps to reproduce:

1. Open a bibtex-file ([test0.txt](https://github.com/JabRef/jabref/files/1643240/test0.txt)). Create Automatic keyword group. Use proposed standard values, only change "","" to "";"" as separator.
2. Close JabRef. The bibtex-file looks like this: [test.txt](https://github.com/JabRef/jabref/files/1643209/test.txt)
3. Start JabRef.
4. JabRef doesn't start: It appears in the task manager, using the CPU a short time and then stays at 0% CPU with a constant amount of RAM used. No window opens.

If within the test file the `\;` which stands for the separator (the second one after `keywords`, I guess) is changed to `,` or `-` JabRef opens again. If this `\;` is changed to `;` JabRef doesn't start.

Regards
""Okay I could reproduce this: It produces an exception when parsing the line. Seems like it gets problems with the delimiter.
@tobiasdiez  What is your opinion: Should we disallow the semicolon as separator?


```
java.lang.StringIndexOutOfBoundsException: String index out of range: 0
	at java.lang.String.charAt(String.java:658) ~[?:1.8.0_162]
	at org.jabref.logic.importer.util.GroupsParser.automaticKeywordGroupFromString(GroupsParser.java:130) ~[main/:?]
	at org.jabref.logic.importer.util.GroupsParser.fromString(GroupsParser.java:99) ~[main/:?]
	at org.jabref.logic.importer.util.GroupsParser.importGroups(GroupsParser.java:47) ~[main/:?]
	at org.jabref.logic.importer.util.MetaDataParser.parse(MetaDataParser.java:65) ~[main/:?]
	at org.jabref.logic.importer.util.MetaDataParser.parse(MetaDataParser.java:35) ~[main/:?]
	at org.jabref.logic.importer.fileformat.BibtexParser.parseFileContent(BibtexParser.java:221) ~[main/:?]
	at org.jabref.logic.importer.fileformat.BibtexParser.parse(BibtexParser.java:154) ~[main/:?]
	at org.jabref.logic.importer.fileformat.BibtexImporter.importDatabase(BibtexImporter.java:70) ~[main/:?]
	at org.jabref.logic.importer.Importer.importDatabase(Importer.java:88) ~[main/:?]
	at org.jabref.logic.importer.fileformat.BibtexImporter.importDatabase(BibtexImporter.java:62) ~[main/:?]
	at org.jabref.logic.importer.OpenDatabase.loadDatabase(OpenDatabase.java:72) ~[main/:?]
	at org.jabref.logic.importer.OpenDatabase.loadDatabase(OpenDatabase.java:51) ~[main/:?]
	at org.jabref.JabRefGUI.openLastEditedDatabases(JabRefGUI.java:207) ~[main/:?]
	at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:91) ~[main/:?]
	at org.jabref.JabRefGUI.<init>(JabRefGUI.java:60) ~[main/:?]
	at org.jabref.JabRefMain.lambda$1(JabRefMain.java:193) ~[main/:?]
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311) ~[?:1.8.0_162]
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758) ~[?:1.8.0_162]
	at java.awt.EventQueue.access$500(EventQueue.java:97) ~[?:1.8.0_162]
	at java.awt.EventQueue$3.run(EventQueue.java:709) ~[?:1.8.0_162]
	at java.awt.EventQueue$3.run(EventQueue.java:703) ~[?:1.8.0_162]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_162]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) ~[?:1.8.0_162]
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728) ~[?:1.8.0_162]
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205) [?:1.8.0_162]
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_162]
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_162]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_162]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_162]
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_162]
```
 =||= If somebody uses the semicolon as a keyword separator, then the automatic groups should support that as well. I think, this bug can easily be resolved by using the `StringUtil.(un)quote` commands to escape the separator.  =||= Hi,
I am a first-timer in open-source, can I look in to this or someone has already taken it? Please guide me. =||= @SachithS sure, go ahead! The relevant lines are
https://github.com/JabRef/jabref/blob/5e96d46bd24a851ad958af982f80ac383df44a3d/src/main/java/org/jabref/logic/importer/util/GroupsParser.java#L158-L159
and
https://github.com/JabRef/jabref/blob/5e96d46bd24a851ad958af982f80ac383df44a3d/src/main/java/org/jabref/logic/exporter/GroupSerializer.java#L174-L176

It probably suffices to add `quote/unquote` calls (as seen for other data). Please also add tests to https://github.com/JabRef/jabref/blob/master/src/test/java/org/jabref/logic/importer/util/GroupsParserTest.java and https://github.com/JabRef/jabref/blob/master/src/test/java/org/jabref/logic/exporter/GroupSerializerTest.java. If you have any questions, feel free to reach out to us developers here in this issue or at https://gitter.im/JabRef/jabref. Also have a look at https://github.com/JabRef/jabref/wiki/Guidelines-for-setting-up-a-local-workspace. Happy coding! =||= @tobiasdiez, Thanks for helping-out. But it seems issue is closed. :smile: Will try to find another stater for me. Thanks again. =||= "Group separator escapingfixes #3646Stefan Kolbstefan-kolb02/07/18, 06:06:04 PM
938.03710BibTeXML vs. bibteXMP"JabRef 3.2

It seems that JabRef offers a second kind of XML serialization in BibTeX:

```
xmlns:bibtex='http://jabref.sourceforge.net/bibteXMP/'
```

IMHO, it is not worth to keep two different XML Schemas for an XML serialization of BibTeX. AFAIK, there isn't even one for JabRef's XML. Therefore, I propose that we should use [BibTeXML ](http://bibtexml.sourceforge.net/) only and migrate old XMP meta data to the BibTeXML format.

XMP examples can be found at https://github.com/JabRef/jabref/blob/fc82796f1f99c00a01ccdb9dd4fff792a40b7e75/src/test/java/net/sf/jabref/logic/xmp/XMPUtilTest.java#L139.""Refs #898
 =||= I'm not really following the argumentation. One may argue of different export formats, but how is it relevant that they are both XML? Isn't it more of an issue if it is a relevant format in itself?
 =||= Context: The format is used for storing BibTeX data in XML files using the XMP functionality (follow `net.sf.jabref.logic.xmp.XMPSchemaBibtex`). This PDF meta data is used by other people to exchange PDFs with the correct bibliographic data without being forced to send the bib entry along with the PDF in two files.

I am arguing that JabRef uses a proprietary format which is not used elsewhere. Thus, our XMP data cannot be processed by other software. I see the point, that the last commit at the [current BibTeXML repository](https://github.com/Zearin/BibTeXML) is from 2011. Nevertheless, I vote for joining forces. These formats are too similar to go into different directions.

I see following alternatives:

1. Replace JabRef's bibteXMP by the canonical bibtex representation
2. Completely use RDF. There seem multiple BibTeX2RDF converters available: https://www.w3.org/wiki/ConverterToRdf#BibTex
3. Maybe, OWL is also an option: http://zeitkunst.org/bibtex/0.1/
4. Move to BiBTeXML (as outlined in the original issue)
4. Use [MODS](http://www.loc.gov/standards/mods/)
5. Keep everything as is

Somehow, the current code seems to use ""[Dublin Core](https://en.wikipedia.org/wiki/Dublin_Core)"", which reads good. Maybe, that code can just be used and the other serialization using `{http://jabref.sourceforge.net/bibteXMP/}bibtex` can be removed completely. Needs to be investigated further.

In case everything is replaced by Dublin Core, one can update PDFBox - see https://github.com/JabRef/jabref/pull/1096.
 =||= Ah, OK, so bibteXMP is JabRef's own format? Then it clearly makes more
sense so not support exporting in that.
 =||= The question would be: How many people actually use the XMP feature?
From my point of view I would suggest supporting the BibteXML Format and maybe add the RDF/OWL stuff as an addition. 
Interestingly there is also a Paper about BibtexML:
https://www.researchgate.net/publication/2564256_BIBTEXML_An_XML_Representation_of_BIBTEX

From a quick look at the Code you referenced, I saw that it uses rdf-Tags...:confused:
 =||= The XMP feature is _the_ central tool to distribute PDFs with bibliographic information. I learned it from [Adrian Daerr](http://www.msc.univ-paris-diderot.fr/~daerr/index_de.html) (possibly @adriandaerr?).

I am also confused by the code and also had the strange feelings about nesting JabRef's bibtexml into rdf tags. Therefore, I proposed to focus on Dublin Core  (see above).
 =||= thanks for inviting me to the discussion! the BibTeXML we developed and implemented (http://dret.net/netdret/publications#wil01e) is a different one than the sourceforge repo. the paper is from 15 years ago, and while we used the language in a later project (http://dret.net/projects/sharef/), the software produced by that project is not really used anywhere, as far as i can tell. i did hand the sources to some people who liked it and wanted to have a bibtex-xml converter, but i don't think anybody ever made their versions public. i think our XML schema was pretty well-desgined, but it's something i haven't looked at in quite a while.
 =||= Either format you prefer to embed in PDF, would be great if it is compatible with PDF/A compliance checks.
JabRef 2.x embeds caused errors like:

> XMP metadata property used, which is not predefined in the XMP specification of January 2004. There is no XMP extension schema present in the PDF defining the use and contents of this property. Some PDF-based ISO standards require that all XMP metadata properties are either predefined or defined in an embedded extension schema.

If it will be format like BibteXML, that can be exported in xml it would be also great to have some minimal example for correct embedding it through latex with [`xmpincl`](http://ctan.org/pkg/xmpincl) or [`hyperxmp`](http://ctan.org/pkg/hyperxmp) packages. Use case: compiling thesis with embeded metadata precomposed with JabRef.
 =||= After dealing with this in #1096 I think the most portable solution would be to drop the JabRef bibteXMP and to encode everything into Dublin core (which we already do on top of our custom serialization).

That is, if we do not decide to drop the XMP functionality completely.
 =||= Some info about correct storage of xmp inside pdf (to be compatible with pdf/a for example) can be found with samples at http://www.pdflib.com/knowledge-base/xmp-metadata/xmp-in-pdfa/
Here goes free xmp validator: http://www.pdflib.com/knowledge-base/xmp-metadata/free-xmp-validator/
Some java code samples can also be found at that website.
 =||= Idea (as discussed with @hummelriegel): Add bibtexs of cited entries to the PDF. This is especially useful for a self-written paper.
 =||= Further options include bibtexml and MODS. I think, dublin core is still the way to go as it is standards-based. We should go in this direction. =||= Refs https://github.com/koppor/jabref/issues/6 =||= Hi guys. I am not developer. I am just another user. I really hope that you **maintain the XML feature**. This one of the most important unique feature of Jabref that keep me come back time and time again (after using great reference manager like Bookends). The XML is useful not just for sharing Pdf files. **Embedding the information into the Pdf is very useful for powerful search tools like Deveonthink[Mac], Spotlight[MaC], dtSearch[Windows].** With the embedded data, it is possible to search Pdf files by their author, title and the like data. In addition, re-generating the Jabref library from the pdf files (incase the library is corrupted or deleted) is possible with the embedded data. I had a couple of cases where my pdf files get dissociated from the reference. I drag them back. Voilà, I have the whole reference. This is just so great.  =||= Hi dellu. Thanks for the praise! And no worries, we have no intentions of removing support for this feature. Quite the contrary, we would like to update and improve it. Unfortunately, this has so far failed due to issues in the libraries that we use for this functionality. As a result, I assume that there will be no significant changes here in the near future. =||= Thank you @lenhard. I am glad you are going to keep the feature. 

What do you guys think of [this](http://www.molspaces.com/d_cb2bib-metadata.php) ?
They also write the metadata into the file using ExifTool. They use the standard bibtex tags. The standard Bibtex is  nice.  =||= @Dellu 

Interesting link, thanks! Unfortunately, it will not be easy to interact with that tool or the ExifTool. The former is written in C++ and the latter in Perl, whereas JabRef is written in Java. There is always a way around the language differences, but in my point of view we should stick to the Java ecosystem and build a JabRef where everything is closely integrated and without language-related friction.

Other developers might have a different opinion, though. =||= Together with @snisnisniksonah I am investigating whether we can use Dublin Core.

Current steps:

1. Read/write PDF annotations using Dublin Core using PDFBox 2.x (refs https://github.com/JabRef/jabref/pull/1096)
2. Extract command line tool to convert old PDF annotations to the new format (Refs https://github.com/JabRef/jabref/pull/266#issuecomment-151827312) -> XMPUtil will released separately.

Results:
- JabRef 4.x depending on PDFBox 2.x
- XMPUtils depending on PDFBox 1.x
 =||= Nice! I think the XMPUtil is not that important since in most cases you can just write the information again to the PDF using Dublin Core and thus overwriting / ""converting"" the old XMP data. =||= Note to self: Do not forget https://github.com/JabRef/jabref/issues/938#issuecomment-232652848. pdflatex can easily do that: [authorarchive](https://github.com/adbrucker/authorarchive). Check the example PDF. =||= "[WIP] Dublin Core"Fixes #938 : Only supporting [Dublin Core](https://en.wikipedia.org/wiki/Dublin_Core)

Removed JabRef namespace for XMP 'xmlns:bibtex'. 
Removed some unused methods in gui/importer/EntryFromPDFCreator.java (discussed with @koppor and @stefan-kolb)
Deleted tests for XMPUtil. (New ones are in progress).

<!-- describe the changes you have made here: what, why, ... -->


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Johannes Mannerjohannes-manner02/20/18, 01:59:12 PM
3613.03718Add cleanup operation that replaces ligatures"We should add a cleanup operation that replaces unicode ligatures such as `ﬁ` (this is one character!) with their normal ""expanded form"", i.e. `fi` (two characters). Since they are hard to spot, result in compile errors and are not needed, this cleanup should be added to the list of recommended cleanups for both biblatex and bibtex.""As the Unicode consortium https://www.unicode.org/faq/ligature_digraph.html generally avoids these ligatures, there are only a few for compatibility reasons:
https://en.wikipedia.org/wiki/Typographic_ligature#Ligatures_in_Unicode_(Latin_alphabets) =||= "Add cleanup operation for replacing ligatures"Fixes #3613

I have used the mapping listed here: https://en.wikipedia.org/wiki/Typographic_ligature#Ligatures_in_Unicode_(Latin_alphabets)

Please note that german users might be surprised by how this replaces the letter `ß`.

----

- [X] Change in CHANGELOG.md described
- [X] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jörg Lenhardlenhard02/14/18, 01:33:31 PM
2831.03721"Run ""Abbreviate journal names"" in parallel""JabRef 3.8.2
windows 10 10.0 amd64 
Java 1.8.0_131

As far as I can tell, the ""Abbreviate journal names"" function in JabRef is currently run serially. While this is fine for smaller databases, it can pose a serious performance problem when dealing with large (>10,000 entries) databases. I propose to run this function in parallel - this should speed up things quite a lot, I guess.""Sounds like an good idea. Not having checked the code it should be easy to delegate this work to the JabrefExecutorService. =||= This should be fixed in the latest development version thanks to a contribution by @Brainsucker92. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= There is also a koppor issue related to that =||= I can confirm that the ""Abbreviate journal names (ISO)"" is run in parallel on:

JabRef 4.2-dev--snapshot--2018-02-15--master--36e4f0e56
Windows 10 10.0 amd64 
Java 1.8.0_161

There appear to be some issues (?), though: Even when the abbreviation process is technically finished (i. e. all possible abbreviations have been carried out) as indicated by the status message, JabRef continues to use all the cores (at max. load) for quite some time afterwards. Eventually, JabRef will stop using all the cores and the CPU load drops again. Is this behaviour intended? =||= Well, I can confirm the abbreviation process is definitely running parallel. I tested abbreviating 30.000 entries  which takes about 90 seconds to process at nearly 100% load on my computer. After the abbreviation is done it drops back to normal load. =||= "[WIP] Fix for issue 2831"Fixes #2831 

Added new method _executeAndReturn_ to the JabRefExecutorService that allows to run callables that return a value when the computation is completed. Using this method the abbreviations in _AbbreviateAction.java_ should run parallel now.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Brainsucker9202/15/18, 05:00:04 PM
3323.03729Jabref rewrites the entire journal list on addition"JabRef versionJabRef 4.0
Mac OS X 10.13 x86_64 
Java 1.8.0_144

I was surprised that the files from abbrv.jabref.org were rewritten in a randomised order.  This happens under serious CPU and memory usage.  I suppose this is not intended.


Steps to reproduce:

1. clone JabRef/abbrv.jabref.org
2. Select: Options - Manage journal abbreviations
3. Add one of the journal abbreviations
4. Click save changes. In Task Monitor I now see memory jumps from about 200MB to >1GB, CPU load > 100% 
5. The file is now changed with entries in randomised order
6. Possible related - after doing this Jabref takes forever to quit - like minutes.  After the window closes the symbol still stays in the task bar.  Still the same memory and CPU load.
7. If the process is killed at next start the journal abbreviations are not in the list and the process needs to be repeated.


`head journal_abbreviations_ams.txt` now looks like this:

```
Philosophy of Science = Philos. Sci.
Philosophia Naturalis = Philos. Natur.
MIT Press Series in Artificial Intelligence = MIT Press Ser. Artificial Intelligence
Acta Academiae Aboensis = Acta Acad. Abo. Ser. B
Advances in Chemical Physics = Adv. Chem. Phys.
Cahiers de Topologie et Géométrie Différentielle Catégoriques = Cahiers Topologie Géom. Différentielle Catég.
Malaysian Mathematical Society = Bull. Malaysian Math. Soc. (2)
ASA-SIAM Series on Statistics and Applied Probability = ASA-SIAM Ser. Stat. Appl. Probab.
Nonlinear Analysis = Nonlinear Anal.
Problems of Information Transmission = Problems Inform. Transmission
```
""The code that does the actual writing of the abbreviations is actually quite simple: 

https://github.com/JabRef/jabref/blob/1751cba4d3a2dde892ac8472bb5766819b0a2559/src/main/java/org/jabref/logic/journals/AbbreviationWriter.java#L29-L38

I don't see an immediate problem in it and the performance problems might simply come from the fact that there are so many abbreviations (around 14 000) if I recall it correctly. Last time I dealt with this, I think also Notepad++ had problems processing the file. This is just a guess, but we might be able to improve this if we compute the string representation before passing it to `writer.write()` and calling this method only once.

I am unsure as to why the sorting is lost. This needs further investigation. =||= Are the abbreviations somewhere read or stored in a HashMap ? That might explain the different order =||= Regarding the performance issue: Has the following suggestion already been incorporated into JabRef?
https://github.com/JabRef/jabref/issues/2831 =||= From user side I would have two suggestions:


1. as it is not intended to change the files - would it be possible to add them read only?
2. as these files are provided by jabref and suggested in the documentation. I think it would make sense either to provide files that don't cause performance issues or clearly point that out in the documentation. =||= @AEgit As far as I can see this has not yet been addressed.

@bdcaf Regarding 2.: Can you suggest how to provide files that don't cause performance issues? We can delete 75% of the abbreviations. Then performance issues are gone, but that's surely not the right solution. Let me make this clear: The performance problems stem from the fact that the list of abbreviations is so gigantic. There's probably some optimizations that we can do in the code, but that won't make the huge amount of data to process go away. I would be very happy about suggestions on how to improve the file structure! =||= Maybe I understand something wrong, but I believe the implementation flawed. To explain what I mean, see this memory profile that was collected during exactly what @bdcaf described

![img](http://i.imgur.com/5JkjdiS.png)

This shows the call-tree and you see that the memory consumption goes down to `String.replace`. What troubles me is, why `addEntry` is implemented like this

``` java
    public void addEntry(Abbreviation abbreviation) {
        Objects.requireNonNull(abbreviation);

        if (abbreviations.contains(abbreviation)) {
            Abbreviation previous = getAbbreviation(abbreviation.getName()).get();
            abbreviations.remove(previous);
           LOGGER.info(""Duplicate journal abbreviation - old one will be overwritten by new one\nOLD: ""
                    + previous + ""\nNEW: "" + abbreviation);
        }

        abbreviations.add(abbreviation);
    }
```

First the obvious part: We log every duplicate entry to the log file. While this surely was well intended, note that several ten thousand lines are written into the log-file during a run like this that should be fast.

My major question is the following: The `abbreviations` list is a `HashSet` which means it cannot contain duplicates. When I see this right, then [`equals`](https://github.com/halirutan/jabref/blob/277b40c9e79e0158d272de33e24fa7fc06af91bf/src/main/java/org/jabref/logic/journals/Abbreviation.java#L84) for `Abbreviation` is well defined by comparing the keys (and `hashCode` also).

Can someone explain why the costly battle down to `isMatched` is necessary (@simonharrer)? Why can we not simply ~~insert~~ ""remove the new entry"" and add it again?

So what I propose this change for `addEntry`:

``` java
    public void addEntry(Abbreviation abbreviation) {
        Objects.requireNonNull(abbreviation);

        if (abbreviations.contains(abbreviation)) {
//            Abbreviation previous = getAbbreviation(abbreviation.getName()).get();
            abbreviations.remove(abbreviation);
            LOGGER.info(""Duplicate journal abbreviation - old one will be overwritten by new one: "" + abbreviation);
        }

        abbreviations.add(abbreviation);
    }
``` =||= @halirutan Thanks once again for an in-depth analysis :-)

Maybe we should just remove the logging here or alternatively switch to a log level that will not execute in regular mode.

As for the removal of the abbreviation, I agree with what you write. If `contains()` returns true here, then also `remove()` will operate as expected. I do not know why there should be a need to retrieve the old abbreviation. The implementation of `equals()` in `Abbreviation` seems flawed to me, because it is just based on the `name` and not the actual `abbreviation`. But I do not know if this is intentional and what may break if we change it.

I think we should remove the logging and change the code as you described. =||= @lenhard I think there is a good reason for the `equals` in Abbreviation. When I see this right, the intention is as follows:

1. There can only be exactly one Journal XXXX, but there can be different abbreviations for it. In JabRef, we always have exactly one current abbreviation for Journal XXXX and we can
    1. insert new Journal names where we currently don't have an abbr for
    2. overwrite existing one if we need a different style

Therefore, making two ""Abbreviations"" equal by comparing their name sounds OK to me. I would have chosen a different layout for this though.

I tested my fix in mean-time and it runs in maybe 200ms for the largest of those abbr-files with no memory worth mentioning, even with logging. Maybe we should wait for some others to give their OK. =||= @JabRef/developers What do you think about the proposed solution? Can we go ahead? =||= All that increases performance is welcomed ;) =||= The fix suggested by @halirutan looks good. There are even some tests for the abbreviation stuff so I don't expect that something serious breaks.

This, however, still leaves the question why do we actually rewrite an abbreviation list that just got imported? =||= @lenhard about shortening the lists.  IMO the goal should be lists that load efficiently.  

The largest list is web of science having 87230 lines and entrez with 19506 lines.  I had a quick look at them.  There seem to be a serious number of non-english journals - I suppose they could be separated in their own files.  When I look at the webofscience files there are 5745 Proceedings, 3995 Conferences and 2028 Symopsium. Many of which having numbers or years in the full name. Maybe put these in their own file.  I'm not certain - but wouldn't it be correct to have these numbers and dates in different fields?  Then the list could be even more reduced. =||= "Improve performance for managing journal abbreviations"Fixes #3323

I was actually surprised to find that no one attacked the issue so far. These were really just a few minor changes. Ultimately, the `Abbreviation` class is still flawed, because it violates the equals contract and we use it in a `Set`. That's why the code might look strange. Nevertheless, it is the fix suggested in the issue. 

----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [X] Manually tested changed features in running JabRef
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jörg Lenhardlenhard02/16/18, 02:56:37 PM
3737.03740JabRef xjc gradle task fails due to outage of the library of congress"```
> Task :xjc
[ant:xjc] [WARNING] schema_reference.4: Failed to read schema document 'http://www.loc.gov/mods/xml.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
```

see https://www.loc.gov/

> Websites Down Feb. 16-19; Reading Rooms and Library Shop Closed Feb. 17 and 19
Due to a planned power outage, most of the Library’s public websites (loc.gov and others) will be unavailable from 7 p.m. ET, Friday, Feb. 16 through Monday, Feb. 19. The Copyright online registration system will be unavailable beginning 5 p.m., Thursday, Feb. 15 throughout the weekend.

JabRef holidays! (;

side note: we should fix such a dependency on a website being available"Damn and I was wondering what the build broke. When the website is on again we should copy that schema to the other file =||= Inline loc.org xsds"Fixes #3737 

Not sure if this works and is the way to go.
If we need to update the mods schema we need to alter the paths again.
Also, I don't know if we may inline this here."Stefan Kolbstefan-kolb02/19/18, 10:14:06 AM
3573.03743Gradle task localizationUpdate does not work`localizationUpdate` leads to resorting and adding of many language keys due to the recent changes. Thus, at the moment it is not possible to remove a pair from the english file and propagate this change to the other languages."I think, I can work on that in January. Meanwhile, you should be able to log in at crowdin and remove the key there. Need to make you maintainer there, though. =||= Please DO NOT remove obsolete keys in other language files. This is done by crowdin automatically: https://github.com/JabRef/jabref/pull/3585

I will remove the task completely or have it output that there is no need for a check, because of crowdin! =||= @koppor Right now we have tests in place that require to remove obsolete language keys from other languages. It would be nice if we could remove the `localizationUpdate` step completely (less things to do manually), but then the tests should be adopted accordingly. =||= I thought, I adapted the tests. Seems, I missed something. Have to check...

Am 05.01.2018 12:01 schrieb ""Tobias Diez"" <notifications@github.com>:

> @koppor <https://github.com/koppor> Right now we have tests in place that
> require to remove obsolete language keys from other languages. It would be
> nice if we could remove the localizationUpdate step completely (less
> things to do manually), but then the tests should be adopted accordingly.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3573#issuecomment-355528780>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTaftbvUCzp6PiQbYoCZPnhgV_ph9zcks5tHgECgaJpZM4RLq3L>
> .
>
 =||= This test fails if you remove language keys from the english file but not from the others:
https://github.com/JabRef/jabref/blob/3b2d35f28f87038b1824bf1178d264cfb1984597/src/test/java/org/jabref/logic/l10n/LocalizationConsistencyTest.java#L50-L51
(If crowdin handles this case automatically, then there is no need for this test, right?)

A few other tests still refer to the `localizationUpdate` (which should not be invoked, right?), e.g.,
https://github.com/JabRef/jabref/blob/3b2d35f28f87038b1824bf1178d264cfb1984597/src/test/java/org/jabref/logic/l10n/LocalizationConsistencyTest.java#L140-L142
 =||= It is not as straight-forward as I thought.

English escapes more characters than non-English:

    Executing\ command\ \""%0\""...=Executing command \""%0\""...

German:

    Executing\ command\ ""%0""...=AusfÃ¼hrung des Kommandos ""%0""... =||= Any updates on this? I think we don't need the script anylonger or? =||= An admin might still need it. Quoting: https://github.com/JabRef/jabref/pull/3635#issuecomment-357869322

> That task won't be necessary for all contributors, only for maintainers wanting to cleanup the files (like sorting, ...). However, this is not absolutely necessary anymore since Crowdin basically takes care.

I think, I just close it and put an ""on-hold"" label on it. =||= Maybe we need to rework the quotes in the English file. =||= Finally I found some time to take a closer look at the syncLang.py script. To be honest, it's pretty difficult to determine the exact origin of this problem. My very first thought was that there might be a problem with different character encodings. The script always assumes the content of the property files is written in UTF-8 encoding. But Eclipse is using ISO-8859-1 encoding by default which is determined by the content type. After some more research within the script I found some really nasty little mistake, if you have a closer look at lines 52 and 53:
https://github.com/JabRef/jabref/blob/01d3d4b95b9295e681da5e20f0b0c7c3d07c5e22/scripts/syncLang.py#L52-L53
I'm not 100% certain if this will fix the whole problem but we're going to find out real soon, I guess.

I pushed the fix for this issue here:
https://github.com/Brainsucker92/jabref/commit/ea5d56e4a7a8bcb25c2bb00dc3651c807bc9739e

Additionally I added a new class that allows the script to locate it's position within the repository.
This might be helpful at some point.

UPDATE:

I DID IT! I found a logical issue deep within the merging process of the files. Have a look here:

https://github.com/JabRef/jabref/blob/01d3d4b95b9295e681da5e20f0b0c7c3d07c5e22/scripts/syncLang.py#L307-L308

Missing keys are added as empty Strings to the dictionary... So far so good. But then:

https://github.com/JabRef/jabref/blob/01d3d4b95b9295e681da5e20f0b0c7c3d07c5e22/scripts/syncLang.py#L314-L321

Keys that contain empty Strings are not written to the new properties file which leads to missing keys over and over again. I simply removed the if and everything worked perfectly fine.

New commit:
https://github.com/Brainsucker92/jabref/commit/ba7d87d2415c54992952b89cdc4673194a5ee929 =||= "Fix syncLangPy script "Fixes #3573 

As already mentioned in my comment here: https://github.com/JabRef/jabref/issues/3573#issuecomment-366490651
there was a logical issue hidden within the merging process when synchronizing the files. I fixed this issue and added/changed a couple of other things.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Screenshots added (for bigger UI changes)
- [x] Manually tested changed features ~~in running JabRef~~
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Brainsucker9203/09/18, 09:24:10 AM
3146.03751Menu bar at wrong position on Mac OS"JabRef version 4.0-beta3
The menu bar is included into the main windows as it should be fixed into the Mac OS menu bar.

""@chochreiner  Do you know if this is possible/was possible with java? =||= I don't know. Just the menu bar in macOS is not included in the current window but stack into the upper bar of the screen.
 =||= @cedmfr Can you provide a screenshot to clarify the problem? For me the title bar is quite where I would expect it.

JabRef 4.0-dev
Mac OS X 10.12.6 x86_64 
Java 1.8.0_144 =||= Please find attached a screenshot of the trouble. In previous Jabref versions those 2 bars were merged on the top bar of macOS.
<img width=""1920"" alt=""capture d ecran 2017-08-28 a 17 31 16"" src=""https://user-images.githubusercontent.com/31250593/29780741-242a4bb6-8c17-11e7-9851-f6e802adfaa4.png"">
 =||= @cedmfr thanks for the clarification, I'll investigate the issue. =||= This could be a consequence of the transition to JavaFX (as the whole application is now started under the JavaFX umbrella https://github.com/JabRef/jabref/blob/45031170ccc6285505599bbdfd0a3445024e31d9/src/main/java/org/jabref/JabRefMain.java#L40). Maybe a related/helpful discussion: https://stackoverflow.com/questions/22569046/how-to-make-an-os-x-menubar-in-javafx =||= yes, this is due to the migration to JavaFX.

The current approach in JabRefGUI.java only works with swing.

`       // This property is set to make the Mac OSX Java VM move the menu bar to the top of the screen
        if (OS.OS_X) {
            System.setProperty(""apple.laf.useScreenMenuBar"", ""true"");
        }
`


So far I have not found any possibility how to restore this feature for the JMenuBar within a JavFX application.
I fear this can be only fixed as soon as the JMenuBar is also migrated to a JavaFX component.
 =||= Just curious if there happens to be a chance to resolve this? It seems the above stackoverflow link offers several possible solutions. Would any of them work? =||= @jiajunwu I have tried this a month ago with some hacks as decribed in the stackoverflow threads, but it seems like we have to go the long way by implementing the whole menubar in javafx to get this working (as @chochreiner  suggested).
We are quite happy to have 4.0 released, as we (hopefully) can now focus on such improvements...

 =||= Thank you @lynyus . It'd be great to see this happen; I like 4.0 a lot and to me this is the only part where 3.6 is doing better on..
 =||= This still persists, gave it another try today, but to no avail (; =||= Seems like we need to migrate the menubar to javafx first =||= Him could @jiajunwu  @LinusDietz  could you please check if it works in the javafx-global version?

Could you please check the build from https://builds.jabref.org/javafxGlobalEverything/ ?. Thanks! Note this version is in a very early beta stage and might not work as expected. See #3621 for further details. =||= ![screen shot 2018-02-20 at 13 31 14](https://user-images.githubusercontent.com/1254003/36424054-61fc1914-1642-11e8-9a94-e316e08c1c3e.png)

not quite. The actual titlebar of the MacOS just says ""JabRef"". =||= This should be fixed in the latest development version. Could you please check the build from https://builds.jabref.org/maintable-beta/. Thanks! Note this version is in a very early beta stage and might not work as expected. See #3621 for further details. =||= "Add the Menubar to the Titlebar in MacOS"Fixes #3146

![titlebar](https://user-images.githubusercontent.com/1254003/36424759-bf93ba9e-1644-11e8-828d-0d46d64dc343.png)"Linus DietzLinusDietz02/20/18, 01:17:01 PM
3757.03764Add *.* to the Import File Filter Dialog"From the forum:

http://discourse.jabref.org/t/importing-bibtex-files-with-jabref-4-1-on-macos-sierra-10-12-6/1060

Currently JabRef only allows the import of files with the list of supported file extensions.
So, as there is now file extension .bibtex for bib files import we should add a *.* (All File types) filter.
The import should then use the automatism (as it's now the case for all avaiable import formats)"Added <any file type> to the Import File Filter Dialog."Added *.* (any file) to the File Filter Dialog. Now you can choose any file to import to try to import to your library. Fixes #3757.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Stefan Gerzmanngerzmasn02/23/18, 04:09:00 PM
4086.03765timestamp field is not set when drag'n'drop is used to import files"I am using JabRef version 4.4-dev--snapshot--2018-06-01--master--26bb54598 on Ubuntu 16.04

Steps to reproduce:

1. Enable the Preferences/General/Mark new entries with addition date. (I am using `yyyy-MM-dd HH:mm` as format but my guess is that's not relevant). Additionally, mark the overwrite option.
2. Drag'n'drop a file onto the entry table and let the importer do its work.
3. Notice a new entry that has no `timestamp` field set and mourn.

(I have not tested a manual import via the file menu yet and have to run...)

Also, I would love to see the addition marking enabled by default and the default format to include a time in addition to the date. They work way better than the ""marking"" options to recognize newly added references. Cheers.""@Siedlerchr do you see the possibility to fix this as part of #3765 ? =||= Sounds more like an importer feature/problem for me. =||= FWIW, I have just tested another import via `File/Import into current library` and that creates the timestamp just fine (after displaying an import selection dialog that is not visible for d&d operations). I am a n00b jabref user but from my perspective these two action should trigger the same behavior IMHO (maybe not if the drop happens over a preexisting entry but certainly when dropped at the bottom of the table where it is ""empty""). =||= Okay thanks for your feedback! I will take a look at that  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Implement drag and drop for maintable"Drag And Drop Functionality
- [X]  MainTable to Group
~~- [ ] MainTable to MainTable (For reodering?Useful?)~~ Not useful
- -  [x] Expand group node and children on drag over 

- [x]  Files to Maintable 
- -  [x] Add File to Entry
- -  [x] Create new Entry from PDF/XMP
- -  [ ] Show Merge dialog if entry already exists


- [x] Files to EntryEditor (mostly PDF)
- - [x] fix folder with filename is created #4087
- [x] Files to Preview
- [x] `.bib` files to maintable -> Import
- [x] `.bib` files to tabbed pane -> open 


Fixes #4086 
Fixes #3923 
Fixes #3258 
Fixes #4087 

Current behaviour Windows: Shift or no modifer on maintable (move)
 - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>ALT</kbd> on maintable: move file to file dir and link (only windows)
<kbd>CTRL</kbd> on maintable: copy file to file dir (if not exists)  and link
Bib-File dragged to maintable: Import contents

Xubuntu: No modifier (Copy)
  - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>Shift </kbd> on maintable :  move to file dir 

Preview Panel works the same as above except it doesn't handle bib files import,

BibFile dragged below tab pane/table header -> Open bib libray 

General Tab Files -> Link file 


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/19/18, 08:33:46 PM
3923.03765Dropping a PDF onto the File entry in General is inconsistent with standard attach method"- Issue persists in current master

JabRef Version 4.1, Windows 7, Java x64 Version 8 Update 162

Steps to reproduce:

1. Drag and drop a PDF onto the file textbox in General for an existing DB entry
2. The file will be added with the full path. In contrast adding the file via Right Click->Attach File will produce an entry with the correct relative path (relative to Library Properties->General File Directory).

![image](https://user-images.githubusercontent.com/2142589/38302458-10a681e8-3803-11e8-817f-366b577a9073.png)""This issue is connected to #121. =||= Hi, thanks for the report: I am currently on reworking that feature in https://github.com/JabRef/jabref/pull/3765 for the new maintable-beta release (https://github.com/JabRef/jabref/pull/3621) 
It will be made consistent as suggested in the comment by koppor 
 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Implement drag and drop for maintable"Drag And Drop Functionality
- [X]  MainTable to Group
~~- [ ] MainTable to MainTable (For reodering?Useful?)~~ Not useful
- -  [x] Expand group node and children on drag over 

- [x]  Files to Maintable 
- -  [x] Add File to Entry
- -  [x] Create new Entry from PDF/XMP
- -  [ ] Show Merge dialog if entry already exists


- [x] Files to EntryEditor (mostly PDF)
- - [x] fix folder with filename is created #4087
- [x] Files to Preview
- [x] `.bib` files to maintable -> Import
- [x] `.bib` files to tabbed pane -> open 


Fixes #4086 
Fixes #3923 
Fixes #3258 
Fixes #4087 

Current behaviour Windows: Shift or no modifer on maintable (move)
 - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>ALT</kbd> on maintable: move file to file dir and link (only windows)
<kbd>CTRL</kbd> on maintable: copy file to file dir (if not exists)  and link
Bib-File dragged to maintable: Import contents

Xubuntu: No modifier (Copy)
  - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>Shift </kbd> on maintable :  move to file dir 

Preview Panel works the same as above except it doesn't handle bib files import,

BibFile dragged below tab pane/table header -> Open bib libray 

General Tab Files -> Link file 


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/19/18, 08:33:46 PM
3258.037654.0 groups view: no automatic unfold while dragging"Using 4.0 stable on Windows 10.

When I drag a bib-entry/publication over a un-folded group which has sub-groups I would expect (compared to other software) that the group will fold after some seconds automaticly.

I would use this future to drag & drop entries to sub-groups which are hidden in un-folded groups.""The problem is still there in 4.3.1 (Win64). =||= This issue might be related to the same problem that is reported here:
https://github.com/JabRef/jabref/issues/2869 =||= There's already a PR for drag and drop on the maintable which also covers groups. Would you mind to link this as well? =||= Done: https://github.com/JabRef/jabref/pull/3765#issuecomment-407892996 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Implement drag and drop for maintable"Drag And Drop Functionality
- [X]  MainTable to Group
~~- [ ] MainTable to MainTable (For reodering?Useful?)~~ Not useful
- -  [x] Expand group node and children on drag over 

- [x]  Files to Maintable 
- -  [x] Add File to Entry
- -  [x] Create new Entry from PDF/XMP
- -  [ ] Show Merge dialog if entry already exists


- [x] Files to EntryEditor (mostly PDF)
- - [x] fix folder with filename is created #4087
- [x] Files to Preview
- [x] `.bib` files to maintable -> Import
- [x] `.bib` files to tabbed pane -> open 


Fixes #4086 
Fixes #3923 
Fixes #3258 
Fixes #4087 

Current behaviour Windows: Shift or no modifer on maintable (move)
 - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>ALT</kbd> on maintable: move file to file dir and link (only windows)
<kbd>CTRL</kbd> on maintable: copy file to file dir (if not exists)  and link
Bib-File dragged to maintable: Import contents

Xubuntu: No modifier (Copy)
  - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>Shift </kbd> on maintable :  move to file dir 

Preview Panel works the same as above except it doesn't handle bib files import,

BibFile dragged below tab pane/table header -> Open bib libray 

General Tab Files -> Link file 


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/19/18, 08:33:46 PM
4087.03765When drag and drop to copy pdf folder is created"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

JabRef 4.3-dev--snapshot--2018-05-28--master--bf7fb5168
Linux 4.14.47-1-manjaro amd64 
Manjaro GNOME Edition (17.1.10)
Java 1.8.0_172
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->

When I drop a pdf file on a reference and attach it, a folder is attached with the chosen name instead of the file. This only happens when choosing to copy the pdf, moving works as expected.


Steps to reproduce:

1. Drag PDF to reference from nautilus 
2. Choose ""only attach PDF""
3. Choose ""copy file to directory"" and accept the suggested renaming
4. Accept the following popup
5. There is a folder in the default pdf location with the name of the pdf file. In jabjref it looks like a pdf is attached, but opening it results in an error as expected.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
21:12:07.156 [JabRef CachedThreadPool] ERROR org.jabref.logic.util.io.FileUtil - Copying Files failed.
java.nio.file.FileSystemException: /mnt/3TB/cloud/username/Work/Academicmaterial/jabref/Goldgeier2001.pdf: Is a directory
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:91) ~[?:1.8.0_172]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_172]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_172]
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) ~[?:1.8.0_172]
	at java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:434) ~[?:1.8.0_172]
	at java.nio.file.Files.newOutputStream(Files.java:216) ~[?:1.8.0_172]
	at java.nio.file.Files.write(Files.java:3292) ~[?:1.8.0_172]
	at org.jabref.logic.util.io.FileUtil.copyFile(FileUtil.java:164) ~[Jabref.jar:?]
	at org.jabref.gui.externalfiles.DroppedFileHandler.doCopy(DroppedFileHandler.java:559) ~[Jabref.jar:?]
	at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:207) ~[Jabref.jar:?]
	at org.jabref.gui.externalfiles.DroppedFileHandler.linkPdfToEntry(DroppedFileHandler.java:174) ~[Jabref.jar:?]
	at org.jabref.pdfimport.PdfImporter.importPdfFilesInternal(PdfImporter.java:134) ~[Jabref.jar:?]
	at org.jabref.pdfimport.PdfImporter.importPdfFiles(PdfImporter.java:88) ~[Jabref.jar:?]
	at org.jabref.gui.groups.EntryTableTransferHandler.lambda$handleDraggedFiles$0(EntryTableTransferHandler.java:306) ~[Jabref.jar:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_172]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_172]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_172]
  ```
</details>""Yes, we just noticed the same issue.
When you move the file then everything works as expected, when you copy the file then the file is not actually moved but a folder with the file name is created. =||= Thanks for your report, I will take a look at that, as we are working on an improvement of the drag and drop about files =||= Refs #3765  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= I just installed the dev version JabRef_windows-x64_5_0-dev--snapshot--2018-08-20--master--cf3fab884, and tried to drag and drop a pdf file onto a reference. Drag and drop does not work and so I couldn't test if the actual issue with the created folder when you copy a pdf file is resolved =||= Where exactly did you drop the pdf file?
Note that the default behavior of JabRef changed. Dropping on the main table will try to create an entry from the pdf.
Dragging on the entry preview or general tab should move the file to the file dir =||= Hi, dropping on the entry editor works now again =||= Hey,
I am using Jabref 4.3.1 and the problem still exists. As described, it appears only when I use the copy option.

JabRef 4.3.1
Ubuntu 14.04
Linux 4.4.0-131-generic amd64 
Java 1.8.0_181 =||= @teertinker  Please use the latest development version 5.x http://builds.jabref.org/master/
 =||= I am sorry for commenting on such an old thread, but I have the same problem. Version 4.3 creates an empty folder, and after downloading the new (development) version 5.0 I am not able anymore to create a new entry just by drag and drop.

I've read this, but I don't know what is the ""main table"" apparently: 

> Dropping on the main table will try to create an entry from the pdf.
Dragging on the entry preview or general tab should move the file to the file dir

 Where should I drop the file? It only accept it on an existing article entries, and it merely links that entry with a copy created in the Jabref folder. =||= "Implement drag and drop for maintable"Drag And Drop Functionality
- [X]  MainTable to Group
~~- [ ] MainTable to MainTable (For reodering?Useful?)~~ Not useful
- -  [x] Expand group node and children on drag over 

- [x]  Files to Maintable 
- -  [x] Add File to Entry
- -  [x] Create new Entry from PDF/XMP
- -  [ ] Show Merge dialog if entry already exists


- [x] Files to EntryEditor (mostly PDF)
- - [x] fix folder with filename is created #4087
- [x] Files to Preview
- [x] `.bib` files to maintable -> Import
- [x] `.bib` files to tabbed pane -> open 


Fixes #4086 
Fixes #3923 
Fixes #3258 
Fixes #4087 

Current behaviour Windows: Shift or no modifer on maintable (move)
 - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>ALT</kbd> on maintable: move file to file dir and link (only windows)
<kbd>CTRL</kbd> on maintable: copy file to file dir (if not exists)  and link
Bib-File dragged to maintable: Import contents

Xubuntu: No modifier (Copy)
  - Create new entry from XMP content (if pdf)
    -    XMP content found: Show dialog with content and option to import entry or to create file
<kbd>Shift </kbd> on maintable :  move to file dir 

Preview Panel works the same as above except it doesn't handle bib files import,

BibFile dragged below tab pane/table header -> Open bib libray 

General Tab Files -> Link file 


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/19/18, 08:33:46 PM
3754.03773No-GUI mode (--nogui) should not try to use DISPLAY"JabRef version 4.1 on RedHat 7 using JRE 1.8.0-162


Steps to reproduce:

1. use a headless (RH) Linux system that provides no DISPLAY
2. run only command line feature: 
3. java -jar JabRef-4.1.jar -n --help

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>JabRef does not run when invoked with the --nogui option and no DISPLAY is available.</summary>
  
  ```
Exception in thread ""main"" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:767)
Caused by: java.lang.UnsupportedOperationException: Unable to open DISPLAY
        at com.sun.glass.ui.gtk.GtkApplication.<init>(GtkApplication.java:68)
        at com.sun.glass.ui.gtk.GtkPlatformFactory.createApplication(GtkPlatformFactory.java:41)
        at com.sun.glass.ui.Application.run(Application.java:146)
        at com.sun.javafx.tk.quantum.QuantumToolkit.startup(QuantumToolkit.java:257)
        at com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:211)
        at com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:675)
        at com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:337)
        at com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:328)
        ... 5 more
  ```
</details>""Thanks for the report.  Definitely a thing to consider.  From what I saw, TestFX is relying on monocle to run in headless environment 
https://github.com/TestFX/Monocle =||= Hi, I  think I actually found a way which could work:
But in my test I still got an exception from the Telemetry client, I will try around  if I can disable that in headless mode

You first need to install `openjdk8` and `openjfx`

Then you can start it from commandline using this options:
``` 
java -Dtestfx.robot=glass -Dglass.platform=Monocle -Dmonocle.platform=Headless -Dprism.order=sw -jar JabRef--master--latest.jar -n --help
``` 




 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= Thanks, it was working as soon as I had manually downloaded openjfx-monocle to .../jre/lib/ext/ ( as indicated by https://jeromecambon.wordpress.com/2016/03/15/testing-javafx-in-headless-mode/ )

 =||= "Make JabRef cli work in headless mode"Don't call Telemetry when headless mode

Fixes #3754 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr02/24/18, 08:38:44 PM
3799.03800"OSX: With maintable-beta, JOptionPane for the ""load backup file""  on startup does not show up and freezes JabRef""I am sure now that this is indeed a problem. I suspect this issue was introduced after we made JabRef an FX application. Now, the initial confirmation dialog if I want to load a `.sav` bibliography does not show up any longer. The window is not hidden and JabRef goes in a waiting loop that I cannot leave.

I believe the issue here is that we still use Swing for the confirmation dialog in 

```
org.jabref.gui.dialogs.BackupUIManager#showRestoreBackupDialog
```
and in some other places too.

How to reproduce:

- System Mac OS X 10.13.3 x86_64, Java 1.8.0_162, maintable-beta branch
- Leave JabRef dirty once so that you have a `.sav` file for your opened bibliography
- Start JabRef either through the IDE, terminal or by double-clicking on the jar.

This issue does not appear on Linux. I have not tested Windows."On windows I can not reproduce this. But shouldn't be hard to replace the fileDialog.  I will create a PR for this and then you can test this again under OSX and hook into that PR. =||= Yes, it would be nice to replace all the swing confirmation/warning/error dialogs by their JavaFX equivalent (using the `DialogService` interface).  =||= @Siedlerchr Thanks. I have verified this now on a second OSX machine. Our master-branch works but the maintable-beta goes into a waiting loop and the dialog never shows up. =||= Did you try out the branch from my pr?  If it works?  =||= Later. After dinner.  =||= Change open last edited dialgo to javafx"Fixes #3799 @halirutan  Have a look if this works for you

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/02/18, 09:29:11 PM
3796.03820JabRef throws exception when started in another language with missing fxml localization"Tried to test #3795 
@koppor  It might actually be useful to add the missing keys to other language files.


```

16:07:34.023 [JavaFX Application Thread] ERROR org.jabref.gui.util.ControlHelper - Problem loading fxml for control
javafx.fxml.LoadException: Resource ""Close window"" not found.
/E:/workspace/JabRef/jabref/bin/main/org/jabref/gui/entryeditor/EntryEditor.fxml:22

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2597) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.access$100(FXMLLoader.java:103) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader$Element.resolvePrefixedValue(FXMLLoader.java:424) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader$Element.processValue(FXMLLoader.java:363) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader$Element.processPropertyAttribute(FXMLLoader.java:325) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader$Element.processInstancePropertyAttributes(FXMLLoader.java:235) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader$ValueElement.processEndElement(FXMLLoader.java:767) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.processEndElement(FXMLLoader.java:2823) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2532) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409) ~[jfxrt.jar:?]
	at org.jabref.gui.util.ControlHelper.loadFXMLForControl(ControlHelper.java:29) ~[main/:?]
	at org.jabref.gui.entryeditor.EntryEditor.<init>(EntryEditor.java:76) ~[main/:?]
```
```""The relevant code in the FXMLLoader is 
````java
400  } else if (aValue.startsWith(RESOURCE_KEY_PREFIX)) {
401      aValue = aValue.substring(RESOURCE_KEY_PREFIX.length());
402      if (aValue.length() == 0) {
403          throw new LoadException(""Missing resource key."");
404      }
405      if (aValue.startsWith(RESOURCE_KEY_PREFIX)) {
406          // The prefix was escaped
407          warnDeprecatedEscapeSequence(RESOURCE_KEY_PREFIX);
408          return aValue;
409      } else {
410          // Resolve the resource value
411          if (resources == null) {
412              throw new LoadException(""No resources specified."");
413          }
414          if (!resources.containsKey(aValue)) {
415              throw new LoadException(""Resource \"""" + aValue + ""\"" not found."");
416          }
418          return resources.getString(aValue);
419      }
420  } else if (aValue.startsWith(EXPRESSION_PREFIX)) {
````
Hence, as soon as the resource does not contain the language key, the load exception is thrown.  There are two ways to fix this:
- Add (empty) key-value pairs for every string and for every language
- Always return true here:
https://github.com/JabRef/jabref/blob/cf8e6aac8263ce30eb2b042c8aacf2d88bbac4c8/src/main/java/org/jabref/logic/l10n/Localization.java#L243-L245 =||= The problem is now that the Duplication finder complains about duplicates and I think this is a problem with the merge of #3798 =||= Which duplicates? Did git merge something wrong? We should remove the
untranslated keys again from the translation files or are they already
removed?

Am 09.03.2018 18:03 schrieb ""Christoph"" <notifications@github.com>:

> The problem is now that the Duplication finder complains about duplicates
> and I think this is a problem with the merge of #3798
> <https://github.com/JabRef/jabref/pull/3798>
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3796#issuecomment-371874917>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTafolXpEXqSDFxdSaKvhBy46zq7pgfks5tcrXHgaJpZM4SaB10>
> .
>
 =||= We should remove the English values from the tl property again. Then the test should be green again (git merge probably kept the English values I initially added to make Jabref work)  =||= "Fixes #3796: Pretend that we have every translation for every key"Fixes #3796

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez03/09/18, 09:49:57 AM
3818.03821Exception when trying to save linked file"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [X ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef 4.2-dev--snapshot--2018-03-06--master--bb471a26d
Linux 4.4.0-104-generic amd64 
Java 1.8.0_161


Steps to reproduce:

1. Create an entry with a URL leading to a PDF file, like this: https://www.gla.ac.uk/media/media_452489_en.pdf
2. Right-click the entry in the entry table.
3. Choose ""Copy linked files to folder..."".
4. Choose your home folder.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
File: copyfilesdialog.fxml not found, attempting with camel case
10:16:05.694 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalStateException: Cannot load org.jabref.gui.copyfiles.copyfilesdialog
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:101) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at com.airhacks.afterburner.views.FXMLView.initializeFXMLLoader(FXMLView.java:125) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at com.airhacks.afterburner.views.FXMLView.getView(FXMLView.java:137) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at org.jabref.gui.AbstractView.getView(AbstractView.java:28) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at org.jabref.gui.copyfiles.CopyFilesDialogView.show(CopyFilesDialogView.java:25) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at org.jabref.gui.copyfiles.CopyFilesAction.showDialog(CopyFilesAction.java:63) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at org.jabref.gui.copyfiles.CopyFilesAction.lambda$startServiceAndshowProgessDialog$3(CopyFilesAction.java:58) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_161]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_161]
Caused by: javafx.fxml.LoadException: 
file:/home/erelsgl/Dropbox/papers/JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar!/org/jabref/gui/copyfiles/CopyFilesDialog.fxml

	at javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2601) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2571) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409) ~[jfxrt.jar:?]
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	... 13 more
Caused by: java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_161]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_161]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_161]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_161]
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:71) ~[?:1.8.0_161]
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source) ~[?:?]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_161]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_161]
	at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:275) ~[?:1.8.0_161]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409) ~[jfxrt.jar:?]
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	... 13 more
Caused by: java.lang.NullPointerException
	at java.util.AbstractCollection.addAll(AbstractCollection.java:343) ~[?:1.8.0_161]
	at javafx.collections.ModifiableObservableListBase.addAll(ModifiableObservableListBase.java:99) ~[jfxrt.jar:?]
	at javafx.beans.binding.ListExpression.addAll(ListExpression.java:266) ~[jfxrt.jar:?]
	at org.jabref.gui.copyfiles.CopyFilesDialogViewModel.<init>(CopyFilesDialogViewModel.java:14) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at org.jabref.gui.copyfiles.CopyFilesDialogController.initialize(CopyFilesDialogController.java:34) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_161]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_161]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_161]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_161]
	at sun.reflect.misc.Trampoline.invoke(MethodUtil.java:71) ~[?:1.8.0_161]
	at sun.reflect.GeneratedMethodAccessor6.invoke(Unknown Source) ~[?:?]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_161]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_161]
	at sun.reflect.misc.MethodUtil.invoke(MethodUtil.java:275) ~[?:1.8.0_161]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2566) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2441) ~[jfxrt.jar:?]
	at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2409) ~[jfxrt.jar:?]
	at com.airhacks.afterburner.views.FXMLView.loadSynchronously(FXMLView.java:99) ~[JabRef-4.2-dev--snapshot--2018-03-06--master--bb471a26d.jar:?]
	... 13 more

</details>""This error has probably todo with the File Annotation Tab. One line in the code needs to be adapted  =||= Thank you for your report. This issue should be fixed now in the latest development version. Could you please check the build from http://builds.jabref.org/master/. =||= Now I do not see the exception anymore, but the file is not downloaded - I get an error dialog box saying ""No content in table"". =||= Yes, that's right. The functionality is only for copying exiting linked physical files of an entry to an external folder.
What you want to do is in the Entry  Eiditor -> general Tab -> Download from url  =||= @Siedlerchr Could you please update the dialog and show are more helpful message, something like ""no file to copy"". =||= "Fix Copy linked files dialog showing NPE when no linked files"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes #3818 
(ignore the branch name, I  thought it was a different error)

The part in the CopyTask should also be copied to the maintable beta branch. The rest is already there.


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/08/18, 10:09:50 PM
3815.03827Adjust eclipse style to intellij (line wrapping)"Has intellij one or two default indendation lines? @tobiasdiez 
I now changed to align on column

[JabRefModdedStyleSettings.xml.txt](https://github.com/JabRef/jabref/files/1791055/JabRefModdedStyleSettings.xml.txt)


![grafik](https://user-images.githubusercontent.com/320228/37120788-a68af3be-225b-11e8-874b-a7874005c6ea.png)

![grafik](https://user-images.githubusercontent.com/320228/37120852-d567d5e4-225b-11e8-91f4-88498c86fdd3.png)

![grafik](https://user-images.githubusercontent.com/320228/37120873-e470f9da-225b-11e8-9c70-d633aad4823b.png)

![grafik](https://user-images.githubusercontent.com/320228/37120884-f4e0b300-225b-11e8-8bae-2a78b9e1c458.png)

""What do you mean by ""indendation lines""?

If you did not already change it, please don't forget to tweak the ""chain and align on dot"" policies, i.e. something like
````java
object.foo().bar()
      .bar2()
      .bar3();
````

should be considered correct and not be changed. =||= Align on Dot is not a direct option in Eclipse, that's controlled by the indentation columns and wrapping polices. That's why I included a Screenshot 

But note that in your examples is only correct if all operate on the same object, if  =||= Mhh, I couldn't spot such a chain call in your screenshots. This is why I asked again. According to https://stackoverflow.com/questions/6275785/wrapping-chained-method-calls-on-a-separate-line-in-eclipse-for-java, the option `Indent on column` corresponds to the ""align on dot"" (and this option is now activated accordingly to your screenshots). Moreover, ""Line wrapping policy"" should be set to something not so aggressive. I think you should create PR with these changes. =||= @Siedlerchr can this be closed? =||= "Update Eclipse style to intellij style"Fixes #3815 
Screenshots of indentation in #3815 

(cherry pick to master afterwards)

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/14/18, 04:37:19 PM
3811.03865Exception in Entry Editor (Braces don't match)"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [ X ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

Version:

JabRef 4.1
Linux 4.4.0-104-generic amd64 
Java 1.8.0_161




Steps to reproduce:

1. Open an entry with a title with upper case letters but no braces.
2. Add braces and save.

<details>
18:15:58.228 [pool-4-thread-1] ERROR org.jabref.logic.autosaveandbackup.BackupManager - Error while saving file.
org.jabref.logic.exporter.SaveException: Error in field 'title': Braces don't match.
	at org.jabref.logic.exporter.BibtexDatabaseWriter.writeEntry(BibtexDatabaseWriter.java:169) ~[JabRef-4.1.jar:?]
	at org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(BibDatabaseWriter.java:198) ~[JabRef-4.1.jar:?]
	at org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(BibDatabaseWriter.java:150) ~[JabRef-4.1.jar:?]
	at org.jabref.logic.autosaveandbackup.BackupManager.performBackup(BackupManager.java:123) ~[JabRef-4.1.jar:?]
	at java.util.Optional.ifPresent(Optional.java:159) ~[?:1.8.0_161]
	at org.jabref.logic.autosaveandbackup.BackupManager.lambda$new$0(BackupManager.java:49) ~[JabRef-4.1.jar:?]
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511) [?:1.8.0_161]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [?:1.8.0_161]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [?:1.8.0_161]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [?:1.8.0_161]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_161]
File: aboutdialog.fxml not found, attempting with camel case

</details>""Thanks for reporting. This is the autosave kicking in that is trying to save the file while the braces are still incomplete.

What should be changed here? Should anything be changed? The exception doesn't break anything, JabRef continues to work. And we can't exactly stop the autosave from attempting to save. =||= I think the exception should not be shown in this case. It is confusing and might hide other issues (for example, if JabRef hangs and I try to find the reason, I naturally look at the list of exceptions, and having an unrelated exception is distracting). =||= Yes I understand and I generally agree, but how should this go about? 

The autosave saves everything immediately. After adding an opening brace and trying to save, JabRef cannot just swallow the error, because it does not know if the user will ever add a closing brace. And if the user does not do that, then the error message is valid and important.

As far as I understand, the solution to your problem is probably to disable autosave. =||= We could trigger autosave on field focus change, e.g. When the user leaves the field
Don't we already do this with the Coarse Change Event?  =||= What about replacing
https://github.com/JabRef/jabref/blob/2cdf085ca094e640073774764551296ff03d1f8f/src/main/java/org/jabref/logic/autosaveandbackup/BackupManager.java#L125-L127
with
````java
        } catch (SaveException e) {
            LOGGER.error(""Error while saving file: "" + e.getLocalizedMessage());
        }
````
In this way, the stacktrace is not displayed (which is unimportant for these kind of exceptions that are expected to happen to some extend).  =||= @Siedlerchr The problem in this is that you tie the correctness of the autosave to some future event, which may never be triggered due to exceptional circumstances  or could easily be swallowed somewhere else. And you tie the autosave logic to gui events. I am very much in favor of the autosave doing the local decision based on entry events only.

I really like the suggestion by @tobiasdiez 
 =||= But why show a message at the console at all? Why not just mark the erroneous field with a warning sign (as it is done now)? =||= @erelsgl There can be cases where the save fails that is not visible in the entry editor. An example would be that the file to save to is on a network drive that has disappeared in the meantime. In that case, it is good to have a message on the console.

I proposed a PR #3865 that skips reporting any invalid field errors during autosave. They no longer make it into the log, but the warning sign stays there. A regular save operation will still trigger the warning dialog. =||= "Do no longer log InvalidFieldValueExceptions during autosave"Fixes  #3811

InvalidFieldValueExceptions are no longer printed into the log when they occur during autosave. Fields in the entry editor still have the warning sign next to them.

The normal save operation (CTRL+S) still triggers a warning dialog, saying that the file could not be saved.

----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jörg Lenhardlenhard03/19/18, 08:49:28 PM
3870.03871Magnifier changes colors wrong"JabRef offers two search modes: normal search and the grammar based (""advanced"") search. See https://help.jabref.org/en/Search#search-modes.

In JabRef 3.6, the initial search was the normal search. This changed in JabRef 3.7 somehow. This seems to be wrong.

Action points:

1. Dig into the change made between JabRef 3.6 and 3.7
2. Find out whether the change is right or wrong. Current assumption: It was wrong
3. Take appropriate action.

Refs https://github.com/JabRef/jabref/issues/3535 and the fix https://github.com/JabRef/jabref/pull/3708""Instead of 1. and 2., can't we just go to 3.? Wouldn't the solution be to switch the coloring (i.e. initially purple and then cyan)? That would be a two-liner I can easily do once you tell me that the assumption is correct.

In adition, I'd like to mention the fact that the whole coloring feature is gone (again) in the maintable-beta branch. If you want it to be preserved, you'll probably need to do some lobbying there. =||= If 3 is easily possible, please go ahead. =||= Et voilà: #3871 =||= I think the underlying problem is that simple terms like ""test"" are interpreted as grammar-based searches. This is also the reason why the tooltip shows ""This search contains entries"" twice in the tooltip (at least on maintable-beta). =||= "Switch colors of search icon for the two search modes"Fixes #3870


----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jörg Lenhardlenhard04/12/18, 11:53:19 AM
3896.03900monthfiled in patent should be treated same as month"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.1 and master latest on Fedora 26



Steps to reproduce:

1. Add an entry with type IEEEtran patent
2. Go to ""Optional fields"" tab, and checkout ""Monthfiled""
3. Input `#may#`

Expected: recognized as a bibtex month macro. Saved to bib file as `monthfiled = may`.

Actual: Saved to bib file as `monthfiled = {#may#}`, which is an error."Monthfiled in patent should be treated same as month (IEEETRAN)Closes #3896Stefan Kolbstefan-kolb03/30/18, 08:03:49 AM
3926.03927Removing a file  link at General when editing an entry can lead to errnoneous double removal"Tested in latest master dev and persisting.

JabRef version 4.1 on Windows 7 with Java x64 version 8 update 162

Steps to reproduce:

1. Attach two files to an entry, rename the first so that it points to a non-existing file
2. Go to the `General` tab, mark the non-existing entry in the `File` box, press `DEL`
3. The non-existant link will instantly disappear and the next file entry will be selected, nevertheless a dialog will pop up asking for a ""delete link only"" vs. ""also delete file"" selection
4. Click `Remove from Entry`
5. Watch your good link disappear as well
6. Profit

![image](https://user-images.githubusercontent.com/2142589/38307482-2e6bbac0-3814-11e8-835f-d69cb1e8a26e.png)""Update: The screenshot is from an example where both files are valid, I think you explicitely need a non-existant file to reproduce this. There seems to be a check if the file exists. If not, it is instantly removed without waiting for the dialog input. Then, when you click `Remove from entry`, the next file will be removed as well since it is already auto-selected. Clicking `Cancel` at this point will circumvent the issue, but this is less than ideal. =||= Ah yes, I can confirm this behaviour. I have an entry with an url as file link and a pdf. that is really odd. I#ll take a look at this =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master (in a couple of minutes) and report back if it works for you. =||= "Prevent accidentaly deleting a second file when pressing del key"Fixes #3926 

The key listener was triggered twice (on pressed + released) resulting in the selection of the second file



<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/04/18, 02:23:06 PM
3929.03931Fetcher messages misleading`Full text document download failed` does not indicate a failed download but that no accessible URL was found!Resolve #3929 Correct fetcher messagesResolve #3929Stefan Kolbstefan-kolb04/08/18, 06:07:07 PM
3928.03932"Integrity check should not report Coorporate Authors as ""Names are not in standard format""""Jabref Master:

1. Add a corporate author in braces in the author field  e.g. `{JabRef}`
=> Integrity check reports: Names are not in standard biblatex format
Expected behaviour: No warning, as this is the correct way for corporate authors:
See section 2.3.3 Corporate Authors and Editors of the [biblatex manual](ftp://ftp.rrzn.uni-hannover.de/pub/mirror/tex-archive/macros/latex/contrib/biblatex/doc/biblatex.pdf)

Addtionally, JabRef should offer the field `shortauthor`""@Siedlerchr for which entries do we need to add the field shortauthor? =||= I think we ""support"" it, at least it is inside our PERSON_NAMES declaration. Can you comment more oon what is missing here? =||= We  could add it to the optional fields. When I have a corporate author and define a short author, e.g. BMBF for the corporate author  (Bundesministerium....) this field takes precedence in citations as key in biblatex 
 =||= "Corporate names in brackets are valid corporate authorsResolves #3928Stefan Kolbstefan-kolb04/16/18, 06:06:28 PM
3930.03944IEEE transitions to HTTPS"> IEEE Xplore is transitioning to HTTPS on 9 April 2018. Customer access via EZproxy will require version 6 or higher with TLS 1.1 or 1.2 enabled.
Review our EZproxy Upgrade Checklist to ensure uninterrupted access.

Check fetcher if we need to change the URLs.
- Full text
- Web fetcher 
- etc.""Note: HTTP URLs to IEEE Xplore will be redirected after the transition to HTTPS

Might not affect us, although we should use the new HTTPS URLs then. =||= "[WIP] Replace all IEEE URLs with https #3930"IEEE tests are broken, but they were before. needs to be fixed.

 Fixes #3930"Stefan Kolbstefan-kolb04/16/18, 02:45:03 PM
3269.039544.0 Groups: fast access to View options"JabRef version 4.0 on Windows 7

I often switch between Union and Intersection modes. Please return the ability to quickly switch these settings. For example, you can add them to the global menu of Groups."This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Add button-icon for union/intersection in the groups side panel"Fixes #3269
Fix display of state for union/intersection in preferences

As we currently unfortunately don't have Icons for Set Intersection/Union 
`set-center` and `set-all`  https://materialdesignicons.com/icon/set-center 
 in the Material Design Font, I used the WWW and the twitter icon to demonstrate the purpose. @halirutan  will then try to integrate the correoct  icons in JabRef 


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->
![grafik](https://user-images.githubusercontent.com/320228/38771504-8fe48364-4024-11e8-81b8-a25fa076254c.png)


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/06/18, 10:30:25 AM
3845.03955Changes to preferences are not saved"JabRef 4.2-dev--snapshot--2018-03-13--master--90c7afa1c
Linux 4.13.0-36-generic amd64 
Java 1.8.0_161



Steps to reproduce:

1. open options/preferences
2. make any change, e.g., entry table columns, or export sort order, or anything afaik
3. press OK

Nothing happens.  The preferences window stays open, and no changes are saved.


Log:

Opening: /home/dom/Dropbox/Projects/HSSA/issue 5.2 rasayana issue/07 Sehnalova/paper/sehnalova.bib
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
	at org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
	at org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
	at org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
	at org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2237)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2295)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
	at java.awt.Container.dispatchEventImpl(Container.java:2281)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
	at org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
	at org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
	at org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
	at org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2237)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2295)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
	at java.awt.Container.dispatchEventImpl(Container.java:2281)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
	at org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
	at org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
	at org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
	at org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2237)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2295)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
	at java.awt.Container.dispatchEventImpl(Container.java:2281)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
	at org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
	at org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
	at org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
	at org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2237)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2295)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
	at java.awt.Container.dispatchEventImpl(Container.java:2281)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
	at org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
	at org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
	at org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
	at org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
	at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
	at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
	at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
	at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
	at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
	at java.awt.Component.processMouseEvent(Component.java:6533)
	at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
	at java.awt.Component.processEvent(Component.java:6298)
	at java.awt.Container.processEvent(Container.java:2237)
	at java.awt.Component.dispatchEventImpl(Component.java:4889)
	at java.awt.Container.dispatchEventImpl(Container.java:2295)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
	at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
	at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
	at java.awt.Container.dispatchEventImpl(Container.java:2281)
	at java.awt.Window.dispatchEventImpl(Window.java:2746)
	at java.awt.Component.dispatchEvent(Component.java:4711)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
	at java.awt.EventQueue$4.run(EventQueue.java:731)
	at java.awt.EventQueue$4.run(EventQueue.java:729)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)""You seem to have some odd things in your Preview Preferences Tab, Could you try adding and removing some of the Preview Styles? and see if it works afterwards? =||= I went into Options/Entry preview and deleted the three ""current preview""
selections that I have.  But then, of course, I still couldn't save the
change.  Pressing ""OK"" did nothing.

I'm not aware of having any odd things in the preview preferences tab.  I
have selected three standard styles from the collection on the left window,
that's all.  What are you seeing that looks odd?

Best,
Dominik



------------------------

JabRef 4.2-dev--snapshot--2018-03-13--master--90c7afa1c
Linux 4.13.0-36-generic amd64
Java 1.8.0_161

Log:
Opening: /home/dom/Dropbox/Projects/HSSA/issue 5.2 rasayana issue/07
Sehnalova/paper/sehnalova.bib
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib


​
--
Professor Dominik Wujastyk <http://ualberta.academia.edu/DominikWujastyk>
​,​

Singhmar Chair in Classical Indian Society and Polity
​,​

Department of History and Classics <http://historyandclassics.ualberta.ca/>
​,​
University of Alberta, Canada
​.​

South Asia at the U of A:

​sas.ualberta.ca​
​​


On 14 March 2018 at 05:38, Christoph <notifications@github.com> wrote:

> You seem to have some odd things in your Preview Preferences Tab, Could
> you try adding and removing some of the Preview Styles? and see if it works
> afterwards?
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3845#issuecomment-372991725>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhnaiLD_OM1_Th_QdRY7ooiP_B11Oks5teQE5gaJpZM4SpxFE>
> .
>
 =||= I opened JabRef 4.0, went into Options/Preferences/Entry preview, and I was able to delete the selected styles in the right pane.  But I had to do each one separately, followed by a save.  Finally I was down to the default ""Preview"", and could save.

Then I reopened 
JabRef 4.2-dev--snapshot--2018-03-13--master--90c7afa1c
Linux 4.13.0-36-generic amd64 
Java 1.8.0_161

and I could now add and remove styles and save.

But with other Options/Preferences, I could still not save.  For example I can't change the Appearance.   I mean, I can change it, but I can't save the change.  Checking many other settings at random, I can't save changes to any of them. =||= Hm. The error indicates that something with storing the current cycled position of the preview (when you cycle through the entry preview layouts with F9) is wrong. 
Whenever you cycle through the entry previews, the current cycle position is stored. And there  the error was raised. 

https://github.com/JabRef/jabref/blob/ae6d01be46c96ef57e9871dfeb208ab0b7aab295/src/main/java/org/jabref/preferences/PreviewPreferences.java#L75-L82 =||= Do you get now different errors in the log or still the same when you try to save prefs in 4.2? =||= In line 80, you may divide by `0` (implicitly using the reminder `%` operation) and thus the error occurs. =||= This is the log after opening
JabRef 4.2-dev--snapshot--2018-03-13--master--90c7afa1c
Linux 4.13.0-36-generic amd64
Java 1.8.0_161,
opening Options/Preferences and trying (and failing) to change Appearance:

Opening: /home/dom/Dropbox/Projects/HSSA/issue 5.2 rasayana issue/07
Sehnalova/paper/sehnalova.bib
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
    at
org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
    at
org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
    at
org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
    at
org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
    at
org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
    at
org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
    at
javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
    at
javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
    at
javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at
javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at
javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6533)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
    at java.awt.Component.processEvent(Component.java:6298)
    at java.awt.Container.processEvent(Container.java:2237)
    at java.awt.Component.dispatchEventImpl(Component.java:4889)
    at java.awt.Container.dispatchEventImpl(Container.java:2295)
    at java.awt.Component.dispatchEvent(Component.java:4711)
    at
java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
    at java.awt.Container.dispatchEventImpl(Container.java:2281)
    at java.awt.Window.dispatchEventImpl(Window.java:2746)
    at java.awt.Component.dispatchEvent(Component.java:4711)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
    at java.awt.EventQueue.access$500(EventQueue.java:97)
    at java.awt.EventQueue$3.run(EventQueue.java:709)
    at java.awt.EventQueue$3.run(EventQueue.java:703)
    at java.security.AccessController.doPrivileged(Native Method)
    at
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
    at
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
    at java.awt.EventQueue$4.run(EventQueue.java:731)
    at java.awt.EventQueue$4.run(EventQueue.java:729)
    at java.security.AccessController.doPrivileged(Native Method)
    at
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
    at
java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
    at
java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
    at
java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ArithmeticException: / by zero
    at
org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:80)
    at
org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:72)
    at
org.jabref.gui.preftabs.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:247)
    at
org.jabref.gui.preftabs.PreferencesDialog.storeAllSettings(PreferencesDialog.java:243)
    at
org.jabref.gui.preftabs.PreferencesDialog.access$000(PreferencesDialog.java:54)
    at
org.jabref.gui.preftabs.PreferencesDialog$OkAction.actionPerformed(PreferencesDialog.java:271)
    at
javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)
    at
javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2348)
    at
javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at
javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at
javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6533)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3324)
    at java.awt.Component.processEvent(Component.java:6298)
    at java.awt.Container.processEvent(Container.java:2237)
    at java.awt.Component.dispatchEventImpl(Component.java:4889)
    at java.awt.Container.dispatchEventImpl(Container.java:2295)
    at java.awt.Component.dispatchEvent(Component.java:4711)
    at
java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)
    at java.awt.Container.dispatchEventImpl(Container.java:2281)
    at java.awt.Window.dispatchEventImpl(Window.java:2746)
    at java.awt.Component.dispatchEvent(Component.java:4711)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
    at java.awt.EventQueue.access$500(EventQueue.java:97)
    at java.awt.EventQueue$3.run(EventQueue.java:709)
    at java.awt.EventQueue$3.run(EventQueue.java:703)
    at java.security.AccessController.doPrivileged(Native Method)
    at
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
    at
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)
    at java.awt.EventQueue$4.run(EventQueue.java:731)
    at java.awt.EventQueue$4.run(EventQueue.java:729)
    at java.security.AccessController.doPrivileged(Native Method)
    at
java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
    at
java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)
    at
java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
    at
java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)


​
--
Professor Dominik Wujastyk <http://ualberta.academia.edu/DominikWujastyk>
​,​

Singhmar Chair in Classical Indian Society and Polity
​,​

Department of History and Classics <http://historyandclassics.ualberta.ca/>
​,​
University of Alberta, Canada
​.​

South Asia at the U of A:

​sas.ualberta.ca​
​​


On 14 March 2018 at 10:30, Christoph <notifications@github.com> wrote:

> Do you get now different errors in the log or still the same when you try
> to save prefs in 4.2?
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3845#issuecomment-373086601>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhjqRIW4bKP5RlEBVJQupwzcBlsyXks5teUWSgaJpZM4SpxFE>
> .
>
 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= My simple tests show that changing and then saving preferences now works
fine.  Many thanks!

​​


On 16 April 2018 at 03:31, Tobias Diez <notifications@github.com> wrote:

> This should be fixed in the latest development version. Could you please
> check the build from http://builds.jabref.org/master/. Thanks!
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3845#issuecomment-381538275>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAuhhkk7HqQrMHE4mJNdU5T6eVXMcObxks5tpGT2gaJpZM4SpxFE>
> .
>
 =||= Sorry if this is not the place to ask this, but are the preferences saved in a file? If so, where is it located? =||= Nevermind, I found them at `~/.java/.userPrefs/org/jabref`. =||= The storage location is the default preference storage location from Java. It differs on systems. On Unix it's stored in files, in windows in the registry  =||= "Fixed saving of entry preview preferences"Fixed saving entry preview preferences.

Stored preview citation styles were loaded in a wrapping Optional before.

Fixes #3845 

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Florian Beetzflorian-beetz04/16/18, 09:28:37 AM
3860.03965The `URL` column missed in the maintable beta version"Look at the screenshot:

![image](https://user-images.githubusercontent.com/13306020/37555286-2e4a0ecc-2a20-11e8-9573-dc167a577e1d.png)""Thank you for your report :+1:
This should be fixed in current `maintable-beta`. Please try the latest build from http://builds.jabref.org/maintable-beta. =||= "Fixed Url column"This fixes #3860 

URL Column now shows URL or DOI correctly and opens on click.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Florian Beetzflorian-beetz04/23/18, 12:48:43 PM
3966.03968Problems finding fulltext for IEEExplore"Issues with IEEE full-text importer.

I have tested the latest master version from http://builds.jabref.org/master/JabRef--master--latest.jar on Windows 7 and the following problem is encountered.


JabRef version 4.2-dev on Windows 7 Enterprise (build 7601 service pack:1)

Steps to reproduce:

1. Use Jabref on a network with full-text access to IEEExplore articles (such as a university's network)
2. Start a new library with the following bibtex entry

```
@inproceedings{Morabito2017,
author = {Morabito, Bruno and Klein, Reinhardt and Findeisen, Rolf},
booktitle = {2017 American Control Conference (ACC)},
doi = {10.23919/ACC.2017.7963481},
isbn = {978-1-5090-5992-8},
month = {may},
pages = {3457--3462},
publisher = {IEEE},
title = {{Real time feasibility and performance of moving horizon estimation for Li-ion batteries based on first principles electrochemical models}},
url = {http://ieeexplore.ieee.org/document/7963481/},
year = {2017}
}
```

3.  Select this reference entry within Jabref and hit ```Alt``` + ```F7``` or go to ```Quality -> Look up full text documents```
4. After a while, the following pop-up dialog box opens
```No full text document found for entry Morabito2017```
5. Expected behavior: Navigate to this same ```URL http://ieeexplore.ieee.org/document/7963481/```.  This works perfectly fine and full-text PDF can be manually downloaded.  The auto downloader should have obtained this PDF and linked it to the citation entry.

""The test for open access articles such as https://ieeexplore.ieee.org/document/7421926/ work.
There should be no difference for the other articles as long as you really have access.
It is hard to debug for me as I don't have IEEE access at university. @JabRef/developers Anyone of you has access? =||= I can reproduce this error. For me the IEEE fetcher tests fail when I am connected using university VPN.
The html page  I get from the URL Downloader talks about missing cookie support. I will see if I can fix that  =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= No.... Please read the text very carefully...I have explicitly mentioned that I am using the latest developmental version. The problem still persists. Please reopen this issue =||= We just merged a pull request fixing it. =||= @krishnakumarg1984  Yes. I know. But I just merged the code into the master branch. The development build gets automatically updated and built by our CI servers whenever someone commits to the master branch. This usually takes a couple of minutes. 
The version string contains the first part of the commit id.  (help-> About) 
 =||= Ah. I am so sorry for not correctly interpreting what you said. I shall try the latest development build and report back. Sorry for the mild confusion in my last post =||= @Siedlerchr  @stefan-kolb We may have to reopen this issue.

I just tried with the latest build

>
>JabRef 4.2-dev--snapshot--2018-04-20--master--8bbc40e13
>Windows 7 6.1 x86 
>Java 1.8.0_161

from my university's network and same error pop-up message persists.   Curiously the event log in Jabref is empty. 

I wonder why #3968 says the problem is only with VPN access? I am currently physically on the campus library, on a Windows 7 machine hard-wired to the network with a LAN cable.  Just to confirm that this is indeed a persisting bug, there is no issue with full-text access to this article from a standard browser pointed to the URL http://ieeexplore.ieee.org/document/7963481/ 
 =||= I think @krishnakumarg1984 is right and the issue still persist. Just looking at the code,
https://github.com/JabRef/jabref/blob/8bbc40e13e016f7a28486179855be9a7c28b2adc/src/main/java/org/jabref/logic/importer/fetcher/IEEE.java#L38-L47
with
https://github.com/JabRef/jabref/blob/8bbc40e13e016f7a28486179855be9a7c28b2adc/src/main/java/org/jabref/logic/importer/fetcher/IEEE.java#L27
is never going to match `http://ieeexplore.ieee.org/document/7963481/`. =||= Hmm that's odd. I will look into that again tomorrow  =||= @krishnakumarg1984  I just merged the fix which supports those the IEEE document urls you have like in your entry.  And I also tested your entry with university access and worked for me. So I would like you to test this again =||= @Siedlerchr  thank you. I shall go to university to check this out. Will report back soon. =||= Woohoo.... You guys are amazing. 

I just tried the latest master-build from my university's network, and can confirm that this is now fixed . Was able to download the full-text of the bibtex entry for which the issue was opened. 

Thank you for accepting and pro-actively working to fix this issue.

#### Version info of Jabref build used:
>JabRef 4.2-dev--snapshot--2018-04-21--master--5c664e1d2
>Windows 7 6.1 x86 
>Java 1.8.0_161 =||= "Fix IEEE Fetcher by enabling cookie support"Fixes #3966 

Apparently when in VPN network of University IEEE fulltext fetcher needs cookie support enabled

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/20/18, 02:53:03 PM
3971.03988Add RFC Standard Fetcher"While all RFCs have a DOI, the doi import does not correspond to the real bibtex data.

Implementation is totally easy: Just add the rfc number in the url:
- Search input should accept number only and RFC followed by  number


The IETF datatracker tool has a direct export for bibtex:
https://datatracker.ietf.org/doc/rfc1945/
https://datatracker.ietf.org/doc/rfc1945/bibtex/""I'd like to try my hand at this, but i'm confused on where to start. Are there any specific classes or documentation that I should look at?  =||= Hi,
thanks for your interest. For this I recommend you take a look at the DOI Fetcher or other fetchers. They reside in `org.jabref.gui.importer` ` and org.jabref.logic.importer.fetcher `

For some general information I suggest taking a look at the contribution guidelines, there a also some code howtos and overview of our code structure linked:
https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md

For any further questions, just ask here or on our  [gitter chat](https://gitter.im/JabRef/jabref) =||= @Siedlerchr to be honest, the issue description reads a bit cryptic. Do you propose to add an id-based fetcher for those ""RFC numbers""? =||=  Yes, an RFC id based fetcher. I enter the rfc number or Rfc 123 and I get the bibtex entry  =||= @Quunii I am interested in helping as well. This would be my first contribution to open source... I started to parse through the problem, and I've already made a solution... I assume this is bad open source etiquette since I didn't mention my interest in the first place? :/ Maybe we can work together to finish it?

My solution adds a new entry type to the id-based entry generator list, per @Siedlerchr's clarified request. I added a new RFC fetcher class, a test class, and added the RFC fetcher to the list of ID-Based Entry Generators so that it appears in the dropdown. The entry can accept an ID with or without the ""rfc"" prefix.

Should I just submit the pull request? =||= @jacksonrya go ahead, and don't worry about it.  =||= "Add 'RFC' entry generator ID-type option"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#3971](https://github.com/JabRef/jabref/issues/3971) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

fixes #3971 

[UI Image of entry type in dropdown](https://github.com/jacksonrya/help.jabref.org/blob/81c1795cfd3b9defc64fd61b71eb85e9e34e7442/en/images/NewEntryChooseType-IDGeneratorHighlighted-Rfc.png)

RFC, an additional ID-based entry generator ID type, has been added in order to fetch more complete BibTeX data compared to DOI fetches of RFC type.

Following the DiVA ID type classes as template, an RFC fetcher class and fetcher test has been added.
I added RFC to the ID-based entry generator list within WebFetchers so it is an option in the dialog's dropdown.

Currently, the RFC fetcher class accepts search requests with or without the ""rfc"" prefix--is this an okay feature?

Additionally, help in finding the best [RFC BibTeX API](https://www.rfc-editor.org/retrieve/). I am using the API referenced in [#3971](https://github.com/JabRef/jabref/issues/3971).

P.S. This is my first ever contribution to open source, so thanks for your patience... 😄 

----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jackson Baker Ryanjacksonrya04/29/18, 12:18:50 PM
3986.04002Unable to launch jabref 4.2 with overriden font settings"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
4.2


Steps to reproduce:

1. java -jar JabRef-4.2.jar

I'm not able to launch jabref and the above command hang with this error:
<details>
  <summary>Log File</summary>
  ```
11:39:11.538 [AWT-EventQueue-0] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ClassCastException: java.awt.Font cannot be cast to javax.swing.plaf.FontUIResource
	at org.jabref.JabRefGUI.setLookAndFeel(JabRefGUI.java:288) ~[JabRef-4.2.jar:?]
	at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:87) ~[JabRef-4.2.jar:?]
	at org.jabref.JabRefGUI.<init>(JabRefGUI.java:60) ~[JabRef-4.2.jar:?]
	at org.jabref.JabRefMain.lambda$start$0(JabRefMain.java:182) ~[JabRef-4.2.jar:?]
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311) ~[?:1.8.0_151]
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756) ~[?:1.8.0_151]
	at java.awt.EventQueue.access$500(EventQueue.java:97) ~[?:1.8.0_151]
	at java.awt.EventQueue$3.run(EventQueue.java:709) ~[?:1.8.0_151]
	at java.awt.EventQueue$3.run(EventQueue.java:703) ~[?:1.8.0_151]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_151]
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80) ~[?:1.8.0_151]
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:726) ~[?:1.8.0_151]
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201) [?:1.8.0_151]
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116) [?:1.8.0_151]
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105) [?:1.8.0_151]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) [?:1.8.0_151]
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93) [?:1.8.0_151]
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82) [?:1.8.0_151]
  ```
</details>

The same command works with jabref-4.1 and I'm using jdk 1.8.0-151 on CentOS 6.9""Probably because we removed the jgoodies stuff. Try resetting your preferences, with 
Or start JabRef 4.1 and swith the L&F to another except plastic and gtk
`java -jar Jabref.jar -d all` =||= You may have a bad download.  Check the filesize.  Happened to me the first two times I tried (right click, k to choose location).  245 kb.  When I just clicked on the link and sent the file to /Downloads, the full 56 MB file arrived. =||= The file's SHA256 checksum is correct. The problem is indeed the Look&Feel. But ```java -jar Jabref.jar -d all``` removed all my previous setting including my customized PDF import filename pattern and I'd not recommend doing it. But changing the L&F in version 4.1 and switching back to 4.2 work. However, the L&F in 4.2 will occasionally cause the GUI to freeze and I'm switching back to 4.1 for now. =||= I had the same problem with. Changing
`<entry key=""overrideDefaultFonts"" value=""true""/>`
to `false` in `prefs.xml` solves it. =||= Ok, I can reproduce it with clean preferences. When I use ""NimbusLookAndFeel"" and set ""Override default font settings"" in preferences I get `java.lang.ClassCastException: java.awt.Font cannot be cast to javax.swing.plaf.FontUIResource`.

```
java -version
java version ""1.8.0_172""
Java(TM) SE Runtime Environment (build 1.8.0_172-b11)
Java HotSpot(TM) 64-Bit Server VM (build 25.172-b11, mixed mode)
```

Platform is Linux. =||= Thanks for reporting, this. Fix is in progress =||= There is a version that should fix this at https://builds.jabref.org/removeGTK/ Please try it out. =||= Ok, it seems to be working now. However, ""GTKLookAndFeel"" is still visible as the default one.

![screenshot from 2018-05-01 15-30-47](https://user-images.githubusercontent.com/293573/39474518-ae18fcce-4d54-11e8-8eba-7c78473863f0.png)
 =||= "Fix Look and Feel related issues"Enabled the change of the L&F for mac.
Remove GTK L&F 
Fix migration of old jgoodies l&f

Fixes #3986 
Fixes #3995 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/04/18, 04:20:10 PM
3995.04002Still freezes on macOS High Sierra"Steps to reproduce:
1. Open Jabref
2. File - Import into new library
3. Choose file and click ""open""
4. Freezes

Same thing happens when importing into current library. Tried the hostname solution, no luck.

JabRef 4.2
Mac OS X 10.13.4 x86_64 
Java 1.8.0_172""I can confirm I have the same issue as well. 

My setup: JabRef 4.2, macOS 10.13.4 and Java build 1.8.0_171-b11 =||= Try to change the Look and Feel, we recently had many problems + freeze reports with the GTK Look and Feel. =||= EDIT: I can see it in the preferences file, I'll try change it from there.

Apologies if I'm missing something obvious, but is that option available in macOS? FAQ says:

_""It seems that the GTKLookAndFeel is causing these problems and selecting a different look and feel class under Options -> Appearance -> Look and Feel solves the problem.""_

But I can't find that option in macOS...

Thanks for the help. =||= Is there a way to list the available look and feel themes in the system?

I tried editing ~/Library/Preferences/com.apple.java.util.prefs

for Jabref shows:

```
<key>lookAndFeel</key>
<string>com.apple.laf.AquaLookAndFeel</string>
```

I tried `javax.swing.plaf.metal.MetalLookAndFeel` and `javax.swing.plaf.metal.SynthLookAndFeel` but in both cases it reverts back to the default look and feel... =||= Normally you should be able to switch it in JabRef, as the FAQ says, you have to change the Look and Feel in JabRef. Not on the system
It should list all available styles.  =||= That's strange. On macOS there's no _""Options -> Appearance""_, the closest would be _""Options -> Preferences --> Appearance""_, and these are all the options available, I don't see any way to change the look and feel:

![jref_options](https://user-images.githubusercontent.com/11670888/39458155-857bbb24-4cc0-11e8-8985-fc9648e60810.jpeg)
 =||= @LinusDietz can you take a look?
Old versions can be found here https://github.com/JabRef/jabref/releases =||= Same problem on OpenSuse 42.3. Jabref 4.1 works, version 4.2 freezes on import of bibentries, same for the latest development version.
 =||= Thanks, I fond it. It is really tricky that there was not the release panel when you are in the issue panel on GitHub.

> 在 2018年5月1日，16:30，Christoph <notifications@github.com> 写道：
> 
> @LinusDietz <https://github.com/LinusDietz> can you take a look?
> Old versions can be found here https://github.com/JabRef/jabref/releases <https://github.com/JabRef/jabref/releases>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub <https://github.com/JabRef/jabref/issues/3995#issuecomment-385624637>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AQ3aYLQRSGsjxPx2MgoT9TE9Ja4KbQJIks5tuB0OgaJpZM4Trit3>.
> 

 =||= @PUKK  Do you get any errors in the log? At which point does it freeze? Opening the file dialog? Showing the import inspection window?

@urielz  Could you please try out this version to change the style? 
https://builds.jabref.org/removeGTK/

I found out that for some reason the look and feel selection was disabled on OSX =||= I can confirm that the import issue is (only) with the  GTKLookAndFeel.

 Unfortunately, I seemed to have some older look-and-feel options in my preferences and I changed to one which apparently does not exist anymore. I had to remove all Jabref config files to get Jabref started again :-( 
With the default look-and-feel I do not experience the import problem anymore. =||= @PUKK  That's nice to hear. I will try to add a migration to the default look and feel, in case an older look and feel is found =||= There  seems to be a problem with Jabref completely crashing (no GUI coming up) if it does not find some fonts.

This also happens in the default look-and-feel. I went to ""override default font setting"" and increased ""menu and lable font size"" from 13 to 14. One has to restart for the changes to take effect and then Jabref does not start (which is nasty since one does not get access to the preferences menu anymore). Output in the terminal:
[AWT-EventQueue-0] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.ClassCastException: java.awt.Font cannot be cast to javax.swing.plaf.FontUIResource
        at org.jabref.JabRefGUI.setLookAndFeel(JabRefGUI.java:288) ~[JabRef-4.Xdev.jar:?]
        at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:87) ~[JabRef-4.Xdev.jar:?]
        at org.jabref.JabRefGUI.<init>(JabRefGUI.java:60) ~[JabRef-4.Xdev.jar:?]
        at org.jabref.JabRefMain.lambda$start$0(JabRefMain.java:182) ~[JabRef-4.Xdev.jar:?]
        at java.awt.event.InvocationEvent.dispatch(Unknown Source) ~[?:1.8.0_162]
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source) ~[?:1.8.0_162]
        at java.awt.EventQueue.access$500(Unknown Source) ~[?:1.8.0_162]
        at java.awt.EventQueue$3.run(Unknown Source) ~[?:1.8.0_162]
        at java.awt.EventQueue$3.run(Unknown Source) ~[?:1.8.0_162]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_162]
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source) ~[?:1.8.0_162]
        at java.awt.EventQueue.dispatchEvent(Unknown Source) ~[?:1.8.0_162]
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) [?:1.8.0_162]
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) [?:1.8.0_162]
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) [?:1.8.0_162]
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source) [?:1.8.0_162]
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source) [?:1.8.0_162]
        at java.awt.EventDispatchThread.run(Unknown Source) [?:1.8.0_162]
 =||= I could confirm this on my linux VM. will try to fix this asap
Try running java -jar JabRef.jar -d all to reset preferences 
Refs #3986  =||= > @urielz Could you please try out this version to change the style?
https://builds.jabref.org/removeGTK/

> I found out that for some reason the look and feel selection was disabled on OSX

@Siedlerchr Thanks for looking into this. I can change the look and feel with that version, unfortunately the problem still persists. I tried all four options but Jabref still hangs when importing. =||= @urielz  Okay, thanks for your feedback. Could you please describe where exactly it freezes?
This helps us to narrow it down a bit.
- Does it show the Fille Open dialog?
- Does the import start?
- Does the import inspection window occur? =||= @Siedlerchr It shows the File Open Dialog, but it hangs right after I tried to open a file (bib, ris, etc).

If there's a way to run JabRef in debug mode I can give it a try. =||= You can try it from command line
java -jar JabRef.jar
Any errors should be printed out on the console  =||= I tried that before and it gives me an error along the lines ""Unsupported major.minor version"". Maybe related to the fact that I don't have JDK? or the correct Java version? I'll try to look into this later today. =||= You might have java 9 or an older version than 8 of Java installed. I am sorry, I don't own a mac, so I can't help you any further. Maybe @halirutan  or @LinusDietz  can help you any further  =||= @Siedlerchr No worries!, thanks for looking into this. =||= Sorry, but is this supposed to have been fixed? I downloaded the latest dev snapshot (JabRef 4.3-dev--snapshot--2018-05-04--master--18011fcab) and the issue persists. =||= @jimjianghk  Well, it should have been a Look and Feel Problem with the GTK Look and Feel.
From the answers before, it seeemed to be working when you change the Look and Feel to a non GTK one, =||= @Siedlerchr I have tried all of the above and changing the Look and Feel doesn't solve this JabRef problem. It still freezes after I click on ""open"" as described in the first post, no matter what Look and Feel I use.

JabRef 4.3-dev--snapshot--2018-05-02--removeGTK--74c7b8e59
Mac OS X 10.13.4 x86_64 
Java 1.8.0_172 =||= @Glenbeulah  The only option I have in mind that you might have an older bundled JRE in Jabref itself, also the system one is newer. We had this issue with someone before. 
Could you please uninstall JabRef first and (additionally, if not removed) remove the sub folder ""jre"" from the JabRef installation directory?
And then install the latest dev version of JabRef.  =||= @Siedlerchr not sure where to find the sub folder ""jre"". Do you have a hint for me? I uninstalled JabRef via AppCleaner which deletes the application and every other item connected to it. See below:
~/Library/Application Support/CrashReporter/JavaApplicationStub_8D16F21C-0625-5D17-9745-A05607371D91.plist
~/Library/Application Support/JabRef
~/Library/Saved Application State/com.install4j.0034-7691-1464-4754.23.savedState
also went to the java application to see which version is installed but besides ""Java 1.8.0_172"" I couldn't  find any other entry.
A fix for this Problem isn't urgent for me since I found the DOI entry generator which is really handy for single entry imports. =||= @Glenbeulah  You could try downloading and running the latest jar file directly (not the dmg) into some folder and see if that works fine. Then we know that the install/uninstall process is somewhere wrong.

For reference, that was the other issue in which we found out that JabRef uninstall is required first https://github.com/JabRef/jabref/issues/3587 

As a workaround, you can always paste/copy bibtex code directly on the maintable. And new files can be imported by drag and drop on the table as well =||= @Siedlerchr I had the same problem which they discussed in #3587  and after uninstall/install it worked but than I ran into our current error.
Apparently the .jar-file has the same error... As you said I uninstalled Jabref than downloaded https://builds.jabref.org/master/JabRef-4.3-dev--snapshot--2018-05-05--master--b8ea55bc2.jar
and ran it directly but no luck. =||= oh and ""drag and drop"" works fine =||= Are you sure the GTK style freezes Jabref? I had to downgrade to Jabref 4.1 because only the GTK style properly scales fonts and icons for my HDPI screen (and doesn't look as bad as Nimbus). I have not witnessed a single freeze. Also, people still seem to have crashes even with the GTK theme disabled. =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= I can confirm that the dev version works on my end (macOS 10.13.6). Thanks! =||= I still face the same importing issue with JabRef 4.3.1 on MacOS Mojave (10.14)... Running from the jar file directly, the import operation emits the following information on stderr and freezes:

> objc[4385]: Class FIFinderSyncExtensionHost is implemented in both /System/Library/PrivateFrameworks/FinderKit.framework/Versions/A/FinderKit (0x7fff917711d0) and /System/Library/PrivateFrameworks/FileProvider.framework/OverrideBundles/FinderSyncCollaborationFileProviderOverride.bundle/Contents/MacOS/FinderSyncCollaborationFileProviderOverride (0x18f3e9dc8). One of the two will be used. Which one is undefined. =||= BTW, look and feel is set to default on Mac: com.apple.laf.AquaAndFeel. I tried some other availabilities in vain.

On the other hand, direct importing from the command line works well.

> \# java -jar /Applications/JabRef.app/Contents/java/app/JabRef-4.3.1.jar -i Downloads/some.ris 
Importing in unknown format: Downloads/some.ris
Format used: RIS
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case =||= @koji33  Please use the latest development version from https://builds.jabref.org/master/
Remember to make a backup of your library. =||= After I updated macOS High Sierra to Mojave, my perfectly running JabRef 4.2 freezes, not when opening a library file, but as soon as I want to open the entry editor.
The latest development version of JabRef 5 looks really good but is slow and unresponsive, the entry editor takes five seconds to show another entry.

EDIT: Apparently, the etc/hosts file was restored to default during the Mac update and I had to edit it again in order to get JabRef to work. This shouldn't really be necessary should it?
(see: https://github.com/JabRef/jabref/issues/3236#issuecomment-345385900)

Edit2: The change in the hosts-file also fixed the five-seconds-delay in the latest development version which is now running smoothly, apparently. It really looks and feels nice, I am looking forward to a stable version of JabRef 5. =||= I'm on Mojave, JabRef 4.3.1 (just installed) freezes after start. =||= Mojave, JabRef 4.3.1 just installed. I try to save a database, it freezes. =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Still a problem for me. 
Mac OS X 10.14.6 Mojave. =||= > Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.
> 
> We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.

This worked, version

> JabRef 5.0.0-dev--2019-10-20----dfad2fdea
> Mac OS X 10.14.6 x86_64 
> Java 12.0.2

However, it is quite slow when adding an entry or making an edit to an existing entry. =||= @egarpor Please try to remove the old JabRef installation before installing the latest snapshot =||= "Fix Look and Feel related issues"Enabled the change of the L&F for mac.
Remove GTK L&F 
Fix migration of old jgoodies l&f

Fixes #3986 
Fixes #3995 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/04/18, 04:20:10 PM
3973.04011Reimplement Tooltips in the URL Column"This is a followup for https://github.com/JabRef/jabref/pull/3965#discussion_r183379586.

The tooltips in the URL column should be re-activated and display sensible messages.
"Fixed by #4011  =||= Reimplement tooltips for file and identifier columns"This fixes #3973.

Reimplements tooltips for file-, URL-/DOI- and Eprint-column in the maintable-beta.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Florian Beetzflorian-beetz05/07/18, 11:40:02 AM
4013.04015custom export filter cannot be used"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.2+ on Fedora 27


Steps to reproduce:

1. Add a custom export filter https://github.com/alick/jabref-export/tree/master/listrefs with the name 'test'
2. Export a selected bib entry
3. In the save file dialog, look for the custom filter entry in the popdown filter list.
4. There are two 'HTML list file (*.html)' entries in the popdown list. Neither gives the custom result. No entry for 'test'.

![screenshot from 2018-05-05 21-51-15](https://user-images.githubusercontent.com/933935/39669337-9dc2d22a-50ae-11e8-827c-b5acc0571ddf.png)
![screenshot from 2018-05-05 22-00-05](https://user-images.githubusercontent.com/933935/39669375-b5901858-50af-11e8-8e3f-5edc1b23854b.png)

Notes:

- I think I might have filename clash with shipped filter. But after I changed my custom one to a new name, the result is still the same.
- With JabRef 4.1, the 'test' filter appears in the popdown list, but with a wrong suffix (DEFAULT) although it is .html in the 'Manage custom export' dialog.""There is a version that should fix this at https://builds.jabref.org/fixCustomExportFileType/ Please try it out. =||= Hi, I tried it out and seems it was not fixed correctly. Now I see two
'test (*.html)' entries, but neither entries use my customized filter.

On Sun, May 6, 2018 at 5:32 AM Christoph <notifications@github.com> wrote:

> There is a version that should fix this at
> https://builds.jabref.org/fixCustomExportFileType/ Please try it out.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/4013#issuecomment-386869534>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AA5AL60bFdq04mU7NkxS2KC9a1xUpJG0ks5tvtFJgaJpZM4Tz4Jl>
> .
>
 =||= Thanks for the feedback, I could reproduce that and I think I found a way to fix this. At least my tests were succesful. Could you please try the updated version here? https://builds.jabref.org/fixCustomExportFileType/
The current version contains the commit id  1a0cde3 in the version number =||= @Siedlerchr It is fixed. Yay! Thanks a lot. =||= I have been monitoring this issue since it arose in v4.1 (I am a longtime use, not developer, and we use the custom export routinely). I've tested the posted 4.3 dev snapshop version and confirm that - for me after a series of tests - it is working fine.  =||= I'll close the issue for now. Please help get the fix merged to new release :) =||= Please leave the issue open as long as the fix is not yet merged in master. The issue will be auto closed after merge.  =||= Will this version be merged with master? After updating to 4.2, none of our custom export filters were showing up. This patch seems to fix it. =||= The version will soon be merged with master. The latest version of the branch already is based on master. Just some minor internal code changes and the PR will be merged. See the PR for details  =||= "Fix custom exporter not displayed in file chooser"Fixes  #4013

Fixed several issues with the Custom Exporter.
- Filename check for layout files was wrong 
- Commandline name for custom exports was the filename and not the name, opposed to what our help says 
- Custom exports could not be added due to our hardcoded enum
- Expanded the enum with [Mixins](http://blog.pengyifan.com/how-to-extend-enum-in-java/)


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr06/03/18, 07:02:37 PM
4014.04016Fetcher 'Title' removes all spaces"JabRef 4.2
Linux 4.16.6-1-arch amd64 
Java 1.8.0_172

Steps to reproduce:

1. New Entry
Ctrl-N, 
ID Type Title
ID Ultraluminous starbursts from supermassive black hole-induced outflows
2.  We get
Fetcher 'Title' did not find an entry for id 'Ultraluminousstarburstsfromsupermassiveblackhole-inducedoutflows'.
3. Works perfectly in the old version (JabRef 4.1)."There is a version that should fix this at https://builds.jabref.org/fixTitlefetcherwhitespace/ (Please try it out. =||= JabRef-4.3-dev--snapshot--2018-05-06--fixTitlefetcherwhitespace--bc32252cc.jar works without this problem. =||= @igreenman  Please let this issue open as long as the fix is not yet merged into master. On merge it will be automatically closed =||= Do not trim or remove whitespace from the title based id fetcher"Fixes #4014 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/11/18, 05:00:52 PM
4018.04019Problem with web search for ACM"When trying to fetch an entry from ACM, JabRef seems to 

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version:
JabRef 4.3-dev--snapshot--2018-05-05--master--b8ea55bc2
Windows 7 6.1 amd64 
Java 1.8.0_172


Steps to reproduce:

1. Open web search and select the ACM portal
2. Paste the DOI 10.1145/72551.72553 for example
3. Click fetch
4. The dialog window in the first screenshot below opens
5. Mark ""Keep"" on the entry
6. Click ""Ok""
7. Another dialog window opens which seems to make no progress and does not contain the entry selected previously


<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Screenshots</summary>
  
  ![grafik](https://user-images.githubusercontent.com/22543341/39743064-fdbfe9b8-529f-11e8-9dbf-a91ca49cf2d4.png)  
  Screenshot of first dialog after searching
  
  ![grafik](https://user-images.githubusercontent.com/22543341/39743370-f7aa5d64-52a0-11e8-9db2-937af5865ce3.png)
  Screenshot of second dialog
</details>""Thanks for your report. I can confirm that. The fetcher runs into an error: 
I'll take a look at that
```
java.lang.StringIndexOutOfBoundsException: String index out of range: -1
	at java.lang.String.substring(String.java:1960) ~[?:1.8.0_162]
	at org.jabref.gui.importer.fetcher.ACMPortalFetcher.downloadEntryBibTeX(ACMPortalFetcher.java:324) ~[main/:?]
	at org.jabref.gui.importer.fetcher.ACMPortalFetcher.getEntries(ACMPortalFetcher.java:180) ~[main/:?]
	at org.jabref.gui.importer.fetcher.GeneralFetcher.lambda$4(GeneralFetcher.java:198) ~[main/:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_162]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_162]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_162]
```
 =||= There was a problem with recognizing the correct id. 
Should be fixed in this version and soon be in the master:
https://builds.jabref.org/fixacm/ =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= "Fix ACM fetcher import of entries"Fixes #4018 
Removed `&` sign from ID pattern

Tested with a couple of searches, works fine

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/10/18, 08:58:40 AM
3419.04040Feature Request: OpenSSL for SQL"It would be really nice to include SSL support for the shared database function.
Up to now for SSL encrypted communication, tunneling is necessary.""Would be useful, as many remote DBs are only accessible via SSL. =||= Refs #4040 =||= Hi,
starting with the current development version, https://builds.jabref.org/master/
 JabRef now supports the usage of SSL for both MySQL and PostgreSQL. 
In a nutshell, you have to convert your certificates for the usage with Java and add them to a (custom) keystore. This file is then specified in JabRef.


I already create a PR for the documentation update for the upcoming 5.0.
Therefore you have to use this link to see the changes.
 Feel free to ask any questions.
https://github.com/JabRef/help.jabref.org/blob/74c3bf244017ba17f7533cd85044a56c9361d1c8/en/SQLDatabase.md


 =||= "Convert SharedDatabaseConnect Dialog to Javafx"Connection works so far.  No more freezes regarding addTabs. in basePanel
Somehow the dialog looks odd, @tobiasdiez  Any idea what is missing? The checkboxes are not visible correct. I just see that it looks really odd in he maintable-beta branch, too. e..g. int he Event Log

Edit// The conection and the synchronization seems to be working.  

Fixes: #3419   PostgresSQL database connection now supports SSL

TODO for documentaition:
Create and configure Server certs
https://www.postgresql.org/docs/current/static/ssl-tcp.html

Convert to keystore format
https://jdbc.postgresql.org/documentation/head/ssl-client.html

![grafik](https://user-images.githubusercontent.com/320228/44865756-7cd7a280-ac83-11e8-99d0-9c619a929163.png)

Currently I only tested it with PostgresSQL, but I see that mySQL should also work
https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-reference-using-ssl.html



<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

TODO: 
- check conflict merge dialog


- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/31/18, 03:58:53 PM
4038.04047JabRef-4.2 CLI does not work"I use JabRef to sanitize my bibfile automatically. (using Jenkins ...)

the newer release 4.2 however does not work from CLI

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef version 4.2 on Windows 10

Steps to reproduce:

using 4.1: - working
  ```
 $ java -jar JabRef-4.1.jar -n --help
usage: jabref [OPTIONS] [BIBTEX_FILE]

[...]
  ```

using 4.2: - Exception + no return to shell (same with master ""4.3-dev"")
  ```
$ java -jar JabRef-4.2.jar -n --help
Exception in thread ""AWT-EventQueue-0"" java.lang.NullPointerException
        at org.jabref.cli.JabRefCLI.printUsage(JabRefCLI.java:262)
        at org.jabref.cli.ArgumentProcessor.processArguments(ArgumentProcessor.java:180)
        at org.jabref.cli.ArgumentProcessor.<init>(ArgumentProcessor.java:71)
        at org.jabref.JabRefMain.start(JabRefMain.java:112)
        at org.jabref.JabRefMain.lambda$start$1(JabRefMain.java:188)
        at java.awt.event.InvocationEvent.dispatch(Unknown Source)
        at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
        at java.awt.EventQueue.access$500(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.awt.EventQueue$3.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source)

  ```

"@johannes-manner As you recently worked on that CLI stuff, do you have any idea? =||= I will try to reproduce and investigate the bug. Initially, I have no idea, why the CLI is not working in this case in the latest release 4.2.  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! =||= works for me - thanks! =||= A first solution for the cli problem #4038"ExportFactory is not initialized at this execution point...
The printUsage method is used twice. The JabRefCLI prints the usage, if an error occurs during argument parsing and the ArgumentProcessor prints the usage, when --help option is chosen. 

I made two solutions for this problem:
 - Commit 1: Some sort of a hack to only get the names of the exporters without altering the processing in the main method. 
![image](https://user-images.githubusercontent.com/30231151/40351621-2505b92c-5dad-11e8-9c3c-c780ae48f514.png) 

 - Commit 2: Changed the order of execution in the main method. The argument processor needs the export factory. I don't know, if the processing of the preferences will influence the cli functionality?

Fixes #4038 

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef"Johannes Mannerjohannes-manner05/24/18, 10:39:04 AM
4000.04056'Do not overwrite existing keys' does not work"Under:... Options > Preferences > BibTex key generator

I checked the 'Do not overwrite...' box but bib entry keys are still overwritten when I click on [generate] key icon. I have tried restarting JabRef but same result. Version 4.2
- - -
Follow up: 2018/05/07

Whether 'Do not overwrite existing keys' flag is set or not, if I double click the generate key icon, it locks the new bibtexkey as one might want but there is no visual indication that the key is actually locked. If I click once every two (2) seconds or so, the key continues to be changed. So there is a locking mechanism but not as documented - perhaps not as designed. If key is locked with double click, I can still delete the key and generate a new one. ""Both icons in the editor use a different implementation as `strg-g` and `quality - auto generate bibtex keys` does. =||= - [ ] ctrl-g `Actions.MAKE_KEY` BasePanel l.443
- [ ] quality auto generate bibtex keys `Actions.MAKE_KEY` BasePanel l.443
- [ ] entry editor left icon `EntryEditor#generateKey`
- [ ] entry editor right icon `BibtexKeyEditor#generateKey` =||= "Extract old Bibtex key generation action"Resolves #4000 

This is one for the JavaFX guys.
We need a new JavaFX action here or duplicate parts of the code.

I already marked the respective code locations with TODOs.
- We could use the FXDialogService but there is an additional checkbox for ""Do not ask this question again"" in the old dialog.
- Also, I don't know how to properly extract such Worker code for JavaFX, otherwise I would have to duplicate the code on all occurences"Stefan Kolbstefan-kolb07/02/18, 01:58:05 PM
4070.04074discrete versus integrated graphics card on MacOS"When starting jabref on MacOS the system automatically changes from the integrated to the discrete graphics card. This is not necessary and is due to the following incorrect key in the Info.plist in jabref 4.2:

```
<key>NSSupportsAutomaticGraphicsSwitching</key>
<string>YES</string>

```

which should in fact be:
```
<key>NSSupportsAutomaticGraphicsSwitching</key>
<true/>

```
This is also documented here:
[https://developer.apple.com/library/content/qa/qa1734/_index.html](https://developer.apple.com/library/content/qa/qa1734/_index.html)""@JabRef/developers Does anyone remember why we included thi switch? I think it was related to some graphics problem on macOS. =||= In an older issue from 16Jan2017 it seemed to have been proposed to solve exactly this problem, See [https://github.com/JabRef/jabref/issues/2470](https://github.com/JabRef/jabref/issues/2470).

It may be that Apple modified the switch since then, so that the old solution no longer works. I tried both possibilities in the plist and only my new suggestion works for me. This is also what is stated in Apple's documentation.
 =||= So do we really need the new switch or is there no problem anymore even if we remove the switch? =||= I just tried removing the switch, but then the problem reappears. The new switch is thus absolutely necessary.  =||= "Mac graphics"Resolves #4070 

@LinusDietz @halirutan  Can you also take a look as you own a mac, please 😄 "Stefan Kolbstefan-kolb06/07/18, 03:00:55 PM
4093.04095Minimum required java version for JabRef 4.3 is higher than the most recent stable java release provided for consumers on Windows 10"JabRef version 4.3 on Windows 10 x64

This issue seems like a small increment error which was introduced in JabRef 4.3 (see [the first line here](https://github.com/JabRef/jabref/blob/v4.3/CHANGELOG.md#changed)) 

Steps to reproduce:

1. Install the most recent java version to date from [this page](https://java.com/en/download/win10.jsp) (which is 1.8.0_171 to date)
2. Install JabRef 4.3 with the installer provided
3. Start JabRef and see the error message that 1.8.0_172 is required, although 1.8.0_171 is the most recent available version

The problem is, 1.8.0_171 and 1.8.0_172 were released simultaneously, shown [here](http://www.oracle.com/technetwork/java/javase/8u172-relnotes-4308893.html) and [here](http://www.oracle.com/technetwork/java/javase/8u171-relnotes-4308888.html). 
Version 1.8.0_171 does not update to 1.8.0_172 automatically, even after checking for new updates in the scheduler, so my question is: Does the CPU leak described in [3943](https://github.com/JabRef/jabref/issues/3943) still persist in 1.8.0_171 or should JabRef support both versions?""Strange...Update 172 is actually available from http://www.oracle.com/technetwork/java/javase/downloads/jre8-downloads-2133155.html. =||= This is obviously an issue of Oracle's Update policy. Two updates were simultaneously distributed, 171 and 172. On Win7 it is the same as on Win10. The higher Update is not provided automatically to customers. @tobiasdiez whether it is available or not is not the question. That it is not distributed is the problem. Do you expext anybody to update java to run Jabref? That is really the problem for customers. They have to do update manually and not via the usual procedure. 
There should a warning to be aware that this might rise a problem. I would like to see the Jabref staff being proactive and not reactive in such a case.

my 5 cts
  =||= Just the same with Debian Jessie. Any atempt to upgrade to 1.8.0_172 failed. =||= Upgrading with the link thomas provided worked smoothly.  =||= Thanks =||= However, in mac, the recommended version for java is still 1.8.0_161 (java 8 update 161). Dont know how to set it , and of course jabref can works even with the warning of updating java.. thus maybe no need to update java?? =||= The java version contains a bug that raises CPU load continuously to 15-30 %. This will heat up your PC, and also causes concurrency problems for JabRef unfortunately. =||= "Set minimum java to 171"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes #4093. Since Java does not automatically update to 171, users have to manually install the 172 update. This is very convenient. 

I actually propose to cherry-pick this PR to 4.x and immediately release 4.3.1.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez06/05/18, 07:37:02 AM
4098.04100Comments are not shown in entry preview"- [X ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.3 on Ubuntu 18.04

Steps to reproduce:

1. Open entry preview on a entry with comments
2. Comments are not shown (older versions have shown the comments field)

How to fix it:
Change following line in the prefix preferences:
```
\begin{review}<BR><BR><b>Review: </b> \format[HTMLChars]{\review} \end{review}</dd>
```
to
```
\begin{comment}<BR><BR><b>Comment: </b> \format[HTMLChars]{\comment} \end{comment}</dd>
```

I am reporting this, because I think that all users are affected.

Thanks for your great work!"Thanks for reporting this. It seems to be that we overlooked this with #3762  =||= Migrate Review field in entry preview to comment"Migrate Review field in entry preview to comment
Replace review with comment in every layout file
Fixes #4098 
<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr06/13/18, 09:39:11 PM
4097.04106Ctrl+O should open the folder in the current directory of the bib file"Currently, JabRef uses the last opened directory to open a file. Is it possible to fire up the action ""Open File"" starting in the directory of the currently edited file when pressing  <kbd>Ctrl</kbd>+<kbd>O</kbd>?

Similar issue at IntelliJ: https://youtrack.jetbrains.com/issue/IDEA-176611""Hi! I could try to implement this. =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. =||= "Opens the directory of the currently edited file when opening a new file"Opens the directory of the currently edited file when opening a new file
Fixes #4097

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [X] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)
"Javier Muñoz FerraraJavierMF06/12/18, 08:16:12 PM
4104.04107Moving to the next entry while in entry editor no longer supported"- [+] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists
JabRef 4.4-dev--snapshot--2018-06-04--master--ee669a542
Windows 7 6.1 amd64 
Java 1.8.0_172

In 4.1 I could move in the entry editor to the next entry using Ctrl-Shift ↓ (the latter from the numeric key pad. That it must be the numeric key pad is not mentioned in the help.
However with the latest snapshot this changing entries is no langer supported. Within the field Ctrl Shift ↓ or Ctrl Shift ↑ move to the end or beginning of that field. Moving to the next or previous entry seems no longer supported. 
""Have you tried resettting the keybindings? =||= When you have the entry editor open, you can navigate with up/down arrow keys on your keyboard. I always used this and it still works.  Of course you have to have the focus on the maintable =||= In the latest snapshot once you have clicked a field e.g. DOI or Note, the up/down keys stop working.
 =||= Resetting the key bindings? I never touched that stuff.
 =||= I can confirm this issue for JabRef 4.3.1 (Linux 4.4.0-127-generic amd64; Java 1.8.0_171).
 Custom key bindings (like Ctrl + Shift + N) don't work; the default (Ctrl + Shift + DOWN) at least doesn't work with the standard arrow keys.  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 4.4-dev--snapshot--2018-06-13--master--5069cb712
Windows 7 6.1 amd64 
Java 1.8.0_172

Sorry to report it is not finished: the Ctrl-Shift down/up does not move to the next entry. It moves to the beginning or the end of the item e.g. Title. =||= Sorry, forgot to say that the defaults changed to ""alt + up/down"". (Moreover, you may need to wait a few minutes until the new build is ready) =||= that works. thank you.
 =||= "Fix a few things in entry editor"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes two things:
- Reactivate next/previous entry shortcuts in entry editor (Fixes #4104)
- Preserve focus of text fields in entry editor when the user switches between entries

Please merge and don't squash.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez06/13/18, 03:58:50 PM
4115.04116Single word journal titles show up with an alert"Not sure when this problem was introduced, but in JabRef 4.3.1, single-word journal titles show up with an orange alert triangle as if they were incorrectly formatted:

![jabref-crop](https://user-images.githubusercontent.com/1858089/41103791-94cd4ba6-6a2f-11e8-9abe-cab2138e896d.png)

Perhaps this is an issue with checking for correct case?  The problem goes away if you change the entry to ""Bioinformatics X"" or something.

Not a huge deal, but kind of distracting to see ""false positive"" alerts like this.""Not all single word journal titles but only if an abbreviation is detected. see http://help.jabref.org/en/JournalAbbreviations =||= Hmm...I still don't see why this should be flagged with an alert.  The abbreviation for most one-word journal titles is just the journal title (i.e., it doesn't need an abbreviation):

![jabref-crop](https://user-images.githubusercontent.com/1858089/41110596-6d2931b8-6a3f-11e8-9eb3-cff4958439bd.png)

It seems, then, there is no way to avoid having an alert show up for such journals? =||= Good catch! =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Is this the same issue as #3925   and now fixed? =||= "Don't report journal name as abbreviated when full name = abbreviated name"
<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes #4115. 

----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez06/13/18, 04:06:31 PM
4120.04123Clean-up operation moves files from file-field to pdf-field and can afterwards no longer be opened directly from JabRef."When I'm cleaning up an entry, the linked PDF is moved from the file={} field to the pdf={} field. Afterwards, it can no longer be opened directly from JabRef:

JabRef version 4.3.1 on Windows 10

Steps to reproduce:

1. Create entry

2. Link file

![2018-06-10 21_31_41-jabref - c__users_alex_repositories_omr-agenda_docear_omr-agenda bib bibtex mod](https://user-images.githubusercontent.com/594497/41205552-d0b82ea6-6cf5-11e8-8076-e40bc38ad8ab.png)

3. Clean up entry

![2018-06-10 21_31_58-jabref - c__users_alex_repositories_omr-agenda_docear_omr-agenda bib bibtex mod](https://user-images.githubusercontent.com/594497/41205554-d946710e-6cf5-11e8-989a-2bfc118aee85.png)

4. Icon to open file from JabRef is gone (the small icon in the table view).

![2018-06-10 21_32_05-jabref - c__users_alex_repositories_omr-agenda_docear_omr-agenda bib_ bibtex mo](https://user-images.githubusercontent.com/594497/41205558-e02b120e-6cf5-11e8-8b91-834d2bc46383.png)""Oh. Found the solution - ""Upgrade external files to use the file field"".

![2018-06-10 21_39_53-cleanup entries](https://user-images.githubusercontent.com/594497/41205605-da56b8be-6cf6-11e8-8efc-a47745eebe2e.png)
 =||= Just out of curiosity, a normal cleanup should not move the file from the file field to the pdf field - even if you don't check the box. It could be a potential bug you have discovered, but I am not sure.
I see you have the convert to bibtex enabled. @koppor  Do you know if the bibtex conversion does this or if this is intended?
 =||= Just discovered an additional (potential) bug, that is related to this: When cleaning up multiple files with the ""Convert to BibTex"" option enabled, only the first selected item gets converted, instead of all selected items. =||= @apacha Could you copy and paste the bibtex entry here as comment? Use three backticks before and after to make it even more easier to follow.

@Siedlerchr I have no clue and it should not happen, because we got rid of the PDF field looong time ago. - Refs https://github.com/JabRef/jabref/pull/251 and probably https://github.com/JabRef/jabref/issues/98, https://github.com/JabRef/jabref/pull/1052 and https://github.com/JabRef/jabref/pull/865 =||= @koppor here you go. It's nothing special.

```TeX
@InProceedings{Pacha2018,
  author    = {Alexander Pacha and Kwon-Young Choi and Bertrand Co{\""{u}}asnon and Yann Ricquebourg and Richard Zanibbi and Horst Eidenberger},
  title     = {Handwritten Music Object Detection: Open Issues and Baseline Results},
  booktitle = {2018 13th IAPR Workshop on Document Analysis Systems (DAS)},
  year      = {2018},
  file      = {:2018 - Handwritten Music Object Detection - Open Issues and Baseline Results.pdf:PDF},
}
```

with
![2018-06-12 14_29_26-cleanup entries](https://user-images.githubusercontent.com/594497/41290401-130cdb6e-6e4d-11e8-8e6a-0a77204a9c83.png)

makes it into 

```TeX
@InProceedings{Pacha2018,
  author    = {Alexander Pacha and Kwon-Young Choi and Bertrand Co{\""{u}}asnon and Yann Ricquebourg and Richard Zanibbi and Horst Eidenberger},
  title     = {Handwritten Music Object Detection: Open Issues and Baseline Results},
  booktitle = {2018 13th IAPR Workshop on Document Analysis Systems (DAS)},
  year      = {2018},
  pdf       = {:2018 - Handwritten Music Object Detection - Open Issues and Baseline Results.pdf:PDF},
}
```




 =||= Okay, I could reproduce this with the convert to bibtex cleanup. Definitively a bug  =||= "Fix convert to bibtex moves contents of the file field"Fixes #4120

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr06/13/18, 06:23:37 AM
3859.04124Set better default windows size for maintable beta version"It is quite ugly when you first startup the maintable beta version of `JabRef`:

![image](https://user-images.githubusercontent.com/13306020/37550834-182dc12a-29cf-11e8-93bf-cd25c15f1f44.png)

Plus, it won't memorize my modifications, either. That is, after I modify the size to a better one, it restores to the default again when I restart it.

This is better:

![image](https://user-images.githubusercontent.com/13306020/37550862-e0d5988c-29cf-11e8-9cef-1577fd533f35.png)


```
JabRef 4.2-dev--snapshot--2018-03-16--maintable-beta--2c2a302a5
Windows 10 10.0 amd64 
Java 1.8.0_161
```""I felt this annoying too. Just adding `mainStage.setMaximized(true);` on starting would provide a wider visualization. Is that ok? =||= I agree that the window should be maximized by default. We also have preference values that sound related but are apparently ignored on start. I think, their original purpose was to save the window location across sessions. It would be nice if this could be investigated as part of resolving the issue at hand.
https://github.com/JabRef/jabref/blob/cc3f7f0fd218e8e936ae4a77a5d1bb3c7b38e3f2/src/main/java/org/jabref/preferences/JabRefPreferences.java#L500-L505 
 =||= `WINDOW_MAXIMISED` is used for reading on start:
https://github.com/JabRef/jabref/blob/66afd4216b4ee0db9525df9782200e36161a9b4f/src/main/java/org/jabref/JabRefGUI.java#L156-L158

but never updated.

`POS_X`, `POS_X`, `SIZE_X` and `SIZE_Y` are never used.

`AUTO_RESIZE_MODE` seems related to the MainTable, not to the Window.
https://github.com/JabRef/jabref/blob/66afd4216b4ee0db9525df9782200e36161a9b4f/src/main/java/org/jabref/preferences/JabRefPreferences.java#L1878-L1882

My proposal would be:

- set the WINDOW_MAXIMISED default to true
- save the window state (maximinization state, pos and size) when closing the application
- reload the window state on start if different to defaults

What do you think?

 =||= Thanks for the investigation. Sounds like a good solution to me! =||= JabRef 5.0-dev--snapshot--2018-11-09--master--bab9ae819
Linux 4.12.14-lp150.12.25-default amd64, KDE Plasma 5.12.6
Java 1.8.0_171

The above version does not save the X window size on exit. If for testing I change the window size with Version 4.3.1, the development version does open with with that window size. So it is only an issue with properly saving the window size. 
 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Saves and reloads window state on close and on open"Saves and reloads window state on close and on open.
Opens by default maximized.

Fixes #3859

----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [X] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Javier Muñoz FerraraJavierMF06/13/18, 06:28:51 AM
3805.04137Can't use a dash after a formatter"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- I have not tested the latest master version from http://builds.jabref.org/master/ as the gui doesn't start.


JabRef version 4.1 on fedora 27


Steps to reproduce:

1. Use a style with a formatter \edition like
``` \begin{edition} \edition-th ed.- \end{edition}```
(I actually need a russian variant, the -th variant is here just for example)
2. The result is that only 'ed.' is printed
3. ...

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""I guess the parsing of the instruction won't work as \edition is not recognized but \editon-th.
Where exactly is this used in the UI? =||= It is used in non-english bibliography entries. Russian in my case. E.g. I need the following:
13-е изд.
which in english means:
13th ed. =||= "Fix #3805: dash correctly terminates commands in layout files"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes #3805. Now commands terminated by a hyphen (like `\edition-`) work correctly.

Way back in 2011, Morten added the extra check for hyphens (commit 392bc7a6dd215eb23766378aa90e3995d0847bb7). However, I'm not aware of any field that has a dash in it, so I'm not sure what was the reason for the change (I couldn't find an old bug report).

Also refactored a bit the layout tests.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez06/29/18, 02:29:23 PM
4201.04212Jabref 5.0dev does not respect the standard directory"JabRef 5.0-dev--snapshot--2018-07-12--master--dd9b22911
Windows 7 6.1 amd64 
Java 1.8.0_172
- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce:

1. load jabref 5.0dev and any library
2. try to save a pdf entry for an entry
3. you will notice that the path which is saved is the full path, the directory in the standard directory entry included

This is a Verschlimmbesserung, sorry for the nice German word. it means changing not for the better, but for the worth.

For first entry is manually edited, the second not
![grafik](https://user-images.githubusercontent.com/9216487/42723317-e533c108-875b-11e8-8c41-4102e171cb8d.png)
the standard directory is:
![grafik](https://user-images.githubusercontent.com/9216487/42723330-1c08e69a-875c-11e8-8090-24fa5e38ec8d.png)

""Did you add the pdf manually or did you use a fetcher?
As far as I remember there was nothing changed in the behavior. Maybe a cleanup call is needed. I currently have the code not at hand.  =||= Sorry for the delay:
I used the rightclick add file for adding the pdf.
 =||= It only happens if you use Rightclick on entry -> Attach file.
Inside the General Tab it works fine.  =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Make attached files relative to the file directory"Fixes #4201

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr07/25/18, 02:50:02 PM
4202.04245The window for About Jabref is to small: the buttons at the bottom are afunctional"JabRef 5.0-dev--snapshot--2018-07-12--master--dd9b22911
Windows 7 6.1 amd64 
Java 1.8.0_172
- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

please see the image, I could not press ?? and ??, I could however, copy paste the information about the version etc.



![grafik](https://user-images.githubusercontent.com/9216487/42723357-991b9cfe-875c-11e8-90b3-354f224bd0a6.png)""Confirmed under Windows 10, latest master. The window is too small to show the buttons at bottom and you can't resize them
![grafik](https://user-images.githubusercontent.com/320228/42754449-cb3cd0d8-88f4-11e8-99bb-37e9d64c0812.png)
 =||= I digged a bit into this. Must be related to some binding the change of our dialog layout stuff under the hood. The information for authors etc is correctly filled in the variables - so it's not the problem.
In contrast to other dialogs the binding are directly defined in the fxml  =||= "Fix style issues in about dialog"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes #4202 and a few other small style related issues. I also created a little new app that make it simple to test the display of JavaFX controls. As of now, I only added a lot of buttons in different styles and states:
![image](https://user-images.githubusercontent.com/5037600/43546917-155834c2-95da-11e8-89d8-485544d0cd45.png)

Please merge instead of squashing the commits.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez08/10/18, 10:17:58 AM
4241.04252added file link has absolute instead of relative path"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef version 4.3.1 on Windows 10

Jabref generates an absolute path to file if the relative path would ""climb"" the directory tree

Steps to reproduce:
0. assume you have a file ""C:\foo\file.pdf""
1. set file directory (whether main, general, or user-specific) to ""C:\bar""
2. right click on any JabRef entry -> select ""Attach file""
3. navigate to and select ""C:\foo\file.pdf""
4. The path to file will be stored in absolute format ""C:\foo\file.pdf"" instead of relative ""..\foo\file""

Note that JabRef (at least on Windows) still handles correctly relative paths which include ""..\"" (or start with ""\\"") as long as you type them yourselves.





""Duplicate of  #4201 

Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Thanks for the very quick response!

I tested the latest master and the issue does not seem to be solved.
(I apologise for not having tested the master before posting!)

Version:
JabRef 5.0-dev--snapshot--2018-07-25--master--077fdacc2
Windows 10 10.0 x86 
Java 1.8.0_171

I can provide further info if needed. =||= I found the issue. The file only gets relativized if you hit the browse button.
Already an idea how to fix this, but I am off until sunday. =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= I just tested the latest master and development snapshop. The file attachment is still not working. I've tried adding via General -> ""+"" and via right clicking on the enry.

Win 7, 64bit
 https://builds.jabref.org/master/JabRef-5.0-dev--snapshot--2018-11-21--master--c19f3a46a.jar
Java version 8.0.1910.12
 =||= @dropbearII what exactly is not working for you? =||= "Fix attach file does not relativize file path"Fixes #4241 

Attached files were only made relative before if you hit the browse button

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/10/18, 09:46:39 AM
4192.04259Search for Spin in comments and correct these comments to new approach"Spin is removed.
e.g.: SaveDatabaseAction.java
```
    /**
     * Run the ""Save as"" operation. This method offloads the actual save operation to a background thread, but
     * still runs synchronously using Spin (the method returns only after completing the operation).
     */
```"Remove Spin comments"Fixes #4192 
Comments mentioning Spin were removed or replaced with a mention that BackgroundTask is now used.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Florian Beetzflorian-beetz08/11/18, 10:33:21 AM
4279.04283"""Cannot open entry-edit-window issue"" not a bug, just minimized window. Enhancement proposal""
Release 4.3.1. Windows 10. 

I've just went through several installations of either this or older releases because I could't open edit window. 
I've now realized, that the edit window has just had no height (was completely minimized). It was not a pleasant useer experience and I would suggest adding a **minimal height limit to the entry edit window**. ""Thanks for your suggestion. This is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Hey, I'm glad I helped even with such a minor contribution. However, I'm
not able to check the latest dev. version, because, for some unknown
reason, I'm getting *This site can’t be reached  ERR_CONNECTION_TIMED_OUT. *

All the best,
Jiri

*Jiří Dostál*



On Thu, 23 Aug 2018 at 09:46, Tobias Diez <notifications@github.com> wrote:

> Thanks for your suggestion. This is now implemented in the latest
> development version. Could you please check the build from
> http://builds.jabref.org/master/. Thanks! Please remember to make a
> backup of your library before trying-out this version.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/4279#issuecomment-415323584>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AokibGhJD2k0UB4TlDCNS0cYg1d4FxdCks5uTl3DgaJpZM4WD43u>
> .
>
 =||= "Add minimal height for entry editor"Fixes #4279.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez08/23/18, 07:45:47 AM
4233.04289Nullpointerexception while merging entries"JabRef 5.0-dev--snapshot--2018-07-12--master--dd9b22911
Linux 4.15.0-29-generic amd64 
Java 1.8.0_181

Steps to reproduce:

1. open [BugRep.bib.txt](https://github.com/JabRef/jabref/files/2223289/BugRep.bib.txt)
2. merge entries
![screenshot from 2018-07-24 12-54-00](https://user-images.githubusercontent.com/15687581/43134164-60d3e490-8f41-11e8-96d9-ae29e5a4cbd6.png)
3. nothing happens

```tex
@PhdThesis{swails2013free,
  author    = {Swails, Jason M.},
  title     = {Free energy simulations of complex biological systems at constant {pH}},
  school    = {University of Florida},
  year      = {2013},
  file      = {:PhDJK/Literature/MD/Swails_2013_DissertationUniversityofFlorida.pdf:PDF},
  publisher = {University of Florida},
  url       = {https://search.proquest.com/openview/7d3d4ac9f59cef5b9ab91b075ae3f09a/1?pq-origsite=gscholar&cbl=18750&diss=y},
}

@PhdThesis{proquest1520243924,
  author    = {Swails, Jason},
  title     = {Free energy simulations of complex biological systems at constant pH},
  year      = {20130101},
  isbn      = {9781303822889},
  keywords  = {Molecular Chemistry ; Physical Chemistry ; Theoretical Physics ; Molecular Chemistry ; Physical Chemistry ; Theoretical Physics ; Pure Sciences ; Biomolecules ; Free Energy ; Ph-Dependent Behavior},
  language  = {eng},
  owner     = {jkalliau},
  pages     = {ProQuest Dissertations and Theses},
  publisher = {ProQuest Dissertations Publishing},
  timestamp = {2018.07.24},
  url       = {http://search.proquest.com/docview/1520243924/},
}
```


<details>

<summary>Event-log</summary>

Opening: /home/jkalliau/ownCloud/PhDJK/LaTeX/Style/BugRep.bib
runCommand error: null
java.lang.NullPointerException
	at org.jabref.gui.mergeentries.MergeEntries.updateAll(MergeEntries.java:443)
	at org.jabref.gui.mergeentries.MergeEntries.initialize(MergeEntries.java:206)
	at org.jabref.gui.mergeentries.MergeEntries.<init>(MergeEntries.java:113)
	at org.jabref.gui.mergeentries.MergeEntriesDialog.init(MergeEntriesDialog.java:65)
	at org.jabref.gui.mergeentries.MergeEntriesDialog.<init>(MergeEntriesDialog.java:41)
	at org.jabref.gui.BasePanel.lambda$setupActions$3(BasePanel.java:346)
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:696)
	at org.jabref.gui.actions.OldCommandWrapper.execute(OldCommandWrapper.java:31)
	at org.jabref.gui.actions.JabRefAction.lambda$new$2(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$343(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$353(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)

runCommand error: null
java.lang.NullPointerException
	at org.jabref.gui.mergeentries.MergeEntries.updateAll(MergeEntries.java:443)
	at org.jabref.gui.mergeentries.MergeEntries.initialize(MergeEntries.java:206)
	at org.jabref.gui.mergeentries.MergeEntries.<init>(MergeEntries.java:113)
	at org.jabref.gui.mergeentries.MergeEntriesDialog.init(MergeEntriesDialog.java:65)
	at org.jabref.gui.mergeentries.MergeEntriesDialog.<init>(MergeEntriesDialog.java:41)
	at org.jabref.gui.BasePanel.lambda$setupActions$3(BasePanel.java:346)
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:696)
	at org.jabref.gui.actions.OldCommandWrapper.execute(OldCommandWrapper.java:31)
	at org.jabref.gui.actions.JabRefAction.lambda$new$2(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$343(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$353(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)

runCommand error: null
java.lang.NullPointerException
	at org.jabref.gui.mergeentries.MergeEntries.updateAll(MergeEntries.java:443)
	at org.jabref.gui.mergeentries.MergeEntries.initialize(MergeEntries.java:206)
	at org.jabref.gui.mergeentries.MergeEntries.<init>(MergeEntries.java:113)
	at org.jabref.gui.mergeentries.MergeEntriesDialog.init(MergeEntriesDialog.java:65)
	at org.jabref.gui.mergeentries.MergeEntriesDialog.<init>(MergeEntriesDialog.java:41)
	at org.jabref.gui.BasePanel.lambda$setupActions$3(BasePanel.java:346)
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:696)
	at org.jabref.gui.actions.OldCommandWrapper.execute(OldCommandWrapper.java:31)
	at org.jabref.gui.actions.JabRefAction.lambda$new$2(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$343(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$353(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)

</details>""Hi. Does anyone mind if I try to fix this one? =||= Sure, go ahead!  =||= Hello,

I am a bit confused on the exact source of this error. I read through the corresponding classes from the Event-Log, but most issues should be caught. Only suspect is line 435 in org.jabref.gui.mergeentries.MergeEntries. It reads ...get(2).... when there are only two options avail. If the user selected two, the fields would clear other than the title, as it is reserved and would throw an error. Any Help would be appreciated.  =||= Thanks for investing this issue! My guess is that in 
https://github.com/JabRef/jabref/blob/611ac556408b23ce9426a290e83c7375a480a989/src/main/java/org/jabref/gui/mergeentries/MergeEntries.java#L443
`entryPreview` is null. It is initialized in the constructor
https://github.com/JabRef/jabref/blob/611ac556408b23ce9426a290e83c7375a480a989/src/main/java/org/jabref/gui/mergeentries/MergeEntries.java#L182-L187
but this happens on a different thread/async, while the call 
https://github.com/JabRef/jabref/blob/611ac556408b23ce9426a290e83c7375a480a989/src/main/java/org/jabref/gui/mergeentries/MergeEntries.java#L206
is immediate. If this analysis is correct indeed, then I would suggest to simply move the `updateAll` call to the end of `runInJavaFXThread` code. =||= @tobiasdiez
I did what you said, but it seems that the dialog is stuck.
https://github.com/1160300909/jabref/blob/master/src/main/java/org/jabref/gui/mergeentries/MergeEntries.java =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= @Siedlerchr 
I tried with:

    JabRef 5.0-dev--snapshot--2018-08-24--master--f43b9c7e8
    Linux 4.15.0-32-generic amd64 
    Java 1.8.0_181

and now the merging-window appears :-D , but my desktop freezes :-(
Which is worse than doing nothing. =||= As the merge window is still an old swing dialog, it might be hidden  =||= @JoKalliauer  Okay, I could get a total freeze on my Ubuntu VM as well.
Please try this workaround. This worked for me.

`java -jar -Djavafx.embed.singleThread=true JabRef.jar` =||= @Siedlerchr 
Thanks: `java -jar -Djavafx.embed.singleThread=true JabRef.jar` worked with:

    JabRef 5.0-dev--snapshot--2018-08-24--master--f43b9c7e8
    Linux 4.15.0-33-generic amd64 
    Java 1.8.0_181
 =||= "fix npe in Merge entries dialog"Fixes #4233
fix fx thread error
convert file to path

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/23/18, 05:05:08 PM
4072.04291Cannot add exclusions into `XMP-metadata`'s `XMP export privacy settings`"I guess we should
1 fix the exclusions mechanism
2 insert 'file' into default exclusions and enable it by default
3 stop storing files paths in bibtex""@johannes-manner  Maybe you can add some insight here  =||= Hey, can you please provide an example and your desired outcome and the problems you detected? =||= I found out that the settings of exclusions are just not saved and that's why take no effect. I managed to setup exclusions by exporting settings into a file, editing that file in a text editor and then importing settings from it. So, 

1 bug with exclusions settings should be fixed
2 exclusions should be enabled by default
3 fields containing IDs and files paths (`pdf`, `bibtexkey`) and any other info about environment should be added to the exclusion list by default.
 =||= @KOLANICH I'm a bit lost with your description. What kind of ""exclusions""? What is exactly the bug that you experience (please provide detailed steps, actual vs expected behavior)... =||= 1 create a bib file
2 create a record, bind it to a pdf
3 `Tools -> Write XMP metadata to PDFs`
4 Open the PDF in a plain text editor and see your bibtex id and the path to the file there
5 Go to `Options`->`Preferences`-`XMP-metadata`
6 see that `pdf` and `bibtexkey` are not there, though they should
7 try to add them
8 You can't add more than 1 record by clicking `+` button. Even if you do that, your settings are not saved when you click `OK`. =||= Refs https://github.com/JabRef/jabref/issues/3861 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "fix loading and storing of XMP Field Exclusions"Fixes #4072 

@koppor  I am not that into the XMP stuff, are those ""fields"" I can add there bibtexfields which I can exclude from the export? 
Then it would make sense to have a combobox analogous to the Cleanup panel with all fields

Edit// Decided to add the combobox with all fields

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->
![grafik](https://user-images.githubusercontent.com/320228/44588230-6cbc5080-a7b5-11e8-909e-ac190ceedc95.png)


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/29/18, 04:00:59 PM
4296.04299Import window freezes JabRef (Mac OS)"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

<!-- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists -->


JabRef version 4.3.1
<!-- version as shown in the about box --> on Mac OS X 10.13.6 x86_64 
Java 1.8.0_181
<!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->


Steps to reproduce:

1. File --> ""Import into current library"" (command key + I)
2. Select a .bib file
3. ""Open""
4. JabRef freezes. The import window never closes, and I have to ""Force Quit"".


<details>
<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

I have the same problem as in https://github.com/JabRef/jabref/issues/3997, titled ""Import window freezes jabref"".

I haven't used JabRef for a while, and previously, this option worked fine. So I guess it is related to a recent version update.

The reply to #3997 was:
""This is a linux problem with the Look and Feel. Try switching to another Look and Feel in the Options.""
I am not a programmer and I do not understand the solution suggested in your reply to #3997, for the linux system. Besides, I don't know if this is a valid solution for Mac OS, too. Can you please suggest a solution for Mac OS users who are not linux experts ?

  <summary>I cannot provide a log file because JabRef freezes and must be killed by ""Force Quit"".</summary>
  
<!--  ```
  Paste an excerpt of your log file here
  ```
-->

</details>""Hi first of all try to uninstall JabRef then try out the latest development version from http://builds.jabref.org/master/
And see also the FAQ http://help.jabref.org/en/FAQosx =||= Hello, 
Thank you for your answer. 

I uninstalled JabRef and installed instead your latest development version:

JabRef 5.0-dev--snapshot--2018-08-24--master--f43b9c7e8
Mac OS X 10.13.6 x86_64 
Java 1.8.0_181

However, I experience exactly the same problem in this new version:

File --> Import & Export --> Import into current library ==> JabRef freezes
                                        --> Import into new library ==> Works fine =||= Thanks for the clarification.  I could reproduce this issue now under Windows, too.
 =||= Hi, 
could you please test if this version fixes the issue for you? My tests under Windows were positive:
https://builds.jabref.org/fiximportfreeze/
Be aware that it could be possible that the import inspection window is hidden somewhere  =||= Thank you, the ""Import into current library"" works fine in the newest version:
JabRef 5.0-dev--snapshot--2018-08-28--fiximportfreeze--a274b40e2
Mac OS X 10.13.6 x86_64 
Java 1.8.0_181 =||= "Fix freeze on import into current library"Execute import inspetion dialog in swing thread

Fixes #4296

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/28/18, 05:50:08 PM
4305.04311Dropping a file on entry editor does nothingWhen dropping a file on the entry editor, nothing happens (and no error is shown). It works through if one directly drops on the file field.just copy and paste of the preview panel methods. =||= Fix drag and drop in entry editor"Fixes #4305

Fixes  #4087 (comment, same issue described)

consistent with preview panel behavior

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr09/02/18, 03:20:32 PM
4307.04317Rename and move file throws file not found exception"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->


Steps to reproduce:

1. Open entry editor, general tab for an entry with linked file (which is not in the default file directory and not named correctly)
2. Right-click file > ""Rename and move""
3. After the file is renamed, JabRef complaints that it cannot find the file (and thus it is not moved into the correct folder). 

Probably, JabRef still thinks the file has its old name although it was just renamed.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Fix that ""Rename and move file"" throws file not found exception""Fixes #4307. Moreover, I refactored a bit how files are renamed/moved to the default file directory. This should make it easier to reuse the code.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/11/18, 08:55:57 AM
4315.04319Support for Docbook 5 export"- [ +] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef 5.0-dev--snapshot--2018-08-24--master--f43b9c7e8
Windows 7 6.1 amd64 
Java 1.8.0_181

There some tiny changes to make the exported xml compatible with docbook 5. I am most willing to provide these changes, but I do not know to whom. BTW I am impressed that the docbook export is now possible without stopping jabref and running the export from the command line. 

Regards
Bernhard""Thanks for your offer! The docbook export is controlled by the `docbook-xyz.layout` files in https://github.com/JabRef/jabref/tree/master/src/main/resources/resource/layout . You can download these files and then modify them according to the changes required. The new files can be tested as any other [custom exporter](http://help.jabref.org/en/CustomExports). Once you have a working copy, you can upload them here or create a proper pull request containing the new files (if you want proper attribution, but this is a bit more work: https://help.github.com/articles/creating-a-pull-request/).
 =||= line 1250 is

`<td id=""LC3"" class=""blob-code blob-code-inner js-file-line"">\begin{author}     \format[CreateDocBookAuthors]{\author} \end{author}</td>`

the macro CreateDocBookAuthors is not part of the files related to docbook export. where may I find them?
 =||= The other points which needed changing have been changed. 
I wonder whether there is a macro that decides about one, two/three, and four and more authors and puts the name accordingly without firstnames like Kleine (2018) or Kleine und Diez (2018) or Kleine, Kleine und Diez (2018) or Kleine et al. (2018). That would come very handy for the xreflabel when author-year citation is required. The ""und"" should be according to the language of the final output. =||= Where to send the changed files for testing?
 =||= Hi, just add attach them here, we will incorporate that.
Regarding the Authors and editors, the macros used in the files refers to the function here:
It creates the xml structure with <firstname> Firstname </firstname> etc

https://github.com/JabRef/jabref/blob/8777c16a99bd83e4a30ddafc859c0c2208b68733/src/main/java/org/jabref/logic/layout/format/CreateDocBookAuthors.java

https://github.com/JabRef/jabref/blob/8777c16a99bd83e4a30ddafc859c0c2208b68733/src/main/java/org/jabref/logic/layout/format/CreateDocBookEditors.java

Regarding the Authors with initials etc, we have an Authors Formatter which can be adjusted for all that cases: http://help.jabref.org/en/CustomExports#the-authors-formatter

 =||= [docbook5export.zip](https://github.com/JabRef/jabref/files/2352993/docbook5export.zip)

I hope that will help. with the html format I was able to see the code not the organization of the page. for the formats the html commands were stripped. =||= Tried the above method:
[docbook5export.zip](https://github.com/JabRef/jabref/files/2353070/docbook5export.zip)
 =||= @bernhard-kleine  You need to click on the actual file, e.g. docbook-layout and then view raw, then you can see the actual xml content.
otherwise you will only get the html stuff from github. =||= [docbook5export.zip](https://github.com/JabRef/jabref/files/2353859/docbook5export.zip)
raw files only
 =||= @bernhard-kleine  Thanks. I integrated your changes. Please have a look at the PR #4319. I there attached a bib file and the results of the docbook export.  You can then test the version from here:
https://builds.jabref.org/docbookfive/ 
Let's please move further discussion to the PR (if further changes are required)

Edit// If you give me your github email address I can add you as co-author in the commit/PR =||= "Add docbook 5 support"Fixes #4315 
Renamed to docbook 5 export
removed old layout files , replace by the ones from @bernhard-kleine 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

I added a bib entry and the corresponding xml file for comparision
Please check if all is exported correctly.
I noticed there is also a masterthesis layout file. I think this needs adjustment as well, right?


[singleExportDocbookEntry.zip](https://github.com/JabRef/jabref/files/2357114/singleExportDocbookEntry.zip)


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr11/25/18, 03:32:29 PM
4322.04325Jabref 5.0-dev UI can't resize in Debian GNU/Linux testing (buster)"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version <JabRef 5.0-dev--snapshot--2018-09-06--master--6c5bc563f> on <Debian GNU/Linux testing (buster), Linux 4.17.0-3-amd64 amd64, Java 1.8.0_181>

Steps to reproduce:

1. Open Jabref. java -jar JabRef 5.0-dev--snapshot--2018-09-06--master--6c5bc563f. 
![image](https://user-images.githubusercontent.com/20276890/45192291-0f76d380-b27a-11e8-84ef-f19d2b0cb491.png). After google ""Gtk-Message"", I installed ""libatk-bridge2.0-*, the warning was persistent.
![image](https://user-images.githubusercontent.com/20276890/45192538-7b0d7080-b27b-11e8-9906-4a48120c9285.png)
2. Now let's check JabRef main UI,
![image](https://user-images.githubusercontent.com/20276890/45192801-24089b00-b27d-11e8-804e-03816a7336ed.png)
and the ""Option"" > ""Preferences"" panel, for example,
![image](https://user-images.githubusercontent.com/20276890/45192878-a4c79700-b27d-11e8-9a7e-d949d33ff186.png)
obviously, the entire window is cut off, the ""OK"" button is invisible, though it actually exist.
3. Again, I install the stable version, JabRef-4.3.1.jar, open it as previously. Sadly, the warning is persistent.
![image](https://user-images.githubusercontent.com/20276890/45193326-07219700-b280-11e8-9374-e17da315dd53.png)
But, the preference panel was normal.
![image](https://user-images.githubusercontent.com/20276890/45193421-78f9e080-b280-11e8-9bad-cdfa9cc62124.png)
My question is,
1) If i want to use dev version, what should i do to avoid the ""Gtk-Message"", because i belive the problem i encounter is arised by module ""atk-bridge"", though the OS is actually installed.
2) or i just use the stable version, and wait for the newer stable version.

Many thanks!
<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Hi, it may be a problem that the correct 64bit libs are missing, after a quick google search I found this issue which refers to ubuntu but maybe it helps here as well:
https://askubuntu.com/a/769033 =||= Thanks!
After i install ""libatk-adaptor"", the Gtk-Message warning is missing, so i am no longer put the screenshot.
But the second problem is persistent.
![image](https://user-images.githubusercontent.com/20276890/45223607-47b5fa80-b2ea-11e8-9084-f0f0fd069e29.png)
 =||= Ah yes, I can reproduce this under Windows, too. The buttons vanish on resize. I have just created a quick fix which should resolve this.  =||= Please try if this build helps: https://builds.jabref.org/resizeOptions/ =||= Thanks , the latest version (2018-09-07) works!!! =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Wrap preferences in scrollPane as well"don't override pref size

Quick fix. We definitively need to redesign/rearrange some prefs

Fixes #4322

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr09/08/18, 09:56:54 AM
4224.04327Save sort-criteria of maintable across sessions"- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef 5.0-dev--snapshot--2018-07-15--master--a44d31668
Windows 7 6.1 amd64 
Java 1.8.0_181

When opening the snapshot, it always opens with some predefined display. I for example rely very much on the timestamp with the latest addition first. Earlier version of Jabref showed me the entry list with the timestamp as the sorting criteria. The newest shapshot does no longer do this and I have always to start by clicking the timestamp e.g. 
Please let keep Jabref the situation in memory, where one has left.""This issue is now fixed in the latest master version. Note, the sort order of the  main table is now stored directly on change. Multiple columns can be sorted by holding SHIFT + clicking on the column header.
The table sort order option in the preferences got removed.

 =||= I actually had to remove the setting of the column sort order at startup for the moment, because it caused some massive performance drawback. Trying to investigate another solution.
 =||= Duplicate of https://github.com/JabRef/jabref/issues/4459 =||= Thanks to @calixtus  this issue is now finally resolved in the latest master.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Save sort order column of main table"Fixes  #4224
Fixes #3850

I tired to fix the above issue. But I have the problem that the column sort listener is never fired when the sort order is DESCENDING. 

Edit// I also fixed an FX Threading error  when opening a new library (the snackbar output was not onFX Thread)

@tobiasdiez  Any idea if I did sth wrong oder have to set the value somewhere else?

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr09/13/18, 11:51:02 AM
3850.04327Default sorting of entry table is lost"I try to set a default sorting in the options dialog for the entry table, for example, `priority`, `year`, `title`. 
In some case I want to sort the entry table for a quick review/search, for example, to a sorting based on the `bibtexkey` to see all works related to that key.
However, when I click on the column headers, the default sorting criteria in the options is lost (or rather got overwritten) - see before and after screenshots.

I would have expected the following behavior:
* Set a default sorting for the entry table
* On changing the sorting
    * the first click applies the ascending order
    * the second click applies the descending order
    * the third click removes the sorting of that column
* So, after the third click, I expect that the default sorting from the options dialog will be applied again

Would love to hear what others think :-)

Cheers
Michael

---

- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef version 4.1 

Steps to reproduce:

1. Set default sorting options dialog for the entry table
2. Go back to your list of references, click on a column header to change the sort
3. Check the default sorting in the options, they got overwritten

Before: 
![image](https://user-images.githubusercontent.com/2610997/37449226-c7c082dc-2829-11e8-9e9f-e83cd1bef994.png)

After:
![image](https://user-images.githubusercontent.com/2610997/37449490-aa76dd42-282a-11e8-80bd-5b8a3cbd563a.png)""Sounds like a reasonable suggestion to me. 

The maintable is currently being re-written completely from scratch. Maybe this feature won't be implemented in the first release of the new version, but we should keep it in mind for later. =||= This issue is now fixed in the latest master version. Note, the sort order of the table is now stored directly on change. Multiple columns can be sorted by holding SHIFT + clicking on the column header.
The table sort order in the preferences got removed.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Save sort order column of main table"Fixes  #4224
Fixes #3850

I tired to fix the above issue. But I have the problem that the column sort listener is never fired when the sort order is DESCENDING. 

Edit// I also fixed an FX Threading error  when opening a new library (the snackbar output was not onFX Thread)

@tobiasdiez  Any idea if I did sth wrong oder have to set the value somewhere else?

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr09/13/18, 11:51:02 AM
4222.04338Ctrl-E to toggle the entry editor"- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef 5.0-dev--snapshot--2018-07-15--master--a44d31668
Windows 7 6.1 amd64 
Java 1.8.0_181

Ctrl-E is the shortcut to open the entry editor. Whereas alt-F4 toggles the internet search on and off, such a feature is not availabe for the ctrl-E, it stays, there is not any key to shut off the entry editor. When working with the keyboard, you still have to use the mouse to stop the entry editor. As you know how to do it, it should be very easy to make also the crtl-e start **and** stop the entry editor.""Normally you should be able to use ESC to close the entry editor and or the current window =||= That is not obvious. But good to know.
 =||= Thanks to @razvan05, this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= ""Added new keyboard shortcut ""ctrl+E"" for closing the entry editor. (#4222)""Enhancement presented here [
Fixes #4222 
I have added a new keyboard shortcut for closing the entry editor by using ""Ctrl+E"".

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"razvan0509/13/18, 09:47:52 AM
4357.04375software stucks when choose browse in Find unlinked files"
<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version <!-- version as shown in the about box --> on Ubuntu 18.04<!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->
JabRef 5.0-dev--snapshot--2018-09-19--master--d8f6c5cec
Linux 4.15.18-041518-generic amd64 
Java 1.8.0_181

Steps to reproduce:

1. Quality
2. Find unlinked files
3. browse
Then it will stuck. I can move the mouse, switch to other software, but whatever I do to jabref is useless. I can't  close it by clicking exit.
<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>

![2018-09-23 19-30-31](https://user-images.githubusercontent.com/40697840/45927579-e045af00-bf67-11e8-82b0-cd1fd54dfa6b.png)
</details>""I'm working on this right now.  It looks like it may be because FindUnlinkedFilesDialog.java is written in Swing, while BasePanel.java is mostly written in JavaFX.  It seems that on the line `databaseContext = frame.getCurrentBasePanel().getBibDatabaseContext();` the `basePanel` is either not shown as being selected or not having a `BibDatabaseContext`.  Could this be the case?

Also, I tried using the debugger both on Find Unlinked Files and Find Duplicates, and Find Duplicates seemed to work fine.  `frame` on both seemed to have similar attributes and properties, but I wasn't completely sure on how to read it.

Any ideas on this?

 =||= Ahh damn. I started yesterday to convert the dialog to JavaFX in order to fix this issue. Sorry @NorwayMaple for not letting you know. My bad 😞 I hope you didn't invest to much time into debugging this issue. =||= That's fine!  I can find another issue, and I didn't spend a lot of time.

Was I right that the problem stemmed from incompatibility between Swing and JavaFX? =||= @NorwayMaple Yes, the underlying problem was a threading issue between the JavaFX and Swing thread. =||= @tobiasdiez Thanks for the info! =||= @tobiasdiez I looked at your commit, and it looks like there is no FXML or MVVM in `src/main/java/org/jabref/gui/externalfiles/FindUnlinkedFilesDialog.java`.  Since I'm trying to learn JavaFX and MVVM, what is your reasoning for writing it differently? =||= Laziness 😉 
I'm currently a bit short on time and it would have been additional work to convert the code structure to proper MVVM. The combo MVVM+FXML is convenient when writing new dialogs but for the conversion of old dialogs it is sometimes easier to just replace the swing controls by the JavaFX ones. That's not perfect but still better than having a buggy dialog.

If you want, you can start to convert other dialogs in a similar fashion (but please not the ""Merge entries dialog"" - that's my next project) and we can then refactor those dialogs to MVVM later together. =||= For me, the two biggest tasks would be to familiarize myself with the working parts of JabRef in general in order to write the ViewModel, and to better understand ViewLoader and EasyBind in the View.  Is there an easy way, for example, to learn how to apply EasyBind to MVVM (no pun intended)? =||= I wonder wheather the problem is fixed? I have tried the JabRef 5.0-dev--snapshot--2018-11-01--master, but the problem still exits. =||= Yes, this issue should be fixed now (and it is for me). Please make sure that you run the newest version. The dialog was completely rewritten and now should also look differently. =||= "Convert find unlinked files dialog to JavaFX"Fixes #4357.
![image](https://user-images.githubusercontent.com/5037600/47000193-048c4a00-d128-11e8-8368-3a491268802c.png)"Tobias Dieztobiasdiez10/17/18, 10:31:35 AM
4356.04408adding file to file field - automatically asking what to do?"I believe in some more or less distance past, it was possible to drag and drop a file onto the entry editor's file field and then jabref automatically asked what to do with the file, e.g. automatically rename and store the file in the preferred folder (#4166).
would be amazing if this, too, worked again ;) ""We reworked drag and drop completely. If you drop directly on the file field the file will be just linked.
If you drop it elsewhere on the entry editor or preview panel it will be renamed and moved to the file directory. 
If you drop on maintable, JabRef tries to create an entry and asks what to do =||= Its somewhat strange that drop on file field is different from a drop on the rest of the entry editor. I think, this should be aligned (i.e. always rename + move + link). =||= I agree with the alignment but not that it must always rename+move+link. I, for one, prefer to keep my files the way I have already named them and in the subfolders they are already in. It could be a Preference choice:

""When dropping a file on the entry editor, do you wish to ... 
a) only link (i.e., keep the file where it is and with its original name)
b) rename and keep in location
c) rename+move+link""

Something along those lines. =||= So in fact we restore the dialog asking what to do =||= Not necessarily if it is in Options -> Preferences. Then one chooses once and that's it. =||= Okay, will think about t his:
In the meantime we have the following options also avaiable:

Holding Shift  and dragging or directly dropping without key on windows ->  move + rename + link
Holding alt key on windows -> link file to entry, keep in location
Holding ctrl on windows -> copy files to file dir + link to entry

The modifiers are the system ones for MOVE, LINK, and COPY. They are system dependent:
https://ux.stackexchange.com/questions/83748/what-are-the-most-common-modifier-keys-for-dragging-objects-with-a-mouse

 =||= A preference option for the default action is a good idea in my opinion. Thanks @tb77phd for the suggestion. =||= If anybody is not looking into this, can I take this issue? =||= @shahamish150294  Sure go ahead. as starting point you can look at the EntryEditor and in the LinkedFilesEditor. The methods which handle DragAndDrop are all similiar:
` this.setOnDragDropped(event -> {  ........ }` =||= As part of this task I am also removing the three methods related to Drag and Drop in 
https://github.com/JabRef/jabref/blob/1f14795b20eea9be44a0614afe5b8a2bd86a7c0e/src/main/java/org/jabref/gui/fieldeditors/LinkedFilesEditor.java#L68-L70
because now the drag and drop will be a part of the EntryEditor and hence IMO, this is not needed. Please let me know if I am correct. @Siedlerchr 
Thanks. =||= Is this issue still available to work on? I'd like to contribute for a school project. =||= @shahamish150294  Yeah. I think we don't need there any special handling. Please test if it's really sufficient to have them in the entry editor. 

@morganlovato  Seems like @shahamish150294  is already working on this. But you can look through the other issues and take one =||= Thanks to @shahamish150294 this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= The latest build seems to reflect the changes. Thank you @tobiasdiez and @Siedlerchr  for your help! =||= JabRef 5.0-dev--snapshot--2018-11-02--master--611e35a6b
Linux 4.18.16-200.fc28.x86_64 amd64 
Java 1.8.0_172

Sorry, but in my version drag/drop of a pdf onto an existing entry (both in table and in fiel field of editor) does not result in any effect: no file linked.

Only if I use the + button next to the file field in the entry editor, then I can add a single entry. Here, at least, I would also like to be able to add several files (e.g. chapters of a book that are from the same author).

 =||= @ilippert  Have you checked the preferences? =||= I guess I checjked preference  Entry editor  Default drag & drop: Copy, rename and link file.

The problem is is difficult to reproduce: two times I managed by now to drag a file from external file browser onto the file field and then a link became visible (as expected). But I cannot reliably reproduce this linking. 
I did not yet manage at all to drag & drop the file onto the specific entry table entry and then get a link. =||= It should not only work in the file field, it should work on the whole entry editor. =||= just tried again. Interestingly, when I drag & drop a file on the entry editor after phase of non-use, the link is produced. I then remove the link to test again. Now, a second later, I cannot re-perform this effect: no link is produced. =||= "Add a preference to add files in entry editor"This PR for #4356 mainly involves

Fixes #4356

- Allowing users to choose how they want to link/copy/rename/move files in Entry Editor through Preferences
- Apply same behavior of drag and drop for the whole entry editor instead of a different behavior in file view of the entry editor.
----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues/194)
I will log an issue to help.jabref.org if these changes are approved. Please feel free to suggest any changes. Thank you!

![image](https://user-images.githubusercontent.com/7998085/47543328-4004e200-d8a7-11e8-9a5d-fb89a600079a.png)"Amish Shahshahamish15029411/01/18, 05:07:49 PM
4348.04410JabRef hangs when trying to merge entries"- [ X ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef 5.0-dev--snapshot--2018-09-13--master--e83680f18
Linux 4.4.0-135-generic amd64 
Java 1.8.0_181


Steps to reproduce:

1. Click on two entries
2. Right-click and choose ""Merge entries"".

The merge window is shown, and JabRef is frozen - it must be killed from the command line.
There are no particular log messages."Can i look at this problem? =||= Thanks for your interest and for asking if this issue is still up for grabs. However, I've already a PR in the pipeline. Have a look at https://github.com/JabRef/jabref/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22 for other good issues. =||= Ok, how about [scrollbar in preferences](https://github.com/JabRef/jabref/issues/4287) or [dark theme](https://github.com/JabRef/jabref/issues/4130)? =||= For the dark theme issue, somebody opened already a PR. But the scrollbar issue is open. I guess the problem lies somewhere in these lines: https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/Base.css#L658-L719 =||= Okay, I'll look at the scrollbar issue and I'll try solve this. Thank you. =||= Convert merge entries dialog to JavaFX"Converts the merge entries dialog to JavaFX. Fixes #4348. The dialog now looks like as follows (still not too beautiful, but at least it works):
![image](https://user-images.githubusercontent.com/5037600/47570633-f06df700-d936-11e8-833f-fc4877d9f251.png)
 "Tobias Dieztobiasdiez10/30/18, 02:07:48 PM
3537.04413Paste entries into group bug"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.0 on Windows 8.1

Steps to reproduce:

1. Open JabRef (error on console, see details)
2. Open the groups view
3. Create a new Document
4. Click ""All entries""
5. Paste some Bibtex
6. Entry does not appear, entry counter is ""0"" (Expected: Entry does appear, counter increases)
7. Save the file
8. File contains the entry (as expected)
9. create a new group and click on them
10. click on ""All entries""
11. the entry now appears (as expected), counter is still ""0"" (not expected)
12. create a second new document
13. switch back to the first document
14. counter is ""1"" (as expected)

<details>
  <summary>Log File</summary>
  
  ```
  AI: INFO 15-12-2017 16:13, 22: Configuration file has been successfully found as resource
16:13:18.717 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException: null
        at org.jabref.gui.search.GlobalSearchBar.lambda$new$5(GlobalSearchBar.java:196) ~[JabRef--master--latest.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_151]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[jfxrt.jar:?]
        at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177) ~[jfxrt.jar:?]
        at java.lang.Thread.run(Thread.java:748) [?:1.8.0_151]
File: grouptree.fxml not found, attempting with camel case
File: grouptree.css not found, attempting with camel case
  ```
</details>""The exception looks similar to #3525. Should be fixed. But unfortunately, as we currently have issues with our certificate, the master binary does not get updated. 
Either you wait or you run JabRef from source with gradlew run  =||= Yes, the NPE error should be fixed but not the update problem. I'll try to have a look at it in the next days. =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Hi. I tested the old steps to reproduce with JabRef-5.0-dev--snapshot--2018-11-06--master--5548f8f04.jar. I see some improvements (new entry now appears immediately), but there are still some problems. The problem is also not limited to pasting entries, but also affects creating new entries.

New steps to reproduce:

1. Open JabRef
2. Open the groups view
3. Create a new Document
4. Click ""All entries""
5. Paste some Bibtex / create a new entry
    * Entry appears (as expected)
    * **entry counter of  ""All entries"" is ""0"" (not expected)**
7. Save the file
8. File contains the entry (as expected)
9. create a new group
   * entry counter of  ""All entries"" is now ""1"" (as expected) =||= @jmkeil  Thanks for your report. The entry number bug is known. If you switch to another db and then back it should be correct again. See issue #4441 =||= Yes, this is the same bug. So this issue can stay closed. Thanks. =||= "Fix group hit counter when adding entriesFixes #3537 by replacing the EventBus subscription by a JavaFX listener.Tobias Dieztobiasdiez10/27/18, 01:36:08 PM
1019.04415Make Show Preferences Window searchable"It would be nice to have an incremental search field for searching through the Prerferences in the ""Show Prefences"" window""Refs #113, #268.

Think, we should really wait for the JavaFX port.
 =||= It's a nice idea however I'd rather have it in the preferences window itself than in the `Show preferences` view. Like in Intelij or Eclipse to find configuration options easier without knowing in which subsection to look for.

I'd close this issue though for know as this should be done when refstructuring the preferences tab #382.
 =||= Is this still up for grabs? I would give it a try. 
Never contributed to your project, though. If I cant make it, I'll write here again. 

I would try it to design like @stefan-kolb mentioned =||= Yes, this is still open. It would be really nice to have it integrated in the preferences window as a tab and to have it searchable =||= Good opportunity to learn and apply JavaFX. We welcome your contribution!
Happy #hacktoberfest!

Manuel <notifications@github.com> schrieb am Mi., 17. Okt. 2018, 10:50:

> Is this still up for grabs? I would give it a try.
> Never contributed to your project, though. If I cant make it, I'll write
> here again.
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/1019#issuecomment-430544718>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTaftfnsFwpAnTls3OGvmULHeWUFyJyks5ulu9rgaJpZM4H2AlI>
> .
>
 =||= You might have a look at how the search is implemented in https://github.com/dlemmermann/PreferencesFX . =||= Hi, we are two students looking for open source project to participate in and found this issue through the awesome beginners list.
Is this issue still open? Can we start working on it? 

Or is @WtfJoke still working on this? =||= @paulKra I started working on it. Since I am limited on time, I am still in the beginning but still want to do it, hope you guys dont mind :) =||= Could you three join forces? This task is not that small and it would be a
pity if work was stopped in the half... If @paulKra would start working and
creating a WIP pull request, @wtfjoke could step in? Or you could have a
sync call? 😇

Manuel <notifications@github.com> schrieb am Fr., 26. Okt. 2018, 15:55:

> @paulKra <https://github.com/paulKra> I started working on it. Since I am
> limited on time, I am still in the beginning but still want to do it, hope
> you guys dont mind :)
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/1019#issuecomment-433416037>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/ABTafixhbC1TsyhxcYP2TTHspEESnnCqks5uoxRHgaJpZM4H2AlI>
> .
>
 =||= I dont mind doing this together. Im up for a chat/call with @paulKra and your friend. =||= I would like to work on implementing this, unless it's still being worked on by someone? =||= There is a PR from someone who started working on it,but not finished.
Maybe you can ask the authors or reuse some commits.
There is also another issue from me which is about the window showing all
preferences and searching in there.
That would be awesome if you could implement it

Yash Kothari <notifications@github.com> schrieb am Fr., 8. März 2019, 20:33:

> I would like to work on implementing this, unless it's still being worked
> on by someone?
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/1019#issuecomment-471049114>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AATi5K0ypwD6p7g436OvdXy72uu91Mvuks5vUrsbgaJpZM4H2AlI>
> .
>
 =||= I didnt forget about the issue/pr (see https://github.com/JabRef/jabref/issues/4415) but still havent found time to progress. :see_no_evil:

 @CaptainDaVinci you can continue on my branch. I invited you to my repo. I did some  basics and the remaining part is about marking the found entries =||= How is this related now to https://github.com/JabRef/jabref/pull/4759? =||= The show all preferences window (the table view). is now searchable . The preferences window itself not yet.  =||= Thanks to @WtfJoke and @CaptainDaVinci this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= I took the latest master (JabRef-5.0-dev--snapshot--2019-03-28--master--a73167933.jar) and search looks fine for me.

I have however one note: 
If I search a term, which is not in the currently selected settings view (eg. I have opened Advanced View and search for something which is in General View), then the view doesnt switch. 

I think in terms of user experience, it would be great to switch to any (or the first) view, which contains the term, if there any hits.

Not sure if should create a separate issue for that. =||= @WtfJoke yes please open a new issue for it. It's a useful suggestion. =||= I have implemented the changes suggested by @WtfJoke , is it okay if I push the changes on the same branch where the search was implemented?
 =||= Nice :) Probably you should create a separate branch from the latest master (since the search branch got already merged) =||= There is also an issue of buttons not being highlighted. 
Also, under _external programs_ tab the buttons _Settings for *_  are inside a grid pane and aren't considered when searching. =||= "Searchable/Filterable preferences"Fixes #1019

Up so far I just created the textbox for searching and fixed a deprecation warning.
I added @paulKra as collaborator on my fork.

Last step so far: I was asking myself how I can access the text of the different Preferences-Categories and I was wondering if I need a new Interface (something like PrefTabContents or PrefTabContainer for it or extend existing PrefsTab Interface.


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ManuelWtfJoke03/27/19, 05:58:46 PM
4417.04418autogenerate bibtex key not working"In master branch, autogenerate bibtex key not working
Steps to reproduce the behavior:
1. open Jabref click one entry
2. press ctrl+G, the confirmation dialog not pop up, and nothing change
3. from the menu click, it's the same result.

The reason seems to be the confirmation dialog can not up, hope someone to fix this:
https://github.com/JabRef/jabref/blob/940fa2ce3f5579d65b503d4d294f832be5c9d2a9/src/main/java/org/jabref/gui/actions/GenerateBibtexKeyAction.java#L59

<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version: current master
<!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
<!-- Hint: If you use a development version (available at http://builds.jabref.org/master/), ensure that you use the latest one. -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->



<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Can not confirm this. You have probably enabled the settings Do not overwite keys and disabled the confirmation dialog in the settings ""Warn before overwriting keys"" =||= If disabled the confirmation dialog, it worked as expected.
If enable the confirmation dialog, it won't work, no dialog, no key generated.

![peek 2018-10-27 17-36](https://user-images.githubusercontent.com/8992037/47602269-1ff03280-da0f-11e8-9689-f2067029116e.gif)
 =||= Ah okay, now I reproduce it as well. No dialog is shown =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix generate bibtex key overwrite warning dialog"Fixes #4417

The problem was that the GenerateBibtexKeyAction is executed using a TaskExecutor and therefore not run on the FX Thread. Unfortunately the exception was swallowed and not reported.


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr10/27/18, 02:00:14 PM
482.04421Add JabRef Setup Icon for the install4j installation proceduresWe should create a JabRef installation icon and use this for the installer and uninstaller. "Should be done when creating a fresh new Icon design. Or we can just use the normal Jabref icon for now?
 =||= It should not be the field of the app itself, as this may be confusing. 
 =||= http://stackoverflow.com/questions/19199826/how-to-customize-the-icon-of-installer-exe-created-by-install4j =||= Is this issue resolved? =||= Nope, no setup icon yet. =||= Is this issue resolved? If not, can I have a go at it? =||= @miderleta Sure go ahead, this issue is still open!
<img width=""455"" alt=""annotation"" src=""https://user-images.githubusercontent.com/5037600/45553974-96f1b300-b835-11e8-8068-e163dd71d1ae.png"">
When you are at it, it would be nice if you could replace the ""install4j"" text by ""JabRef"".

 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

Unfortunately I could only change the watermark and the icon on the top right. Changing the icon in the header-bar did not work.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= https://stackoverflow.com/questions/19199826/how-to-customize-the-icon-of-installer-exe-created-by-install4j
this does not work? =||= @tobiasdiez  That is already done. That is the icon you have when you download JabRef. However, that does not influence the icon installer_header which is the one I could not replace.

![grafik](https://user-images.githubusercontent.com/320228/47615485-9e041600-daaf-11e8-8a63-c5ec53e9899b.png)
 =||= "Add JabRef icon to installer and change watermark to JabRef"Fixes #482

I also updated to the newest install4j release 4.0.8
I had to adapt Circle Ci 2.0 to create a new cache when a new version comes. So whenever the script ""scripts/extract-install4j.sh"" is modified, circle ci 2.0 will create a new cache.


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

![grafik](https://user-images.githubusercontent.com/320228/47608416-82f0c200-da2d-11e8-8c5f-3b0973e2ec96.png)
----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr10/28/18, 11:36:39 AM
4422.04426Import pdf file into current library doesn't work in second time."Tested with JabRef 4.21 64 bit Windows

Steps to reproduce the behavior:

1. Create new BibTeX library
2. Import into current library
3. Select PDFContent and choose pdf file.
4. Select Open
file is opened
//import second pdf file
5. Import into current library
6. Select PDFContent and choose pdf file.
7. Select Open
file is not opened
status. importing in unknown format...

Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.ArrayIndexOutOfBoundsException: -1
	at org.jabref.logic.importer.fileformat.PdfContentImporter.proceedToNextNonEmptyLine(PdfContentImporter.java:525)
	at org.jabref.logic.importer.fileformat.PdfContentImporter.importDatabase(PdfContentImporter.java:228)
	at org.jabref.gui.importer.ImportMenuItem$MyWorker.run(ImportMenuItem.java:128)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at spin.Invocation.evaluate(Invocation.java:175)
	at spin.off.SpinOffEvaluator.evaluate(SpinOffEvaluator.java:120)
	at spin.ProxyFactory.evaluteInvocation(ProxyFactory.java:85)
	at spin.JDKProxyFactory$SpinInvocationHandler.invoke(JDKProxyFactory.java:102)
	at com.sun.proxy.$Proxy30.run(Unknown Source)
	at org.jabref.gui.importer.ImportMenuItem.automatedImport(ImportMenuItem.java:78)
	at org.jabref.gui.importer.ImportFormats$1ImportAction.doImport(ImportFormats.java:88)
	at org.jabref.gui.importer.ImportFormats$1ImportAction.lambda$actionPerformed$0(ImportFormats.java:75)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.importer.ImportFormats$1ImportAction.lambda$actionPerformed$1(ImportFormats.java:75)
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177)
	at java.lang.Thread.run(Unknown Source)
""Sorry, the version used is 4.3.1 =||= Could you please test with the latest development version? https://builds.jabref.org/master/ =||= I tested with the latest development version and it doesn't open pdf file second time. It opens only first time.
So there is same bug. =||= using css jar:file:/C:/jabref2/JabRef-5.0-dev--snapshot--2018-10-28--master--9a3f2d627.jar!/org/jabref/gui/Base.css is the verstion which I tested. =||=     JabRef_windows-x64_5_0-dev--snapshot--2018-10-28--master--9a3f2d627.exe 28.10.2018 13:43 68.6 
  sorry, this version I tested. =||= I could confirm this. This is very odd. In fact it's still an ArrayIndexOutOfBoundsException which is thrown and then somehow swallowed from the executor  =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix ArrayIndexOutOfBoundsException on second pdf import"Fixes #4422 

The variable formally known as i is a global variable which had -1 after the first run and therefore threw an exception

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr10/30/18, 08:34:55 AM
4438.04443Unable to start up Jabref"When I run JabRef_windows-x64_5_0-dev--snapshot--2018-10-30--master--274fed486.exe nothing happens.
The program appears on Windows task manager but there is no usable Window.
I have the same problem with several older Jabref 5.0 versions I've tried.  
Version 4 was working well.

Then I have tried to run it from the command line with
java -jar JabRefxxxx.jar and I get this error messages:

```
C:\Program Files\JabRef>java -jar JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar
20:12:24.051 [JavaFX Application Thread] INFO  org.jabref.logic.importer.OpenDatabase - Opening: C:\Personal\women\person-years.bib
20:12:25.617 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Could not find file: /ieee.csl
java.nio.file.NoSuchFileException: \ieee.csl
        at sun.nio.fs.WindowsException.translateToIOException(Unknown Source) ~[?:1.8.0_191]
        at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source) ~[?:1.8.0_191]
        at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source) ~[?:1.8.0_191]
        at sun.nio.fs.WindowsFileSystemProvider.newByteChannel(Unknown Source) ~[?:1.8.0_191]
        at java.nio.file.Files.newByteChannel(Unknown Source) ~[?:1.8.0_191]
        at java.nio.file.Files.newByteChannel(Unknown Source) ~[?:1.8.0_191]
        at java.nio.file.Files.readAllBytes(Unknown Source) ~[?:1.8.0_191]
        at org.jabref.logic.citationstyle.CitationStyle.createCitationStyleFromFile(CitationStyle.java:110) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.logic.citationstyle.CitationStyle.getDefault(CitationStyle.java:127) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.logic.citationstyle.CitationStyleCache.<init>(CitationStyleCache.java:29) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.gui.BasePanel.<init>(BasePanel.java:177) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.gui.JabRefFrame.addTab(JabRefFrame.java:1211) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.gui.JabRefFrame.addParserResult(JabRefFrame.java:1010) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:123) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.JabRefGUI.<init>(JabRefGUI.java:62) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.JabRefMain.start(JabRefMain.java:77) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863) ~[jfxrt.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326) ~[jfxrt.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_191]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[jfxrt.jar:?]
        at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177) ~[jfxrt.jar:?]
        at java.lang.Thread.run(Unknown Source) [?:1.8.0_191]
20:12:26.171 [JavaFX Application Thread] ERROR org.jabref.JabRefMain - Unexpected exception
java.nio.file.FileSystemNotFoundException: null
        at com.sun.nio.zipfs.ZipFileSystemProvider.getFileSystem(ZipFileSystemProvider.java:171) ~[zipfs.jar:1.8.0_191]
        at com.sun.nio.zipfs.ZipFileSystemProvider.getPath(ZipFileSystemProvider.java:157) ~[zipfs.jar:1.8.0_191]
        at java.nio.file.Paths.get(Unknown Source) ~[?:1.8.0_191]
        at org.jabref.gui.util.ThemeLoader.addAndWatchForChanges(ThemeLoader.java:93) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.gui.util.ThemeLoader.installCss(ThemeLoader.java:82) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:153) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.JabRefGUI.<init>(JabRefGUI.java:62) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at org.jabref.JabRefMain.start(JabRefMain.java:77) ~[JabRef-5.0-dev--snapshot--2018-10-29--master--11a62dd5e.jar:?]
        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863) ~[jfxrt.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326) ~[jfxrt.jar:?]
        at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
        at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_191]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[jfxrt.jar:?]
        at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177) ~[jfxrt.jar:?]
        at java.lang.Thread.run(Unknown Source) [?:1.8.0_191]
```


In order to try it I've added antivirus and firewall exceptions (and also tried disabling them).
I'm using Windows 10 x64 and Java(TM) SE Runtime Environment (build 1.8.0_191-b12).
I can't add a screenshot nor excerpt of log (available in the error console) because I can't even start the program.""@florian-beetz any idea? Does it have to do with the submodule?  =||= Debian 9 sid has the same error.
Jabref version: Jabref master latest.jar 2018-10-30
![image](https://user-images.githubusercontent.com/20276890/47759787-34248000-dcec-11e8-9237-40b26658404c.png)
 =||= macOS Majova has the same problem, Jabref master latest.jar 2018-10-31 =||= Me too.  My jar file is from yesterday, October 30.  

Linux 4.15.0-38-generic amd64 
Java 1.8.0_191


I get the following output, then nothing more.



$ java -jar JabRef--master--latest.jar
10:51:06.239 [JavaFX Application Thread] INFO  org.jabref.logic.importer.OpenDatabase - Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
10:51:08.963 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Could not find file: /ieee.csl
java.nio.file.NoSuchFileException: /ieee.csl
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_191]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_191]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_191]
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) ~[?:1.8.0_191]
	at java.nio.file.Files.newByteChannel(Files.java:361) ~[?:1.8.0_191]
	at java.nio.file.Files.newByteChannel(Files.java:407) ~[?:1.8.0_191]
	at java.nio.file.Files.readAllBytes(Files.java:3152) ~[?:1.8.0_191]
	at org.jabref.logic.citationstyle.CitationStyle.createCitationStyleFromFile(CitationStyle.java:110) ~[JabRef--master--latest.jar:?]
	at org.jabref.logic.citationstyle.CitationStyle.getDefault(CitationStyle.java:127) ~[JabRef--master--latest.jar:?]
	at org.jabref.logic.citationstyle.CitationStyleCache.<init>(CitationStyleCache.java:29) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.BasePanel.<init>(BasePanel.java:177) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.JabRefFrame.addTab(JabRefFrame.java:1211) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.JabRefFrame.addParserResult(JabRefFrame.java:1010) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:123) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefGUI.<init>(JabRefGUI.java:62) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefMain.start(JabRefMain.java:77) ~[JabRef--master--latest.jar:?]
	at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_191]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]
10:51:09.605 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Could not find file: springer-humanities-author-date.csl
java.nio.file.NoSuchFileException: springer-humanities-author-date.csl
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_191]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_191]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_191]
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) ~[?:1.8.0_191]
	at java.nio.file.Files.newByteChannel(Files.java:361) ~[?:1.8.0_191]
	at java.nio.file.Files.newByteChannel(Files.java:407) ~[?:1.8.0_191]
	at java.nio.file.Files.readAllBytes(Files.java:3152) ~[?:1.8.0_191]
	at org.jabref.logic.citationstyle.CitationStyle.createCitationStyleFromFile(CitationStyle.java:110) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.PreviewPanel.updateLayout(PreviewPanel.java:223) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.PreviewPanel.<init>(PreviewPanel.java:153) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.BasePanel.<init>(BasePanel.java:209) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.JabRefFrame.addTab(JabRefFrame.java:1211) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.JabRefFrame.addParserResult(JabRefFrame.java:1010) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:123) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefGUI.<init>(JabRefGUI.java:62) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefMain.start(JabRefMain.java:77) ~[JabRef--master--latest.jar:?]
	at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_191]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]
10:51:09.685 [JavaFX Application Thread] ERROR org.jabref.JabRefMain - Unexpected exception
java.nio.file.FileSystemNotFoundException: null
	at com.sun.nio.zipfs.ZipFileSystemProvider.getFileSystem(ZipFileSystemProvider.java:171) ~[zipfs.jar:1.8.0_191]
	at com.sun.nio.zipfs.ZipFileSystemProvider.getPath(ZipFileSystemProvider.java:157) ~[zipfs.jar:1.8.0_191]
	at java.nio.file.Paths.get(Paths.java:143) ~[?:1.8.0_191]
	at org.jabref.gui.util.ThemeLoader.addAndWatchForChanges(ThemeLoader.java:93) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.util.ThemeLoader.installCss(ThemeLoader.java:82) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefGUI.openWindow(JabRefGUI.java:153) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefGUI.<init>(JabRefGUI.java:62) ~[JabRef--master--latest.jar:?]
	at org.jabref.JabRefMain.start(JabRefMain.java:77) ~[JabRef--master--latest.jar:?]
	at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326) ~[jfxrt.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_191]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]
10:51:09.690 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Could not find file: springer-humanities-author-date.csl
java.nio.file.NoSuchFileException: springer-humanities-author-date.csl
	at sun.nio.fs.UnixException.translateToIOException(UnixException.java:86) ~[?:1.8.0_191]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102) ~[?:1.8.0_191]
	at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107) ~[?:1.8.0_191]
	at sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:214) ~[?:1.8.0_191]
	at java.nio.file.Files.newByteChannel(Files.java:361) ~[?:1.8.0_191]
	at java.nio.file.Files.newByteChannel(Files.java:407) ~[?:1.8.0_191]
	at java.nio.file.Files.readAllBytes(Files.java:3152) ~[?:1.8.0_191]
	at org.jabref.logic.citationstyle.CitationStyle.createCitationStyleFromFile(CitationStyle.java:110) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.PreviewPanel.updateLayout(PreviewPanel.java:223) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.PreviewPanel.updateLayout(PreviewPanel.java:210) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.JabRefFrame.lambda$init$3(JabRefFrame.java:279) ~[JabRef--master--latest.jar:?]
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263) ~[JabRef--master--latest.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146) ~[jfxrt.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102) ~[jfxrt.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:717) ~[jfxrt.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(TabPane.java:735) ~[jfxrt.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(TabPane.java:794) ~[jfxrt.jar:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$17(TabPane.java:691) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233) ~[jfxrt.jar:?]
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482) ~[jfxrt.jar:?]
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205) ~[jfxrt.jar:?]
	at javafx.collections.ModifiableObservableListBase.add(ModifiableObservableListBase.java:155) ~[jfxrt.jar:?]
	at java.util.AbstractList.add(AbstractList.java:108) ~[?:1.8.0_191]
	at org.jabref.gui.JabRefFrame.lambda$addTab$12(JabRefFrame.java:1174) ~[JabRef--master--latest.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_191]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$48(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_191]

 =||= @Siedlerchr Yes, this looks like it is caused by #4431. Apparently CircleCI [does not check out the submodules automatically](https://discuss.circleci.com/t/can-not-get-submodules-to-clone-properly/22120/2). The directories in the JARs are empty.

We need to call `git submodule update --recursive --init --remote` after checking out on CircleCI.

Edit: As I think about it. This is probably not so easy as it seems, because this will always check out the latest version, which is probably okay for the development version but probably not for a release. =||= @florian-beetz  I think for the moment it is okay to automatically check it out. Alterantively we can use it ti pinpoint to a specific version. I will create a PR so that at least our build is fixed
https://stackoverflow.com/questions/10914022/how-do-i-check-out-a-specific-version-of-a-submodule-using-git-submodule =||= Okay, one issue fixed.
The other is the Theme loading. When I run java -jar JabRef.jar it fails
```

java.nio.file.FileSystemNotFoundException: null
        at com.sun.nio.zipfs.ZipFileSystemProvider.getFileSystem(ZipFileSystemProvider.java:171) ~[zipfs.jar:1.8.0_181]
        at com.sun.nio.zipfs.ZipFileSystemProvider.getPath(ZipFileSystemProvider.java:157) ~[zipfs.jar:1.8.0_181]
        at java.nio.file.Paths.get(Paths.java:143) ~[?:1.8.0_181]
        at org.jabref.gui.util.ThemeLoader.addAndWatchForChanges(ThemeLoader.java:93) ~[JabRef-5.0-dev--snapshot--2018-10-31--fixsubmodule--d24e4358a.jar:?]
        at org.jabref.gui.util.ThemeLoader.installCss(ThemeLoader.java:82) ~[JabRef-5.0-dev--snapshot--2018-10-31--fixsubmodule--d24e4358a.jar:?]

``` =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Add submodule pull to circle ci and fix theme loading css"Fixes #4438 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr11/01/18, 10:46:38 AM
4414.04457Moving entries bewtween groups doesn't work"Hello
I'm using JabRef 4.3.1 on Windows 10 X64.
I'm trying to reorder my entries on groups.
If I select several entries and using the rightmouse menu choose ""Move to group"" only the first entry is moved.
If I try to drag it instead of move it it copies it (and duplicate the entries)""The issue is more serious in:

JabRef 5.0-dev--snapshot--2018-10-28--master--05047f32a
Windows 10 10.0 amd64 
Java 1.8.0_191

1. Select several entries in the main table
2. Rightclick and use the ""Move to group"" feature
3. All selected entries disappear from their original group but NONE of them is added to the new target group, i. e. these entries now belong to neither of those groups

Regarding the ""drag'n'drop"" feature. I think, this is supposed to work like this. In previous versions of JabRef dragging one item to another group, would assign to this group as well, NOT assign it exclusively to this group. So this should work as intended. =||= This should be fixed thanks to @Ali96kz  in #4439 


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0-dev--snapshot--2018-11-01--master--11ddb8c96
Windows 10 10.0 amd64 
Java 1.8.0_191

Cannot confirm - the bug can still be found in the current master build (see also https://github.com/JabRef/jabref/issues/4414#issuecomment-433892072). =||= I mistakenly referred to this issue from my PR.  =||= @AEgit  I found and fixed the underlying issue. It is a simple fix which makes the feature working again.
https://builds.jabref.org/fixgroupsmove/

Note that the entry count number on the group does not update, although the move is succesful, but that is another issue  =||= I can confirm, that this bug has been fixed in:

JabRef 5.0-dev--snapshot--2018-11-04--fixgroupsmove--2bdaba675
Windows 10 10.0 amd64 
Java 1.8.0_191

Note, however, that JabRef will now crash, if you

1) Move items from one group to another
2) Open the item view/panel, switch between tabs including the ""BibTex Source"" tab (without making any modifications)
3) Close the item view/panel
4) Try to move the same items to another group

I am not sure, whether this issue is even connected with the ""groups"" problem reported here, or whether this is a more general problem of the newer JabRef versions (I remember there were some bug reports suggesting that JabRef would just crash, if the ""BibTex Source"" tab was opened). =||= Thanks for the update, will check it out with open entry editor. The crash might be coming from the fact that the move group dialog is still swing and the rest javafx. 
I added the dialog to the list of things to be converted. 
 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Now it seems to work. It moves and copies properly between groups, though it doesn't update the number of entries on each of them. =||= Yeah, the number update is another issue already filed here . If you switch to another library and back the numbers should be correct again  =||= I can confirm again that this bug is fixed in:

JabRef 5.0-dev--snapshot--2018-11-11--master--50875f967
Windows 10 10.0 amd64 
Java 1.8.0_191

Note, however, that the crashing behaviour reported in https://github.com/JabRef/jabref/issues/4414#issuecomment-435709161 persists (I was not sure, whether comment https://github.com/JabRef/jabref/issues/4414#issuecomment-437432632 referred to the main topic of this thread or the crashing behaviour I reported earlier on). =||= "Fix move to group always moves first entry"Fixes #4414
The problem was the underlying observable list with selected entries whose content changed after the removal from a previous group


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr11/09/18, 05:25:08 PM
4113.04498Improve check for page numbers"JabRef version 4.1 and all that followed

Since a couple of journals in the biomedical community have started to add letters to their page numbers, like American J Physiol, Current Biol and many others, it is no longer valid to label these page ""numbers"" as errorneous. That check should be modified.
""The purpose of the check is to find erroneous prefixes like `pp.` and this still makes sense even for alpha-numeric pages. The biblatex documentation (in the description of the command `rangelen`) contains a list of valid examples of the pages field. We should support all those formats and recognize them as valid input. =||= I donot see in the biblatex description a format like (R for review) R40-R120 as in e.g. Current Biology. Or e2347-e2358 as in the Amer J Physiol; here e stands for endocrinology ..... Any section of the AJP journal has its own letter preceding page numbers. These are all regarded by Jabref as errorneous. The reality here is more advanced then the rules or the examples of biblatex.  =||= As wished in http://discourse.jabref.org/t/pages-field-allow-use-of-en-dash/1199, the parser should also accept ranges separated by `--`. =||= Can you leave a screenshot or a more detailed explanation? My team and I want to improve this issue.But I didn't reproduce this problem. =||= If you take the DOI:10.1016/j.cub.2008.07.040 than you can see that the page range is: R795--R804. This raises the error ""should have a valid page range"". =||= "Improve page checkerSuperseeds the PR #4188 and fixes #4113. Now page ranges like `R2-R5` are considered to be correct.Tobias Dieztobiasdiez11/20/18, 07:43:58 AM
4544.04547Downloads from arxiv saved with wrong file suffix"This is with the current snapshot (JabRef 5.0-dev--snapshot--2018-12-19--master--949d20496). Opening the attached bibtex library and trying to download the respective PDF via the entry's general tab leads to a file name ending in `.01203v1` instead of `.pdf`. The contents are fine though. This is most probably due to the URL used by arxiv: `https://arxiv.org/abs/1801.01203` but that shouldn't be an excuse ;)

[arxiv.bib.txt](https://github.com/JabRef/jabref/files/2700102/arxiv.bib.txt)
""Thanks to @stefan-kolb  this should be fixed  in the latest master.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Do not extract file ending from UrlsFixes #4544 Do not extract file ending from UrlsStefan Kolbstefan-kolb01/05/19, 12:39:12 PM
3189.04549Renaming a group via groups interface does not change the group name in the interface"JabRef 4.0-dev
Linux 4.4.0-92-generic amd64 
Java 1.8.0_131

Steps to reproduce:

0. Open group interface. (Groups -> toggle groups interface)
1. Create a group
2. Add an item to the group
3. Right click on the group in the group interface -> edit group
4. Change the group name

Group name in the interface stays the same.  If you check the group name by selecting an item and going to its Bibtex source you can see the change there.
![screenshot from 2017-09-02 18-09-52](https://user-images.githubusercontent.com/17808285/29999791-1e14ef46-900a-11e7-9ae3-2b2150bc8149.png)


""When you close and expand the group, the change should also be visible. No idea though why it is not visible immediately. The same issue occurs if you assign an icon or color to the group =||= Might be related to this:
https://github.com/JabRef/jabref/issues/3112 =||= These bug still exists, I will work on it.
 =||= When I press edit group that show `org.jabref.model.groups.AbstractGroup#name` instead of `org.jabref.gui.groups.GroupNodeViewModel#displayName`, why? What's the difference between them? =||= The `displayname` is a formatted version of `name`. For example, if `name` contains latex commands like `Hell\'{o}` then `displayname` is the unicode version `Helló`. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Can confirm this has been fixed in:

JabRef 5.0-dev--snapshot--2019-01-05--master--d281ece4b
Windows 10 10.0 amd64 
Java 1.8.0_191 =||= "Fixes that renaming a group did not change the group name in the interfaceFixes #3189.Tobias Dieztobiasdiez12/24/18, 09:32:06 AM
2181.04559Integrity checker should link to entries via reference"Follow up form #1779 

Linking to Bibentries inside the integrity checker should be done via a reference to the entry not the key.
We should switch it to BibEntry, i.e. just keep a reference to the entry and the use/create a method highlight(BibEntry)""- [x] Bibtexkey is not focused correctly
- [x] Focus by Id rather than Bibtexkey
- [x] check for empty bibtexkey is working and correctly referencing the entry by ID =||= "Converts integrity check dialog to JavaFX"Moreover:
- Show entry by reference and not by id. Fixes #2181.
- Fixes a few issues that occurred when opening the entry editor by code from the integrity dialog
- Reuse gridpane in entry editor (should have a slightly superior performance)
- Improve display of progress dialog
- Invoke copy files task using central task executor

![image](https://user-images.githubusercontent.com/5037600/50526522-e7d6a000-0ae2-11e9-8b4a-f8d76349b043.png)

Filtering (triggered by right-clicking the column):
![image](https://user-images.githubusercontent.com/5037600/50526549-105e9a00-0ae3-11e9-8b51-fe48ee8aed1e.png)


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez01/05/19, 04:18:53 PM
4593.04595"Overlapping font in ""ID Type"" field when adding DOI or ISBN etc""JabRef version 
JabRef 5.0-dev--snapshot--2019-01-13--master--a051e1b08
Linux 4.15.0-43-generic amd64 
Java 1.8.0_191

Steps: 

1. open JabRef
2. select Library
3. select New Entry (or ctrl+N)

display spacing of the ""ID Type"" identifier field is poor as in attached image below:

![screenshot from 2019-01-17 13-10-18](https://user-images.githubusercontent.com/762246/51345962-9eca9980-1a59-11e9-9574-b6a622b9c0f5.png)""Should be fixed now in the development version in a couple of minutes

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix overlapping font in adding new ID entry type dialog"replace border pane with vbox
Fixes #4593

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


![grafik](https://user-images.githubusercontent.com/320228/51445969-97321b80-1d0b-11e9-9182-0293305ac816.png)
![grafik](https://user-images.githubusercontent.com/320228/51445980-a9ac5500-1d0b-11e9-8f1d-f2abf713983a.png)

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr01/21/19, 03:19:27 PM
4598.04601v5.0: duplicates window totally empty (except buttons at the bottom)"

JabRef version JabRef 5.0-dev--snapshot--2019-01-21--master--40d049e08 on Ubuntu 16.04

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Open any database
2. Select an entry and copy & past the same entry, so that a duplicate is created
3. Click Quality => Find duplicates
4. The duplicate window is totally empty, no boxes or text showing up. Only the buttons at the bottom show. (If I try the same thing in v 4.3.1 it works as expected; two duplicates are showing in the left and right halves for the window.)

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

No errors are showing up in the console when starting from command line. ""Working on this, could you please do me a favor and add a screenshot of the dialog in 4.3.1? That helps me to convert the dialog.  =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= @Siedlerchr 
I just tested this with the latest development version (which I always do), and it works now! Thank you so much for looking into this and fixing this!
By the way, I am so sorry I was not able to provide that screenshot for you. I was extremely busy at work in the past day. Hadn't forgotten about it but simply didn't get a chance. 
Cheers, H. =||= @schniepp  No worry, I found an old screenshot in the help. Now as the dialog is converted, it would be nice if you could update the screenshots in the help ;)
Just go to the bottom of the site (Edit this page)
http://help.jabref.org/en/FindDuplicates =||= @Siedlerchr I have a new screenshot. But I couldn't upload it. I got this message ""Uploads are disabled.
File uploads require push access to this repository."" Would a moderator/owner have to bump up my status? The PNG are here: FindDuplicatesWindow-ParallelDisplay.png
![findduplicateswindow-paralleldisplay](https://user-images.githubusercontent.com/29638213/51794359-3a1ce680-219f-11e9-8596-fca53aa80989.png)
... and FindDuplicatesWindow-Selecting.png:
![findduplicateswindow-selecting](https://user-images.githubusercontent.com/29638213/51794360-46a13f00-219f-11e9-943a-9c063031626c.png)

I couldn't get that view that says ""Merged entry"" and ""Merged BibTeX source code"". Is that a functionality that went away in the 5.X branch? Or another bug? Or did I go to the menu in a different way? I simply selected Quality => Find duplicates =||= I replaced the screenshots. The way you could have done this would have been to drag and drop the files ti upload and then create PR.

The bibtex source code is no longer present. Seems it got lost in #4410 or was not converted on purpose, probably to avoid problems as the source field is a bit complicated.
I think it is not really necessary to have the source view, so I remove that screenshot.  =||= "Convert DuplicateResolverDialog to javafx"Fixes #4598 

![grafik](https://user-images.githubusercontent.com/320228/51695559-9c40e480-2003-11e9-8aba-227503ac68c0.png)


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr01/26/19, 04:52:27 PM
4600.04604New entry default cursor location"JabRef 5.0-dev--snapshot--2019-01-21--master--40d049e08
Windows 10 10.0 amd64 
Java 1.8.0_172

Issue:
1. Copy a DOI number from any website
2. Switch to Jabref, hit Ctrl-N for a New Entry window
3. There is no cursors, so one cannot hit just simply Ctrl-V copying in the DOI number

Solution:
Make the cursor by default in the ID text field. There is anyway no other place where the cursor should be active in that overlay window. This would enhance greatly the workflow and usability. "Thanks to @chelseyong this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Enable default cursor for new entry"Fixes #4600.
Sets text field on focus at the end of initialization by running the javafx thread.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Chelseychelseyong01/23/19, 10:41:17 AM
4609.04613Preview not configurable"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JJabRef 5.0-dev--snapshot--2019-01-23--master--c6a1fcbe3
Windows 7 6.1 amd64 
Java 1.8.0_201


- [+ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Open jabref and select an entry in the maintable
2. press ALT-2 twotimes to show entry preview
3. Goto OPTIONS->PREFERENCES->ENTRY PREVIEW 
4. Select e.g. BIOLOGICA and view it in TEST
5. double click BIOLOGICA and 
6. surprisingly you are back to the default preview 

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->
Screenshot of the desired preview
![grafik](https://user-images.githubusercontent.com/9216487/51740712-11102f00-2095-11e9-8e56-fcce88aea3fa.png)

Screenshot of the default preview
![grafik](https://user-images.githubusercontent.com/9216487/51740866-8c71e080-2095-11e9-9047-645a83949274.png)

<details>
  <summary>Log File</summary>
  Opening: K:\BuchprojektSpringer\VierteAuflage\Literatur\EndokrinologieKunde20171208VS5.0.bib
Can only load style files: Preview
Can only load style files: Preview
Can only load style files: Preview
Can only load style files: Preview
  ```
  Paste an excerpt of your log file here
  ```
</details>""@chelseyong  You recently worked at this in #4587 Could you please take a look at this issue?
 =||= Okay, looking into it. =||= "Fix preview style configuration"Fixes #4609.
User mentioned that after pressing one of the styles and saving it, the style is not updated.
To change the preview style, he has to move the selected style to the right column before pressing ""Save"".

Selecting styles in the right column can be previewed in the test panel. However, the style of bibEntry is not updated after pressing `Test`. To rectify this, the citation style is updated in Preferences.
To ensure preview style configuration is saved, the chosen preview style is also saved in the Preferences.

Note that if preview style (at the left column) is selected, the configuration will not be saved.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Chelseychelseyong01/31/19, 09:46:21 AM
4621.04624Remove Preview Style from the right list results in Divide by zero exception"Current master

Move all styles from the right to the left, including ""Preview"". 
The following error comes up.

A solution would be to disable the cell or to prevent it from moving. 
```
14:48:45.633 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main] - java.lang.ArithmeticException: / by zero
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCyclePosition(PreviewPreferences.java:90)
	at org.jabref.preferences.PreviewPreferences$Builder.withPreviewCycle(PreviewPreferences.java:82)
	at org.jabref.gui.preferences.PreviewPrefsTab.storeSettings(PreviewPrefsTab.java:264)
	at org.jabref.gui.preferences.PreviewPrefsTab.lambda$3(PreviewPrefsTab.java:97) 
```"Fix NPE and not on FX Thread in PreviewPrefs Tabs"Remove obsolete swing stuff
Create proper javafx binding

Fixes #4621
Fixes #4622 
Fixes #4570

I fixed and tuned the copypreview stuff.
Copy Preview copies the HTML formatted stuff for usage in email:

![grafik](https://user-images.githubusercontent.com/320228/52073860-d7ee2800-2588-11e9-9f23-614f764debbb.png)

![grafik](https://user-images.githubusercontent.com/320228/52073897-e9373480-2588-11e9-8da9-6a48501b72d8.png)

Purified text for non html:
```
Incollection (Akerkar:)
 Akerkar, R.

 Processing Big Data for Emergency Management 


 Smart Technologies for Emergency Response and Disaster Management, 


 IGI Global, 
, 144-166 



```


When all styles get removed from the right side, the default ""Preview"" style is added back again to prevent divide by zero exception

Fix another issue where the Preview style is not set correctly

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr02/01/19, 03:08:01 PM
4622.04624Reset preferences throws not on FX Thread exception multiple times"current master (2019-01-28)

To FIX: Replace the Swing Worker with a Background Task.
```

	at org.jabref.gui.preferences.PreviewPrefsTab$1.done(PreviewPrefsTab.java:239)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
```

```
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.LabeledSkinBase.updateChildren(LabeledSkinBase.java:575)
	at com.sun.javafx.scene.control.skin.LabeledSkinBase.handleControlPropertyChanged(LabeledSkinBase.java:204)
	at com.sun.javafx.scene.control.skin.ListCellSkin.handleControlPropertyChanged(ListCellSkin.java:49)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase.lambda$registerChangeListener$61(BehaviorSkinBase.java:197)
	at com.sun.javafx.scene.control.MultiplePropertyChangeListenerHandler$1.changed(MultiplePropertyChangeListenerHandler.java:55)
	at javafx.beans.value.WeakChangeListener.changed(WeakChangeListener.java:89)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(StringPropertyBase.java:103)
	at javafx.beans.property.StringPropertyBase.markInvalid(StringPropertyBase.java:110)
	at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:144)
	at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:49)
	at javafx.beans.property.StringProperty.setValue(StringProperty.java:65)
	at javafx.scene.control.Labeled.setText(Labeled.java:145)
	at com.sun.javafx.scene.control.skin.ListViewSkin$2.updateItem(ListViewSkin.java:319)
	at javafx.scene.control.ListCell.updateItem(ListCell.java:471)
	at javafx.scene.control.ListCell.lambda$new$160(ListCell.java:167)
	at javafx.collections.WeakListChangeListener.onChanged(WeakListChangeListener.java:88)
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329)
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73)
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233)
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482)
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541)
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205)
	at javafx.collections.ModifiableObservableListBase.add(ModifiableObservableListBase.java:155)
	at java.util.AbstractList.add(AbstractList.java:108)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.util.ArrayList.forEach(ArrayList.java:1257)
	at java.util.stream.SortedOps$RefSortingSink.end(SortedOps.java:390)
	at java.util.stream.Sink$ChainedReference.end(Sink.java:258)
	at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:482)
	at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:471)
	at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:418)
	at org.jabref.gui.preferences.PreviewPrefsTab$1.done(PreviewPrefsTab.java:239)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)
```"Fix NPE and not on FX Thread in PreviewPrefs Tabs"Remove obsolete swing stuff
Create proper javafx binding

Fixes #4621
Fixes #4622 
Fixes #4570

I fixed and tuned the copypreview stuff.
Copy Preview copies the HTML formatted stuff for usage in email:

![grafik](https://user-images.githubusercontent.com/320228/52073860-d7ee2800-2588-11e9-9f23-614f764debbb.png)

![grafik](https://user-images.githubusercontent.com/320228/52073897-e9373480-2588-11e9-8da9-6a48501b72d8.png)

Purified text for non html:
```
Incollection (Akerkar:)
 Akerkar, R.

 Processing Big Data for Emergency Management 


 Smart Technologies for Emergency Response and Disaster Management, 


 IGI Global, 
, 144-166 



```


When all styles get removed from the right side, the default ""Preview"" style is added back again to prevent divide by zero exception

Fix another issue where the Preview style is not set correctly

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr02/01/19, 03:08:01 PM
4570.04624#4365 is back: preview copy fails"JabRef 5.0-dev--snapshot--2019-01-05--master--d281ece4b
Linux 4.15.0-43-generic amd64
Java 1.8.0_191

The

null
null
null
null
null
null
null
null
null
null
null
null
null
null

behaviour reported on 9 December is back. :-(

As before, selecting the preview and copying it with ctrl+C does put an un-tagged copy into the buffer correctly. But ctrl+shft+C isn't working properly, either from the mouse right-click, the dropdown edit menu or by key presses.""JabRef 5.0-dev--snapshot--2019-01-28--master--fbf1cc9a4
Linux 4.15.0-44-generic amd64 
Java 1.8.0_201

Problem continues.
On using the menu to copy/preview/text, I get this popup error message:

![screenshot from 2019-01-29 12-55-33](https://user-images.githubusercontent.com/762246/51936539-a1b47b00-23c5-11e9-92c2-6f1c4274644a.png)

Event log below.



<details>
<summary>Detail information:</summary>

```
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
Opening: /tmp/jabref485478443835204735.bib
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
Opening: /tmp/jabref485478443835204735.bib
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.input.Clipboard.setContent(Clipboard.java:231)
	at org.jabref.gui.ClipBoardManager.setContent(ClipBoardManager.java:53)
	at org.jabref.gui.worker.CitationStyleToClipboardWorker.done(CitationStyleToClipboardWorker.java:188)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

Uncaught exception occurred in Thread[AWT-EventQueue-0,6,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.input.Clipboard.setContent(Clipboard.java:231)
	at org.jabref.gui.ClipBoardManager.setContent(ClipBoardManager.java:53)
	at org.jabref.gui.worker.CitationStyleToClipboardWorker.done(CitationStyleToClipboardWorker.java:188)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

```

</details> =||= Thanks for your report. I think the underlying error is the same or similiar to the one I encounterd  in  #4622 
The citation style worker is a leftover from the old GUI technology.
 =||= Should be fixed now in the latest master.
Note that the Copy Preview copies both the HTML content and the plaintext content to the  clipboard. 
If you paste it into a word processor or tool that excepts html content (email for example) then it is correctly formatted with bold italics etc.
If you paste it into a plain text editor which does not support HTML formatting it is pasted as plain text. =||= "Fix NPE and not on FX Thread in PreviewPrefs Tabs"Remove obsolete swing stuff
Create proper javafx binding

Fixes #4621
Fixes #4622 
Fixes #4570

I fixed and tuned the copypreview stuff.
Copy Preview copies the HTML formatted stuff for usage in email:

![grafik](https://user-images.githubusercontent.com/320228/52073860-d7ee2800-2588-11e9-9f23-614f764debbb.png)

![grafik](https://user-images.githubusercontent.com/320228/52073897-e9373480-2588-11e9-8da9-6a48501b72d8.png)

Purified text for non html:
```
Incollection (Akerkar:)
 Akerkar, R.

 Processing Big Data for Emergency Management 


 Smart Technologies for Emergency Response and Disaster Management, 


 IGI Global, 
, 144-166 



```


When all styles get removed from the right side, the default ""Preview"" style is added back again to prevent divide by zero exception

Fix another issue where the Preview style is not set correctly

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr02/01/19, 03:08:01 PM
4591.04642Add check for books with first edition"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
Some journals have the convention to only print the edition of a book if it's not the first. (It's hard to find a reliable source on this, but see e.g [here on p. 19](https://www.otago.ac.nz/library/pdf/Harvard_referencing.pdf))

**Describe the solution you'd like**
Have an integrity check that reports books with `edition = 1` ""I would like to give this a try! =||= @RonakLakhotia  Sure, go ahead! As a starting point, you can look at the IntegrityChecker classes:
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/integrity/IntegrityCheck.java =||= Is the solution, creating a predicate to check if the edition = 1 as given in :-
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/integrity/EditionChecker.java =||= Yes, it should suffice to add a simple `if (value = ""1"") then return warning` statement. Please also write a simple test similar to these here: https://github.com/JabRef/jabref/blob/master/src/test/java/org/jabref/logic/integrity/PagesCheckerBibLatexTest.java. Thanks! =||= "[#4591] Add Integrity check for books with edition reported as 1Fixes #4591 Ronak LakhotiaRonakLakhotia02/13/19, 06:05:54 AM
4641.04644Remove usage of TempDirectory extension from junit-pioneerAs of junit 5.4, the temporary directory extension is included in the main API, see [documentation](https://junit.org/junit5/docs/5.4.0/user-guide/index.html#writing-tests-built-in-extensions-TempDirectory). Thus, we can replace the `TempDirectory` extension from junit-pioneer with the built-in extension (and remove the `junit-pioneer` dependency).I am working on this issue. =||= Fix for issue 4641: Remove usage of TempDirectory extension from junit-pioneer"Fixes: #4641 
Removed the TempDirectory extension from junit-pioneer with the built-in extension of junit 5.4
----
- [x] Manually tested changed features in running JabRef
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)"Akash Deepakash1994deep02/09/19, 02:36:13 PM
4628.04658Can't save new content selectors"Current master.
Options -> Manage content selectors
Enter new field and new keyword,
press apply or enter 

Is still a swing dialog.  Refs #3861 

```

17:00.740 [AWT-EventQueue-0] INFO  org.jabref.gui.contentselector.ContentSelectorDialog - Could not apply changes in ""Manage content selectors"" - java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113) 
```""Hi, if not urgent I can take a look on this :)  =||= @ricantech  Thanks for your interest. The solution would be to simply convert the dialog to javaFX like the other dialogs. Maybe you can also optimize the layout of the dialog. You can start the layout/fxml using  the scene builder.
If you need any help don't hesistate to ask here or in our gitter channel
 =||= Hi, here is just design proposal - https://github.com/ricantech/jabref/commit/a34a926ac5ed22f3bd658893632f96d898b61952

![image](https://user-images.githubusercontent.com/5075491/52658289-fb0ac700-2efa-11e9-8cf7-1ed18c85ed40.png)
 =||= @ricantech Thanks for working on this! The design looks good to me. The only suggestion I have is to maybe move the buttons to the right of the list (or below it), because the ""Remove"" action only makes sense if you first select an entry in the list and the usual flow should be from the right to the left.
Please also add the `%` sign in front of the other texts. This looks strange in the preview, but in the real application these strings are then automatically translated correctly. =||= @tobiasdiez @Siedlerchr Hi guys, just a minor question. I would like to enable the menu item only when there is existing database connection. From my understanding I should add my action into **org.jabref.gui.JabRefFrame#openDatabaseOnlyActions** but this enable/disable logic is being called from **org.jabref.gui.JabRefFrame#initActions** which logic is commented at all so it will be never called.
Another option would be to reuse **org.jabref.gui.actions.OldDatabaseCommandWrapper** but not sure whether this is good approach as from the name I would say it's some old logic which was/will be replaced.

Can you give me a hint :) ? =||= That's a good observation. As of now, all menu items are always activated even if they don't make sense in the given moment. Previously, the activation/deactivation was handled by the `JabRefFrame` (using the commented-out code). In the new framework, every action (or to be more precise every `Command`) has control over its status by using the `executable` property, see e.g
https://github.com/JabRef/jabref/blob/7b784586364cd804110fa740125218a942ed7c5a/src/main/java/org/jabref/gui/actions/SimpleCommand.java#L23-L25
So binding the `executable` property to the correct condition should work.
As I said above, we need to revisit every menu item and implement a corresponding check, so it's totally fine if you omit this step at the moment from your PR. =||= Thanks to @ricantech this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix for #4628 - cant save new content selectors"Fixes #4628
Dialog converted into JavaFX
* old functionalities are preserved
* new validations added:
** error message thrown when dialog invoked but not active connection exists
** remove keyword button is enabled just in case some keyword is selected


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ricantech02/18/19, 09:11:09 PM
4661.04662Some journals are not abbreviated correctly"JabRef version 4.3.1, Linux

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

I noticed that ""Applied numerical mathematics"" was not abbreviating and found that this is most likely due to a double space present in its name in the journal list.

Steps to reproduce the behavior:
1. Open the following entry:
```
@Article{test,
  author  = {Person, A.},
  title   = {A long title},
  journal = {Applied numerical mathematics},
  year    = {2019},
  volume  = {1},
  number  = {1--10},
}
```
2. Select it and click on Tools > Abbreviate Journal names (ISO)
3. No abbreviations are made, despite the journal being in the ""Options > Manage abbreviations"" list"Fix issues with double spaces in journal abbreviations."I noticed that ""Applied numerical mathematics"" was not abbreviating and found that this is most likely die to a double space present in its name. I also fixed other occurrences. This fixes  #4661.


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jure Slakjureslak02/18/19, 04:08:23 PM
4614.04696BibTexKey Duplicate Check throws NPE "<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. ...
2. ...
3. ...

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Good afternoon,
I received the appended windows and error log while opening my data base.
I think the issue is linked with an attempt from JabRef to resolve duplicated keys.
Regards,
Hervé
[Pb JabRef.txt](https://github.com/JabRef/jabref/files/2799061/Pb.JabRef.txt)
![pb jabref](https://user-images.githubusercontent.com/20064725/51788222-c9180780-217b-11e9-9448-d4e5fb5223df.png)

 =||= A related but not completely identical problem is reported in #4630. =||= We decided to remove this dialog as the feature is already covered in the integrity check and will be covered in the import dialog =||= "Remove resolve duplicate keys dialog"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Fixes #4614

Removes the resolve duplicate keys dialog. This feature is made obsolete by the integrity check and the user can generate new keys very simply (for all entries or only for the duplicated ones) through the entry editor and/or menu.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez02/23/19, 04:49:37 PM
4666.04707Main Menu: group & order menu items"
![mmgrouping](https://user-images.githubusercontent.com/26404402/53024669-bd102480-345f-11e9-9e33-625dd2a15df3.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| Too many unordered items in the tabs of the Main Menu|Reorder items, so that those with similar meaning or function go together;<br/>Add horizontal lines to group functions that belong together| Only create sensible groups;<br/>do not create more than 3 groups per tab|"Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4667.04707Main Menu: change icons"
![mmgrouping](https://user-images.githubusercontent.com/26404402/53024751-f5176780-345f-11e9-959c-72e23b456a53.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| Icons in Main Menu are not recognizable or can be confused with other icons|Change icons or remove them| use icons, that are distinguishable at small sizes|
|some icons are ambiguous|use unique icons with a clear meaning|be careful because icons direct attention to one menu item and away from other items|"Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4668.04707Main Menu: change File tab "
![mmfile](https://user-images.githubusercontent.com/26404402/53025909-2f820400-3462-11e9-8f18-0f644f85e001.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| separate _new library_ items for LaTeX and Biblatex are used|use hierarchy to reduce number of items in the tab| -|
|_Import_ and _Export_ share one item with one masive submenu| separate export and import for easier use| keep import submenu, but change the export submenu as shown above.|
|-|-|other changes can be found in issues #4665 , #4666 , #4667 |""Again, I am not sure, whether this additional hierarchy is useful, given the limited number of options - if there are plans to provide additional options, it makes sense to me to have these hierarchies, but otherwise they do not appear convenient.
Isn't avoiding deep hierarchies generally considered better? =||= You are right, deep hierarchies should be avoided in most cases. Mainly for the following reasons:
1. It hides functions from the user
2. It adds additional steps to access a menu item

Point 1 does not seem a big issue here, as the name of the action is still stated in the first level of the menu, only additional information was put into the second level.
Point 2 is very much valid here, as an additional step is added to a very basic function.

But hierarchies in menus can have an advantage as well. They reduce the number of menu items that are displayed at once, making the menu easier to search, which increases efficiency. They can also structure a decision process and guide the user, as I mentioned in #4682 .

The number of items in the _File_ tab is already quite high, which is why hierarchy seems as an appropriate means to make it more structured. Especially in the _Export_ item, the hierarchy is meant to guide the user though the process, which can seems odd for more experienced users. =||= Maybe have a user survey for this? As you mentioned before, in the end it comes down to a trade-off between learnability and efficiency/convenience. I think I know which option I would prefer, but I might be represent just a minority. =||= "Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4669.04707Main Menu: change Edit tab"![mmedit](https://user-images.githubusercontent.com/26404402/53028478-38c19f80-3467-11e9-9d39-0d3e4942b7ff.png)


|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| _Rank_ feature rated as unimportant in a user survey| Remove _Rank_ from main menu| -|
|complex editing functions should be tools;<br/>sending as email does not edit anything|move _Send as email_ and _Replace string_ to Tools tab|see prototype in #4672 |
| _Set/clear/rename/append fields_ applies to whole library;<br/>item name is too long;|move to Library tab;<br/>rename to _manage field names&content_| see prototype in #4670 |
|-|-|other changes can be found in issues #4665 , #4666 , #4667 |

"As long as the _Rank_ feature is available when right-clicking an entry, I don't mind it being removed from the Main Menu. The _Rank_ feature itself, however, absolutely needs to be remain part of JabRef, since it replaced the old marking scheme of entries using colours (which, to be honest, I still prefer). I guess this is of minor importance for people with small databases, but for someone with thousands of entries (currently >17,000 entries), the _Rank_ feature is really useful. =||= Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4670.04707Main Menu: change Library tab"![mmlib](https://user-images.githubusercontent.com/26404402/53029047-61966480-3468-11e9-8e22-37d9f8815975.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| _New article_ shortcut already exists in toolbar|remove _New article_ from Main Menu| -|
| _Edit strings_ is an imprecise function name|find a better name (e.g. see prototype)| do not use overly long names|
|-|-|other changes can be found in issues #4665 , #4666 , #4667 |""As I just recently converted the Strings Dialog to javafx, I internally renamed it to BibtexStringEditor. I propose to add at least the word ""Bibtex"" before so that the user knows what this is about. 
Before I touched this dialog I did not really knew what the purpose of the dialog was referring to. =||= "Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4671.04707Main Menu: change Quality tab"![mmquality](https://user-images.githubusercontent.com/26404402/53029662-aa9ae880-3469-11e9-84ea-f42c7714d970.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| The three lowest items do not fit the name of the tab as they do not directly or exclusively affect quality|move those items to Tools tab| see prototype in #4672 |
|-|-|other changes can be found in issues #4665 , #4666 , #4667 |"Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4672.04707Main Menu: change Tools tab"![mmtools](https://user-images.githubusercontent.com/26404402/53036520-30be2b80-3478-11e9-8855-560a17900156.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| Adding a sublibrary has a global effect on the library|move _New sublibrary based on AUX file_ to Library|see prototype in #4670 |
| Opening a folder, file or URL/DOI apply to only one entry, which does not match the other tools|remove items from main menu|-|
| _OpenOffice/LibreOffice connection_ and _Open Terminal here_ open a window and are not tools|move items to View tab|see prototype in #4673 |
|_Abbreviate Journal names_ needs two items for different abbreviation styles|use an additional level of hierarchy|-|
|-|-|other changes can be found in issues #4665 , #4666 , #4667 |"Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4673.04707Main Menu: change View tab"
![mmview](https://user-images.githubusercontent.com/26404402/53037417-74b23000-347a-11e9-8a31-aebcf918d48a.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
| Toggle items are named inconsistently;<br/>the toggle state is not visible in the menu|Remove _toggle_ from the item names;<br/>transform to toggle buttons | when a toggle button is used, the menu tab should not close automatically like with other menu functions, as the toggle buttons themslves hold feedback for the user|
| Opening items are named inconsistently|Use the keyword _open_ in all items that make something visible|-|
| _Select all_ is not a viewing function|remove item from main menu| make tools and other functions applicable to all entries for a long term solution|
| Changing preview styles takes up additional menu items|use additional hierarchy level| this would be an experimental change, because it would create a submenu for a toggle button|
|-|-|other changes can be found in issues #4665 , #4666 , #4667 |"@MartinKarim may I go ahead and work on this? =||= @pgmpofu are you working on this issue? =||= @deepakkumar96 yes I am =||= I am sorry for the late answer. There seems to be someone working on this issue and the work seems to already have progressed quite far. Please look at this pull request #4707 for more information. =||= Thanks @MartinKarim I will find another task to work on. =||= Group and reorder the Main Menu (tabs & icons)"Group and reorder the Main Menu (File, Edit, Library, Quality, Tools, and View tabs & icons). Now it looks like on the @MartinKarim's prototypes.

![1_file](https://user-images.githubusercontent.com/12954316/53632728-f68e2000-3c15-11e9-9037-8aba9676e4b5.png)

![2_edit](https://user-images.githubusercontent.com/12954316/53632738-fc840100-3c15-11e9-8852-8a07d88f11ac.png)

![3_library](https://user-images.githubusercontent.com/12954316/53632750-0148b500-3c16-11e9-87be-8ca071ddcfab.png)

![4_quality](https://user-images.githubusercontent.com/12954316/53632767-07d72c80-3c16-11e9-9c03-61b1a11a3c41.png)

![5_tools](https://user-images.githubusercontent.com/12954316/53632786-11f92b00-3c16-11e9-994c-57e0be37fe7a.png)

![6_view](https://user-images.githubusercontent.com/12954316/53633080-c6934c80-3c16-11e9-87ef-f00252e9f60a.png)


This PR fixes #4666 & fixes #4667 & fixes #4668 & fixes #4669 & fixes #4670 & fixes #4671 & fixes #4672 & fixes #4673.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot03/05/19, 08:20:54 AM
4709.04713Handling of diacritics in bibtex key generator"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 4.3.1 on Windows 7.

There are certain diacritics (and other symbols) that produce undesired output when generating bibtex keys. I am using `[auth3][shortyear]` as generation pattern. Examples with first authors' last names and year:

- Müller, 2019 -> Muel19 (4 characters instead of 3 when converting umlaut, i.e. ä, ö, ü)
- Al-Ketan, 2019 -> Al-19 (dash in bibtex key is awkward, should probably be ignored in favor of the next letter and become AlK19)
- D'Alessandro, 2019 -> DA19 (Apostrophe is correctly ignored, but the name is reduced to 2 characters when it should probably be DAl19)

Some other diacritics that I quickly tested (Ç, Â, é) are handled more gracefully, i.e. the corresponding letter without diacritic is used.

Steps to reproduce the behavior:
1. Use [auth3][shortyear] as pattern for bibtex key generation. 
2. Enter one of the last names mentioned above in the last author field of a new article. Enter any year.
3. Generate bibtex key (CTRL+G)""Well, dash is a perfectly legal char in a bibtex/biblatex key: Forbidden are only these symbols: `"" # % ' ( ) , = { }`
But I agree with you that the pattern of sometimes two, three and 4 chars is confusing.
 =||= Can I work on this issue? =||= Thanks to @chelseyong  this should now be fixed in the latest master.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix: bibkey generated does not handle diacritics"Fixes #4709.
Clean up the author value in `BracketedPattern` after it is retrieved from the `BibEntry`.


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Chelseychelseyong03/10/19, 12:39:39 PM
4703.04720Wrong newline format in Jabref 5.0"Hello,
thanks for all your work on Jabref! I am using the snap version of Jabref 5.0.

JabRef 5.0-dev
Linux 4.18.0-15-generic amd64 
Java 1.8.0_191

If I change the newline separator in the preferences from ""CR/LF"" (the default? even on Linux?) to ""LF"", it will always switch back to ""CR/LF"". I think, this is not the intended behaviour. I don't get any errors in the console while saving the preferences.

Let me know, if you need more information.

Best""@LyzardKing Could you test this and report back if this is a problem of the snap version or if it also occurs in the non snap version? =||= Yes, I'll look into it. How can I verify the character being used?
I'm not sure how to run the non snap, since javafx is not abailable for openjdk-8 in 18.10 =||= Hello,
I ran the latest non-snap version under Ubuntu 18.04. For me, the same problem occured ... =||= @Siedlerchr I'm not sure, I haven't been able to properly dive in the code all that much..
There might be an issue with the settings interface..
I tried to edit a bib file with a simple text editor, setting a different newline format,
JabRef still shows CR/LF =||= There was indeed a problem in the preference dialog. Should be fixed with https://github.com/JabRef/jabref/pull/4720. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= It seems to be working in the snap! =||= Works for me, too! Many thanks for your fast response! =||= "Fix #4703: Newline format couldn't be changed"Fixes #4703.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez03/05/19, 11:55:37 AM
4714.04721Preview copy leads to exception"JabRef version

JabRef 5.0-dev--snapshot--2019-03-03--master--094a0395e
Linux 4.15.0-45-generic amd64 
Java 1.8.0_201

- [X ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists```

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Show an entry preview by selecting an item and pressing F2
2. Select Edit / Copy ... / Copy Preview
3. The ""Exception Details"" window pops up.
4. Nothing is copied to the buffer.

![screenshot from 2019-03-03 11-25-40](https://user-images.githubusercontent.com/762246/53700328-47388100-3dae-11e9-91fe-88c7e2f164ff.png)


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  java.lang.IllegalStateException: Not on FX application thread; currentThread = AWT-EventQueue-0
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.input.Clipboard.setContent(Clipboard.java:231)
	at org.jabref.gui.ClipBoardManager.setContent(ClipBoardManager.java:53)
	at org.jabref.gui.worker.CitationStyleToClipboardWorker.done(CitationStyleToClipboardWorker.java:188)
	at javax.swing.SwingWorker$5.run(SwingWorker.java:737)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.run(SwingWorker.java:832)
	at sun.swing.AccumulativeRunnable.run(AccumulativeRunnable.java:112)
	at javax.swing.SwingWorker$DoSubmitAccumulativeRunnable.actionPerformed(SwingWorker.java:842)
	at javax.swing.Timer.fireActionPerformed(Timer.java:313)
	at javax.swing.Timer$DoPostEvent.run(Timer.java:245)
	at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:311)
	at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)
	at java.awt.EventQueue.access$500(EventQueue.java:97)
	at java.awt.EventQueue$3.run(EventQueue.java:709)
	at java.awt.EventQueue$3.run(EventQueue.java:703)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:74)
	at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:205)
	at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)
	at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)
	at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)

</details>""There is an old SwingWorker CitatinStyleToClipBoardWorker which needs to be replaced by a  Java FX BackroundTask/ =||= Should be fixed in the latest master. Available in a couple of minutes. =||= JabRef 5.0-dev--snapshot--2019-03-08--master--c16f733b8
Linux 4.15.0-46-generic amd64
Java 1.8.0_201

The error message no longer appears.  Thanks!

The copying to the clipboard works fine when done by right-clicking the
item in the table and working off the popup menu.  But it does not work
when using the main Edit / Copy ... menu.
 =||= The edit menu thing can convert it to HTML (default) XML or rtf. But somehow the options are missing from the menu
I will investigate this tomorrow  =||= "Fix entry preview copy exception"Fixes #4714

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/08/19, 01:10:32 PM
4655.04725"Exporting to MS Office 2007 XML omits ""von"" part from author's last name""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 4.3.1 and 5.0-dev on Windows 10.

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When exporting a bibliography with a 'von' part, the 'von' part is omitted from the XML file.

Steps to reproduce the behavior:
1. Add an entry with as author, for example, John von Neumann (preserve caps)
2. Export to MS Office 2007 XML
3. Observe that your entry has `<b:Last>Neumann</b:Last>`, and ""von"" is nowhere to be found

I suspect this is due to the fact that the XML format does not offer a separate tag for the ""von"" part, and the [model of the author in JabRef](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/msbib/MsBibAuthor.java#L51) omits the ""von"" when returning a last name.

<details>
<summary>Bibtex file</summary>

```bibtex
@Article{Neumann1987,
  author  = {John von Neumann},
  title   = {ABC},
  journal = {aaa},
  year    = {1987},
}
```

</details>
<details>
<summary>XML file fragment</summary>

```xml
<b:NameList>
<b:Person>
<b:Last>Neumann</b:Last>
<b:First>John</b:First>
</b:Person>
</b:NameList>
```

</details>""@grebnetiew is the issue still persist or it is solved? because when I exported to MS 2007 in ubuntu using the latest master development version, then it includes middle name. =||= I check [this source](http://www.datypic.com/sc/ooxml/e-bibliography_Author-1.html) there seems to be a _Middle_ tag offered in XML. 

P.S: Ahh, I misunderstood the issue, the middle name isn't exported when a lowercase is used, right?

Edit: My understanding of naming convention was incorrect, if I understood the issue correctly does the fix include appending von part before last name when exporting? =||= It's an export problem, the code which handles the exporting of authors is here:

https://github.com/JabRef/jabref/blob/ddd12aec466eee9b9eb3434948d4b2459298eae6/src/main/java/org/jabref/logic/msbib/MSBibConverter.java#L132-L134

Either the von part gets exported as middel or it is part of lastname.
There should also be a test already for exporting. Maybe you can take that as a starting point for investitaging =||= There are tests for First, Middle and Last Names but I didn't find any for von part. The [MsBibAuthor](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/msbib/MsBibAuthor.java) does not include von part when returning middle and last names. 

Should the von part be part of middle name or last name? =||= Thanks to @CaptainDaVinci this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= ""Adding ""von"" part to Author's last name when exporting to MS Office 2007""Fixes #4655

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci03/06/19, 12:49:19 PM
4306.04727Disable rename when file has already right name"Entry editor > File > Right click > ""Rename"" asks to ""Overwrite the existing file"" if the generated name is the same as the original one. That's a bit confusing. Better: just disable the option if the file already has the correct name.

Same applies to ""Move"" and ""Rename and move""""Is anyone working on this one @tobiasdiez ? If not can I see if I can fix it?  =||= @Arbalest007 Feel free to work on this issue! Also have a look at our [contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) and feel free to drop by in our [developer chat](https://gitter.im/JabRef/jabref) if you have questions!

For this issue, have a look at org.jabref.logic.externalfiles.LinkedFileHandler, which provides the method `getSuggestedFileName` that gives you the new file name. Essentially, it is enough to add a check in org.jabref.gui.fieldeditors.LinkedFilesEditor#createContextMenuForFile whether the suggested file name coincides with the current file name. =||= Awesome @tobiasdiez! I'll get to work on it, =||= "[#4306] Disable renamingFixes #4306 Ronak LakhotiaRonakLakhotia03/16/19, 10:57:03 AM
4728.04729JabRef does not quit after saving changes."<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef *unknown*
Linux 4.14.79-1-lts amd64 
Java 1.8.0_192 on Arch Linux.



<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Make changes in an entry
2. Quit JabRef
3. Select  _Save Changes_ in the confirmation dialogue

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

- Expected Behavior: Close application after saving changes.
- Current Behavior: Application does not quit after saving changes. "Saving changes and exiting application"Fixes #4728

When the user clicks _Save changes_ option, the status of
saving is not shown unlike before. I am not sure what might be
the cause of that.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci03/11/19, 09:32:15 PM
4584.04730Toolbar icons and their layout need improvement"![issueicons](https://user-images.githubusercontent.com/26404402/51086457-77b55480-1747-11e9-9768-fec9ef61f73f.png)

|                                           Description of Issue                                          |                                    Possible Solution                                   |                            Additional Remarks                           |
|:-------------------------------------------------------------------------------------------------------:|:--------------------------------------------------------------------------------------:|:-------------------------------------------------------------:|
| Some toolbar icons are too similar; <br>Icons are not structured;<br>Too much blank space;                           | Replacing similar icons;<br>Grouping icons visually;<br>More icons of commonly used functions;              | Icons need to be unambiguous;<br>Icon groups must be meaningful; |""Hi, me and my friend @kaiquekk want to start contributing to the project. Would this be a good beginners first issue? =||= Hey @yurickyh and @kaiquekk, feel free to work on this issue - it should be a good first issue. Other issues that should provide a good entry point can you find here: https://github.com/JabRef/jabref/issues?q=is%3Aissue+is%3Aopen+label%3A%22good+first+issue%22. Also have a look at our [contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) and  drop by in our [developer chat](https://gitter.im/JabRef/jabref) if you have questions! =||= Hi @tobiasdiez, thanks for your reply, so we are going to start working on this issue. =||= Hi and thanks for the reply! So, we followed the prototype and have the toolbar looking like in the screenshots below. However, as we are still not very experienced, we don't know what other functions are commonly used for them to be added in the toolbar. Could you give us an example? Thank you!

![left_menu](https://user-images.githubusercontent.com/32721660/53749361-fac07480-3e85-11e9-847a-3414e1e6ba4a.jpg)
![right_menu](https://user-images.githubusercontent.com/32721660/53749368-fe53fb80-3e85-11e9-891c-66e9b4f65bd8.jpg)

 =||= That looks very good! Can you please open a PR with these changes? For me, this is already enough functionality in the toolbar but maybe @MartinKarim has some good suggestions what to add. =||= One suggestion from my side: I would replace the ""New article"" function with the ""New Entry"" (as in the menu ""Library"" -> ""New Entry"" =||= @matthiasgeiger A few weeks ago, I changed it from ""New entry"" to ""new article"" based on the observation that according to the telemetry almost all created entries were articles. =||= Uhh... okay. 

Can you distinguish how those articles are created? 
Are the users really creating ""empty"" articles and fill them manually?

At least I am nearly always using either a) generation via DOI or b) using web search to create new entries.

What I also do not like is that we now have an inconsistency between menu and menu bar: In ""Library"" exists only the ""New Entry"" - in the menu only ""New article"". =||= Yes, the data is only if the user opens the ""New entry"" dialog and selects one of the entry types there.
![image](https://user-images.githubusercontent.com/5037600/53838900-77427880-3f96-11e9-953f-209475866809.png).

In the longterm, I was considering to make the ""New entry"" button in the toolbar a dropdown button which by default creates an article but provides access to other common options (like book). Moreover, the ""create by identifier""-feature should also come to the toolbar (and should probably separated from the ""new empty entry"" dialog).
 =||= For entry generation from DOI you can simply paste the doi on the maintable and a new entry will be created automatically  =||= "Improve toolbar icons and their layout"Group and reorder the toolbar icons and add 'Generate BibTeX keys' button. Now it looks like on the @MartinKarim's prototypes. <br>
Screenshots of the new layout:
![right](https://user-images.githubusercontent.com/32721326/53910396-7d863280-4032-11e9-9308-cdace307167b.jpg)
![left](https://user-images.githubusercontent.com/32721326/53910397-7e1ec900-4032-11e9-8d7a-9f86ef757cee.jpg)


This PR fixes #4584 .

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yurick Hondayurickyh03/08/19, 02:13:59 PM
4724.04731Wrong default filename format pattern " JabRef 5.0-dev--snapshot--2019-03-06--master--ddd12aec4

The default file format patterns given in the Preferences->Import drop down menu are `bibtexkey` and `bibtexkey - title`, however this leads to files being named literally `bibtexkey.pdf`. The correct options should be `[bibtexkey]` and `[bibtexkey] - [title]` -- then the renaming (and moving) of files works in the cleanup entries.""This issue should be fixed now in the lastet master
We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Yep, the defaults are now correct. Thanks! =||= "Fix default import format pattern"Remove Display Array
Add migration
Fixes #4724


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/08/19, 10:09:41 AM
4494.04732RIS export empty"Would  it be possible to add key bindings for export (ctrl+E) and export selected entries (ctrl+shift+E)? ""@Siedlerchr I would like to get started on this, could you help out with steps to build the code and which java files to look into for this particular fix.

Thanks =||= @ishaan007  Thanks for your interest!  Check out the Contributing.md https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md
and the how to setup a local workspace https://github.com/JabRef/jabref/wiki/Guidelines-for-setting-up-a-local-workspace =||= The relevant java files are probably in the basePanel where the exportAction is called  =||= Thanks for this information @Siedlerchr. I have built the code. How do I run the app locally now?
![image](https://user-images.githubusercontent.com/5724510/49137140-95eb0080-f311-11e8-8936-c882625c590b.png)
 =||= Either you setup Eclipse using ./gradlew eclipse or you import it into Intellij.
To run you can use ./gradlew run =||= Hello,

ctrl+e is not available for Export
ctrl+alt+e can be used and for export selected entries (ctrl+shift+E) can be used,
is it fine, i have done changes and tested =||= @Siedlerchr I would like to work on this issue. However, I am not sure if I understand how to go about this =||= We have an Enum for all actions which are listed there with their keybinding.
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/actions/StandardActions.java

You could look at the import database action to see how it's done and then apply it to the export action
The action/menu item needs to be modified as well to support the keybinding =||= This should be fixed now, thanks to @RonakLakhotia 

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Thanks for adding the functionality!
I tested the key binding on the development build 5.0. It works fine when I select BibTex.xml as export format, importing the selected references into another file goes smoothly. 
However, when exporting references into ris format, which I usually use, the export file is empty and import - accordingly - gives an error:

org.jabref.logic.importer.ImportException: Could not find a suitable import format.
	at org.jabref.logic.importer.ImportFormatReader.importUnknownFormat(ImportFormatReader.java:233)
	at org.jabref.logic.importer.ImportFormatReader.importUnknownFormat(ImportFormatReader.java:184)
	at org.jabref.gui.importer.ImportAction.doImport(ImportAction.java:116)
	at org.jabref.gui.importer.ImportAction.lambda$automatedImport$1181(ImportAction.java:57)
	at org.jabref.gui.util.BackgroundTask$1.call(BackgroundTask.java:46)
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:122)
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)

This does not happen when using one of my ""old"" ris-export files created with Jabref-4.3.1.
If you need any further informtaion, please tell me! =||= @vanukkalla I tried it and it works fine. Both export to RIS format and import of the file again.
This is the sample bibtex entry I used:

```
@Article{Stigler,
  author    = {George J. Stigler},
  title     = {A Theory of Oligopoly},
  journal   = {Journal of Political Economy},
  year      = {1964},
  volume    = {72},
  number    = {1},
  issn      = {00223808, 1537534X},
  publisher = {University of Chicago Press},
  url       = {http://www.jstor.org/stable/1828791},
}
```
RIS file from epxort:
```
TY  - JOUR
AU  - Stigler, George J.
T1  - A Theory of Oligopoly
JO  - Journal of Political Economy
Y1  - 1964
VL  - 72
IS  - 1

UR  - http://www.jstor.org/stable/1828791



U1  - 00223808, 1537534X





ER  -

```
Import window:
![grafik](https://user-images.githubusercontent.com/320228/54123270-8ba3cc80-43ff-11e9-88ad-7af535b2b028.png)
 =||= This is really weird!
If I select entries in one library to export into RIS, Jabref5 says ""RIS successfully exported"", however, the file itself is empty. And when trying to import into another library, import fails (in Versions 4 and 5).

If I export into RIS in Jabref4, the entries are exported, the resulting file looks fine:

TY  - JOUR
AU  - Ohe, Rintaro
AU  - Meng, Hong-Xue
AU  - Ye Aung, Naing
AU  - Yamada, Akane
AU  - Kabasawa, Takanobu
AU  - Utsunomiya, Aya
AU  - Tamazawa, Nobuyuki
AU  - Tamura, Yuka
AU  - Kitaoka, Takumi
AU  - Hashimoto, Toshio
AU  - Shibata, Kenichi
AU  - Toubai, Tomomi
AU  - Kimura, Wataru
AU  - Ishizawa, Kenichi
AU  - Yamakawa, Mitsunori
T1  - Differential expression of estrogen receptor-α on follicular dendritic cells from patients with grade 1-2 and grade 3 follicular lymphoma.
JO  - Hematological oncology
Y1  - 2019/february
M3  - https://doi.org/10.1002/hon.2577
KW  - CD23; estrogen receptor alpha; follicular dendritic cell; follicular lymphoma
U1  - 1099-1069

and I am able to import into a library using Jabref 4 or Jabref5 as expected, everything works well. 

If I export the selected entries in Jabref5 as plain bibtex library, I can append them to another library without problems.
So while Jabref5 tells me that the export was successful, something is not working. 
And I just noticed in Thunar that the working ris files are labeled as ""simple text document"" while the ris files not working are labeled ""SDL 3D-model (binary)"".

The terminal does not give any information on what is going on.


 =||= So you are on linux? Could you please try the latest version from today ( 11-03) https://builds.jabref.org/master/ 
Could you please post the bibtex entry? Maybe it's something about this entry which fails. 
 =||= Xubuntu 18.04 LTS and openjdk which works smoothly for JabRef4.3.1. 

The entry is:
```
@Article{Welzel2001,
 author    = {Welzel, N. and Le, T. and Marculescu, R. and Mitterbauer, G. and Chott, A. and Pott, C. and Kneba, M. and Du, M. and Kusec, R. and Drach, J. and Raderer, M. and Mannhalter, C. and Lechner, K. and Nadel, B. and Jaeger, U.},
  title     = {Templated nucleotide addition and immunoglobulin JIvHIv-gene utilization in t(11;14) junctions: implications for the mechanism of translocation and the origin of mantle cell lymphoma},
  journal   = {Cancer Res},
  year      = {2001},
  volume    = {61},
  pages     = {1629--1636},
  abstract  = {LL Genetics  pdfs1  electronic only},
  comment   = {00001},
  timestamp = {2016.10.03},
}
```

which is just one of over 20 I tried in different combinations and with different export settings.

Using today's snapshot does not change anything on what I observe, although, it is the first time that I actually see the import window opening in JabRef5. But, as before, while V5.0 tells me export was successful, the file is empty and nothing can be marked for import, V4.3.1 exports everything as intended and import works for both versions.
As I noted before, those ris-files that actually contain an entry are defined as text documents, those that are empty are unknown filetypes. =||= @vanukkalla Okay, this is odd. @CaptainDaVinci  did not have any problems with Arch Linux. So I suggest it might be something with the Preferences. Try to reset your preferences and report back if it works again =||= Its getting weirder. I tried Version5 also on Debian Stretch and Win7. It all results in the same.
Jabref reports successful export of selected entries.
The files are of unknown filetype.
When importing, the import window opens but no entry is visible, therefore no import into library.
These ris files look empty when I open them on linux using the texteditor or leafpad. When opening them with the Editor on Win7 or with Atom on linux the entry actually is visible. 
Resetting the preferences did not change anything. 
I get the impression that the export process does something to the file so that it is not marked as text file but rather some sort of programming/executable file. =||= What exactly are the steps you use to export the entries?  =||= I select the entry / entries. Ctrl+Shift+E or export selected entries, select RIS format, type filename.ris, Save.

  =||= Closing this issue due to inactivity :zzz: 
Please reopen the issue with additional information if the problem persists. =||= "[#4494] Add key bindingsFixes #4494 Ronak LakhotiaRonakLakhotia03/08/19, 10:07:36 AM
4474.04738Can't input Chinese characters in biblatex source"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 
JabRef 5.0-dev--snapshot--2018-11-09--master--bab9ae819
Linux 4.14.77-041477-generic amd64 
Java 1.8.0_181
<!-- version as shown in the about box --> on Ubuntu 18.04<!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1.Open and entry
2. Choose biblatex source
3.Input Chinese characters
I can't input Chinese characters in biblatex source, but I can do it in other fields and copy Chinese characters from other places to biblatex source.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""The workaround posted in https://github.com/FXMisc/RichTextFX/issues/146 should work. =||= I would like to work on this issue. =||= Thanks to @CaptainDaVinci  this should now be fixed in the latest development version.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Yes, it is fixed. Thank you! =||= "Adding support for input methods"Fixes #4474

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci03/09/19, 12:48:02 PM
4023.04760Multiple jabref instances with 4.3 maintable-beta while Port 6050 is checked"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef 4.1; Windows 7 6.1 amd64; Java 1.8.0_171
JabRef 4.3-dev--snapshot--2018-05-07--maintable-beta--35b068386


Steps to reproduce:

1. Run 4.1, run 4.3 on the same file...
2. do some group actions in 4.3
3. .data in the 4.1 file are lost when saving


<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>I was very astonished to see in parallel to JabRef 4.1; Windows 7 6.1 amd64 ; Java 1.8.0_171
JabRef 4.3-dev--snapshot--2018-05-07--maintable-beta--35b068386.
Both programs have the port 6500 checked and tell me that only one instance of jabref would be running.
I think an error of the snapshot version which does not respect that an instance of jabref is already running.  
</summary>

</details>

```
Port is blocked
        java.net.BindException: Address already in use: JVM_Bind
	at java.net.DualStackPlainSocketImpl.bind0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
	at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
	at java.net.PlainSocketImpl.bind(Unknown Source)
	at java.net.ServerSocket.bind(Unknown Source)
	at java.net.ServerSocket.<init>(Unknown Source)
	at org.jabref.logic.remote.server.RemoteListenerServer.<init>(RemoteListenerServer.java:26)
	at org.jabref.logic.remote.server.RemoteListenerServerThread.<init>      (RemoteListenerServerThread.java:18)
	at org.jabref.logic.remote.server.RemoteListenerServerLifecycle.open(RemoteListenerServerLifecycle.java:43)
	at org.jabref.JabRefMain.start(JabRefMain.java:163)
	at org.jabref.JabRefMain.lambda$start$0(JabRefMain.java:57)
	at java.awt.event.InvocationEvent.dispatch(Unknown Source)
	at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
	at java.awt.EventQueue.access$500(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.awt.EventQueue$3.run(Unknown Source)
	at java.security.AccessController.doPrivileged(Native Method)
	at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(Unknown Source)
	at java.awt.EventQueue.dispatchEvent(Unknown Source)
	at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
	at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
	at java.awt.EventDispatchThread.run(Unknown Source)
```""Even Jabref4.1 starts to run when 4.3 is running. =||= Can confirm this issue with the maintable-beta branch. =||= Why has this been closed. In the fresh 4.3 release this is not corrected: I could open two instances of 4.3. =||= @bernhard-kleine It was an automatism of GitHub, because @tobiasdiez referenced this issue in commit https://github.com/JabRef/jabref/commit/bb0f728667da99cfbf70ca97837f09eb32b0416e.

This commit did not  make it into the release, but in the development versions.

We are now working full steam ahead towards JabRef v5.0x. You can try the development version at https://builds.jabref.org/master/.

Maybe, in your case, it is better to use the v4.x development line, where we backport fixes from the 5.0 series to 4.x: You can get them from https://builds.jabref.org/v4.x/ =||= For testing this issue, we ask you to run [JabRef--v4.x--latest.jar](https://builds.jabref.org/v4.x/JabRef--v4.x--latest.jar) together with [JabRef--master--latest.jar](https://builds.jabref.org/master/JabRef--master--latest.jar) to ensure you have the latest development versions. We are afraid, we are currently not heading to backport fixes to older v4 versions (such as v4.1). =||= With jabref 4.1 I do not have this problem. I will test 4.x. What is the Bonus using this? Since import from jabfox was broken some time ago, my import from the internet is via PMID of pubmed. Since the bulk of citations have been added that is more convenient than using DOI since the entry with doi is not the full entry you get with PMID searching.
BTW do you have a solution for a keyboard shortcut for ""next entry"" and ""previous entry""? =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Running the version in master there could be two instances of the program. Not fixed at all.
JabRef 4.4-dev--snapshot--2018-06-04--master--ee669a542
Windows 7 6.1 amd64 
Java 1.8.0_172

There could also be other versions of Jabref running in parallel. All of them have the port 6??? checked. =||= Mea culpa, you are right. =||= Maybe related to the Threading bug which does not shutdown correctly after JabRef exit?  =||= That could well be. With 4.3 I could see multiple jabref instances in the task manager. They had to be stopped manually.
 =||= Unfortunately still valid in current master snapshot 
```
Second instance throws an exception but still starts:
17:30:19.067 [JabRef - Remote Listener Server on port 6050] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JabRef - Remote Listener Server on port 6050,5,main] - java.lang.IllegalStateException: Could not start JabRef with arguments []
	at org.jabref.gui.remote.JabRefMessageHandler.handleCommandLineArguments(JabRefMessageHandler.java:17)
	at org.jabref.logic.remote.server.RemoteListenerServer.handleMessage(RemoteListenerServer.java:62)
	at org.jabref.logic.remote.server.RemoteListenerServer.run(RemoteListenerServer.java:42)
	at org.jabref.logic.remote.server.RemoteListenerServerThread.run(RemoteListenerServerThread.java:32) 

``` =||= with the newest snapshot I could open to different screens of jabref 5.0 dev while the port 6050 is checked. =||= Should be fixed in the latest development version now https://builds.jabref.org/master =||= @Siedlerchr , unfortunately not. I could open two instances:
There was however, an error message, but the second instance opened anyhow.
![grafik](https://user-images.githubusercontent.com/9216487/54420304-f019a100-4709-11e9-9a6e-763411fb63fc.png)
 =||= I restared the build, there was a temporary error. The new version should be the one with  46d2c7d  =||= Seems to be okay. A second instance starts but is suppressed and removed from the Windows taskmanager as it should be. Thank you.
 =||= "Improve Remote messaging"Fixes #4023 (multiple instances possible) and should fix #4481 by reducing the timeout (thus JabRef does no longer waits seconds if a proxy prevents us from connecting to localhast). Surpasses #4460.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez03/15/19, 08:51:58 AM
4764.04769Entry Editor removes entries when in souce-code-field"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev on Ubuntu 18.04

JabRef 5.0-dev--snapshot--2019-03-15--master--7ed15bc4a
Linux 4.15.0-46-generic amd64 
Java 1.8.0_201

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Open [4764.bib](https://github.com/JabRef/jabref/files/2840910/4633.bib.txt)
2. double click on ""Rechnergestütze Simulation von Anfahrversuchen nach EN 1317""
3. go to ""BibTeX-source code"" (in the newest dev-version be aware of the workaround [#4762#issue-421323351](https://github.com/JabRef/jabref/issues/4762#issue-421323351), but ""my bug"" also ocours in a february-version)
4. click anywhere into the source-code-field
5. click on ""Misc""-""DNA-Dennis""-""CoulombsLaw.svg pblished under CC-BY 3.0""
6. save
7. check [output.bib.txt](https://github.com/JabRef/jabref/files/2971747/output.bib.txt)  (the ""Misc""-""DNA-Dennis""-""CoulombsLaw.svg pblished under CC-BY 3.0"" disapeared)

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
<summary>Detail information:</summary>

```
Can only load style files: Preview
Can only load style files: Preview
Can only load style files: Preview
Can only load style files: Preview
Can only load style files: Preview
```

</details>

<details>
  <summary>Terminal</summary>

`java -jar -Djavafx.embed.singleThread=true /home/jkalliau/prgm/JabRef/JabRef--master--latest.jar 4633.bib `
  
  ```
16:17:39.557 [JavaFX Application Thread] INFO  org.jabref.logic.importer.OpenDatabase - Opening: 4633.bib
16:17:39.803 [JavaFX Application Thread] INFO  org.jabref.logic.importer.OpenDatabase - Opening: /home/jkalliau/ownCloud/PhDJK/LaTeX/Style/LiteratureJK.bib
16:17:40.907 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Can only load style files: Preview
16:17:40.982 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Can only load style files: Preview
16:17:47.312 [JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Can only load style files: Preview
  ```
</details>""Confirmed: when I click in the source field and then select another entry in the table, the bib entry codes changes to  the first selected one.
Log informs about autosave:
```
12:44:23.668 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.706 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.717 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.737 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.749 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.797 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.808 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.820 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.838 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.879 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.928 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.952 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:23.994 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.060 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.077 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.140 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.175 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.380 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.402 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.653 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.710 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
12:44:24.725 [JavaFX Application Thread] DEBUG org.jabref.logic.autosaveandbackup.BackupManager - Rejecting while another backup process is already running. -  
``` =||= I think this is because when the `sourceTab` is out of focus (when another entry is selected), the [storeSource()](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/entryeditor/SourceTab.java#L166) method is called with the previous _sourceText_ but the `currentEntry` refers to the second entry and the field values of first one are copied to the second one. 

~One possible solution might be to maintain a `previousEntry` field along with `currentEntry` which is updated every time [notifyAboutFocus()](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/entryeditor/EntryEditorTab.java#L37) is called.
Edit: The proposed solution will break saving on losing focus.~ =||= Thanks to @CaptainDaVinci  this should be fixed in the latest master.  https://builds.jabref.org/master =||= "Fix removing entries when source-code-field is out of focus"Fixes #4764

The issue was, `storeSource()` method is called when entry is out of focus, however, if another entry is selected then `currentEntry` is updated to that and `storeSource()` is called with the previous `codeArea` but updating it in the second entry, thus causing a duplication.

Fix was to pass the entry as another argument to `storeSource()`. 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci03/28/19, 08:04:48 AM
4754.04779IllegalArgumentException: The event name cannot be null or empty"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef development version 

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Open database with at least one entry
2. Right-click on entry > Rank > Select one of the options (you might need to enable the rank feature in the preferences)
3. Get IllegalArgumentException (see below)

Solution: Investigate why the name is null and fix this by providing a name.


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.IllegalArgumentException: The event name cannot be null or empty
	at com.microsoft.applicationinsights.telemetry.EventTelemetry.setName(EventTelemetry.java:98)
	at com.microsoft.applicationinsights.telemetry.EventTelemetry.<init>(EventTelemetry.java:64)
	at com.microsoft.applicationinsights.TelemetryClient.trackEvent(TelemetryClient.java:139)
	at com.microsoft.applicationinsights.TelemetryClient.trackEvent(TelemetryClient.java:152)
	at org.jabref.gui.actions.JabRefAction.lambda$trackExecute$671(JabRefAction.java:38)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.actions.JabRefAction.trackExecute(JabRefAction.java:38)
	at org.jabref.gui.actions.JabRefAction.lambda$new$670(JabRefAction.java:30)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$343(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$353(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177)
	at java.lang.Thread.run(Unknown Source)

  ```
</details>"Name is null because in the menu no text should be shown - only the star icons. =||= Fix IllegalArgumentException when ranking entries"Add names for ranking entries event so it does not generate an IllegalArgumentException.

This PR fixes #4754 .

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Kaique Komatakaiquekk04/08/19, 11:54:56 AM
4762.04784Entry Editor only opens after opening Preferences dialog"JabRef version 5.0-dev on Windows 10

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When loading an existing bibliography, the Entry Preview end Entry Editor panes only work after opening the Preferences and clicking ""Save"". (I don't even need to change any settings - just opening the dialog is enough.) This happens every time a new bibliography is opened, ie. even without restarting the program in the meantime.

Steps to reproduce the behavior:
1. Create a new bibliography and add an entry
2. Save and close bibliography
3. Reopen
4. Entry Editor fails to show on double-click on the entry
5. Open Options -> Preferences
6. Hit ""Save""
7. Entry Editor now opens on double click

The Event Log only shows ""Can only load style files: Preview""""Can confirm this issue for:

JabRef 5.0-dev--snapshot--2019-03-15--master--7ed15bc4a
Windows 10 10.0 amd64 
Java 1.8.0_201 =||= Have the same issue on Ubuntu for:

JabRef 5.0-dev--snapshot--2019-03-15--master--7ed15bc4a
Linux 4.15.0-46-generic amd64 
Java 1.8.0_201 =||= I found out that if you go to `Preferences>Entry editor` and uncheck `Open editor when a new entry is created` everything works then. =||= That might be a workaround, but the bug remains =||= > I found out that if you go to `Preferences>Entry editor` and uncheck `Open editor when a new entry is created` everything works then.

Nope, not for me. =||= JabRef 5.0-dev--snapshot--2019-03-15--master--46d2c7dc2
Windows 7 6.1 amd64 
Java 1.8.0_201

Not only the entry editor is gone, but also the entry preview. Latest version of today. Is Jabref becoming Bananaware, matures at the client?
 =||= Does resetting the preferences help? =||= > Does resetting the preferences help?

No, this also happens after a fresh install. =||= @Siedlerchr: It does =||= @Siedlerchr: Resetting the preferences does not help (at least for me).

JabRef 5.0-dev--snapshot--2019-03-15--master--7ed15bc4a
Windows 10 10.0 amd64 
Java 1.8.0_201 =||= I can confirm this error also on Windows.
  If you open the prefences dialog and click on save again, entry editor and preview will work again.
I am currently trying to figure out why  =||= Note, that even before this bug the preview would not work/turn up before having started the entry editor at least once (I think there was on issue on this before, which is still open). The difference now is just, that you cannot even open the entry editor with, e. g., doubleclick, before having used the ""Preferences"" workaround.

JabRef 5.0-dev--snapshot--2019-03-15--master--7ed15bc4a
Windows 10 10.0 amd64 
Java 1.8.0_201 =||= @AEgit  okay, thanks for your feedback. This might narrow it down to the preview initializing =||=  @tobiasdiez I first thought it has something to do with the preview citation style. I debugged and  temporarily added the discovery of the citation styles with a future.get() in the preview panel, but does not change anything.
And the workaround only works if you hit save in the preferences dialog. 
So there must be a thing which prevents the entry editor from opening which is set in the preferences when you click save.  I absolutely have no idea.
A resetting of preferences does not change anything =||= Maybe 'git bisect' helps to track it down? =||= That's strange. The DatabaseChangePane apparently hides the entry preview/editor. I don't have time the next few days to investigate this further, but will return to it on Monday the latest. =||= JabRef 5.0-dev--snapshot--2019-03-16--master--d7dd41b00
Linux 4.15.0-46-generic amd64 
Java 1.8.0_201

Same problem as reported above.  Options / Prefernces / Save  re-enables editing and preview.
 =||= I further found out that it only works if you click OK/Save in the Preferences dialog. Simply opening the dialog and pressing Cancel or Escape does not work. =||= Is this issue result of the changes made [recently](https://github.com/JabRef/jabref/pull/4693/files#diff-78d6fdd24f8cf9ec9fe6d26f79b6f22e) to the ` src/main/java/org/jabref/gui/BasePanel.java` file? Undoing few of those changes in the constructor seem to fix the issue.

Edit: This [line](https://github.com/JabRef/jabref/blob/5e05d878cf8c01b38a8bd1073121849403ebf8d6/src/main/java/org/jabref/gui/BasePanel.java#L195) might be the cause of the issue. =||= Hmm that's interesting, thanks for your investigation. The reason why it fails would be interesting.
And furthermore what has saving the preferences to do with it?  That's the point I currently don't understand  =||= The reason why I think it works on clicking _Save_ under preferences dialog would be because that results in setting up the main panel once again which in turn clears the `getChildren()` for `BasePanel`. However, on creating an instance of `BasePanel`, the constructor makes a call to setting up the main panel before adding `changePanel` to it. =||= I think I understand the problem. It's a Stack pane. So there can be only at most one child visible. https://o7planning.org/en/10633/javafx-stackpane-layout-tutorial =||= (@Siedlerchr) In addition to the errors reported earlier, the Ctrl-E does not work even after Open preferences->Save. You have to start the editor by View->Open entry editor. =||= > In addition to the errors reported earlier, the Ctrl-E does not work even after Open preferences->Save. You have to start the editor by View->Open entry editor.

 This issue remains even after removing the line which adds the `changePane` to the `StackPane`. In addition to that, keybinding for _toggle preview_  isn't working.

However, once you display the editor from view -> Open Entry Editor, the keybindings work.  =||= > @tobiasdiez I first thought it has something to do with the preview citation style. I debugged and temporarily added the discovery of the citation styles with a future.get() in the preview panel, but does not change anything.

I agree -- I get the following in the log:

```
Can only load style files: Preview
Can only load style files: Preview
```

After open/save preferences, it works fine; 5.0-dev on Fedora 29. =||= The main bug should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version.

There are still some related bugs left that should be fixed as well: https://github.com/JabRef/jabref/pull/4784#pullrequestreview-216419250 =||= JabRef 5.0-dev--snapshot--2019-03-19--master--90376f40f
Linux 4.18.0-16-generic amd64 
Java 1.8.0_201

Fixed for me.  Double click n a row now opens the editor. =||= the Alt-2 key to show the entry preview still is not working on a freshly loaded library. the Ctrl-E, however, works, and after opening the entry editor, Alt-2 works, too. Very strange.  =||= <kbd>ctrl</kbd>+<kbd>e</kbd> doesn't seem to work for me. Even after opening the editor <kbd>ctrl</kbd>+<kbd>e</kbd> only closes the editor and does not toggle. =||= @CaptainDaVinci : here JabRef 5.0-dev--snapshot--2019-03-19--master--90376f40f on Windows 7 6.1 amd64 with Java 1.8.0_201
toggle works =||= I can confirm that the main bug has been fixed in:

JabRef 5.0-dev--snapshot--2019-03-19--master--90376f40f
Windows 10 10.0 amd64 
Java 1.8.0_201

i. e., it is now possible again to open the entry editor by double-clicking on a row in the main table.
<kbd>CTRL</kbd> + <kbd>E</kbd> does not seem to (reliably) work for me (I only managed to open the entry editor with <kbd>CTRL</kbd> + <kbd>E</kbd> once and so far I haven't managed to reproduce this behaviour): Generally it does not seem possible to open the entry editor using <kbd>CTRL</kbd> + <kbd>E</kbd>. However, I am a bit unsure about this, since I haven't used this keyboard shortcut at all (but I checked in ""Customize key bindings"" that it was active) - it might be, that something else is off and/or there is a more general problem with the keybindings (?). So this needs more people to confirm.

What does remain, however, - as reported already by @bernhard-kleine - is that the entry preview will not show on a freshly opened database. Only after having opened the entry editor at least once, the entry preview will appear. Should a separate issue be created for this? I thought this problem had already been reported, but I cannot find the issue anymore. =||= Thanks to  @matthiasgeiger  this issue is now finally resolved.
The fixed version should be ready in a couple of minutes from https://builds.jabref.org/master =||= Cannot confirm for:

JabRef 5.0-dev--snapshot--2019-03-25--master--e14b56742
Windows 10 10.0 amd64 
Java 1.8.0_201

As mentioned in https://github.com/JabRef/jabref/issues/4762#issuecomment-474752885, the main bug reported herein has been fixed. But the other issue reported in https://github.com/JabRef/jabref/issues/4762#issuecomment-474752885 remain - are these considered to be separate issues that should get their own thread? Or are they considered to be fixed? If the latter is the case, I cannot confirm the bugfix for JabRef 5.0-dev--snapshot--2019-03-25--master--e14b56742 =||= @AEgit  The PR https://github.com/JabRef/jabref/pull/4806 fixed the following remaining issues:

> 
>     table is now working again in case a new file is opened (also fixes #4793)
>     in case preferences are saved entry editor is working properly again
>     external changes are now also detected in case file name has changed due to ""Save As""

View -> Entry Preview is checked: Uncheck and check again: Preview is shown, 
Keybinding: <kbd>CTRL</kbd>+ <kbd>e</kbd> worked fine for me until I reset the keybindings. This is odd now. I will create a new issue 

 =||= You are right, that there is still something wrong with the opening of the preview and entry editor - but this was already wrong before the topic of this issue has been introduced (e.g. in JabRef 5.0-dev--snapshot--2018-12-14--master--49c3ef396 which I have just tested).

The behavior seems to be: The preview is only opened after ""toggle preview"" twice. The Keybinding seems only to work when the preview or the entry editor has been shown before.

I'll create another issue for this... =||= Cheers! =||= "Fix opening of entry editor"Fixes #4762. The problem was that the NotificationPane was hiding the entry editor/preview.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez03/19/19, 10:29:48 PM
4785.04791Quality-> Find duplicates throws a spectacular error"JabRef 5.0-dev--snapshot--2019-03-18--master--52696f04b
Windows 7 6.1 amd64 
Java 1.8.0_201

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
![grafik](https://user-images.githubusercontent.com/9216487/54641604-de7e2380-4a92-11e9-84a2-9d463d22cb68.png)

This could only be stopped by the task manager.
Steps to reproduce the behavior:
1. ...
2. ...
3. ...

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Can reproduce.

For the record here the full stack trace:

<details>
  <summary>Stack trace</summary>
  
  ```
java.lang.NullPointerException
	at org.jabref.gui.DuplicateResolverDialog.init(DuplicateResolverDialog.java:66)
	at org.jabref.gui.DuplicateResolverDialog.<init>(DuplicateResolverDialog.java:42)
	at org.jabref.gui.DuplicateSearch.askResolveStrategy(DuplicateSearch.java:125)
	at org.jabref.gui.DuplicateSearch.lambda$verifyDuplicates$1(DuplicateSearch.java:117)
	at org.jabref.gui.util.DefaultTaskExecutor.lambda$runAndWaitInJavaFXThread$0(DefaultTaskExecutor.java:74)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:218)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:583)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.FXDialogService.showErrorDialogAndWait(FXDialogService.java:151)
	at org.jabref.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at com.sun.javafx.application.PlatformImpl.lambda$null$173(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$174(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$148(WinApplication.java:191)
	at java.lang.Thread.run(Thread.java:745)
  ```
</details> =||= Thanks for reporting this issue. Should be fixed in the latest version, commit  6c61664  =||= Error is gone. Thanks a lot. =||= "Fix NPE in Duplicate Resolver Dialog"Fixes #4785
init method was accessing the database field before it was initialized.
Fixes #4786
Pass a new BibDatabsecontext()


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/20/19, 07:48:14 PM
4786.04791External addition/removal of new entry causes NullPointerException in review dialog"JabRef version 5.0dev (latest) on Windows 10
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

In case you add an entry externally and check the change in the review dialog a `NullPointerException` is thrown.

Steps to reproduce the behavior:
1. Open a bib file.
2. Add an entry in external text editor
3. Review change ""Added Entry""

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
 java.lang.NullPointerException: null
	at java.util.Objects.requireNonNull(Objects.java:203) ~[?:1.8.0_121]
	at org.jabref.gui.PreviewPanel.<init>(PreviewPanel.java:90) ~[classes/:?]
	at org.jabref.gui.collab.EntryAddChangeViewModel.description(EntryAddChangeViewModel.java:32) ~[classes/:?]
	at org.jabref.gui.collab.ChangeDisplayDialog.selectedChangeChanged(ChangeDisplayDialog.java:77) ~[classes/:?]
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263) ~[easybind-1.0.3.jar:?]
  ```
</details>

Reason is quite obvious as a `null` database context is passed to `PreviewPanel` constructor which is stating: `Objects.requireNonNull(databaseContext);`

Apart from `EntryAddChangeViewModel` also `EntryDeleteChangeViewModel` is affected"Just pass a new BibDatabase() as parameter. That should work. It's done in the settings as well =||= Should be fixed now in the latest version =||= Fix NPE in Duplicate Resolver Dialog"Fixes #4785
init method was accessing the database field before it was initialized.
Fixes #4786
Pass a new BibDatabsecontext()


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/20/19, 07:48:14 PM
4789.04794"Closing a library but not JabRef, the .sav file is not deleted, causing a ""Backup found"" message at the next opening""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.0-dev--snapshot--2019-03-19--master--90376f40f
Windows 7 6.1 amd64 
Java 1.8.0_201

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [+] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Once I close a library clicking the +-symbol in the ""Reiter"", and reopened it, I get the message ""Backup found"" ...
Steps to reproduce the behavior:
1. Close a library by pressing the +-symbol
2. Open the same library again
3. ""Backup found""

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>"Fix closing of library not handling backup and autosave manager shutdown"Fixes #4789

The issue was when the tab is closed by clicking 'x' it did not call
the method `closeTab()` which handles the closing of backup and
autosave manager.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci03/26/19, 03:46:15 PM
4763.04797"""open folder"" causes java.lang.NullPointerException: null""JabRef--master--latest.jar (https://builds.jabref.org/master/) as well as version 4.3.1-2 form Arch AUR (https://aur.archlinux.org/packages/jabref/)

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Right clicking on any entry in any database and selecting ""Open folder"" results in the NullPointer exception below. The setup experiencing this problem is Arch Linux with i3 window manager and without desktop environment. Hence it could be that there is a dependency to some external SW that is not satisfied. This problem exists over multiple version already (~1y) over different Arch machines I operate. My guess is that there is some unknown dependency that I lack on my systems, which causes ""open folder"" to silently crash. I would be interested in tracking down what exactly is causing that issue. Might be something very obvious to you guys.

Steps to reproduce the behavior:
1. On Arch Linux + Jabref master latest or Jabref 4.3.1-2 from AUR: open any database where files have associated pdfs in their entires.
2. Right click, ""open folder"" --> exception below

<details>
  <summary>Log File</summary>
  
  ```
  10:51:41.270 [JabRef CachedThreadPool] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JabRef CachedThreadPool,5,main]
java.lang.NullPointerException: null
	at org.jabref.gui.desktop.os.Linux.openFolderAndSelectFile(Linux.java:54) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.desktop.JabRefDesktop.openFolderAndSelectFile(JabRefDesktop.java:171) ~[JabRef--master--latest.jar:?]
	at org.jabref.gui.BasePanel.lambda$null$49(BasePanel.java:348) ~[JabRef--master--latest.jar:?]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) ~[?:1.8.0_201]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) ~[?:1.8.0_201]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_201]
  ```

Used Java version:
```
java version ""1.8.0_201""
Java(TM) SE Runtime Environment (build 1.8.0_201-b09)
Java HotSpot(TM) 64-Bit Server VM (build 25.201-b09, mixed mode)
```
</details>

I'm happy to provide further details!""I am able to reproduce this on my setup (same as that of the author). 
Could you please tell what the expected behavior is, should it open the folder, in a file explorer, where the file resides? =||= @CaptainDaVinci  It should open the default file manager of the OS and select the file.
e.g. on Windows it opens the explorer and selects the file:
(The file is not related to the entry, just for demonstration purposes)
![grafik](https://user-images.githubusercontent.com/320228/54459757-f474a700-4767-11e9-9693-619d2819bebb.png)


@pirius  It seems like this is a classical NPE because the environment variable `DESKTOP_SESSION` is not set. I'm not a Linux expert, so you may have an idea for a better implementation:

https://github.com/JabRef/jabref/blob/7ed15bc4a257bc724c5d4f1cf7d872fad7cb07e7/src/main/java/org/jabref/gui/desktop/os/Linux.java#L53-L66


 =||= For setups using window managers (e.g i3) instead of desktop environments (e.g KDE), there aren't any out-of-the box file explorers provided. I think many users having a similar setup prefer not to have a GUI file explorer. Instead we could, maybe, open the terminal where the file resides?   =||= Sounds like a good idea. There should already be a method for opening the terminal. So the easiest way would be to wrap the System.getEnv call in an optional.ofNullable and then open the terminal if not present  =||= @Siedlerchr now I understand. I neither have nautilus installed nor is my DESKTOP_SESSION set. My suggestion would be:

* in the preferences in external programs give an option for which command is executed when ""open folder"" is selected. This way on Linux you would not be bound to any specific file browser. You could include the path to the file selected in JabRef as a variable in that command: this way users would be able to choose where in the command the path to the selected file is used. This is similar to how e.g. Kile handles external programs like file browsers, pdf vieweres, etc, should you be familiar with Kile.

* in situations where you need to anyway rely on those external environment variables and external programs to be present, maybe make the exception descriptive. I just realized with the code above that setting my DESKTOP_SESSION and installing Nautilus or similar might have solved the problem :)

* I would not recommend on hard coding any terminal - this would lead to similar issues as with file browsers (people used different terminals). Giving users choice - maybe with reasonable defaults, to this I agree - would cover more of those corner cases in my opinion.
 =||= Hello,
I'm new to open source and interested in contributing to JabRef.I would like to work on this issue, So please allow me to work on it. =||= I've a question regarding implementation:
I'm providing an option to set command or program for default file browser, where user can explicitly set command or let JefRef to set deafult behaviour like this:
![Screenshot from 2019-03-20 00-07-13](https://user-images.githubusercontent.com/17297948/54633119-84d32480-4aa5-11e9-9aa7-a9bd62cf8d1b.png)

 =||= Now, when user clicks ""open folder"", JabRef will try to look whether file browser command(in Preference Tab) is explicitly set by the user or not, If yes then it will execute that command otherwise default behaviour will be applied by checking ""DESKTOP_SESSION"" environment variable.
So Is this solution correct or Do I have to find some other way? =||= Looks good! Thanks for working on this!
Please also check the case that no desktop season is present and user has not selected any application for opening. In that case it would be nice to print a log message or notification =||= > I've a question regarding implementation:
> I'm providing an option to set command or program for default file browser, where user can explicitly set command or let JefRef to set deafult behaviour like this:
> ![Screenshot from 2019-03-20 00-07-13](https://user-images.githubusercontent.com/17297948/54633119-84d32480-4aa5-11e9-9aa7-a9bd62cf8d1b.png)

I also agree, this looks good! The detail I want to highlight: the ""execute command"" would make sense for any external program, also the pdf viewer. I mention this because the pdf viewer does not have an ""execute command"" option in the screenshot - I don't know if that was still WIP when you did the screenshot. And in all of those cases a descriptive error message in case something goes wrong (environment variable missing, etc) would be beneficial. Thanks! =||= @Siedlerchr and @pirius thanks for your comment.
I'm not able to reproduce this error on my ubuntu 18.04 system, but I hope this will solve this issue(NPE):

@Override
    public void openFolderAndSelectFile(Path filePath) throws IOException {
        String desktopSession = System.getenv(""DESKTOP_SESSION"");

        String cmd = ""xdg-open "" + filePath.toAbsolutePath().getParent().toString(); //default command

        if(Objects.nonNull(desktopSession)){
            desktopSession = desktopSession.toLowerCase(Locale.ROOT);
            if (desktopSession.contains(""gnome"")) {
                cmd = ""nautilus"" + filePath.toString().replace("" "", ""\\ "");
            } else if (desktopSession.contains(""kde"")) {
                cmd = ""dolphin --select "" + filePath.toString().replace("" "", ""\\ "");
            }
        }
        Runtime.getRuntime().exec(cmd);
    }

need a comment on this.. =||= And I've one more question:
I'm neither familiar with windows nor have access to windows. So what should be default command for opening file browser? 
Is this correct : Runtime.getRuntime().exec(""explorer.exe /select,"" + path);
I need to set this default behaviour in JabRefPreferences. =||= Thanks to @deepakkumar96  this  issue should now be resolved.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.
 =||= Hello @Siedlerchr,
Sorry for the late reply, I was busy in the past last few weeks,
I've tested fix for both issue #4763(this one) and #4802 under Ubuntu 18.01 with the 'JabRef--master--latest.jar' And It worked for me.
Please let me know if there is any other issue related to this PR. =||= I can confirm, this successfully solved the issue. Good work! =||= @deepakkumar96  Both issues are solved thanks to your PR. Thanks again for your contribution. =||= Thank you @pirius and @Siedlerchr  =||= ""Fix right clicking on any entry and selecting ""Open folder"" results in the NullPointer exception""Fixes #4763
The issue was when a user right-clicks an entry and right click ""open folder""  then it results in Null Pointer Exception in Linux System.

The main cause for this issue was in the Linux implementation of NativeDesktop(Linux.java#openFolderAndSelectFile), that code looks for 
an environment variable named 'DESKTOP_SESSION' and if this variable is not set in any system then it will result in Null Pointer Exception.

The Fix was to check if 'DESKTOP_SESSION' variable is present or not, if not present then run a default command which will try to open the folder.

Another issue was that if a system does not have a file browser installed then right-clicking on any entry and selecting ""open folder"" option will not do anything(if there is no file browser installed in the system).

To fix this issue I've added an option in preference setting window to set command or program for default file browser, where a user can explicitly set command or let JefRef use a default behavior like this:

![jabref-fix-4763](https://user-images.githubusercontent.com/17297948/54761987-39418780-4c19-11e9-999e-2b62fa24b237.png)

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Deepak Kumardeepakkumar9604/13/19, 03:50:24 PM
4687.04798Entry Editor: change Required Fields tab"
![entryreq](https://user-images.githubusercontent.com/26404402/53191052-22544900-360b-11e9-8ca4-53a8016dcc88.png)

|Description of Issue|Possible Solution|  Warnings |
|:-----------------------------------------:|:-------------------------------------------------:|:---------------:|
|text fields are too long to provide a good overview over long content;<br/>buttons at end of the fields get less noticable|shorten text fields| -|
|-|-|other changes are found in #4686 |"Hi I would like to work on this. =||= Shortens text fields in Required Fields Tab"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->
Implements UI change suggested in [#4687](https://github.com/JabRef/jabref/issues/4687)

fixes #4687

![fields_tab](https://user-images.githubusercontent.com/36728314/54782881-f0ec8e80-4c45-11e9-8a71-0dedee9abd1a.png)
----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Samiya Caursamiyac03/29/19, 03:01:52 PM
4805.04815Improvement: Add all messages shown also to event log"Currently, the information displayed, e.g., during saving, is not logged in the event log:
![grafik](https://user-images.githubusercontent.com/676652/54878244-3ec1ec00-4e2a-11e9-88ab-ae08d08113f9.png)
not logged here:
![grafik](https://user-images.githubusercontent.com/676652/54878255-6c0e9a00-4e2a-11e9-882b-b528c952430e.png)

In my opinion it would be helpful to have it also there.

@tobiasdiez @Siedlerchr WDYT?
""I agree. If it's important enough to be displayed to the user as a status update, then it should also be displayed in the event log (as info). =||= why not make to saving lines optional, otherwise the log can become clattered.
 =||= ... at least when ""autosaving"" is enabled. Apart from that I would like to see the information that saving was successful. =||= Thanks to @r0light  this should be fixed in the latest master =||= "Enhanced message log"Worked on  [#4805](https://github.com/JabRef/jabref/issues/4805) . 
Removed JabRefFrame.output in favor of FXDialogService.notify and refactored calling code.
Added Logging to FXDialogService.notify

Logs seemed to be duplicated afterwards. However, this was another issue with log4j. Because LogEvent-Objects are reused, they were copied in LogMessages.add . But at that point it was too late, resulting in different Log Messages being overwritten. I therefore moved the copying to GuiAppender.append and this resolves the issue of seemingly duplicated log messages. 
This is probably also the reason for [#4811](https://github.com/JabRef/jabref/issues/4811)

closes #4805 closes #4811

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Robinr0light04/03/19, 09:19:04 AM
4811.04815"A simple ""save"" add six lines to the event log""JabRef 5.0-dev--snapshot--2019-03-26--master--83c802269
Windows 7 6.1 amd64 
Java 1.8.0_201

- [+] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

After I had cleared the event log, I did a save on the library
To my astonishment the library was opened 6 times:
![grafik](https://user-images.githubusercontent.com/9216487/55024251-c6f8ea80-4ffe-11e9-8e3c-a14a978bc9ee.png) 
This is four times too many.

Steps to reproduce the behavior:
1. ...
2. ...
3. ...

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>"Enhanced message log"Worked on  [#4805](https://github.com/JabRef/jabref/issues/4805) . 
Removed JabRefFrame.output in favor of FXDialogService.notify and refactored calling code.
Added Logging to FXDialogService.notify

Logs seemed to be duplicated afterwards. However, this was another issue with log4j. Because LogEvent-Objects are reused, they were copied in LogMessages.add . But at that point it was too late, resulting in different Log Messages being overwritten. I therefore moved the copying to GuiAppender.append and this resolves the issue of seemingly duplicated log messages. 
This is probably also the reason for [#4811](https://github.com/JabRef/jabref/issues/4811)

closes #4805 closes #4811

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Robinr0light04/03/19, 09:19:04 AM
4817.04818Exception for cleanup rename pdf (Automatic Bug Report - 20190328110358)"JabRef 5.0-dev
Windows 10 10.0 amd64 
Java 1.8.0_202

Steps to reproduce:

1. Add a PDF-File entry to Bib-Entry
2. Cleanup with Rename PDF to given FileName Format

The PDF is renamed correctly, but the below Exception is thrown.

Paste your log details here.
<details>
<summary>Detail information:</summary>

```
Uncaught exception occurred in Thread[pool-3-thread-2,5,main]
java.lang.IllegalStateException: Not on FX application thread; currentThread = pool-3-thread-2
	at com.sun.javafx.tk.Toolkit.checkFxUserThread(Toolkit.java:279)
	at com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(QuantumToolkit.java:423)
	at javafx.scene.Parent$2.onProposedChange(Parent.java:367)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:113)
	at com.sun.javafx.collections.VetoableListDecorator.setAll(VetoableListDecorator.java:108)
	at com.sun.javafx.scene.control.skin.LabeledSkinBase.updateChildren(LabeledSkinBase.java:575)
	at com.sun.javafx.scene.control.skin.LabeledSkinBase.handleControlPropertyChanged(LabeledSkinBase.java:181)
	at com.sun.javafx.scene.control.skin.ListCellSkin.handleControlPropertyChanged(ListCellSkin.java:49)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase.lambda$registerChangeListener$70(BehaviorSkinBase.java:197)
	at com.sun.javafx.scene.control.MultiplePropertyChangeListenerHandler$1.changed(MultiplePropertyChangeListenerHandler.java:55)
	at javafx.beans.value.WeakChangeListener.changed(WeakChangeListener.java:89)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105)
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112)
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146)
	at javafx.css.StyleableObjectProperty.set(StyleableObjectProperty.java:82)
	at javafx.beans.property.ObjectProperty.setValue(ObjectProperty.java:69)
	at javafx.scene.control.Labeled.setGraphic(Labeled.java:423)
	at org.jabref.gui.util.ViewModelListCellFactory$1.updateItem(ViewModelListCellFactory.java:149)
	at javafx.scene.control.ListCell.updateItem(ListCell.java:480)
	at javafx.scene.control.ListCell.lambda$new$41(ListCell.java:167)
	at javafx.collections.WeakListChangeListener.onChanged(WeakListChangeListener.java:88)
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329)
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73)
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233)
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482)
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541)
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205)
	at com.sun.javafx.collections.ObservableListWrapper.remove(ObservableListWrapper.java:167)
	at com.sun.javafx.binding.BidirectionalContentBinding$ListContentBinding.onChanged(BidirectionalContentBinding.java:135)
	at com.sun.javafx.binding.ListExpressionHelper$Generic.notifyListeners(ListExpressionHelper.java:593)
	at com.sun.javafx.binding.ListExpressionHelper$Generic.fireValueChangedEvent(ListExpressionHelper.java:571)
	at com.sun.javafx.binding.ListExpressionHelper.fireValueChangedEvent(ListExpressionHelper.java:109)
	at javafx.beans.property.ListPropertyBase.fireValueChangedEvent(ListPropertyBase.java:200)
	at javafx.beans.property.ListPropertyBase.lambda$new$59(ListPropertyBase.java:56)
	at com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(ListListenerHelper.java:164)
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73)
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233)
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482)
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541)
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205)
	at javafx.collections.ModifiableObservableListBase.setAll(ModifiableObservableListBase.java:90)
	at javafx.beans.binding.ListExpression.setAll(ListExpression.java:370)
	at org.jabref.gui.util.BindingsHelper.lambda$bindContentBidirectional$965(BindingsHelper.java:123)
	at org.jabref.gui.util.BindingsHelper$BidirectionalListBinding.changed(BindingsHelper.java:240)
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(StringPropertyBase.java:103)
	at javafx.beans.property.StringPropertyBase.markInvalid(StringPropertyBase.java:110)
	at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:144)
	at javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:49)
	at javafx.beans.property.StringProperty.setValue(StringProperty.java:65)
	at javafx.beans.property.StringProperty.setValue(StringProperty.java:57)
	at org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(BindingsHelper.java:212)
	at org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(BindingsHelper.java:205)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.binding.ObjectBinding.invalidate(ObjectBinding.java:172)
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(BindingHelperObserver.java:51)
	at com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(MapListenerHelper.java:320)
	at com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)
	at com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)
	at com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:169)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:417)
	at org.jabref.model.entry.BibEntry.setField(BibEntry.java:443)
	at org.jabref.model.entry.BibEntry.setFiles(BibEntry.java:809)
	at org.jabref.logic.cleanup.RenamePdfCleanup.cleanup(RenamePdfCleanup.java:57)
	at org.jabref.logic.cleanup.CleanupWorker.cleanup(CleanupWorker.java:31)
	at org.jabref.gui.actions.CleanupAction.doCleanup(CleanupAction.java:87)
	at org.jabref.gui.actions.CleanupAction.cleanup(CleanupAction.java:130)
	at org.jabref.gui.actions.CleanupAction.lambda$action$238(CleanupAction.java:62)
	at org.jabref.gui.util.BackgroundTask$2.call(BackgroundTask.java:55)
	at org.jabref.gui.util.BackgroundTask$2.call(BackgroundTask.java:52)
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:122)
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)

Uncaught exception occurred in Thread[pool-3-thread-2,5,main]
```

</details>"The exception for this particular cleanup was fixed by @r0light. However, other cleanup actions (and in general every operation that changes the entry list on another thread) throws a similar exception. I'll have a look and try to find a general solution to this kind of problem (maybe by creating a wrapper around the list of entries). =||= Should be fixed now in the latest master. Thx to @tobiasdiez  =||= Put renaming of file entries in JavaFX thread for cleanup"closes #4817 

Because field changes must be done in the JavaFX thread, i put the field change in a callable to be executed by the JavaFX thread.

This issue might arise for other cleanup tasks as well.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Robinr0light03/28/19, 11:07:15 AM
4816.04821possible problem with RIS publication year"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. ...import ris file (control i)

Please see the attached ris.gz file.  Using either JabRef 4.3.1 or dev-5.0, JabRef imports publication year as 2019, when it is really 2005.

At first I thought it was a problem with the journal (J. Chem. Phys.) web site.  Then I saw that the Y1 and PY fields in the ris file were correctly set to 2005.  The Y2 field is 2019, but that is supposed to be the access date.

The bib file works fine, since it does not contain a field for access date.

Please let me know if the problem is really with the journal after all, and I'll communicate with them.

Thanks for JabRef!

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""@CodeSJS  Thanks for your report. Unfortuantely here is no attached file visible. Could you please add this? =||= My apologies.  I thought I dragged gzipped files into the right window.  I'm new to github.

I've attached gzipped ris and bib files to this email.  In the ris file, the PY and Y1 fields are both 2005, yet JabRef imports as 2019, which is the Y2 field.

Thanks,

  Sherwin

On 3/28/19 7:24 AM, Christoph wrote:

@CodeSJS<https://github.com/CodeSJS> Thanks for your report. Unfortuantely here is no attached file visible. Could you please add this?

—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub<https://github.com/JabRef/jabref/issues/4816#issuecomment-477554872>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AlCPNDs94S1e_40K8OnCeosQg6YUlxk5ks5vbKYygaJpZM4cO5af>.

--

Sherwin Singer
Department of Chemistry and Biochemistry
Ohio State University
100 W. 18th Ave.
Columbus, OH 43210
614-292-8909
www.asc.ohio-state.edu/singer.2<http://www.asc.ohio-state.edu/singer.2>

 =||= Hmm, I'm still not sure files are attached.  I'm trying again.
   Sherwin

[aip_jcp123.bib.gz](https://github.com/JabRef/jabref/files/3018020/aip_jcp123.bib.gz)
[aip_jcp123.ris.gz](https://github.com/JabRef/jabref/files/3018023/aip_jcp123.ris.gz)

 =||= @CodeSJS  Thanks! You can only add files to an issue here at github, replying via mail with attachments does not work.

I could confirm the behaviour.
When I add the entry via DOI doi:10.1063/1.1954747 I get the correct date 2005. =||= Should be fixed now in the latest master, the first valid year found is now taken and no longer overwritten.


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Thanks for working on this.

The import is now correct for the example I supplied, but it may not be a solid fix.  If for some reason the Y2 field precedes Y1 or PY, then I confirmed that the JabRef development master still gets the publication year wrong.

Y2 is access year, should never be imported as publication year, so I guess JabRef should ignore this field.  PY, publication year, should be the desired field.  Y1 is ""primary date"".  I searched, but could not find out how primary date differs from publication year, other than is a full year-month-day.

Regards,
     Sherwin =||= @CodeSJS  JabRef checks multiple fields for dates:
`Y1, Y2, PY, DA `
with my fix the first found date in one of the fields is taken. 

I looked and found that the original code was adapted for compatibility with a word press plugin #3634 from @dsifford 

Y1 and PY seem to be synonyms. 
Y2 should be date-accessed or sth simliar, agree that this should be removed.
DA is another date field, but I have no idea for what it is used.
https://en.wikipedia.org/wiki/RIS_(file_format)

https://github.com/JabRef/jabref/blob/40600b35420e688ee5d5758224717b484ad34f84/src/main/java/org/jabref/logic/importer/fileformat/RisImporter.java#L196-L206
 =||= Thanks to @victorjof  this issue should be already fixed in master =||= "Fix overwriting of date in RIS import"Now the first valid year is taken into account. Previously the year was overwritten when another field containing year was found.
Adjusted the tests to reflect the new behavior. This required adjusting the month field in the test files

Fixes #4816
<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr03/29/19, 02:04:39 PM
4819.04822Convert AutoLinkFilesAction to JavafX"Today I discoverd that the AutoSetLinks is  still using Swing Stuff 
Should be converted to javafx and probably also converted to an instance class.

Refs #3861 "Convert AutoLinkFilesAction to JavaFX"Fixes #4819.
Also convert a few other message boxes to JavaFX.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez04/01/19, 11:09:08 AM
4824.04825Switch to Search result hits in Preferences-Search"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
When I use the search in the preference (#1019) it would be nice to focus a view with search hits. Currently I stay with the last opened view and always need to click one of the views.

**Describe the solution you'd like**
If I search any (or the first) view with hits should get focused.  
Optionally the focus could depend on a priority (first viewname, then title, then entries)

**Additional context**
Need to click ""Entry preview"" to find search hits
![test](https://user-images.githubusercontent.com/7139697/55238217-3ad00880-5234-11e9-8cda-2db928e999f4.gif)"Select the first tab which matches the search query in preferences window"After every search clear the selection of tabs and select the first
tab in the tabsList.


![preferences](https://user-images.githubusercontent.com/21019116/55240556-1fc6be00-525f-11e9-9690-b5a1744ad4fa.gif)

Fixes #4824

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci03/30/19, 09:05:57 AM
4588.04830Backslashes in group search are erased from bib file after saving"JabRef version 5.0

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Create a new dynamic group using a free-form search expression.
2. Use backslashes in the search, for example, by using word boundaries in the search (e.g. `title = ""\bJabRef\b""`).
3. Save the group.
4. Close JabRef and open it again, loading the library where the aforementioned group was created. At this point, it can already be noticed that search results are not the same as before JabRef was closed.
5. Edit the group. Notice that the backslashes in the search are gone, that is, it is now `title = ""bJabRefb""`.
6. If this database is saved, it will be saved without the missing backslashes.

**Expected behavior:** after loading the database, the group should contain the same entries as when the database was closed.

**Additional information:** I made sure to disable save actions when testing this. 

When I first create my group it looks like this in the database:

    1 SearchGroup:JabRef\;1\;title =""\\\\bJabRef\\\\b""\;0\;1\;1\;\;\;\;;

After I close JabRef and reopen it, the backslashes are already missing from my search in the GUI. If I save this database, my group looks like this in the database:

    1 SearchGroup:JabRef\;1\;title =""bJabRefb""\;0\;1\;1\;\;\;\;;

In order for JabRef to load my database and include the single backslash I want, I had to include 8 backslashes in my search, like so:

    1 SearchGroup:JabRef\;1\;title =""\\\\\\\\bJabRef\\\\\\\\b""\;0\;1\;1\;\;\;\;;

However, if I save my database once, the 8 backslashes become 4. If I open it and save it again, the 4 backslashes become none. I imagine at some point when the database is being loaded ,`\\` is being interpreted as a single escaped backslash and is loaded as so.""Thanks for your report.  For anyone interested in fixing this, the code for parsing groups is here.
There should also be a unit test.

https://github.com/JabRef/jabref/blob/a051e1b08e45fbb6b79c83ce711e7b14f8c23fe8/src/main/java/org/jabref/logic/importer/util/GroupsParser.java#L256-L273 =||= I believe the problem is in the inverse function, the one that transforms a group into a string, no? Because the backslashes disappear when the user saves the database to a file, not when the group is read from the file. =||= The serialization happens here:
https://github.com/JabRef/jabref/blob/701e73d545e9879163438a95ba9ceb6a33eddb48/src/main/java/org/jabref/logic/exporter/GroupSerializer.java#L63-L80

On a first look, the code looks fine. There are `quote/unquote` commands at the correct places, which should take care of escaping. =||= Hi all,

I am working on this issue.

I have a question about both the code and Git. In the process of looking at this issue, I realized that the create group dialog goes off the screen (so I can’t see the OK buttons no matter what I do). So I just put the `mainPane` into a `ScrollPane` so I could scroll down and see the whole dialog. In addition, I am creating a number of log statements instead of the debugger because I want to try out that way of debugging. Finally, I plan on making changes that directly solve the problem.

Since I’m doing more than three things, I was wondering if I should just create a branch for each. I could also submit the `ScrollPane` fix as a PR. But I need to put both changes on top of each other to be able to create the group and test whatever I put in the logs. I thought I might use rebase, but I don’t want to mess up the commit history. I could also use merge and stash, with a parallel `scrollPane` branch that continually merges on top of the commits for the main issue.

The `git diff` for the `scrollPane` looks like this:

```
@@ -201,8 +206,10 @@ class GroupDialog extends BaseDialog<AbstractGroup> {
         descriptionPane.setVbarPolicy(ScrollBarPolicy.AS_NEEDED);
 
         // create layout
+        ScrollPane mainScrollPane = new ScrollPane();
+        getDialogPane().setContent(mainScrollPane);
         VBox mainPanel = new VBox(15);
-        getDialogPane().setContent(mainPanel);
+        mainScrollPane.setContent(mainPanel);
         mainPanel.setPadding(new Insets(5, 15, 5, 15));
         mainPanel.getChildren().setAll(
                 generalPanel,
```

Finally, I created another fix in `GroupDialog` that removes an error but doesn’t change the issue but solves another problem. I could create a PR for that.

What is the best way to use Git here? Also, should I send a PR for the `scrollPane`? =||= Hi,
thanks for the info. As all is somehow group related you can put in one PR, just make a commit for each fix. 
Checkout master
create a branch which fixes the scrollPane issue.  Just stage the single file for commit
Push that as PR.
Then we merge this into master and you can pull that changes into your code. =||= I'm not sure the `ScrollPane` is the final fix. It just makes it go from ""not working"" to ""working well enough to use."" But I can PR it anyway. =||= The issue with the scrollpane should be fixed now in the master as a result of https://github.com/JabRef/jabref/pull/4660. =||= Thanks for looking into the issue. In case a development version implements this, I can test it, as I currently have a ton of groups made with searches containing regex and backslashes. =||= I'm still looking into this issue. I think I have found the line that adds the extra quote character `\`. Besides the original one pointed out by Tobias above, also see line 121 below:

https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/logic/exporter/MetaDataSerializer.java#L116-L126

This quotes it again once the group tree has been serialized into one string. I could remove this, and to keep the class balanced, I might also want to remove the quote call in line 78 below:

https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/logic/exporter/MetaDataSerializer.java#L73-L95

This way, the quoting of both the groups and the other metadata could be done at a more granular level in other classes rather than where the serialized metadata is being aggregated in `getSerializedStringMap`. I would need to know whether `saveOrderConfig.getAsStringList()` and `saveActions.getAsStringList(OS.NEWLINE)`below return lists of `String`s with `;`. Those classes looked a little complicated, but I doubt they would return something with a `;`.

https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/logic/exporter/MetaDataSerializer.java#L32-L35

What do the save actions and save order configuration represent? Could they contain `;`? If not, I am just going to move on and remove those `StringUtil.quote` calls before working on the rest of this bug. =||= Thanks for digging into this! Much appreciated! 

The save sort order define in which sort order the entries are exported and stored into the bib file. You can see them in preferences dialog and in library properties. They contain only ascending /descending order and the bib field. So nothing special. Not fully sure but they are stored as key value in the bib file, with semicolon. 

Save actions are the same as cleanup. You can automatically run cleanup ops (latex to Unicode for examplel) always on saving entries. 

Just configure a simple save action in the library properties to see how they are serialized  =||= Okay, I will do that soon, and see what happens when I remove the `StingUtil.quote` calls. =||= The library properties dialog goes off the screen for me so I can't click OK. Is there a quick fix for this? My monitor is 1366 x 768. =||= Isn't there an OS-specific shortcut which you can use to move a window with the mouse or arrow keys? I believe on Windows and Ubuntu it is `Alt + Spacebar`, then `M`. =||= I think I found and fixed the problem, which seems to be in class `org.jabref.logic.util.strings.QuotedStringExporter`.

I found the following. During serialization, it is quoted twice, once when it is being serialized to the group string in class `org.jabref.logic.exporter.GroupSerializer`, and once when the group string is being combined with other metadata in `org.jabref.logic.exporter.MetaDataSerializer`, hence 2^2 = 4 quotes in the database after saving. It is also unquoted twice, once when the group string is being separated from the metadata string in method `getNextUnit` in class `org.jabref.logic.importer.MetaDataParser`, and again in `org.jabref.logic.importer.GroupParser` in each of the `...fromString` methods using `StringUtil.unquote`. However, it is also unquoted a third time (between the other two) in `QuotedStringTokenizer`. `QuotedStringTokenizer` splits the group into parts, which are then given back to `GroupsParser` and unquoted using `StringUtil.unquote`. The change I made allows `QuotedStringTokenizer` only to split the parts of the group string, rather than also unquoting them.

I will put this into a PR. @douglasrizzo , feel free to test this more thoroughly and let me know if it breaks anything else. =||= OK, just a small clarification. In order to test this, I have to download @NorwayMaple 's fork, checkout branch `fix_escape` and build JabRef using Gradle, correct? Do I need to wait for the pull request to pass the checks or can I try it right now? =||= You can do that. I can also just add `StringUtil.unquote` in a couple of places and it will pass the checks. I'm only 75% sure that that is the right answer, and I was hoping to do a little bit more investigation just to be sure. =||= @douglasrizzo  Yes, you can simply run ./gradlew run in the code. You need jdk8 installed.
 =||= You can also wait until @NorwayMaple fixed the tests, then the build can be found under http://builds.jabref.org/ 😉 =||= Thanks to @NorwayMaple  this should be fixed now. 
Please use the latest development version from https://builds.jabref.org =||= I have tested with my database, which contains quite a few backslashes in group searches, and I can confirm that this is fixed for me. Thank you everyone, great work. =||= OK, one last question. The only version of JabRef that has this bugfix is version 5, correct? More specifically, it's present in all the development snapshots after this PR was accepted, right? These fixes are not applied to version 4.3.1? =||= Right on all points. We don't have the resources to backport fixes to older versions. Usually, we try to release more often, the longer cycle for 5.0 comes from the many changes that were made.  =||= "QuotedStringTokenizer now does not unquote"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

I found the following. During serialization, the group string is quoted twice, once when it is being serialized to the group string in class `org.jabref.logic.exporter.GroupSerializer`, and once when the group string is being combined with other metadata in `org.jabref.logic.exporter.MetaDataSerializer`, hence 2^2 = 4 quotes in the database after saving. It is also unquoted twice, once when the group string is being separated from the metadata string in method `getNextUnit` in class `org.jabref.logic.importer.MetaDataParser`, and again in `org.jabref.logic.importer.GroupParser` in each of the `...fromString` methods using `StringUtil.unquote`. However, it is also unquoted a third time (between the other two) in `QuotedStringTokenizer`. `QuotedStringTokenizer` splits the group into parts, which are then given back to `GroupsParser` and unquoted using `StringUtil.unquote`. The change I made allows `QuotedStringTokenizer` only to split the parts of the group string, rather than also unquoting them.

Fixes #4588

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Abraham Polkabepolk04/05/19, 02:40:31 PM
4820.04835"The file import dialog does not react to ""enter"".""JabRef 5.0-dev--snapshot--2019-03-28--master--a9115a256
Windows 7 6.1 amd64 
Java 1.8.0_201
- [+] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Once you have selected a file for attachment to an entry Jabref opens a dialogue where you can confirm your selection of refuse it. You can select either the ""cancel"" or the ""apply"", however confirmation with ""enter"" does not work in both cases, you must use the mouse left click. The selection can, however, be changed with ""tab"".
![grafik](https://user-images.githubusercontent.com/9216487/55157441-a8a90100-515c-11e9-96d0-2984819a8bdc.png)

Steps to reproduce the behavior:
1. ...
2. ...
3. ...

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""If you want to use the keyboard in combination with tab, you can use <kbd>space</kbd> instead of <kbd>enter</kbd> to fire buttons when the button is selected.

Is this an appropriate way to go for you? =||= This is not obvious, but it works. I would prefer to use ""enter"". =||= I think the default behaviour is <kbd>alt </kbd> or <kbd>ctrl </kbd>  <kbd>enter </kbd> 
Default <kbd> enter </kbd> ""commits"" the entered text. =||= I just saw that behaviour is defined in the keybinding, as follows.
This is the default behaviour for all dialogs.  Normally it should be possible to change that in the keybinding dialog, but it's not showing up in the dialog

```  
DEFAULT_DIALOG_ACTION(""Execute default action in dialog"", Localization.lang(""Execute default action in dialog""), ""ctrl+ENTER"", KeyBindingCategory.VIEW),
```
  =||= I guess the dialog just doesn't define a default action... =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "All buttons in custom dialogs react on enter"All buttons in custom dialogs react now also on <kbd>enter</kbd>. (The default behavior <kbd>space</kbd> in JavaFX is not affected by this change.)

Fixes #4820 

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)"Johannes Mannerjohannes-manner04/02/19, 08:45:04 PM
4735.04839Non-existing aux file in group throws IOException"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef dev version <!-- version as shown in the about box --> on Windows 10 <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Create a group based on aux file
2. Close and save library
3. Remove aux file
4. Open library again -> get error message because of IOException, group tree is empty

Solution:
Catch exception (and log warning) here https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/model/groups/TexGroup.java#L31



<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>"Hi @tobiasdiez, I would like to work on this issue. =||= @arturolc I've now fixed this myself as I again run into this problem. Hope you didn't already started working on this. =||= Fix parser exception when loading tex-groups with non-existing file"Fixes #4735. 
Catch file not found exception and handle non existing aux files gracefully.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez04/02/19, 09:33:58 PM
3531.04848Custom Name Formatters are not found"- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef version JabRef 4.1-dev--snapshot--2017-12-08--master--6f39151a7 on Windows 7x64 with Java jre1.8.0_151

Steps to reproduce:

1. A custom layoutfile (datacite.layout) was created and placed in the JabRef folder (according to http://help.jabref.org/en/CustomExports)
2. A new custom export filter (DCX) was declared referencing the layoutfile above.
3. An export war created calling java.exe -jar JabRef--master--latest.jar -n -o D:\test.xml,DCX D:\Test.bib
4. Up to this point everthing works as expected
5. The custom layoutfile was modified now using a custom name formatter called DCA (according to http://help.jabref.org/en/CustomExports)
6. The custom name formatter was defined via Preferences->Name Formatter
7. Now the execution of the same export ends with the error
[AWT-EventQueue-0] WARN  org.jabref.logic.exporter.ExportFormat - the following formatters could not be found: DCA
The created output file shows before every author [Formatter not found: DCA]
The same result is received using the GUI via File -> Export 
With JabRef Verion 2.9 this was never a problem.

Details
layoutfile datacite.layout contains only the following line causing the error
    \format[DCA]{\author}
	
The name formater too is absolutely simple
Formater Name = DCA
Format string = {ll}, {f.}""Thanks for reporting! The syntax for custom formatters has changed to more consistent within JabRef. Have a look this link which roughly describes your use case http://discourse.jabref.org/t/file-rename-feature-broken-in-4-1/982/2

When you adapt the syntax, hopefully your workflow works again. =||= Closing this due to inactivity. Feel free to reopen if the issue persists. =||= Hi,
Sorry for posting to this closed issue.  I've been experiencing a similar problem to that of HVGJoBa: custom name formatters don't work when attempting to use them in custom export filters.

To me, it is not obvious how the link lenhard provided works for the custom export filters.  If that is the case, does it mean the online documentation on the feature is completely outdated?  This does not seem to be true; everything else apparently works fine, except for specifying custom name formatters.

I've experienced the problem with versions 3.8.2 and 4.3.1 on Windows 7 and 10 (64 bit).  The syntax works on version 2.7 on the same devices. =||= I'm somewhat confused by the documentation and the actual code. Can you please post the example that works in 2.7 but fails in the later versions. Thanks. =||= Thanks for quick response, and sorry if my documentation was confusing.
I'm using the GUI, trying to set a custom export filter with a custom name formatter.  Here's an example, slightly modified from that specified by HVGJoBa:

1. Create a layout file (`""datacite.layout""`, say), whose content is `\format[DCA]{\author}.` [with a return at the end]
2. Define a custom export filter with the file (Options > Manage custom exports > Add new > {Export name: `datacite`, Main layout file: `""..\datacite.layout""`, File extension: `.txt`})
3. Define a custom name formatter (Options > Preferences > Name formatter > {Formatter name: `DCA`, Format string: `*@1@{ll}{, f.}@*@, {ll}{, f.}`})
4. Export a database with the custom export filter just defined (File > Export > {File name: `anything`, Files of type: `datacite (*.txt)`})

This procedure works in 2.7, and the exported file should contain a list of formatted author names (provided they exist).  When running this in 3.8.2 or 4.3.1, the exported file contains strings ""[Formatter not found: DCA]"", and the author names are not formatted.

Also, a custom name formatter specified as above could be used in entry preview (Options > Preferences > Entry preview) in 2.7, but cannot in the newer versions.

I hope the above makes some sense.  Thank you.
(I know I don't need the feature for such a simple format, but I often work with more complex cases, such as Jr., III., or the like.) =||= Thanks for the detailed description. I was not confused by your report but by our documentation. For example, I couldn't find out how to specify the custom name formatter. It would be very helpful if you could improve the documentation in this regard (e.g. by adding the above steps). Just edit the file directly at https://github.com/JabRef/help.jabref.org/edit/gh-pages/en/CustomExports.md .

The bug should be fixed now in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= > Thanks for the detailed description. I was not confused by your report but by our documentation. For example, I couldn't find out how to specify the custom name formatter. It would be very helpful if you could improve the documentation in this regard (e.g. by adding the above steps). Just edit the file directly at https://github.com/JabRef/help.jabref.org/edit/gh-pages/en/CustomExports.md .
> 
> The bug should be fixed now in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version.

i find the bug in preview with JabRef 5.0--2020-03-06--2e6f433 on windows:
Comment: [Formatter not found: Markdown] 
 =||= "Fix custom name formatters"Fixes #3531.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez04/04/19, 10:49:00 AM
3905.04860Apple Java Extensions still needed?Do they still make any sense?https://developer.apple.com/legacy/library/samplecode/AppleJavaExtensions/Introduction/Intro.htmlAt least with Java 9 they are obsolete and with JavaFX no longer needed. But we still have one or two dialogs who use them.  =||= Refs #3861  =||= So full steam ahead for the JavaFX migration. 🎉  =||= Refs #3421  =||= Remove deprecated awt apple extension"Fixes #3905

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/08/19, 05:13:51 PM
4345.04863Pubmed import should have quality check multiple times."When I imported from Medline today (PMID: 30096135) Jabref immediately went into decline. I know that the problem is related to #4323, but that problem resolved, I would argue that an import into Jabref should be cleaned in any possible way. If the author list is not bibtex conform, please make it so. When there is a standard like Bibtex, we should keep to that and not letting anything to deviate from that standard.

- [+] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists

JabRef 5.0-dev--snapshot--2018-09-13--master--e83680f18
Windows 7 6.1 amd64 
Java 1.8.0_181

Steps to reproduce:

1. open any library in Jabref
2. import 30096135 ( a PLoS article) into the library
3. since the author list after the import does not conform to Bibtex, Jabref stops working. You can only shut down the program. Once you open that library again, it will fail again. I circumwent this using Jabref 4.1 to clean the author list.

<!-- If applicable, excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""@Siedlerchr Would it be much work to have the quality control to run on any medline import and avoid the tiny error since author list contains abbreviated firstnames withoud a dot.  =||= I just added the author normalizer to the cleanup operations after import from medline. So the abbreviated names are now correct with a dot.  Bu I just noticed in the ID 30096135  you gave there is inserted an extra space after the last name when importing

 =||= @Siedlerchr: Today I imported PMID 30836949. The first run of the Author normalizer works, but this entry needs a second run of the normalizer since the abbreviated firstnames are wrongly spaced:

> Nielsen, Sofie K.  D. and Koch, Thomas L. and Hauser, Frank and Garm, Anders and Grimmelikhuijzen, Cornelis J.  P.

That is why I suggested to run it multiple times on the Authors. After a second run it looks like `Nielsen, Sofie K. D. and Koch, Thomas L. and Hauser, Frank and Garm, Anders and Grimmelikhuijzen, Cornelis J. P.` =||= The double spaces between K.  D. and between J.  P. do not survive quotes and codes. Therefore , both times they look  the same, but they are not. I wonder why quotes are edited at all in github? =||= Try adding them in multiple code lines, three backticks before the block and three after  =||= The problem with the double spaces between the author initials should be fixed now as well in the latest master. Refs #4931  =||= "Add author normalizer for medline import"Author names from medline lack the dot by Abbrevatieed authors
e.g. Lahiru S instead of Lahuri S.

Fix tests
Fixes #4345

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/07/19, 06:35:27 PM
4873.04876Error creating new string constants"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version: JabRef 5.0-dev--snapshot--2019-04-08--master--bb7b7213d
Java version: Java 1.8.0_201 (build 1.8.0_201-b09)
SO: Linux 5.0.5-1-default amd64 (openSUSE Tumbleweed 20190403)

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Select <b>Library - Edit string constants  (Ctrl+T)</b>
2. Note that the string constants are not displayed in alphabetical order in the string editor (but these should be ordered, cf. [The string editor](https://help.jabref.org/en/StringEditor))
3. Press the <b>Add new String</b> button and enter a key-value string constant.
4. Press the <b>Save</b> button.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->
<details>
  <summary>Exception Details</summary>
 
![JabRef_20190408_205949](https://user-images.githubusercontent.com/11452236/55768327-164d0b00-5a42-11e9-96c9-b2facdd1b564.png)
</details>


<details>
<summary>Log</summary>

`Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
org.jabref.model.database.KeyCollisionException: A string with that label already exists
	at org.jabref.model.database.BibDatabase.addString(BibDatabase.java:285)
	at org.jabref.model.database.BibDatabase.addStrings(BibDatabase.java:301)
	at org.jabref.gui.metadata.BibtexStringEditorDialogViewModel.save(BibtexStringEditorDialogViewModel.java:75)
	at org.jabref.gui.metadata.BibtexStringEditorDialogView.lambda$new$739(BibtexStringEditorDialogView.java:50)
	at javafx.scene.control.Dialog.impl_setResultAndClose(Dialog.java:1026)
	at javafx.scene.control.DialogPane.lambda$createButton$37(DialogPane.java:777)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8411)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$345(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(GtkApplication.java:211)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:590)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.metadata.BibtexStringEditorAction.execute(BibtexStringEditorAction.java:18)
	at org.jabref.gui.actions.JabRefAction.lambda$new$845(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$599(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$345(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$203(GtkApplication.java:139)
	at java.lang.Thread.run(Unknown Source)
`
</details>""Should be fixed now in the latest master version.
The strings are ordered/added int the same ordering they were in the old dialog. In addtion, you can easily sort them by clicking on the column header.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix saving of Strings"Fix removing of Strings

Fixes #4873

The only problem I now have, I can't reliable detect/prevent dupliacte Strings,
e.g. A User can have a String with label a and content b, and a User can enter a new String a  with content c
The first String would now be overwritten.
@tobiasdiez  Do you have an idea if we can directly prevent the entering of duplicates?

The addAll method simply adds all strings and updates the content, if found. Previously it would always report a duplicate label exception.

Maybe one could check the ID value if it's present or equals.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/14/19, 03:02:18 PM
4844.04887Direct file renaming"
Hello everybody,

Is it possible to add (or to point it out, if i missed it) the function of arbitrary renaming of attached files directly from JabRef? So that it won’t be needed to edit both file name and corresponding entry.

I'm aware of batch rename capabilities of JabRef, but it would be nice just to make a right click on entry and have “rename attached file” option, which would only require to enter new name once.

Thank you""Hi,
@kaiquekk and I would like to work on this issue. =||= Thanks to @kaiquekk and coworkers, this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Tried this feature it on my Win10 x64 with the .jar variant of the snapshot - did not work. It only changes ""file""-string, but doesn't rename the attached file in corresponding folder. =||= @kaiquekk can you please have a look at the problem described by @harpax78 . Thanks! =||= We tried the latest .jar development version snapshot on two different Win10 x64 and the rename worked. Can you tell us more information about the problem?

![before](https://user-images.githubusercontent.com/32721660/56627173-11c84b00-661b-11e9-9bdd-d97463601bb7.png)
![rename](https://user-images.githubusercontent.com/32721660/56627175-13920e80-661b-11e9-8f40-523827c7cd35.png)
![after](https://user-images.githubusercontent.com/32721660/56627176-142aa500-661b-11e9-9167-de199e0d144c.png)
 =||= The problem is still here for me. Maybe that's because I have relative file links in my DB or because I use Directory Opus instead of default Win File Explorer. =||= @harpax78 Could it be that the file is open in another application (e.g. in a PDF reader or your file explorer)? In this case, we cannot rename the file because the other application blocks it. Could you please test it with just having JabRef open and nothing else. Thanks. =||= Well, I killed processes of Firefox and Directory Opus. Couldn't find any background processes for any of my PDF viewers, disabled Kaspersky. Still unable to rename file itself. =||= Is there anything logged in the event log (check at Help -> View event log)? =||= Opening: 'D:\LIBRARY 2019-04-27\#LIBRARY\NewLib.bib'
Files opened: 1
Opening: D:\LIBRARY 2019-04-27\#LIBRARY\NewLib.bib
Opened library 'D:\LIBRARY 2019-04-27\#LIBRARY\NewLib.bib' with 3821 entries.
Can only load style files: Preview
Preview style changed to: Preview
Renaming Files failed
java.nio.file.NoSuchFileException: Library I.Data\a099.PDF
	at sun.nio.fs.WindowsException.translateToIOException(Unknown Source)
	at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
	at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
	at sun.nio.fs.WindowsFileCopy.move(Unknown Source)
	at sun.nio.fs.WindowsFileSystemProvider.move(Unknown Source)
	at java.nio.file.Files.move(Unknown Source)
	at org.jabref.logic.util.io.FileUtil.renameFileWithException(FileUtil.java:211)
	at org.jabref.logic.util.io.FileUtil.renameFile(FileUtil.java:195)
	at org.jabref.logic.util.io.FileUtil.renameFile(FileUtil.java:180)
	at org.jabref.gui.fieldeditors.LinkedFileViewModel.lambda$renameFile$889(LinkedFileViewModel.java:365)
	at java.util.Optional.ifPresent(Unknown Source)
	at org.jabref.gui.fieldeditors.LinkedFileViewModel.renameFile(LinkedFileViewModel.java:362)
	at org.jabref.gui.fieldeditors.LinkedFilesEditor.lambda$createContextMenuForFile$934(LinkedFilesEditor.java:226)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$343(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$358(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$152(WinApplication.java:177)
	at java.lang.Thread.run(Unknown Source)
 =||= Ah... that might be helpful ;-)
Can you please also provide us the information what was the full path to the file, what was the original file name and to which name you wanted to rename?

... but your guess _""Maybe that's because I have relative file links in my DB""_ might be indeed an aspect here... =||= I could partly reproduce this.  Windwos 10 here 
1. Set main file directory in options Preferences. 
2. Add PDF file in that directory to bib entry  `Zhou2002 - Named Entity Recognition Using an HMM Based Chunk Tagger.pdf`
3. Rename file 
4. The file is renamed in the GUI but not on disk
5. Fhe old file still exists on disk
I get the following error.
```

14:13:22.291 [JavaFX Application Thread] ERROR org.jabref.logic.util.io.FileUtil - Renaming Files failed - java.nio.file.NoSuchFileException: Zhou2002 - Named Entity Recognition Using an HMM Based Chunk Tagger.pdf
	at sun.nio.fs.WindowsException.translateToIOException(Unknown Source)
	at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
	at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
	at sun.nio.fs.WindowsFileCopy.move(Unknown Source) 

``` =||= > 
> 
> Ah... that might be helpful ;-)
> Can you please also provide us the information what was the full path to the file, what was the original file name and to which name you wanted to rename?
> 
> ... but your guess _""Maybe that's because I have relative file links in my DB""_ might be indeed an aspect here...

The path is following: D:\LIBRARY 2019-04-27\#LIBRARY\Library I.Data
There is a ""\"" before the ""#"" - I don't know why it's not shown in the final version of the post.

Original name: a099.pdf
Target name: test-rename.pdf =||= > 
> 
> I could partly reproduce this. Windwos 10 here
> 
>     1. Set main file directory in options Preferences.
> 
>     2. Add PDF file in that directory to bib entry  `Zhou2002 - Named Entity Recognition Using an HMM Based Chunk Tagger.pdf`
> 
>     3. Rename file
> 
>     4. The file is renamed in the GUI but not on disk
> 
>     5. Fhe old file still exists on disk
>        I get the following error.
> 
> 
> ```
> 
> 14:13:22.291 [JavaFX Application Thread] ERROR org.jabref.logic.util.io.FileUtil - Renaming Files failed - java.nio.file.NoSuchFileException: Zhou2002 - Named Entity Recognition Using an HMM Based Chunk Tagger.pdf
> 	at sun.nio.fs.WindowsException.translateToIOException(Unknown Source)
> 	at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
> 	at sun.nio.fs.WindowsException.rethrowAsIOException(Unknown Source)
> 	at sun.nio.fs.WindowsFileCopy.move(Unknown Source) 
> ```

Sounds pretty much the same. =||= Just for reference my path was C:\Users\<username>\Documents\\_JABREFTEMP  =||= Thanks to   @matthiasgeiger  the remaining problems should be fixed now in the latest master. =||= Everything works. Thank you guys! =||= "Add option for direct attached file renaming"Add option on the Linked File Editor context menu to directly rename an entry's attached file. The option opens a dialog with a textfield that allows to change the name or the path of the attached file.

![filerename](https://user-images.githubusercontent.com/32721660/56101080-e47eed00-5ef6-11e9-810a-a3d5222834c1.png)
![filerenamedialog](https://user-images.githubusercontent.com/32721660/56101081-e6e14700-5ef6-11e9-8ff1-ab601ffef01f.png)

This PR fixes #4844

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Kaique Komatakaiquekk04/17/19, 10:04:20 PM
4579.04896Changing column width in JabRef 5.0 prevents opening 4.3.1"JabRef version 5.0 and 4.3.1

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Open JabRef 5.0 and add or change at least one of the column widths in _Preferences -> Entry table columns_.
2. Save preferences.
3. Open JabRef 4.3.1.
4. Open JabRef 4.3.1 Preferences window.

**Expected behavior:** the preferences window in JabRef 4.3.1 opens.

**Actual behavior:** the preferences window in JabRef 4.3.1 does not open. An error log in my terminal points out that every column width for the main table is saved in an unknown or wrong format (e.g ""100.0"", ""32.0"" etc).

**Workaround:** open JabRef 5.0, delete all entries in Entry table columns, open JabRef 4.3.1 again and the Preferences should work.

**Why it matters:** I've been testing version 5.0, but I still face some problems that force me to use version 4.3.1 when doing actual work. This bug makes it impossible to use both versions, unless there is a way to separate their preferences that I don't know about.

**tl;dr:** JabRef 5 treats the column width values of the main table as floats, JabRef < 5 treats them as integers. This makes opening the preferences in older JabRef after editing them in new JabRef impossible.""You could export your preferences or use the memory stick mode =||= I just found out about both of these features. I don't know what to make of this incompatibility, though. Maybe the major version change from 4 to 5 justifies it... =||= Due to lack of resources (aka developers) we can usually not provide backwards compatibility. Especially with the transition of the UI to JavaFX we can't avoid breaking changes somewhere. 
We welcome every Java developer. 
And of course we rely on feedback from users, if things work properly on all platforms. 

You can export your preferences, change the values to integer and import them back in.
 =||= In order to import preferences in JabRef 4.3.1, I'd need to be able to open the Preferences window, which I can't do if the current values are already floats. What I think would work is changing the values in `~/.java/.userPrefs/org/jabref/prefs.xml` (I'm on Linux). =||= While in general we don't have the resources to think too much about backwards migration, here, a bit of work on our side is probably the best solution. We just need to convert the double column widths returned by JavaFX to integers before saving them in the preferences. Not much work and improved user experience. =||= JabRef 5.0-dev--snapshot--2019-01-22--master--05f3350cc
Linux 4.15.0-43-generic amd64 
Java 1.8.0_201

I'm in the same situation: 4.3.1 for serious work, 5 for testing.  I can't open ""preferences "" in 4.3.1 any longer.

I see another problem that is probably related to the above issue.  In 5, I can go to preferences and change the column sequence and spacing (manually or update to current), but my changes are never saved. =||= Hi the column widths is now saved when you resize them in the maintable (5.x).
Should also be applied after new start of JabRef  =||= Confirmed fix.  Thank you! =||= An ugly workaround for this is to [reset preferences](http://help.jabref.org/en/CommandLine#reset-preferences--d-key) using the command line. =||= This is now fixed in the latest master version. Meaning that the latest master from now on stores the column widths as integers again and therefore older JabRef versions can access the prefs again.,

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Store column widths as integer"Fixes #4579

Store column widths as integer 
<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/18/19, 08:52:18 PM
2419.04910Add Group - dialog: width is to small for text/font"I am using JabRef 3.8 (linux 4.9.0-towo.1-siduction-686 i386 Java 1.8.0_111) on Debian GNU/Linux _unstable_ (Siduction Linux) with XFCE as desktop environment. The version of the deb-package is `3.8+ds-2`.

The ""Add Group"" dialog has a fixed width (what is a bug for itself) and it is to small to show all text. Please see the screenshot and look at ""Hirarchical context"".

![jab1](https://cloud.githubusercontent.com/assets/11861496/21419949/164492b4-c82b-11e6-8fda-48b34d76d459.png)

My appearance settings look like this

![japb2](https://cloud.githubusercontent.com/assets/11861496/21419956/23cf5752-c82b-11e6-813a-c28d8475757d.png)

I can not say which font is used in that dialog. I haven't modified any font settings in XFCE.

I first discussed that topic in the [Forum](http://discourse.jabref.org/t/add-group-width-of-the-dialog-to-smal/385) where I was told to open a bug report here.""Just again verified on my windows machine: Not a problem here - neither for standard windows look-and-feel, nor for `MetalLookAndFeel` - seems to be dependent on Linux - or even a more specific problem. =||= I agree and think the same that it depends on the used desktop environment or window manager.

But I think at this point the view direction should be modified. JabRef use a plattform independent programming language. But the GUI (is it swing?) is used a way that it break this independency.

I would recommend a two-point solution.

1. Make the dialog resizable like the other dialogs (e.g. Preferences), too.
2. Make the text in the dialog wrapping automaticly.

btw: The Preference dialog doesn't wrap text, too. Does this behaviour depend on Swing? I am wondering that it is not default. =||= `JLabel`, which is the standard Swing component for this, does not wrap texts which are too long. =||= I see. Then it is a ""bug"" there. But it is oracle and it would waste of time to open a bug report about that.

Alternativly you could cut the strings in that two JLabels. It is to much. Add the extra (explaining) text into tool tips. =||= JavaFX?
 =||= An easie solution would be to make the dialog itself resizable. =||= Part of the problem is fixed in 5.* dev version. All strings (in english and german) are completly fit to the dialog.

But the dialog itself is not resizable. =||= The dialog needs to be converted to javafx as well. Tracked in #3861  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Make Group dialog resizable"Fixes #2419

Allow resizing of the Edit/Add Group dialog:
![grafik](https://user-images.githubusercontent.com/320228/56512272-29c2a080-652f-11e9-8610-c4d4ff7854da.png)


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/22/19, 09:04:24 PM
4911.04917Borderless program launch under Linux Mint"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.0-dev--snapshot--2019-04-20--master--e63bc21ab
Linux 4.15.0-47-generic amd64 
Java 1.8.0_191


- [ x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Launch Jabref 5.0 dev from a shell script:
```
#!/bin/bash
# development snapshot
java -jar /home/dom/Dropbox/bin/JabRef--master--latest.jar

```
2. the program opens and fills the whole screen with no window bars.  One can minimize the JabRef display but cannot change the size of the display.

3. Going to a terminal and typing the CLI command
```
java -jar /home/dom/Dropbox/bin/JabRef--master--latest.jar
```
the program starts with window borders, but with all options reverted to default (I think).

After this, the behaviour described in 2. doesn't happen for a couple of launches, and then it reverts to the borderless behaviour again.

4. While there was a border and things seemed okay, I went to Options and got an uncaught exception error

![image](https://user-images.githubusercontent.com/762246/56553117-94cda080-654a-11e9-94d7-802a3614195f.png)

```
java.lang.NegativeArraySizeException
	at org.jabref.gui.preferences.TableColumnsTab.setValues(TableColumnsTab.java:319)
	at org.jabref.gui.preferences.PreferencesDialog.setValues(PreferencesDialog.java:256)
	at org.jabref.gui.preferences.PreferencesDialog.construct(PreferencesDialog.java:181)
	at org.jabref.gui.preferences.PreferencesDialog.<init>(PreferencesDialog.java:105)
	at org.jabref.gui.actions.ShowPreferencesAction.execute(ShowPreferencesAction.java:19)
	at org.jabref.gui.actions.JabRefAction.lambda$new$942(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$6(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$5(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)

```


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
Opening: /home/dom/Dropbox/localtexmf/bibtex/bib/biblio4-utf8.bib
Preview style changed to: Springer - Humanities (author-date)
Copied version to clipboard
Copied version to clipboard
  ```
</details>""I was able to partly reproduce this, I enabled the extra File columns in the options and after a restart I am getting the same same error. The borderless thing is another issue I think.
 =||= The bug with opening the preferences should be fixed now in the next build. It was coming from the ""Enable extra columns"" in the Table Column preferences tab, I submitted a hotfix for this problem.
The preferences tab will be redesigned soon.

The border less thing is mysterious but might have been somehow related.
Please report back if it's working =||= "Quick fix for error when opening preferences"Fixes #4911 

This is just a hotfix to make the preferences dialog working again.
I will create another PR for converting the TableColunns preferences tab to proper MVVM structure with fxml and a new improved layout.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr04/23/19, 04:49:12 PM
4905.04918"Error when opening a bibtex file with a entry containing and ""id"" field""If the bibtex file contains a field which is named id, then the corresponding file is not read (nothing happens). If run from the command-line, then Jabref is not starting.

Tested on Jabref 4.3.1

Sample file :
```
@article{a,
	author = {John Doe},
	id = {a},
	journal = {X},
	number = {8},
	pages = {1--2},
	title = {Y},
	volume = {1},
	year = {2010}
}
```
[sample.zip](https://github.com/JabRef/jabref/files/3100969/sample.zip)
""Hi, the bibtex field 'id ' is a reseverd field by JabRef and JabRef should show an appropiate error message on opening

When I open the file via drag and drop in JabRef I get an exception in the Sytem.err stream on the console.
`Java Messsge:The field name 'id' is reserved`
When I selected File-> Open Database, I get the Exception dialog.

IllegalArgumentException is a RuntimeException and therefore unchecked and in our case seems to be caught by the JVM/JavaFX runtime.

BibEntry.java
setField(.....)
```
 if (BibEntry.ID_FIELD.equals(fieldName)) {
            throw new IllegalArgumentException(""The field name '"" + name + ""' is reserved"");
        }

``` =||= There is no reason to throw an error when the id field is present. The internal id of the entry is stored in a separate variable:
https://github.com/JabRef/jabref/blob/1d4e2d1ad254a32a1444e0515a8bfdef1a812a8c/src/main/java/org/jabref/model/entry/BibEntry.java#L61 =||= Thanks to @CaptainDaVinci this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fixes throwing an exception when 'id' field is present in bib file"Fixes #4905

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci04/24/19, 02:07:57 PM
4864.04931AuthorList parse adds extra space if author middlename is abbrevatied without dot"Importing the PubMed entry with the Id gives me a bunch of names.
However in e26d9ab9a7e47b2818c8eafd2e08de5808d6ce98 I added a normalize names formatter to add dots to the abbrevated names.

However, the Authorlist.parse method adds an extra space between the first and last name of the last author.
`N.[space][space]Henriette`
```java
Author{firstPart='N.  Henriette', firstAbbr='N. H.', vonPart='null', lastPart='Uhlenhaut', jrPart='null'}
```

Input entry to the formatter:
```
@article{,
  author = {Dyar, Kenneth Allen and Hubert, Michaël Jean and Mir, Ashfaq Ali and Ciciliot, Stefano and Lutter, Dominik and Greulich, Franziska and Quagliarini, Fabiana and Kleinert, Maximilian and Fischer, Katrin and Eichmann, Thomas Oliver and Wright, Lauren Emily and Peña Paz, Marcia Ivonne and Casarin, Alberto and Pertegato, Vanessa and Romanello, Vanina and Albiero, Mattia and Mazzucco, Sara and Rizzuto, Rosario and Salviati, Leonardo and Biolo, Gianni and Blaauw, Bert and Schiaffino, Stefano and Uhlenhaut, N Henriette},
}
```

Workaround is to call the NormalizeNames formatter again, then the space is removed


Entry preview in import is correct, so the error is the parser:
![grafik](https://user-images.githubusercontent.com/320228/55688817-75951780-597d-11e9-96b2-2851890a24a5.png)""Not the last author is affected, but the problem seems to be caused by the quite special format of this particular name `Uhlenhaut, N Henriette`.

The single character without dot as the first firstname causes problems...  =||= @matthiasgeiger  is right. I wrote a quick test to check:
```
        Author author = AuthorList.parse(""Uhlenhaut, N Henriette"").getAuthor(0);
        author.getLastFirst(false) 
```
Results in `Uhlenhaut, N.[space][space]Henriette`


 =||= "Improve author parsing"Fixes #4864. The author class added an additional space when converting ""A O"" to the dotted version ""A. O."".

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez04/30/19, 06:52:34 AM
4932.04935Bibliography cannot be updated"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 4.3.1 / 5.0-dev <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... --> Ubuntu 18.04

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When updating the bibliography in LibreOffice Writer I got an error (see below). It is possible to add references to the text, but not to update the bibliography.

I would very much appreciate if you can look into that. Thanks!

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.NullPointerException
	at org.jabref.logic.openoffice.OOBibStyle.getCitationMarkerField(OOBibStyle.java:720)
	at org.jabref.logic.openoffice.OOBibStyle.getCitationMarker(OOBibStyle.java:543)
	at org.jabref.gui.openoffice.OOBibBase.refreshCiteMarkersInternal(OOBibBase.java:697)
	at org.jabref.gui.openoffice.OOBibBase.refreshCiteMarkers(OOBibBase.java:440)
	at org.jabref.gui.openoffice.OpenOfficePanel.lambda$initPanel$608(OpenOfficePanel.java:223)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8413)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$5(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)
  ```
</details>""Hi,
thanks for the bug report. 
Do you use any custom style (if yes, could you please upload it here, just add the extension .txt)
And do you use bibtex or biblatex mode?  =||= Thank you for the quick response.

I use Bibtex mode (default) with the following style file.

[APA6_en.txt](https://github.com/JabRef/jabref/files/3130693/APA6_en.txt)
 =||= Maybe it doesn't matter, but what I get in the console is `[JavaFX Application Thread] ERROR org.jabref.logic.citationstyle.CitationStyle - Can only load style files: Preview`. =||= I found a way to reproduce the error message. The problem is that you have a reference to an entry in the library which is no longer there
e.g. Insert citation `Nie et al. [2017] ` with bibtexkey `Nie2017`. If you now remove this entry from your library it will lead to the error.

I prepared a fix.  In a couple of minutes you can try out this version:
https://builds.jabref.org/ooLogging/

To identify the culprit an error message will the shown which shows the OO reference mark of the bibtex entry =||= Perfect! When I add the missing entries, everythins is back to normal. The comment with the missing reference mark is very helpful. Thank you! =||= @ureber  Thanks for the feedback, the fix is now also merged, so it will be also available in the latest master as well in a couple of minutes. =||= "Throw BibEntryNotFound exception in case entry is no longer present "Fixes #4932 

When an entry got removed a NPE complaining about an empty database was thrown because of some weird UnkownBibTexEntry thing.
Now the correct BibEntryNotFound  Exception is thrown showing the problematic reference mark

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/01/19, 12:30:15 PM
4940.04943Open recent library command yields many IllegalStateExceptions"When executed, the menu item `File` -> `Recent libraries` -> `mylibrary.bib` will produce a giant stack of `java.lang.IllegalStateException` dialog windows. However, after closing all these dialog windows, the library `mylibrary.bib` does seem to open correctly. Full stack trace below.

JabRef 5.0-dev--snapshot--2019-05-01--master--f1b4b5be3
Mac OS X 10.14.4 x86_64 
Java 1.8.0_212

```java.lang.IllegalStateException: This operation is permitted on the event thread only; currentThread = JabRef CachedThreadPool
	at com.sun.glass.ui.Application.checkEventThread(Application.java:443)
	at com.sun.glass.ui.MenuItem.<init>(MenuItem.java:64)
	at com.sun.glass.ui.Application.createMenuItem(Application.java:619)
	at com.sun.glass.ui.Application.createMenuItem(Application.java:614)
	at com.sun.glass.ui.Application.createMenuItem(Application.java:609)
	at com.sun.javafx.tk.quantum.GlassSystemMenu.insertMenuItem(GlassSystemMenu.java:251)
	at com.sun.javafx.tk.quantum.GlassSystemMenu.lambda$insertMenu$345(GlassSystemMenu.java:169)
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329)
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73)
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233)
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482)
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541)
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205)
	at javafx.collections.ModifiableObservableListBase.add(ModifiableObservableListBase.java:155)
	at com.sun.javafx.scene.control.GlobalMenuAdapter.insertItem(GlobalMenuAdapter.java:134)
	at com.sun.javafx.scene.control.GlobalMenuAdapter.access$100(GlobalMenuAdapter.java:54)
	at com.sun.javafx.scene.control.GlobalMenuAdapter$2.onChanged(GlobalMenuAdapter.java:106)
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(ListListenerHelper.java:329)
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73)
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233)
	at javafx.collections.ListChangeBuilder.commit(ListChangeBuilder.java:482)
	at javafx.collections.ListChangeBuilder.endChange(ListChangeBuilder.java:541)
	at javafx.collections.ObservableListBase.endChange(ObservableListBase.java:205)
	at javafx.collections.ModifiableObservableListBase.add(ModifiableObservableListBase.java:155)
	at java.util.AbstractList.add(AbstractList.java:108)
	at org.jabref.gui.menus.FileHistoryMenu.addItem(FileHistoryMenu.java:58)
	at org.jabref.gui.menus.FileHistoryMenu.setItems(FileHistoryMenu.java:50)
	at org.jabref.gui.menus.FileHistoryMenu.newFile(FileHistoryMenu.java:43)
	at org.jabref.gui.importer.actions.OpenDatabaseAction.openFiles(OpenDatabaseAction.java:168)
	at org.jabref.gui.importer.actions.OpenDatabaseAction.openFile(OpenDatabaseAction.java:119)
	at org.jabref.gui.menus.FileHistoryMenu.lambda$openFile$398(FileHistoryMenu.java:74)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
```""Hm, this seems to be some weird mac issue again. On Windows 10 this is not a problem
Edit// Looks like a threading issue =||= @kbarros  I think I found the issue. Could you please test this version here and report back if it works for you? https://builds.jabref.org/fixFileHistoryMac/ =||= Should be fixed now in master as well.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= I can confirm that this new version works for me.

JabRef 5.0-dev--snapshot--2019-05-03--master--99d99cf02
Mac OS X 10.14.4 x86_64 
Java 1.8.0_212 =||= "Fix threading issue with opening from recent libraries"Fixes #4940

On Windows 10 I could not reproduce the original exception, but I'm very convinced that I found the threading culprit

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/03/19, 11:17:10 AM
4490.04962 Looking up Full Text Document of multiple entries simultaneously."Hello.

JabRef_windows-x64_5_0-dev--snapshot--2018-11-15--master--81f15e9e6.exe
Windows 7 x64

The option ""Quality -> Lookup Full Text Document"" doesn't work if you have several entries selected, it doesn't produce any result, it only works if you go one by one.

It would be nice to be able to let Jabref find and download all possible entries at once.


PD: I've tried several times and some of them it pops up a window to download the results, but most often nothing happens.""@tobiasdiez I can take a look at this, since I was already in this class for issue #4489, and noticed the same behavior. =||= Sure, feel free to work on this issue! =||= Is there any option to download all the papers selected asynchronously? =||= Thanks to @nmancus1  this issue is no fixed in the latest master.


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "fix-for-issue-4490: Download fulltext for multiple entriesFixes #4490 Prevent KeyCollion with empty urlsNick Mancusonmancus105/11/19, 02:59:28 PM
4886.04964The ordering of columns in the main table was disabled?"Steps to reproduce the behavior:

1) Open a bib-file in JabRef. 
2) Click on the column headers in the main table and try to sort by any of the columns
3) This functionality seems to be disabled. 

How can I enable it again? Is it a bug? (Event log window is empty).

JabRef 5.0-dev--snapshot--2019-04-14--master--939cf59c2
Linux 5.0.7-1-default amd64 
Java 1.8.0_201 (build 1.8.0_201-b09)""Thanks for the report, that is definitely a regression bug. It was working fine a few versions ago, if I remember correctly.
Edit// confirmed on Windows 10 with 47f43ca63616f04bfa780c9a8d83143d919d1f80
 tJabRef 5.0-dev
Windows 10 10.0 amd64 
Java 1.8.0_202 =||= @tobiasdiez  I found the issue: 
In the maintable, if I remove the bindings wrapper it works again
```
 this.setItems(BindingsHelper.forUI(model.getEntriesFilteredAndSorted()));
        // Enable sorting
        model.getEntriesFilteredAndSorted().comparatorProperty().bind(this.comparatorProperty());

``` =||= The issue is not solved in the latest snapshot of today (`2019-05-06 c168c4978`

). =||= @Siedlerchr, @tobiasdiez What is the problem with this, why is the correction not yet applied? It renders my working with Jabref very difficult. The version snapshot--2019-05-10--master--751c5b5e7 does not have sorting back. =||= Please be patient!  We understand that this is an important issue. As long as the issue is not closed it's not fixed. No need to constantly question it.  Come on, you know the rules.
While the fix looks simple it might have other consequences which we need to check. But I will look at it in detail now. =||= Should be fixe now in the latest master 3baa6bd 

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Great, it works! Thanks. =||= "Remove UI ThreadList for maintable as it prevents sorting in maintable"Fixes #4886

Renenables sorting.

Tried a bit around and could not find any side issue so far.


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/11/19, 03:40:00 PM
4913.04965Downloads from the arXiv are marked as HTML files instead of PDF"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version: latest <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... --> Windows

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Import an entry from the arXiv, say `1207.0408v1` (using Library > New Entry > ArXiv)
2. Go to File tab, right-click link, and select Download
3. The file is downloaded successfully, but has file extension `html` instead of `pdf`. Renaming the file results in a readable pdf through.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix downloading pdf produces html as extension"If we already have a filetype we use that instead of relying on the autodetection


Fixes #4913

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/18/19, 03:35:03 PM
4827.04966Too big error message"I tried connect to MySQL server. And I see the next error message. I think it's too big and we can make it shorter.
<img width=""1440"" alt=""Screenshot 2019-03-30 at 00 32 43"" src=""https://user-images.githubusercontent.com/15236829/55264218-af329800-5284-11e9-8179-b7fe7436c76a.png"">""Probably direclty coming from the MYSQl driver =||= @Ali96kz  Maybe a way to fix this, because as @Siedlerchr said it is probably coming from the MySQL Driver directly, there could be a fixed width for the `Exception Details` popup and then wrap the text.  There could probably be a fixed height as well and have a scroll pane so that if it is this long, the user can scroll instead of it being taller than the screen itself. =||= I tried reproducing the error and this is the popup I get. It looks as expected to me.
![notimezonemapping](https://user-images.githubusercontent.com/18674760/56378488-78a9c680-620d-11e9-900e-d701bbaf6975.png)
 =||= Thanks to  @dimmonn  this issue is now fixed in the latest master!


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= > We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.


tested the build, looks ok =||= "Too big error message #4827" Fixes #4827

checking if the error belongs to sql state 01S00 then it gets shortened to the first dot.

ex. 
this:  **The server time zone value 'MSK' is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.**

becomes: 
**The server time zone value 'MSK' is unrecognized or represents more than one time zone**

if there is no dot in error string it remains the same length

<img width=""596"" alt=""Screenshot at May 12 09-08-29"" src=""https://user-images.githubusercontent.com/6670698/57578970-92010400-7495-11e9-8af9-8065f468010a.png"">"dimadimmonn05/18/19, 03:08:44 PM
3599.04975Disable extended help in the search field"JabRef version <4.1> on <Linux 4.4.103-18.41-default amd64, Java 1.8.0_151>

If I start searching a database, an extended help window appears telling me that it would be possible to modify my search expression. This is rather boring when using a large database. Shouldn't there be a way to disable this feature?

Steps to reproduce:

1.   Open an existing database.
2.   Begin typing into the search window.
3.   Unwanted help appears.""I think, this warning message can be completely removed. =||= I agree. More experienced users will not need it. Less experienced users may have a look at the documentation or even proceed by trial and error. =||= I could take a look at this. =||= What kind of help is meant here? If I start searching I don't see any additonal help messages. =||= It pops even up before I start typing. Just move the cursor over the search field. =||= Maybe he is refering to the tooltip? =||= My version does not show such a tooltip, but I remeber it...wierd =||= It might be meant as a tooltip but it is formatted in a different way. Background in black, smaller fonts
![tooltip](https://user-images.githubusercontent.com/18591488/38095285-5d10e344-3370-11e8-8e18-a4dd6127da16.png)
. =||= Why don't I see your search term? This should only be shown when there is a search term in the search field. Not sure if we should remove such an information. Problem is for me it is not shown or only for a fraction of a second at all... =||= You don't see the search term because I deleted it. The amount of bothering depends on your machine's performance. My watch says it is shown for five seconds or so. =||= @JabRef/developers Does this show up for any of you? I cannot even see the message 😄  =||= I never saw this message. Maybe, because I am using <kbd>Ctrl</kbd>+<kbd>F</kbd> =||= I reproduced it. The message comes out after hitting ""Enter"" with blank input. (For just 1 second, I see)

<img src=https://raw.githubusercontent.com/upupming/paste/master/oss/3599.gif>
<img src=""https://raw.githubusercontent.com/upupming/paste/master/img/20180710215904.png""/>

Shall we delete this message? =||= Hey, just to be sure, is the goal to fully remove the tooltip? I could work on it. =||= Yes, I guess it can be removed completely.  =||= Hi, i'm using Jabref since i wrote my diploma-thesis back in 2010, thanks for all of your effort put in. Im following the development-discussion since about one and a half years.
From a user perspective, deactivating the tooltip would be a pity. I agree, experienced users are annoyed, but without a tooltip I wouldn't have ever thought of searching for ""editor=whoever"".
Is there a chance, instead of completly disabling the tooltip, offering an option in the preferences ""Disable extended help options?"" This extended help could probably used in other places too, making Jabref even more accessible for Jabref-Newbies. =||= @MartinKarim what's your take on this? =||= Thanks to @calixtus this is now implemented in the latest development version: you can disable the tooltip in Preferences > General. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= You're welcome. Works just fine. Did no code for years, this was fun. =||= @calixtus Feel free to contribute on other issues or to report any errors you encounter. And thanks for using JabRef  =||= "Extended Hints - Alternative to #4971"fixes #3599 - conflicts with #4971 
I realized, talking about changes without presenting a possible solution is just lame.

What do you think?

Sorry about these ugly commit-msgs. I promise improvement.

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus05/18/19, 06:15:34 PM
4977.04980Different font weights changing entry type"JabRef 5.0-dev--snapshot--2019-05-14--master--c754a790d
Windows 10 10.0 amd64 
Java 1.8.0_212

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Font weight of entry-type-selection-dropdown-menu depending on clicking on the label or the small pen on the left.
Always reproduceable.

<img width=""95"" alt=""fontregular"" src=""https://user-images.githubusercontent.com/50491877/57947809-3349e900-78e0-11e9-9d5a-612b742bcdc1.png""> <img width=""114"" alt=""fontbold"" src=""https://user-images.githubusercontent.com/50491877/57947810-347b1600-78e0-11e9-9400-aa9319fd5158.png"">
left: clicking on the pen - right: clicking on the label
"Thanks to @davidemdot this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Resize different fonts changing entry type"Now JabRef uses the same typography for the two menus to change entry type (and for the tooltip).

It fixes #4977.

![entry_type_menu](https://user-images.githubusercontent.com/12954316/57971729-07873b80-7992-11e9-84cd-a92f8ea28444.png)

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot05/19/19, 07:22:15 PM
4997.04999IEEXplore Online Fetcher not working"Online fetcher not generating results. Problem started 3 weeks back, prior to that it was working perfect. In the beginning, the error was shown as internet connection issue. After updating the JabRef with latest version, the search keeps processing, with no result. The internet is connected with proxy hostname and authentication already given in the preferences.
![screen](https://user-images.githubusercontent.com/50617012/58316944-633e4280-7e32-11e9-8485-11b9bfb55537.png)""Thanks for your report! This was indeed a bug in the IEEE fetcher. In addtion, if any fetcher throws an error it will be displayed in a dialog now.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "fix IEE fetcher"Fixes #4997 

add exception dialog on import fail

Check if we have keywords field present in json

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/26/19, 01:38:32 PM
5003.05005Missing icon in macOS Launchpad"JabRef version 4.3.1 on macOS 10.14.5

Apple's generic app icon is displayed instead of JabRef's icon in macOS Launchpad:
<img width=""150"" alt=""screenshot"" src=""https://user-images.githubusercontent.com/9950090/58429283-b1a74780-80a5-11e9-9e77-33381520e823.png"">
The icon is displayed normally in the dock – depending on the required resolution.

I had to recreate the app.icns file because it is partially corrupted. Could the updated file be added to the pre-build dmg-files?
[app.icns.zip](https://github.com/JabRef/jabref/files/3224351/app.icns.zip)""Thank you for reporting this issue. The icon file was indeed corrupted. I replaecd it and it should be avaiable in the latest master version now.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Commit fixed the corrupted icon. Checked with `JabRef_macos_5_0-dev--snapshot--2019-05-27--master--0a4210e2a.dmg`. =||= "Update mac icon and install4j to 7.0.11"Fixes #5003 

icon file was indeed corrupt

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr05/27/19, 04:36:00 PM
4991.05024Submenu to select push-application"Since the migration to JavaFX, i saw no way to change the push-application. There were some pull-request in the past, trying to fix this, but they all were forgotten undone. So this is my shot, trying to implement a very simple way to change the push-application.

fixes #674 closes #3942 and closes #4368 closes #5024

~~(Apparently, I forgot the fetch before I opened the new branch. Please ignore the old superfluous commits, my changes start with [95f8668](https://github.com/JabRef/jabref/pull/4991/commits/95f86688d18e9081a890b9a0f920e65e72168b3f)~~

~~Attention: It's still WIP,  it's not done yet.
The caption of the menu is temporary, there is no l10n, Toolbarbutton is not updated and another small Problem is left, i could not figure out yet and I am hoping for your support: I was not able to change the caption of the PushAppplicationMenuItem, since it's bound somehow to another variable. Do you have any Idea, how i can change this label?~~

<img width=""370"" alt=""tools-push"" src=""https://user-images.githubusercontent.com/50491877/58163345-27657a80-7c84-11e9-8946-d075a0316311.png"">
----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)""Any suggestions for the label of the submenu? Push-application sounds so technical. =||= So, theoretically this would be ready to review now...
If I hadn't found a bug in another place.

<img width=""150"" alt=""button-right-size"" src=""https://user-images.githubusercontent.com/50491877/58192774-db392b00-7cc1-11e9-99f7-ec08321e7709.png""> <img width=""148"" alt=""button-too-small"" src=""https://user-images.githubusercontent.com/50491877/58192366-dcb62380-7cc0-11e9-95dd-ba1e50d0aa63.png"">
left is right size after starting JabRef, right is after changing the PushToApp
The button is shown too small after updating. And I know why.

I use the method configureIconButton in the ActionFactory to unbind and refresh the ToolBarButton. 
Obviously someone cheated, when he ""fixed"" an earlier bug with the iconsize in the entry-editor... ;-)

<img width=""313"" alt=""icon-cheater"" src=""https://user-images.githubusercontent.com/50491877/58192547-433b4180-7cc1-11e9-9a01-d67a7b381952.png"">
 =||= The other Pull Request should fix the button-size-issue. Thats all, im ready to review. =||= Maybe wording for Push applications
Push to External editor? 

Regarding your superfluous commits,if you do a git rebase on the upstream/master (after fetch) then only the new changes should be visible  =||= I think, that didn't work... I stop now rebasing, it's getting out of hand.
The code is the same, i checked twice. =||= One question: Which IDE or Git tool are you using? 
Special stuff like rebasing is very well supported in IntelliJ (I'm also not capable of rebasing using just the command line ;-))

... passend dazu: https://classicprogrammerpaintings.com/post/142586036029/junior-programmer-learns-git-rebase =||= It's IntelliJ IDEA CE. I wanted to make sure, if i pass commits, they are formatted right and I read in the documentation, that you recommend this. But I just start to get used to it. In my early days I used eclipse. I pushed with the commandline tool which is probably the cause for this mess. =||= # [Codecov](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=h1) Report
> Merging [#4991](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=desc) into [master](https://codecov.io/gh/JabRef/jabref/commit/0a4210e2a8aade4e7d542d2edf5dcda91fbb54d2?src=pr&el=desc) will **decrease** coverage by `0.03%`.
> The diff coverage is `0%`.

[![Impacted file tree graph](https://codecov.io/gh/JabRef/jabref/pull/4991/graphs/tree.svg?width=650&token=GoCYT97xQP&height=150&src=pr)](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=tree)

```diff
@@             Coverage Diff              @@
##             master    #4991      +/-   ##
============================================
- Coverage     36.58%   36.54%   -0.04%     
  Complexity     6058     6058              
============================================
  Files          1032     1033       +1     
  Lines         45570    45618      +48     
  Branches       5640     5641       +1     
============================================
  Hits          16670    16670              
- Misses        27600    27648      +48     
  Partials       1300     1300
```


| [Impacted Files](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=tree) | Coverage Δ | Complexity Δ | |
|---|---|---|---|
| [...g/jabref/gui/push/PushToApplicationMenuAction.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9wdXNoL1B1c2hUb0FwcGxpY2F0aW9uTWVudUFjdGlvbi5qYXZh) | `0% <0%> (ø)` | `0 <0> (?)` | |
| [...n/java/org/jabref/gui/preferences/ExternalTab.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9wcmVmZXJlbmNlcy9FeHRlcm5hbFRhYi5qYXZh) | `0% <0%> (ø)` | `0 <0> (ø)` | :arrow_down: |
| [...ain/java/org/jabref/gui/actions/ActionFactory.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9hY3Rpb25zL0FjdGlvbkZhY3RvcnkuamF2YQ==) | `0% <0%> (ø)` | `0 <0> (ø)` | :arrow_down: |
| [src/main/java/org/jabref/gui/JabRefFrame.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9KYWJSZWZGcmFtZS5qYXZh) | `0.16% <0%> (-0.01%)` | `1 <0> (ø)` | |
| [...a/org/jabref/gui/push/PushToApplicationAction.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9wdXNoL1B1c2hUb0FwcGxpY2F0aW9uQWN0aW9uLmphdmE=) | `0% <0%> (ø)` | `0 <0> (ø)` | :arrow_down: |
| [...n/java/org/jabref/gui/actions/StandardActions.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9hY3Rpb25zL1N0YW5kYXJkQWN0aW9ucy5qYXZh) | `0% <0%> (ø)` | `0 <0> (ø)` | :arrow_down: |
| [...org/jabref/gui/push/PushToApplicationsManager.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9wdXNoL1B1c2hUb0FwcGxpY2F0aW9uc01hbmFnZXIuamF2YQ==) | `0% <0%> (ø)` | `0 <0> (ø)` | :arrow_down: |
| [...n/java/org/jabref/gui/entryeditor/EntryEditor.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9lbnRyeWVkaXRvci9FbnRyeUVkaXRvci5qYXZh) | `0% <0%> (ø)` | `0% <0%> (ø)` | :arrow_down: |
| [...java/org/jabref/gui/filelist/AttachFileAction.java](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree#diff-c3JjL21haW4vamF2YS9vcmcvamFicmVmL2d1aS9maWxlbGlzdC9BdHRhY2hGaWxlQWN0aW9uLmphdmE=) | `0% <0%> (ø)` | `0% <0%> (ø)` | :arrow_down: |
| ... and [4 more](https://codecov.io/gh/JabRef/jabref/pull/4991/diff?src=pr&el=tree-more) | |

------

[Continue to review full report at Codecov](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=footer). Last update [0a4210e...236aefb](https://codecov.io/gh/JabRef/jabref/pull/4991?src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments).
 =||= Cleaned up the commit history, the rebase-monster is finally gone.
As @Siedlerchr pointed out a few days ago: ""Nothing git magic can't fix"": I sync'd my local master branch with upstream/master, hard-reset my working-branch history to my last real commit, rebased on master and force-pushed to github. =||= So just one question to help me understand the changes of this a bit better, whenever I change the push application in the tools submenu the icon button toolbar changes to the selected application?

codewise lgtm so far =||= The RadioMenuItems change
* the setting in preferences and
* the Action stored in the Manager

and they reconfigure
* the MenuItem (the text) and
* the ToolBarButton (the icon)

The MenuItem and the ToolBarButton both call the same Action stored in the manager. =||= > Thanks for your contribution. Code-wise the changes look good to me and I've only a few a few suggestions.
> Although its a huge improvement in terms of usability, I'm not sure if the solution to set the push to application through a separate menu entry is intuitive to most users. I would prefer if the application is set in the preferences instead of via a menu item. @JabRef/developers opinions?

Shouldn't be a big deal to put it into the preferences. I'll look into it tonight. I going to create a second pull request for the alternative. =||= > Thanks for your contribution. Code-wise the changes look good to me and I've only a few a few suggestions.
> Although its a huge improvement in terms of usability, I'm not sure if the solution to set the push to application through a separate menu entry is intuitive to most users. I would prefer if the application is set in the preferences instead of via a menu item. @JabRef/developers opinions?

I put an alternative proposal in #5024  =||= "Select push app in preferences"As asked by @tobiasdiez, here is my alternative proposal, this closes #4991 by merging.
fixes #674 closes #3942 and closes #4368

<img width=""242"" alt=""PrefPushToApp"" src=""https://user-images.githubusercontent.com/50491877/58768088-a9637680-8595-11e9-95cb-5a7f2ac16342.png"">

This branch is build up on the other branch, including the other commits, this time by intention.
I hope you like it. Have a good night!

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus06/04/19, 09:44:27 PM
674.05024Add a proper way to set external application for pushing"I searched for 10 minutes how to change the external application for pushing from emacs to vim, when I finally found the drop-down next to the tool bar button.

Please add a proper way of changing this setting through a menu action. I think it's not good style to have an action only available through the tool bar.""What would you suggest to be a proper way?
 =||= I think proper would be either having it within the settings or accessible by menu.

One intuitive way would be adding a menu entry (with a sub menu) right beside `Tools -> Push Entries`. I've looked through this menu several times.

And you're sure there is no other way to set this? Maybe I've just missed it.
 =||= You can edit the preferences file. :-)

I think the idea is that since one (typcially) press the button to push, having the setting exactly there is quite convenient. On the other hand, since most users do not change it continuously one can ask if it is needed. I think an additional dropdown in the preferences tab may make sense. Maybe a submenu below the ""Push entries..."". Let's see who implements it. :-)
 =||= related  #382
 =||= How should this function work, suppose one were to implement it using Actions?

## One action for pushing to each application

### Pro
- ability to configure hotkeys for each application

### Con
- you'd have more than one button and menu entry (one for push to emacs, one for push to vim...), requires some tricks to reduce burden on user (see below)

I think the current implementation partially belongs here, since you have this button with a selectable target application. But as I noted, the menu-way of accessing these actions is broken, since you cannot change the target of the menu action. The canonical way to transfer this to the menu would be a sub menu to select the target application to push to, but this is cumbersome. 

## One push action, select target application in preferences

### Pro
- obvious how to implement button, menu, hotkey
- clear design

### Con
- cumbersome if you are working with multiple applications (actually I used both Vim and Emacs some weeks ago and wanted to insert references in both, but I suppose this is a rarely used feature)

## Configurable push actions

Another approach would be to not have all available applications as possible targets, but to configure explicit targets. This could include Vim twice, but with different parameters.

This would enable using two different instances of Vim, and selectively pushing to each instance from Jabref, while never having to deal with other targets in the UI (only within the preferences.

Since this would reduce the number of targets (to one in most cases), one could have a dedicated button, configurable hotkey, or menu entry, for each target.

### Pro
- reduces number of targets (usually one, more for power users)
- targeting different instances of the same application

### Con
- requires most changes to code base
- unclear how default looks like; if no application is configured initially, the feature would become invisible in the UI
 =||= Screenshot of the dropdown:

![grafik](https://user-images.githubusercontent.com/1366654/35246862-828ac3fa-ffc8-11e7-8d30-e447e54c3df2.png)
 =||= Hello, is anyone working on this currently? If not I would like to take a stab at it. =||= @slyr91 That is great to hear! No one is currently working on this issue and you are very much invited to have a go at it.

You can find some information about JabRef development on these pages https://github.com/JabRef/jabref/wiki  Especially here is some info on how to get started and get JabRef to compile: https://github.com/JabRef/jabref/wiki/Guidelines-for-setting-up-a-local-workspace

When you think you have something ready and want feedback on your code, you can open a pull request and we will review it. =||= @slyr91 Feel free to work on it! 👍
Please base your pull request on the `maintable-beta` branch and not master. We are currently switching to JavaFX for the UI and in the progress made some changes to the menu and toolbar. 

From the solutions @ziggystar proposes in https://github.com/JabRef/jabref/issues/674#issuecomment-175478728, I like ""Configurable push actions"" the most, but ""One push action, select target application in preferences"" is already a good start. =||= Awesome! I will get started on this soon. Give it a good try this weekend. Should I open a pull request with the WIP title?  =||= Thanks to @calixtus this is now implemented in the latest development version. You can select the push to application now in the preferences. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Select push app in preferences"As asked by @tobiasdiez, here is my alternative proposal, this closes #4991 by merging.
fixes #674 closes #3942 and closes #4368

<img width=""242"" alt=""PrefPushToApp"" src=""https://user-images.githubusercontent.com/50491877/58768088-a9637680-8595-11e9-95cb-5a7f2ac16342.png"">

This branch is build up on the other branch, including the other commits, this time by intention.
I hope you like it. Have a good night!

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus06/04/19, 09:44:27 PM
3942.05024[WIP] Add External Application Selection to Preferences"WIP - Add External Application Selection to Preferences

This pull request is in regards to #674. 
This initial commit adds a button to the settings panel for each external application which allows the user to select an application to make default. There is currently a problem with this build where the application will not update the pushToApplicationButton. I believe the issue has something to do with the interaction between javafx and swing components. Also I plan on adding keybinding options as well in the future, it's just taking me a bit of time to familiarize myself with the program between life events. Let me know what you think so far and on the direction I am taking.""This looks like a good start. Nice work!

The button is not updated because such an update mechanism is not yet implemented. The icon is generated from an action (which itself is created in `PushToApplicationButton.getMenuAction`). However, the [Action class](https://github.com/JabRef/jabref/blob/maintable-beta/src/main/java/org/jabref/gui/actions/Action.java) only has static return values. I would propose to follow the example of [controlsfx Action](https://controlsfx.bitbucket.io/org/controlsfx/control/action/Action.html) and replace the getters in the action interface by javafx properties. Then you can use bindings in the adapter class [JabRefAction](https://github.com/JabRef/jabref/blob/maintable-beta/src/main/java/org/jabref/gui/actions/JabRefAction.java) and in this way update the UI if the underlying property is changed. 

@slyr91 do you want to implement these changes or prefer if somebody from the team does it? (I would volunteer but it may take some time). =||= I will definitely give this a solid try. @tobiasdiez I am still learning about the proper procedures on GitHub but if I can implement those changes should I add them to this pull request or to a separate one? =||= Good question. In general, it is better to create a few smaller PRs because that makes reviewing and understanding the code changes easier. Having said this, in this particular case, I think however that the changes are small and localized enough so that you can simply push them to this PR. =||= @slyr91 Will you work on this in the future? =||= @stefan-kolb I definitely will give it a shot soon. I have just been too busy to dive into this. I had finals to deal with and now I am trying to study for a certification so all my free time goes to that. As soon as I am done with that I will be returning to this. =||= I'm getting back into this now and I noticed that the branch this was originally built on, maintainable-beta, is closed. Which branch should I apply these changes and proposed improvements to?  =||= Hi, on the `master` branch please 😄  =||= You probably have to rework your code a bit as recently the preferences dialog was transformed to javaFX as well.  =||= Surpassed by #5024. =||= "Select push app in preferences"As asked by @tobiasdiez, here is my alternative proposal, this closes #4991 by merging.
fixes #674 closes #3942 and closes #4368

<img width=""242"" alt=""PrefPushToApp"" src=""https://user-images.githubusercontent.com/50491877/58768088-a9637680-8595-11e9-95cb-5a7f2ac16342.png"">

This branch is build up on the other branch, including the other commits, this time by intention.
I hope you like it. Have a good night!

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus06/04/19, 09:44:27 PM
4368.05024 WIP Default External Application Push Function"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

This is a new pull request to replace #3942 which address #674 in part. It doesn't have keybindings for the applications but it does allow for changing the default application.


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"I will review the Codacy/PR Quality Review and CI checks and resolve them as soon as I get the chance. =||= Surpassed by #5024. =||= Select push app in preferences"As asked by @tobiasdiez, here is my alternative proposal, this closes #4991 by merging.
fixes #674 closes #3942 and closes #4368

<img width=""242"" alt=""PrefPushToApp"" src=""https://user-images.githubusercontent.com/50491877/58768088-a9637680-8595-11e9-95cb-5a7f2ac16342.png"">

This branch is build up on the other branch, including the other commits, this time by intention.
I hope you like it. Have a good night!

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus06/04/19, 09:44:27 PM
4440.05025Warn on empty entrykey (bibtexkey)"*Small Enhancement*



All `.bib` entries processed by Biber must have a non-empty `entrykey`. Entries without a key, e.g.
```
@Book{,
  author  = {Emma Sigfridsson},
  title   = {El book},
  date    = {2012},
  edition = {6},
}
```
produce an error along the lines of
```
syntax error: found "","", expected one of: number, name (entry  type, key, field, or macro name), end of entry (""}"" or "")"") or quoted string 
```
and the compilation will abort.

`biblatex` with the BibTeX backend will not error on an empty `entrykey`, but the entry can not be cited and will not be added to the bibliography even with `\nocite{*}`.

Classical BibTeX adds entries without key to the bibliography with `\nocite{*}`, but does not allow to cite them. In any way there can only be one entry with an empty entrykey (after all the key must be unique).

Conclusion: Even though empty entry keys are half possible, they don't quite work as expected and I can't imagine any user choosing an empty key on purpose.

**Suggestion** JabRef already warns the user directly in the editor view with a little icon if the `year` field is not a four-digit integer and if it detects journal abbreviations.  It seems like a good idea to also warn the user if they leave the entry key empty.

---

Just to be sure: I tested with JabRef 4.3.1 and did not get an error or a warning about empty keys in the editor view. I also got no report from ""Ctrl+F8"" on the file
```
% Encoding: UTF-8

@Book{,
  author  = {Emma Ryde},
  title   = {El book},
  date    = {2010},
  edition = {1},
}

@Comment{jabref-meta: databaseType:biblatex;}
```
But when I was just playing around with JabRef I saw a message about entrykeys at one point (I can reproduce messages about a key that does not match the automatic pattern, but I could have sworn I also managed to get one about an empty key once, I can't reproduce that one, though), so it seems that some kind of detection is already built-in.

---

*edit*: https://tex.stackexchange.com/q/457685/35864 on TeX.SX started this. The OP had an empty entrykey in a JabRef-generated file and was surprised that Biber would report a syntax error.""I think there is a setting, which enables the Warning of empty bibtexkeys =||= There is a warning about the empty key in the integrity check. However, the warning message is not shown in the entry editor.  =||= Oh, I might have overlooked such an option. I have the *Enforce legal characters in BibTeX keys* option checked, but that does not help with empty keys as far as I can tell (FWIW I don't quite understand what the option does: the quite dangerous `Sig,([fri}{dßä\""o:1998)]` still passes ""Ctrl+F8"" and I get no warning icon, but maybe the option is only about auto-generated keys?). 

Re the integrity check: I might be missing something obvious. But if I open the file I posted above with JabRef in `biblatex` mode and press ""Ctrl+F8"" for the *Integrity check*, I get ""No problems found"". That said, as mentioned above I think I managed to get a similar message once, but I now I can consistently reproduce behaviour where I don't get that message.

 =||= I've been playing around with this issue. Would it be ok to try to help with it? =||= Sure, go ahead! If you need any further help or have questions just ask here or in our gitter chat =||= "Add warning for empty BibTeX keys in entry editor"Added a warning for empty BibTeX keys in entry editor.  Fixes #4440 

A request came in to have the entry editor provide a warning when the BibTeX key field is empty. In order to make the warning icon appear, 2 changes were necessary.

**1 - Added new key value pair to multi map in FieldCheckers:** To check for a valid BibTex key in the entry editor, the FieldCheckers object had the following key - value pair in its multimap

( FieldName.KEY, ValidBibtexKeyChecker object ), where FieldName.KEY is the string ""key"".

When the BibtexKeyEditorViewModel tries to actually run this check, they key it provides to the FieldCheckers instance is BibEntry.KEY_FIELD (""bibtexkey"") instead of FieldName.KEY (""key""). To accommodate for this, BibEntry.KEY_FIELD was added to the FieldCheckers multimap.


**2 - Added null and empty string check in ValidBibtexKeyChecker.checkValue():** Fixing the first issue caused an error to come arise in BibtexKeyGenerator.cleanKey() when called by ValidBibtexKeyChecker.checkValue(). This error was due to null strings being fed into BibtexKeyGenerator.cleanKey(). To fix this, a check for null or zero length strings was added. This check also returned the ""empty BibTex key"" message.


**Note:** an issue with the fix is that while it does create the ""empty BibTeX key"" warning, the ""Invalid BibTeX key"" warning is pushed down. Pictures of this issue are attached.

<img width=""436"" alt=""warningIcon1"" src=""https://user-images.githubusercontent.com/38050737/58768790-6641dd00-856e-11e9-96da-f51c6c79c2a1.png"">

<img width=""420"" alt=""warningIcon2"" src=""https://user-images.githubusercontent.com/38050737/58768794-71950880-856e-11e9-8364-929ece03ec50.png"">


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ms111ds06/09/19, 06:07:06 AM
5019.05034"""Set up general fields"" character check not correct & alphabetical ordering""This is a report from the latest snap built version

Enter options | Set up general fields

Enter a field name that contains a hyphen ""-"". This input is not accepted; the error message does not mention hyphens, however.

In earlier jabref versions fields with a - were still possible to be specified as a general field.""Also, I note that the Tabs are automatically alphabetically ordered - this is unfortunate. =||= Thanks to @yurickyh  and @kaiquekk this issue is now resolved in the latest master.
The snap should be updated automatically (edge). If not. please drop a message so we can trigger a manual build.
https://build.snapcraft.io/user/JabRef/jabref =||= thanks a lot! =||= """"Set up general fields"" character check not correct & alphabetical ordering""

As asked, the character '-' was included on the error message, also we included other characters that were not being mentioned on the message. We tried to remove the character '-' from KEY_ILLEGAL_CHARACTERS and KEY_UNWANTED_CHARACTERS on BibtexKeyGenerator.java, but we did not know if it would be a good idea because it violates some tests.
About the order of the tabs, we removed the alphabetical ordering so now it is following the order defined when the tabs are created on the ""Set up general fields"" option.

![hyphen](https://user-images.githubusercontent.com/32721326/58997611-c2596b00-87d3-11e9-9c02-1aaab904788a.jpg)
![order](https://user-images.githubusercontent.com/32721326/58997612-c2596b00-87d3-11e9-9a63-ba8f79af0fa9.jpg)

This PR fixes #5019.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [X] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [X] Screenshots added in PR description (for bigger UI changes)
- [X] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yurick Hondayurickyh06/07/19, 09:25:32 PM
5043.05048Handling of umlaut while copy and paste of entries"Using `JabRef 5.0-dev--snapshot--2019-05-30--master--ef2ebe165` on Windows 10.

The bib-file is UTF-8 encoded (double checked! with extern editor) and in biblatex style. There are entries with umlauts in the abstract, title, etc.

- On entry has well formated umlauts and they are correctly displayed in JabRef editor and preview window.
- Copy such an entry (Ctrl+C)
- Paste it (Ctrl+V)
- All Umlauts are converted into `�`

Example of such a result (copied from the bib-file)
```
@Misc{Nordhausen2019c,
  author    = {Nordhausen, Thomas and Hirt, Julian},
  title     = {One size does not fit all-systematische Literaturrecherche in Fachdatenbanken. Schritt 6: Entwicklung des Suchstrings},
  date      = {2019},
  language  = {ger},
  doi       = {10.6094/KlinPfleg.5.21},
  abstract  = {In diesem Schritt werden die identifizierten Synonyme und Schlagw�rter entsprechend der Suchkomponenten mithilfe von Booleschen Operatoren miteinander verkn�pft. Diese Verkn�pfung wird als Suchstring bezeichnet und muss f�r jede Datenbank gesondert vorgenommen werden. Bei der Entwicklung ist auch der Einsatz von Wortabstandsoperatoren und/oder Platzhaltern f�r eines oder mehrere Zeichen zu ber�cksichtigen. Neben der Verwendung von Schlagw�rtern stellen die Suchbefehle f�r Suchbegriffe und Synonyme eine M�glichkeit dar, um die Suche einzugrenzen. Bei der Verwendung von Suchbefehlen ist deren Schreibweise (Syntax) in der jeweiligen Fachdatenbank zu beachten.},
  file      = {:1015-2668-1-PB.pdf:PDF},
  groups    = {Review, 2019-06},
  keywords  = {lesen, hirt},
  publisher = {Albert-Ludwigs-Universit�t Freiburg},
  year      = {2019},
}
```""First tests show that copying is fine but pasting alters the encoding via a BibTeX parser. =||= I can still reproduce the problem with today `JabRef_windows-x64_5_0-dev--snapshot--2019-06-16--master--8d99db113`. =||= The PR is not merged yet. You can try the branch version if you like http://builds.jabref.org/copy-paste/. =||= It is fixed. Thanks a lot!

**EDIT**: But wait... There is another bug maybe related to this Issue here. I will test and report...

**EDIT2**: The bug #5069 is not related to this issue. Can be closed if merged. =||= Merged this now into master. So will be avaiable in a couple of minutes in the master version. =||= "Preserve encoding while copy and pasting in maintable"Fixes #5043.

Encodes and decodes data with UTF-8."Stefan Kolbstefan-kolb06/28/19, 07:48:11 PM
5028.05056"Entry Editor: ""Other fields""""current snap version on Fedora 30.

It seems to me that the algorithm that sorts what fields to show in the tab ""other fields"" is well identifying and showing those fields that are not default or optional. 
The algorithm does not seem to check whether a ""custom"" field is displayed in another tab.

Use case: I have defined as general fields a field called ""teachingmodule"" and show that field in a separate tab. However, it is also shown in tab ""other fields"". The latter seems not clean.""I'm working on this. Still in the analysis phase and get back with more information. =||= If you need any help with locating the issue or the code, just ask here or in gitter chat  =||= @Siedlerchr I've analysed the logic under EntryEditor.createTabs(). Hope I'm on the right path or is there any other place I should look at? =||= @CyraxSector That's the correct place to look at. In particular,
https://github.com/JabRef/jabref/blob/47e3cc5617e456df03ef8b48500c824d09cec004/src/main/java/org/jabref/gui/entryeditor/OtherFieldsTab.java#L33-L43 =||= @tobiasdiez Thanks. I'm carrying on the investigations =||= PR https://github.com/JabRef/jabref/pull/5056 is open for review =||= Thanks to @CyraxSector  this issue should be fixed now. 
The snap might take a bit longer to update =||= "Fix order of other fields"Fixes #5028 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Prasan YapaCyraxSector06/16/19, 09:09:48 AM
5023.05058Broken automatic file links"JabRef 5.0-dev--snapshot--2019-05-31--master--f2530da2e
Windows 10 10.0 amd64 
Java 1.8.0_172

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

The automatic file linking is broken/works on and off. 

Steps to reproduce the behavior:
1. Preferences > BibTeX key generator default pattern set to `[auth:lower]_[veryshorttitle:lower]_[year]`
2. Library Properties > General and User-specific file directory set to `PDFs/`
3. Create entry with key
4. added PDF with the bibkey.pdf format
5. Hit F7 - Automatically set file links ... never finds the file, and never stops

Before this was working quite smoothly, don't know what broke it.

![image](https://user-images.githubusercontent.com/10846169/58765262-92ab2880-8571-11e9-8d21-69f033324ec9.png)""I can confirm step 5. I have a different bibtex key generator and a different file-naming system, but testing  F7 did just what you said: it never stops (the dialog has to be closed by hitting ""cancel""). =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix automaticalls set file links task not runinng"Executing the created task would have been helpful... 🤦‍♂ 

Fixes #5023

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr06/15/19, 09:14:34 PM
5066.05068"Entry editor: ""Copy linked files""""Current dev version.

In the entry editor when I right click on a linked PDF I can move (and rename) the file. But I would also like to have the option to ""copy"" the file instead of moving.

Because:
Sometimes I work with network drive (e.g. ownCloud, ...) related to a whole team.  I add literatur (PDF) from there to my bib file. And I want to have my own copy of the PDF because my buddies move and edit the PDF on the network drive.""Hi, This option is already there, new in 5.x it's called Copy linked files to folder and located under the Tools menu.
It's also suited for a batch export of linked files, e.g. of all entries. =||= I see.
I would expect to see this feature in the context menu where ""Move file to..."" is located already.
For me it would make sense. =||= Regarding the feature request: It may make sense to also have the feature in the context menu. This should never, however, replace the original functionality, since the latter allows one to quickly batch export the linked files of all (or a large number of) entries, as mentioned by @Siedlerchr (and I have used that option again just yesterday). =||= Yeah, it should be easy and simple to just add this dialog feature to the context menu in the linked file editing. 
 =||= Thanks for your suggestion. There is now an option in the contextmnenu of a file in the general tab to copy that selected file. 
Multiple files etc can still be copied from the already existing dialog.


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= I can confirm that this feature has been implemented in:

JabRef 5.0-dev--snapshot--2019-07-06--master--add35be12
Windows 10 10.0 amd64 
Java 1.8.0_211 =||= "Add copy linked files action to contextmneu in general tab"Fixes #5066 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr07/06/19, 01:51:41 PM
5045.05086crossref resolution does not comply with biblatex specification"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

**JabRef version** 

> JabRef 5.0-dev--snapshot--2019-06-10--master--eb42850f7
> Linux 4.4.0-150-generic amd64 
> Java 1.8.0_212

on

> Ubuntu 16.04

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

**Steps to reproduce the behavior**

1. create a *Proceedings* entry `Foo2019`
```
@Proceedings{Foo2019,
  title  = {Foo Conference},
  date   = {2019},
}
```
2. create an *InProceedings* entry `Bar2019` with crossref to `Foo2019`
```
@Proceedings{Bar2019,
  title  = {Bar Paper},
  crossref = {Foo2019},
}
```
3. have a look at the `Bar2019` row at the main table view

**Observed behavior**

The *year* field of the `Bar2019` entry gets populated with the value from the `Foo2019` entry.

**Expected behavior**

All fileds (esp. *year* and *journal/booktitle*) get populated with values obtained from the crossref'ed entry.

**Explanation**

According to the [biblatex documentation](https://ftp.agdsn.de/pub/mirrors/latex/dante/macros/latex/contrib/biblatex/doc/biblatex.pdf) (Appendix B), the *booktitle* field of an *InProcessings* entry inherits the value from the *title* field of the referenced *Proceedings* entry.""As of now, JabRef simply takes the value of the same field from the referenced entry. These advanced mappings of biblatex are not yet taken into account.

The following code needs to be adapted:
https://github.com/JabRef/jabref/blob/d8b2c7ef0e7f8149c50a2b4f6b982731d612993a/src/main/java/org/jabref/model/entry/BibEntry.java#L137-L142 =||= @tobiasdiez I'll work on this issue =||= @tobiasdiez PR https://github.com/JabRef/jabref/pull/5086 is open for review. =||= Thanks to @CyraxSector  this should be fixed now in the latest master.  =||= Thanks for your effort. Unfortunately, this does not work for me in the latest master. See the [attached MWE](https://github.com/JabRef/jabref/files/3541139/mwe_inheritance.txt) for testing.

JabRef 5.0-dev--snapshot--2019-08-26--master--b2e6e8383
Linux 4.4.0-159-generic amd64 
Java 11.0.4

 =||= Thanks to you this should be fixed in the latest development version 😸 . Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Bugfix/5045 : Modified the existing logic to comply crossref resolution with biblatex specification"Fixes  #5045

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Prasan YapaCyraxSector08/22/19, 07:33:26 AM
5128.05142Exception when importing unlinked local files"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev on Arch

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. open Tools > ""Search for unlinked local files""
2. scan and import

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Exception</summary>
  
  ```
java.lang.StringIndexOutOfBoundsException: String index out of range: -2
	at java.lang.String.substring(String.java:1931)
	at org.jabref.logic.importer.fileformat.PdfContentImporter.importDatabase(PdfContentImporter.java:372)
	at org.jabref.logic.externalfiles.ExternalFilesContentImporter.importPDFContent(ExternalFilesContentImporter.java:24)
	at org.jabref.gui.externalfiles.ImportHandler.importAsNewEntries(ImportHandler.java:72)
	at org.jabref.gui.externalfiles.FindUnlinkedFilesDialog.startImport(FindUnlinkedFilesDialog.java:332)
	at org.jabref.gui.externalfiles.FindUnlinkedFilesDialog.lambda$initialize$942(FindUnlinkedFilesDialog.java:195)
	at javafx.scene.control.Dialog.impl_setResultAndClose(Dialog.java:1026)
	at javafx.scene.control.DialogPane.lambda$createButton$3(DialogPane.java:777)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Node.fireEvent(Node.java:8413)
	at javafx.scene.control.Button.fire(Button.java:185)
	at com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:182)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:96)
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(GtkApplication.java:211)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:590)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.externalfiles.FindUnlinkedFilesAction.execute(FindUnlinkedFilesAction.java:26)
	at org.jabref.gui.actions.JabRefAction.lambda$new$1218(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405)
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$6(ContextMenuContent.java:1358)
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757)
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485)
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762)
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:432)
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:389)
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431)
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555)
	at com.sun.glass.ui.View.notifyMouse(View.java:937)
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$5(GtkApplication.java:139)
	at java.lang.Thread.run(Thread.java:748)

  ```
</details>""Thanks for your report, this should be now fixed in the latest development version 


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix substring exception in find unlinked files"Refactor to own method and add test
The exception came when the parsed editor string did not end with a colon and two spaces
Fixes #5128 


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/10/19, 10:39:36 AM
5182.05183[WIP] Try to find the error of Travis CI"- Seems to be Travis-Specific
- Circle CI Works fine""Circle CI does not execute tests! =||= I had the same output with ""gradle check"" on my local machine. Also IntelliJ does not recognize the library junit.jupiter. Does this have something to do with it? =||= I think I figured it out =||= "Fix jmh error"Fixes #5182  Fixes #5175 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/09/19, 02:15:05 PM
5175.05183Gradle build does not work on a fresh repository clone"Latest JabRef repository version on master 9daa645cc compiled on Mac OS X 10.14.5.

Currently, it is not possible to run `gradle build` on a freshly cloned JabRef. The one major issue are errors of the following kind:

```
jabref/src/jmh/java/org/jabref/preferences/LastFocusedTabPreferencesTest.java:5: error: package org.junit.jupiter.api does not exist
import org.junit.jupiter.api.AfterAll;
```

This error has its origin in the `build.gradle` where the jupiter dependency is included with 

```
testImplementation 'org.junit.jupiter:junit-jupiter:5.5.1'
```

However, the `LastFocusedTabPreferencesTest.java` does not live in the test directory. An easy fix is to use `implementation` instead of `testImplementation`.

Furthermore, for ages and on different machines I got this Gradle error

```
plug-in not found: ErrorProne
```

and @Siedlerchr confirmed that he also sees this error. I wonder why this package is used if obviously, its absence doesn't bother the built.

Finally, I got ~several~ two failing tests (after initializing the submodules):

```
RegExpBasedFileFinderTests. testAuthorWithDiacritics()
BibDatabaseTest. setStringAsCollectionWithUpdatedContentOverridesString()
```

I believe the aim should be that the master branch can be built without errors and all tests passing. This reduces confusion for possible new contributors, e.g. [like this one](https://github.com/JabRef/jabref/issues/5159)."For the citation style failures, did you run the `git submodule update --init`?  =||= @Siedlerchr Good point, I forgot about this. Nevertheless, there are still two failing tests, and I updated my original post. =||= Fix jmh error"Fixes #5182  Fixes #5175 

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/09/19, 02:15:05 PM
5164.05185Modify columns in table view"Using JabRef 5.* dev

The settings dialog looks like that it could be possible to modify the columns of the table view. But it does not work.
e.g. modifing ""title"" into ""subtitle"" has no effect and is reset.
What is more unusuabl it is not possible to add new columns (e.g. ""subtitle"" under ""title"") or modify their ordering.""The settings dialog is currently in the process of beeing reworked . We will take this into account. 
You can reorder the columns in the main table directly. The position is stored, as well as the size.
 =||= Thanks for the hint. Is there an Issue for this?

But I do not only want to reorder the columns. I want to other columsn e.g. `subtitle`. =||= @calixtus  is currently redesigning and improving the settings dialog. See #5185 for details =||= "Conversion of Preferences/TableColumnsTab to mvvm"follow up to #5033 , concerns #4927 #3416
fixes #5164 #4752 #3354 #4459

This is going to be a huge one. I already put some work into, but I need to take a little break, So I present an early WIP of the reworked TableColumsTab in the Preferences. There are some issues in sight, eg. the checkModel is sime kind of special.

I realized, there is maybe something wrong with the serializeSpecialFields-Option. I was not able to find any use for this pref in the whole code.

Im trying not to break anything, so besides the conversion I will not change the logic of what is controlled here. I'll leave that to another person, after im done here. My goal is to include all the specialFields and the FileFields in the ~CheckListView~, where you can sort, activate, deactivate, add custom fields (so called 'UnknownField') and remove them as you like.

Feel free to comment on it, give suggestions and ideas.

Update: We did some conceptual changes. See below.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus09/08/19, 02:56:07 PM
5152.05191ToolTip to explain color in the first column of table view"Using the JabRev 5.* dev from today. See screenshot for detailed version information.

![screen](https://user-images.githubusercontent.com/11861496/62011221-988a4800-b175-11e9-9a9b-bf4c24cc60db.png)

In that screenshot you also can see blue and white colored vertical bars in the first column of the table view (2 blue, 2 white and 1 without color).

What do they mean?

It should be explained with a tooltip when hovering the color.""Are there any specific explanations you want provided for each?  =||= I even have no idea what the colors mean. So I do not know what could be provided here. ;) =||= These are the colors of the groups that this entry belongs to. Thus a tooltip would be ""Entry is part of the following groups: x, y, z."" =||= Ah. In that case a tooltip as I wished first would not be the right choice I think.

_Simplest solution_: The color is in the first column right? Title it as ""group color"" is to wide of course. But you could set a tooltip ""group color"" to the title of the column (not the entries). The neighbor columsn (url, doi, ...) also have their own tooltip.

_Alternative_: Or if setting up a tooltip for each entry then I would assume color and the group name (including its path!).

Also in the column settings of the settings dialog I can not see that the first column is the group color. I was looking there first. =||= > These are the colors of the groups that this entry belongs to. Thus a tooltip would be ""Entry is part of the following groups: x, y, z.""

So essentially, the names of the group are the same as the color names? For example, a blue bar means that the entry belongs in the group called ""blue""?  =||= @noMICROSOFTbuhtz  How do I find the main source code file(s) to address this issue?  =||= I am not a core developer here - just a user. I think @tobiasdiez knows the answer.

The name of the group is different from the color. I mean the tooltip should contain the name (e.g. ""Science"") of the group as a string and the color as a colored rectangle. =||= According to the code, there should be even a tooltip https://github.com/JabRef/jabref/blob/4b39b78e4afcd6c36b385f5c46f1d9a4eac2e29b/src/main/java/org/jabref/gui/maintable/MainTableColumnFactory.java#L142 =||= @tobiasdiez Nice. Again the GUI lib is the ""problem"".

The tooltip araise only (but not everytime!) if the entry is selected. If not no tooltip. This is unusual and against standard behaviour of other GUI libs.

Other problem is that the tooltip disapears after some seconds. Even unusual. A tooltip should disapear only when the cursor is moved and not aver a delay. =||= Thanks to @mmihuu the problem should be fixed now. there is a now an icon and a tooltip. =||= "Fix issue 5152, tooltip and icon added to group cell"Fixes #5152 

Fix issue with a missing tooltip and icon in the color group column. I used DEFAULT_GROUP_ICON from JabRefICons to supplement the missing icon. "mmihuu08/18/19, 12:18:44 PM
5194.05195Latex citations search -  Missing citations"I tested around the Latex citations search feature with my text and found that some citations were not parsed.

I often used the autocite command   `\autocite{Carmody2014}` and also sometimes I used 
`\blockcquote[p. 18]{Nelson1999}{blablabla}`
Tested in current master. They were not recognized

Those should be integrated.  See also this cheatsheet for a list of other cite commands
http://tug.ctan.org/info/biblatex-cheatsheet/biblatex-cheatsheet.pdf
@davidemdot  "Add citation commands to TexParser"We added a few more citation commands: `autocite`, `Autocite`, `blockcquote`, and `textcquote`.

This PR fixes #5194.

----

- [ ] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"David Méndezdavidemdot08/18/19, 02:31:51 PM
5163.05197Journal and Year missing from bibliography"While pushing the entries into Jabref library through Websearch, the name of journal and year of publishing are going to the optional field instead of required field. Thus, the journal name and year information gets missed in references in the latex document. 

Kindly guide how to add this to main field. I cant find the ""customize entry type"" key in ""Options"" tab. I am using latest version: JabRef 5.0-dev--snapshot--2019-07-29--master--f6eb5344a Windows 7 6.1 amd64.

![a](https://user-images.githubusercontent.com/50617012/62270250-2eaebe80-b453-11e9-8e69-bcb6eb6de084.png)"Thanks to @mmihuu this issue should be fixed now in the latest master version. =||= Fix issue with missing year value in year column"Fixes #5163 
Fix issue with missing year value in year column. The query to receive this value was missing in the IEEE.java, simply added one.   

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [X] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"mmihuu08/21/19, 02:17:38 PM
5198.05201Uncaught exception in adding a new entry by DOI"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version JabRef 5.0-dev--snapshot--2019-08-18--master--445af8d06 on Mac OS X 10.14.6 x86_64
Java 1.8.0_221

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When I add a unique new entry by DOI, the following error occurs, regardless of the library to be added to is empty or not:
`Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]`

However, the entry is added correctly, though the error message appears.

I've tested a few DOIs and exactly the same log was generated.

Steps to reproduce the behavior:
1. Add a new entry (to a empty/non-emtpy library) by DOI

In addition, exactly the same error and log were generated when I merged entries in adding a duplicated entry by DOI.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
java.lang.NullPointerException
	at org.jabref.gui.EntryTypeView.setEntryTypeForReturnAndClose(EntryTypeView.java:166)
	at org.jabref.gui.EntryTypeView.lambda$new$660(EntryTypeView.java:82)
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263)
	at com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:182)
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81)
	at javafx.beans.property.BooleanPropertyBase.fireValueChangedEvent(BooleanPropertyBase.java:103)
	at javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)
	at javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:144)
	at org.jabref.gui.EntryTypeViewModel.lambda$runFetcherWorker$588(EntryTypeViewModel.java:166)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.concurrent.EventHelper.fireEvent(EventHelper.java:219)
	at javafx.concurrent.Task.fireEvent(Task.java:1356)
	at javafx.concurrent.Task.setState(Task.java:723)
	at javafx.concurrent.Task$TaskCallable.lambda$call$1(Task.java:1434)
	at com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.mac.MacApplication._enterNestedEventLoopImpl(Native Method)
	at com.sun.glass.ui.mac.MacApplication._enterNestedEventLoop(MacApplication.java:109)
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511)
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:633)
	at javafx.stage.Stage.showAndWait(Stage.java:474)
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341)
	at org.jabref.gui.importer.NewEntryAction.execute(NewEntryAction.java:60)
	at org.jabref.gui.actions.JabRefAction.lambda$new$1017(JabRefAction.java:29)
	at org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.controlsfx.control.action.Action.handle(Action.java:64)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.scene.control.GlobalMenuAdapter.lambda$bindMenuItemProperties$2(GlobalMenuAdapter.java:153)
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.event.Event.fireEvent(Event.java:198)
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462)
	at com.sun.javafx.tk.quantum.GlassSystemMenu$1.action(GlassSystemMenu.java:238)

  ```
</details>"Fix exception when adding new entry"Fixes #5198

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/23/19, 08:30:24 PM
4845.05210Cut and Paste duplicates entry in original table"To reproduce 

1. open two bibliographies
2. copy (Command-c) one (or more) entries from first bibliography
3. switch to second bibliography and paste with (Command-v)

Then in the entry is added to the second - but also duplicated in the first bibliography.


Info:

```
JabRef 5.0-dev--snapshot--2019-04-03--master--a273eb1fa
Mac OS X 10.14.3 x86_64 
Java 1.8.0_191
```

I think it might be linked with https://github.com/JabRef/jabref/issues/4836 - also here pasting with right click does not trigger it.""Seems to be only a Mac issue. On Windows 10 I cannot confirm this. 
Try updating your java to 8u202. There have been several mac specific fixes.
 =||= > Seems to be only a Mac issue. On Windows 10 I cannot confirm this.
> Try updating your java to 8u202. There have been several mac specific fixes.

I did the update.  However the issue is unaffected. =||= I have a mac os. I will investigate it.  =||= @bdcaf  @tobiasdiez  Can't reproduce it. Run jabref via `intelliJ idea` latest master. =||= Thanks to @LinusDietz  and @stefan-kolb  this issue is now fixed in the latest master! =||= "Fix Double Paste on Different OS"Fixes #4845 
Fixes #4699 
Fixes #4836 

Upon pasting MacOS calls the system paste as well as JabrefFrame.EditAction#execute(). This caused a duplicate call of the paste."Linus DietzLinusDietz08/24/19, 10:56:11 AM
4699.05210Mac OS X: Pasting bibtex entry creates duplicate entries"JabRef version: 5.0-dev

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When copying and pasting a bibtex entry into jabref, it creates duplicate entries for the citation. This occurs regardless of if I have All Entries open, or am just viewing a group or subgroup.

<details>
  <summary>Log File</summary>
Opening: /Users/adamg/Dropbox/adam.bib
Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
Can only load style files: Preview
Opening: /var/folders/8w/wfth0jx51l960l8mgcjlxn580000gn/T/jabref7386437712883599037.bib
Opening: /Users/adamg/Dropbox/adam.bib
Opening: /var/folders/8w/wfth0jx51l960l8mgcjlxn580000gn/T/jabref7386437712883599037.bib
Opening: /Users/adamg/Dropbox/adam.bib
Opening: /var/folders/8w/wfth0jx51l960l8mgcjlxn580000gn/T/jabref7386437712883599037.bib
Opening: /Users/adamg/Dropbox/adam.bib
Opening: /var/folders/8w/wfth0jx51l960l8mgcjlxn580000gn/T/jabref7386437712883599037.bib
Opening: /Users/adamg/Dropbox/adam.bib
Can only load style files: Preview  
</details>""I tried copy pasting a _BibTex_ entry into _JabRef_ but it did not create duplicates, am I missing something?
 =||= Nope, that's exactly what I did too. =||= I am not able to reproduce it, I am copying an entry and pasting it back in the same library. =||= I've been copying the entries from elsewhere, usually Google Scholar. It seems to happen when I've had the application open for a while and done multiple additions. It doesn't happen the first time. =||= Can you provide a detailed description which steps are needed to reproduce this bug? =||= I'm not sure what other details I can provide. I copy the bibtex from google scholar in Chrome. I then paste it into the main window in jabref, and it creates two duplicate entries. =||= Can you reproducibly generate this behaviour by copying certain entries and a certain number of (ordered?) entries from Google Scholar?
If so, can you please:

1. Provide links to the entries that cause the issue.
2. Provide the number of entries that is necessary to reproduce the issue.
3. Detail in which order you copied the entries from Google Scholar to JabRef. =||= This time it occurred when copying just the 2nd entry.

Using [this query](https://scholar.google.com/scholar?hl=en&as_sdt=1%2C14&q=nlp+healthcare&btnG=), I copied the first entry into jabref without issue. But copying the bibtex of the 2nd and 3rd entries created duplicates. =||= Can you please tell us which OS you are using? 
We had some reports of duplicated execution of some commands in Mac OS X... =||= I am also on OS X, v. 10.14.4 =||= Thank you for the feedback!

So it is most likely the same underlying problem as in #4845 and #4836 =||= Thanks to @LinusDietz  and @stefan-kolb  this issue is now fixed in the latest master! =||= This behavior is present again in current master build on MacOS. =||= I think this code was recently reversed in #6313 that could explain it 
@calixtus   =||= @Gena928 Cannot reproduce the issue. Maybe, it would help to have a screen recording of this issue?

Would it be possible to add a [Loom](https://www.loom.com/) video here? Maybe visualizing key strokes using [KeyCastr](https://alternativeto.net/software/keycastr/) also helps to understand what's going on? =||= Try of @Siedlerchr:

- `master` branch used
- `setupKeyBindings` in MainTable removed

Next step:

- Do this change in this PR.
- Test on Win, Mac, Linux
   1. key binding of copy change to `Ctrl+Shift+Alt+Q`
   2. key binding of paste change to `Ctrl+Shift+Alt+P`
   3. try to paste in entry editor
   4. try to paste in main table
   - paste: bibtex entry: (`@article{test2020, author={{JabRefTeam}}}`)
   - paste: test: ""This is a text to paste.""


 =||= "Fix Double Paste on Different OS"Fixes #4845 
Fixes #4699 
Fixes #4836 

Upon pasting MacOS calls the system paste as well as JabrefFrame.EditAction#execute(). This caused a duplicate call of the paste."Linus DietzLinusDietz08/24/19, 10:56:11 AM
4836.05210Pasting Text Happens Twice"Steps to reproduce the behavior:
1. Paste any text into Entry Editor/Search Field, etc. (using ⌘ + v)
2. The text is pasted twice. 

Does not happen using right-click -> paste.

JabRef 5.0 DEV, 85e684b5e6c04c8f47834b3c0a960a9c53d00a3c
Mac OS X 10.14.3 x86_64 
Java 1.8.0_191""Cannot confirm under windows. Please try java 8u202 as there have been several bug fixes for mac:
https://www.oracle.com/technetwork/java/javase/2col/8u202-bugfixes-5209341.html =||= It still persists with latest (1.8u202) Oracle JDK. =||= Addon: If an entry is pasted into the maintable it is also pasted twice =||= Reproduced this bug, start to work on it.  =||= Thanks to @LinusDietz  and @stefan-kolb  this issue is now fixed in the latest master! =||= "Fix Double Paste on Different OS"Fixes #4845 
Fixes #4699 
Fixes #4836 

Upon pasting MacOS calls the system paste as well as JabrefFrame.EditAction#execute(). This caused a duplicate call of the paste."Linus DietzLinusDietz08/24/19, 10:56:11 AM
5220.05224Exception when adding field formatter in cleanup entries dialog"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version **JabRef 5.0-dev (8f463e4)** on **Windows 10 10.0 amd64, Java 1.8.0_221**

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Select an entry
2. Open *Quality->Cleanup entries*
3. Try to add new field formatter by selecting field and field formatter via combo boxes

This results with uncaught exception.

I checked that the bug was introduced in 4b39b78. Before that commit the bug was not present.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
22:41:59.563 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.ClassCastException: java.lang.String cannot be cast to org.jabref.model.entry.field.Field
	at org.jabref.gui.cleanup.FieldFormatterCleanupsPanel.getFieldFormatterCleanup(FieldFormatterCleanupsPanel.java:220) ~[main/:?]
	at org.jabref.gui.cleanup.FieldFormatterCleanupsPanel.updateDescription(FieldFormatterCleanupsPanel.java:147) ~[main/:?]
	at org.jabref.gui.cleanup.FieldFormatterCleanupsPanel.lambda$getSelectorPanel$276(FieldFormatterCleanupsPanel.java:176) ~[main/:?]
	at org.fxmisc.easybind.EasyBind.lambda$subscribe$12(EasyBind.java:263) ~[easybind-1.0.3.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(ObjectPropertyBase.java:105) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146) ~[jfxrt.jar:?]
	at javafx.scene.control.ComboBoxBase.setValue(ComboBoxBase.java:150) ~[jfxrt.jar:?]
	at javafx.scene.control.ComboBox.updateValue(ComboBox.java:463) ~[jfxrt.jar:?]
	at javafx.scene.control.ComboBox.access$200(ComboBox.java:192) ~[jfxrt.jar:?]
	at javafx.scene.control.ComboBox$3.changed(ComboBox.java:446) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:361) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(ReadOnlyObjectPropertyBase.java:74) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(ReadOnlyObjectWrapper.java:102) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(ObjectPropertyBase.java:112) ~[jfxrt.jar:?]
	at javafx.beans.property.ObjectPropertyBase.set(ObjectPropertyBase.java:146) ~[jfxrt.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(SelectionModel.java:102) ~[jfxrt.jar:?]
	at javafx.scene.control.ComboBox$ComboBoxSelectionModel.lambda$new$0(ComboBox.java:494) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:137) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyIntegerPropertyBase.fireValueChangedEvent(ReadOnlyIntegerPropertyBase.java:72) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyIntegerWrapper.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:102) ~[jfxrt.jar:?]
	at javafx.beans.property.IntegerPropertyBase.markInvalid(IntegerPropertyBase.java:113) ~[jfxrt.jar:?]
	at javafx.beans.property.IntegerPropertyBase.set(IntegerPropertyBase.java:147) ~[jfxrt.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedIndex(SelectionModel.java:68) ~[jfxrt.jar:?]
	at javafx.scene.control.SingleSelectionModel.updateSelectedIndex(SingleSelectionModel.java:215) ~[jfxrt.jar:?]
	at javafx.scene.control.SingleSelectionModel.select(SingleSelectionModel.java:149) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.ComboBoxListViewSkin.lambda$createListView$1(ComboBoxListViewSkin.java:484) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:349) ~[jfxrt.jar:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:81) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyIntegerPropertyBase.fireValueChangedEvent(ReadOnlyIntegerPropertyBase.java:72) ~[jfxrt.jar:?]
	at javafx.beans.property.ReadOnlyIntegerWrapper.fireValueChangedEvent(ReadOnlyIntegerWrapper.java:102) ~[jfxrt.jar:?]
	at javafx.beans.property.IntegerPropertyBase.markInvalid(IntegerPropertyBase.java:113) ~[jfxrt.jar:?]
	at javafx.beans.property.IntegerPropertyBase.set(IntegerPropertyBase.java:147) ~[jfxrt.jar:?]
	at javafx.scene.control.SelectionModel.setSelectedIndex(SelectionModel.java:68) ~[jfxrt.jar:?]
	at javafx.scene.control.MultipleSelectionModelBase.select(MultipleSelectionModelBase.java:404) ~[jfxrt.jar:?]
	at javafx.scene.control.MultipleSelectionModelBase.clearAndSelect(MultipleSelectionModelBase.java:356) ~[jfxrt.jar:?]
	at javafx.scene.control.ListView$ListViewBitSetSelectionModel.clearAndSelect(ListView.java:1403) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.behavior.CellBehaviorBase.simpleSelect(CellBehaviorBase.java:256) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.behavior.CellBehaviorBase.doSelect(CellBehaviorBase.java:220) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.behavior.CellBehaviorBase.mousePressed(CellBehaviorBase.java:150) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:95) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.BehaviorSkinBase$1.handle(BehaviorSkinBase.java:89) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[jfxrt.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[jfxrt.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757) ~[jfxrt.jar:?]
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485) ~[jfxrt.jar:?]
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762) ~[jfxrt.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_221]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:432) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:410) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431) ~[jfxrt.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555) ~[jfxrt.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(WinApplication.java:204) ~[jfxrt.jar:?]
	at com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:511) ~[jfxrt.jar:?]
	at com.sun.glass.ui.EventLoop.enter(EventLoop.java:107) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:633) ~[jfxrt.jar:?]
	at javafx.stage.Stage.showAndWait(Stage.java:474) ~[jfxrt.jar:?]
	at javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162) ~[jfxrt.jar:?]
	at javafx.scene.control.Dialog.showAndWait(Dialog.java:341) ~[jfxrt.jar:?]
	at org.jabref.gui.cleanup.CleanupAction.action(CleanupAction.java:46) ~[main/:?]
	at org.jabref.gui.BasePanel.runCommand(BasePanel.java:609) ~[main/:?]
	at org.jabref.gui.actions.OldDatabaseCommandWrapper.execute(OldDatabaseCommandWrapper.java:40) ~[main/:?]
	at org.jabref.gui.actions.JabRefAction.lambda$new$110(JabRefAction.java:29) ~[main/:?]
	at org.controlsfx.control.action.Action.handle(Action.java:419) ~[controlsfx-8.40.16-SNAPSHOT.jar:8.40.16.SNAPSHOT]
	at org.controlsfx.control.action.Action.handle(Action.java:64) ~[controlsfx-8.40.16-SNAPSHOT.jar:8.40.16.SNAPSHOT]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49) ~[jfxrt.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[jfxrt.jar:?]
	at javafx.scene.control.MenuItem.fire(MenuItem.java:462) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1405) ~[jfxrt.jar:?]
	at com.sun.javafx.scene.control.skin.ContextMenuContent$MenuItemContainer.lambda$createChildren$6(ContextMenuContent.java:1358) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191) ~[jfxrt.jar:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74) ~[jfxrt.jar:?]
	at com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54) ~[jfxrt.jar:?]
	at javafx.event.Event.fireEvent(Event.java:198) ~[jfxrt.jar:?]
	at javafx.scene.Scene$MouseHandler.process(Scene.java:3757) ~[jfxrt.jar:?]
	at javafx.scene.Scene$MouseHandler.access$1500(Scene.java:3485) ~[jfxrt.jar:?]
	at javafx.scene.Scene.impl_processMouseEvent(Scene.java:1762) ~[jfxrt.jar:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2494) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:394) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_221]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:432) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:410) ~[jfxrt.jar:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:431) ~[jfxrt.jar:?]
	at com.sun.glass.ui.View.handleMouseEvent(View.java:555) ~[jfxrt.jar:?]
	at com.sun.glass.ui.View.notifyMouse(View.java:937) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.win.WinApplication.lambda$null$3(WinApplication.java:177) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_221]
  ```
</details>"Thanks to @davidemdot  this should be fixed now. =||= Fix exception when adding field formatter in 'Cleanup entries' dialogThis fixes #5220.David Méndezdavidemdot08/24/19, 11:57:26 PM
4612.05229General fields layout: url and doi missing"Default layout does not contain the fields url;doi;arxiv; and so on:""Applies only to bibtex I think =||= This should be a preferences issue only as it can be configured via Options -> Setup General fields =||= This has really high priority as we do every fetching based on the DOI fields! =||= > Applies only to bibtex I think

Applies to both modes as far as I can see. =||= "Add DOI, URL, Eprint  field to general tab layout"Fixes #4612

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr08/25/19, 11:18:29 AM
5021.05230entry editor: select which fields to show wrapped"Current snap version on fedora 30

Whilst the Abstract field is shown in the entry editor as a wrapped field, a custom field is not shown as wrapped.""just to note that this ""enhancement"" worked as expected in JabRef 4.3.1. =||= I think this is a bug, not a feature request as this has worked as expected before, has been used to enter text and now breaks all these use cases.  =||= can you post a screenshot with the ""bug""?

#jabcon =||= updated now to latest snap version

I have this entry

``` 
@InCollection{Clark:2010Mem,
  author       = {Andy Clark},
  title        = {Memento's Revenge: Objections and Replies to the Extended Mind},
  chapter      = {3},
  editor       = {R. Menary},
  pages        = {43--66},
  abstract     = {In the movie, Memento, the hero, Leonard, suffers from a form of anterograde amnesia that results in an inability to lay down new memories. Nonetheless, he sets out on a quest to find his wife's killer, aided by the use of notes, annotated polaroids, and (for the most important pieces of information obtained) body tattoos. Using these resources he attempts to build up a stock of new beliefs and to thus piece together the puzzle of his wife's death. At one point in the movie, a character exasperated by Leonard's lack of biological recall, shouts: ``YOU know? What do YOU know. YOU don't know anything. In 10 minutes time YOU won't even know you had this conversation'' Leonard, however, believes that he does, day by day, come to know new things. But only courtesy of those photos, tattoos, tricks and ploys. Who is right?These are the kinds of question addressed at length in the paper (co-authored with David Chalmers) ``The Extended Mind'. Is the mind contained (always? sometimes? never?) in the head? Or does the notion of thought allow mental processes (including believings) to inhere in extended systems of body, brain and aspects of the local environment? The answer, we claimed, was that mental states, including states of believing, could be grounded in physical traces that remained firmly outside the head. As long as a few simple conditions were met (more on which below), Leonard's notes and tattoos could indeed count as new additions to his store of long-term knowledge and dispositional belief. In the present treatment I revisit this argument, defending our strong conclusion against a variety of subsequent observations and objections. In particular, I look at objections that rely on a contrast between the (putatively) intrinsic content of neural symbols and the merely derived content of external inscriptions, at objections concerning the demarcation of scientific domains via natural kinds, and at objections concerning the ultimate locus of agentive control and the nature of perception versus introspection. I also mention a possible alternative interpretation of the argument as (in effect) a reductio of the very idea of the mind as an object of scientific study. This is an interesting proposal,},
  annote       = {read 5/10/2010, London. I liked the paper. Clark defends his argument for an extended mind (incorporating things outside the brain) against various criticisms. It is a philosophical paper, involving mostly thought experiments. The point, really, is that cognition is situated in a socio-techno-natural environment.},
  crossref     = {Menary:2010},
  file         = {:Clark.A2010 Memento's Revenge Objections and Replies to the Extended.pdf:PDF},
  project      = {Thinking},
  ranking      = {rank4},
  readstatus   = {read},
  recommend-by = {A Billion Gadget Minds-Workshop},
  timestamp    = {2019-08-25 02:34},
}
``` 

and it shows in the entry editor these two fields - one with wrapped text, the other without.

please let me know, if you need further information.

![1](https://user-images.githubusercontent.com/20518297/63644092-1a23b600-c6e1-11e9-821e-89c9ab0f0dab.png)
![Screenshot-20190825023339-1003x382](https://user-images.githubusercontent.com/20518297/63644093-20199700-c6e1-11e9-8a01-527b1edbdc73.png)
 =||= This should be fixed in the latest development version. Note that it only works for unknown fields. So for example, the field `annotation` is still displayed as a single-line field because it is a standard bibtex field.

Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Hi @tobiasdiez,
thanks - will only be able to check once it is rolled out to snap package.
Just to check my UI confusion: in the preferences|File I can specify which fields to save not wrapped. As a user I would expect that this would relate to how the field is displayed. I note the technical difference. However, it does not seem straight forward, if storage and display are handled differently, especially if a user makes an effort to specify fields in the preferences.
cheers,
ingmar
 =||= Thanks I just tested this and can confirm that this now works for all unknown fields.  =||= "Treat unknown fields as multi-line fields"Fixes #5021. Unknown fields are now treated as multi-line fields. In the future, we should provide an UI interface to specify or change properties of fields.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez08/25/19, 11:23:22 AM
5278.05279InvocationTargetException because of com.jfoenix trying to access classes which it is not allowed to in gradle run"JabRef 5.0-dev
Windows 10 10.0 amd64 
Java 11.0.3-bellsoft

When trying to add a new group or modify an existing group, an exception is thrown. It seems to be because classes from `com.jfoenix` try to access classes which they are not allowed to. 
It only happens in the development version run via gradle.
The latest snapshot build installed via the installer is working fine.

Steps to reproduce:

1. Start JabRef via `gradle run`
2. Click on Button ""New group""
3. The exception occurs

Paste your log details here.
<details>
<summary>Detail information:</summary>

```
Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
	at javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1787)
	at javafx.fxml/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1670)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.graphics/javafx.scene.Node.fireEvent(Node.java:8879)
	at javafx.controls/javafx.scene.control.Button.fire(Button.java:200)
	at javafx.controls/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:206)
	at javafx.controls/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3851)
	at javafx.graphics/javafx.scene.Scene$MouseHandler.access$1200(Scene.java:3579)
	at javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1849)
	at javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2588)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:397)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:295)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:434)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:390)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:433)
	at javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:556)
	at javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:942)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)
	at java.base/java.lang.Thread.run(Thread.java:834)
Caused by: java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:76)
	at jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:566)
	at javafx.base/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:273)
	at javafx.fxml/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:83)
	at javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1782)
	... 59 more
Caused by: java.lang.IllegalAccessError: superclass access check failed: class com.jfoenix.controls.behavior.JFXGenericPickerBehavior (in module com.jfoenix) cannot access class com.sun.javafx.scene.control.behavior.ComboBoxBaseBehavior (in module javafx.controls) because module javafx.controls does not export com.sun.javafx.scene.control.behavior to module com.jfoenix
	at com.jfoenix/com.jfoenix.skins.JFXGenericPickerSkin.<init>(JFXGenericPickerSkin.java:62)
	at com.jfoenix/com.jfoenix.skins.JFXColorPickerSkin.<init>(JFXColorPickerSkin.java:68)
	at com.jfoenix/com.jfoenix.controls.JFXColorPicker.createDefaultSkin(JFXColorPicker.java:66)
	at javafx.controls/javafx.scene.control.Control.doProcessCSS(Control.java:897)
	at javafx.controls/javafx.scene.control.Control.access$000(Control.java:83)
	at javafx.controls/javafx.scene.control.Control$1.doProcessCSS(Control.java:89)
	at javafx.controls/com.sun.javafx.scene.control.ControlHelper.processCSSImpl(ControlHelper.java:67)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1397)
	at javafx.graphics/javafx.scene.Parent.access$400(Parent.java:79)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1397)
	at javafx.graphics/javafx.scene.Parent.access$400(Parent.java:79)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1397)
	at javafx.graphics/javafx.scene.Parent.access$400(Parent.java:79)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1397)
	at javafx.graphics/javafx.scene.Parent.access$400(Parent.java:79)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1397)
	at javafx.graphics/javafx.scene.Parent.access$400(Parent.java:79)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1397)
	at javafx.graphics/javafx.scene.Parent.access$400(Parent.java:79)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Node.processCSS(Node.java:9529)
	at javafx.graphics/javafx.scene.Scene.doCSSPass(Scene.java:569)
	at javafx.graphics/javafx.scene.Scene.preferredSize(Scene.java:1745)
	at javafx.graphics/javafx.scene.Scene$2.preferredSize(Scene.java:393)
	at javafx.graphics/com.sun.javafx.scene.SceneHelper.preferredSize(SceneHelper.java:66)
	at javafx.graphics/javafx.stage.Window$12.invalidated(Window.java:1086)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145)
	at javafx.graphics/javafx.stage.Window.setShowing(Window.java:1174)
	at javafx.graphics/javafx.stage.Window.show(Window.java:1189)
	at javafx.graphics/javafx.stage.Stage.show(Stage.java:273)
	at javafx.graphics/javafx.stage.Stage.showAndWait(Stage.java:463)
	at javafx.controls/javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.controls/javafx.scene.control.Dialog.showAndWait(Dialog.java:345)
	at org.jabref/org.jabref.gui.JabRefDialogService.showCustomDialogAndWait(JabRefDialogService.java:251)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.addNewSubgroup(GroupTreeViewModel.java:144)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.addNewGroupToRoot(GroupTreeViewModel.java:110)
	at org.jabref/org.jabref.gui.groups.GroupTreeView.addNewGroup(GroupTreeView.java:364)
	... 70 more
``` 

</details>"added add-opens options"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->
Fixes #5278 
There were a few more not allowed access from within the `com.jfoenix` dependency. But adding the lines with further jvm options from this pull request to the `build.gradle` in the `run` task prevents the Exceptions.
Is this the proper way to adress this or is there a better way to fix such issues?


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Robinr0light09/04/19, 10:54:10 AM
5261.05287Linking to Libre/OpenOffice fails because of classloader exception"JabRef version 5.x on Ubuntu 18.04 LTS

- [ x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Manual connect to Libreoffice (Auto connect generates same error)
2. Specify directory for .jar class files: /usr/lib/libreoffice/program/classes (have double-checked that they are actually there)
3. Click OK
4. Error: ""Could not connect to running OpenOffice/LibreOffice
(Not all) required OpenOffice jars were found inside the installation path. Searched for [unoil.jar, jurt.jar, juh.jar., ridl.jar] in /opt/openoffice.org3""

Stacktrace: 

java.io.IOException: (Not all) required Open Office Jars were found inside installation path. Searched for [unoil.jar, jurt.jar, juh.jar, ridl.jar] in /opt/openoffice.org3
	at org.jabref.gui.openoffice.OpenOfficePanel.loadOpenOfficeJars(OpenOfficePanel.java:449)
	at org.jabref.gui.openoffice.OpenOfficePanel$2.call(OpenOfficePanel.java:389)
	at org.jabref.gui.openoffice.OpenOfficePanel$2.call(OpenOfficePanel.java:384)
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1425)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
""Try to reset your preferences. There seems to be still the wrong old path stored in the preferences.
 =||= Thank you very much for your help. I've followed that. Now it generates the following error (which seems to happen in both automatic and manual):

""Autodetection failed""

java.lang.ClassCastException: class jdk.internal.loader.ClassLoaders$AppClassLoader cannot be cast to class java.net.URLClassLoader (jdk.internal.loader.ClassLoaders$AppClassLoader and java.net.URLClassLoader are in module java.base of loader 'bootstrap')
	at org.jabref.gui.openoffice.OpenOfficePanel.addURL(OpenOfficePanel.java:141)
	at org.jabref.gui.openoffice.OpenOfficePanel.loadOpenOfficeJars(OpenOfficePanel.java:456)
	at org.jabref.gui.openoffice.OpenOfficePanel$2.call(OpenOfficePanel.java:389)
	at org.jabref.gui.openoffice.OpenOfficePanel$2.call(OpenOfficePanel.java:384)
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1425)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)
 =||= Ah thanks for the report.
I think this is related to the new ClassLoader stuff in java 11. 
See https://blog.codefx.org/java/java-11-migration-guide/#Casting-To-URL-Class-Loader
 =||= I'm also effected by this. The link sounds like its a lot of work to fix. Should one role back to older jabref version for the moment if this functionality is required? =||= Yes. If you use thisffunction regularly, you might want to use an older version JabRef for the moment. 
A development version before the Java 11 change should also work. 

We are of course trying to fix this problem, but it's indeed a bit more complicated since it involves loading the Libre office jars at runtime. And that stuff has changed with Java 9/11....🤔

 =||= @rsdc2  @deisi Good news, I found a solution to fix this:
Could you please try this version here and report back if it works?
https://builds.jabref.org/fixOpenOffice/

(it now uses sockets instead of named pipes) =||= Thanks so much for doing that! I'll check it tomorrow when I have access to my computer and let you know. =||= It works. I could click on `connect` and it connected. I could further insert a citation. Thank you very much for the fix :) =||= This should be fixed in the latest master now.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Thanks again for your work on this. I just tried running the latest master. When I try to launch the new jar file from the terminal, I get the following message:

Error: Could not find or load main class org.jabref.org.jabref.JabRefLauncher
Caused by: java.lang.ClassNotFoundException: org.jabref.org.jabref.JabRefLauncher

I tested the earlier version, and that still launches. =||= Running directly from the jar is no longer possible.
please use either the Linux tar.gz archive or the windows installer. It includes all the necessary dependencies and a start script =||= Ok thanks very much. I'll do that.

On Mon, 16 Sep 2019, 18:52 Christoph, <notifications@github.com> wrote:

> Running directly from the jar is no longer possible.
> please use either the Linux tar.gz archive or the windows installer. It
> includes all the necessary dependencies and a start script
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/5261?email_source=notifications&email_token=ANBLFOG2GQHHO2TETSAYEVLQJ7BWNA5CNFSM4ISKJNY2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD6Z643I#issuecomment-531885677>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/ANBLFOEQCDOW55TMZQWW2VTQJ7BWNANCNFSM4ISKJNYQ>
> .
>
 =||= It all works - thank you very much for your help.
 =||= "Try to fix LibreOffice class loader"Fixes #5261 


After a lot of googling I found some old forum thread in the deep of the open office forums which combined gave the solution.

1. Use sockets instead of pipes (cause jpipe is a dll/lib in the LO dir and cannot be found at class loading
2.  Pass an URL ClassLoader as parent to the Bootstrap method.
https://technology.amis.nl/2006/07/19/getting-started-with-the-openofficeorg-api-part-ii-starting-openofficeorg-with-jars-not-in-the-ooo-install-dir/


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr09/15/19, 01:21:51 PM
3142.05325The Group Panel is not updated when switching between certain libraries"JabRef 4.0-beta3
Windows 7 6.1 amd64 
Java 1.8.0_131

Steps to reproduce:

1. open Jabref with multiple libraries
2. switch between the libraries
3. the updating of the Group Panel is extremely slow and not always correct-

I have the following screenshots to show that behaviour: when I switch from chapter04.bib to  EndokrinologieKunde20170513VS4.0.0.bib and vice versa the group panel is not updated, while switching to FatMetabolism20170608VS4.0.0.bib it is updated and then back to either chapter04.bib or EndokrinologieKunde... it is. Chapter04 has 275 entries, FatMetabolism has 900 and Endokrinologiekunde has 1991 entries 
![grafik](https://user-images.githubusercontent.com/9216487/29496199-335bab42-85ce-11e7-90a1-8c90b3354cf5.png)
![grafik](https://user-images.githubusercontent.com/9216487/29496206-57ad39fc-85ce-11e7-870a-b03504b3dfe2.png)
![grafik](https://user-images.githubusercontent.com/9216487/29496212-705daf72-85ce-11e7-8b85-0f8d237bc4e9.png)

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Refs #2690 =||= This can be reproduced in the following way:
 - Start JabRef with two bib files and the the groups side pane open
 - Create a new database
 - JabRef will switch to the new database, but the groups side pane will display the tree of the last selected database

If tracked the problem down to this part:
https://github.com/JabRef/jabref/blob/6a26798aa88d49e72977cfbc464324baa73c9d0d/src/main/java/org/jabref/gui/groups/GroupSidePane.java#L131-L133

Here the groups side pane should repaint, but the `JFXPanel` does not necessarily do that. The only way  I found (and I tried many ways) to force it was by re-creating the completed pane, i.e. by putting this code into the conditional:
```
            StackPane root = new StackPane();
            root.getChildren().addAll(new GroupTreeView().getView());
            Scene scene = new Scene(root);
            groupsPane.setScene(scene);
```
But that leads to an ugly flicker in the UI. Resetting the scene with a newly created instance is the key. Without that, no change happens.

@tobiasdiez How can I force the `groupsPane` to refresh without having to rebuild all its contents? There has to be some way to do this.

 =||= @lenhard I cannot reproduce the issue with the steps you describe with the latest master. For me, an empty groups tree is displayed for the new database. 

Codewise, it (should) work as follows: The statemanager is notified about the new database
https://github.com/JabRef/jabref/blob/007a534d0db7032a77260aa492e15523d44512d9/src/main/java/org/jabref/gui/JabRefFrame.java#L616-L618
and propagates the event to the group tree view
https://github.com/JabRef/jabref/blob/007a534d0db7032a77260aa492e15523d44512d9/src/main/java/org/jabref/gui/groups/GroupTreeViewModel.java#L55-L56
There the tree is updated,
https://github.com/JabRef/jabref/blob/007a534d0db7032a77260aa492e15523d44512d9/src/main/java/org/jabref/gui/groups/GroupTreeViewModel.java#L121
which triggers a repaint of the tree due to the binding
https://github.com/JabRef/jabref/blob/007a534d0db7032a77260aa492e15523d44512d9/src/main/java/org/jabref/gui/groups/GroupTreeController.java#L99-L105 =||= @tobiasdiez Hm, you use Win10, right? if you cannot reproduce this, maybe the problem is related to Win7. Because for me it is no problem to reproduce and I have the same setting as @bernhard-kleine 

We might need more help tracking this down from other people that use different settings. =||= Yes, I'm on Win10. Can you please verify that https://github.com/JabRef/jabref/blob/007a534d0db7032a77260aa492e15523d44512d9/src/main/java/org/jabref/gui/groups/GroupTreeViewModel.java#L113 is invoked (with the proper empty database as argument), when you create a new database.  =||= I debugged this and the method is invoked with the empty database. This is the case for BibTeX and biblatex, but unfortunately the group tree doesn't get updated properly. =||= Can reproduce exactly as described by Jörg (maybe you need to switch between the bibs a bit):
![image](https://user-images.githubusercontent.com/2141507/63724884-2a5ea100-c859-11e9-92f7-3b53db3be1a3.png)
![image](https://user-images.githubusercontent.com/2141507/63724895-32b6dc00-c859-11e9-8539-93266741fa9e.png)
 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Use binding to update global state manager"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Use JavaFX binding instead of a listener to update the global state manager. That seems to work more reliable and fixes a bunch of issues. In particular, fixes #3142  and fixes #4441.

Moreover, I fixed an error that was thrown when interacting with the toolbar (missing open statement but we were using reflection...).

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/16/19, 07:22:19 PM
4441.05325Incorrect count entry number"Steps to reproduce the behavior:
1. File -> (New Bibtex library) or (New Biblatex library)
2. Add some entry 
Number of entry will be 0. 
![image](https://user-images.githubusercontent.com/15236829/47781510-0ceba400-dd28-11e8-9293-dab196344bc5.png)
""Is it always an incorrect number, or does this only happen the first time you assign a item to a new group? 

I noticed this behaviour before, but as far as I remember you get the correct numbers of items contained in a group, if you save your database, then close JabRef and then reopen the database in JabRef.

This is still, obviously, a bug, but a less serious one, I guess - it is basically the updating process of the groups panel, that does not work properly (which I think is also responsible for some other issues we see with the groups panel). =||= Sometimes the number update if you switch to another db and then back again.  =||= @Siedlerchr However, on switching to another library, group count shows count of previous library.

I am looking into this issue right now, what I have found is that when the database is changed, a new instance of the `IntegerProperty hits` is created each time [[1]](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupNodeViewModel.java#L81). And `Text` (representing GUI for the number of hits) is being bound to this newly created instance [[2]](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupTreeView.java#L137), therefore the binding does not prove useful here.

The `Text` should still be updated with the value of `hits` anyway, but it turns out that the binding of `hits` to `Text` is done before `hits` is updated. It is because of another binding [[3]](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/groups/GroupTreeView.java#L107-#L114) which internally triggers a callback to `ViewModelTreeTableCellFactory`.

This results in `Text` holding previous value of `hits` and not the current one.

When JabRef starts up there are some initial calls made which have`hits` initialized to 0, and `Text` binds to that, until database is changed.   =||= Thanks for investigating this issue. This is how it is supposed to work:
- Whenever a library get's the focus, convert the group tree to a tree of `GroupNodeViewModel`s.
https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/gui/groups/GroupTreeView.java#L108-L113
- Bind the value of the `hit` property to the text field
https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/gui/groups/GroupTreeView.java#L137
- Whenever there are changes to the library, update the hit count (which should then propagate to the text label through the above binding)
https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/gui/groups/GroupNodeViewModel.java#L86-L87
https://github.com/JabRef/jabref/blob/6c61664a8f715e4011064ddca5cb0ace0b803131/src/main/java/org/jabref/gui/groups/GroupNodeViewModel.java#L216-L218

So it sound's reasonable that there is a problem with the binding of the text label to the correct hits property.
 =||= @tobiasdiez I think the problem might actually be concerned with `databaseContext.getDatabase().getEntries().addListener(this::onDatabaseChanged); `
I added a print statement inside the function `onDatabaseChanged` and it didn't print anything after a few entries were added.
The problem is related to this: https://stackoverflow.com/questions/44341400/whats-the-purpose-of-fxcollections-unmodifiableobservablelist/
This would solve issue [#4679](https://github.com/JabRef/jabref/issues/4679).

However, I think this issue might have more to do with the group being utilized in the line `text.textProperty().bind(group.getHits().asString());` is the older group. This causes value to not be set properly. But I think this happens only if the only group you have is All Entries. =||= @tobiasdiez and @Siedlerchr Why do we have the All Entries group available when no library has been opened in JabRef? It doesn't seem to serve any function. =||= You are right the ""All Entries group"" should only be shown when there is an open library. =||= The value should also be updated if the library is closed which also does not happen right now. =||= See https://github.com/JabRef/jabref/issues/3142. Will probably fix both of the issues. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0-dev--snapshot--2019-09-16--master--1bec5efd3
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft

As far as I can tell, this issue appears to be fixed in the current developer version of JabRef. Thank you very much!

What I do note, however, is that assigning articles to new groups creates a massive CPU workload (always around 95%-100% CPU workload on a 6-core Core i7). This CPU workload takes several minutes to disappear. I do not know, however, whether this issue is related to the current fix or if it is just related to the general performance problems, that JabRef has at the moment (see https://github.com/JabRef/jabref/issues/5071). =||= Follow-up: Note also, that the group entry count number is updated immediately, when an item is assigned to a new group. But the colour indicating the group assignment is not. The colouring of the group affinities is only updated if you select another item in the main table or another group in the panel and then re-select the newly assigned item.
As you can see, this is not a major issue, but I wanted to report it (see also here: https://github.com/JabRef/jabref/issues/3112#issuecomment-433878012). =||= Thanks for the feedback. I'll try to improve the performance in the coming weeks but first I wanted to fix as much bugs as possible. Please open another issue for the coloring problem. =||= I just realised that I had reported the colouring issue before. See here:
https://github.com/JabRef/jabref/issues/3112

and (similar but not the same) here:
https://github.com/JabRef/jabref/issues/2857

Thank you very much for your continuous work on JabRef! =||= @AEgit Did you encounter by chance this issue after the latest fix? #5327 
 =||= @Siedlerchr Sorry for taking so long. See my reply here: https://github.com/JabRef/jabref/issues/5327#issuecomment-532310470

No, I cannot reproduce the issue you reported. =||= Okay thanks for the info. Will test it again on another computer  =||= "Use binding to update global state manager"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Use JavaFX binding instead of a listener to update the global state manager. That seems to work more reliable and fixes a bunch of issues. In particular, fixes #3142  and fixes #4441.

Moreover, I fixed an error that was thrown when interacting with the toolbar (missing open statement but we were using reflection...).

----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/16/19, 07:22:19 PM
4846.05326Cleared search is redone after switching library"to reproduce:

1. open two libraries
2. search in first one
3. clear search in first
4. switch to second library
5. switch back to first

then in first library the search is restored.

info:
```
JabRef 5.0-dev--snapshot--2019-04-03--master--a273eb1fa
Mac OS X 10.14.3 x86_64 
Java 1.8.0_191
```""@bdcaf
I recently worked on the search feature and I would like you to try out this version here and report back if it is now working for you:
https://builds.jabref.org/convertSearchWorker/ =||= Did a quick test.  Unfortunately it still restores the deleted search. =||= Thanks for your feedback. Will look into this. in #4897  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix problem with search and switching between libraries"Fixes #4846 by using bindings instead of listeners.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/18/19, 10:02:37 AM
5327.05328Group Count shows the value of the other library"master 1bec5ef Refs #5325 @tobiasdiez 
Two libraries,
one with 16 entries, one with 2 entries.
All entries group shows always the value of the other library.
![grafik](https://user-images.githubusercontent.com/320228/65019167-fc85ed00-d92a-11e9-860a-02e3d3baa783.png)

![grafik](https://user-images.githubusercontent.com/320228/65019413-70c09080-d92b-11e9-9141-87af97e5836e.png)
""Can you please debug and/or describe how to reproduce this issue... for me everything is working  =||= Windows 10:
I just started the latest build from gradle with ./gradlew run
Two libs were opened at startup. 

Using the version from the installer is the same problem.
1. Start JabRef. Last two libraries are opened, focus is on the lib with 16 entries. No other group except the All entries group.
2. Group count is 16
3. Change to other library in tab , Group count is still 16
4. Change back to to other libe: Group count is 2
5. Always reproducible
 =||= It appears to me that the wrong bibdatabasecontext is passed  =||= I cannot reproduce it on my two installations... =||= JabRef 5.0-dev--snapshot--2019-09-16--master--1bec5efd3
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft

Cannot reproduce the issue mentioned.
Note, that my setup differs in two (?relevant) points:
1. Library 1 contains 6462 entries. Library 2 contains 4 entries.
2. I have several groups in both libraries, not just the ""All entries"" group.

When I change from one library to the next, the correct entry count is shown in the ""All entries"" group. Note, however, that it takes a few seconds for library 1 to display the correct entry count. Every time I switch from library 2 to library 1, the entry count displayed in ""All entries"" is initially 0 and then jumps to 6462 entries. I reckon, JabRef always recalculates the number of entries when switching between the libraries. This behaviour will not be noticed if the libraries contain only a few entries, but with thousands of them you can notice the delay (which I personally do not mind). =||= Very nice observation @AEgit that the libraries had to have an empty groups tree in order to replicate this issue. With this I was able to fix the problem, and as a thank you also fixed a few other groups related issue you reported a while ago (see #5328). =||= Can confirm it's fixed now! =||= @tobiasdiez Cheers, thanks for the nice bugfixes! =||= "Improve group coloring and item count"Fixes #5327. The problem was that `getTreeTableRow.getItem()` in `ViewModelTreeTableCellFactory` still returned the old item (and not the new one passed as method argument to `updateItem`).

 Since I was already looking at the code, this PR also fixes #3112 that improves the coloring after an entry was added to the group. Also fixes #2857 (at least I couldn't replicate it anymore).

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/18/19, 07:17:22 AM
2857.05328Group membership not indicated by colour if JabRef is opened and entry is selected immediately"JabRef 4.0.0-dev--snapshot--2017-05-20--master--01e854829
Windows 10 10.0 amd64 
Java 1.8.0_131

1. Open a large database (e.g, >6000 entries and several 100 static groups)
2. If you don't wait for a couple of seconds, before you start selecting an entry but instead choose to immediately select one, once the databse is visible (i.e., the graphical user interface of JabRef has appeared), the respective group of the selected entry WILL NOT be indicated by the green number
3. Once that has happened, no matter what entry you select, its group membership will not be indicated by colours in the groups panel
4. To overcome this issue, you have to close JabRef, then reopen it and wait for a couple of seconds, after having opened the database. I guess that some modules (?) are still loaded in the background - if you are too quick in using JabRef, the loading of those modules will be stopped, leading to this behaviour (which was, indeed, quite difficult to replicate, but I think I've now found the pattern)""JabRef 5.0-dev--snapshot--2019-09-18--master--1601770f4
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft

This appears to be fixed in the latest dev version. Cheers! =||= "Improve group coloring and item count"Fixes #5327. The problem was that `getTreeTableRow.getItem()` in `ViewModelTreeTableCellFactory` still returned the old item (and not the new one passed as method argument to `updateItem`).

 Since I was already looking at the code, this PR also fixes #3112 that improves the coloring after an entry was added to the group. Also fixes #2857 (at least I couldn't replicate it anymore).

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/18/19, 07:17:22 AM
5334.05338"Uncaught exception when opening file that no longer exists from the ""Recent libraries"" list""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev (commit db96f88 master) on Ubuntu-16.04 x86_64

[x ] I have tested the latest development version from * master db96f88 Fix problem with search and switching between libraries (#5326) from https://github.com/JabRef/jabref.git and the problem persists

java.lang.NullPointerException is raised (thrown)  when a file is selected for opening from the ""Recent libraries"" list, and this file no longer exists.

Note: Options|Preferences|File|Open last edited libraries at startup is *unchecked* in my configuration.

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Start the JabRef: `build/image/bin/JabRefMain &`
2. Navigate through ""File|Open library"" and open any library, say ""test1.bib""
3. Exit JabRef
4. Rename or remove the library, e.g. `mv test1.bib test2.bib`
5. Start the JabRef again: : `build/image/bin/JabRefMain &`
6. Navigate to ""File|Recent libraries"". Find the removed file, ""test1.bib"", and click its name.
An unhandled Java exception is reported by the GUI:
![Screenshot from 2019-09-20 14-53-30](https://user-images.githubusercontent.com/10668420/65325448-8944db00-dbb7-11e9-9a50-a54eaffb1a11.png)""JabRef 5.0-dev
Linux 5.0.0-29-generic amd64 
Java 11.0.4

Can confirm for the current dev version. The exception stacktrace is: 

`java.lang.NullPointerException
	at org.jabref/org.jabref.gui.menus.FileHistoryMenu.openFile(Unknown Source)
	at org.jabref/org.jabref.gui.menus.FileHistoryMenu.lambda$addItem$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.access$1200(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
` =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0-dev
Linux 5.0.0-29-generic amd64 
Java 11.0.4

I can confirm that this issue has been fixed in the current dev snap version. Cheers! =||= The issue is solved also in my installation, confirmed by starting the application as `./build/image/bin/JabRefMain &`

Thanks for the instant fix! =||= "Fix NPE when opening a non existing file from the recent files menu"Fixes #5334 

dialogService object was null, because the FileHistoryMenu class is initialized before the ctor of JabRef frame creates the dialog service object

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr09/21/19, 04:12:13 PM
5333.05347Keyword groups with keywords that consist only of spaces are displayed in a strange way"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev (commit db96f88 master) on Ubuntu-16.04 x86_64

[x ] I have tested the latest development version from * master db96f88 Fix problem with search and switching between libraries (#5326) from https://github.com/JabRef/jabref.git and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When a bibtex database contains an entry with a keyword with only spaces in its value:
```
@Article{id3,
authors = {B. Kolker},
title = {Lernolibro de lingvo Esperanto},
keywords = {human > languages, , interlinguistics},
}
```

JabRef displays a strangely shifted empty keyword group that contains *all* entries:
![Screenshot from 2019-09-20 14-39-51](https://user-images.githubusercontent.com/10668420/65324438-e7bc8a00-dbb4-11e9-9256-43f7c1220eb7.png)

Steps to reproduce the behavior:
1. Load the file `test-empty-keword-group-BROKEN.bib` or `test-empty-keword-group-BROKEN2.bib` (from 
[test-empty-keword-group.zip](https://github.com/JabRef/jabref/files/3635705/test-empty-keword-group.zip)) into JabRef:
```
build/image/bin/JabRefMain test-empty-keword-group-BROKEN.bib &
```

The correctly formatted file `test-empty-keword-group-OK.bib` behaves as expected.

The partially broken file, `test-empty-keword-group-FAIR.bib`, that contains an *empty* ""keyword"":
```
@Article{id3,
authors = {B. Kolker},
title = {Lernolibro de lingvo Esperanto},
keywords = {human > languages,, interlinguistics},
}
```
(note missing spaces between the two consecutive commas) is also displayed as expected.""JabRef 5.0-dev
Linux 5.0.0-29-generic amd64 
Java 11.0.4

Can confirm this issue. =||= JabRef 5.0.0-dev--2019-10-03----16eca244
Windows 10 10.0 amd64 
Java 11.0.4

Can confirm this issue has been fixed in the current development version. =||= "Fix display bug for keyword groups with empty keywords"Fixes #5333 by filtering out empty keywords.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/02/19, 07:43:35 PM
5348.05351ctrl+q  throws exception"JabRef 5.0-dev
Linux 5.2.15-200.fc30.x86_64 amd64 
Java 11.0.4

Steps to reproduce:

1. updated to latest snap version
2. start jabref
3. ctrl + q & menu-based quit both throw exception

Paste your log details here.

<details>
<summary>Detail information:</summary>
java.lang.NoClassDefFoundError: Could not initialize class java.awt.Window
	at org.jabref/org.jabref.gui.JabRefFrame.tearDownJabRef(Unknown Source)
	at org.jabref/org.jabref.gui.JabRefFrame.quit(Unknown Source)
	at org.jabref/org.jabref.gui.JabRefFrame$CloseAction.execute(Unknown Source)
	at org.jabref/org.jabref.gui.actions.JabRefAction.lambda$new$2(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ControlAcceleratorSupport.lambda$doAcceleratorInstall$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.KeyboardShortcutsHandler.processAccelerators(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.KeyboardShortcutsHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.access$1500(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)


</details>"This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= agreed. =||= Fix exception when closing JabRef"Fixes #5348 by using JavaFX windows instead of awt windows.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/25/19, 09:44:44 PM
5254.05352The context menu for entries is gone"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev
<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
There is no context menu for Bibtex entries anymore (e.g. to change a field to Unicode)

Steps to reproduce the behavior:
1. Right click on any field (the only remaining option is ""select all"")

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->""Reason is that the following code was commented-out:
https://github.com/JabRef/jabref/blob/f85c081e75e373820077e720fe9d48db6542704c/src/main/java/org/jabref/gui/fieldeditors/EditorTextField.java#L51-L61 =||= Ah, yes I remember it was accessing jdk internals or other forbidden things
 =||= This will not be easy to make work again I guess.

The relevant code moved now to TextInputControlBehavior
https://github.com/javafxports/openjdk-jfx/blob/662281e733fe59c667e8ba5e1d45eef1fcd93681/modules/javafx.controls/src/main/java/com/sun/javafx/scene/control/behavior/TextInputControlBehavior.java#L661.

Thus, it would be simple to derive from this behavior class and add additional items to the context menu. However, I don't see a way to replace the original behavior by our customized one, because the behavior is initialized here:
https://github.com/javafxports/openjdk-jfx/blob/4f0addff16de7182752bc60541f44baeb0e99d2a/modules/javafx.controls/src/main/java/javafx/scene/control/skin/TextFieldSkin.java#L151-L154
and `behavior` in `TextFieldSkin` is private. Thus, there seems to be no easy way to register a custom behavior class. Moreover, there are no real plans from the JavaFX team to make the behavior part open to customization: https://github.com/javafxports/openjdk-jfx/issues/241.

Only option I see is the following:
Add listener for `ContextMenuEvent` and then get the `behavior.contextMenu` via reflection to add items. That's really ugly.

Question asked: https://github.com/javafxports/openjdk-jfx/issues/583 =||= The only other ways is to only add a new context menu. This disables the default one.  =||= What about a button for each text field? That button could also indicate possible issues (like the ugly yellow triangle to the left bottom of each field, which was always a pain to hit). =||= This is now re-implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Bring back the context menu"As explained in https://github.com/JabRef/jabref/issues/5254#issuecomment-526588221 it is no longer possible to customize the context menu items, because the classes related to the text field behavior are not accessible. Thus, instead I simply copied the relevant code from openjdk. Pretty ugly workaround... Fixes #5254 and refs https://github.com/javafxports/openjdk-jfx/issues/583.

Moreover, I removed the custom tab handling because it is now working as expected (i.e. #2902 is fixed in Java 9+).

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/26/19, 11:18:42 AM
5022.05354group view update missing when scrolling"JabRef 5.0-dev, latest snap version
Linux 5.1.5-300.fc30.x86_64 amd64 
Java 1.8.0_212

a) I have many many groups, so that I can only view groups by scrolling up/down.
b) an entry X is member of several groups, one top and bottom group (bottom/top as in view-wise).

expected behaviour:
when I select entry X, the respective groups are highlighted green. I can scroll up and down and I can view which groups the entry is part of.

actual behaviour:
 when I select entry X, the respective visible groups are highlighted green. Any non-visible group is not highlighted. When I scroll up and down, all highlights are lost.


screencast at https://owncloud.itu.dk/index.php/s/aXtIQqGm7CbayBb"Fix group color when scrolling"Fixes #5022. Problem was that the pseudo-class was not initialized correctly but was only triggered upon changes.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/26/19, 06:38:09 PM
4868.05355Default colour of group symbol for new groups deviates from standard colour of group symbol of pre-existing database"JabRef 5.0-dev--snapshot--2019-04-08--master--3d2d61d0c
Windows 10 10.0 amd64 
Java 1.8.0_201

Steps to reproduce the behavior:
1. Open a pre-existing database and open the groups panel
2. The triangle symbol for all pre-existing groups is grey
3. Add a new subgroup (note that the default colour is set to `#FFFFFF`
4. The triangle symbol for the subgroup appears in white, i. e. differs from ALL other groups in the database

Is there a particular reason why new groups have a different default colour compared to pre-existing groups? Or is this related to the fact that the original database (incl. groups) was created in JabRef 3.8.2 and when importing the file the default for the groups colour is set to a different colour than the default for creating new groups within JabRef 5.0?


This is just a minor issue, but I wanted to report it, since the behaviour appears not consistent. In fact, when I first encountered this issue, I thought the different colour was meant to emphasize the ""Hierarchical context"", i. e. ""Refine supergroup"" and ""Include supergroup"" groups would appear white, but ""Independent group"" groups would appear grey (since I only use static ""Independent group"" groups). Since the creation of ""Independent group"" groups is now possible again (see: https://github.com/JabRef/jabref/issues/4783) it is now obvious to me, that this different default colour applies to all newly created groups.""I could not reproduce it in the current 5.0 dev:
I had an existing db with a group color of turquoise (previously modified by 5.0) or whatever the color is called and opened it in JabRef. The triangle is also the color.
![grafik](https://user-images.githubusercontent.com/320228/56496318-388e6080-64f9-11e9-8076-a7341c6769de.png)

When I then add a new subgroup (default color white) the new subgroup color is also white.
 =||= > When I then add a new subgroup (default color white) the new subgroup color is also white.

This is exactly the problem of @AEgit  ;-)

Old groups do not have any color defined, but newly added groups have by default the color white. =||= @Siedlerchr 
As mentioned by @matthiasgeiger this is the problem I mentioned. Old groups get assigned some default colour (in my case ""grey"") in JabRef 5.0 (I don't know whether this applies only to groups imported from 3.8.2 or more generally). But when you generate a new group in JabRef 5.0 it won't have the same colour, but the default colour stored in the preferences (in my case ""white""). =||= I think there are in general two approaches to fix it:
- make the ""non-color grey"" the default color instead of white
- make the usage of color only an option in the ""Create/Edit"" group window: Only if activated the set color will be used.

If the grey is specified somewhere in our style information we could simply use this information - if this is somehow OS specific JavaFX standard the second option might be necessary.

... or as a third option: Run a migration as soon as a database without color information for groups is openened (which might affect downwards compatibility - but if I remember it correctly there are already some other breaking changes regarding the groups serialization, right?). =||= If no color is specified (e.g. since the group was created before colors were supported) then it is displayed in dark gray.

The problem is that the color selector in the group add/edit dialog does not support a ""not set option"" and always returns white even if the user didn't select a color. Easiest solution is probably to preselect the dark gray for new groups. =||= Okay... Nonetheless I think that the option to ""not having a color"" should be possible because using any color will lead to such effects in the maintable:

![Grabbed_20190423-092645](https://user-images.githubusercontent.com/676652/56562677-37693c00-65aa-11e9-91e2-cfa5b9ff6c71.png)

I assume that it is possible to disable the whole color picker? So I would propose to add an additional checkbox ""use specific color"" that is triggering the enabled status of the color picker - and if not checked no color should be stored for the group. =||= I can confirm that this has been fixed in:
JabRef 5.0-dev--snapshot--2019-09-26--master--1a6c92c79
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft =||= "Fix default group color"Now groups have a dark gray instead of white as their default color. Fixes #4868.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez09/26/19, 06:37:44 PM
5349.05381Search triggers too soon when entering regex"1. Enable regex mode in search.
2. Start typing `F[` 
3. Search triggers and results in regex error:
![grafik](https://user-images.githubusercontent.com/320228/65603202-870ec200-dfa5-11e9-8b24-8fc7f28386f4.png)

Idea would be to only trigger regex search if user stops typing or if focus is left?""How do I enable regular expression? The key binding <kbd>CTRL</kbd>+<kbd>SHIFT</kbd>+<kbd>F</kbd> did not open global search settings window. Also, I am not able to find the toggle buttons for regex and case sensitive search. =||= Hi,
this is another odd thing. You first have to enable autocompletion in the preferences.
Then enter a word and then you can use the toggle buttons.
 =||= Hello, 
How about instead of waiting for the user to input the text or for the search field to lose focus, we consume the exception caused due to incorrect regex? 
Instead of displaying the exception we can have an incorrect syntax indicator next to the search field?    =||= That is a good idea, display the validation indicator like its done in the preference or other places now  =||= Does this ref https://github.com/JabRef/jabref/pull/3871#issuecomment-375055243 somehow? =||= "Handle regular expressions in global search"Fixes #5349

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [X] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci10/27/19, 09:12:36 PM
5359.05392"Field ""editor"" appears twice in all book-type-entries after saving bibtex file""Every time I save my library as bibtex-file, entries of type ""Book"" and ""InBook"" containing the field ""editor"" are saved with two fields ""editor"". This happens to all such entries when saving any modification in the file.

Version info:
JabRef 5.0-dev (installed via SNAP-package)
Linux 5.0.0-29-generic amd64 
Java 1.8.0_222"Interestingly I can reproduce this problem...  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Fix 5359: Writing of Editor field is duplicated"Fixes #5359 
Serialization of `OrFields` was not implemented properly as the currently written field was not stored correctly.

----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- ~~ Screenshots added in PR description (for bigger UI changes) ~~
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- ~~Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)~~"Matthias Geigermatthiasgeiger10/06/19, 08:19:15 AM
5169.05395Exception when merging entries"Hello, I am on Fedora 30, running Jabref Snap Edge

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Select two items
2. Open Merge entries dialogue.
3. Click Merge entries.
4. Watch Exception thrown.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
1:06:21.749 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IndexOutOfBoundsException: Index: 5, Size: 4
	at java.util.ArrayList.rangeCheck(ArrayList.java:657) ~[?:1.8.0_222]
	at java.util.ArrayList.get(ArrayList.java:433) ~[?:1.8.0_222]
	at com.sun.javafx.collections.ObservableListWrapper.get(ObservableListWrapper.java:89) ~[jfxrt.jar:?]
	at javafx.collections.FXCollections$SynchronizedList.get(FXCollections.java:1085) ~[jfxrt.jar:?]
	at javafx.collections.FXCollections$UnmodifiableObservableListImpl.get(FXCollections.java:936) ~[jfxrt.jar:?]
	at org.jabref.gui.util.MappedList.sourceChanged(MappedList.java:67) ~[JabRef-5.0-dev.jar:?]
	at javafx.collections.transformation.TransformationList.lambda$getListener$1(TransformationList.java:106) ~[jfxrt.jar:?]
	at javafx.collections.WeakListChangeListener.onChanged(WeakListChangeListener.java:88) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(ListListenerHelper.java:164) ~[jfxrt.jar:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73) ~[jfxrt.jar:?]
	at javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233) ~[jfxrt.jar:?]
	at org.jabref.gui.util.UiThreadList.lambda$sourceChanged$934(UiThreadList.java:15) ~[JabRef-5.0-dev.jar:?]
	at com.sun.javafx.application.PlatformImpl.lambda$null$117(PlatformImpl.java:295) ~[jfxrt.jar:?]
	at java.security.AccessController.doPrivileged(Native Method) ~[?:1.8.0_222]
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$118(PlatformImpl.java:294) ~[jfxrt.jar:?]
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[jfxrt.jar:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$null$450(GtkApplication.java:139) ~[jfxrt.jar:?]
	at java.lang.Thread.run(Thread.java:748) [?:1.8.0_222]
  ```
</details>""The new java 5.0 alpha now requires java 11 and openjfx11, so you no longer need to run a snap version.
Please report back if this is fixed =||= @Siedlerchr  I can reproduce this issue, but I'm not sure it's simply a snap error.
Is there a debug log we can get of the operation? =||= I can reproduce this issue on Ubuntu-16.04 x86_64, running the master db96f88 build from https://github.com/JabRef/jabref.git, just running the script `build/image/bin/JabRefMain` from the command line (thus I am not using snap, I suppose). =||= Could also confirm this under windows.

I have 8 entries and merge two of them.
This looks like it's somehow a threading issue, because in merge two entries get removed and one new entry is added.  Tried to debug it, but not really found the root cause.

```
java.lang.IndexOutOfBoundsException: Index: 7, Size: 4
	at java.base/java.util.ArrayList.rangeCheckForAdd(ArrayList.java:787)
	at java.base/java.util.ArrayList.add(ArrayList.java:512)
	at org.jabref/org.jabref.gui.util.MappedList.sourceChanged(MappedList.java:67)
	at javafx.base/javafx.collections.transformation.TransformationList.lambda$getListener$0(TransformationList.java:106)
	at javafx.base/javafx.collections.WeakListChangeListener.onChanged(WeakListChangeListener.java:88)
	at javafx.base/com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(ListListenerHelper.java:164)
	at javafx.base/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(ListListenerHelper.java:73)
	at javafx.base/javafx.collections.ObservableListBase.fireChange(ObservableListBase.java:233)
	at org.jabref/org.jabref.gui.util.UiThreadList.lambda$0(UiThreadList.java:15)
	at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)
	at java.base/java.security.AccessController.doPrivileged(Native Method)
	at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)
	at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)
	at java.base/java.lang.Thread.run(Thread.java:834)

``` =||= "Fix exception when merging entries"The problem was that `sourceChanged` was invoked asynchronous and thus the information in the change event could be obsolete if another thread changed the underlying list in the meantime. Solution: run `sourceChanged` on the JavaFX thread but synchronously.
Fixes #5169.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/06/19, 11:41:31 AM
4303.05400Jabfox not working with 5.0 dev"- [ ] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists
JabRef 5.0-dev--snapshot--2018-08-24--master--f43b9c7e8
Windows 7 6.1 amd64 
Java 1.8.0_181

Steps to reproduce:

1. I tried JabFox from Firefox Quantum 61.0.2. (64Bit)
2. the files where correctly placed and the 

`REG ADD ""HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\NativeMessagingHosts\org.jabref.jabref"" /ve /d ""C:\Program Files\JabRef5\jabref.json"" /f

C:\Windows\system32>REG ADD ""HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\NativeMessagingHosts\org.jabref.jabref"" /ve /d ""C:\Program Files\JabRef5\jabref.json"" /f
Der Vorgang wurde erfolgreich beendet....`

was correctly executed.
3. Pressing the Jabfox icon on the page of on https://doi.org/10.1016/B978-0-12-385095-9.00175-5
resulted in some action but the JabRef import window never opened, not even in the background.

It appears that Jabfox is not working with 5.0 dev.""Can you please try out the latest development version. I fixed a few import-related things a few days ago which should make JabFox work again. (By the way, the checkbox at the top of the issue template asking you to try the most recent version is there for a purpose...). =||= I have tested the version from
JabRef 5.0-dev--snapshot--2018-09-03--master--b39ed7b94
Windows 7 6.1 amd64 
Java 1.8.0_181
I can see in firefox the ""Import references into JabRef"" but that entry is bleached and does not react to clicking. The export to Zotero works.
 =||= I also tested the doi entry above. This shows a Jabref symbol in firefox but the jabref inport window does not open. Which Zotero is neccessary for importing? =||= Even with the latest update from today, Jabfox is not working

![grafik](https://user-images.githubusercontent.com/9216487/46365113-03fbaa00-c678-11e8-813c-d9075b7deb85.png)

Jabfox is below the ... but when you want to click it, it is bleached and nothing happens when clicked.
The jabref.json is correctly in the jabref5 directory and the 

> HKEY_LOCAL_MACHINE\SOFTWARE\Mozilla\NativeMessagingHosts\org.jabref.jabref

has the correct value.

JabRef 5.0-dev--snapshot--2018-10-02--master--0b45ab51c
Windows 7 6.1 amd64 
Java 1.8.0_181
 =||= Cannot confirm for:

JabRef 5.0-dev--snapshot--2019-04-08--master--3d2d61d0c
Windows 10 10.0 amd64 
Java 1.8.0_201 =||= Can confirm issue for:

JabRef 5.0-dev--snapshot--2019-05-30--master--ef2ebe165
Windows 10 10.0 amd64 
Java 1.8.0_181

Clicking the JabFox icon anywhere goes through the motions, but gets stuck at [Importing in JabRef...]. In the plugin management section of Firefox it says the connection to JabRef is successful. =||= OK, an update:

Now when clicking on JabFox's icon, the signal is sent to JabRef. Unfortunately, it opens a new instance of JabRef, does not offer an import dialog, and creates a completely new database in a new tab (""untitled"") that contains the new entry.

I remember there was a setting somewhere to prevent running multiple instances of JabRef (which could potentially solve the first problem), but I couldn't find it in the Preferences window.

Here's a copy of the log:

<code>

Port is blocked
java.net.BindException: Address already in use: JVM_Bind
	at java.net.DualStackPlainSocketImpl.bind0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketBind(Unknown Source)
	at java.net.AbstractPlainSocketImpl.bind(Unknown Source)
	at java.net.PlainSocketImpl.bind(Unknown Source)
	at java.net.ServerSocket.bind(Unknown Source)
	at java.net.ServerSocket.<init>(Unknown Source)
	at org.jabref.logic.remote.server.RemoteListenerServer.<init>(RemoteListenerServer.java:29)
	at org.jabref.logic.remote.server.RemoteListenerServerThread.<init>(RemoteListenerServerThread.java:18)
	at org.jabref.logic.remote.server.RemoteListenerServerLifecycle.open(RemoteListenerServerLifecycle.java:43)
	at org.jabref.logic.remote.server.RemoteListenerServerLifecycle.openAndStart(RemoteListenerServerLifecycle.java:70)
	at org.jabref.JabRefMain.handleMultipleAppInstances(JabRefMain.java:149)
	at org.jabref.JabRefMain.start(JabRefMain.java:70)
	at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$161(LauncherImpl.java:863)
	at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$174(PlatformImpl.java:326)
	at com.sun.javafx.application.PlatformImpl.lambda$null$172(PlatformImpl.java:295)
	at java.security.AccessController.doPrivileged(Native Method)
	at com.sun.javafx.application.PlatformImpl.lambda$runLater$173(PlatformImpl.java:294)
	at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)
	at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at com.sun.glass.ui.win.WinApplication.lambda$null$147(WinApplication.java:177)
	at java.lang.Thread.run(Unknown Source)

Opening: D:\[edited out]\JabRef 5.bib
Could not connect to the update server. Please try again later and/or check your network connection.
java.net.ConnectException: Connection refused: connect
	at java.net.DualStackPlainSocketImpl.connect0(Native Method)
	at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
	at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
	at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
	at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
	at java.net.PlainSocketImpl.connect(Unknown Source)
	at java.net.SocksSocketImpl.connect(Unknown Source)
	at java.net.Socket.connect(Unknown Source)
	at sun.security.ssl.SSLSocketImpl.connect(Unknown Source)
	at sun.security.ssl.BaseSSLSocketImpl.connect(Unknown Source)
	at sun.net.NetworkClient.doConnect(Unknown Source)
	at sun.net.www.http.HttpClient.openServer(Unknown Source)
	at sun.net.www.http.HttpClient.openServer(Unknown Source)
	at sun.net.www.protocol.https.HttpsClient.<init>(Unknown Source)
	at sun.net.www.protocol.https.HttpsClient.New(Unknown Source)
	at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect0(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
	at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)
	at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
	at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
	at org.jabref.logic.util.Version.getAllAvailableVersions(Version.java:96)
	at org.jabref.gui.help.VersionWorker.getNewVersion(VersionWorker.java:53)
	at org.jabref.gui.util.BackgroundTask$1.call(BackgroundTask.java:46)
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:122)
	at javafx.concurrent.Task$TaskCallable.call(Task.java:1423)
	at java.util.concurrent.FutureTask.run(Unknown Source)
	at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.util.concurrent.FutureTask.run(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.lang.Thread.run(Unknown Source)

</code> =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0.0-dev--2019-10-17----e81d58c51
Windows 10 10.0 amd64 
Java 12.0.2

Can confirm that this appears to be fixed in the current dev version. =||= @tobiasdiez 
There seems to be something very strange with Jabfox:
The files JabRef.bat and JabRef.ps1 are not to be found where they seemed to be. They are obviously gone from master since the directory master/buildres/windows has only files to support linux. The file JabrefHost.ps1 is obviously not the file to where the $jabRefJarFileName is to be changed. 
I wonder whether the move of Jabref.jar to the subdir will be stable and whether the subdir should added to $jabRefJarFileName is stable than it should become fixed in Jabref.ps1.
I could manage to get the Jabfox icon in the url-block of firefox, but not the opening of the jabref import dialog. Since I was not sure whether the version was the correct one, I started to download the version from 2019-10-17 which failed (as mentioned in the forum). I then removed the old versions of jabref5 and got rid also of .ps1 and the .bat file. The version 2019-10-18 works. =||= "Fix JabFox integration"With the new jpackage build JabFox stopped working because the registry values were not specified correctly. This fixes #4303 and fixes #4737. Moreover, the correct icon is now displayed in the installer.

If somebody has a bit of time, then he is invited to create a picture that is shown on the left in the installer (should have dimensions 493 × 312). @stefan-kolb :-)

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/08/19, 04:15:35 PM
4737.05400Register native messaging host also when user has no admin rights"As of now, the installer adds an entry in the registry pointing to the JabRef executable:
https://github.com/JabRef/jabref/blob/1d8b3aad2f9ca4441c41fa6fa3dfac61e45cb5ef/jabref.install4j#L578

Usually, this key is placed under `HKEY_LOCAL_MACHINE`.
https://github.com/JabRef/jabref/blob/1d8b3aad2f9ca4441c41fa6fa3dfac61e45cb5ef/jabref.install4j#L580-L585
However, if the user does not have admin rights, it should instead be placed under `HKEY_CURRENT_USER`."Fix JabFox integration"With the new jpackage build JabFox stopped working because the registry values were not specified correctly. This fixes #4303 and fixes #4737. Moreover, the correct icon is now displayed in the installer.

If somebody has a bit of time, then he is invited to create a picture that is shown on the left in the installer (should have dimensions 493 × 312). @stefan-kolb :-)

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/08/19, 04:15:35 PM
5084.05432Cursor jumps from Search to Entry window and overrides content"Using
JabRef 5.0-dev--snapshot--2019-06-16--master--8d99db113
Linux 4.15.0-52-generic amd64 
Java 1.8.0_172

When I type a search term into the search field and the entry editor tab is open, sometimes
at arbitrary unexpected moments, the cursor jumps into the first field of the entry window, 
removing and overriding the content there. 
I am now trying to avoid this by always closing the edit window before using the search field, but when I forget, it does still happen.
I have seen #1938 but as that one is for version 3 and closed I thought it may be more appropriate to open a new issue. ""I am facing same problem even on latest version: JabRef 5.0-dev--snapshot--2019-07-29--master--f6eb5344a =||= Thanks to @tobiasdiez  this is now fixed in the lastest master

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix cursor jump"Fixes #5084. The entry editor was very aggressive and stole the focus from the search bar or from the main table. This lead to problems like #5084 where users overwrite the contents of the entry while doing a search. Moreover, it made it impossible to navigate between entries using the arrow keys in the main table. Both of these issues are fixed now.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/12/19, 08:10:23 PM
5447.05448"Action ""Import into current library"" is active without any open library""JabRef version 5.0.0 (develop) on Ubuntu 18.04

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Start JabRef
2. Choose menu File - Import - Import into current library
3. Try to import some bib entries
4. Alert dialog with NullPointerException is shown

![Screenshot from 2019-10-14 21-57-20](https://user-images.githubusercontent.com/2326303/66779120-bb530f80-eecd-11e9-918b-0e42572e80a2.png)""The import into current library should be disabled if  there is no library open =||= Yes, I'll try to find a fix for that. =||= https://github.com/JabRef/jabref/blob/d2ddff574cfdb8d60a09f8f783f6bee92b85c60c/src/main/java/org/jabref/gui/actions/ActionHelper.java#L9-L11
should be helpful =||= Yes, I already found that one... :-D =||= Refs https://github.com/JabRef/jabref/issues/4795 =||= "Fix nullpointer on import"
Fixes #5447
----
- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
  --> not testable with unit tests
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
  --> not needed
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Jan Schäferb0n54110/15/19, 03:35:38 PM
5244.05451Suggestions for improving the entry preview"To prevent further commenting on the pull request I have opened a new issue:


>Hmm, ok. Regarding the points:

> 1. So far the issue with the entry editor does not seem to be (fully?) resolved. Furthermore, note the problems with the focus (searching terms and then suddenly making changes in the entry editor) makes this change currently dangerous. But I see, what is intended here.
> 2. Ok, that makes sense. But then, it would probably be necessary to have a single entry tab (not split among different tabs) - at least, that is how Mendeley is doing this. Personally, I liked it the way JabRef had implemented things before. I am not so sure, whether people are happy with the current solution, i. e. entry preview + open editor (but with multiple entry tabs).
> 3. Not so sure about the space. Currently using a 1920x1080 screen, with JabRef using up half of the screen. There, it is definitely too small. At work I have a 4k screen, where JabRef is using up a quarter of the screen (= +- JabRef in full screen on a 1920x1080 screen). I don't think JabRef is supposed to be used in full screen mode. I don't think many people have larger screens (especially when you include laptop users).
> 

_Originally posted by @AEgit in https://github.com/JabRef/jabref/pull/4976#issuecomment-524629484_""> I would very much like a simple and one-click way to disable showing the citation preview. I spent quite some time looking for it when I got the update since I could not believe that this change was introduced without an option to switch off the preview that takes away space and cpu cycles for keeping it updated.


_Originally posted by @johann-petrak in https://github.com/JabRef/jabref/pull/4976#issuecomment-524801601_ =||= To add to this issue, I copy over also the other message I had written there.

> I know this is a big thing to ask but can you please revert this change and/or make it just optional. I have just had a look at JabRef 5.0-alpha--snapshot--2019-08-25--master--0c342bdc7 to test #4808 (comment) just to realise that the entry preview is no longer automatically shown at all.
> 
> I am heavily reliant on using the entry preview. I often tend to quickly go through different entries and the entry preview gives me a quick overview of the entry. Now I always have to open the entry editor just to see the preview. My feeling is, that this change was introduced by people who actually do not even use the entry preview at all (see also comment here: #4976 (comment)). This new behaviour is completely different from the old JabRef behaviour and from similar reference managers (e.g., Mendeley).
> So, unless you can suggest a change in the way I should use JabRef now (maybe I just don't understand, how the entry preview is now supposed to be used) while keeping my user scenario - i. e. quickly cycle through entries and always get a quick summary of the respective entry - I would ask to drop this change or make it optional.

_Originally posted by @AEgit in https://github.com/JabRef/jabref/pull/4976#issuecomment-524625559_ =||= JabRef 5.0-alpha--snapshot--2019-08-25--master--0c342bdc7
Windows 10 10.0 amd64 
Java 1.8.0_221

Ok, so I have played around a little bit with the new entry preview, and I can now definitely say, that I would like to see the old behaviour re-instated or alternatively to make the new behaviour optional.

First of all, it is no longer possible to quickly cycle through different entries and get a quick idea what they are about. They always have to be opened to see the entry preview (I have already mentioned this in previous posts).

Second, there was the suggestion to keep the entry editor always open so that it would be possible again to cycle through all the entries while seeing the entry preview (see https://github.com/JabRef/jabref/pull/4976#issuecomment-524625856). I am now confident that this is not a good solution for the problem, since there is not enough space for both the entry editor AND the entry preview, when the group panel is opened as well. I provide a picture to give you an idea of the problem.

![Untitled](https://user-images.githubusercontent.com/12767489/63773515-36874480-c8d3-11e9-9983-6481f062794f.png)


Note, that JabRef here is using half (!) of the screen on a 24'' monitor with a resolution of 1920x1080. This definitely does not do a good job at the moment. I suggest to revert the changes of https://github.com/JabRef/jabref/pull/4976#issuecomment-524625559 or to come up with a better solution.

EDIT: My impression is that many of the current UI changes, especially those focused on the entry preview have been made without having the group panel open. If I close the group panel (which I would never do for my actual work, since the groups are essential), there seem to be fewer issues with the UI, i. e. often I now have enough space. But when the groups panel is open, most of the time, the UI looks wierd and horizontal space is missing (also because new elements use up more space, than they would need to). For further changes to the UI I would therefore recommend to always have the groups panel open as well. =||= Entry preview does not adapt to dark mode:
![grafik](https://user-images.githubusercontent.com/320228/64281219-f3704580-cf52-11e9-8146-acca8816ebc5.png)
 =||= I don't know whether this has been mentioned already, but the two screenshots posted in this thread emphasise another issue with the current entry editor. It DOES NOT do an automatic return, which leads to entry content disappearing in the UI, if the content is too long for the entry row (see for example the author field in the post above: https://github.com/JabRef/jabref/issues/5244#issuecomment-528028140). This is especially a problem with the newly introduced entry preview that is now part of the entry editor. =||= Ah you mean wrapping text. =||= Hmm, yes - I am just comparing what the current development version does VS. JabRef 3.8.2 (which I am still using for actual work). =||= Might be related to the automatic return/line break/text wrapping issue:

https://github.com/JabRef/jabref/issues/3823
https://github.com/JabRef/jabref/issues/5021 =||= In the latest development version, you have now the option to show the preview as a tab in the entry editor (Preferences > Entry preview). Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0.0-dev--2019-10-17----e81d58c51
Windows 10 10.0 amd64 
Java 12.0.2

Very nice, this is a big step forward. I can confirm that the entry preview as a separate tab works as expected. There are some smaller issues with the current approach, which have been reported here but for which it probably better to open separate issues (I shall do that now). =||= **show the preview as a tab**: You have to restart JabRef after enabling this option so it becomes effective. Is that a bug? =||= @sebastian-boecker : See here https://github.com/JabRef/jabref/issues/5464 =||= "Add option to display entry preview as tab in entry editor"Adds the entry preview as a tab. Fixes #5244. Also fixes #5446. Plus a bit of refactoring

![image](https://user-images.githubusercontent.com/5037600/66870882-b3b16a80-efa2-11e9-9900-c2d9ec3dbfb0.png)


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/16/19, 07:01:51 PM
5446.05451Uncaught Exception occurred in Thread[JavaFX Application Thread,5,main]"JabRef version 
JabRef 5.0.0-dev--2019-10-14----824b10363
Linux 5.0.0-31-generic amd64 
Java 12.0.2
on Linux 18.04 installed from .deb file downloaded from  https://builds.jabref.org/master/jabref_5.0.0-1_amd64.deb

Steps to reproduce the behavior:
1. Open JabRef with .bib file
2. Double click on entry to open entry editor
3. Exception is thrown

<details>
  <summary>Log File</summary>
  
  ```
java.lang.NullPointerException
	at org.jabref/org.jabref.gui.fieldeditors.FieldEditors.getSuggestionProvider(Unknown Source)
	at org.jabref/org.jabref.gui.fieldeditors.FieldEditors.getForField(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.FieldsEditorTab.setupPanel(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.FieldsEditorTab.bindToEntry(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditorTab.notifyAboutFocus(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditor.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/org.fxmisc.easybind.EasyBind.lambda$subscribe$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.SelectionModel.setSelectedItem(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ModifiableObservableListBase.add(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditor.recalculateVisibleTabs(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditor.setEntry(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$createMainTable$21(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$createMainTable$22(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.SelectedItemsReadOnlyObservableList.lambda$new$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ReadOnlyUnbackedObservableList._endChange(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MultipleSelectionModelBase$SelectedIndicesList._endChange(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.ControlUtils.updateSelectedIndices(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.fireCustomSelectedCellsListChangeEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.clearAndSelect(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewSelectionModel.clearAndSelect(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TableCellBehaviorBase.simpleSelect(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TableCellBehaviorBase.doSelect(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.CellBehaviorBase.mousePressed(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>""Could confirm this under windows, too:
1. Create a new biblatex library
2. Paste a doi 
3. Double click to open the entry editor  =||= JabRef 5.0.0-dev--2019-10-14----d2ddff574
Windows 10 10.0 amd64 
Java 12.0.2

I can confirm this issue as well. =||= JabRef 5.0.0-dev--2019-10-14----d2ddff574
Linux 5.3.6-arch1-1-arch amd64 
Java 12.0.2 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Now Java just crashed when starting Jabref, core dump attached.

[hs_err_pid78360.log](https://github.com/JabRef/jabref/files/3735996/hs_err_pid78360.log)

Note that ""The crash happened outside the Java Virtual Machine in native code."" =||= The exception is thrown from some network/proxy detection class in the VM. Do you maybe have an old instance of java or jabref lurking around?

 =||= I have Java 12.0.2 and the JabRef version from today. =||= @tobiasdiez Thanks, it works again under:
Ubuntu 18.04 with Gnome desktop with the latest .deb build.

JabRef 5.0.0-dev--2019-10-16----e36daae20
Linux 5.0.0-31-generic amd64 
Java 12.0.2 =||= @Siedlerchr, you were right, the problem's gone now. =||= JabRef 5.0.0-dev--2019-10-17----e81d58c51
Windows 10 10.0 amd64 
Java 12.0.2

Can confirm that the issue is fixed in the current development version. =||= how to fix it? =||= I am getting this exception still in 2021..
 =||= You need to report which JabRef version you are using. =||= JabRef 5.2--2020-12-24--6a2a512
Windows 10 10.0 amd64 
Java 14.0.2

I am also running into this issue. It is only occurring with one of my libraries and not any others. 
[LogFile.txt](https://github.com/JabRef/jabref/files/6517512/LogFile.txt)
 =||= Have you tried the latest dev build?
https://builds.jabref.org/main/

Remember to make a backup of your JabRef database before installing the current development version. =||= @AEgit I tried the dev build and it appears to be working fine now! Thanks. =||= Cheers! =||= "Add option to display entry preview as tab in entry editor"Adds the entry preview as a tab. Fixes #5244. Also fixes #5446. Plus a bit of refactoring

![image](https://user-images.githubusercontent.com/5037600/66870882-b3b16a80-efa2-11e9-9900-c2d9ec3dbfb0.png)


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/16/19, 07:01:51 PM
5277.05454Displaced hover indicator in comboBox lists"JabRef 5.0-dev
Windows 10 10.0 amd64 
Java 11.0.3-bellsoft

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

The ViewModelCellListFactory produces strange behaviour in combination with comboBoxes. In long lists the hover-indicator is displaced in relation to how far the list can be scrolled down.
Appears only with comboBoxes, other lists seem to work well.
Despite this bug, selection works.

Bug was mentioned in the PRs #5185 and #5265 

Steps to reproduce the behavior:
1. Open Fetcher SidePane
2. Change Repository

![combobox-cellfactory](https://user-images.githubusercontent.com/50491877/64158167-4b665980-ce38-11e9-81ae-15ed90c501c6.gif)""JabRef 5.0-dev
Linux 5.0.0-27-generic amd64 
Java 1.8.0_222

Cannot reproduce the behaviour mentioned above. I reckon this has now been fixed with https://github.com/JabRef/jabref/pull/5265 (?). =||= I will start investigations on this =||= JabRef 5.0-dev
Linux 5.0.0-27-generic amd64 
Java 11.0.4

Ok, I can now reproduce this behaviour with the current snap version on the --edge channel. This indicates that this issue was introduced somewhere between the release of the current snap version (or rather the one from 9th September) on the --beta channel and the current snap version on the --edge channel. =||= @CyraxSector  You can try to narrow down the bug a git bisect:
https://git-scm.com/book/en/v2/Git-Tools-Debugging-with-Git =||= Cannot reproduce the behavior mentioned above. Can you please provide more information. =||= JabRef 5.0-dev--snapshot--2019-09-26--master--1a6c92c79
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft

I can still reproduce this behaviour. You can force it to happen by scrolling with the mouse wheel in the fetcher sidepane and then switching back to just scrolling with the mouse.
If you just scroll with the mouse (without using the mouse wheel) you will sometimes encounter the issue and sometimes not. But by using the mouse wheel scrolling first and then the mouse scrolling itself afterwards, the issue always appears. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0.0-dev--2019-10-18----bc26c3ac5
Windows 10 10.0 amd64 
Java 12.0.2

I can confirm that this has been fixed in the current dev version. =||= "Fix highlight issues for lists"Fixes #5277 and fixes #5035. The problem was in both cases that the list view reuses nodes when scrolling (instead of creating new ones).

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/17/19, 06:55:08 PM
5035.05454Web search results highlights multiple lines when selecting entries"JabRef version: JabRef 5.0-dev--snapshot--2019-06-04--master--9a5b7d1c3 on Windows 8.1 6.3 amd64

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When selecting results from a web search and scrolling, multiple entries will turn light blue as if they were also selected. Functionality still appears to work correctly. The extra highlighting makes it harder for the user to know which entries were actually selected.

Steps to reproduce the behavior:
1. Open web search
2. Enter search criteria
3. Click Search button
4. In search results window, select an entry to import
5. Scroll down and back up through the entries
6. Select another entry to import
7. Multiple entries turn blue, even though they were not selected
8. Only selected entries will actually be imported

![image](https://user-images.githubusercontent.com/26610530/59006957-7d90fc80-87f2-11e9-952f-43f9808693ff.png)

"@tobiasdiez I'm working on this =||= Fix highlight issues for lists"Fixes #5277 and fixes #5035. The problem was in both cases that the list view reuses nodes when scrolling (instead of creating new ones).

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/17/19, 06:55:08 PM
5458.05459JFXColorPicker not compatible with JDK12"There seem to be some compatibility issues with JFoenix ColorPicker and JDK12 JabRef is using in the GroupsDialog, which is failing to load.

https://github.com/jfoenixadmin/JFoenix/issues/966

I prepared a temporary drop-in replacement fix with the standard ColorPicker of JavaFX.

JabRef 5.0.0
Windows 10 10.0 amd64 
Java 12.0.2-bellsoft

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<details>
  <summary>StackTrace by Calling ""Edit group""</summary>
  java.lang.RuntimeException: java.lang.reflect.InvocationTargetException
	at javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1787)
	at javafx.fxml/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1670)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.graphics/javafx.scene.Node.fireEvent(Node.java:8890)
	at javafx.controls/javafx.scene.control.Button.fire(Button.java:203)
	at javafx.controls/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:206)
	at javafx.controls/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3862)
	at javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1849)
	at javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2590)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:409)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:299)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:389)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:447)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:411)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:446)
	at javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:556)
	at javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:942)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)
	at java.base/java.lang.Thread.run(Thread.java:835)
Caused by: java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:76)
	at jdk.internal.reflect.GeneratedMethodAccessor2.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:567)
	at javafx.base/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:273)
	at javafx.fxml/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:83)
	at javafx.fxml/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1784)
	... 58 more
Caused by: java.lang.InternalError: java.lang.IllegalAccessException: class com.jfoenix.adapters.ReflectionHelper (in module com.jfoenix) cannot access a member of class javafx.scene.control.skin.ComboBoxPopupControl (in module javafx.controls) with modifiers """"
	at com.jfoenix/com.jfoenix.adapters.ReflectionHelper.invoke(ReflectionHelper.java:62)
	at com.jfoenix/com.jfoenix.skins.JFXGenericPickerSkin.removeParentPopupHandlers(JFXGenericPickerSkin.java:140)
	at com.jfoenix/com.jfoenix.skins.JFXGenericPickerSkin.<init>(JFXGenericPickerSkin.java:91)
	at com.jfoenix/com.jfoenix.skins.JFXColorPickerSkin.<init>(JFXColorPickerSkin.java:68)
	at com.jfoenix/com.jfoenix.controls.JFXColorPicker.createDefaultSkin(JFXColorPicker.java:66)
	at javafx.controls/javafx.scene.control.Control.doProcessCSS(Control.java:897)
	at javafx.controls/javafx.scene.control.Control$1.doProcessCSS(Control.java:89)
	at javafx.controls/com.sun.javafx.scene.control.ControlHelper.processCSSImpl(ControlHelper.java:67)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Node.processCSS(Node.java:9540)
	at javafx.graphics/javafx.scene.Scene.doCSSPass(Scene.java:569)
	at javafx.graphics/javafx.scene.Scene.preferredSize(Scene.java:1745)
	at javafx.graphics/javafx.scene.Scene$2.preferredSize(Scene.java:393)
	at javafx.graphics/com.sun.javafx.scene.SceneHelper.preferredSize(SceneHelper.java:66)
	at javafx.graphics/javafx.stage.Window$12.invalidated(Window.java:1086)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145)
	at javafx.graphics/javafx.stage.Window.setShowing(Window.java:1174)
	at javafx.graphics/javafx.stage.Window.show(Window.java:1189)
	at javafx.graphics/javafx.stage.Stage.show(Stage.java:273)
	at javafx.graphics/javafx.stage.Stage.showAndWait(Stage.java:463)
	at javafx.controls/javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.controls/javafx.scene.control.Dialog.showAndWait(Dialog.java:346)
	at org.jabref/org.jabref.gui.JabRefDialogService.showCustomDialogAndWait(JabRefDialogService.java:251)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.addNewSubgroup(GroupTreeViewModel.java:145)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.addNewGroupToRoot(GroupTreeViewModel.java:111)
	at org.jabref/org.jabref.gui.groups.GroupTreeView.addNewGroup(GroupTreeView.java:346)
	... 69 more
Caused by: java.lang.IllegalAccessException: class com.jfoenix.adapters.ReflectionHelper (in module com.jfoenix) cannot access a member of class javafx.scene.control.skin.ComboBoxPopupControl (in module javafx.controls) with modifiers """"
	at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:376)
	at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:639)
	at java.base/java.lang.reflect.Method.invoke(Method.java:559)
	at com.jfoenix/com.jfoenix.adapters.ReflectionHelper.invoke(ReflectionHelper.java:60)
	... 119 more

</details>

<details>
<summary>Stacktrace by calling ""Add Subgroup""</summary>
java.lang.InternalError: java.lang.IllegalAccessException: class com.jfoenix.adapters.ReflectionHelper (in module com.jfoenix) cannot access a member of class javafx.scene.control.skin.ComboBoxPopupControl (in module javafx.controls) with modifiers """"
	at com.jfoenix/com.jfoenix.adapters.ReflectionHelper.invoke(ReflectionHelper.java:62)
	at com.jfoenix/com.jfoenix.skins.JFXGenericPickerSkin.removeParentPopupHandlers(JFXGenericPickerSkin.java:140)
	at com.jfoenix/com.jfoenix.skins.JFXGenericPickerSkin.<init>(JFXGenericPickerSkin.java:91)
	at com.jfoenix/com.jfoenix.skins.JFXColorPickerSkin.<init>(JFXColorPickerSkin.java:68)
	at com.jfoenix/com.jfoenix.controls.JFXColorPicker.createDefaultSkin(JFXColorPicker.java:66)
	at javafx.controls/javafx.scene.control.Control.doProcessCSS(Control.java:897)
	at javafx.controls/javafx.scene.control.Control$1.doProcessCSS(Control.java:89)
	at javafx.controls/com.sun.javafx.scene.control.ControlHelper.processCSSImpl(ControlHelper.java:67)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Parent.doProcessCSS(Parent.java:1399)
	at javafx.graphics/javafx.scene.Parent$1.doProcessCSS(Parent.java:125)
	at javafx.graphics/com.sun.javafx.scene.ParentHelper.processCSSImpl(ParentHelper.java:98)
	at javafx.graphics/com.sun.javafx.scene.NodeHelper.processCSS(NodeHelper.java:145)
	at javafx.graphics/javafx.scene.Node.processCSS(Node.java:9540)
	at javafx.graphics/javafx.scene.Scene.doCSSPass(Scene.java:569)
	at javafx.graphics/javafx.scene.Scene.preferredSize(Scene.java:1745)
	at javafx.graphics/javafx.scene.Scene$2.preferredSize(Scene.java:393)
	at javafx.graphics/com.sun.javafx.scene.SceneHelper.preferredSize(SceneHelper.java:66)
	at javafx.graphics/javafx.stage.Window$12.invalidated(Window.java:1086)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:110)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145)
	at javafx.graphics/javafx.stage.Window.setShowing(Window.java:1174)
	at javafx.graphics/javafx.stage.Window.show(Window.java:1189)
	at javafx.graphics/javafx.stage.Stage.show(Stage.java:273)
	at javafx.graphics/javafx.stage.Stage.showAndWait(Stage.java:463)
	at javafx.controls/javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.controls/javafx.scene.control.Dialog.showAndWait(Dialog.java:346)
	at org.jabref/org.jabref.gui.JabRefDialogService.showCustomDialogAndWait(JabRefDialogService.java:251)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.editGroup(GroupTreeViewModel.java:170)
	at org.jabref/org.jabref.gui.groups.GroupTreeView.lambda$createContextMenuForGroup$19(GroupTreeView.java:293)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.controls/javafx.scene.control.MenuItem.fire(MenuItem.java:459)
	at javafx.controls/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(ContextMenuContent.java:1380)
	at javafx.controls/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(ContextMenuContent.java:1333)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:218)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3862)
	at javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1849)
	at javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2590)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:409)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:299)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:389)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:447)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:411)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:446)
	at javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:556)
	at javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:942)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)
	at java.base/java.lang.Thread.run(Thread.java:835)
Caused by: java.lang.IllegalAccessException: class com.jfoenix.adapters.ReflectionHelper (in module com.jfoenix) cannot access a member of class javafx.scene.control.skin.ComboBoxPopupControl (in module javafx.controls) with modifiers """"
	at java.base/jdk.internal.reflect.Reflection.newIllegalAccessException(Reflection.java:376)
	at java.base/java.lang.reflect.AccessibleObject.checkAccess(AccessibleObject.java:639)
	at java.base/java.lang.reflect.Method.invoke(Method.java:559)
	at com.jfoenix/com.jfoenix.adapters.ReflectionHelper.invoke(ReflectionHelper.java:60)
	... 90 more
</details>"Temporary Fix for ColorPicker in Groups"Temporarily fixes #5458 
Should be reverted as soon as the compatibility issues with JFoenix and JDK12 are fixed.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Carl Christian Snethlagecalixtus10/17/19, 07:30:30 AM
5452.05471Error in importing jstyles"JabRef 5.0.0-dev--2019-10-15----2a5507fd3
Linux 5.2.0-0.bpo.3-amd64 amd64 (Debian 10 Buster)
Java 12.0.2

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. add jstyle file for OpenOffice/LibreOffice from GUI
2. click OK
3. :sob: 

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
java.lang.NullPointerException
	at org.jabref/org.jabref.gui.openoffice.StyleSelectDialogView.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.setResultAndClose(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.DialogPane.lambda$createButton$3(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.Application.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.EventLoop.enter(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/javafx.stage.Stage.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.HeavyweightDialog.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.showAndWait(Unknown Source)
	at org.jabref/org.jabref.gui.openoffice.OpenOfficePanel.lambda$initPanel$4(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details>

Here is one of my jstyles. All of my styles give me the above error, but I tested other styles, without success (I used already them in previous JabRef versions).
```
# This file is licensed under the terms of the GPL version 2 (or later).

NAME
Literatura - Eng

JOURNALS
Literatura

PROPERTIES
Title=""References""
IsSortByPosition=""false""
IsNumberEntries=""false""
ReferenceParagraphFormat=""List 1""
ReferenceHeaderParagraphFormat=""Heading 1""
# Configurare Heading1: Italics not capitalized, left justified

CITATION
AuthorField=""author/editor""
YearField=""year""
MaxAuthors=""3""
MaxAuthorsFirst=""3""
AuthorSeparator="", ""
AuthorLastSeparator="" & ""
AuthorLastSeparatorInText="" & ""
EtAlString="" and oth.""
ItalicEtAl=""false""
YearSeparator="" ""
InTextYearSeparator="" ""
BracketBefore=
BracketAfter=
BracketBeforeInList=""[""
BracketAfterInList=""]""
CitationSeparator=""; ""
UniquefierSeparator="", ""
GroupedNumbersSeparator=""-""
MinimumGroupingCount=""3""
FormatCitations=""false""
CitationCharacterFormat=""Default""
MultiCiteChronological=""false""
PageInfoSeparator="", ""

LAYOUT
article=\format[AuthorLastFirst]{\author}. \year. \format[HTMLChars,FormatPagesForXML]{\title}. <i>\journal</i>\begin{volume} \volume\end{volume}\begin{number}(\number)\end{number}, \format[FormatPagesForHTML]{\pages}

book=\begin{author}\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \end{author}\begin{editor}\format[AuthorLastFirstFirstFirst,AuthorAndsReplacer]{\editor}, \format[IfPlural(eds,ed)]{\editor}. \end{editor}\year. <i>\format[HTMLChars,FormatPagesForHTML]{\title}.</i>\begin{subtitle} \format[HTMLChars,FormatPagesForHTML]{\subtitle}.\end{subtitle}\begin{series&&number} \series \number.\end{series&&number}\begin{volume} \format[HTMLChars,FormatPagesForHTML]{\volume}.\end{volume}\begin{volumes} \volumes vol.\end{volumes}\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher

inbook=\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \format[FormatPagesForHTML]{\year}: \format[HTMLChars,FormatPagesForHTML]{\title}. <i>\format[HTMLChars,FormatPagesForHTML]{\booktitle}. \begin{booksubtitle} \format[HTMLChars,FormatPagesForHTML]{\booksubtitle}. \end{booksubtitle}</i>\format[HTMLChars,Authors(FullName,FirstFirst,Amp)]{\editor}, \format[IfPlural(eds,ed)]{\editor}.\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher\begin{pages}, \format[FormatPagesForHTML]{\pages}\end{pages}

inproceedings=\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \format[FormatPagesForHTML]{\year}: \format[HTMLChars,FormatPagesForHTML]{\title}. <i>\format[HTMLChars,FormatPagesForHTML]{\eventtitle}.</i> \begin{eventtitleaddon}\format[HTMLChars,FormatPagesForHTML]{\eventtitleaddon}. \end{eventtitleaddon}\format[HTMLChars,Authors(FullName,FirstFirst,Amp)]{\editor}, \format[IfPlural(eds,ed)]{\editor}.\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher\begin{pages}, \format[FormatPagesForHTML]{\pages}\end{pages}

incollection=\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \format[FormatPagesForHTML]{\year}: \format[HTMLChars,FormatPagesForHTML]{\title}. <i>\format[HTMLChars,FormatPagesForHTML]{\booktitle}. \begin{booksubtitle} \format[HTMLChars,FormatPagesForHTML]{\booksubtitle}. \end{booksubtitle}</i>\format[HTMLChars,Authors(FullName,FirstFirst,Amp)]{\editor}, \format[IfPlural(eds,ed)]{\editor}.\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher\begin{pages}, \format[FormatPagesForHTML]{\pages}\end{pages}

#####
phdthesis=\format[AuthorLastFirst,AuthorAbbreviator,AuthorAndsReplacer]{\author}
(<b>\year\uniq</b>). <i>\title</i>, \school.

default=\format[AuthorLastFirst]{\author}. \year. \format[HTMLChars,FormatPagesForXML]{\title}. <i>\journal</i>\begin{volume} \volume\end{volume}\begin{number}(\number)\end{number}, \format[FormatPagesForHTML]{\pages}
```""I figured out the problem. The key is that the preview checks for the default layout. 
Quick workaround is to add a format for the entry type ""default"" in the jstyle.

The real bugfix needs to check if the default layout getDefaultBibLayout is present or return another one from the HashMap in OoBibStyle.


 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= @tobiasdiez 
No, same error:
<details>
  <summary>Log File</summary>
java.lang.NullPointerException
	at org.jabref/org.jabref.gui.openoffice.StyleSelectDialogView.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.setResultAndClose(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.DialogPane.lambda$createButton$3(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.Application.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.EventLoop.enter(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/javafx.stage.Stage.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.HeavyweightDialog.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.showAndWait(Unknown Source)
	at org.jabref/org.jabref.gui.openoffice.OpenOfficePanel.lambda$initPanel$4(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
</details>

JabRef 5.0.0-dev--2019-10-18----bc26c3ac5
Linux 5.2.0-3-amd64 amd64 
Java 12.0.2

 =||= Please delete the wrong style and readd it. It should be marked as invalid.  =||= I had already deleted it. Indeed, to be more precise, I had not even added it to JabRef in this PC from which I write =||= I cannot reproduce your issue. This should be fixed now. Could you please test again? =||= @Siedlerchr 
I just tested it again, but with the same result... :-(
I'm attaching a zip file containing a screencast to document my issue.

[Screencast_28-10-2019_17:57:27.zip](https://github.com/JabRef/jabref/files/3779804/Screencast_28-10-2019_17.57.27.zip)


 =||= Could you please also post your style file again? Or is it still the one above? =||= Here is the style used in the above test, but I have the same issue with other styles:

```
# This file is licensed under the terms of the GPL version 2 (or later).

NAME
Literatura - Eng (by Domenico Cufalo aka Doc, cufalo@gmail.com)

JOURNALS
Literatura

PROPERTIES
Title=""References""
IsSortByPosition=""false""
IsNumberEntries=""false""
ReferenceParagraphFormat=""List 1""
ReferenceHeaderParagraphFormat=""Heading 1""
# Configurare Heading1: Italics not capitalized, left justified

CITATION
AuthorField=""author/editor""
YearField=""year""
MaxAuthors=""3""
MaxAuthorsFirst=""3""
AuthorSeparator="", ""
AuthorLastSeparator="" & ""
AuthorLastSeparatorInText="" & ""
EtAlString="" and oth.""
ItalicEtAl=""false""
YearSeparator="" ""
InTextYearSeparator="" ""
BracketBefore=
BracketAfter=
BracketBeforeInList=""[""
BracketAfterInList=""]""
CitationSeparator=""; ""
UniquefierSeparator="", ""
GroupedNumbersSeparator=""-""
MinimumGroupingCount=""3""
FormatCitations=""false""
CitationCharacterFormat=""Default""
MultiCiteChronological=""false""
PageInfoSeparator="", ""

LAYOUT
article=\format[AuthorLastFirst]{\author}. \year. \format[HTMLChars,FormatPagesForXML]{\title}. <i>\journal</i>\begin{volume} \volume\end{volume}\begin{number}(\number)\end{number}, \format[FormatPagesForHTML]{\pages}

book=\begin{author}\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \end{author}\begin{editor}\format[AuthorLastFirstFirstFirst,AuthorAndsReplacer]{\editor}, \format[IfPlural(eds,ed)]{\editor}. \end{editor}\year. <i>\format[HTMLChars,FormatPagesForHTML]{\title}.</i>\begin{subtitle} \format[HTMLChars,FormatPagesForHTML]{\subtitle}.\end{subtitle}\begin{series&&number} \series \number.\end{series&&number}\begin{volume} \format[HTMLChars,FormatPagesForHTML]{\volume}.\end{volume}\begin{volumes} \volumes vol.\end{volumes}\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher

inbook=\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \format[FormatPagesForHTML]{\year}: \format[HTMLChars,FormatPagesForHTML]{\title}. <i>\format[HTMLChars,FormatPagesForHTML]{\booktitle}. \begin{booksubtitle} \format[HTMLChars,FormatPagesForHTML]{\booksubtitle}. \end{booksubtitle}</i>\format[HTMLChars,Authors(FullName,FirstFirst,Amp)]{\editor}, \format[IfPlural(eds,ed)]{\editor}.\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher\begin{pages}, \format[FormatPagesForHTML]{\pages}\end{pages}

inproceedings=\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \format[FormatPagesForHTML]{\year}: \format[HTMLChars,FormatPagesForHTML]{\title}. <i>\format[HTMLChars,FormatPagesForHTML]{\eventtitle}.</i> \begin{eventtitleaddon}\format[HTMLChars,FormatPagesForHTML]{\eventtitleaddon}. \end{eventtitleaddon}\format[HTMLChars,Authors(FullName,FirstFirst,Amp)]{\editor}, \format[IfPlural(eds,ed)]{\editor}.\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher\begin{pages}, \format[FormatPagesForHTML]{\pages}\end{pages}

incollection=\format[Authors(FullName,LastFirstFirstFirst,Amp)]{\author}. \format[FormatPagesForHTML]{\year}: \format[HTMLChars,FormatPagesForHTML]{\title}. <i>\format[HTMLChars,FormatPagesForHTML]{\booktitle}. \begin{booksubtitle} \format[HTMLChars,FormatPagesForHTML]{\booksubtitle}. \end{booksubtitle}</i>\format[HTMLChars,Authors(FullName,FirstFirst,Amp)]{\editor}, \format[IfPlural(eds,ed)]{\editor}.\begin{location} \format[HTMLChars,FormatPagesForHTML]{\location}: \end{location}\begin{place}\format[HTMLChars]{\place}: \end{place}\begin{edition}<sup>\edition</sup>\end{edition}\publisher\begin{pages}, \format[FormatPagesForHTML]{\pages}\end{pages}

#####
phdthesis=\format[AuthorLastFirst,AuthorAbbreviator,AuthorAndsReplacer]{\author}
(<b>\year\uniq</b>). <i>\title</i>, \school.

#default=\format[AuthorLastFirst]{\author}. \year. \format[HTMLChars,FormatPagesForXML]{\title}. <i>\journal</i>\begin{volume} \volume\end{volume}\begin{number}(\number)\end{number}, \format[FormatPagesForHTML]{\pages}

default=\format[Authors(LastFirst,Semicolon)]{\author} (<b>\year\uniq</b>). <i>\title</i>, \journal \volume\begin{pages} : \format[FormatPagesForHTML]{\pages}\end{pages}.
``` =||= Hm. this is odd. On Windows your style works fine.
1. Check if your styles are all in UTF8 encoding
2. Try to reset your preferences and restart JabRef. 
There might be some invalid value in the preferences.
 =||= 1. UTF8 is default on Linux
2. Tested with clean preferences, but with the same issue. :-( =||= Ah now I could reproduce it. It happens when you **don't** click on the style you added (no style is ""highlighted"").
So JabRef tries to get the selected style, but if non is selected it fails.
Will prepare a fix.

If you click on it so that's it is highlighted it will work:
![grafik](https://user-images.githubusercontent.com/320228/67702903-d5ebb500-f9b2-11e9-84fc-9f5b75c55bfb.png)
 =||= :smile: 
It was a Columbus' Egg! =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= @tobiasdiez 
Yes, it's fine! Thank you so much! :+1:  =||= "Mark OOSTyle as invalid if no defaultStyle"In addtion, dsplay correct layout for article and book

Fixes  #5452 

TODO: Add documentation issue

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr10/17/19, 08:26:24 PM
5069.05472Entry preview lose formating if search field is used"Tried with current 5.* dev on Windows 10.

Entry preview looks nice.
![snapshot](https://user-images.githubusercontent.com/11861496/59857384-1e49f500-9379-11e9-9427-f842f2b77aa7.png)

But when I use the search field e.g. `keywords=lesen` or `author=nord` then it looks like this.
![copy-paste](https://user-images.githubusercontent.com/11861496/59857412-328df200-9379-11e9-84b9-ff65369627cd.png)
""Issues is from the search highlighting of the search term. When you stop searching it's back to normal  =||= The highlighting is handled by this simple javascript code:

https://github.com/JabRef/jabref/blob/dd4f0a08905cf2ef3d2e3231b1fb87c1950fab9c/src/main/java/org/jabref/gui/preview/PreviewViewer.java#L42-L48 =||= I know nothing about JS.
What does your last post mean? It is easy to fix or the opposite? =||= I have tried if this issue still remains in the master branch and not only does it lose formatting, it also jumps to the Author field automatically, so I am rewriting my Author after search finds a result.
The formatting goes back to normal when I click to other article, not after finishing search, as @Siedlerchr said.

I would like to look at this issue and fix it. =||= The problem is probably that we read the inner text (i.e everything without formatting) and then set it as the inner html. Should work if `document.body.innerText` is replaced by `document.body.innerHtml` =||= @tobiasdiez  It is not that easy. That's what I did before. The problem is then that it displays and searches matches in html tags  =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Confirmed. It is fixed and working for me.
Thanks a lot. =||= "Fix highlight problem in entry preview"Fixes #5069 by using markjs.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/17/19, 08:25:22 PM
5469.05483Uncaught exception on startup with a database"JabRef version
 
JabRef 5.0.0-dev--2019-10-17----26a1d29a3
Linux 5.0.0-31-generic amd64 
Java 12.0.2

- [X ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Start the program with a couple of databases open from the last session.  The exception box pops up immediately.

The problem might be connected with having custom entry types in the database:

1. close all databases
2. open database with three custom entry types:
```
@Comment{jabref-meta: saveOrderConfig:specified;author;false;date;false;title;true;}

@Comment{jabref-entrytype: manuscript: req[collection;library;location;shelfmark;shortcollection;shorthand;shortlibrary] opt[pagetotal;pagination;origin;catalog;columns;bookpagination;keywords;scribe;layer;annotation;contents;owner;dating;support;pages]}

@Comment{jabref-entrytype: review: req[author;date;journal;number;pages;related;relatedtype;volume] opt[url;urldate;doi]}

@Comment{jabref-entrytype: audio: req[author;date;editor;editortype;number;publisher;series;title;type] opt[url;urldate]}

```
And then I get a blank popup:

![Screenshot from 2019-10-17 10-15-41](https://user-images.githubusercontent.com/762246/67027833-827e8a80-f0c7-11e9-962a-4e9129e5f192.png)

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.IllegalStateException: Not on FX application thread; currentThread = JabRef CachedThreadPool
	at org.jabref.merged.module/com.sun.javafx.tk.Toolkit.checkFxUserThread(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.checkFxUserThread(Unknown Source)
	at org.jabref.merged.module/javafx.stage.Stage.<init>(Unknown Source)
	at org.jabref.merged.module/javafx.stage.Stage.<init>(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.HeavyweightDialog$1.<init>(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.HeavyweightDialog.<init>(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.util.BaseDialog.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.importer.ImportCustomEntryTypesDialog.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.CheckForNewEntryTypesAction.performAction(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.performPostOpenActions(Unknown Source)
	at org.jabref/org.jabref.JabRefGUI.openDatabases(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)


  ```
</details>

![Screenshot from 2019-10-17 10-08-18](https://user-images.githubusercontent.com/762246/67027354-9fff2480-f0c6-11e9-9a4e-af6a37370516.png)""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master. =||= "Fix not on fx thread error for custom entry types"Fixes #5469 

Revert change done in  #5423 because the actual code just opens the already loaded databases.
At this point the databases are already loaded in a background thread


<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr10/21/19, 06:28:40 PM
5460.05488Entry editor: Keep it open as default"JabRef 5.0.0-dev--2019-10-17----e81d58c51
Windows 10 10.0 amd64 
Java 12.0.2

At the moment, it is not possible to have the entry editor open all the time. This is a problem, since the new changes to the entry preview make it part of the entry editor:
https://github.com/JabRef/jabref/issues/5244

This makes it difficult to quickly cycle through all entries (see also https://github.com/JabRef/jabref/issues/5244#issuecomment-525290454). It should be possible to have the entry editor open all the time.
""What do you mean by ""always open""? If I open the entry editor, it usually stays opens until I close it again. And you can click on a new entry to edit it (without that the editor closes). =||= Yes, but I would like to see the old JabRef behaviour, where after opening JabRef the entry preview was immediately visible. At the moment, this is only possible after clicking onto the entry (note, that Strg+E does not work).
I think it is more intuitive to always have the entry preview open, instead of just the main table. Since the entry preview is now part of the entry editor, the entry editor should always be open. This behaviour mirrors JabRef 3.8.2 (and it is the same in Mendeley). =||= Thanks to @CaptainDaVinci tihs is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0.0-dev--2019-10-21----0f0dce621
Windows 10 10.0 amd64 
Java 12.0.2

Amazing, that was quick! I can confirm, that this issue has been fixed in the current dev version. =||= "Open entry editor by default on start-up"Fixes #5460

Select the first entry in the main table, and opens entry editor
for the same. This action is performed on the application thread.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci10/21/19, 10:13:33 AM
5485.05495Crossref API parameter query.title deprecated"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-alpha on Mac OS X 10.15 x86_64 

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When trying to lookup a DOI for an entry, I get the error ""An I/O exception occurred"". The answer from api.crossref.org says: ""Parameter query.title has been deprecated. Please use query.bibliographic instead. See https://status.crossref.org/incidents/4y45gj63jsp4""

Steps to reproduce the behavior:
1. Open entry without DOI reference
2. Lookup DOI""Thanks to @CaptainDaVinci  this issue is now fixed! 

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Fix looks good. Thanks to all for the quick fix. =||= "Fix deprecated CrossRef Rest API Parameter"Fixes #5485 
Changed the query parameter `query.title` (which is deprecated) to
`query.bibliographic`.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Yash  KothariCaptainDaVinci10/21/19, 06:26:41 PM
5496.05497Blank input editor - Uncaught exception occured in Thread[JavaFX Application Thread,5,main]"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 
Ubuntu 18.04 with Gnome desktop:
Installed from .deb file downloaded from https://builds.jabref.org/master/jabref_5.0.0-1_amd64.deb
JabRef version:
JabRef 5.0.0-dev--2019-10-21----0f0dce621
Linux 5.0.0-32-generic amd64 
Java 12.0.2

Steps to reproduce the behavior:


1. Open JabRef with .bib file
2. Exception is thrown
3. Entry editor is blank (Just a white field. I'm in dark mode)
4. Exception is thrown with statement: 
  ```Uncaught exception occured in Thread[JavaFX Application Thread,5,main]``` and 
  ```Invalid stylesheet URL```
5.  Clicking other tabs such as: Optional Fields, Deprecated Fields etc. results in additional exceptions thrown with the ```invalid stylesheet URL``` error.
Here's the Log summary:
<details>
  <summary>Log File</summary>
  
  ```
  java.lang.IllegalArgumentException: Invalid stylesheet URL
	at org.jabref.merged.module/javafx.scene.web.WebEngine$2.invalidated(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.web.WebEngine.setUserStyleSheetLocation(Unknown Source)
	at org.jabref/org.jabref.gui.preview.PreviewViewer.setTheme(Unknown Source)
	at org.jabref/org.jabref.gui.preview.PreviewPanel.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.FieldsEditorTab.initPanel(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.FieldsEditorTab.bindToEntry(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditorTab.notifyAboutFocus(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditor.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/org.fxmisc.easybind.EasyBind.lambda$subscribe$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.SelectionModel.setSelectedItem(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ModifiableObservableListBase.add(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditor.recalculateVisibleTabs(Unknown Source)
	at org.jabref/org.jabref.gui.entryeditor.EntryEditor.setEntry(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$createMainTable$22(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$createMainTable$23(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.SelectedItemsReadOnlyObservableList.lambda$new$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ReadOnlyUnbackedObservableList._endChange(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MultipleSelectionModelBase$SelectedIndicesList._endChange(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.ControlUtils.updateSelectedIndices(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.fireCustomSelectedCellsListChangeEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.transformation.SortedList.sourceChanged(Unknown Source)
	at org.jabref.merged.module/javafx.collections.transformation.TransformationList.lambda$getListener$0(Unknown Source)
	at org.jabref.merged.module/javafx.collections.WeakListChangeListener.onChanged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ModifiableObservableListBase.add(Unknown Source)
	at java.base/java.util.AbstractList.add(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.SelectedCellsMap.add(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.select(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.select(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.selectFirst(Unknown Source)
	at org.jabref/org.jabref.gui.maintable.MainTable.clearAndSelectFirst(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.clearAndSelectFirst(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>""It's an issue with the dark theme path. The light theme should work in the meantime  =||= @Siedlerchr True, I can confirm this. The light theme works. =||= Duplicate of:
https://github.com/JabRef/jabref/issues/5463#issuecomment-544274760 =||= It's hard to debug. The problem is that it works in gradle or eclipse fine etc but not loading from the ""jar"" path. However, it's the same path also used in the prefs to load the dark theme and there it works also when using the installer version. I have no clue. =||= > @Siedlerchr True, I can confirm this. The light theme works.

Me 2. Just confirmed, the light theme works.  =||= I've a fix and PR is coming in the next few days. =||= This should now be fixed in the latest master.
 =||= JabRef 5.0.0-dev--2019-10-25----681d6aa6f
Windows 10 10.0 amd64 
Java 12.0.2

I can confirm that this has been fixed in the current dev version. Nice work! =||= @Siedlerchr 
Ubuntu 18.04

JabRef 5.0.0-dev--2019-10-25----fdd06d742
Linux 5.0.0-32-generic amd64 
Java 12.0.2

I can also confirm that this has been fixed in the current dev version (.deb) on Ubuntu 18.04. Thanks. =||= "Try to fix dark theme path"Fix Dark theme.

Workaround until https://github.com/openjdk/jfx/pull/22 is fixed

Fixes #5496

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr10/25/19, 08:01:17 AM
5502.05503Error installing jabref deb package in ubuntu: native messaging host is not a dir"Latest version of JabRef:`  sudo dpkg -i jabref_5.0.0-1_amd64\(1\).deb `

```
install: target '/usr/lib/mozilla/native-messaging-hosts/' is not a directory: No such file or directory
dpkg: error processing package jabref (--install):
 installed jabref package post-installation script subprocess returned error exit status 1
Errors were encountered while processing:
 jabref
```

I manually checked it, the dir is not existing. /usr/lib/mozilla only has a subfolder plugins


Linux osboxes 4.15.0-62-generic #69-Ubuntu SMP Wed Sep 4 20:55:53 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux
Ubuntu 18.04
Firefox 69""```
 -D     create  all  leading  components of DEST except the last, or all
              components of --target-directory, then copy SOURCE to DEST
```
I think the issue is I used the destination, so it created only `/usr/lib`...
It should be enough to fix the postinst file...
I'll test now and upload a fix =||= I created a branch (https://github.com/JabRef/jabref/tree/debRpmInstall) with the fix, so I can use it to also build and test the rpm before pushing to master.
For now if you want to test it the deb should work, so this fix can be merged. =||= Thank for the quick action, just create a PR and then we can checkout the branch build   =||= Done. If you want to test it before merging.. I tested on a freshly installed ubuntu-mate that did not have the mozilla folder before the install.
After a removal I only remove the json, although we could check IF the folder is empty and then remove that as well, but it might be unnecessary... =||= thanks works now. Only the ""grep"" is showing of course the dir not found, but it works:
`grep: /usr/lib/mozilla/native-messaging-hosts/org.jabref.jabref.json: No such file or directory` =||= The grep should be from the postrm..
The check needs to be more consistent..
I think this can be solved by adding a check if the file exists..
I'll test it now. =||= @Siedlerchr I pushed a fix on the same branch.
If you can test it once it builds let me know if it solves the issue =||= Will test it tomorrow on my VM (Reminder for myself) =||= thanks @Siedlerchr 
I rebased on master to be sure it's in sync...
So the latest version on the branch should be fine.
I guess that if it works for me and on your vm we can say it's fine ;) =||= "Fix destination for jabref mozilla json"Fixes #5502 
I'd keep the branch open, to enable test  builds of deb/rpm packages while we fix the last jpackage options."Galileo SartorLyzardKing10/27/19, 09:33:57 PM
5508.05513Make it easier to import single entries"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
If you import a single entry (e.g. a bib file containing only one entry), then the import dialog opens and one needs to select the entry by hand, before one can click ""Import"".

**Describe the solution you'd like**
Preselect the entry, so that one can directly click ""Import"".""PR #5513 sent. 

If you have any feedback or issues with it, please tell me. =||= Thanks to @P4trice this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Making importing a single file easier (Issue #5508)"Fixes #5508 
I added a condition to see if only one entry is being imported.
If the condition adheres -> mark the entry as selected.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"PatriceP4trice11/03/19, 06:59:34 AM
5449.05519Null error while writing XMP metadata"ArchLinux package by j0hannes #5299 
```
JabRef 5.0.0-dev--2019-10-14----d2ddff574
Linux 5.3.6-zen1-1-zen amd64 
Java 12.0.2
```
```console
$ java --version
openjdk 11.0.4 2019-07-16
OpenJDK Runtime Environment (build 11.0.4+11)
OpenJDK 64-Bit Server VM (build 11.0.4+11, mixed mode)
$ archlinux-java status
Available Java environments:
  java-11-openjdk (default)
```
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

An error with no description:
> Author2000
>   Error while writing '/home/user/Documents/Literature/TPSA.pdf':
>     null
> 
> Finished writing XMP for 0 file (0 skipped, 1 errors).
Happens with different PDFs. 
The event log is empty.

Steps to reproduce the behavior:
1. Create an entry
2. Add link to a local PDF in the General tab
3. Select this file
4. Tool - Write XMP...
5. A pop-up appears""@homocomputeris Are the PDFs freely available? It would be nice if you added them via a PR so that we can create test cases.

- PDF directory for tests: https://github.com/JabRef/jabref/tree/master/src/test/resources/pdfs
- bib files: https://github.com/JabRef/jabref/tree/master/src/test/resources/testbib (or add the bib files as skeleton java code or just as text in the PR) =||= The one from my snippet is https://agenda.infn.it/event/2620/attachments/29206/34301/TPSA.pdf

Basically, it doesn't write to any PDF.
For example, from these links I downloaded jabref-authors.bib and one PDF, and, say, I want to write the 1st entry metadata to the PDF:
```
GarridoKallstromKummEtAl2016
  Error while writing '/home/user/Documents/Literature/thesis-example.pdf':
    null

Finished writing XMP for 0 file (0 skipped, 1 errors).
``` =||= I tried it today with the latest snapshot on Windows 10: the same `null` error is raised =||= Thanks to @tobiasdiez  this issue should be fixed now

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix XMP null error"Fixes #5449. Was caused by wrapping a set of fields in a treeset without specifying the comparator.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/27/19, 10:43:47 AM
5516.05521Dark Theme: Wrong font color for textfield text in merge window "Latest master.

1, Merge two entries


![grafik](https://user-images.githubusercontent.com/320228/67601563-f9292100-f774-11e9-9992-c08fc9b8a805.png)""Hello! Is the desired colour for the field `-fx-light-text-color (#9aa3af)`? =||= Like this? 

<img width=""843"" alt=""Screenshot 2019-10-26 at 10 36 00"" src=""https://user-images.githubusercontent.com/17515408/67617589-72a82a00-f7dc-11e9-9a36-c7d286e8c857.png"">
 =||= Thanks to @martinacat this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Thanks a lot for the fix! Really good looking now! =||= No worries! 👍 ✨  =||= "Fix text colour in Merge dialogue"fixes: #5516

The colour of the textfields in the Merge dialogue was set to black, I set that to `-fx-light-text-color` (#9aa3af) in MergeEntries.css

No need for documentation update.

Tested manually on local environment.
Open to suggestion for test cases. 😄 

PS: Forgive me if I missed something, this is my first PR to a relatively large project ✨ 



<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [x] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)

Changes:
<img width=""843"" alt=""Screenshot 2019-10-26 at 10 36 00"" src=""https://user-images.githubusercontent.com/17515408/67618546-cde01980-f7e8-11e9-8f51-f304d822f3df.png"">"Martina Catizonemartinacat10/27/19, 08:50:06 AM
5332.05525Custom entry import dialog only appears on broken files and is empty with inherited JabRef settings"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev (commit db96f88 master) on Ubuntu-16.04 x86_64

- [x ] I have tested the latest development version from `* master db96f88 Fix problem with search and switching between libraries (#5326)` from https://github.com/JabRef/jabref.git and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

If a broken bibtex file that contains correct custom entry types is presented to JabRef, the ""Custom Entry type dialogue appears, and it is different depending on whether JabRef settings are created anew or if they are inherited from the different version.

- If the settings are inherited from the 4.0 JabRef version (my setting file is attached 
[jabref-settings-2019-09-19.zip](https://github.com/JabRef/jabref/files/3631771/jabref-settings-2019-09-19.zip)), and a broaken file is opened, an *empty* dialogue window is presented for the custom entry import;

- If the settings are created anew with JabRef 5.0-dev, the broken file causes a dialogue with reasonable content to be displayed;

- If a correct bibtex file is presented (regardless of the settings), the import dialogue is not presented and the settings are silently imported into both old and new settings.

Steps to reproduce the behavior:
1. Back up your old settings, or remove them if you have a backup:
`mkdir -p ~/wastebasket; if [ -d ~/wastebasket/jabref ]; then ( set -x; rm -rf ~/.java/.userPrefs/org/jabref ); else mv -v ~/.java/.userPrefs/org/jabref ~/wastebasket; fi`
2. Unpack the JabRef settings from JabRef 4.0:
`( cd; unzip ~/jabref-settings-2019-09-19.zip )`
3. Start the new JabRef in the Git working copy:
`build/image/bin/JabRefMain test-entry-types-broken.bib &`
The first dialogue that appears, correctly reports the error in the file; the second, however, looks strange:
![Screenshot from 2019-09-19 17-48-04](https://user-images.githubusercontent.com/10668420/65254983-c486d180-db05-11e9-8637-fb0ef4b5c28e.png)
4. Remove the JabRf setting files:
`rm -rf ~/.java/.userPrefs/org/jabref`
5. Without restoring the old settings, start the 5.0dev JabRef:
`build/image/bin/JabRefMain test-entry-types-broken.bib &`
The first dialogue on startup is again the expected error message, and the second is a reasonably filled ""Custom entry types"" dialogue:
![Screenshot from 2019-09-19 17-52-29](https://user-images.githubusercontent.com/10668420/65255360-660e2300-db06-11e9-90c9-89b65cc14896.png)
6. If a correct bibtex file is imported:
`build/image/bin/JabRefMain test-entry-types.bib &`
no ""Custom entry types"" appears, regardless of whether the `~/.java/.userPrefs/org/jabref` directory exists, an if it exists whether it is from JabRef 4.0 or JabRef 5.0.

From the user's perspective, the ""Custom entry types"" in step 3. seems incorrect, and the behaviour in steps 5. and 6. seems inconsistent; one would expect that the ""Custom entry types"" dialogue either always appears or is always by-passed.

The mentioned bibtex files with custom entry types are here: 
[test-entry-types.zip](https://github.com/JabRef/jabref/files/3631856/test-entry-types.zip)"Remove empty customization warning"Fixes #5332. Problem was that the dialog was shown whenever the library contained customized entry types, even if the customizations were equal to the customization stored in the global preferences. A bit of refactoring/renaming along the way.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [x] Change in CHANGELOG.md described
- [x] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"Tobias Dieztobiasdiez10/27/19, 12:16:55 PM
5546.05554Link file (without copying) doesn't work"JabRef 5.0.0-dev--2019-10-29----3b6c355ae
Linux 5.0.0-32-generic amd64 
Java 12.0.2


- [X ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. open Preferences/Entry Editor
2. set Default drag & drop action to ""Link file (without copying)""
3. The file nevertheless is renamed using the bibtex key.
"After a long discussion in the last dev call, we have decided to remove the preference option that controls the default drag and drop action (see #5668). You can use the modifier keys like `Ctrl` or `Alt` to change the drop behavior.  =||= Make entry editor DND behave as specified in settings"<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->
Fixes #5546 

The setting only applies to the entry editor. The maintainable is still differentiating between the DND Modifiers as implemented in the linked PR
@koppor  

Refs #3765
----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] Ensured that [the git commit message is a good one](https://github.com/joelparkerhenderson/git_commit_message)
- [ ] Check documentation status (Issue created for outdated help page at [help.jabref.org](https://github.com/JabRef/help.jabref.org/issues)?)"ChristophSiedlerchr11/03/19, 03:47:50 PM
5580.05624Problem with current installer: Installation path can no longer be specified"JabRef 5.0.0-dev--2019-11-09----42053a819
Windows 10 10.0 amd64 
Java 12.0.2

The current developer version of JabRef apparently does not allow any more to specify the installation path. I realised this because I always had two installations of JabRef.

1) The one I use for actual work (version 3.8.2)
2) The second I use to test new features/stability/bugs/etc. (version 5.0.0-dev)

The first one was installed under `C:\Program Files\JabRef`, the second one under `C:\Program Files\JabRef_dev`. Previously this worked flawlessly - but now apparently it is no longer possible to specify the installation path. If I install a new developer version of JabRef it will just replace my working version 3.8.2 since I cannot specify the installation folder (I reckon it defaults then to this folder).

This is very inconvenient - every time I install the developer version of JabRef now, it will replace my working version. To get that one back, I have to reinstall version 3.8.2 (which obviously also means, that the developer version is then not available anymore). I have not tested what happens if I change the installation directory of 3.8.2 to `JabRef_dev` instead of `JabRef`, but this is would be a very bad workaround anyway, so should not be pursued.

Please make it possible again, to have two separate installations of JabRef. Otherwise I cannot test the new developer version any more.""Problem is known and due to a bug in jpackage. Hopefully, the next jpackage update resolves it.
https://github.com/JabRef/jabref/blob/42053a819183c587adf5da39c9791e765edca2a7/build.gradle#L585-L586 =||= Cheers, ok, then let's hope they fix this quickly - as long as they don't fix it, I cannot test any developer versions of JabRef any more. =||= @AEgit  You can also use the windows portable verisons as well. Just unzip it to a dir.
 =||= Refs https://github.com/JabRef/jabref/pull/5572 and https://github.com/JabRef/jabref/pull/5570 and https://github.com/JabRef/jabref/pull/5559. =||= @Siedlerchr Thanks for the heads up. Hmmm, at the moment I will wait until this issue is solved. Due to the problems with the installer, I cannot even uninstall the last dev version I had installed and I would like to avoid cluttering my system with different dev versions, where I might loose track of them. If it takes too long, though, I will have to consider your suggestion. Thanks again! =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0.0-dev--2019-11-17----151a216a2
Windows 10 10.0 amd64 
Java 13.0.1

Can confirm that his has been fixed in the current dev version. Cheers! =||= "Reenable installation path chooser"Fixes #5580.

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->

Merge if green.

----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/17/19, 04:12:44 PM
5520.05625Add file associations when installing"Latest development version does not associate bib files with JabRef (using Windows installer, but probably applies to Linux and Mac as well).

jpackage has the following option:
> --file-associations <file path> — Path to a Properties file that contains list of key, value pairs (absolute path or relative to the current directory). The keys ""extension"", ""mime-type"", ""icon"", and ""description"" can be used to describe the association. This option can be used multiple times.

The documentation is a bit sparse at this point. Probably needs a bit of experimentation using different formats. Relevant part of the build script: https://github.com/JabRef/jabref/blob/9fd49bcb2560a46c7f319dd59fdd9a58845415ce/build.gradle#L565-L607""Can I poke around at this? =||= Welcome @UltimaBGD! Feel free to work on this issue. Also have a look at our [contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) and feel free to drop by in our [developer chat](https://gitter.im/JabRef/jabref) if you have questions! =||= As of now, I have tried to input the 
--file-associations 
option within the Installer Options list with a path to a properties file. As of now it seems to be locating the file, but fails building with a null pointer exception for reasons I am not sure of.  =||= Thanks for having a look at this. Could you please post the full exception details here, then I'll have a look. =||= Sorry for the late response, I will post a write-up of my attempts and the scan from Gradle, and we will see if I am missing something obvious. I will try to get to it later today. =||= Okay, so I added an additional line to the installerOptions for Windows following the same format as the other file paths. 

I know it is able to locate the properties file I was creating as I tried specifying an incorrect pathname a number of times, and it would give an error stating that the filename could not be found in addition to the null pointer exception. When adding `--file-associations` is the only time it gives that null pointer exception. Had I removed it and changed nothing I am able to build an MSI successfully. I have tried a few pathnames, but as stated before it does seem to actually be locating the file. I do not know if it is the properties file itself or something with the command that is causing this at the moment.

Running the jpackage command through the scan option produces this:

https://scans.gradle.com/s/277hsazt3rx6w

It does note that it is a configuration problem, but I am not sure wherein the issue is. I could honestly be missing something really obvious.

 =||= I found this bug report which seems to be related:
https://bugs.openjdk.java.net/browse/JDK-8232935?filter=37667 =||= So it seems to be isolated to when no mimetype is provided. I will check it out. =||= Note that there has been a new release of the jpackage tool (v64)
Build 14-jpackage+1-64 (2019/10/28)

Edit:// After the update oft the jpackage, the windows build fails. It would be cool if you could look into that as well: https://github.com/JabRef/jabref/runs/278995661 =||= On the version we are currently on, that bug report is indeed the same cause. Adding a mime-type does allow for the build to continue.
 =||= @UltimaBGD  Thanks for your testing and your digging into the issue! It would be reall nice if you could prepare a Pull Request to fix this issue and to fix our build.  =||= I'm poking around with the new version to see if I can figure out what's making it go wrong, after that I can make a PR. =||= I poked around a bit with the version update, and I'm not too sure what's going on. It seems like there's an issue in the windows script Jabref-post-image.wsf. This is in the build folder, so this file does seem to be generated. It could be that something else doesn't have support for the newest version, or something else entirely. Unfortunately I am going to be busy for a couple of days and won't get to look at it a bit more in-depth for a little bit. Just wanted to give a bit of an update. =||= Hi, thanks for investigating. The wsf script is located under the buildres folder.  =||= Oh, I see, it ultimately gets moved. So, what I did find is that in the script it opens

`var wxsFilePath = installerConfig + ""JabRef.wxs"";`

This .wxs file, which according to the installer config, should be here:

`var jabRefRoot = fileSystem.GetFolder(""."").ParentFolder.ParentFolder.ParentFolder.ParentFolder.Path;
        var installerConfig = jabRefRoot + ""/build/installer/config/"";
`

This is, for whatever reason, not the case in the new version. It does exist in the old version, as it seems to get moved to this spot and then picked up by the script, but when the new version errors running this script and exiting with code 1, I believe it is because it cannot find this file.

If this is a file you know the location of, please let me know.

The .wxs is a wix file, which does explain why this is a windows only problem, and most likely only for the .msi installers.

As a test, I copied the JabRef.wxs from a previous compilation and saved it elsewhere in the project, and redirected the script to look to that file. It compiled successfully. So: 

The issue is the sudden disappearance of the JabRef.wxs files, as it seems to not be created or moved there (unsure if it's preexisting) and the script cannot find it. My solution is a workaround at best there. =||= Thanks for digging into this! There were some recent changes to how the `main.wxs` file (which is the general version of `JabRef.wxs`) is treated: https://hg.openjdk.java.net/jdk/sandbox/rev/bc43733cd5cf
Probably, this contains some bugs leading to the error now.

As this is very critical, I would propose we add the wxs file for now and hope the bug is fixed upstream in jpackage. @UltimaBGD could you please create a PR for this? Thanks! =||= I will have to do a bit more testing as I tried running the .msi file and it ends with error code 2343.

The build definitely runs, but for the time being, the MSI installer is broken. I will look more around at that.

In addition, just as an update as to the original point of this issue, I have not implemented the file associations yet as I thought this would take precedence, and in the event there were any internal changes I should test on the new version. I have learned some confusing things about it though. =||= Thanks for your ongoing investigation!
Seems like the jdk people fixed that with a recent commit https://hg.openjdk.java.net/jdk/sandbox/rev/920f6770d71c =||= Okay, so what should the recommended course of action be for now?

I can still ensure the windows build passes for now with a PR, or we can wait. =||= You can also try to put this file https://hg.openjdk.java.net/jdk/sandbox/file/bc43733cd5cf/src/jdk.jpackage/windows/classes/jdk/jpackage/internal/resources/main.wxs into `buildres/windows` (maybe renamed to `Jabrex.wxs`). =||= If this is really the fix, then temporarily disabling `win-dir chooser` should also work, right? =||= I'll test both of those and get back to you in a bit =||= Disabling `win-dir chooser` seems to prevent the MSI from opening. It gives me no other information other than a hard crash.

Running it with the new file still gives error 2343. =||= More testing, I found out this new version does create a main.wxs file! I moved the script to use that, except now this error occurs

`java.io.IOException: Command [C:\Program Files (x86)\WiX Toolset v3.11\bin\light.exe, -nologo, -spdb, -ext, WixUtilExtension, -out, C:\Users\Altima\Desktop\gitDocuments\jabref\build\distribution\JabRef-5.0.0.msi, -ext, WixUIExtension, -loc, C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\MsiInstallerStrings_en.wxl, -b, C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config, C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\wixobj\main.wixobj, C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\wixobj\bundle.wixobj]in C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\images\win-msi.image\JabRef exited with 92 code`

The exit code 92 does mean there is a duplicate symbol. I'm going to compare the .wxs from last version and this version and see if I can tell what the issue may be.

Running that command in the command line itself provides me with these results
`C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\main.wxs(86) : error LGHT0091 : Duplicate symbol 'Component:RegistryJabFoxEntries' found. This typically means that an Id is duplicated. Check to make sure all your identifiers of a given type (File, Component, Feature) are unique.
C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\main.wxs(86) : error LGHT0092 : Location of symbol related to previous error.
C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\main.wxs(86) : error LGHT0091 : Duplicate symbol 'Feature:JabFox' found. This typically means that an Id is duplicated. Check to make sure all your identifiers of a given type (File, Component, Feature) are unique.
C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\main.wxs(86) : error LGHT0092 : Location of symbol related to previous error.
C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\main.wxs(86) : error LGHT0091 : Duplicate symbol 'Property:ARPPRODUCTICON' found. This typically means that an Id is duplicated. Check to make sure all your identifiers of a given type (File, Component, Feature) are unique.
C:\Users\Altima\Desktop\gitDocuments\jabref\build\installer\config\main.wxs(86) : error LGHT0092 : Location of symbol related to previous error.
`

With this in mind, I may be able to edit the scripts to fix this error. =||= So: Today I learned the hard crashes were NOT crashes. Just when the `win-dir chooser` is not set, it doesn't open up in a way I expected. That DID work.

That being said, still testing this to see if we can get the directory chooser back, and if so I will clean my workspace entirely and redo the work and prep for a PR. =||= Installer still closes with 2343.

So, for the other PR, I can either change the script to point to ""main.wxs"" when it is generated or I can take that file, rename it to JabRef.wxs, and place it into the buildres folder and tell the script to look there instead. Is there any preference to the approach? =||= Good job! I would prefer to put the file in the buildres folder.  =||= Okay, there is a PR up to support the latest version of Jpackage, which got merged.

I will get back to the file associations in a few days. =||= My apologies, it seems like I won't have the time to get back to this for a week or two. If it is still an issue when I have time, I will work on it. Hopefully all I wrote in here thus far will provide help if anyone else works on it.  =||= No problem! Thanks for your good work on this issue (and to get the installer working again). =||= In the linux launcher I removed the properties file since it only had the reference to the bib resource
(MimeType=text/x-bibtex) and it was only used in linux at the time.
I had introduced it in the attempt to build the deb/rpm info with jpackage,
but it seemed to me to be confusing to have an additional file for a single line declaration.
If it ends up being shared with the windows (and mac?) builds it can be reintroduced!
Is this a supported strategy by upstream jpackage? =||= The properties file should be able to be shared amongst the installers considering the only information in it should be the mimetype, extension, icon and description. If the icon is different across operatin systems, then potentially not. =||= Is it not only for information on what it should open?
I might have misunderstood the description on  https://jdk.java.net/jpackage/
but it seemed to me that the properties file should contain associations to allow launching the application.
In the case of jabref this would be mimetype and extension..
I'm not sure about the other two..
I thought they were other associations..
Or they could be an icon/description set to the file that has the mimetype/extension?
I guess that in the last case everything could be shared..
@tobiasdiez   =||= I think the icon would ultimately be what you see when you have the association made, like how you see a small notepad when a txt file is associated to open in notepad. =||= Yes, so the last thing I said and thought of.. I had dismissed it too soon :)
In that case I think that it could be useful to share a single file, since I believe all the parts should be common to the different systems.. =||= Windows could need an `.ico` instead of a `.png` though.. 
so our dream of a shared file might be short lived..
I seem to remember macos accepting png for icons..but this was back in the olden days...
A test seems like a good idea! =||= The best ""documentation"" I could find are the jpackage unit tests

- File format: https://hg.openjdk.java.net/jdk/sandbox/file/fbaf2e6402ad/test/jdk/tools/jpackage/helpers/jdk/jpackage/test/FileAssociations.java
- Icon path: https://hg.openjdk.java.net/jdk/sandbox/file/fbaf2e6402ad/test/jdk/tools/jpackage/share/FileAssociationsTest.java references TKit.ICON_SUFFIX which according to https://hg.openjdk.java.net/jdk/sandbox/file/fbaf2e6402ad/test/jdk/tools/jpackage/helpers/jdk/jpackage/test/TKit.java is indeed depending on the OS. This suggests that one need a properties file for each OS.  =||= @UltimaBGD Thanks for your investigations. With your help, I was now able to fix this issue. (There still might be some problems with the file icon on Linux...) =||= I'm glad I was able to help! =||= "Readd file associations"Fixes #5520. At least works on Windows. @LyzardKing could you please test this for linux as well? Thanks!

<!-- describe the changes you have made here: what, why, ... 
     Link issues by using the following pattern: [#333](https://github.com/JabRef/jabref/issues/333) or [koppor#49](https://github.com/koppor/jabref/issues/47).
     The title of the PR must not reference an issue, because GitHub does not support autolinking there. -->


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [ ] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/19/19, 11:50:39 AM
5626.05630"Today's ""master builds"" .deb won't install (2919-11-17)""<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. ...
2. ...
3. ...

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
(Reading database ... 
(Reading database ... 5%%
(Reading database ... 10%%
(Reading database ... 15%%
(Reading database ... 20%%
(Reading database ... 25%%
(Reading database ... 30%%
(Reading database ... 35%%
(Reading database ... 40%%
(Reading database ... 45%%
(Reading database ... 50%%
(Reading database ... 55%%
(Reading database ... 60%%
(Reading database ... 65%%
(Reading database ... 70%%
(Reading database ... 75%%
(Reading database ... 80%%
(Reading database ... 85%%
(Reading database ... 90%%
(Reading database ... 95%%
(Reading database ... 100%%
(Reading database ... 348213 files and directories currently installed.)
Preparing to unpack .../jabref_5.0.0-1_amd64.deb ...
Unpacking jabref (5.0.0-1) over (5.0.0-1) ...
Setting up jabref (5.0.0-1) ...
install: cannot stat '/opt/jabref/lib/native-messaging-host/firefox/org.jabref.jabref.json': No such file or directory
dpkg: error processing package jabref (--install):
 installed jabref package post-installation script subprocess returned error exit status 1
Errors were encountered while processing:
 jabref

  ```
</details>""The change to build.gradle isn't in the branch...
It might have been excluded in a merge..
I can look into the issue properly tomorrow.
I think the addition was a replacement of the include line with: `include ""native-messaging-hosts/**"", ""jabrefHost.py""`
I'm not on my computer now, so I can't test it... =||= @wujastyk It should be fixed in the branch..
If you want to test it once it uploads (if it works :wink: ) =||= Yes, the .deb master build of 18 Nov installed fine.
 =||= Problem with today's deb (2019-12-15):

$ sudo dpkg -i jabref_5.0-1_amd64.deb 
[sudo] password for xxxx:          
(Reading database ... 352134 files and directories currently installed.)
Preparing to unpack jabref_5.0-1_amd64.deb ...
Unpacking jabref (5.0.30003-1) over (5.0.30001-1) ...
dpkg-deb (subprocess): cannot copy archive member from 'jabref_5.0-1_amd64.deb' to decompressor pipe: unexpected end of file or stream
dpkg-deb (subprocess): decompressing archive member: lzma error: unexpected end of input
dpkg-deb: error: <decompress> subprocess returned error exit status 2
dpkg: error processing archive jabref_5.0-1_amd64.deb (--install):
 cannot copy extracted data for './opt/jabref/lib/runtime/lib/server/libjvm.so' to '/opt/jabref/lib/runtime/lib/server/libjvm.so.dpkg-new': unexpected end of file or stream
Errors were encountered while processing:
 jabref_5.0-1_amd64.deb
 =||= How large is the file? - We sometimes have upload issues to our build server. In case you see the file size differing more than 30MB from the others, it wont't be complete.

We are working on a fix at https://github.com/JabRef/jabref/pull/5748. =||= Dec 16 ""master builds"" .deb compiles fine.  Sorry, I don't have yesterday's
file now.
 =||= "Add the correct path to the native messaging json files"Add in build.gradle the correct path to the json files needed
for the native-messaging-host functionality.

Fixes #5626 


----

- [ ] Change in CHANGELOG.md described
- [ ] Tests created for changes
- [x] Manually tested changed features in running JabRef
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Galileo SartorLyzardKing11/18/19, 05:31:02 AM
5257.05665Jabref reports inexistent changes"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-dev

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Jabref frequently reports external changes although there have been none (I could find the corresponding bug report). Now, it also reports changed fields. However, both values are identical, e.g.
```
Modification of field: DATE
Value set externally: 1987
Current value: 1987
Modification of field: LOCATION
Value set externally: Stroudsburg, PA, USA
Current value: Stroudsburg, PA, USA
```""Refs https://github.com/JabRef/jabref/issues/5085 =||= See also:
https://github.com/JabRef/jabref/issues/4877
https://github.com/JabRef/jabref/issues/4810

Might all represent the same bug (?). =||= What is new (the ""changes"" were empty before) is the information that e.g. the DATE changed from 1987 to 1987, which obviously is an error since it is the same value, that is, there was no change. So I'd reason that there is some error in the code. Maybe you monitor the inode of the bib file and when a change is reported you report back anything without checking values? Which still leaves to explore why there would be any change to the file at all, maybe atime changes as the file is indexed or accessed by other tools? =||= Yes, we do watch the directory for change as it's not possible to watch a single file change.
Do you have any other files in the same dir as the bib file? e.g. the pdfs?

https://github.com/JabRef/jabref/blob/0dd091f31b86b02dd9e44b4ac86aa204d4dec9ef/src/main/java/org/jabref/gui/util/DefaultFileUpdateMonitor.java

The bib files is compared entrywise in the ChangeScanner
 =||= Yes, I have several bib files in the same directory. But obviously I cannot change them simultaneously in Jabref. So once I (auto)save one bib file, all other open bib files in the same directory are checked for changes for each single entry? Why don't you look at mtime (and maybe file size) to see if there really has been a modification?

I would also guess that there is something wrong in the ChangeScanner since it reports 1987 and 1987 to be different values. =||= I could reproduce it somehow under linux:
This totally weird.
1. Open the library
2. Delete the sav and bak files
3. Save 
4. Review changes pops up. All have the same value for author (e.g. a)
5. Change author to b
6.   **Value set externally = entered value = b, Current value = a, Current tmp value = a**
7. **Dismiss changes,**
8. Hit save again, no changes popup
9. Modify author to c
10.  Hit save
11. Review pops up:  **Value set externally = entered value =c,  Current value = a, tmp  = b**
12. Hit **accept changes**
13. Save again
14. Review pops up: **Value set externally = c, CurrentValue = c, tmp = a**
15. **Dismiss**
16. Modify author to d
17. Review pops up: **Value set externally = entered value =d , Current val = c, tmp val=c**
18. **Dimiss** changes again
19.  Change author to e
20. Review pops up: **Value set externally = entered value = e,  Current val = c, tmp val = d**
----------------




 =||= Currently, JabRef does not store an in-memory copy of the loaded file (at the time of reading). Thus, when much is changed AND the file is changed on disk, sometimes, JabRef does not know, which part has really changed. In case the ""original"" version is stored, JabRef can be smarter. In other words: The user experience of http://help.jabref.org/en/SQLDatabase also has to work for local files. This would also fix https://github.com/JabRef/jabref/issues/5085 and https://github.com/koppor/jabref/issues/273. =||= The implementation would be [Optimistic Offline Lock](https://martinfowler.com/eaaCatalog/optimisticOfflineLock.html). =||= We heared interest of a interested persons. If someone else wants to work on this issue, please report back to me. =||= @koppor are you or somebody else actively working on this? =||= I will ask at the back office. =||= Refs https://github.com/JabRef/jabref/issues/5124. Fix could solve https://github.com/JabRef/jabref/issues/156 =||= Hopefully, this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= @koppor , @tobiasdiez Is it moved from ""High priority"" to ""Closed"" because it is a duplicate of #4877  (which is in ""needs triage"") or because you assumed it to be solved?

I just tried

> JabRef 5.0-beta.1--2019-12-15--0b8b1d6
> Linux 4.15.0-72-generic amd64 
> Java 13.0.1

and it still persits. =||= Originally, I'd hoped that this issue is fixed - but sadly its not. I think we only need one open issue for this, and as #4877 contains a lot of details this one is the canonical candidate. =||= "Improve change scanner"If a file is changed externally, JabRef is doing a 3-way merge between the last saved value vs current value in JabRef vs new value in file.
The way this is done is by first comparing the last saved file with the current (changed) file, and then trying to find additional/other changes in the currently open database. This is really complex and I believe there is some subtle bug in the logic leading to #5257.

With this PR, the change scanner is changed to a to simple 2-way merge between the current value in JabRef vs new value in file. This is way simpler and I hope this PR fixes #5257.
In a few edge cases, the 2-way merge has a small disadvantage. For example, consider the following steps:
- User A opens file
- User A changes field `Author` to `User A` and adds field `Title` with value `new`
- User B opens file
- User B changes field `Author` to `User B`
- User B saves file

At this point, User A gets a message that the file changed with the following changes:
- field `Author` changed from `User A` to `User B`
- field `Title` was removed

The 3-way merge could detect that `Title` was newly added, and thus could automatically reapply this change.  This is no longer possible with the simple 2-way merge.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/28/19, 07:39:53 PM
5664.05666soft link for main file directory fails silently (linux edition)"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:

We commence with a bibtex entry Gurney2019 and ~/papers/Gurney2019.
The entry doesn't link to the PDF.

1. Go to Options/Preferences/File.
2. set path to /home/powellj/papers (the soft link)
3. Make sure there's no file link for Gurney2019, remove it if there
   is.
4. Pick Quality/Automatically set file links (F7)

It finishes quickly with no error.  No file link has been made for
Gurney2019 in jabref.  No error was printed, but the PDF is in the directory i indicated.
This is a bug, and it happens because /home/powellj/papers is a Unix soft link to the true directory.
If jabref can't follow the soft link (?) then an error message is needed.

Next, use a path that doesn't have a soft link and you get very different behavior.

1. Go to Options/Preferences/File.
2. set ""main file directory"" to
   : /home/powellj/meow-backups/jep-files-current-total/meow/jep-files/research/papers                      
   (the directory pointed to by /home/powellj/papers)
3. Pick Quality/Automatically set file links (F7)

It finishes quickly with no error.  This time Gurney2019.pdf was found and the
 file link has been made for Gurney2019.

Please support a soft link for the main file directory.  I put this in
as a bug because I pick a perfectly good directory (in the Unix idiom
the fact that it's a soft link should be invisible to the app), and
not only do not get the desired result but the failure is silent.  At
the very least if you can't open the link and read it as a directory
this should be detected and immediately reported to the user through a
modal dialog saying ""Warning: you have selected a non-directory for
the main file directory.  Jabref will not find files there.""

Thank you for everything you do, I heart jabref bigtime but this hang-up has plagued my work flow for years.  I use links heavily to keep paths short and legible and flexible: my papers are sometimes on a thumb drive at /media/powellj, sometimes on a different drive, and I change the link auromatically as they move - I do this daily to move files from home to work and I like it that way: this is a solid use case for supporting soft links.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>"Thanks for your report. Could you please respond to this comment, where @LyzardKing tried to reproduce the problem but couldn't: https://github.com/JabRef/jabref/pull/5666#issuecomment-558047319. Moreover, it would be nice if you could try the version from https://builds.jabref.org/followSymLinks/ and see if this fixes your problem. Thanks! =||= Auto file finder follows symbolic links"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #5664. I didn't tried it, but it should work...

<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/28/19, 06:54:10 AM
3874.05667Look up fulltext documents does not link existing PDFs"It looks like the autolink functionality does not work as expected anymore:

1. I already have a file starting with the correct BibTeX key in my PDF repo
2. It still downloads the file from the web

I expect to pick up the file from the PDF repo instead.""Instead I get this icon in the file tab:
![image](https://user-images.githubusercontent.com/2141507/37759835-14614f14-2db5-11e8-947c-37b0a5c9d30f.png)
When I hover it says it found the PDF and if I want to accept it. 
However, this is 
- hardly recognizable
- it still downloads the new PDF in the background

This is a little bit akward.
 =||= I guess if we find a matching paper we can just add it without further user confirmation, as it is configured like that in the preferences.
@tobiasdiez I guess you implemented that, maybe you can help? =||= Yes, I implemented that automatically found files are displayed in the entry editor. The display is indeed a bit irritating and we should improve it (tracked in https://github.com/JabRef/jabref/issues/3607).

I don't understand why ""auto-link"" should download PDF's at all. We have a different button/menu entry for fulltext download, this should suffice. =||= Ah sorry, I mean `Quality - Look up fulltext documents`. The former behavior was:
- PDF already found link it instead of download it a new. =||= Ok, I can't remember I changed anything there but I do like the new behavior better and find it logical. If I click on ""Look up fulltext document"" I expect that JabRef downloads the fulltext for me regardless of whether there are already files linked or not. =||= Hm, well we could leave it in such a way but then downloa full text would be more appropriate than lookup.
Also, it means two steps for the users. Try to autolink files, iff not found download files.
Formerly, this was integrated in one step. =||= +1 for Looking up Fulldocuments should first try to search autolink file.
If not found -> Download from web =||= This is important as a user cannot know if a file already exists in some subfolder for example and then downloads it again. =||= Just a wild guess: It could be https://github.com/JabRef/jabref/pull/3368 (not reviewed by me) and the follow-up fix https://github.com/JabRef/jabref/pull/3509 (think, slightly reviewed by me). =||= Do we have a ""force-download"" button?

Currently, I think, the common usecase is that one has one PDF for one entry. I am aware that sometimes, one collect's author copy, presentation, publisher version, ...

Maybe, the file handling can be improved in general... Giving ""types"" to file entries. Not the media types, but the semantic types (author's copy, publisher, draft, submitted, ...)

Refs https://github.com/JabRef/jabref/issues/98 somehow =||= I've thought a bit more about this and now I'm more convinced than ever that we should change the name of the action to ""Download full text"" (as @stefan-kolb proposed) instead of changing the current behavior. I think there are mainly the following uses cases:
- The user created a new entry based off some source (e.g. website). In this case, he just wants to download the pdf (as there is no local file). It would be not harmful to look for a matching local pdf first, because it does not exist (in this use case).
- The user just downloaded the pdf (and renamed it) and the database already contains a matching entry. In this case, the user wants to simply link the new file. If the linking fails (e.g. because the name of the pdf was slightly off) and we would change the behavior, JabRef then downloads a new pdf and the user now has two files for the same entry. Not what he wants. Instead it would be may more helpful if JabRef would realize that there is a similarly named file and propose to link that...
- The user has an entry and does not remember if he already downloaded the corresponding pdf. In this case, he wants to first look for a local pdf and if that does not exist search for an online full text. For this use case, the new behavior would be perfectly fitting. However, it is also currently very easy to proceed: just open the general tab of the entry and you see if JabRef finds a local file (it would be shown in the list of files). Depending on that the user can accept the link or download the pdf.

Thus, the only advantage of the new behavior is saving a single click in the last use case. At the cost of a (in my opinion) somewhat confusing and complex feature. It definitely needs further explanation (since nobody would guess that Lookup = local lookup + online download). Thus, in summary, I'm strongly in favor of a simple ""Download full text"" feature that everybody understands when reading the action name. Long live ""Do one thing, and do it well"" ;-)
 =||= ""Rename ""lookup fulltext"" to ""download fulltext""""Closes #3874 and surpasses #5216.
Does not addresses the follow-up issues mentioned in https://github.com/JabRef/jabref/pull/5216#issuecomment-557589116

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/24/19, 09:45:01 PM
5661.05670Special columns are not displayed correctlyLatest dev version. Special columns such as `qualityassured` simply display the text (e.g `qualityassured`) instead of the icon."@calixtus  You recently worked on this feature? =||= Oh, thanks. Didn't see that. Thanks for the fix.
Sorry that I'm not much of help at the moment. I submitted my thesis and I'm learning for my exams in the end of January. Maybe I've got some time in christmas-holidays. =||= "Improve column preference migration"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #5661.

<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/27/19, 07:46:23 PM
5653.05671"Import option ""Copy, Rename, Link"" behaviour in v5-dev""I don't know if this a bug or the expected behaviour of the ""Copy, Rename, Link"" option but I got this when importing a PDF (I cannot be sure of the correct order of the execution of course):

1. File is copied into my JabRef folder.
2. _Original_ file is renamed in its current location.
3. Renamed file is linked to the database.

Ergo I got a correctly renamed PDF in the program which is not the one imported in my JabRef folder. Seems rather buggy. 

Tested with the AUR package and portable version on Linux. 

Thanks
"Refs #5563 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Thank you Tobias, I confirm it's been resolved. =||= Fix copy drag and drop action"Fixes #5653.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez11/24/19, 05:25:15 PM
5537.05717importBibtex imports to an untitled library in a new instance"As the title suggests, with the recent jabref updates the --importBibtex option opens a new instance of JabRef, and automatically adds the reference to a new ""untitled"" library.
Last time I used this functionality it asked confirmation and added to the running Jabref and lib.""A quick look in the code reveals that it checks if there is a currentBasePanel active.
I guess the base panel is not yet there due to the lazy loading stuff =||= And that should work for the untitled library, but why is it launching another instance in the first place?
Should the cli part not look for an open instance in the first place? =||= The point for debugging would be: https://github.com/JabRef/jabref/blob/f14b12b9d863af5079f194eba4590bd8785026de/src/main/java/org/jabref/cli/ArgumentProcessor.java#L87-L98 =||= This is still an issue in the last builds...
I'm not sure how to debug this.
Is the open instance of jabref be set by line 92 (`result.setToOpenTab();`)? =||= Yes, I guess that libraries with `setToOpenTab` are opened as new tabs. It might be sufficient to simply remove that line...

(You can debug this by adding command line arguments to the start configuration in IntelliJ.) =||= Removing that line makes no difference..
I wonder why the open instance of jabref is not being recognized any more.. =||= Have you checked that it's enabled in the preferences? e.g. allow only a single instance of jabref? =||= @Siedlerchr Do you mean the `remote operation` option in `advanced`?
It's checked, but on linux it never made a difference.
(I noticed I forgot to add the os to the original post..) =||= I get the same issue if I --importToOpen file.bib
It always opens a new instance of JabRef.. =||= This issue apparently only applies to the deb install.
The rpm works properly..
**EDIT**: The snap also works.. there's something wrong with the deb. I tried a vm as well to rule out my system, and I get the same issue.. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= I tried the latest build from master and it behaves the same, opening a new blank window.
This time it doesn't add the reference to the new blank window, but neither to the original window..
So I'm left with the original unchanged bib window, and a blank one, with no tab open. =||= Do you start with having an instance of JabRef open? =||= Yes, i have the open instance with my bibliography file active =||= ok, than this is another bug. What I fixed was that starting a new instance with the cmd option works as expected. =||= So with this fix it should work if I don't have an instance open already? =||= "Fix import into currently open library"Remove unnecessary parallel execution of `addTab`, which fixes #5537.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez12/07/19, 01:10:19 PM
4800.05730"Irritating jumping to the ""default"" display (Sort order) when closing Options""JabRef 5.0-dev--snapshot--2019-03-20--master--6c61664a8
Windows 7 6.1 amd64 
Java 1.8.0_201
- [+] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
I like to change the sort order for being able to directly edit an imported file using the timestamp. It is very irritating that opening Options for any adaption does not maintain the sort order. Jabref *allways* restores its default sort order which I cannot see where it comes from. It would be extremely nice to have the sort order maintained not only when saving (that is an open request) but also when looking at Options.


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""@bernhard-kleine Could you please elaborate the issue more so that I can give a try to re-produce it in the latest build. =||= @CyraxSector It is very simple:
1. Get a file which spans more than one display. 
2. Then sort the files on the title of entries or the year or the timestamp which I usually do to see which entries I  have lately added. The table should be different what you obtaines when opening the file.
3. Choose then Options and close it.
4. The dispaly is not longer sorted on the title, year, or timestamp, but of something else. 
 =||= There is not the master where this implemented. This master we must
await, still.

Am 16.12.2019 um 18:14 schrieb Christoph:
>
> Closed #4800 <https://github.com/JabRef/jabref/issues/4800> via #5730
> <https://github.com/JabRef/jabref/pull/5730>.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/4800?email_source=notifications&email_token=ACGKDZ5WQDVOAIEWIJ2NTDDQY6ZNZA5CNFSM4HAJO4R2YY3PNVWWK3TUL52HS4DFWZEXG43VMVCXMZLOORHG65DJMZUWGYLUNFXW5KTDN5WW2ZLOORPWSZGOVQINCOI#event-2886783289>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/ACGKDZ5SQIURBKC7JJMTNSLQY6ZNZANCNFSM4HAJO4RQ>.
>
--
spitzhalde9
D-79853 lenzkirch
bernhard.kleine@gmx.net
www.b-kleine.com, www.urseetal.net
Ich darf auch auf mein neues Buch ""Falter in Lenzkirch"" aufmerksam machen
(Infos bei mir)
-
thunderbird mit enigmail
GPG schlüssel: D5257409
fingerprint:
08 B7 F8 70 22 7A FC C1 15 49 CA A6 C7 6F A0 2E D5 25 74 09

 =||= "Persistent column sortorder"This PR should make the column sort order persistent. @Siedlerchr [asked me](https://github.com/JabRef/jabref/pull/5544#issuecomment-548879914) to give it a shot, and to see if it's somehow quicker. I tried to stay close to the JavaFX implementation of the the column sort order and somewhat close to the mvvm pattern. I don't think it has much impact on the performance, compared to the current master, but i'm not equipped with a profiler to test it. So it's just my subjective opinion. 😁 Maybe someone else likes to test it?

fixes #4800 fixes #4224
refs #5713 and #5368
follow-up to  #4327 and #5544

The next step would be to implement sortorder by library, which would allow some more exotic use cases for jabref. I remember someone had problems with the sort order when using jabref as a library for some genetics stuff, but i wasn't able to find it in the issues...

So, let's talk about this.

Screenshot is omitted, as there is nothing to see here.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus12/16/19, 05:13:59 PM
5037.05738Multiscreen issue"I have a strange issue, not sure whether this is JabRef or general Windows 10 issue. I have a multimonitor setup, if I leave JabRef open on the monitor that is later detached, JabRef remains inaccessible in the notebook monitor. While all the windows move to the notebook monitor, JabRef stays on the ""extended"" one, even if I close JabRef and reopen.""Hm, that is probably related to the fact that JabRef stores the window position at closing and restores it at startup. So JabRef will start in the void.

However, there are some tricks to get the window back:
https://www.technipages.com/bring-off-screen-window-back-onto-screen =||= The tricks are fine, however, it would be good if JabRef would work as every other window in Windows 10, without the need of a trick. Am I wrong with this expectation?  =||= A quick search turned out that it is possible to detect the screens in javafx, but I am not sure if this helps with storing the coordinates. Maybe at startup one could check if the coordinates are outside the current screen. But that the window automatically comes back to the main monitor seems to be a java? problem. No idea though
https://stackoverflow.com/a/34948184

 =||= Thanks to @MisterM13 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Bugfix for Multiscreen"Made following Changes to solve Multiscreen issue fixes #5037:

At JabRefGUI:
-  new local variable correctedWindowPos  to support saving of Screendata
- change in method openWindow to open window at the mainscreen if needed
- made method printWindowState() to print out windowposition data (if Logger in debug mode)
- made method  testExternalCoordinates() to test if window is on external screen
- made method numberOfMonitors() to test if external screen is connected
( |-> numberOfMonitors() finally replaced by Screen.getScreens().size())

At JabRefPreferences: 
- made copy of the window position and size variables (recognised with _CORE)
- made initialisation for the variables described above

(made in accordance with an Project on Software Engineering at University Basel in cooperation with @unibas-marcelluethi)

<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Manually tested changed features in running JabRef (always required)"Matthias MuellerMisterM1312/12/19, 08:16:31 PM
5645.05752medline import does not work"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 
JabRef 5.0.0-dev--2019-11-19----ae02dcb46
Windows 7 6.1 amd64 
Java 13.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. into the (websearch)Medline/Pubmed enter a number e.g. 29316417 and press search
2. the dialog pops up and shows ""Processing 29316417""
3. nothing furthers happens, I waited 70 min. 

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  Log file is empty. There is actually no logging.
</details>""This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= I installed this version: 
JabRef 5.0-alpha--2019-12-07--d0f6c2b
Windows 7 6.1 amd64 
Java 13.0.1

and jabref gets still stuck with the import dialog. The problems is not solved!!!
 =||= Does it only apply to the above id, or to every ID / query you try? 

I tried it and it worked for me. Moreover, we have automatic tests in place which also pass. Thus I guess there is a problem with your connection or something like that. =||= Running from source code works, it takes approx 5 mins and then it's there, but running the installer I have the same effect.
 =||= @tobiasdiez : This time was with an different ID, and with a third one, too.
 =||= @Siedlerchr  5mins is still much to long.
 =||= BTW I have in the meantime fetched a couple of entries via Zotero and that worked flawlessly. I.e, my internet connection is working very well.
 =||= I finally was able to debug it:
1. Remove `strip-debug` argument from jlink

Starting JabRef via JabRef.bat from X:\Users\CS\Downloads\JabRef-5.0-portable_windows(1)\JabRef\runtime\bin\Jabref.bat
2. Modify the bat
Change the last line to:
```
pushd %DIR% & %JAVA_EXEC% -Xdebug -Xrunjdwp:server=y,transport=dt_socket,address=8000,suspend=n -p ""%~dp0/../app"" -m org.jabref/org.jabref.JabRefLauncher  %* & popd
```

Create a remote debugging connection and connect:
Setting breakpoints I saw it fails becuase of a modularity issue
@tobiasdiez  Any idea how to fix this? 

```
javax.xml.bind.JAXBException: Error while searching for service [javax.xml.bind.JAXBContextFactory]
 - with linked exception:
[java.util.ServiceConfigurationError: javax.xml.bind.JAXBContextFactory: module org.jabref.merged.module does not declare `uses`]
``` =||= Does it help if you add `uses javax.xml.bind.JAXBContextFactory;` here https://github.com/JabRef/jabref/blob/master/build.gradle#L599 and/or in https://github.com/JabRef/jabref/blob/master/src/main/java/module-info.java ?

Since you manage to debug the installed version, can you please have a look at https://github.com/JabRef/jabref/issues/5475 as well (which I guess is also due to some modularity issue). And please add the above steps to the wiki so that we don't forget how to debug the installed app. =||= @tobiasdiez  Thanks for the hint, the uses in the gradle worked. I also added a wiki entry =||= This issue should now be fixed in the latest master (not in the beta). It will take some time until the new binaries are uploaded. 

 =||= works! Thank you very much. =||= "Fix medline fetcher/importer when using installer"Fixes #5645 

The solution was to add a missing ""uses"" to the build.gradle file.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr12/16/19, 12:36:12 PM
5753.05764White line on screens scaled != 100%"JabRef version 5.0-beta on Windows 10

Thanks for the new beta build!
The new beta build has a few, uncritical, quirks I want you to inform of. 

When the window is displayed on a screen with scaling (e.g. a 4K screen), there is a line between the menue of the window and the tollbar as shown in the attached screenshot. 
 
![grafik](https://user-images.githubusercontent.com/41870754/70932102-3b663480-2039-11ea-94af-fcaec3ccd6fb.png)

That line is not present on a screen with 100% scaling. The line only appears/disappears when scaling the window, so when moving the window from one screen to another one has to resize the window in order to toggle the line. 
""Thanks for reporting, does this only occur in the Dark theme or do you notice that issue in the light/normal theme as well?

Edit:// Maybe it helps if there is a specific property or thing with css going on. Maybe something can be seen using
 https://github.com/JonathanGiles/scenic-view =||= This does only occur when the dark theme is selected. Light theme works fine.  =||= Thanks to @calixtus  this should now be fixed in the latest master. In roughly half an our the new build should be ready

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.
 =||= Thanks a lot!
I will report if it is fixed as soon as possible. But could be after christmas... =||= That bug is fixed, everything is working as expected. Thanks! =||= "Various fixes to the dark theme"Some visual bugs were still in the dark theme present. This is a quick fix:

+ Many icons where dark black. They use the standard text color now.
+ Wrong highlight color of the mark symbol in menus is now highlight text color.
+ The thin white line between the menubar and the toolbar is gone. ( fixes #5753 )
+ The background on starting up JabRef was white until a library was loaded.
+ The unselected checkbox border was black, only while the unselected radio-buttons were grey. Now they are all grey in various shades. (less then 50)
+ The group color indicator was unreadable, as the grey border was too ... grey. It's more lightweight now.
+ The CodeArea in the in the entry source editor and in the preview preferences had the wrong background color, caret color, selection background color, line number colors and some highlights were unreadable. They use the common color scheme now. ( refs [#5522-comment](https://github.com/JabRef/jabref/issues/5522#issuecomment-548920940) )
+ The citations tab was bright white, had some windows specific fonts encoded and some obscure font size settings. It uses the common color scheme now and the font settings are a bit equalized.
+ The dark tab header bar in the preview preferences was too heavy. It uses the common background color now.
+ The related articles tab in the entry editor presents the gdpr warning some smaller font size, it wraps according to the window width, shows a heading and has a fancy yellow border around it.
+ Fixed a typo (""Mr DLib."" instead of ""Mr. DLib"")
+ The TexParserResult dialog is now presented in a SplitPane.

Except the Mr. DLib tab, the light theme should not be affected.

Some screenshots before:
<img width=""39"" alt=""bright checks"" src=""https://user-images.githubusercontent.com/50491877/71040657-675fe380-2127-11ea-9a09-b62636f5891f.png""> <img width=""498"" alt=""dark tabbar"" src=""https://user-images.githubusercontent.com/50491877/71040806-c3c30300-2127-11ea-8211-8ea997b1f8cc.png"">
<img width=""90"" alt=""indist group indicator"" src=""https://user-images.githubusercontent.com/50491877/71040747-9e35f980-2127-11ea-9e36-6c322a927a9d.png""> <img width=""502"" alt=""inconsistent control colors"" src=""https://user-images.githubusercontent.com/50491877/71040766-aa21bb80-2127-11ea-8bcb-035a7496b02d.png"">
<img width=""159"" alt=""search icon"" src=""https://user-images.githubusercontent.com/50491877/71040811-c6bdf380-2127-11ea-8815-b24dc66285f1.png"">

And after:
<img width=""47"" alt=""better group bars"" src=""https://user-images.githubusercontent.com/50491877/71041367-2e287300-2129-11ea-9f3c-59d5df5f35a3.png""> <img width=""139"" alt=""source editor"" src=""https://user-images.githubusercontent.com/50491877/71041381-3385bd80-2129-11ea-99ad-e9f55f7f4c3b.png""> <img width=""176"" alt=""icons"" src=""https://user-images.githubusercontent.com/50491877/71041504-89f2fc00-2129-11ea-903a-af4c77bd06cf.png""> <img width=""346"" alt=""mrdlib"" src=""https://user-images.githubusercontent.com/50491877/71041386-37b1db00-2129-11ea-921b-d8e0c7dba484.png"">
<img width=""499"" alt=""previewprefs"" src=""https://user-images.githubusercontent.com/50491877/71041389-3a143500-2129-11ea-8cc9-c3dfe64132db.png"">
<img width=""515"" alt=""checkboxes and icons"" src=""https://user-images.githubusercontent.com/50491877/71041742-17cee700-212a-11ea-845a-cd5675eddc7c.png"">

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus12/18/19, 07:30:09 AM
5708.05776Cutting some of the bibtexkey raises error: Bale13 -> Bal13"
JabRef 5.0.0-dev--2019-11-28----ce0e8870c
Windows 7 6.1 amd64 
Java 13.0.1


- [ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. I imported an entry via zotero (since jabfox doesnot work
2. the resulting bibtexkey has been e.g. Bale13 or Heinrich87
3. These I reduce to Bal13 or Hei87. 
4. Immediately an java error is shown.
5. Once the error is clicked away, a second attempt to change bixtexkey works flawlessly.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.StringIndexOutOfBoundsException: begin 3, end 8, length 5
	at java.base/java.lang.String.checkBoundsBeginEnd(Unknown Source)
	at java.base/java.lang.String.substring(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$2.computeValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringBinding.get(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringBinding.get(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.get(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringWrapper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.StringBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.delete(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.updateContent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceSelection(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.deleteNextChar(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.TextFieldSkin.deleteChar(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextFieldBehavior.deleteChar(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.deleteNextChar(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$new$14(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details>""Cannot reproduce this under Windows 10 =||= I also had this. It's not restricted to the bibtex key and also occurs for other fields. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Unfotunately, it is not.
JabRef 5.0-beta.30--2019-12-23--51d6986 -- Windows 7 6.1 amd64  -- Java 13.0.1
I had an almost empty library with 1 empty and a second entry:
![grafik](https://user-images.githubusercontent.com/9216487/71379941-a2ea2a00-25cd-11ea-8af6-c9a4555d9583.png)
![grafik](https://user-images.githubusercontent.com/9216487/71380062-2c016100-25ce-11ea-8930-136c647c9143.png)


- I change Gu09 to Gune2009
- I saved the library
- I changed Gune2019 to Gu09.
- When ending the delete, the original error occured again.
- however, repeating the steps, the error did not occur again.
- Restarting jabref, however, caused the error to occur again.

<details>
 <summary>Log File</summary>
  
  ```
 ERROR FallbackExceptionHandler Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
 java.lang.StringIndexOutOfBoundsException: begin 2, end 6, length 4
        at java.base/java.lang.String.checkBoundsBeginEnd(Unknown Source)
        at java.base/java.lang.String.substring(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl$2.computeValue(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringBinding.get(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringBinding.get(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.get(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringPropertyBase.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.ReadOnlyStringWrapper.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
        at org.jabref.merged.module/javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.beans.binding.StringBinding.invalidate(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(UnknownSource)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.delete(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.updateContent(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceSelection(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.TextInputControl.deleteNextChar(Unknown Source)
        at org.jabref.merged.module/javafx.scene.control.skin.TextFieldSkin.deleteChar(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextFieldBehavior.deleteChar(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.deleteNextChar(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$new$14(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
        at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
        at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
        at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
        at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
        at java.base/java.security.AccessController.doPrivileged(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
        at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
        at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
        at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details> =||= @koppor Apparently the workaround does not fix the original issue. I would propose to temporarily disable the X11 support until your fix is merged into the jdk. What do you think? =||= I tried to select some text and then press Ctrl+X. It worked with my fix. What else do I need to replicate the issue? - Well, I think, I have to try the steps above 😇 =||= Well, OK for me to get JabRef usable... - Maybe, I'll have time at this year to work on that again. =||= It does not happen always, I need to try a few times before I trigger this bug. Especially now that there is some non-async going on because of the `Platform.invokeLater`. =||= As of today and the snapshot from 2020-02-29, there is only the ""library has been changed ...."" error, no java error AFAICS. After clicking ""dismiss"", the error does not occur any futher.  Can be closed in my humble opinion.
 =||= I don't see any PR referenced here. Does this relate to https://github.com/openjdk/jfx/pull/73? =||= "Fixes StringIndexOutOfBoundsException when cutting text"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

There is a  bug in the jdk that adding a listener to the `selectedTextProperty` leads to StringIndexOutOfBoundsException when cutting / deleting text from the field: https://bugs.openjdk.java.net/browse/JDK-8176270

This is the reason for #5708. I fixed it by uncommenting the problematic code, which was related to the X11 support. @davidemdot @koppor How important is this code for X11? Is there a workaround that does not add a listener to `selectedTextProperty`?

<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>.

Fixes #5708."Tobias Dieztobiasdiez12/23/19, 09:37:18 AM
5602.05781Gui tests are broken"All special types of tests (fetcher, database and gui) are currently broken. At least the fetcher tests should be fixed before the release of 5.0.

I would also vote to remove the ""allow failure"" for these tests (as soon as they are fixed). ""For reference: 

- Test results before junit5 conversion: https://travis-ci.org/JabRef/jabref/builds/610556163?utm_source=github_status&utm_medium=notification
- Test results after junit 5 conversion: https://travis-ci.org/JabRef/jabref/builds/610581351?utm_source=github_status&utm_medium=notification 

We once decided to allow failures at the fetcher tests, because we cannot control the online services. PRs will fail, because some external servers are down. This is not what we want to achieve (maybe it got better in 2019 with the external servers; however: data formats change in 2019, too. See #5582)

We decided to have fetcher tests running on a periodical schedule. Now, this is (easily?) possible with GitHub workflows. So, why not move the fetcher tests to a separate GitHub workflow running each Monday 6am?

In case a PR touches fetchers, we can trigger the check manually (can we?) or a developer has to execute it locally (or [using gitpod](https://medium.com/gitpod/github-flows-better-with-gitpod-e455d17990f9)) =||= Note that the database Tests were not executed in gradle correctly before my PR.
 =||= Fetcher and database tests are now working, only the GUI tests are left. =||= "Fix GUI tests"Fixes #5602, refs #2768.

Wanted to know why our GUI tests are broken. The reason seems to be that we don't pass the preferences objects directly around, but use `Globals.prefs` at more places. Currently, the issue is in `MainTable.java`:

```java
        importHandler = new ImportHandler(
                frame.getDialogService(), database, externalFileTypes,
                Globals.prefs.getFilePreferences(),
                Globals.prefs.getImportFormatPreferences(),
                Globals.prefs.getUpdateFieldPreferences(),
                Globals.getFileUpdateMonitor(),
                undoManager,
                Globals.stateManager);
```

I would propose to convert the constructor of `MainTable` (and `BasePanel`) to a builder pattern (because we have more than three arguments) and add passing of these preferences.

Alternatively, we can mock `Globals.prefs.GetFilePreferences()` etc. This is also OK for me as I accept global objects. However, we had a long discussion that we should get rid off `Globals`.

Is https://github.com/JabRef/jabref/issues/1579 the right issue, where we discussed `Globals.prefs`? I think, the comment at https://github.com/JabRef/jabref/pull/1593#discussion_r71328057 summarizes the discussion."Oliver Koppkoppor01/08/20, 10:08:57 PM
4719.05799"Re-implement ""Customize entry types"" dialog"In https://github.com/JabRef/jabref/pull/4716, the Customize entry types dialog was temporarily removed. It should be rei-mplemented in JavaFX once we converged to a stable entry editor layout (refs https://github.com/JabRef/jabref/issues/2790 https://github.com/JabRef/jabref/issues/366 https://github.com/JabRef/jabref/issues/4687 https://github.com/JabRef/jabref/issues/4688)."Can I customize them manual? =||= @burrbull you can use an older JabRef version (e.g. 3.4.1) to customize the entry types and then use the customized types in the new 5.0 version (only the customization dialog was temporarily removed, not the functionality). Sorry for the inconvenience.  =||= The dialog shows like that: 

![grafik](https://user-images.githubusercontent.com/1366654/70297735-7e313c80-17ef-11ea-9b42-4ce2e0947f50.png)

When working on that, https://github.com/JabRef/jabref/issues/725 should also be addressed
 =||= Is there a way to do this by manually editing some configuration file (instead of trying to mix JabRef versions)?
For some reason I do not have an Editor field available for @book entries and I would like to add that somehow.  =||= Sure, custom fields and custom entry types are all stored in the metadata at the end of the bib file.
You can always manually add the field also in the source-editor in the tab of the entry editor, e.g. `editor= { The book editor}`

Edit// I am currently reworking the dialog. Should hopefully be finished soon. See #5799 
 =||= Thanks, I am happy to manually add something to the bib ...  what would the metadata at the end of the bib file have to look like in order to simply add the editor field to @book entries?  =||= "Reimplement custom entry types dialog"Fixes #4719 

Very early draft.
Field Type should be radio button to switch between optional/required

TODO:

- [x] Add check for empty fields and types (prevent them with validator)


![grafik](https://user-images.githubusercontent.com/320228/71933194-dae29700-31a1-11ea-9690-2110c706c0df.png)


<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr02/19/20, 09:04:58 AM
5820.05823Error when messing up bibtex"Hello,
Here is a deadlock error which happened to me while pasting a bibtex entry next to en existing one. A warning appears as shown in the picture but the user cannot close it as it keeps reopening. I had to search the JabRef process in Linux and kill it.

This happened for version5.0 beta 1 in Linux.
Regards,
Cristian

![Screenshot_2020-01-07_11-36-41](https://user-images.githubusercontent.com/7108691/71893581-fcad3100-3143-11ea-862e-8bed77f18a77.png)""Hi, I encountered this problem also once. It's not really locked, but a real bunch of error messages (one for every letter?). You can close all those dialogues, but it takes some time. But in the end you should be able to save your changes. Happens too, if you forget a curly bracket.

But I can confirm this issue. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix for multiple error messages in messed up source editor"Fixes #5820

JabRef created a new instance of CodeArea everytime an entry was selected and bound multiple listeners to the CodeArea and to the ValidationStatus in bindToEntry. Refactored it a little bit, so the CodeArea stays persistent and the error messages are only displayed once.

Did some minor refactorings to the other Validators and to modules.info too, to avoid warning messages from the IDE, and fixed a minor mistake from a previous PR in dark.css. 

No screenshot, as there is no visual change.

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus01/10/20, 03:04:58 PM
5816.05841Missing file extension for downloaed file"JabRef version JabRef 5.0.0-dev--2019-10-25----681d6aa6f
Linux 5.0.0-37-generic amd64 
Java 12.0.2

- [ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists
(Nope haven't had the time to do so)

Steps to reproduce the behavior:
1. Import en entry into the database (via JabFox)
2. Right click on the full-text URL and select Download file
3. The downloaded file doesn't have a file extension

Expected behaviour: The file should have the file extension `.pdf`
Actual behaviour: The file ends with a dot and no extemsion (e.g. `test.` instead of `test.pdf`)""I had this problem too with some links but cannot remember which. Do you have a concrete example where this issue appears? =||= Yes - most recently it happened to me with https://pubs.acs.org/doi/abs/10.1021/jacs.9b04902 =||= If it helps, I could go through my library and give you other links that produced this behavior for me :point_up:  =||= Thanks to @tobiasdiez  this should be fixed now in the latest master

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= I currently don't have access to my computer running JabRef. Will try as soon as I get back to it. Remind me to report back :) =||= "Fix missing file extension for downloaded files. "Fixes #5816 by falling back to PDF as default file type.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez01/18/20, 11:49:12 AM
5675.05844Counts of selected items"Hi
In version 5, the line number are removed. I used previously those lines to help me counting how many results I had instead of manually counting them. 
Have you considered showing in state bar the number of selected items? For now, only the number of search results are shown, meaning I have to narrow my search to exactly fit my sub-selection to know how many items are selected. 
Thanks.""Hello, I'll work on this issue, it seems no else is doing it. =||= Hi @melTr .
This issue should be fixed in the latest master build, you should be able to add an index column via options menu > preferences > entry table columns. I would appreciate it, if you could test it and tell us, if it is sufficient for your needs. Please don't forget to always backup your data before testing the current dev-build. =||= Thanks. Was able to try today and works as expected. =||= "Reintroducing master table index column"Missed me?

![index column](https://user-images.githubusercontent.com/50491877/72666709-281dfe80-3a15-11ea-81ff-d9174c471d7d.png)

fixes #5675

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus01/21/20, 07:35:53 AM
5861.05879Making paths of linked files relative breaks urls"I am using the latest JabRef 5 master build:
JabRef-5.0-portable_linux.tar.gz
JabRef 5.0-beta.360--2020-01-21--7ddfd9f
Linux 4.4.0-171-generic amd64
Java 13.0.2
on Ubuntu 16.04
biblatexmode enabled

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists.

**Steps to reproduce the behavior:**

1. Create a reference which contains, among others, the following line:

```
file = {Full Text PDF:https\://www.jair.org/index.php/jair/article/download/11675/26513:application/pdf;Snapshot:https\://www.jair.org/index.php/jair/article/view/11675:text/html},
```

2. Save library.
3. Select the newly created reference.
4. Click on ""Quality"" > ""Clean up entries"", only tick ""Make paths of linked files relative (if possible)"" and click ""OK"".
5. Now the value of the ""file"" field has changed to the following:

```
file = {Full Text PDF:https\:/www.jair.org/index.php/jair/article/download/11675/26513:application/pdf;Snapshot:https\:/www.jair.org/index.php/jair/article/view/11675:text/html},
```

So both urls are broken now and cannot be used any more.""Olay, so the cleaning changed the type to URL. But the links still work.
I don't see any problem with this =||= In my opinion, cleaning up entries should not mess with web urls. In the end, the value changes from
`https://www.jair.org/index.php/jair/article/download/11675/26513`
to
`https:/www.jair.org/index.php/jair/article/download/11675/26513`.

Furthermore, malformed urls as the one shown below result in different other problems in JabRef:

Given a reference which e.g. contains, among others, the following line:

```
file = {IEEE Xplore Full Text PDF:https\://ieeexplore.ieee.org/ielx7/8938397/8946120/08946277.pdf?tp=\&arnumber=8946277\&isnumber=8946120\&ref=:application/pdf;IEEE Xplore Abstract Record:https\://ieeexplore.ieee.org/document/8946277:text/html}
```

I performed a cleanup on this reference. This results in:

```
file = {IEEE Xplore Full Text PDF:https\:/ieeexplore.ieee.org/ielx7/8938397/8946120/08946277.pdf?tp=\&arnumber=8946277\&isnumber=8946120\&ref=:application/pdf;IEEE Xplore Abstract Record:https\:/ieeexplore.ieee.org/document/8946277:text/html}
```

When I then select this reference, where the urls are malformed now, and I switch to the tab ""General"" in the entry editor then sometimes several or at least one exception occurs, stating:

**Uncaught excetion occured in Thread[JavaFX Application Thread,5,main]**

**protocol = https host = null**

![image](https://user-images.githubusercontent.com/3658393/73000835-c9d09180-3e01-11ea-80e2-bca3bf3e3cf5.png)

Full stacktrace:

```
java.lang.IllegalArgumentException: protocol = https host = null
	at java.base/sun.net.spi.DefaultProxySelector.select(Unknown Source)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(Unknown Source)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source)
	at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
	at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unknown Source)
	at java.base/java.net.URL.openStream(Unknown Source)
	at org.jabref/org.jabref.model.util.FileHelper.getFileExtension(Unknown Source)
	at org.jabref/org.jabref.logic.externalfiles.LinkedFileHandler.getSuggestedFileName(Unknown Source)
	at org.jabref/org.jabref.gui.fieldeditors.LinkedFileViewModel.isGeneratedNameSameAsOriginal(Unknown Source)
	at org.jabref/org.jabref.gui.fieldeditors.LinkedFilesEditor.createContextMenuForFile(Unknown Source)
	at org.jabref/org.jabref.gui.util.ViewModelListCellFactory$1.updateItem(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.ListCell.updateItem(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.ListCell.indexChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.IndexedCell.updateIndex(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.VirtualFlow.setCellIndex(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.VirtualFlow.addTrailingCells(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.VirtualFlow.layoutChildren(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Parent.layout(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.doLayoutPass(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePulseListener.pulse(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.Toolkit.lambda$runPulse$2(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.Toolkit.runPulse(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.Toolkit.firePulse(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.pulseFromQueue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.lambda$runToolkit$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
```

Additionally, the tab ""General"" breaks, as it does not get rendered completely anymore.

Furthermore, when I subsequently switch to another reference and switch back to the previously cleaned up reference, then no content of the tab ""General"" can be rendered anymore.

![image](https://user-images.githubusercontent.com/3658393/73002730-c5f23e80-3e04-11ea-8b55-6be8e42c7244.png)

Sometimes the whole entry editor breaks, so that no tabs and no content can be shown. Every now and then it also happens that the entry editor's ""General"" tab cannot be rendered anymore for other references in this library, which have not been cleaned up. Sometimes the library's search functionality breaks as well for this library due to the malformed urls.

Occationally, the whole library must be closed so that JabRef recovers.

Actually, I started digging into this issue with the malformed urls due to the fact, that a lot exceptions and problems occured. =||= Thanks to you 😄 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Build checked, it works. :) =||= "Fixes making paths of linked files relative (web urls will not be touched anymore)"Fixes #5861
Description:
- Cleaning up entries with ""Make paths of linked files relative (if possible)"" broke web URLs and resulted in various other issues subsequently. This PR fixes this issue.
It has been tested for local files and web urls.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."systemoperator01/29/20, 12:18:23 PM
5846.05894"Changing settings in ""Options"" > ""Manage external file types"" has no effect""I'm using JabRef 5 master build (JabRef-5.0-portable_linux.tar.gz, JabRef 5.0-beta.342--2020-01-15--58709e7, Linux 4.4.0-171-generic amd64 Java 13.0.2) on Ubuntu 16.04.

Steps to reproduce the behavior:

1. Click ""Options""
2. Click ""Manage external file types""
3. Click pencil edit icon
4. change some values
5. Click ""OK""
6. Result: The changed settings are lost.

Whenever changing some settings in step 4 and clicking ""OK"", the settings will not be stored: The shown table is not being updated and when clicking the same pencil edit icon once again, the original, unchanged settings appear once again.

In my case, I especially wanted to assign a specific pdf reader/editor solely for JabRef (which should be different to the default pdf reader on my system), but setting a different one could not be accomplished.

At this point I would like to reference an already mentioned issue, which is related to setting a different pdf reader/editor: ""Open PDF options"" #5529 Nevertheless, this referenced issue is about a different dialog in JabRef.

In my opinion, it should really be possible to assign user-specific programs to given file types and not relying on the system's settings. This allows important program-specific personalization.""I have looked into this issue for quite some time now. Maybe someone can give me some hints in the code.

When I click `Options` > `Manage external file types`, then 

        ViewLoader.view(this)
                  .load()
                  .setAsDialogPane(this);

gets called in `CustomizeExternalFileTypesDialog.java`.

When some settings get submitted by clicking the `OK` button, then 

        this.setResultConverter(button -> {
            if (button == ButtonType.OK) {
                viewModel.storeSettings();
            }
            return null;
        });

gets called in the same file.

My questions are:

1. How can I refresh the content of the table, after editing an existing default file type?
2. Where exactly are the default file types stored, when a different program gets associated?
2.1. Changing some settings of the default file types will currently not being stored in `prefs.xml`. This is an issue, right?
3. Where is the code for saving all settings to `~/.java/.userPrefs/org/jabref/prefs.xml`?

Maybe someone can give me some hints in general about this issue. =||= Hi,
thanks for your ongoing interest in JabRef
I will try to answer your questions:
3. ) org.jabref.preferences JabRefPreferences/PreferencesService:  Jabref uses the java Preferences mechanism. On Windows it will store the settings in the registry, on linux in that path.

1+ 2.) You probably need to return the edited item from the EditExternalFileTypeEntryDialog in the class
CustomizeExternalFileTypesViewModel and add it to the ObservableList. As the name implies, the ObservableList is a speciality in JavaFX, it automatically notifies any subscribers of new content. As the table is bound (aka subsribed) to the list, it wil be updated automatically.

Edit// In our devdocs we have some further information on how JavaFX dialogs are implemented in JabRef https://devdocs.jabref.org/javafx

The method for showing the dialog is showEditDialog and it doesn't return the modified object.
And from a quick look it seems like you are right, modifications are nowhere saved.


 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fixes problems with managing external file types (issue 5846)"Fixes #5846

**Changed:**
- edit/customize external file types: radio button for ""default program""/""custom program"" fixed: They now get updated and set properly (binding added and setting values).
- ""Edit file type"" dialog: correct value gets loaded now for the input field ""Name""
- when updating an external file type entry: no differentiation will be made anymore whether the program runs on Windows or somewhere else
- Everything concerning the type `CustomExternalFileType` is now working properly as well.
  - Settings will also be saved to JabRef's `config.xml` file.
- Editing an entry with type `ExternalFileType` works now as well. (changes are not lost anymore)
  - Settings will also be saved to JabRef's `config.xml` file.

**Remarks:**
- Table in ""Manage external file types"" dialog is ""lazily"" updated when a table entry has been updated. (But this seems to be a Linux issue anyway, since other tables behave the same way.)

**Tasks:**
- [x] Change in CHANGELOG.md described
- [x] Manually tested changed features in running JabRef (always required)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date?"systemoperator02/02/20, 09:47:22 AM
5905.05917Changing entry type does not work when biblatex source is shown"I am using the latest JabRef 5 master build:
Java 13.0.2
on Ubuntu 16.04

**Steps to reproduce the behavior:**

1. Double click an entry in the main table (with e.g. entry type ""Article"")
2. Open tab ""biblatex source""
3. Change entry type via the dropdown menu to a different entry type (e.g. entry type ""Misc"")

_Observation:_ Commonly, the entry type will not change in the biblatex source and will not be updated in the main entry table.

I think in seldom cases the biblatex source has been updated as expected, but I could not reproduce this intended behavor anymore.""This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= @tobiasdiez I have tested it. It seems there is still some issue left. Apparently, the first time the entry type gets changed, it does not get changed. (Subsequent changes seem to work.)

**Problem case:**

1. Close JabRef (to make it easier to reproduce)
2. Start JabRef
3. Open library (or use an already auto-opened library)
4. Select an entry in the main table
5. Open tab ""biblatex source""
6. Change entry type via the dropdown menu to a different entry type

_Observation:_ The entry type will not change in the biblatex source and will not be updated in the main entry table and the library is indicated as ""modified"" (*).

_Verification:_

a.) Save library with CTRL+S.
b.) Close library
c.) Open previously closed library

_Observation:_ Previous (old) entry type is shown.

If after step 6. the entry type gets changed at least another time (so at least twice) then it works. (Despite the fact, that the main table never gets updated.)

This behavor can also be reproduced with another (untouched!) entry in the main table. =||= This is really strange. Why is just the first one failing? I'm reopening this Issue.
Thanks for testing anyways. =||= Does closing/reopening the entry editor help? =||= Closing/reopening the entry editor does not help. =||= I tried to triangulate the problem a bit.
Changing the entry type wont work the first time (but it does from the second time on), but only in the source tab AND if you did not change the entry type from another tab before.
This is getting really obscure... =||= Thanks to @dawidm  this issue is now fixed =||= "Added update method to typePropertyListeners"fixes #5905 

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/03/20, 09:21:16 PM
5897.05923Uncaught exception in search"

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

JabRef 5.0-beta.388--2020-01-29--eb988b6
Linux 5.3.0-28-generic amd64 
Java 13.0.2

- [X ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. clicked on search window
2. began to type search string
3. error window popped up:


![image](https://user-images.githubusercontent.com/762246/73412303-752b8b80-42c5-11ea-881b-291cfafb0141.png)

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.util.NoSuchElementException
	at java.base/java.util.AbstractList$Itr.next(Unknown Source)
	at java.base/java.util.Iterator.forEachRemaining(Unknown Source)
	at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)
	at java.base/java.util.stream.ReduceOps$ReduceOp.evaluateSequential(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)
	at java.base/java.util.stream.ReferencePipeline.collect(Unknown Source)
	at org.jabref/org.jabref.gui.maintable.MainTable.getSelectedEntries(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$createMainTable$23(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.SelectedItemsReadOnlyObservableList.lambda$new$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ReadOnlyUnbackedObservableList._endChange(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MultipleSelectionModelBase$SelectedIndicesList._endChange(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.ControlUtils.updateSelectedIndices(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.fireCustomSelectedCellsListChangeEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.clearSelection(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.updateDefaultSelection(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TableView$TableViewArrayListSelectionModel.lambda$new$2(Unknown Source)
	at org.jabref.merged.module/javafx.collections.WeakListChangeListener.onChanged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.transformation.SortedList.sourceChanged(Unknown Source)
	at org.jabref.merged.module/javafx.collections.transformation.TransformationList.lambda$getListener$0(Unknown Source)
	at org.jabref.merged.module/javafx.collections.WeakListChangeListener.onChanged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module/javafx.collections.transformation.FilteredList.refilter(Unknown Source)
	at org.jabref.merged.module/javafx.collections.transformation.FilteredList$1.invalidated(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase$Listener.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.StateManager.setSearchQuery(Unknown Source)
	at org.jabref/org.jabref.gui.search.GlobalSearchBar.performSearch(Unknown Source)
	at org.jabref/org.jabref.gui.search.GlobalSearchBar.lambda$new$8(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.updateContent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.TextFieldSkin.replaceText(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextFieldBehavior.replaceText(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.defaultKeyTyped(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>""I hopefully fixed this issue now. Please not that the search is now disabled when no library is open.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0-beta.417--2020-02-10--259bca0
Linux 5.3.0-28-generic amd64 
Java 13.0.2

Yes, now the search window is greyed-out and unavailable when no library is loaded.  Thanks! =||= "Disable search when no library is opened"and Fix exception when getSearchResultSize returned null

I found this wile trying to reproduce 
Hopefully Fixes #5897
and fixes #5821

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr02/10/20, 08:18:40 PM
5821.05923Jabref5 Portable Linux "Hi,

Trying to run Jabref Portable from http://builds.jabref.org/master/JabRef-5.0-portable_linux.tar.gz

But it gives an error in the console as soon as launched:

```
ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath. Using SimpleLogger to log to the console...

** (JabRef:8720): WARNING **: Couldn't connect to accessibility bus: Failed to connect to socket /tmp/dbus-RjLjqQPZyV: Connection refused
Importing in unknown format: ./JabRef
Error opening file './JabRef': Could not find a suitable import format.

(JabRef:8720): Gdk-WARNING **: XSetErrorHandler() called with a GDK error trap pushed. Don't do that.
```

However, the app runs. As soon as I try to type anything in the search bar, it outputs the following error and does not go forth:

```
java.lang.NullPointerException
	at org.jabref/org.jabref.gui.search.GlobalSearchBar.lambda$new$10(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.search.GlobalSearchBar.lambda$new$11(Unknown Source)
	at org.jabref.merged.module/org.fxmisc.easybind.EasyBind.lambda$subscribe$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.ObjectProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.StateManager.setSearchQuery(Unknown Source)
	at org.jabref/org.jabref.gui.search.GlobalSearchBar.performSearch(Unknown Source)
	at org.jabref/org.jabref.gui.search.GlobalSearchBar.lambda$new$8(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.updateContent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.TextFieldSkin.replaceText(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextFieldBehavior.replaceText(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.defaultKeyTyped(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
```
Any input?

Cheers,
/z""Thanks, could you please add some more information about your system? Usually it's sufficient if you copy the info from the About dialog of JabRef.
However, it might help if you could add which linux distro you are using =||= @Siedlerchr Please find below the output of the jabref about dialog:

```
JabRef 5.0-beta.94--2020-01-03--f11949f
Linux 4.4.0-148-lowlatency amd64 
Java 13.0.1
```

BTW, I am still on ubuntu/lxle 14.04, fyi. Thanks! =||= "Disable search when no library is opened"and Fix exception when getSearchResultSize returned null

I found this wile trying to reproduce 
Hopefully Fixes #5897
and fixes #5821

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr02/10/20, 08:18:40 PM
5906.05925Changing entry type does not always work when biblatex source is not shown"I am using the latest JabRef 5 master build:
Java 13.0.2
on Ubuntu 16.04

The value of the entry type field for an entry in the main table is not updating when changing its type by using the dropdown menu of the entry editor. To differentiate this from issue #5905, one can assume, that in the entry editor the tab ""biblatex source"" is not/never active.

**Steps to reproduce the behavior:**

1. Double click an entry in the main table (with e.g. entry type ""Article"")
2. Change entry type via the dropdown menu to a different entry type (e.g. entry type ""Misc"")
3. Do ""whatever you want"", but don't open the tab ""biblatex source"" in the entry editor.

_Observation:_ Commonly, the entry type will not change in the main table, even if shortly selecting a different entry in the main table and reselecting the edited one. Sometimes temporarily switching to a different opened library helps, but not always.

Contrarily, other fields in the main table will be updated immediately, when their values get changed.

---

**Subsequent observation (now allows viewing the tab ""biblatex source""):**

1. Perform steps 1. and 2. as above.
2. Save library with CTRL+S.
3. Switch to ""biblatex source""

_Observation:_ The library has been modifed (indicated with the star symbol ""*""), although no change was conduted.

For both cases, I assume it could be some reference problem.""It's only a display issue: if you change the entry type, save and reload the database the change is correctly reflected. =||= @tobiasdiez On the one hand, I wanted to address the display issues (in the main table and in the tab ""biblatex source"", where in the source the entry type sometimes does not get updated), on the other hand, I think it is not only a display issue:

**Consider the following:**

_Prerequisite:_ Make sure, that in Options -> Preferences -> Entry editor -> ""Show BibTeX source by default"" is NOT ticked.

1. Double click or click an entry in the main table (with e.g. entry type ""Article"") to see its entry editor
2. Change entry type via the dropdown menu to a different entry type (e.g. entry type ""Misc"")
3. Save library with CTRL+S.
4. Switch to ""biblatex source""
    _Observation:_ The library shows that it has been modifed (indicated with the star symbol ""*""), although no change was conducted after saving it. Furthermore, to be precise, the tab ""biblatex source"" still shows the original entry type (so not the new one!) in the source text. _If this is not ALL the case switch to a tab different than ""biblatex source"" (e.g. tab ""Required fields"") and again start from step 2. (using now another, different entry type, so that you can better differentiate them). [Usually, the first ""round"" is ok, but any further round not. This obviously depends on what one has already done before performing this procedure.]_
5. Optional: Switch to a different tab than ""biblatex source""
6. Again save library with CTRL+S. (-> The modified indicator (*) vanishes.)
7. Reload library (by closing and reopening it)

_Observation:_ The performed change (namely changing the entry type) has been overwritten to the previous entry type.

This could indicate a reference issue as well. From my perspective, it seems, that the tab ""biblatex source"" still references to the previous entry (or the changes simply have not been written to the tab ""biblatex source"") and it ""writes back"" the contained values, since it is (and must be) quite sensitive to changes. =||= @calixtus you recently fixed a bug and reused that code editor component. Maybe this is the issue now for the incorrect reference?

That would explain why we did not reuse the control, but recreated every time  =||= Im going to investigate this tomorrow. =||= I took a look into the code, it's two bugs: one thing is about the source tab, it easily fixed by adding an InvalidationListener to the typeProperty (fix incoming for issue #5905 ).

The other one, this here, is about displaying the changed entry type in the main table. =||= This bug here could be a simply consequence of the fact that 
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/model/entry/BibEntry.java#L940
does not contain `type`. Thus, changes of the type do not trigger change events (and thus the main table is not updated). =||= I tried the simple fix idea from @tobiasdiez and added entryType to the observables. However, this has only an impact on the PreviewViewer. The observables are only used in the PrevieViewer.
However, I think we need to have a simliar class like FieldCoumn which handles the entry type or maybe we can extend the fieldColumn. I could not find anything related to the entry type in the MainTable. So I guess this explains it. Because entry type is not a field, it's not updated =||= I think I found the problem:
Types are displayed as a normal field column. However, https://github.com/JabRef/jabref/blob/6a9c9159949e1f1cbff1bfad09e0ff2a2eda3712/src/main/java/org/jabref/gui/maintable/FieldColumn.java#L51-L52
only includes real fields as dependencies. 
https://github.com/JabRef/jabref/blob/6a9c9159949e1f1cbff1bfad09e0ff2a2eda3712/src/main/java/org/jabref/model/entry/BibEntry.java#L917-L920

The display still works as its done via
https://github.com/JabRef/jabref/blob/6a9c9159949e1f1cbff1bfad09e0ff2a2eda3712/src/main/java/org/jabref/gui/maintable/FieldColumn.java#L60
and this includes special handling of types
https://github.com/JabRef/jabref/blob/6a9c9159949e1f1cbff1bfad09e0ff2a2eda3712/src/main/java/org/jabref/model/entry/BibEntry.java#L249-L251

Thus it should be possible to fix this issue by adding a special handling of the type field in
https://github.com/JabRef/jabref/blob/6a9c9159949e1f1cbff1bfad09e0ff2a2eda3712/src/main/java/org/jabref/model/entry/BibEntry.java#L917-L920 =||= Thanks for the hint, adding a check for the entry type in that binding works =||= I can confirm, that all problems mentioned within this issue are fixed with this commit. :) One very related issue (where I hoped this would fix it as well) is still open: #5905 =||= "Fix maintable not updated when changing entry type"Fixes #5906

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr02/10/20, 01:42:04 PM
5899.05926Author name with special characters breaks JabRef"JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... --> JabRef 5.0-beta.334--2020-01-08--cafdb01 - Windows 10 10.0 amd64 - Java 13.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Add the following doi 10.1016/j.cosrev.2017.10.002
2. Use the search button to download the file
3. It downloads `M�ntyl�2018 - The Evolution of Sentiment Analysis}A Review of Research Topics, Venues, and Top Cited Papers.pdf` - note the special characters.
4. When you try to save jabref logs an error

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
org.jabref.logic.exporter.SaveException: Problems saving:
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.doSave(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.runCommand(Unknown Source)
	at org.jabref/org.jabref.gui.actions.OldDatabaseCommandWrapper.execute(Unknown Source)
	at org.jabref/org.jabref.gui.actions.JabRefAction.lambda$new$2(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
Caused by: java.io.IOException: Error in field 'FILE': Unescaped '}' character without opening bracket ends string prematurely. Field value: :Mntyl 2018 - The Evolution of Sentiment Analysis}A Review of Research Topics, Venues, and Top Cited Papers.PDF:PDF;:M�ntyl�2018 - The Evolution of Sentiment Analysis}A Review of Research Topics, Venues, and Top Cited Papers.PDF:PDF
	at org.jabref/org.jabref.logic.bibtex.BibEntryWriter.writeField(Unknown Source)
	at org.jabref/org.jabref.logic.bibtex.BibEntryWriter.writeRequiredFieldsFirstRemainingFieldsSecond(Unknown Source)
	at org.jabref/org.jabref.logic.bibtex.BibEntryWriter.write(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibtexDatabaseWriter.writeEntry(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(Unknown Source)
	... 62 more
Caused by: org.jabref.logic.bibtex.InvalidFieldValueException: Unescaped '}' character without opening bracket ends string prematurely. Field value: :Mntyl 2018 - The Evolution of Sentiment Analysis}A Review of Research Topics, Venues, and Top Cited Papers.PDF:PDF;:M�ntyl�2018 - The Evolution of Sentiment Analysis}A Review of Research Topics, Venues, and Top Cited Papers.PDF:PDF
	at org.jabref/org.jabref.logic.bibtex.LatexFieldFormatter.checkBraces(Unknown Source)
	at org.jabref/org.jabref.logic.bibtex.LatexFieldFormatter.formatAndResolveStrings(Unknown Source)
	at org.jabref/org.jabref.logic.bibtex.LatexFieldFormatter.format(Unknown Source)
	... 68 more

  ```
</details>

5. This would be okay as you could delete the lines from Jabref, but it leaves the bottom of the file looking like this 

```
...

@Article{M�ntyl�2018,
  author    = {Mika V. M�ntyl� and Daniel Graziotin and Miikka Kuutila},
  journal   = {Computer Science Review},
  title     = {The evolution of sentiment analysis{\textemdash}A review of research topics, venues, and top cited papers},
  year      = {2018},
  month     = {feb},
  pages     = {16--32},
  volume    = {27},
  doi       = {10.1016/j.cosrev.2017.10.002},
  file      = 
```

5. removing the categories and breaking the jabref file
6. On opening the jabref file you get the following error
![image](https://user-images.githubusercontent.com/6676843/73485738-aa8db300-4371-11ea-82ad-a59f991f8153.png)""JabRef 5.0-beta.388--2020-01-29--eb988b6
Windows 10 10.0 amd64 
Java 13.0.2

Can confirm this issue.
1. Use <kbd>Ctrl</kbd> + <kbd>N</kbd> to generate a new entry
2. Select ID type ""DOI"" and copy ""10.1016/j.cosrev.2017.10.002"" into the ID field
3. Click ""Generate""
4. The generated item will contain question marks instead of umlaut ""ä"" in the bibtex key and the author's name

Note, that this issue does not appear, if you use the ""Web search"" feature, with Google Scholar selected. If you enter the doi ""10.1016/j.cosrev.2017.10.002"" there, click ""Search"" and then ""Import entries"", the entry will be imported without question marks and with the umlaut properly formatted following bibtex standard. =||= I checked the http request to doi.org output, that is correct.
so somewhere in JabRef the wrong encoding is taken
```
@article{M_ntyl__2018,
	doi = {10.1016/j.cosrev.2017.10.002},
	url = {https://doi.org/10.1016%2Fj.cosrev.2017.10.002},
	year = 2018,
	month = {feb},
	publisher = {Elsevier {BV}},
	volume = {27},
	pages = {16--32},
	author = {Mika V. Mäntylä and Daniel Graziotin and Miikka Kuutila},
	title = {The evolution of sentiment analysis{\textemdash}A review of research topics, venues, and top cited papers},
	journal = {Computer Science Review}
}
``` =||= Using JabFox in win10/firefox the file could be imported without problems. In the process of doi-import there is obviously a problem with coding At least the problematic name could be copy-pasted without any problem. On my win10 machine everything is utf8.
 =||= I can no longer reproduce the problem, I updated the java version to 13.0.2 and from the changelog it seems they fixed some issues regarding network/http requests. So it could have been related to that.
I also checked the DOI from  #5900. Works fine.

Could you please try with the latest master and report back if it works?
Java Version in the about dialog should be 13.0.2
Could you please try the latest snapshot?
http://builds.jabref.org/master/ =||= JabRef 5.0-beta.409--2020-02-09--6a9c915
Windows 10 10.0 amd64 
Java 13.0.2

Cannot confirm, the issue persists. Have you tried the following DOI (as suggested by the thread starter):

10.1016/j.cosrev.2017.10.002

? =||= I could partially reproduce it now with the installer version. Running from code seems to work. There must be something wrong with the encoding in the preferences. Weird. =||= For the DOI `10.1016/j.cosrev.2017.10.002` causes this invalid filename (see the `}`):
`Maentylae2018 - The Evolution of Sentiment Analysis}A Review of Research Topics, Venues, and Top Cited Papers.PDF` =||= JabRef 5.0-beta.418--2020-02-12--567dc68
Windows 10 10.0 amd64 
Java 13.0.2

I can confirm this issue has been fixed in the current dev version of JabRef. Cheers, well done! =||= I am not able to confirm because there is no file found for the DOI anymore. ;)
Maybe the fix affected the online PDF search?

But the umlauts are handled correct. =||= "Fix invalid filename with curly braces and fix wrong encoding in parser"Fixes #5899

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr02/12/20, 07:52:29 AM
5892.05938Searching for a DOI results in an ERROR"JabRef 5.0-beta.388--2020-01-29--eb988b6
Windows 7 6.1 amd64 
Java 13.0.2
- [+] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
I searched in an empty library (in my standard library as well) for the DOI 10.1210/endrev/bnz006. This resulted in an error. In my opinion this a serious failure since a DOI should be searchable. 

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
ERROR FallbackExceptionHandler Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
netscape.javascript.JSException: SyntaxError: Invalid regular expression: missing )
       at org.jabref.merged.module/com.sun.webkit.dom.JSObject.fwkMakeException(Unknown Source)
       at org.jabref.merged.module/com.sun.webkit.WebPage.twkExecuteScript(Native Method)
       at org.jabref.merged.module/com.sun.webkit.WebPage.executeScript(Unknown Source)
       at org.jabref.merged.module/javafx.scene.web.WebEngine.executeScript(Unknown Source)
       at org.jabref/org.jabref.gui.preview.PreviewViewer.highlightSearchPattern(Unknown Source)
       at org.jabref/org.jabref.gui.preview.PreviewViewer.lambda$new$0(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectProperty.setValue(Unknown Source)
       at org.jabref/org.jabref.gui.StateManager.setSearchQuery(Unknown Source)
       at org.jabref/org.jabref.gui.search.GlobalSearchBar.performSearch(Unknown Source)
       at org.jabref/org.jabref.gui.search.GlobalSearchBar.lambda$new$8(Unknown Source)
       at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
       at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.insert(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.updateContent(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceSelection(Unknown Source)
       at org.jabref.merged.module/javafx.scene.control.TextInputControl.paste(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.paste(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$new$20(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
       at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
       at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
       at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
       at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
       at java.base/java.security.AccessController.doPrivileged(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
       at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
       at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
       at java.base/java.lang.Thread.run(Unknown Source)
ERROR FallbackExceptionHandler Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
netscape.javascript.JSException: SyntaxError: Invalid regular expression: missing )
       at org.jabref.merged.module/com.sun.webkit.dom.JSObject.fwkMakeException(Unknown Source)
       at org.jabref.merged.module/com.sun.webkit.WebPage.twkExecuteScript(Native Method)
       at org.jabref.merged.module/com.sun.webkit.WebPage.executeScript(Unknown Source)
       at org.jabref.merged.module/javafx.scene.web.WebEngine.executeScript(Unknown Source)
       at org.jabref/org.jabref.gui.preview.PreviewViewer.highlightSearchPattern(Unknown Source)
       at org.jabref/org.jabref.gui.preview.PreviewViewer.lambda$new$0(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
       at org.jabref.merged.module/javafx.beans.property.ObjectProperty.setValue(Unknown Source)
       at org.jabref/org.jabref.gui.StateManager.setSearchQuery(Unknown Source)
       at org.jabref/org.jabref.gui.search.GlobalSearchBar.performSearch(Unknown Source)
       at org.jabref.merged.module/org.reactfx.util.FxTimer.lambda$restart$0(Unknown Source)
       at org.jabref.merged.module/com.sun.scenario.animation.shared.TimelineClipCore.visitKeyFrame(Unknown Source)
       at org.jabref.merged.module/com.sun.scenario.animation.shared.TimelineClipCore.playTo(Unknown Source)
       at org.jabref.merged.module/javafx.animation.Timeline.doPlayTo(Unknown Source)
       at org.jabref.merged.module/javafx.animation.AnimationAccessorImpl.playTo(Unknown Source)
       at org.jabref.merged.module/com.sun.scenario.animation.shared.SingleLoopClipEnvelope.timePulse(Unknown Source)
       at org.jabref.merged.module/javafx.animation.Animation.doTimePulse(Unknown Source)
       at org.jabref.merged.module/javafx.animation.Animation$1.lambda$timePulse$0(Unknown Source)
       at java.base/java.security.AccessController.doPrivileged(Unknown Source)
       at org.jabref.merged.module/javafx.animation.Animation$1.timePulse(Unknown Source)
       at org.jabref.merged.module/com.sun.scenario.animation.AbstractMasterTimer.timePulseImpl(Unknown Source)
       at org.jabref.merged.module/com.sun.scenario.animation.AbstractMasterTimer$MainLoop.run(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.pulseFromQueue(Unknown Source)
       at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.lambda$runToolkit$11(Unknown Source)
       at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
       at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
       at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
       at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details>""Thanks to @dawidm this issue should be resolved now in the latest master.
It might take some time until the new version is uploaded.
 =||= I will test it tomorrow. 👍  =||= "Fix not escaping special characters in search pattern"fixes #5892

The error when searching for ""DOI 10.1210/endrev/bnz006"" (or any phrases containing special javascript regular expression characters) is caused by not escaping special characters before passing search  pattern to javascript script used for highlighting words in preview view.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Dawid Motykadawidm02/14/20, 08:09:59 PM
5939.05940Exception when opening library from File History Menu"
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Opening a library from File -> Recent libraries throws an exception.

Steps to reproduce the behavior:
1. File -> Recent libraries
2. Select a valid one
3. Exception is shown

This is because a immutable SingletonList is created and then passed to OpenDatabaseAction::openFiles"Fix #5939 by creating a mutable list in OpenDatabaseAction"This PR fixes the problem when opening a library from the recent libraries menu. fixes #5939 

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Manually tested changed features in running JabRef (always required)"Kai TakacKa0o002/12/20, 05:09:29 PM
5942.05945Opening a PDF blocks JabRef (under Ubuntu/Linux)"JabRef 5.0-beta.419--2020-02-12--3859620
Linux 5.4.19-050419-generic amd64 
Java 13.0.2

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Click on the symbol to open a PDF linked to a bib entry (or use F4 or use the ""Open menu"" command from the context menu). 
2. The PDF viewer (in my case MasterPDFEditor is associated with application/pdf) opens.
3. JabRef can only be used after the PDF viewer is closed again (in the screenshot JabRef is not properly rendered because the whole application is blocked).

![jabref-3](https://user-images.githubusercontent.com/25365609/74427995-15e68300-4e50-11ea-8ef3-09e5d2b706f4.png)

I first thought this only happens in my i3/Gnome Flashback environment. But switching to plain Ubuntu 19.10 Gnome desktop, exactly the same behaviour can be observed.

This phenomenon didn't appear for me (with highly similar settings) in JabRef 4.x.

I am seeing this exception on the console after closing JabRef, though this might not result from having called an external program (I suppose):
<details>
  <summary>Log File</summary>
  Exception in Application stop method
ERROR FallbackExceptionHandler Uncaught exception occurred in Thread[main,5,main]
 java.lang.RuntimeException: Exception in Application stop method
	at org.jabref.merged.module/com.sun.javafx.application.LauncherImpl.launchApplication1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
Caused by: java.lang.IllegalAccessError: class kong.unirest.JsonObjectMapper (in module org.jabref.merged.module) cannot access class com.google.gson.Gson (in module com.google.gson) because module org.jabref.merged.module does not read module com.google.gson
	at org.jabref.merged.module/kong.unirest.JsonObjectMapper.<init>(Unknown Source)
	at org.jabref.merged.module/kong.unirest.Config.<init>(Unknown Source)
	at org.jabref.merged.module/kong.unirest.Unirest.<clinit>(Unknown Source)
	at org.jabref/org.jabref.Globals.stopBackgroundTasks(Unknown Source)
	at org.jabref/org.jabref.JabRefMain.stop(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$10(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	... 1 more

</details>""@tobiasdiez  You recently added this gson to the module info. Do we need to add it to the gradle file somehow? =||= Might be a duplicate of (or connected to):
https://github.com/JabRef/jabref/issues/5882 =||= @AEgit, can be. However, in my case, I can work with the PDF and once I close the reader, JabRef continues to work perfectly. Also, in the meanwhile, CPU load is not going up. It merely looks like a blocking system call (external process call) to me, instead of a non-blocking call. =||= Have you tried opening with another pdf editor as default?  =||= Yep, just done that with 5 different applications that can open PDF (via changing the mime-type through the Nautilus file manager): 

1. It works (i.e. it open asynchronously) with Evince (default Ubuntu viewer) and with Firefox.
2. It doesn't work (i.e. it opens blocking) with MasterPDFEditor, Zathura (another PDF viewer), and LibreOffice.

The three apps in 2 must have something in common in the way they are called via JabRef based on the mime-type settings.  =||= @ytzemih  I tried a simple addition to the existing code, redirecting the process output. Could you please test this version here?
https://builds.jabref.org/pull/5945/merge/
 =||= @Siedlerchr, thx. Installed JabRef 5.0-pull-5945-merge.421--2020-02-13--6cddf64.
Unfortunately, nothing has changed. Actually, it got worse: Now, only Firefox works, but Zathura, LibreOffice, MasterPDFEditor, and Evince open in a blocking mode. Can there be an interference with Java 13.0.2 being part of JabRef (as by the credentials) and openjdk version ""11.0.6"" 2020-01-14 installed in my system? =||= Adding another screenshot to show that the problem also arises when using the context menu in the `File` field of the `General` tab to open the PDF.
![jabref-3](https://user-images.githubusercontent.com/25365609/74524469-00885c00-4f17-11ea-9122-f56964636057.png)
In that case, my whole desktop environment is blocked. The only way to get out is Ctrl-Q to quit Evince. Maybe that helps further pinpointing the problem.
 =||= Thanks for the hint. I will try to wrap this in a new Thread this evening =||= Could you please try again with the new version? https://builds.jabref.org/pull/5945/merge/
 =||= The gson error should also be fixed in this branch + master =||= JabRef 5.0-beta.421--2020-02-14--ec93ad3
Linux 5.3.0-28-generic amd64 
Java 13.0.2

I am afraid, as far as I can tell, this issue persists (and this one persists as well: https://github.com/JabRef/jabref/issues/5882). =||= JabRef 5.0-beta.421--2020-02-14--ec93ad3
Linux 5.4.19-050419-generic amd64 
Java 13.0.2

Good news, gson error/exception is gone, no more Zombie jobs left.

Bad news: Can confirm @AEgit , opening still blocks for me. =||= @ytzemih  Could you please test again with the new version from today? https://builds.jabref.org/pull/5945/merge/ =||= @Siedlerchr Done. I can't reproduce the error anymore. _Open file_ is now non-blocking. Thanks for the fix. =||= JabRef 5.0-beta.432--2020-02-19--c768697
Linux 5.3.0-40-generic amd64
Java 13.0.2

Cannot confirm for the current master version. Since I am now pretty confident that this issue is a duplicate of https://github.com/JabRef/jabref/issues/5882, you can find my error report here:
https://github.com/JabRef/jabref/issues/5882#issuecomment-588861846 =||= @AEgit I tested it only with 
JabRef 5.0-pull-5945-merge.440--2020-02-19--fcaeef1
Linux 5.4.19-050419-generic amd64 
Java 13.0.2 =||= "Try to fix linux pdf opening again"Fixes #5942  and fixes probably #5882

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr02/20/20, 07:32:11 AM
5275.05955Allow for deactivation of integrity check"As part of #4642, @RonakLakhotia added an integrity check for books with an edition value of ""1"". Since the official biblatex manual (http://packages.oth-regensburg.de/ctan/macros/latex/exptl/biblatex/doc/biblatex.pdf) suggests the use of the integer ""1"" for marking the first edition of a book (see bottom of page 18 in the referenced manual), my colleagues and I typically follow this recommendation. As our database is quite large, this results in lots of (in our case not useful) warnings when performing an integrity check. Would it be possible to make this check optional and decide about its execution based on the user's preferences (by default, it can be enabled)? Many thanks in advance!""You can right click the column and select which of the errors you want to be shown (or filter based on the fields/entry types). Sadly, at the moment this feature does not work.

ToDo:
- [ ] Fix filter of table
- [ ] Document this feature as it is somewhat hidden
- [ ] Try to add a ""Filter"" button in the lower left corner of the dialog that shows the right-click filter menu (if that is possible) =||= I have not used the feature lately and I cannot check it atm, but as far as I remember the check is directly executed - so I would opt to just open the dialog, having to chance to select which checks should be run and then to actively start the check. This should be especially helpful in cases of real big databases where you are interested only in some checks.

Bonus: store the selection of integrity checks for the next runs. =||= Thanks for the hint @tobiasdiez - I completely missed that.

Good idea @matthiasgeiger. In addition, the integrity checks are also performed during the creation of a new entry as well as the modification of an existing one. Would it be feasible and expedient to store the choice of integrity checks made by the user as part of the user's preferences (as suggested by @matthiasgeiger) and execute only the selected ones? Of course, this solution would require more effort in terms of coding, but could be really helpful. =||= I am investigating on this issue. =||= @LakminiSenanayake Nice!

I prefer if we don't add a step before the integrity check dialog. Keep it simple for most users and provide access to customized integrity checks in the dialog itself for more advanced use cases. =||= Sure @tobiasdiez , still doing technical investigations and will get back with more details =||= Dear @LakminiSenanayake,
Have you already had some time to further investigate this issue? Would love to see a solution for it in the next release version. Many thanks! =||= "Added MenuButtons to IntegrityCheckDialog"This PR adds MenuButtons to the IntegrityCheckDialog, because there was a complaint, that the filters were not very easy to find. fixes #5275 

I did not implement the option to make the current filters in the table persistent, as the use case for this is extremly limited (sorry), controlsfx does not support this and the workaround would be huge.

I don't think, that documentation is necessary for this, as it should be very obvious to understand.

![integrity_without_panel](https://user-images.githubusercontent.com/50491877/74672662-12376100-51ae-11ea-873c-2021f38466d2.png)
![integrity_with_panel](https://user-images.githubusercontent.com/50491877/74672664-14012480-51ae-11ea-808d-cb8ba79e8ae4.png)



- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/19/20, 09:09:48 AM
5474.05965Remove background command line window"Currently, a console window is shown in the background. Reason is the `command-line` argument to `jpackage` which enables command line input. Thus, currently we have to life with the background console window. 

Java bug report: https://bugs.openjdk.java.net/browse/JDK-8234469""Current (visible) state: The JDK guys ask for feedback:

> I cannot reproduce with simple example, and have emailed submitter for further instructions. 

https://bugs.openjdk.java.net/browse/JDK-8234469?focusedCommentId=14301796&page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#comment-14301796

 =||= The upstream bug was closed. We have to write a MWE, don't we? @tobiasdiez  =||= Is https://github.com/tobiasdiez/javatestbed the MWE? (item 2 in README.md?) =||= "Remove background command line window"Fixes #5474. Apparently, the upstream bug in the jdk concerning cmd line arguments was fixed in the meantime, which makes the `win-console` toggle obsolete.

Only problem I've encountered so far is that no logger output is written to the console. Combined with the Log4j issues we have at the moment, this means that for users it's not possible to report detailed stack traces etc. Workaround: use `.\runtime\bin\JabRef` to start JabRef instead of `JabRef.exe` (I would add this to the release notes under ""known issues"").

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez02/20/20, 11:17:14 AM
5604.05969Oversized Libray properties dialog"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-alpha

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

1. - In the toolbar section where he icons are located I see three icons, about 3x empty space, a long search box and then more empty space and >>> where, once clicked, I can see the other icons. 
3. - Click Library > Library properties, and oversize window opens that spills outside the viewing area.  I cannot resize it, nor close it except by hitting ESC.
5. - I cannot find the menu to set font sizes that existed in previous version.  The current version is very hard to read, even with reading glasses in a modern laptop.

My computer is a HP SPECTER laptop, display res 1920 x 1018, scaling 150%

**Toolbar Menu Display**
<img width=""969"" alt=""Annotation 2019-11-12 211302"" src=""https://user-images.githubusercontent.com/2328896/68727022-3f61eb00-0591-11ea-8ed6-7356fee63beb.png"">

**Library properties windows is oversized**
<img width=""960"" alt=""Annotation 2019-11-12 211528"" src=""https://user-images.githubusercontent.com/2328896/68727159-9f589180-0591-11ea-8f21-46e8f33531d7.png"">""Hi @fmartelg , at least about the font size: should be available via options -> preferences -> appearance. =||= @calixtus 

> Hi @fmartelg , at least about the font size: should be available via options -> preferences -> appearance.

Options -> preferences yields this menu + error. I don't see option ""appearance"" but maybe I am missing something

Searching at the top left search option for ""appearance"" or ""font"" yields 0 results.

<img width=""845"" alt=""Annotation 2019-11-13 205805"" src=""https://user-images.githubusercontent.com/2328896/68820201-86ff7a00-0658-11ea-99f8-3bf89074d8d7.png"">
 =||= You can scroll scroll down the list on the left. The scrollbars should already be a little bit more visible on the latest dev-build.
The bad visibility of that tab is probably another issue here. =||= @fmartelg : Are you using the 5.0 Alpha version from https://github.com/JabRef/jabref/releases?

If so, you might want to try the latest development version: https://builds.jabref.org/master/
(I think at the moment you have to use the portable version, since there is a problem with the installer.) Before installing the dev version, always remember to make a backup of your database, in case something goes wrong. =||= In the latest development version, issues 1 and 3 should be fixed. =||= "Refactored subtile changes to optics of library properties"fixes #5604 
Some subtile changes (added a scrollpane) to the library properties dialog (and to SaveOrderConfigDisplay and to FieldFormatterCleanupsPanel). FieldFormatterCleanupsPanel needs to be refactored in the future to mvvm-pattern, but this PR is just a quick fix for the issue, so the library properties are somewhat usable on scaled displays.

![librarypropsup](https://user-images.githubusercontent.com/50491877/74947122-aeee3e80-53fa-11ea-83b5-90a4934e2e15.png)
![librarypropsdown](https://user-images.githubusercontent.com/50491877/74947132-b1509880-53fa-11ea-84b1-40e0f26bd8c5.png)

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/20/20, 11:43:22 PM
5968.05983Group is lost if assigned to very bottom"JabRef version (latest master) on macOS 10.15.3, Java 13.0.1


- [x] I have tested the latest master

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:

1. Drag and Drop a group at the very bottom.
2. Exception is shown and group is lost

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.IndexOutOfBoundsException: Index: 2, Size: 1
	at java.base/java.util.ArrayList.rangeCheckForAdd(ArrayList.java:754)
	at java.base/java.util.ArrayList.add(ArrayList.java:479)
	at javafx.base/com.sun.javafx.collections.ObservableListWrapper.doAdd(ObservableListWrapper.java:101)
	at javafx.base/javafx.collections.ModifiableObservableListBase.add(ModifiableObservableListBase.java:151)
	at org.jabref/org.jabref.model.TreeNode.addChild(TreeNode.java:474)
	at org.jabref/org.jabref.model.TreeNode.moveTo(TreeNode.java:562)
	at org.jabref/org.jabref.gui.groups.GroupNodeViewModel.moveTo(GroupNodeViewModel.java:286)
	at org.jabref/org.jabref.gui.groups.GroupNodeViewModel.draggedOn(GroupNodeViewModel.java:312)
	at org.jabref/org.jabref.gui.groups.GroupTreeView.lambda$initialize$15(GroupTreeView.java:244)
	at javafx.base/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:238)
	at javafx.base/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at javafx.base/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at javafx.base/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at javafx.base/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at javafx.base/javafx.event.Event.fireEvent(Event.java:198)
	at javafx.graphics/javafx.scene.Scene$DnDGesture.fireEvent(Scene.java:3029)
	at javafx.graphics/javafx.scene.Scene$DnDGesture.processTargetDrop(Scene.java:3255)
	at javafx.graphics/javafx.scene.Scene$DropTargetListener.drop(Scene.java:2969)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.lambda$handleDragDrop$2(GlassSceneDnDEventHandler.java:108)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.handleDragDrop(GlassSceneDnDEventHandler.java:104)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleDragDrop$11(GlassViewEventHandler.java:766)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:412)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleDragDrop(GlassViewEventHandler.java:765)
	at javafx.graphics/com.sun.glass.ui.View.handleDragDrop(View.java:713)
	at javafx.graphics/com.sun.glass.ui.View.notifyDragDrop(View.java:1042)
	at javafx.graphics/com.sun.glass.ui.mac.MacPasteboard._putItemsFromArray(Native Method)
	at javafx.graphics/com.sun.glass.ui.mac.MacPasteboard.putItemsFromArray(MacPasteboard.java:143)
	at javafx.graphics/com.sun.glass.ui.mac.MacPasteboard.putItems(MacPasteboard.java:165)
	at javafx.graphics/com.sun.glass.ui.mac.MacSystemClipboard.pushToSystem(MacSystemClipboard.java:223)
	at javafx.graphics/com.sun.glass.ui.SystemClipboard.flush(SystemClipboard.java:51)
	at javafx.graphics/com.sun.glass.ui.ClipboardAssistance.flush(ClipboardAssistance.java:59)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumClipboard.flush(QuantumClipboard.java:274)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.startDrag(QuantumToolkit.java:1286)
	at javafx.graphics/javafx.scene.Scene$DnDGesture.dragDetectedProcessed(Scene.java:3049)
	at javafx.graphics/javafx.scene.Scene$DnDGesture.process(Scene.java:3118)
	at javafx.graphics/javafx.scene.Scene$MouseHandler.process(Scene.java:3878)
	at javafx.graphics/javafx.scene.Scene.processMouseEvent(Scene.java:1849)
	at javafx.graphics/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2590)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:409)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:299)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:447)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:412)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:446)
	at javafx.graphics/com.sun.glass.ui.View.handleMouseEvent(View.java:556)
	at javafx.graphics/com.sun.glass.ui.View.notifyMouse(View.java:942)
	at javafx.graphics/com.sun.glass.ui.mac.MacView.notifyMouse(MacView.java:127)

  ```
</details>""Thanks for the issue. To be a bit more precise:
1.a. Grab a group at the very bottom and
1.b. Drop it at the very bottom.
Or did I miss some other misbehaving?
I'm on it. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fixed loosing group if the most bottom one in list is dragged on itself"fixes #5968 

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/22/20, 01:57:43 PM
5561.05985Group badges don't update after assignment"JabRef 5.0.0-dev--2019-10-25----681d6aa6f
Linux 5.0.0-32-generic amd64 
Java 12.0.2

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Add new entry that is not in any group
2. Manually assign a group to the entry via drag&drop onto an existing group
3. In the entry list, the groups-column is not updated for the newly grouped entry. I have to explicitly switch the displayed group in order for the entry list to refresh and show the group badges (the color stripes) for the new entry. Alternatively a restart does the same.

Thus the entry gets added to that group just fine. It's just the entry list that doesn't get updated on this""I have tested this behaviour, the group badge updates after about one second.
@Krzmbrzl, would you please do me the favor to test this issue in JabRef with the latest dev version again and to tell, if something changed? =||= I don't have my Linux system at hand right now, so I tested it on Windows using
```
JabRef 5.0-beta.421--2020-02-14--ec93ad3
Windows 7 6.1 amd64 
Java 13.0.2
```
and the problem persists.

What does get updated is the number next to the group indicating how many members are in it, but the color-badge in the entry list does not get updated until I switch the displayed group so that the entry list gets updated.

Here are some screenshots illustrating what I mean.
Before switching the displayed group:
![Jabref_Group_notShown](https://user-images.githubusercontent.com/12751591/74651500-3bdb9280-5184-11ea-9754-546ded1b8d58.png)

and after having switched the displayed group (I also switched back but the badge appears on the first switching):
![Jabref_Group_shown](https://user-images.githubusercontent.com/12751591/74651541-50b82600-5184-11ea-833f-7ec208208088.png)
 =||= Thank you for clearifying. Im looking into this issue. =||= I root of the problem is somewhat similar to what is fixed in #5925. But not quite exactly.
The dataset is updated correctly, but the maintable is not updated. Affects both the groups column and the uri column. I did not test the file column, but I'd bet on it. @tobiasdiez as a good insight in the JabRef data model. Maybe he's got an idea? =||= I think the problem is in this method:
https://github.com/JabRef/jabref/blob/cc94cca00d48004e3678ff4603f361129cdd9e23/src/main/java/org/jabref/gui/maintable/BibEntryTableViewModel.java#L66-L81
A observable value is returned, but this one is static and doesn't change if the underlying data in the entry changed (or the groups for that matter). =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= The problem persists in
```
JabRef 5.0-beta.457--2020-02-22--d38f813
Windows 7 6.1 amd64 
Java 13.0.2
``` =||= It's possible you were too quick for us. 😄 After merging, the build server takes about an hour to upload the latest build to builds.jabref.org. =||= I was too quick at first. Then I waited for the CI to complete and downloaded it again.

You can see from the commit-hash (d38f813) that it is indeed the build that is currently up-to-date with the master-branch :) =||= "Fixed display of groups and links column in MainTable"fixes #5561 
The group and the linkedIdentifier column were not dynamically bound to the entry data.

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/22/20, 01:59:35 PM
5935.05986JabRef switches on macOS to discrete graphics which is not necessary "<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0-beta.388 on macOS 10.15.3

The issue resolved in #4070 is recurring. JabRef switches after start directly to the discrete graphics, which is not necessary.""Thanks for the report.
As a workaround you can manually modifiy the Info.plist file and add 
the following key to the dict properties:
```
<key>NSSupportsAutomaticGraphicsSwitching</key>
  <true/>
```

We are trying to integrate this in our deployment (see #5986 ) =||=  @dheckl  Could you please test the latest master version? Should be ready in half an hour or so and check if that works now? I manually checked the dmg contents and the files got copied over/the info.plist contains the above key
https://builds.jabref.org/master/ =||= @Siedlerchr I just re-tested with the build from 27.04.2020 13.58 and macOS still switches to the dedicated GPU. Also, I cannot confirm that the key was copied. The Info.plist inside JabRef.app does not contain the above key. When I set the key by hand, macOS does not switch to the dedicated GPU. Sorry for this update... =||= Thanks again for your feedback. Indeed. I looked at the wrong location.
I noticed that the ""Runtime-Info"".plist seems to got copied over only:
`JabRef-5.1.dmg\JabRef\JabRef.app\Contents\runtime\Contents\`

Hm. this is odd =||= @dheckl  I just commited a new fix which seems to have worked (I checked the contents of the dmg file)
A new build is now running and should be ready in roughly half an hour =||= @Siedlerchr Now it works. Thanks for that! =||= "Add Info plist to mac resources"Hopefully fixes #5935

Can't test it as I don't own a mac.

Based on https://hg.openjdk.java.net/jdk/jdk/file/tip/src/jdk.incubator.jpackage/macosx/classes/jdk/incubator/jpackage/internal/resources/Runtime-Info.plist.template

Added the key NSSupportsAutomaticGraphicsSwitching with a value of true.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr04/26/20, 05:51:59 PM
5510.06008Reordering Groups does not work after previous drag & drop"Can we reorder groups? I don't mean the automatic alphabetized ""sort all subgroups (recursively)"" which I can click in the context menu. I mean can I manually choose the order of my groups? It seems that drag and drop only works if I'm adding a group as a subgroup into another group.""Sure you can drag and drop the groups in any order. You can move a group onto another group to make it a subgroup or you move in between two groups to put it there 
If you move a subgroup to the all entries group, it should become another top level group.
Also moving subgroups works by moving them onto the parent group  =||= Thank you! Nice workaround but for larger lists of groups is unrealistic. I'd suggest a new feature where the drag listener detects if the cursor is near the top or bottom of the receiving cell, and if so tries to insert the dragged group in between two cells. =||= Somewhat similar to:
https://github.com/JabRef/jabref/issues/4869#issuecomment-480845941 (see also discussion there)

_Edit_: Note, that it is already possible to insert a group between two other groups using drag'n'drop (i. e. not as a subgroup, but at the same level as the other groups). Is that what you are asking for? =||= As @AEgit points out, this is already possible (at least in the latest development version). For the next time, please use http://discourse.jabref.org/ for general questions. Thanks! =||= Ok I had a feeling it might already be implemented. Actually, this did not work for me when I made this post. I wasn't sure if it was a bug or a missing feature. But I just pulled the latest commit and rebuilt it, and now drag and drop reordering is working as expected. 

 =||= Actually, this issue started to happen again. And I figured out how to reproduce it: 

1. Start up JabRef normally. Drag and drop reordering of groups should work fine.
2. Drag and drop an article into a group.
3. Try to drag and drop reorder a group again. It does not work.

Since articles can't be drag and dropped in between groups, my guess is that some flag  indicating that the dragged item cannot be placed in between groups does not get reset after an article is drag and dropped. =||= JabRef 5.0.0-dev--2019-10-25----681d6aa6f
Windows 10 10.0 amd64 
Java 12.0.2

Can confirm for the current dev version.
After dragging an article to a group, it is no longer possible to insert a group between two other groups using drag'n'drop. It is possible, however, to assign a group as a new subgroup of another group using drag'n'drop. =||= Thanks, I think I fixed it.

I'm having issues with git so I can't pull request. Please add 
```java
if (!groupsToMove.isEmpty()) {
	localDragboard.clearAll();
}
```
or something similar to src/main/java/org/jabref/gui/groups/GroupTreeView.java line 215

I don't understand why this wasn't here before so perhaps someone could check that my fix isn't causing any new problems.  =||= @tobiasdiez : Have you seen the issue and fix reported by @mgroth0 ? I reckon as long as the fix has not been implemented, this issue needs to be re-opened. =||= Thanks to the solution from @mgroth0  this issue should be fixed now in the latest master.


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.
 =||= JabRef 5.0-beta.466--2020-02-24--4eefcc6
Windows 10 10.0 amd64 
Java 13.0.2

I am afraid, with the new version the performance is now so bad for my large database (>20,000 entries; several thousand static groups), that I cannot test features any more. JabRef behaves as if crashed (status: ""Not responding"" in task manager) most of the time and the CPU usage is constantly around 80% on a hexacore. When trying to assign a group as a subgroup of another, JabRef will appear as it crashed for 10 to 20 sec, before performing the action). I will see, whether I can get a smaller database, where I can still at least test features, but at the moment this performance is a complete showstopper. Could you please test this feature also with a large database? Do you manage to use JabRef when using a large database?
Maybe the introduction of this feature has caused these issues - the performance of the current JabRef version has already been bad before (see also here: https://github.com/JabRef/jabref/issues/5071 and here: https://github.com/JabRef/jabref/issues/5735), but now its abysmal. =||= This code part should only be invoked, when a drag'n'drop of a group item happens. I don't believe this is connected to the performance issue, but I will try to test it.  =||= "Fixed group drag-n-drop not working after inserting an article into a group"fixes #5510 
Credit goes all to @mgroth0, who had Problems with git uploading this fix. Played around a little bit, I don't see any new issue arise from this fix.

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/24/20, 06:35:10 PM
5246.06010Improve citation styles code"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
 JabRef 5.0-alpha--snapshot--2019-08-25--master--0fb7f5ae0
Windows 7 6.1 amd64 
Java 11.0.4-bellsoft

- [+] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. open the preference dialog
2. the error message is immediate

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```


  ```
![grafik](https://user-images.githubusercontent.com/9216487/63713872-c7f9a680-c840-11e9-80aa-a5dcd4580ac1.png)

</details>""I have tested the described behavior, but cannot reproduce it. =||= I also had it today when I used the latest version with the installer on windows 10.
(not running from gradlew)  =||= Ok, does only occur with the build version. Not from IntelliJ. =||= In the end, the problem is that there is no (supported) way of getting a list of resources matching a given pattern. There are some [workarounds](https://stackoverflow.com/questions/3923129/get-a-list-of-resources-from-classpath-directory) but no clean way that always works. Thus, I would propose the following:
- Add an automatically created index file that references all available style files (including relative paths)
- Add this index file as a resource
- Read this file and then create a list of all styles on runtime

As I have no experience how our code generation tools work, I'll leave this for somebody else. (@Siedlerchr @koppor ?).

Moreover, I noticed that because of the following line the preference tab is loaded when the preference dialog is opened instead of only when the preview tab is selected. It would be good to support a lazy loading/init to improve the performance of the preference dialog. @calixtus 
https://github.com/JabRef/jabref/blob/8bb6380e177006fd798621809ba6d99314090615/src/main/java/org/jabref/gui/preferences/PreviewTabViewModel.java#L81   =||= Hi,
I use always the latest development version.
I have the same problem withe the preferences dialog since some 3 weeks ago.
There was **no change in my style file** at this time !
Currently i use:

JabRef 5.0-dev--snapshot--2019-09-08--master--373b9f5f5
Windows 10 10.0 amd64 
Java 11.0.4-bellsoft

It was installed from:
JabRef_windows-x64_5_0-dev--snapshot--2019-09-08--master--373b9f5f5.exe

The error occures only in case the preferences dialog is **opened first after JabRef is started**.
I can save the preferences, close the preferences then it works fine as I had opened it before with a running JabRef.
Then I close JabRef and opne the preferences and get the same error again.
Her once more the error listing:

 java.nio.file.FileSystemAlreadyExistsException
	at jdk.zipfs/jdk.nio.zipfs.ZipFileSystemProvider.newFileSystem(ZipFileSystemProvider.java:102)
	at java.base/java.nio.file.FileSystems.newFileSystem(FileSystems.java:344)
	at java.base/java.nio.file.FileSystems.newFileSystem(FileSystems.java:293)
	at org.jabref.logic.citationstyle.CitationStyle.discoverCitationStyles(CitationStyle.java:147)
	at org.jabref.gui.util.BackgroundTask$1.call(BackgroundTask.java:46)
	at org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:122)
	at javafx.graphics/javafx.concurrent.Task$TaskCallable.call(Task.java:1425)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)
	at java.base/java.lang.Thread.run(Thread.java:834)

I run JabRef on three different computers, twice under win10, one under win 8.1.. The problem is 3 times the same. As mentioned it did not happen some 3 weeks ago. =||= In general the styles are working,  but the behavior is  a bit odd:
I am only getting the error message when running from the installer.
The problem seems to be that you cannot create the same file system twice.

The only issue is that I need to close and reopen the library if I changed the order of styles, e.g. moved the ACM style before preview.

 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version.

I'll leave this open as the code needs be improved, see https://github.com/JabRef/jabref/pull/5389 for details. =||= This issue should be fixed now in master. Please wait until the new build is ready. That takes approx half an hour or so. 

 We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Add graal info to module file"Fixes #5246 Fixes #5622
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

As mentioned by @michel-kraemer in https://github.com/JabRef/jabref#issuecomment-590334280 the error might result from a non-present module description. Not sure if the one I took covers everything. (@michel-kraemer do you remember what to add exactly?)



<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez02/27/20, 10:07:08 AM
5622.06010Entry preview: Error while generating citation style"JabRef 5.0.0-dev--2019-11-16----3fbeef03d
Mac OS X 10.13.6 x86_64 
Java 13.0.1

Steps to reproduce:

1. Select any entry from an open bibliography.
2. Double left click on entry to show the different fields in the lower portion of the window.
3. The right hand side shows ""Error while generating citation style"", instead of a preview of the citation.

Jabref-5.0.0 has been in this state for a couple of development snapshots. 

I have configured APA style, but I get the same ""Error while generating citation style"" with other styles. I get the same error for all entries in the bibliography.""Can  confirm this. Think it is a follow up issue from #5585 
I debugged it down and it triggers the ArgumentException which is ignored.

Actual exception and stack trace.
I looked into my JabRef folder and it seems like there is some problem with the csl-locale git submodule. Mine is empty. 

```
org.graalvm.polyglot.PolyglotException: Unable to load locale en-US
 [org.jabref/org.jabref.logic.citationstyle.JabRefLocaleProvider.lambda$0(JabRefLocaleProvider.java:29), java.base/java.util.HashMap.computeIfAbsent(HashMap.java:1138), org.jabref/org.jabref.logic.citationstyle.JabRefLocaleProvider.retrieveLocale(JabRefLocaleProvider.java:25), <js>.Sys.retrieveLocale(Unnamed:19), <js>.localeConfigure(Unnamed:9044), <js>.CSL.Engine(Unnamed:3710), <js>.makeCsl(Unnamed:54), org.graalvm.sdk/org.graalvm.polyglot.Value.execute(Value.java:366), citeproc.java@2.0.0/de.undercouch.citeproc.script.GraalScriptRunner.callMethod(GraalScriptRunner.java:49), citeproc.java@2.0.0/de.undercouch.citeproc.CSL.<init>(CSL.java:283), citeproc.java@2.0.0/de.undercouch.citeproc.CSL.<init>(CSL.java:252), citeproc.java@2.0.0/de.undercouch.citeproc.CSL.<init>(CSL.java:231), org.jabref/org.jabref.logic.citationstyle.CSLAdapter.initialize(CSLAdapter.java:69), org.jabref/org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(CSLAdapter.java:53), org.jabref/org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(CitationStyleGenerator.java:56), org.jabref/org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(CitationStyleGenerator.java:47), org.jabref/org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(CitationStylePreviewLayout.java:15), org.jabref/org.jabref.gui.preview.PreviewViewer.lambda$4(PreviewViewer.java:184), org.jabref/org.jabref.gui.util.BackgroundTask$1.call(BackgroundTask.java:47), org.jabref/org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:130), javafx.graphics/javafx.concurrent.Task$TaskCallable.call(Task.java:1425), java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264), java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515), java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264), java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128), java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628), java.base/java.lang.Thread.run(Thread.java:830)]

```
 =||= After I deleted and readded the csl-locale submodule it works again for me when running from eclipse.
So I guess there might be something wrong with the modules in the installer =||= @koppor what do you think about replacing the git submodules by git subtrees? Then we also don't run into these problems that some people are pushing changes to the submodule commit hash as part of PRs. =||= Reading https://codewinsarguments.co/2016/05/01/git-submodules-vs-git-subtrees/ -- +1 for subtrees.

> Is the external repository third party code that you are unlikely to push anything back to? Then use a subtree. This gives the advantage of not having to give people permissions to an extra repo when you are giving them access to the code base, and also reduces the chance that someone will forget to run a git submodule update.

Should we go for the ""squashed"" history? --> https://stackoverflow.com/a/51774939/873282 --> ""Alt Squashed history"" =||= Yes, squashed history sounds good (I don't think we care about the detailed changes to the style files). =||= PR to switch to git subtrees created: https://github.com/JabRef/jabref/pull/5647 =||= Git subtrees fixed the thing with the missing resources. Now I get the following error in the portable version of JabRef with loading the csl:
```

ERROR PreviewViewer Error while generating citation style
 java.lang.Exception: java.lang.NoClassDefFoundError: org/graalvm/polyglot/PolyglotException
        at org.jabref/org.jabref.gui.util.DefaultTaskExecutor.convertToException(Unknown Source)
        at org.jabref/org.jabref.gui.util.DefaultTaskExecutor.lambda$getJavaFXTask$3(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
        at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
        at org.jabref.merged.module/javafx.concurrent.EventHelper.fireEvent(Unknown Source)
        at org.jabref.merged.module/javafx.concurrent.Task.fireEvent(Unknown Source)
        at org.jabref.merged.module/javafx.concurrent.Task.setState(Unknown Source)
        at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.lambda$call$2(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
        at java.base/java.security.AccessController.doPrivileged(Unknown Source)
        at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
        at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
        at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
        at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
        at java.base/java.lang.Thread.run(Unknown Source)
Caused by: java.lang.NoClassDefFoundError: org/graalvm/polyglot/PolyglotException
        at org.jabref.merged.module/de.undercouch.citeproc.script.ScriptRunnerFactory.createGraalRunner(Unknown Source)
        at org.jabref.merged.module/de.undercouch.citeproc.script.ScriptRunnerFactory.createRunner(Unknown Source)
        at org.jabref.merged.module/de.undercouch.citeproc.CSL.getRunner(Unknown Source)
        at org.jabref.merged.module/de.undercouch.citeproc.CSL.<init>(Unknown Source)
        at org.jabref.merged.module/de.undercouch.citeproc.CSL.<init>(Unknown Source)
        at org.jabref.merged.module/de.undercouch.citeproc.CSL.<init>(Unknown Source)
        at org.jabref/org.jabref.logic.citationstyle.CSLAdapter.initialize(Unknown Source)
        at org.jabref/org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source)
        at org.jabref/org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source)
        at org.jabref/org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source)
        at org.jabref/org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source)
        at org.jabref/org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source)
        at org.jabref/org.jabref.gui.util.BackgroundTask$1.call(Unknown Source)
        at org.jabref/org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source)
        at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.call(Unknown Source)
        at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
        at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        ... 1 more
Caused by: java.lang.ClassNotFoundException: org.graalvm.polyglot.PolyglotException
        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(Unknown Source)
        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(Unknown Source)
        at java.base/java.lang.ClassLoader.loadClass(Unknown Source)
        ... 21 more
``` =||= Everything works if you run from code (Intellj). However, when using the installer I still have an empty list of citation styles in the preference dialog. =||= When you run from installer or portable the exception above is logged on the console window behind JabRef.
From my point of view this looks like a modularity issue. Maybe some module access stuff  =||= @michel-kraemer can you please have a look at this, as this seems to be a problem with citeproc 2.0. Thanks! =||= This could be a solution? https://github.com/JabRef/jabref/issues/5246#issuecomment-529208270 =||= It seems to me `org.graalvm.polyglot.PolyglotException` is missing in the portable version. It is located inside `graal-sdk-19.2.1.jar`. Can you please check if this file is there? Or, if you're creating a fat jar, if the class file `org/graalvm/polyglot/PolyglotException.class` is there?

@koppor I don't see how this could be a solution. By the way, there is a method called `CSL.getSupportedStyles()` that returns a list of all styles in the classpath. It should work regardless of whether the application is run from the IDE or from a packaged jar file. =||= Oh, by the way, I'm currently working on a pure Java implementation of citeproc-java. It does not support all CSL features yet but it works OK most of the time already. If you're interested, I can publish a snapshot of citeproc-java. This should solve all problems related to Graal JavaScript or Nashorn, and it should improve performance by a magnitude. =||= @michel-kraemer 
The PolyglotException class is there: I checked again with the latest master (windows portable)
https://builds.jabref.org/master/
JabRef-5.0-portable_windows\JabRef\app\mods\graal-sdk-19.2.1.jar\org\graalvm\polyglot\

The only thing which comes to my minds is, do you have an (Automatic) Module name/manifest for citeproc-java?  Maybe it's some modularity/classpath issue with jlink/jpackage.

I think it's worth a try to test the snapshot of the pure java implementation
 =||= @michel-kraemer  Any news on this? We are planning a new release and it would be great to check if it works with a snapshot of your java implementation =||= Works fine from current (19-feb-2020) code, if you build from code, as was pointed out by @tobiasdiez 6-dec-2019.

1: clone repo 
2: cd jabref
3: gradlew run
4: Open bib-file and pick preview APA7 or IEEE => preview is fine.

Source:
JabRef 100.0.0
Mac OS X 10.13.6 x86_64 
Java 13.0.1
commit e560220bc74430cbeeb58838f9b0db75a6555a03

Current development binary 5.0 does not work for me, with same error as before for APA and IEEE (internal view ""preview"" is fine).

Development binary:
JabRef 5.0-beta.432--2020-02-19--c768697
Mac OS X 10.13.6 x86_64 
Java 13.0.2
 =||= > @michel-kraemer Any news on this? We are planning a new release and it would be great to check if it works with a snapshot of your java implementation

Sorry for the delay. Sure, I can publish a new snapshot with the latest changes and make a pull request on the weekend, if that's fine with you. I'll keep you updated. =||= I just created the pull request. The new pure-Java mode is super fast and seems to work well.

Please note that the snapshot does not support all features of CSL yet (CSL is extremely complex to implement) but at least the most important ones (about 80-90% of the specification). I'm continuously working on improving the library and will release a final version 2.1.0 in the next couple of months.

Also note that the snapshot supports text and HTML output only at the moment. I found a comment in the code of `CSLAdapter` saying that the output format could be set to RTF. I don't know if that's true or if text and HTML are fine for you.

By the way, I also tried to fix the installer by adding the required modules to the jlink configuration in the `build.gradle` but to no avail. 🤷‍♂  =||= Thanks @michel-kraemer, that are really good news!

@koppor @Siedlerchr I tried this version (in the portable version) and the ""Entry preview"" panel in the preference is still empty for me, no citation styles are loaded. No error messages are logged. =||= I did gradlew run and had a list of all citations in the JabRef preferences
to choose from.

Could you push the branch to our repo to trigger a binary build
nevertheless?

Tobias Diez <notifications@github.com> schrieb am Sa., 22. Feb. 2020, 20:09:

> Thanks @michel-kraemer <https://github.com/michel-kraemer>, that are
> really good news!
>
> @koppor <https://github.com/koppor> @Siedlerchr
> <https://github.com/Siedlerchr> I tried this version (in the portable
> version) and the ""Entry preview"" panel in the preference is still empty for
> me, no citation styles are loaded. No error messages are logged.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/5622?email_source=notifications&email_token=AAKNU7XLWTJZVT4MZQ4FUOLREFZ43A5CNFSM4JOGEUCKYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEMVIEUQ#issuecomment-589988434>,
> or unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AAKNU7Q5KMTSUAYHMXUCUADREFZ43ANCNFSM4JOGEUCA>
> .
>
 =||= > @koppor @Siedlerchr I tried this version (in the portable version) and the ""Entry preview"" panel in the preference is still empty for me, no citation styles are loaded. No error messages are logged.

That's strange. I tested it with `./gradlew run` and with jpackage. No problems here. =||= I guess it's again a problem with the bundled/installed app. I've downloaded the windows builds from https://github.com/JabRef/jabref/actions/runs/43527976. The same problem occurs in the quite old build JabRef 5.0-beta.1--2019-12-15--0b8b1d6, so this appears not to be special for your PR. =||= Question is, is it jlink or jpackage which has the bug?
We can try to create a debug build: https://devdocs.jabref.org/debugging-jpackage-installations
We just need to remove the `--strip-debug` and can try to debug the loading and maybe get an exception =||= I'm pretty sure it's not a bug in jlink or jpackage but in our code. There is a difference in how resources are found in a local build (= they are just normal files and our FileSystem approach works) vs in a bundled build (=they are files in a jrt module and our FileSystem approach does not work). 
https://github.com/JabRef/jabref/blob/1fd53bfdeb23afddbb23f4d1c18bdc6b085c2ebf/src/main/java/org/jabref/logic/citationstyle/CitationStyle.java#L146-L159

A possible solution is outlined here: https://github.com/JabRef/jabref/issues/5246#issuecomment-529208270 =||= @tobiasdiez  I think I maybe found a solution. https://stackoverflow.com/a/54142975
Will test it. =||= Hopefully, this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Still present. Starting from the bat I now get a different error:
```
rg.graalvm.polyglot.PolyglotException: SyntaxError: Error initializing language 'regex' using class 'com.oracle.truffle.regex.RegexLanguage'.
Error initializing language 'regex' using class 'com.oracle.truffle.regex.RegexLanguage'.
Unnamed:84:14 Expected ; but found :
        ""art."": ""article"",
              ^
Unnamed:85:13 Expected ; but found :
        ""bk."": ""book"",
             ^
Unnamed:86:13 Expected ; but found :
        ""ch."": ""chapter"",
             ^
Unnamed:87:16 Expected ; but found :
        ""subch."": ""subchapter"",
                ^
Unnamed:88:12 Expected ; but found :
        ""p."": ""page"",
            ^
Unnamed:89:13 Expected ; but found :
        ""pp."": ""page"",
             ^
Unnamed:90:15 Expected ; but found :
        ""para."": ""paragraph"",
               ^
Unnamed:91:18 Expected ; but found :
        ""subpara."": ""subparagraph"",
                  ^
Unnamed:92:13 Expected ; but found :
        ""pt."": ""part"",
             ^
Unnamed:93:12 Expected ; but found :
        ""r."": ""rule"",
            ^
Unnamed:94:14 Expected ; but found :
        ""sec."": ""section"",
              ^
Unnamed:95:17 Expected ; but found :
        ""subsec."": ""subsection"",
                 ^
Unnamed:96:15 Expected ; but found :
        ""supp."": ""supplement"",
               ^
Unnamed:97:14 Expected ; but found :
        ""sch."": ""schedule"",
              ^
Unnamed:98:14 Expected ; but found :
        ""tit."": ""title"",
              ^
Unnamed:99:14 Expected ; but found :
        ""col."": ""column"",
              ^
Unnamed:100:14 Expected ; but found :
        ""fig."": ""figure"",
              ^
Unnamed:101:14 Expected ; but found :
        ""fol."": ""folio"",
              ^
Unnamed:102:12 Expected ; but found :
        ""l."": ""line"",
            ^
Unnamed:103:12 Expected ; but found :
        ""n."": ""note"",
            ^
Unnamed:104:13 Expected ; but found :
        ""no."": ""issue"",
             ^
Unnamed:105:13 Expected ; but found :
        ""op."": ""opus"",
             ^
Unnamed:106:13 Expected ; but found :
        ""sv."": ""sub-verbo"",
             ^
Unnamed:107:14 Expected ; but found :
        ""vrs."": ""verse"",
              ^
Unnamed:108:14 Expected ; but found :
        ""vol."": ""volume""
              ^
Unnamed:109:4 Expected eof but found }
    },
    ^

        at org.graalvm.polyglot.Context.eval(Unknown Source) ~[org.graalvm.sdk:?]
        at de.undercouch.citeproc.script.GraalScriptRunner.eval(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.script.AbstractScriptRunner.loadScript(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.getRunner(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.<init>(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.<init>(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.<init>(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.initialize(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
``` =||= This new error does not seem to be JabRef related. I guess the error message points to this part
https://github.com/Juris-M/citeproc-js/blob/3389e9b23a1873c1bb0af16eef7533aefd669701/src/load.js#L59-L85
Not sure where the problem lies. Maybe @michel-kraemer has an idea?

@michel-kraemer you might want to consider adding the relevant statements from https://github.com/JabRef/jabref/commit/d2de477d8de49de191c5fad16a65c65a96d102a3 to the usage notes of your nice `citeproc-java` library to make it easier for other people to use it in a modularized setting. =||= @tobiasdiez The error message is misleading. I received the same error when I tried to integrate citeproc-java with GraalVM the first time into JabRef. I solved it by adding the required modules to the `module-info.java` file. So, if the same error now appears in the packaged version, it's most likely still a packaging issue.

> @michel-kraemer you might want to consider adding the relevant statements from d2de477 to the usage notes of your nice citeproc-java library to make it easier for other people to use it in a modularized setting.

Good idea, but I hope that I can completely get rid of GraalVM in the future when the new pure-Java implementation is ready. =||= What I mean with ""the error message is misleading"": It is trying to load the regex extension of Graal JavaScript but cannot find the implementation classes. =||= This issue should be fixed now in master.
Please wait until the new build is ready. That takes approx half an hour or so.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Add graal info to module file"Fixes #5246 Fixes #5622
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

As mentioned by @michel-kraemer in https://github.com/JabRef/jabref#issuecomment-590334280 the error might result from a non-present module description. Not sure if the one I took covers everything. (@michel-kraemer do you remember what to add exactly?)



<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Tobias Dieztobiasdiez02/27/20, 10:07:08 AM
5701.06031Untranslated strings"JabRef 5.0.1-dev--2019-11-29----9043f8008
Linux 4.9.0-11-amd64 amd64 
Java 13.0.1

Strings that are not translated in the GUI of JabRef:
- In the group panel: the field to search a string within the groups displays ""Filter groups"". ""Filter groups"" is not translated. 
- In preferences: BibTeX key generator: key patterns: The header of the table (Name, Key pattern, Reset all) are not translated.""Hello, I will take this bug if no one else is doing it =||= Actually, there are other untranslated things in the Preferences that I found out :
- In Entry table columns, Columns and the list under it are not translated.
- In Entry preview, the first (and only) box to check (""Show preview as tab in entry editor"") is untranslated
- In Entry editor, the 5th box ""Show 'LaTeX Citations' tab"" is untranslated.
- In Entry editor, Autocompletion, the name of this part, the box ""Use autocompletion"", the ""affected fields"", and the categories ""Name format"" and ""First names"" are not translated.
- In Import, ""Linked file name conventions"" is not translated.
- In XMP-metadata, the box ""Do not write the following fields to XMP Metadata"" is untranslated.

Here you go, have fun :) =||= Thank you @Vencesdab for looking at this issue.

There are two reasons strings may appear untranslated in the GUI:
- programming does not allow for translation.
- translation is not provided in language XYZ.

My issue concerned only the first case (but I did not mention it. My mistake).

Except for the case ""In Entry table columns, Columns and the list under it are not translated."", the strings you reported fall in the second case.
Please, contribute their translations in your preferred language at https://crowdin.com/project/jabref .

@CloudFenrir: 
About ""In Entry table columns, Columns and the list under it are not translated."":
- ""Columns"" is available to translation
- ""Name"" (the list header) falls in the present issue.   
- not all strings in the list should be translated. Typically, the usual bib(la)tex fields are kept in English (author, title, howpublished, etc.), while the JabRef-specific fields should be made available for translation (Relevance, Readstatus, Ranking, etc.).

 =||= JabRef 5.0-beta.16--2019-12-18--28d3439
Linux 4.9.0-11-amd64 amd64 
Java 13.0.1

Update:
Almost all strings are now translated :+1: 
Only the special fields in the drop-down list of Options > Preferences >  Entry table columns remains untranslated. =||= "Translation for SpecialField names in preferences"Names of special fields were not translated in preferences.
fixes #5701 

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus02/27/20, 06:22:07 PM
6017.06037Emacs Keyboard shortcuts for data entry/editing"Versions of JabRef prior to 4 allowed me to use keyboard shortcuts to move the cursor during text entry using the Emacs chords; e.g., ctrl-f (move cursor right one space), ctrl-b (move cursor left one space), ctrl-d (delete character at cursor), ctrl-a (move cursor to beginning of line), ctrl-e (move cursor to end of line). These seem to be missing in the 5.0 snapshots (for example,  ctrl-e closes the document entry dialog box). Please add them back to the next snapshot release for 5.0.

This helps those of us users who are touch-typists and does not affect those who prefer to move the cursor with a pointer device. There's no reason to choose only one method for data entry and editing just like you support multiple platforms (Linux, Apple, Microsoft) and not only one. The code was in earlier versions so adding it back to allow the user to select their preferred data entry/editing method should easily be done.""Hello! I would like to work on this. Thanks! =||= Some pointers: the Emacs keybinding feature was introduced in https://github.com/JabRef/jabref/commit/e7a27ef897b7985faf8406ceed7f07fdb72ea6ac and removed in https://github.com/JabRef/jabref/pull/4894. Shouldn't be hard to reimplement, e.g: https://gist.github.com/uphy/aea373af1b097cd3c269 =||= On Wed, 26 Feb 2020, Tobias Diez wrote:

> Some pointers: the Emacs keybinding feature was introduced in
> https://github.com/JabRef/jabref/commit/e7a27ef897b7985faf8406ceed7f07fdb72ea6ac
> and removed in https://github.com/JabRef/jabref/pull/4894. Shouldn't be
> hard to reimplement, e.g:
> https://gist.github.com/uphy/aea373af1b097cd3c269

Tobias,

Please do re-implement!

Thanks in advance,

Rich
 =||= It is worked on at https://support.papersapp.com/support/solutions/articles/30000031839-what-are-lists-how-do-i-make-them-in-readcube-papers-. =||= On Wed, 2 Sep 2020, Oliver Kopp wrote:

> It is worked on at
> https://support.papersapp.com/support/solutions/articles/30000031839-what-are-lists-how-do-i-make-them-in-readcube-papers-.

Oliver,

I don't see the relevance of that link to using keyboard shortcuts when
editing text in JabRef.

Regards,

Rich
 =||= My bad - I had the wrong link in my clipboard. Too many parallel things.

The right link is https://github.com/JabRef/jabref/pull/6037 =||= On Fri, 4 Sep 2020, Oliver Kopp wrote:

> My bad - I had the wrong link in my clipboard. Too many parallel things.

Oliver,

It's Friday so too many parallel things are acceptable. :-)

> The right link is https://github.com/JabRef/jabref/pull/6037

muachilin's post looks promising, but that's not what I see in 5.2.dev
installed yesterday (2020-09-03). The choices under Options -> Customize key
bindings show the CUA set (see attached image), not the Emacs set that
allows ctrl-a (go to head of line), ctrl-e (go to end of line), ctrl-d
(delete to right of point), etc.

Have I missed something in that posting?

Carpe weekend,

Rich
 =||= On Fri, 4 Sep 2020, Oliver Kopp wrote:

> My bad - I had the wrong link in my clipboard. Too many parallel things.

Oliver,

It's Friday so too many parallel things are acceptable. :-)

> The right link is https://github.com/JabRef/jabref/pull/6037

muachilin's post looks promising, but that's not what I see in 5.2.dev
installed yesterday (2020-09-03). The choices under Options -> Customize key
bindings show the CUA set (see attached image), not the Emacs set that
allows ctrl-a (go to head of line), ctrl-e (go to end of line), ctrl-d
(delete to right of point), etc.

Have I missed something in that posting?

Screenshot's attached to this one.

Carpe weekend,

Rich =||= This feature is not yet implemented. =||= On Fri, 4 Sep 2020, Christoph wrote:

> This feature is not yet implemented.

Christoph,

I'm surprised that implementing it in 5.x when it was present in earlier
versions (not sure about 4.x but certainly in earlier ones) is so difficult.

I look forward eagerly to having it available as I much prefer the editing speed
the emacs chords provide.

Stay well,

Rich
 =||= "Implement Emacs key bindings"Implement Emacs key bindings (fixes #6017)

Emacs style key bindings are re-added to JabRef through the preferences
menu. The supported key bindings have feature parity with the previous
implementation in JabRef v<4, and additionally support any class that
extends TextInputControl. In practice, this means that the new
implementation supports both TextFields and TextAreas by default. Some
functionality may still be missing.

Co-authored-by: Felix Luthman <34520175+felixlut@users.noreply.github.com>
Co-authored-by: Tommy Samuelsson <Zodbigt@users.noreply.github.com>
Co-authored-by: muachilin <32566798+muachilin@users.noreply.github.com>
Co-authored-by: Kristoffer Gunnarsson <kristoffergunnarsson47@gmail.com>

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."muachilin11/06/20, 10:24:46 PM
5832.06054Title made of two sentences: Capitalization is OK, but warning is displayed"JabRef 5.0-beta.342--2020-01-15--58709e7
Linux 4.9.0-11-amd64 amd64 
Java 13.0.2

When a title is made of two sentences, it is fine to capitalize the first letter of the second sentence. Currently, such title triggers a warning about this capitalization.

Steps to reproduce the behavior:
1.Create an entry
2. As title input ""A title made of two sentences. This is the second sentence""

The warning message (with the triangular yellow icon) is displayed because of the capitalization of the word ""This"".
"Fix warning display issue for entering a title made of two words"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
  
Hello! This PR fixes the issue that a warning is displayed when users enter a title made of two sentences in the entry editor. fixes #5832 

<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."eetian03/17/20, 05:27:37 AM
6108.06110Empty field not checked in dialog for creation of keyword-search groups"JabRef 5.1--2020-03-12--23034ce
Linux 5.4.19-050419-generic amd64 
Java 13.0.2

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Create a group of type `searching for keywords`
2. Leave `Field`empty and add some keyword to `Keyword` 
3. When adding an entry to the group by drag-n-drop, JabRef generates a key-value pair with an empty key without any notification.

My expectations would have been, e.g. to (i) let the user know that `field` needs to be assigned some content, such as `keywords` or `group`, (ii) to make this field a drop-down textfield with a default value, (iii) or at least checking for `!key.isEmpty()` when generating the BibTeX entry. BibTeX will produce errors when running into malformed key-value pairs."Groups: Searching for keywords field mandatory value not checked"Closes #6108 
Closes #6066 

- [x] Alert dialog triggered
![image](https://user-images.githubusercontent.com/2141507/76635849-5ec15280-6548-11ea-93d6-87187f759a17.png)

- [x] Active Info icons:
![image](https://user-images.githubusercontent.com/2141507/76633553-33893400-6545-11ea-8bc9-28e7a6b3ce38.png)

- [x] Inactive info icons
![image](https://user-images.githubusercontent.com/2141507/76633606-456ad700-6545-11ea-81fc-87f429984a87.png)

- [x] Dialog should not close when error dialog is discarded!
@calixtus Not sure if we have this problem in more dialogs. The `setResultConverter` method will always close the dialog. We want to go abck to the dialog if errors are displayed as alert dialogs , however. We need to use `addEventFilter` for this I guess (am no expert in JavaFX @tobiasdiez) See Dialog validation section at https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html"Stefan Kolbstefan-kolb03/31/20, 04:06:21 PM
6066.06110Add a subgroup: a warning should not close the window"JabRef 5.0-beta.532--2020-03-04--8111707
Linux 4.9.0-12-amd64 amd64 
Java 13.0.2

- [x ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

While adding a subgroup, if a warning is displayed, the ""add subgroup"" window is closed.

Steps to reproduce the behavior:
1. In the group interface, right click and select ""Add subgroup"". This opens a window entitled ""Add subgroup""
2. In this window, add a text in the description field. And DO NOT enter a group name.
3. Click on OK

==> An error window appears, stating (rightfully) that ""Please enter a name for the group"". Click on OK (no other choice). This causes the window ""Add subgroup"" to disappear.
Expected behavior: leave open the window ""Add subgroup"", so that I can enter the name of the group."Should be fixed by https://github.com/JabRef/jabref/pull/6110 =||= Groups: Searching for keywords field mandatory value not checked"Closes #6108 
Closes #6066 

- [x] Alert dialog triggered
![image](https://user-images.githubusercontent.com/2141507/76635849-5ec15280-6548-11ea-93d6-87187f759a17.png)

- [x] Active Info icons:
![image](https://user-images.githubusercontent.com/2141507/76633553-33893400-6545-11ea-8bc9-28e7a6b3ce38.png)

- [x] Inactive info icons
![image](https://user-images.githubusercontent.com/2141507/76633606-456ad700-6545-11ea-81fc-87f429984a87.png)

- [x] Dialog should not close when error dialog is discarded!
@calixtus Not sure if we have this problem in more dialogs. The `setResultConverter` method will always close the dialog. We want to go abck to the dialog if errors are displayed as alert dialogs , however. We need to use `addEventFilter` for this I guess (am no expert in JavaFX @tobiasdiez) See Dialog validation section at https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/Dialog.html"Stefan Kolbstefan-kolb03/31/20, 04:06:21 PM
6115.06119Inconsistent capitalisation of downloaded files"In JabRef 5.0, if a pdf file is downloaded using ""Download from URL"" button in entry editor (""General"" tab), it gets the extension ""PDF"" with upper case letters (that is, let's say, ""Bibtexkey.PDF""). But if, after that, one changes Bibtexkey (or, presumably, something else that goes into the default file name), and chooses ""Rename file to default pattern"", the file gets an extension ""pdf"" with lower case letters (that is, let's say, ""Bibtexkey1.pdf"").

That seems to be inconsistent. In both cases the capitalisation should be the same (I would prefer lower case (""Bibtexkey.pdf""), but, perhaps, it is a good idea to set that in the preferences)."Lowercase file extensionFixes #6115Stefan Kolbstefan-kolb03/14/20, 11:02:32 AM
6078.06121Icons from Material design icons not recognized"JabRef 5.0-beta.519--2020-03-02--f908883
Windows 10 10.0 amd64 
Java 13.0.2

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Fonts from Material Design Icons are not recognized: airballoon, or account.
Steps to reproduce the behavior:
1. open jabref
2. choose any group
3. add a color and as the icon name airballoon or account
4. save and see that the color is changed while the icon is not.

This has been working before. IIRC it was not possible to add icons with hyphens in the name, but the names airballoon and account do not have any icons
![grafik](https://user-images.githubusercontent.com/9216487/76161991-f71a9a00-6138-11ea-8fb9-1c27bc871426.png)
![grafik](https://user-images.githubusercontent.com/9216487/76162000-20d3c100-6139-11ea-9d98-1f35abd1c8c6.png)

When I checked this in Jabref 4.1 the icon was there!!!!!
![grafik](https://user-images.githubusercontent.com/9216487/76162057-b707e700-6139-11ea-9793-f9e2766fe1cc.png)



<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""@JabRef/developers  2b760cddf53cceae54fd149774226461f5290daa caused this issue.
https://github.com/JabRef/jabref/issues/5245
Obviously only icons contained inside JabRefIcons are available now.

The question is - do we really want this feature? Not sure if changing the line back to 
```
        return Enums.getIfPresent(MaterialDesignIcon.class, iconCode.toUpperCase(Locale.ENGLISH))
                    .toJavaUtil()
                    .map(icon -> new InternalMaterialDesignIcon(getColor(), icon));
```
 will reintroduce the referenced issue (https://github.com/JabRef/jabref/issues/5245).
This feature also only makes sense, if we have a dropdown with all available icons IMHO.

![image](https://user-images.githubusercontent.com/2141507/76682572-845c6380-65fd-11ea-9384-8b105d66bd76.png) =||= It would be very good, if a dropdown with icons is avaaible. The present situtation is untainable. =||= "Icons from Material design icons not recognized"Fixes #6078
Related #5245

@JabRef/developers  2b760cddf53cceae54fd149774226461f5290daa caused this issue.
https://github.com/JabRef/jabref/issues/5245
Obviously only icons contained inside JabRefIcons are available now.

The question is - do we really want this feature? Not sure if changing the line back to 
```
        return Enums.getIfPresent(MaterialDesignIcon.class, iconCode.toUpperCase(Locale.ENGLISH))
                    .toJavaUtil()
                    .map(icon -> new InternalMaterialDesignIcon(getColor(), icon));
```
 will reintroduce the referenced issue (https://github.com/JabRef/jabref/issues/5245).
This feature also only makes sense, if we have a dropdown with all available icons inside the new/edit group dialog IMHO.

![image](https://user-images.githubusercontent.com/2141507/76682572-845c6380-65fd-11ea-9384-8b105d66bd76.png)"Stefan Kolbstefan-kolb03/14/20, 10:10:23 PM
6120.06123Fulltext file deleted when being renamed to the name differing just by letter case"In JabRef version 5.0 the fulltext file can be deleted when trying to rename it to the almost the same name, as it already had, but with different letter case.

For example:
1. Let's say we have an entry with Bibtexkey ""Einstein1905a"" and fulltext file ""Einstein1905a.pdf"".
2. In the ""Required Fields"" tab, change the Bibtexkey to ""Einstein1905A"" (that is, change lower case ""a"" to upper case ""A"").
3. In the ""General"" tab, ""File"" field, right click the file and choose ""Rename file to defined pattern"" in the menu shown after that.
4. A message ""File exists"" will be shown, giving options ""Overwrite"" and ""Cancel"".
5. Choose ""Overwrite"".
6. Look for the file ""Einstein1905a.pdf"" or ""Einstein1905A.pdf"" in the directory where it is supposed to be, or try to open it from JabRef.

The expected behaviour is that after those steps, file with the new name (""Einstein1905A.pdf"") would exist, or, at least, file with the old name (""Einstein1905a.pdf"") would exist and an error message about failed renaming would be shown (perhaps suggesting a workaround - using an intermediate step of renaming to a name with added or removed letter).

But the actual behaviour is that after those steps neither file ""Einstein1905a.pdf"" nor ""Einstein1905A.pdf"" exists, it ends up being deleted.

If I understand it correctly, the message ""File exists"" is shown for compatibility (some operating systems allow the file names to differ only by letter case, some do not). That looks reasonable, but then there should probably be a check if the file causing this ""naming conflict"" is the same file being renamed."Fulltext file deleted when being renamed to the name differing just b…"…y letter case

Fixes #6120"Stefan Kolbstefan-kolb03/14/20, 07:14:54 PM
6038.06130Make preferences larger"We have ""Appearance"" below ""Advanced""

IMHO ""Advanced"" should be last. Can we switch it and make the preferences a bit higher so that a user does not need to scroll at the left side?

![grafik](https://user-images.githubusercontent.com/1366654/75487536-da4ecb80-59ae-11ea-8fc0-46d9a9c8e6ca.png)""Nope, height is problematic, especially if you have a small notebook monitor. We also have a search.
 =||= Can't we adapt the window size if the window does not cover the whole screen? I hope, this is possible with JavaFX.

After resetting the preferences, restarting JabRef, it appears like that on my monitor:

![grafik](https://user-images.githubusercontent.com/1366654/75489661-f81e2f80-59b2-11ea-9a31-d3d18db776cb.png)

I assume that a significant amount of users expects 

- programs starting taking a reasonable size - if not full screen
- popups appearing taking a reasonable size - if not full screen

I would bet that we earn question marks if 50 pixels are missing on a dialog so that it is complete AND the dialog has 300 pixels to grow on the screen. =||= What could be done is to change the buttons below the list to icon buttons with the names in tooltips...
I think, not every user uses import/export/show prefs every day. =||= "Small improvements in preferences dialog"Changes:
- Reduces the size of the rarely used import/export/show/reset-preferences buttons to icon buttons to free space to display all of the tabs in the list ( fixes #6038 )
- The font size is now controlled by a Spinner (a text field with arrows on the right side)
- The ComboBoxes now have ValueFactories to properly display the real name of the languages, the charsets and the BibDatabaseMode which incorrectly displayed `biblatex` instead of `BibLaTeX`.
- Some keyboard events are added to the add-TextFields in NameFormatterTab etc. to make usage more intuitive.
- Removed obsolete and non functional `Open PDF` settings  ( closes #5529 )

![preferences_polish](https://user-images.githubusercontent.com/50491877/76712228-efe62400-6716-11ea-84ad-9b331ea046a4.png)

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus03/16/20, 08:36:08 AM
5529.06130Open PDF options"In the settings under `External programs` -> `Open PDF` the only options are `Adobe Acrobat Reader` and `Sumatra Reader`. To me a generic field (e.g. `Other`) is missing here as one can't assume that all JabRef users have either one of those readers installed.

For instance I am running JabRef on Linux with `Okular` as my reader of choice. In my case neither of the two options is selected and it seems to be working reasonably well (see #5253). Still the settings page is very confusing for such a case.

My suggestion would be to
a) Add a hint that these paths are only needed if one wants to use either one of the listed applications and one doesn't need to worry about this setting if not
b) Add a generic `Other` field in which the user can add the path to the PDF reader of their choice

Maybe also a combination of a) and b)""The preferences are obsolete, more or less historic things.
Since several versions (maybe v4?) bvy default JabRef delegates file opening to the system and simply calls ""xdg-open"" with the filepath as argument on linux.

The code is in JabRefDesktop/NativeDesktop. Should be cleaned up. 

For custom external types, you can configure an apporiate applicaiton.

 =||= So the solution woul be so simply remove these menu entries altogether? =||= "Small improvements in preferences dialog"Changes:
- Reduces the size of the rarely used import/export/show/reset-preferences buttons to icon buttons to free space to display all of the tabs in the list ( fixes #6038 )
- The font size is now controlled by a Spinner (a text field with arrows on the right side)
- The ComboBoxes now have ValueFactories to properly display the real name of the languages, the charsets and the BibDatabaseMode which incorrectly displayed `biblatex` instead of `BibLaTeX`.
- Some keyboard events are added to the add-TextFields in NameFormatterTab etc. to make usage more intuitive.
- Removed obsolete and non functional `Open PDF` settings  ( closes #5529 )

![preferences_polish](https://user-images.githubusercontent.com/50491877/76712228-efe62400-6716-11ea-84ad-9b331ea046a4.png)

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus03/16/20, 08:36:08 AM
6136.06138Outdated dependencies[There are outdated dependencies!](https://github.com/JabRef/jabref/actions?query=is%3Afailure+workflow%3A%22Check+dependencies%22) Update to JavaFX 14"Can we actually ramp up to JavaFX 14?

fixes #6136 

- [x] Manually tested on MacOS"Linus DietzLinusDietz03/17/20, 08:42:33 AM
818.06143Full text search for American Physical Society (APS) journals"Currently the full text search for articles published in [APS journals](http://journals.aps.org/) fails.

It would be great if it could be supported in a future release.""Could you please add some more details?
I tried a random Article and JabRef downloads the fulltext pdf. In the log it is stated, that the fulltext is found at arxiv.org 
This is the sample I tried:
http://journals.aps.org/prl/abstract/10.1103/PhysRevLett.116.061102 
 =||= Well, first of all you should probably try an article that does not offer OpenAcess.

Last time I failed with http://link.aps.org/doi/10.1103/PhysRevLett.89.127401
 =||= Ah okay, now I get the error message: Full text download failed. 
Needs some kind of authentication.
IP-Based or CHORUS.inc Token based are the options the API provides.

From what I see this could be implemented similar to the Springer and IEEEExplore fetchers.
Fortunately, APS provides an API:
http://harvest.aps.org/docs/harvest-api
 =||= Wishes for fulltext fetcher will be collected at #2581. =||= "Add APS Fetcher (refactored)"Fixes #818, part of #2581. 

Follow up from #6026 
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr03/18/20, 07:28:37 PM
6338.06152"Dialog ""Customize Entry Types"" - drag&drop not working - adding new field buggy ""Luckily the ""Customize Entry Types""-Dialog ist back! Unfortunately it is not (yet) working thoroughly:
* the ""plus""-button for fields is grey and can therefore not be pressed, although I have entered a fieldname in the dropdown-box - this only changes after one clicks into the ""new entry type""-box at least once
* the drag and drop to change the order isn't working at all (or at least I cannot figure out where to touch the line to drag&drop)

I have experienced this using:
JabRef 5.0--2020-03-06--2e6f433
Windows 10 10.0 amd64 
Java 13.0.2

I have tested the latest development version and the problem persists:
JabRef 5.1--2020-04-23--bbea7df
Windows 10 10.0 amd64 
Java 14.0.1

""Refs #6152 =||= I can reproduce this problem. Additionally I'm not able to delete entry types (left half of the ""Customize Entry Types"" dialog). They are back as soon as I reopen the dialog.

JabRef 5.0--2020-03-06--2e6f433
Mac OS X 10.14.6 x86_64 
Java 13.0.2
 
<img width=""1280"" alt=""Bildschirmfoto 2020-04-24 um 12 27 59"" src=""https://user-images.githubusercontent.com/1955290/80203238-2329a600-8627-11ea-82f8-acab895a9981.png"">
 =||= Yes, this is known and I started working on it (see linked PR, but turned out it's complicated).
Second, you can't delete StandardEntryTypes atm. Maybe needs a ""reset to default button"".
 =||= @domhardt  @ElisEck 

You can now use drag and drop to reorder to the fields. The order is now also reflected in the entry editor. 
You can't delete the Standard Entry Types. They will be re added upon reopening the dialog. That's actually a safety measure to prevent accidental breaking of JabRef.

The new version (currently building) will be available at 
https://builds.jabref.org/master/ =||= @Siedlerchr Tank you so much, works quite well! =||= "Allow reordering of custom entry types fields"Additionally, restore the old Multiline Property and make it configurable.

Current status:
- Adding/Removing/Reordering works
- Removing standard entry types has no effect (they are always readded if deleted

- Sort fields alphabetically? Would that effect the order? Needs investigation
==> cannot sort. it influences the save order 



Refs #5230 and #4373


Fixes  #6338

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr07/01/20, 03:18:09 PM
6049.06184File / Import / Append library freezes JabRef"JabRef version 100.0.0 (current master 2020-03-01 14:00 PM) on Windows 10

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Open one library.
2. In the menu open file -> Append library
3. Check import entries
3. Select another library""I think we also need to show a progresbar =||= Similar issue: When opening a large library, JabRef takes much time to load. @tobiasdiez Will open an issue with ""pain points"" =||= Can also confirm the same issue with both JabRef 5.0 (public release version) and 5.1 (current master, https://github.com/JabRef/jabref/commit/acf2ac46a3bdc83d11e96e7f337783fcf197be61) on ""Windows 10 10.0 amd64, Java 14"" =||= I'm not sure what the difference between AppendDatabaseAction and ImportAction into current Database is... =||= A quick look reveals following for me:

- AppendDatabaseAction: `org/jabref/gui/importer/actions/AppendDatabaseAction.java:97` --> `importGroups`, which relies on the old group format
- I forgot about the `ContentSelector`. This is somehow important - and not handled in the ImportAction (but in AppendDatabaseAction)
- The `ImportAction` opens a dialog for selecting entries. - The ""AppendDataBaseAction"" should not ask for confirmation, but just do it.

We discussed on JabCon 2018 that we should not add popups, but do more ""magic"". Then, the dialog in ImportAction could be deleted.

We used to have ""mark entries"" in JabRef 2.x. This was removed, because we replaced it by groups - and the current JavaFX table cannot show entries not matched by a filter :-\. -- This functionality comes into my mind, because we used to mark imported entries and moved them to the top of the entry table. =||= I was asking, because in JabRefFrame a comment is indicating that those two commands should be merged... (`JabRefFrame.java:681`)

The comment has been introduced with commit 2fc5a347ec36bccb8096e5ac7a89c743228aad1a by @tobiasdiez ( #3684 ). =||= Both actions are more or less the same (at least from a user perspective): Select a file and put everything contained in that file into the current library.

Usually, the import action ""only"" imports entries while the ""append"" also includes metadata (e.g. groups). In my opinion, they can indeed be merged. =||= ""Include ""Append"" functionality in the ""Import Entries Dialog""""Needs testing. @stefan-kolb maybe? 😇 

Fixes #6049.

Co-authored-by: Christoph <siedlerkiller@gmail.com>
Co-authored-by: Tobias Diez <tobiasdiez@gmx.de>
Co-authored-by: Carl Christian Snethlage <50491877+calixtus@users.noreply.github.com>
"Oliver Koppkoppor03/31/20, 08:34:42 PM
6074.06203Add tooltips for all entry types"When creating a new entry or when editing the entry type of an existing entry in a library, it would be useful, if tooltips describe each possible entry type.

The required content of the tooltips could be simply used from the following files:
- entry types in biblatex: http://mirror.easyname.at/ctan/macros/latex/contrib/biblatex/doc/biblatex.pdf (p. 8ff, 2.1 Entry Types)
- entry types in bibtex: http://mirror.kumi.systems/ctan/biblio/bibtex/base/btxdoc.pdf (p. 7ff, 3.1 Entry Types)

**Requirements:**
- A tooltip should contain detailed information for what this entry type is used.
- The information within a tooltip should be self-contained, without the need to look up other external documents and without being linked to other entry types.

The tooltips could be added in the following areas:
- When the ""Select entry type"" dialog is opened (e.g. `Library` > `New entry`)
    - Hovering a button of an entry type should show the tooltip
- When changing the entry type in the entry editor. (left side of the entry editor)
    - Hovering an entry type in the list should show the tooltip
- When right clicking a reference in the main table and clicking `Change entry type`
    - Hovering an entry type in the list should show the tooltip""I'd like to work on that. =||= @dimitra-karadima That would be really great! :) =||= @dimitra-karadima To probably boost your productivity a bit, you could maybe find it useful to grab some ideas from the code of the PR #6046. Simple textual (non-html) tooltips will be sufficient for this PR, thus the lengthy discussion of the linked PR is not that relevant for you. But feel free to implement it as you think it is best for you. :) =||= @systemoperator Thank you for the additional tips. I will take everything into notice and see how it is going to work out in the end. =||= Hey @systemoperator ,
I have been trying to implement the tooltip enhancement in the first option you described, when the ""Select entry type"" dialog is opened. All I have found is that the dialog box opens from the org.jabref.gui.importer.NewEntryAction.java and I tryied implementing a getDescription method as PR #6046 has. But my attempt failed, because the method setTooltip does not work for the NewEntryAction. So, if you have any suggestion on how to fix that or if you know onther class I should put the Tooltip with the getDescription method, it would be really much appreciated! =||= @dimitra-karadima An interesting class is `org.jabref.gui.EntryTypeView.java`. Here you will find

https://github.com/JabRef/jabref/blob/093a6fb1ebd0fbcbd9bcd365bd828273255ca794/src/main/java/org/jabref/gui/EntryTypeView.java#L99

In this method

https://github.com/JabRef/jabref/blob/093a6fb1ebd0fbcbd9bcd365bd828273255ca794/src/main/java/org/jabref/gui/EntryTypeView.java#L122 decides on whether bibtex or biblatex mode is active.

If e.g. biblatex is active, the following line gets executed, which adds the available entries to the pane:

https://github.com/JabRef/jabref/blob/093a6fb1ebd0fbcbd9bcd365bd828273255ca794/src/main/java/org/jabref/gui/EntryTypeView.java#L123

And the full method is:

https://github.com/JabRef/jabref/blob/093a6fb1ebd0fbcbd9bcd365bd828273255ca794/src/main/java/org/jabref/gui/EntryTypeView.java#L89-L96

You can associate a tooltip to a button like that:

```
Tooltip tooltip = new Tooltip();
tooltip.setText(description);
entryButton.setTooltip(tooltip);
``` =||= @systemoperator Thank you so much for your suggestion, I will try that and let you know! =||= Thanks to @dimitra-karadima  this issue should now be fixed =||= "Add tooltips for all entry types for #6074"The pull request refers to issue #6074 by @systemoperator .

Change: Add tooltips in the ""Select entry type"" dialog. You can see the tooltip when hovering a button of an entry type.
Remaining: Add those tooltips in the left side of the entry editor and in the main table when clicking ""Change entry type"".

Fixes #6074 

Still haven't figured it out yet how to implement the remaining stuff, so any help would be much appreciated!
And please let me know what you think of my implementation so far!"dimitra-karadima04/16/20, 06:52:54 AM
6194.06232Allow basic markup syntax in the comments tabCurrently once can write comments within the entry editor. I would suggest to support and highlight basic markdown syntax or generate a comment preview instead of the entry preview in the right pane of the tab.This feature is really great! Finally I don't have to fiddle with html tags and replace formatters to get something similar. An extension to the abstract field would be nice. =||= Allow basic markup syntax custom previews"Add MarkdownFormatter using https://github.com/vsch/flexmark-java/ to format markdown.
To configure Markdown in custom previews add the ""Markdown"" formatter.
Markdown is enabled by default for the comment field as requested in https://github.com/JabRef/jabref/issues/6194

Fixes #6194 

![image](https://user-images.githubusercontent.com/11259344/78190391-35735280-7474-11ea-9f40-7a2191d082d4.png)

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Alexander GirgisAlexanderGirgis04/03/20, 10:17:29 PM
6042.06233Proposed enhancement: Make item count in groups panel an optional feature that can be turned off"The current JabRef 5 dev version has huge performance problems with large databases, e.g.:
https://github.com/JabRef/jabref/issues/5071
https://github.com/JabRef/jabref/issues/5735

The same database (ca. 20,000 items; several thousands of static groups) opened with JabRef 3.8.2 does not display these performance issues.

I wonder whether some of these performance issues could be solved by a simple workaround: Make it possible to switch off the calculation of the number of items in the groups panel. In version 3.8.2 this was possible and was also suggested to do, when having performance problems. Indeed, I switched it off for my database, since otherwise it would not be possible to work with the database due to performance problems.

However, you shouldn't get rid of the background box surrounding the group item account. This box changes colour according to whether an item selected in the main table is part of a group or not, so this information should be available. In the old JabRef version this was achieved by having the name of a group underlined, which contained a selected item.

I think this rather simple (?) change could alleviate some of the performance problems reported previously. In fact, it already did with the old version 3.8.2, so you would expect to see a similar performance increase in the current dev version.""Hi Tobiasdiez,

If possible, I would like to work in this issue. Can you assign it to me?

Gennadiy =||= JabRef 5.1--2020-06-02--46fd96b
Windows 10 10.0 amd64 
Java 14.0.1

I can confirm, that this has been implemented in the current dev version. I am glad to see, that by not displaying the groups item count, the CPU performance required when starting JabRef is much lower, than when the item count is shown. So this has definitely improved performance. Well done!

Note, however, that changing the groups preference ""Display count of items in group"" to enable the item count will not take immediate effect. An item count is shown, but it is zero for all groups. Only if you restart JabRef, the item count of each group will be updated accordingly.
Similarly, if you disable the item count again, the groups item count will be shown until you restart JabRef.
I am not really bothered by this, but I wanted to let you know about it.
 =||= Thank you very much for testing the current dev build. Glad to see that you like the improvement.
Thanks also for the issue report. It is a well known problem, that some preferences only take effect after restarting JabRef. We are already working on it, but as this is a deeper architectural issue, it will take some time to fix. =||= Cheers! Yes, I am not really bothered by this - just restarting JabRef is not much of a hassle to me. But I am really happy to see, that the performance of JabRef (at least when starting JabRef - I have to figure out, whether this also makes any difference when assigning a large number of items to a group) could be improved by this approach. Thanks again for you hard work! =||= "Add disable/enable calculation of items in group"fixes #6042 
This is my first Pull Request to a project (new Java developer). 

**Add:** disable/enable calculation of items in group

I realized that GroupNodeViewModel.java class uses method ""calculateNumberOfMatches"" to get number of items. Looks like it uploads full database from disk every time you need to calculate No of items in group. Therefore, if you have 1 thousand groups, it will read the entire database 1 thousand times. 

UI changes:
- added new checkbox in Preferences/Groups - ""Display quantity of items in group"";
- added new property DISPLAY_GROUP_QUANTITY to JabRefPreferences.java file;
- connected new checkbox with JabRefPreferences.java. I used another preferences as a sample;

Logic changes:
- I added link to JabRefPreferences in GroupTreeView class. 
If user wants to display groups quantity, a panel with quantity will be shown. Quantity is calculated when GroupNodeViewModel class is initialized, so I decided to wrap a panel into an ""if"" statement.

Tests passed. "GennadiyGena92804/05/20, 01:17:01 PM
6170.06242Imported open office jstyle files disappear when re-starting JabRef (Windows10)"Hello JabRef team,

JabRef version 5.1 23 March 2020 on Windows 10 Intel i7 x86_64 Java 1.8.0_241


- [x] I have tested the latest development version (5.1) from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. ... load style file (select style file -> add style file)
2. ... work with your own style file
3. ...save work and close JabRef
4. ... open JabRef: added style files are missing (just the 2 internal default style files remain)

Complimentary bug:
1. ... load style file (select style file -> add style file)
2. ... work with your own style file
3. ...save work and close JabRef
4. ... open JabRef: added style files are missing (just the 2 internal default style files remain)
5. ... reload a custom style file: sometimes they are not working anymore""Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Hello, 
I will try and let you know. 
Many thanks! 
Grégory 

> De: ""Christoph"" <notifications@github.com>
> À: ""JabRef/jabref"" <jabref@noreply.github.com>
> Cc: ""GREGORY BIEVRE"" <gregory.bievre@univ-grenoble-alpes.fr>, ""Author""
> <author@noreply.github.com>
> Envoyé: Dimanche 5 Avril 2020 18:43:40
> Objet: Re: [JabRef/jabref] Imported open office jstyle files disappear when
> re-starting JabRef (Windows10) (#6170)

> Thank you for reporting this issue. We think, that is already fixed in our
> development version and consequently the change will be included in the next
> release.

> We would like to ask you to use a development build from [
> https://builds.jabref.org/master | https://builds.jabref.org/master ] and
> report back if it works for you. Please remember to make a backup of your
> library before trying-out this version.

> —
> You are receiving this because you authored the thread.
> Reply to this email directly, [
> https://github.com/JabRef/jabref/issues/6170#issuecomment-609445677 | view it
> on GitHub ] , or [
> https://github.com/notifications/unsubscribe-auth/AJWPAKYUD2W4KJWPKCHKUM3RLCYLZANCNFSM4LR4JW3A
> | unsubscribe ] .

-- 
Université Grenoble Alpes 
Institut des Sciences de la Terre 
CS 40700 F-38058 Grenoble cedex 9 
Tel : +33 (0)4 76 63 51 73 
www. isterre.fr/gregory-bievre 
 =||= The upload to the server just finished. =||= I did not manage to make either builds.jabref.org/master/JabRef-5.1-portable_windows.zip or builds.jabref.org/master/JabRef-5.1.msi work. 
I went back to version 5.0 and it works (except for the bug that I have not been able to test). 
I maybe missing something with windows which I am discovering. 
Grégory 

> De: ""Christoph"" <notifications@github.com>
> À: ""JabRef"" <jabref@noreply.github.com>
> Cc: ""GREGORY BIEVRE"" <gregory.bievre@univ-grenoble-alpes.fr>, ""Author""
> <author@noreply.github.com>
> Envoyé: Dimanche 5 Avril 2020 18:51:08
> Objet: Re: [JabRef/jabref] Imported open office jstyle files disappear when
> re-starting JabRef (Windows10) (#6170)

> The upload to the server just finished.

> —
> You are receiving this because you authored the thread.
> Reply to this email directly, [
> https://github.com/JabRef/jabref/issues/6170#issuecomment-609446672 | view it
> on GitHub ] , or [
> https://github.com/notifications/unsubscribe-auth/AJWPAK5AZFJ653SMHFIPWITRLCZHZANCNFSM4LR4JW3A
> | unsubscribe ] .

-- 
Université Grenoble Alpes 
Institut des Sciences de la Terre 
CS 40700 F-38058 Grenoble cedex 9 
Tel : +33 (0)4 76 63 51 73 
www. isterre.fr/gregory-bievre 
 =||= Thanks for reporting, I just discovered this as well. Sorry for the inconvience.

 =||= No problem.
Let me know when it is OK and I will be happy to test the fix.
Grégory =||= For reference, I created a new issue with this problem: #6246 =||= Hello JabRef Team, 
I have just tested the master JabRef-5.1.msi and both bugs have been fixed. 
I, however, cannot import my previously custimozed style files (that I used with previous versions; now it says ""you need to import a valid style file"") and need to make them again (I tested this and it seems to work fine, they are kept in Jabref after restarting the software). 
Thanks for the job. 
Grégory 

> De: ""Christoph"" <notifications@github.com>
> À: ""JabRef"" <jabref@noreply.github.com>
> Cc: ""GREGORY BIEVRE"" <gregory.bievre@univ-grenoble-alpes.fr>, ""Author""
> <author@noreply.github.com>
> Envoyé: Dimanche 5 Avril 2020 18:51:08
> Objet: Re: [JabRef/jabref] Imported open office jstyle files disappear when
> re-starting JabRef (Windows10) (#6170)

> The upload to the server just finished.

> —
> You are receiving this because you authored the thread.
> Reply to this email directly, [
> https://github.com/JabRef/jabref/issues/6170#issuecomment-609446672 | view it
> on GitHub ] , or [
> https://github.com/notifications/unsubscribe-auth/AJWPAK5AZFJ653SMHFIPWITRLCZHZANCNFSM4LR4JW3A
> | unsubscribe ] .

-- 
Université Grenoble Alpes 
Institut des Sciences de la Terre 
CS 40700 F-38058 Grenoble cedex 9 
Tel : +33 (0)4 76 63 51 73 
www. isterre.fr/gregory-bievre 
 =||= @GregBievre  Thanks for your feedback. the style is now checked for validity. Please ensure that the style is for example is stored with UTF8 encoding =||= "Fix storing of custom jstyles"Fixes #6170
Rename method for internalStyle

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues by using the following pattern: #333.
If you fixed a koppor issue, link it with following pattern: [koppor#47](https://github.com/koppor/jabref/issues/47).
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- All items with `[ ]` are still a TODO.
- All items checked with `[x]` are done.
- Remove items not applicable
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."ChristophSiedlerchr04/05/20, 04:24:36 PM
5740.06248[WIP] Added number of items found"I added the a label showing the number of items found. I will continue working on the selected items in another commit.

- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)

Example image (look at the bottom):
![image](https://user-images.githubusercontent.com/44125174/70671635-f063b000-1c39-11ea-9ed6-6aef9b3969e5.png)

""Happy new year to everyone!

@CloudFenrir May I ask whether you could find some time to finish this contribution? =||= Sadly, we did not hear from @CloudFenrir anymore. As we like this feature, we decided to adopt this PR. =||= "Number of items found in ImportEntriesDialog"This PR finishes the abandoned PR from CloudFenrir (closes #5740).

![grafik](https://user-images.githubusercontent.com/50491877/78508642-ab373100-7788-11ea-951e-27c1687aeb80.png)

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>."Carl Christian Snethlagecalixtus04/13/20, 01:39:15 PM
6229.06258Fetching from inspire"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0/5.1<!-- version as shown in the about box --> on Windows 10<!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. select inspire from web search, enter hep-ph/9802379, hit search button
2. get ""processing hep-ph/9802379"" and nothing comes out.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<!--<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>-->

I don't know how to open error console in Windows but I suspect this problem has something to do with the new inspire beta (and the old inspire is now old.inspirehep.net). ""Confirmed. The import entries window doesn't show anything because no entries were returned (an empty list), The fetcher fails.
 =||= [INSPIRE got a new website](https://blog.inspirehep.net/2020/03/the-next-inspire-generation-is-here/) recently, changing `INSPIRE_HOST` to `https://old.inspirehep.net/search` would probably work but only until June (2020):

    https://old.inspirehep.net/search?rg=100&of=hx&p=hep-ph/9802379

There does seem to be an unofficial (or undocumented) API (use `Accept: application/x-bibtex`):
    
    https://inspirehep.net/api/literature/?q=hep-ph/9802379

As for the official API, they say to contact them to add features:

> At the same time, we are working on a new public JSON API and we are currently investigating the community needs: the information and features you would like to see in the new API, the applications you have in mind, and how these could be integrated with INSPIRE. Contact us at <feedback@inspirehep.net>.
 =||= I contacted the INSPIRE team regarding the API Waiting for response now.  In the meantime I implemented the bibtex header solution. =||= @larsgw  FYI: Just got mail from the INSPIRE team, they now have an official API:
https://github.com/inspirehep/rest-api-doc =||= "Fix inspire fetcher"Use application/x-bibtex header
Fixes #6229

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr04/14/20, 07:37:26 AM
333.06258Code for icons"Where do I find the code needed for an icon, e.g. where does `""\uf494""` comes from?

``` java
ADD(""\uf494"") /*css: plus-box*/
```

(Background: I want to show the FOLDER(""\uf07b"") icon, but it is now showing...so probably the identifier is wrong.)""We are using the IconFont MaterialDesignIcons (int the `*.ttf` version) provided by https://materialdesignicons.com/.

The code `""\uXXXX"" is the unicode representation of the icon to be used. You can determine the unicode either using _CharMap_ tools or by searching for ""folder"" in the ""materialdesignicons.css"" available at https://codeload.github.com/Templarian/MaterialDesign-Webfont/zip/master

However, the code for ""folder"" is correct, as Icon is already used as the Icon for ""Open"" in the toolbar.
 =||= Thanks this helps and solves my problem! (although I still don't understand how the values in the css file correspond to the unicode representation in Jabref...)
 =||= "Fix inspire fetcher"Use application/x-bibtex header
Fixes #6229

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr04/14/20, 07:37:26 AM
6169.06264""":PDF"" will not show the pdf icon in the ""JabRef version JabRef 5.1--2020-03-10--43f533b on Windows 10 10.0 amd64 Java 13.0.2

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Add a file to General => File, which will add a file field looking like 
   `file      = {:STAT/aa.pdf:PDF},`
2. It will show an unrecognized file type icon in the linked files column instead of the pdf type icon (although it will open the pdf file using the proper reader)
3. Change it to `file      = {:STAT/aa.pdf:pdf},`, the pdf type icon will be shown.""Thanks for your report, looks like this was missed in #6119 =||= Hi, We're a team of 5 students currently attempting to make our first open-source contribution, and we want to firstly work on this bug

We have reproduced this bug successfully. Because it is our first time trying to participate in this project. I would be grateful if any hint can be provided. And I am trying to get more familiar with this project. A question is, how long could we take to fix this bug?  =||= Thanks for your interest in contributing to JabRef!
Please follow our contribution guide https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md

There is no hurry in finishing. Take your time to make yourself familiar with the code. Just create a PR with your changes early on, so we can provide constant feedback.
Code wise, as a hint you should check the pr I linked in the comments which probably introduced this bug =||= Ok, I will check the material carefully.

""Just create a PR with your changes early on"" means that we can create a PR before we fix the bug and let you know our progress or comment on our code?
Thanks for your reply, I will check the PR you linked carefully =||= @leitianjian Yes! You can create a PR even if you haven't fixed the bug in order to get a feedback on your code! Check the draft PRs: https://github.blog/2019-02-14-introducing-draft-pull-requests/
 =||= @dimitra-karadima Thanks for your reply and sorry for my late comment. I am working on it, If there are some difficulties I cannot solve, I will create a PR and get some feedback =||= Hi, I have fixed the bug of the icon. Please check my draft pull request, thanks =||= See also my comment in https://github.com/JabRef/jabref/pull/6264 =||= Thanks to @leitianjian (and his crew) this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Showing correct icon on main table linked files column"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6169 

Hello, I have fixed the bugs that appear in the icon of the linked file column. I create a draft pull request. If there are breaking any contribution rules, please let me know. If everything is ok, I will create a pull request then. 

I have tested to import some format of doc, just a simple test of .docx, .pptx and .pdf format files.
![image](https://user-images.githubusercontent.com/31007740/78802067-f30bc180-79ef-11ea-87bc-d6859b2c77b4.png)

About the source code, I have a question: 
I found the wrong icon still shows in the General -> Files list, which only shows pdf icon no matter what format of files attached. Then I found org.jabref.gui.fieldeditors.LinkedFileViewModel#getTypeIcon() which directly indicate the icon to pdf, which seems like the source of the bug. There is a TODO comment above, which seems like this bug has already discovered. Then I went through the issue list and tried to find some relevant thing to this bug (TODO), but nothing found. I would be happy if you can provide more info about it. Thanks, ^_^
![image](https://user-images.githubusercontent.com/31007740/78802219-28181400-79f0-11ea-8ca8-c025b8515d8b.png)

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tianjian leileitianjian04/15/20, 12:15:03 PM
6266.06269Import into current libarary issues wrong message"This is with version 5.1 (current).

When one chooses ""import into current libary"" from File-->Import menu and opens a
new bib file and go ahead with import you first get a message ""import cancelled"" and
a few seconds later ""import complete"". Import is done properly but the erreneous
message ""import cancelled"" should not be there.""Hey! I am a first-time contributor. I have successfully reproduced this issue. May I take a stab at it? =||= This is a duplicate of #4841. However, there is already a possible solution outlined in the comment:
of https://github.com/JabRef/jabref/issues/4841#issuecomment-486271379
@jcampbell11245  So feel free to take it! Please read the  [Contribution guidelines](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) =||= Will do. Thank you! =||= I attempted to implement the outlined solution but I believe changing the return type would require modifying the Dialog.java class, which I am unable to do because it is read-only. =||= The idea is to modify the the return type of the import Dialog class. You can modify the parameter in the extends clause and then change the result converter to return boolean  =||= Oh ok, I see now. Thank you. =||= "Fix import into current library issuing wrong message"This change fixes #6266 in which an erroneous message ""import canceled"" is displayed when importing into the current library. This fix was accomplished by modifying the parameter of the extends clause of the ImportEntriesDialog class to have a return type of Boolean rather than Void and making setResultConverter return false rather than null.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonathan Campbelljcampbell1124504/13/20, 03:11:36 PM
6065.06272RIS import takes the wrong date and duplicates abstract"
JabRef 4.3.1
Windows 10 10.0 amd64 
Java 1.8.0_172

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem (partially) persists

<!-- Add a clear and concise description of what the bug is. -->
Publication date taken from the wrong field and the abstract is the concatenation of two fields importing a RIS file.

Steps to reproduce the behavior:
1. Import the following RIS file (from the [Neurons](https://www.cell.com/neuron/fulltext/S0896-6273(16)30707-3?_returnURL=https%3A%2F%2Flinkinghub.elsevier.com%2Fretrieve%2Fpii%2FS0896627316307073%3Fshowall%3Dtrue) journal):
```
TY  - JOUR
T1  - Grid Cells for Conceptual Spaces?
AU  - Kriegeskorte, Nikolaus
AU  - Storrs, Katherine R.
Y1  - 2016/10/19
PY  - 2016
N1  - doi: 10.1016/j.neuron.2016.10.006
DO  - 10.1016/j.neuron.2016.10.006
T2  - Neuron
JF  - Neuron
SP  - 280
EP  - 284
VL  - 92
IS  - 2
PB  - Elsevier
N2  - ?Grid cells? encode an animal?s location and direction of movement in 2D physical environments via regularly repeating receptive fields. Constantinescu et al. (2016) report the first evidence of grid cells for 2D conceptual spaces. The work has exciting implications for mental representation and shows how detailed neural-coding hypotheses can be tested with bulk population-activity measures.
AB  - ?Grid cells? encode an animal?s location and direction of movement in 2D physical environments via regularly repeating receptive fields. Constantinescu et al. (2016) report the first evidence of grid cells for 2D conceptual spaces. The work has exciting implications for mental representation and shows how detailed neural-coding hypotheses can be tested with bulk population-activity measures.
SN  - 0896-6273
M3  - doi: 10.1016/j.neuron.2016.10.006
UR  - https://doi.org/10.1016/j.neuron.2016.10.006
Y2  - 2020/03/04
ER  - 
```
2. The publication date is taken from the `Y2` field, not from the correct `Y1` field. This has been fixed in 5.0 portable.
3. The abstract field is the concatenation of the AB and N2 fields.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Hi, I would like to contribute to this issue, I am new in open source development.  =||= @sksonalkothari  Thanks for your interest and welcome to JabRef!
Please read through the [Contribution Guidelines and set up a workspace](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md)

For this issue the relevant code is located in the file: src/main/java/rg/jabref/logic/importer/fileformat/RisImporter.java


 =||= Hi @Siedlerchr, I did as given in guidelines-for-setting-up-a-local-workspace. And I could successfully run the application. But I could not debug through Eclipse. Its giving me error. I even checked the Gitter group chat for this issue, It seems many people had this one. 
But yaa, I went and checked the file which u suggested src/main/java/rg/jabref/logic/importer/fileformat/RisImporter.java
Code seems good, it has a dateTags list, which stores all the date tags from highest to lowest priority (""Y1"", ""PY"", ""DA"", ""Y2""). So if we have some date with Y1, it will be seen on the UI. And I confirmed this on UI. We get the Y1 date.
![image](https://user-images.githubusercontent.com/51846416/76201815-df671280-6219-11ea-96c0-ae19ac535c09.png)
![image](https://user-images.githubusercontent.com/51846416/76201899-045b8580-621a-11ea-90ec-0883ff5b557c.png)

For the other concern related to Abstract field, code says that abstract is the concatenation of two fields (N2+AB).
`else if (""N2"".equals(tag) || ""AB"".equals(tag)) {
         String oldAb = fields.get(StandardField.ABSTRACT);
         if (oldAb == null) {
                   fields.put(StandardField.ABSTRACT, value);
         } else {
                  fields.put(StandardField.ABSTRACT, oldAb + OS.NEWLINE + value);
         }
 }`
I didn't get the requirement, what needs to be done here. =||= @sksonalkothari  Sorry for the delay. It seems the abstract should only be taken from either the field
AB or the fields N2 instead of concatenation.
So if, AB is empty, take N2 
 =||= Thanks to @Gena928 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= The abstract problem seems solved.

But

In the new version the biblatex library indicator disappeared and I remember was easier in the 4.x version to set this mode. Should I open another issue for this?

Thanks for your work!
mario =||= @crystalfp  That can be changed in Library Properties =||= "RIS import takes the wrong date and duplicates abstract"Fixes #6065 

1. Fixed an issue with ""duplicate values in 'Abstract field';
2. Checked code and couldn't reproduce second error: ""publication date is taken from the Y2 field, not from the correct Y1""
See lines 207-220 of `RisImporter.java`. It works fine and importing publication date as expected. Tested on file from @crystalfp (see file, attached to issue).

Kind regards,
Gennadiy

- [X] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."GennadiyGena92804/14/20, 08:12:45 PM
6285.06290Copy -> Export to Clipboard: Custom exports not a"JabRef 5.0--2020-03-06--2e6f433 (Portable)
Windows 10 10.0 amd64 
Java 13.0.2

I have several Custom Exports defined, and they word as intended via File -> Export.
However, when right-clicking on an entry in the entry table, and going for ""Copy..."" -> Export to clipboard,  the Custom Exports are not visible. This worked fine in earlier JabRef versions (e.g  3.4.1)

Screengrab below: the red part shows default export formats to choose from, but the Custom Exports are not available in the pull-down menu.

![Untitled](https://user-images.githubusercontent.com/20792626/79214335-f4ebdf80-7e4a-11ea-8b91-77288dcb3edc.jpg)""Hi,
I take a quick look in the code and currently only exporters with the following extensions can be used.  My custom exporters (xml and html etension) are listed there correctly.

https://github.com/JabRef/jabref/blob/3bc1f0236cdfef81cb36ebce23f9350b1615928e/src/main/java/org/jabref/gui/exporter/ExportToClipboardAction.java#L37 

 =||= Ah, that helps. I had my exporter defined as ""RTF"".  After changing to ""rtf"" all was working well. 

So for me this issue is closed, but a suggestion would be to make the code more robust with respect to this point. Or at least explicitly state that the extension should be 'no caps' in the manual, like here:

[https://docs.jabref.org/import-export/export/customexports#adding-a-custom-export-filter](https://docs.jabref.org/import-export/export/customexports#adding-a-custom-export-filter) =||= @jhh931  Thanks for the feedback! Before I close this issue I want to check why it actually filters for those file types ( I currently see no reason why) or to make at least the file extensions case insensitive.
 =||= This issue should be now fixed in the latest master. File  Extensions are now converted to lower case automatically. =||= "Fix selecting custom export for copy to clipboard with uppercase file ext"Fixes #6285

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/01/20, 10:13:45 AM
6295.06300dash should not be reported as illegal BibTeX-Key"> JabRef 5.1--2020-03-23--67daf36
> Windows 10 10.0 amd64 
> Java 14

Steps to reproduce the behavior:
BibTeX-Key conaining dashes are reported as illegal BibTeX-Key
![Screenshot 2020-04-16 12 09 28](https://user-images.githubusercontent.com/15687581/79444408-6bb7e280-7fdb-11ea-9c28-32cca6ad8202.png)

But according to @Siedlerchr in https://github.com/JabRef/jabref/issues/4709#issuecomment-468700259
> Well, dash is a perfectly legal char in a bibtex/biblatex key: Forbidden are only these symbols: `"" # % ' ( ) , = { }`""Duplicate of #6252 and refs  #6257

I don't know why we added the dash to the list of illegal chars, although it's legal I think
 =||= It was introduced in https://github.com/JabRef/jabref/pull/4713, and released in JabRef 5.0. =||= "Remove dash from illegal characters."Fixes #6295, Fixes #6257, Fixes #6252.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Grzegorz Popieldextep05/06/20, 01:27:05 PM
6257.06300bibtexkey: 2 more incompatible characters"Currently, src/main/java/org/jabref/logic/bibtexkeypattern/BibtexKeyGenerator.java
states 
````
KEY_ILLEGAL_CHARACTERS = ""{}(),\\\""-#~^:'`ʹ"";
````
This list of characters is used to display a warning for the field bibtexkey.

Following issue #5982, I digged a bit further about the incompatible characters in a bibtexkey.
According to https://tex.stackexchange.com/questions/408530/what-characters-are-allowed-to-use-as-delimiters-for-bibtex-keys , for biber, `%` and `=` should not be used, and hence be added to the illegal characters."Fixed by https://github.com/JabRef/jabref/pull/6300. Will be in latest `master`. =||= Remove dash from illegal characters."Fixes #6295, Fixes #6257, Fixes #6252.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Grzegorz Popieldextep05/06/20, 01:27:05 PM
6252.06300Dash in bibkey"Hi
I'm curious. Before (I'm not sure which version), dash was added in the bibtex and now striped out. Obvious example is the author name, like Smith-Thomson.
I didn't check option to ""autorize only legal character"". 
Thanks
Mel

JabRef 5.0--2020-03-06--2e6f433
Linux 4.15.0-91-generic amd64 
Java 13.0.2"Duplicate of #6295, therefore closing this. =||= Remove dash from illegal characters."Fixes #6295, Fixes #6257, Fixes #6252.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Grzegorz Popieldextep05/06/20, 01:27:05 PM
5759.06306Add JabRef logo as tiff for Mac OS installer (retina support)"The jpackage tool has now the option to provide a tiff with high resolution for Mac OS retina 
displays. JabRef should also provide a high resolution image.

Refs: https://bugs.openjdk.java.net/browse/JDK-8234284

Some tutorials. It seems to be someone with a mac is required.

https://computers.tutsplus.com/tutorials/how-to-create-a-retina-ready-dmg-based-app-installer--cms-21653

https://developer.apple.com/library/archive/documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html""@Siedlerchr 
if I understand correctly, you need a Tiff file with 2 images: hi res & low res. As stated in this video https://computers.tutsplus.com/tutorials/how-to-create-a-retina-ready-dmg-based-app-installer--cms-21653 - scroll to 4:27

Correct? =||= @Gena928  Exactly. You can find the original tiff here:
https://github.com/openjdk/jdk/blob/master/src/jdk.incubator.jpackage/macosx/classes/jdk/incubator/jpackage/internal/resources/background_dmg.tiff

I have attached our JabRef Logo: Maybe you can  integrate or design a new picture with JabRef's logo in it. That would be cool
[jabref_logo_without-bg.zip](https://github.com/JabRef/jabref/files/4471781/jabref_logo_without-bg.zip)

 =||= @Siedlerchr 
I have some design problems. ))) Give me a few days, I'll try to create something normal.
[Google drive folder with sample image](https://drive.google.com/drive/folders/1QX8ujHrA03p-3u8a6UEPO31pmGaUtJn0?usp=sharing)

 =||= Yeah looks already good! Thanks for stepping in. Take your time. It's not a critical issue 😎 =||= @Siedlerchr 
please see sample images in ""All screenshots"" folder: [Google drive folder with samples](https://drive.google.com/drive/folders/1QX8ujHrA03p-3u8a6UEPO31pmGaUtJn0)

Any comments a highly appreciated. Design is very sensitive area, so if you think you need more options from other people, let's wait for more contributors for this issue.
 =||= Thank you very much for your work proposals! I pinged the other devs for a quick look.
@JabRef/developers  =||= Thanks @Gena928, they screenshots look really good. I like the ""Simple with comment"" the most. Some comments:
- Having the JabRef icon twice feels a bit too much. I would remove the big one at the top.
- Is it possible to make the icons at the bottom a bit larger?
- The arrow is a bit ""fancy"". Can you replace them with a somewhat simpler one?
- The font color and family should match the one we use in our flyers. I.e. ""JABREF"" should be blue, and the ""To install, ..."" text black. @stefan-kolb which font did you used? 
![flyer](https://pbs.twimg.com/media/DY-mY-gWkAEdusZ?format=jpg&name=4096x4096)

I liked the following ones:
![firefox](https://support.snapstream.com/hc/article_attachments/360013903974/687474703a2f2f692e696d6775722e636f6d2f6c6153423432782e706e67.png)
Without the ""firefox"" below the icon and with an installation note as in
![moro](https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/14025196417/original/ixHkRBRHLff1dFpb-VRx6hw5O8ldAOIaqA.png?1514514325) =||= > @stefan-kolb which font did you use?

https://www.dafont.com/de/bebas-neue.font =||= @stefan-kolb 
Sorry, simple ""Bebas Neue"" or maybe ""Rounded"", ""by FontFabric""?
[https://fonts.adobe.com/foundries/dharma-type](url) =||= Added 2 new samples:
- Simple Bebas Neue font (w bg).png
- Simple Bebas Neue font.png
 =||= @Gena928  Toe me the Bebas variant without a background is the best. Matches the flyer =||= Wow, that looks nice. I agree with @Siedlerchr that the Bebas layout with the white background looks the best. One small remark: I think it should be ""to **the** Applications folder"" in the description.
 =||= OK, the image is updated. Source files are located in ""Simple Bebas Neue font"" folder.

When I created dmg install file, I used the following settings:
- JabRef & Applications icons are of 84 size (dmg file properties);
- font size of JabRef icon & Applications icon - 12 px;

Any more comments are welcome.  =||= Perfect! I think you can go ahead and create the PR. =||= PR created.
Is it OK if I attach images in PR comment as ZIP file? =||= Thanks to @Gena928 this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Added JabRef logo as tiff for Mac OS installer (retina support) #5759"Fixes #5759 
Created JabRef logo as tiff for Mac OS installer (retina support). Tiff file for installer and it's png images:
[masOS install images.zip](https://github.com/JabRef/jabref/files/4494556/masOS.install.images.zip)

Settings for icons in Mac dmg install package:
- JabRef & Applications icons are of 84 size (dmg file properties);
- font size of JabRef icon & Applications icon - 12 px;


Comments
- [X] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."GennadiyGena92804/18/20, 08:54:13 AM
6293.06313Paste button on maintable does not work properly "JabRef 5.1--2020-04-12--771af5d
Linux 5.4.19-050419-generic amd64 
Java 14

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Open two different bibfiles (A and B) with a couple of entries
2. Select and copy one or more entries from the entry table of file A (via `Ctr-C` or via the `Copy` button).
3. Switch to the entry table of file B.
4. Use the `Paste` button.
5. (For me) The entry is not inserted in file B.
6. Use `Ctr-V` instead and the entry is inserted in file B.""JabRef 5.1--2020-04-14--e86d415
Windows 10 10.0 amd64 
Java 14.0.1

Can confirm this issue. =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.1--2020-04-20--bc57d22
Windows 10 10.0 amd64 
Java 14.0.1

I can confirm, this has been fixed in the current dev version. =||= JabRef 5.1--2020-04-20--d9fe981
Linux 5.4.19-050419-generic amd64 
Java 14.0.1

Can confirm, too. Thanks for the fix.  =||= Let's follow the mac related issue in #6419 . =||= We had to revert this fix as it is breaking copy pasting via keyboard shortcuts and results in duplicate entries on mac when you paste in a new library. Codewise this seems to be a general issue =||= The problem is that on MacOSX the command + v triggers the keyEvent which is handled in MainTable and consumed.
However, afterwards it still propagates to the owner of  the keybinding, the EditAction which then is triggered like if someone had pressed the MenuItem manually.
Seems to be this bug: https://bugs.openjdk.java.net/browse/JDK-8205915 =||= Decision: Disable in the code only for Mac (MainTable KeyHandler) - to get it working on Windows and Linux again. =||= I've just added an update to #6740  =||= 😫 =||= > I've just added an update to #6740

Thanks for your update. We'll look into it. =||= I guess the problem is that it doesn't work when the focus is not on the maintable,
probably sufficient to remove the second if
 https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/edit/EditAction.java
 =||= I see, can anyone using Linux confirm this issue still being there? =||= Also I noticed that the paste bug in macos is now present in the TextField. I think wee need to disable it there. =||= Fixed in master, will be included in the v5.1 release. Should be released in a few hours. =||= JabRef 5.1--2020-08-30--e023aa0
Windows 10 10.0 amd64 
Java 14.0.2

Paste button does not function. Neither does ^v. =||= @jhh931 What did you copy? I tried copy from the maintable and paste into it. =||= JabRef 5.1--2020-08-30--e023aa0
Linux 5.4.19-050419-generic amd64 
Java 14.0.2

Copy and paste per button and per keyboard shortcuts works for me under Linux. 
However, what I can't seem to do: Copy by keyboard and paste by button, vice versa. So, as long as you stay with one method, it seems to work. (for me) =||= Hey - I got some fresh new insights. Steps to reproduce: 

1. Open two different bibfiles (A and B) with a couple of entries
2. Select and copy one or more entries from the entry table of file A (via Ctr-C or via the Copy button). (GUI says: ""Copied x entries"")
3. Switch to the entry table of file B (by clicking on the tab)
4. Right now, ^v does not work. Paste button does not work. 
5. Click _below_  the tab of file B (e.g. on the header row or in any row with an entry). 
6. Now ^v does paste the copied entries into B. So does the Paste button.

 =||= We probably need to remove the if for the focus owner check for maintable and assume the maintable as default if not text input control
@calixtus  =||= This issue should now  be finally fixed in the new master.
https://builds.jabref.org/master/ =||= "Fixed missing paste command"fixes #6293 

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus04/19/20, 08:51:30 PM
4373.06315manually defined multiline fields in entry editor do not work"This is 
JabRef 5.0-dev--snapshot--2018-10-14--master--73ec32189
Linux 4.18.12-200.fc28.x86_64 amd64 
Java 1.8.0_172

In this and prior dev versions, I seem not be able (anymore) to define multiline fields in the entry editor. I used to have defined an own general field with multiline content; but now this is not shown as such any more. Only, I guess pre-defined, fields like ""Abstract"" are shown as multiline fields.""just for reference - I am referring to those fields I defined in
JabRef 4.3
Linux 4.18.12-200.fc28.x86_64 amd64 
Java 1.8.0_172

at JabRef preferences | File ""Do not wrap the following fields when saving"" =||= Hi everyone! Has this been resolved for the now released version 5.0? I just installed it and all the manual linebreaks are gone despite the respective list. What seems odd: They are only missing in the ""annote""-field, while everything is fine in ""abstract"" or ""comment"". Does anyone have an idea? Thank you! =||= I confirm:
JabRef 5.0--2020-03-08--93de138
Linux 5.5.7-200.fc31.x86_64 amd64 
Java 13.0.2
the issue is not solved. =||= I looked into the code and it's hardcoded for abstract and comment:
https://github.com/JabRef/jabref/blob/b5002e041d587ffb997e946f55daa9f8bdb438d4/src/main/java/org/jabref/model/entry/field/FieldFactory.java#L142-L149

As the ""Do not wrap fields"" aka multine are already stored in the preferences as part of the `FieldContentFormatterPreferences` it can be used.

1. Pass the preferences down to the above method and check the list
2. If it's in the list => multiline
3. Otherwise single line =||= I am terribly sorry, but I would love to insist that this is an issue that is really preventing me from using jabref well. This bug prevents me from using all my manually defined multiline fields. Please, please add it to the agenda for v5.1 again ;) - and lots of health and good spirit in the hard covid19 times! =||= May I asked why this has been removed from the agenda? For myself, JabRef is unusable at the moment since all my annotations are shredded upon saving a file in 5.0, so I had to move to manually editing bibtex files … =||= We created a simple temporary solution for this issue: In the Preferences add the fields to the list of ""do not wap"". 
Should be available in latest master in half an our so.
I created a follow up issue to create a better solution #6448 =||= Thank you so much, this temp fix boosts productivity enormously! =||= "Make wrap fields also visible in entry editor"Fixes #4373

I simple reused the FieldFormatterPreferences wrapFieldList. More like a hack.
The original multiline property got removed in #5230
A more elegant solution would be to maybe add this to the custom entry types dialog?


<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/08/20, 06:07:33 PM
6307.06330"""Add subgroup"" dialog should not start with focus on OK button""Using JabRef 5.0, when one creates a subgroup (right clicking on a group and choosing ""Add subgroup""), the dialog ""Add subgroup"" is shown, and it has focus on ""OK"" button. That seems to be wrong, for there seems to be no reason to press that button at that time. I'd say that field ""Name"" should have focus when the dialog is created, for name is required for subgroup anyway.""I want to commit to this issue. Are there any code files I should change? =||= @HussainArif12  Thank for your interest. The relevant code file is here:
https://github.com/JabRef/jabref/blob/8b7c374530786bf9e32a1d21dc7cb8bb494c2cd2/src/main/java/org/jabref/gui/groups/GroupDialogView.java

Please also take a look at our [Contribution Guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) =||= Thanks to @HussainArif12  This issue should be fixed now in the latest master. Should be available in half an our or so.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= It works

On Tue, Apr 21, 2020, 11:57 AM Christoph <notifications@github.com> wrote:

> Thanks to @HussainArif12 <https://github.com/HussainArif12> This issue
> should be fixed now in the latest master. Should be available in half an
> our or so.
>
> We would like to ask you to use a development build from
> https://builds.jabref.org/master and report back if it works for you.
> Please remember to make a backup of your library before trying-out this
> version.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/6307#issuecomment-616991422>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AIKA3XBTO6RIKGKYZNHTODLRNU7UXANCNFSM4MLE6ULA>
> .
>
 =||= "'Name' textfield on focus instead of 'OK' button when user clicks on 'Add subgroup' option"Fixes  : #6307
Name area on focus instead of button whenever user clicks on 'Add subgroup' option

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.


I have addressed the changes. 
Also can you tell me how do we amend commits on git?
Thank you"Hussain ArifHussainArif1204/21/20, 06:55:45 AM
6286.06345Copy... -> Export to clipboard Dialog has no icon"Select an entry in the main table
1. Right click -> Copy... -> Export to Clipboard 

See that there is no icon. This results in the standard java icon shown in the task bar on windows

5.1 master
![grafik](https://user-images.githubusercontent.com/320228/79217031-6da06b00-7e4e-11ea-82f9-650100f7fbf8.png)


![grafik](https://user-images.githubusercontent.com/320228/79217084-86a91c00-7e4e-11ea-9127-b86243492f6d.png)""Hello, I would like to inquire if I could contribute by fixing this issue. =||= @MootezSaaD  Sure. The dialog should be called somewhere in  `org.jabref.gui.exporter.ExportToClipboardAction`  =||= Hello,
Sorry for the delay, I have tried to convert the ExportToClipboard to mvvm-pattern, this is the dialog

![image](https://user-images.githubusercontent.com/34676841/80277864-40777680-86f2-11ea-8f16-8de5d588f82d.png)

What I have done is I created `ExportToClipboardViewModel` and `ExportToClipboardDialogView` and `ExportToClipboardAction`  now calls `ExportToClipboardDialogView` .
Is it fine to make a draft PR ? =||= @MootezSaaD  Oh wow, well, that would be a solution, but I fear that you have ""overengineered"" in this case. Maybe I also did not specify it better, but if you look into the JabRefDialogService class, there the dialog is created  by using the standard ChoicedDialog component.

I think the solution would be just a one liner as in the ProgressDialog:
`        ((Stage) progressDialog.getDialogPane().getScene().getWindow()).getIcons().add(IconTheme.getJabRefImageFX());`
 =||= Oh then that settles it, thank you @Siedlerchr  =||= See your other work not as wasted, but as a good training that enables you a good understanding of the Gui in jabref and hopefully you are interested in fixing other issues as well.  =||= Absolutely! 
Thank you again for the assistance =||= "Fix Export to clipboard Dialog icon"Fixes #6286 

![image](https://user-images.githubusercontent.com/34676841/80279600-1d9f8f00-86ff-11ea-8067-5f7cb22265e4.png)


- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [X] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mootez SaadMootezSaaD04/25/20, 03:50:08 PM
6370.06371Missing validation when generating new entry"- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
When the ID field is left blank and the user clicks on the Generate button, an NPE would be thrown
Steps to reproduce the behavior:
1. Library
2. New Entry
3. Leave ID field blank
4. Click on Generate

Maybe disabling the Generate button until an adequate value is entered could fix the issue.
<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
java.lang.NullPointerException
	at java.base/java.util.regex.Matcher.quoteReplacement(Unknown Source)
	at org.jabref/org.jabref.logic.l10n.LocalizationKeyParams.replacePlaceholders(Unknown Source)
	at org.jabref/org.jabref.logic.l10n.Localization.lookup(Unknown Source)
	at org.jabref/org.jabref.logic.l10n.Localization.lang(Unknown Source)
	at org.jabref/org.jabref.gui.EntryTypeViewModel.lambda$runFetcherWorker$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.EventHelper.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.setState(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.lambda$call$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.Application.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.EventLoop.enter(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/javafx.stage.Stage.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.HeavyweightDialog.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.showAndWait(Unknown Source)
	at org.jabref/org.jabref.gui.importer.NewEntryAction.execute(Unknown Source)
	at org.jabref/org.jabref.gui.actions.JabRefAction.lambda$new$2(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

</details>"Disable the generate button if the ID field is empty"Fixes #6370 
- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [X] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mootez SaadMootezSaaD04/29/20, 02:47:44 PM
6198.06372Storing selected preview throws java.lang.IllegalArgumentException: Value too long: "Current dev version

1. Go to Preferences ->  Entry Preview
2. Search American Psychological Association...
3. Move the style to the right
4. Select it or move it up to the top
5. Save preferences:
6. Exception occurs

The problem is that the maximum allowed value for the Preferences Value is:
8192 characters  (MAX_VALUE_LENGTH)

Solution: I think the solution would be to store the name of the style

```
20:45:28.751 [JavaFX Application Thread] ERROR org.jabref.FallbackExceptionHandler - Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
java.lang.IllegalArgumentException: Value too long: <?xml version=""1.0"" encoding=""utf-8""?> (omitted here) 
	at java.util.prefs.AbstractPreferences.put(AbstractPreferences.java:253) ~[?:?]
	at org.jabref.preferences.JabRefPreferences.put(JabRefPreferences.java:937) ~[main/:?]
	at org.jabref.preferences.JabRefPreferences.storePreviewPreferences(JabRefPreferences.java:1441) ~[main/:?]
	at org.jabref.gui.preferences.PreviewTabViewModel.storeSettings(PreviewTabViewModel.java:203) ~[main/:?]
	at org.jabref.gui.preferences.AbstractPreferenceTabView.storeSettings(AbstractPreferenceTabView.java:30) ~[main/:?]
```""Hi, we want to work on this bug, but it seems difficult to fix it.

Firstly, we have reproduced the bug successfully.
Then, thanks for your tips, we successfully understood the source of the bug

Secondly, we tried to solve it by only store the name instead of style in method JabRefPreferences.storePreviewPreferences(PreviewPreferences previewPreferences)
1. we add a field called previewStyleName in class PreviewPreferences
2. modify the method JabRefPreferences.storePreviewPreferences(PreviewPreferences previewPreferences) to put PREVIEW_STYLE_NAME attribute into preferences
3. try to modify method JabRefPreferences.getPreviewPreferences() to search style by name.
4. we found a method PreviewTabViewModel.findLayoutByName(String name) which can convert the name to style.
5. We try to transfer the field PreviewTabViewModel.availableListProperty,which is used to convert name to style, to the JabRefPreferences.
6. point 5 is a silly idea, because the PreviewTabViewModel is relied on singlton JabRefPreferences. If we pass the PreviewTabViewModel.availableListProperty to the JabRefPreferences can lead to a big problem.
7. The solution we think now is to construct the availableListProperty in the JabRefPreferences, but this solution is not very suitable we thought, because the availableListProperty is not suitable to be included in Preferences, which store setting only.

As a result, we are stucking at this bug without a good solution.
We sincerely waiting for your ideas. It is hard for us to solve this bugs without more info.

It is OK for late reply, we might working on other works recently, please forgive our late reply. 
It is OK if you don't think we could working on this bug, we will try something else easier.
In advance, many thanks for your any instructions/tips.  =||= Hi,
thanks for investigating this and outlining the problems.
I looked into it based on your approach and also for the moment have no idea how to exactly solve this. Mabye @calixtus has an idea. He recently worked a lot with that preferences stuff.

Feel free to tackle another bug in the meantime. =||= I fear the source of the bug is somewhat different...

Can you please check if the problem persists if you follow these steps?
1. ...
2. Move the style American Psychological Association ... style to the top
3. Click on the ""Preview"" style.
4. Click on the ""Edit"" tab

The name of the syle in the editor tab is now problaby IEEE (in default config). But it shouldn't be.

If you click save, the bug appears.

If you click on the refresh icon in the upper left of the editor (""Reset to default style"") the editor contents should be completly different. Saving now should work.
 =||= The text of preview layout always becomes the text of the last CitationStyleLayout in the list, if another style is pushed upwards in the list around the 2nd last one.
The PreviewCycle basically is a list of preview styles, which can be distinguished in CitationStylePreviewLayouts and exactly one TextBasedPreviewLayout. It's all a bit hacky. The CitationStylePreviewLayouts are loaded dynamically, the TextBasedCitationLayout needs to be stored in the preferences to stay persistend. This is the secondary cause of the bug.
So therefor I think the problem is somewhere in the `selectedInChosenUp` method in `PreviewTabViewModel`: The method overwrites somehow the contents of the TextBasedPreviewLayout with the content of the last PreviewLayout in the list, if the last item in the list is a CitationStylePreviewLayout.

Be careful. JabRefPreferences is some sort of logic-model mixture. It's not yet untangled. There should not be a Property in JabRefPreferences, as this class should only provide preferences objects (like PreviewPreferences) and store them. Also, if you save only the name of the style, you also have to provide some mechanism to store the TextBasedPreviewLayout (The ""Preview"" style) =||= But on the other hand, it also happens if you drag-n-drop an item. So maybe it's somewhere in an implementation both methods `selectedInChosenUp` and `dragDroppedInChosenCell` share?

Have fun bug-hunting! This is a tricky one to catch, but should be an easy one to fix. :wink: =||= Wow, how deep insight you have provided. Many thanks for your instructions. I will try again as soon as possible.

Yeah, I think the JabRef needs more comments on source code. I have taken a long time on understanding what is the function of some method and field, which also easily make more mistakes.

Fortunately, the JabRef main contributors are so kind and active, who have the ability to provide the comments and deep insight for newcomers. Thank you very much. =||= Hi, I have tried to fix the bug. Following is something I have found:

I found the source of the bug is the chosenListProperty.remove() method. I cannot understand why, but it happens.

https://github.com/JabRef/jabref/blob/bc57d22f2a4ae8912d263608cf0a606fbbecd43a/src/main/java/org/jabref/gui/preferences/PreviewTabViewModel.java#L253-L258

modify line 256 & 278 to Collections.swap(chosenListProperty, newIndex, oldIndex);
This modification can fix the wrong modification of Preview when we trying to press the up/down arrow.

**BUT**
The method using remove()/removeAll() function all can lead to the wrong modification of Preview problem.
If the Preview is the first cell and you drag the last cell from chosen to avail list or just drag the last cell up, you can find the bug remains.

I think there are three solutions:
1. Modify the TextBasedPreviewLayout to immutable class
2. Change all remove()/removeAll() to other API (I think it is impossible)
3. Try to figure out why remove() method leads to this bug (I tried with debug mode, but the invoke chain is too deep)

When I test with this bug, some other bugs also happened. (Preview run away when I drag other chosen cells to avail)
I think this class (PreviewTabViewModel.java) should be reviewed more carefully. And both solutions are not easy to fix the bug. Maybe there are some triky things I haven't found ?
Thanks for your instructions in advanced.
@calixtus =||= Hi @leitianjian , thanks for debugging this code.
A bit of an obstacle here is, that the user should be able to drag multiple items in the list.
So your solution with Collections.swap would only work for one item.
Also making the TextBasedPreviewLayout immutable does not solve the issue with remove() and removeAll().

What different API did you think of? =||= Yeah, The Collections.swap only can solve the button of up/down.

Immutable TextBasedPreviewLayout I think can solve the issue. From my view, the remove()'s bug coming from unexpected modify. Every cell except Preview is the read-only. And Preview is the unexpected modified cell.

I just list the solution that may work. From my view (I'm not very familiar with JFX) there are not other APIs that can solve this bug. =||= Ok, go ahead, give it a shot and maybe push your branch as a draft PR, so we can take a look at it together. 👍  =||= Thanks, I will try it. It's my pleasure to hear your advice. If you have any idea about this bug, please tell it to me. :D =||= Hi, I think I have fixed this issue successfully, waiting for your review :D =||= "Fix Preferences style value too long"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6198 

Here are some explanations

**origin** of the bug
The listener add on chosenSelectionModelProperty

https://github.com/JabRef/jabref/blob/14e979051abc329e4d111c0066c0610fe8eb1b44/src/main/java/org/jabref/gui/preferences/PreviewTabView.java#L146

When we want to remove some cell from the chosenListProperty, before the remove operation is done. The selectionModel modified listener was fired (remove modified selectionModel too). Then the sourceTextProperty in PreviewTabViewModel.java was modified, which will fire the listener add on sourceTextProperty

https://github.com/JabRef/jabref/blob/14e979051abc329e4d111c0066c0610fe8eb1b44/src/main/java/org/jabref/gui/preferences/PreviewTabViewModel.java#L79-L83

The lambda above will modify the choseListProperty first elements.

So, my solution is clear the selection before we remove some elements
The drag cases are a little bit difficult.
I add a field named dragSourceSelectionModel which is similar to dragSourceList
After these modifications, I think the bug was solved.

I don't know why the merged changes appear again, maybe someone has rollbacked the master branch? I checked the code in the master, which seems the fixes of the issues #6169 have been dropped?

Thanks for any instruction in advanced.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tianjian leileitianjian04/29/20, 06:50:30 AM
6091.06379Library sort order get lost"JabRef 5.0--2020-03-06--2e6f433
Linux 4.9.0-12-amd64 amd64 
Java 13.0.2

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

In Library > Library properties, the export sort order can be specified.
However, the choice is not memorized.
Steps to reproduce the behavior:
1. Open a library
2. Go to Library > Library properties
In my case, the sort order was:
![Before-Capture du 2020-03-10 11-08-08](https://user-images.githubusercontent.com/6931104/76302054-a2555b80-62bf-11ea-8b90-98cc346b05db.png)
3. Change the sort order
Like:
![During-Capture du 2020-03-10 11-10-08](https://user-images.githubusercontent.com/6931104/76302184-d3359080-62bf-11ea-98f0-079c68e9db80.png)
4. Click on OK (closing the Library properties window)
5. Go (again) to Library > Library properties
The initial sort order is displayed:
![After-Capture du 2020-03-10 11-10-32](https://user-images.githubusercontent.com/6931104/76302194-d892db00-62bf-11ea-8ca5-5d57bc4c3de3.png)
""Hello,
I would like to try to correct this bugs and add a little functionality, as part of a course taken under license 3, I would like to know if this is not already done ...
cordially =||= @Hugoo98  Sure, go ahead! To me this looks like some issue with storing the properties and loading them from the preferences.
Read through the [Contribution Guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) 
The related code is located in this package:
https://github.com/JabRef/jabref/tree/master/src/main/java/org/jabref/gui/libraryproperties =||= @Siedlerchr thank you very much, I will try to do it and keep you posted. =||= Hi @Hugoo98, im very sorry, I already startet work on this issue a few days ago, but did not uploaded my draft as a PR. I hope you did not put too much effort yet in it. Especially this one is a bit more complicated, since the library properties dialog is a little bit screwed up... 🙈 Maybe we can work on this together? =||= Hi @calixtus no no i haven't started yet but i sent it to my teacher and he said it might be interesting.
Ducoup, I made my decision to do it even if it is complicated because there are 3 of us in our group which allows us to exchange ideas. =||= Good, JabRef always welcomes students who would like to practice software architecture and programming. I'll leave than the rework of SaveOrderConfigPanel to you. If you have questions, don't hesitate to ask us, we always like to help.

My original plan was to replace the three comboBoxes with a single TableView, offering the user the ability to add more than three SortCriteria. Fortunately SaveOrderConfig already works with a LinkedList in its data model, so you probably don't have to change too much outside SaveOrderConfigPanel and SaveOrderConfigPanel. This would imply you add a CheckBoxTableCell in gui.utils (for a similar example take a look at @Siedlerchr s implementation of RadioButtonTableCell). But maybe you have a better idea.

Please take a look at my PR. The finished result must respect the mvvm-design pattern and should respect the design principles of JabRef (the finished result should fit in the common look and feel). SortOrderPanel should only be a fx control and the data should be handled in the LibraryPropertiesDialogViewModel /  ExportSortingTabView.

You can base your work on my branch. I will try to hurry to refactor the still remaining parts that are still illegally tangled to the LibraryPropertiesView / ExportSortingTabView, so you have a clear workspace for your work.

Good luck and have fun. =||= You are lucky, as javafx already has a CheckboxTableCell you can use.
https://docs.oracle.com/javase/8/javafx/api/javafx/scene/control/cell/CheckBoxTableCell.html =||= ok thanks @calixtus  i will take a look at your PR and i will keep you posted  =||= "Fix library sort order get lost"This PR fixes #6091

Co-authored-by: Heriniaina Randrianasolo <hjsrandrianasolo@gmail.com>
Co-authored-by: Omar Tachour <omar.tchr@hotmail.com>
Co-authored-by: Sadji Micipsa <micipsasadji@gmail.com>

This error is due to the absence of an object equality test for the saveInSpecifiedOrder attribute. 
So we have  handled this error by correcting the equals function in the SaveOrderConfig class. 

- [ ] Change in CHANGELOG.md described (if applicable)
- [X] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."hrandrianasolohrandrianasolo05/12/20, 06:37:25 AM
5662.06381Provide option to automatically download files upon import"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
Usually, when importing entries using the browser extension, they include urls to PDFs etc. After the import, one has to go to the general tab and then download these files manually.

**Describe the solution you'd like**
Add an option in the import dialog (checkbox), that allows to automatically download all linked files and rename /move them to the default file location.
""This would be a convenient feature! Minor potential addition: remembering the last checked status as the default for the next import dialog, or with the option in the preferences menu of setting the default status. =||= @tobiasdiez Does the jabref cli have an option to import a pdf?
I'd like to try adding this option =||= @LyzardKing Awesome that you want to have a look at this.
No, the cli only allows to import bib entries / databases. But I would integrate this functionality at a later stage anyway. Namely, add a checkbox at the bottom of the import dialog (https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/importer/ImportEntriesDialog.java) ""Download linked online files"" and then reuse this code for the actual download of the contained files:
https://github.com/JabRef/jabref/blob/eb988b6ead6beae3d64b95aa8827567adf8b81df/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L395-L418 =||= Ok, so integrate it directly in the jabref dialog!
Sounds good..
I'll try and cook up something :) =||= I implemented the basic functionality. There is no persistence yet though. I think it would be better to have this as a setting rather than remembering if the box was checked the last time or not. Don't know how to do that though as this is my first contribution here. =||= Great job! I haven't had time to look at this, and you managed to do it better than I could have :) =||= ref https://github.com/JabRef/jabref/issues/1456 =||= Thanks to @btut  this issue should now be fixed in the latest master (should be ready in roughly hafl an hour =||= "Added a download checkbox to the import dialog"When importing entries, users now have a checkbox available to download
files linked via url.

I am not a GUI expert and am wondering whether my fix is appropriate and is considered clean in the MVC-concept. Since the functionality was already implemented in the LinkedFileViewModel, I just created an instance and let it handle the download. Is that ok? If not, copying the code over (and resolving some dependencies) would be the easiest, but also the dirtiest solution to this problem. Is there an appropriate place the code in LinkedFileViewModel could be moved, so it is callable in ImportEntriesViewModel?

Fixes #5662

![image](https://user-images.githubusercontent.com/10479048/80735472-04d51600-8b11-11ea-9d20-969e8d1dd974.png)

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Benedikt Tutzerbtut05/04/20, 02:12:29 PM
6303.06386"""you must select a valid style file"" problem""Hi! Jabref is a very promising tool. Thank you for the developing!

My environment is Windows 10 x64.

My software is JabRef-5.0-portable_windows.zip (jabref portable version for Windows ). I've also tested the JabRef-5.1-portable_windows.zip (14-04-2020)  with the same result.

When i try to load any style file i always get the message ""you must select a valid style file"".

I have tried the _American_Mineralogist.jstyle_ and _BJAST.jstyle_ files.  i have downloaded this .jstyle files from [https://github.com/JabRef/jstyles.jabref.org](https://github.com/JabRef/jstyles.jabref.org)

I have test the UTF-8 encoding with notepad++ 

Any idea?

Thanks in advance!!

DJuego

![jabref_style](https://user-images.githubusercontent.com/1956212/79585571-e2caa500-80c7-11ea-925f-fcfb9acb44d1.gif)





""Hi,

I think the jstyles are a bit outdated. I looked into it, and I think the problem is that they use Author formatters which are no longer existing: For example the BJAST.jstyle file ues
`AuthorAndsCommaReplacer`. The new one would be the `AuthorsSep`.
See the help for an updated list:
https://docs.jabref.org/import-export/export/customexports#built-in-export-formatters =||= Thank you for so quickly suggesting an explanation , @Siedlerchr I will look into it.

On the same page with the ""updates list"" there is a link to the style repository I mentioned , and also it is linked the ""Export-Filter Editor for Jabref"". Apparently the generated .jstyle files are no longer compatible. :-( 

[https://docs.jabref.org/import-export/export/customexports#creating-the-export-filter](https://docs.jabref.org/import-export/export/customexports#creating-the-export-filter)

IMHO it is a serious drawback for jabref the impossibility to easily edit style files. 

DJuego
 =||= @DJuego  These styles have all been created by external users, we do not maintain them. And the style editor plugin is also an external tool from @simonharrer  I think? =||=  @Siedlerchr . Very understandable.  Hopefully the new version 5.0 will bring a cascade of collateral updates.  :-)

DJuego =||= Hello,
I developed the ""Export-Filter-Editor"" some time ago. While not actively maintaining it, I could try to make some adjustments to make it work with JabRef 5.x . 

I tried to understand the pattern for ""valid style file"" to be raised.

This is what I did find out:

**The following style file (created with Export Filter Editor) works:**

`NAME
Documentation of jstyle (describing additional options):
http://jabref.sourceforge.net/OOPlugin-jabref.php

PROPERTIES
Title=""Literatur""
IsSortByPosition=false
IsNumberEntries=false
ReferenceParagraphFormat=""bibliografie""
ReferenceHeaderParagraphFormat=""Standard""


CITATION
MaxAuthors=3
MaxAuthorsFirst=3
AuthorSeparator=""/""
AuthorLastSeparator=""/""
EtAlString="" u.a.""
CitationSeparator=""; ""
MultiCiteChronological=true
BracketBefore=
BracketAfter=
BracketBeforeInList=""[""
BracketAfterInList=""]""
MinimumGroupingCount=3
CitationCharacterFormat=""Standard""
FormatCitations=true
GroupedNumbersSeparator=""-""
UniquefierSeparator="",""
InTextYearSeparator="" ""
YearSeparator="" ""

LAYOUT

default=\begin{author}\format[Authors(LastFirst,Fullname,sep=/,LastSep=/,EtAl= u.a.,3,3),]{\author} \end{author}\begin{year}(\year\uniq), \end{year}<i>\begin{title}\format[RemoveLatexCommands]{\title}, \end{title}</i><i>\begin{booktitle}\format[RemoveLatexCommands]{\booktitle}, \end{booktitle}</i>\begin{institution}\format[RemoveLatexCommands]{\institution}, \end{institution}\begin{journal}\format[RemoveLatexCommands]{\journal} \end{journal}\begin{volume}(\format[RemoveLatexCommands]{\volume}).\end{volume}\begin{address} \format[RemoveLatexCommands]{\address}.\end{address}<br>
`
**While the following style has only one difference (definition for article instead of default type) and does not work.** 

`NAME
Documentation of jstyle (describing additional options):
http://jabref.sourceforge.net/OOPlugin-jabref.php

PROPERTIES
Title=""Literatur""
IsSortByPosition=false
IsNumberEntries=false
ReferenceParagraphFormat=""bibliografie""
ReferenceHeaderParagraphFormat=""Standard""


CITATION
MaxAuthors=3
MaxAuthorsFirst=3
AuthorSeparator=""/""
AuthorLastSeparator=""/""
EtAlString="" u.a.""
CitationSeparator=""; ""
MultiCiteChronological=true
BracketBefore=
BracketAfter=
BracketBeforeInList=""[""
BracketAfterInList=""]""
MinimumGroupingCount=3
CitationCharacterFormat=""Standard""
FormatCitations=true
GroupedNumbersSeparator=""-""
UniquefierSeparator="",""
InTextYearSeparator="" ""
YearSeparator="" ""

LAYOUT

article=\begin{author}\format[Authors(LastFirst,Fullname,sep=/,LastSep=/,EtAl= u.a.,3,3),]{\author} \end{author}\begin{year}(\year\uniq), \end{year}<i>\begin{title}\format[RemoveLatexCommands]{\title}, \end{title}</i><i>\begin{booktitle}\format[RemoveLatexCommands]{\booktitle}, \end{booktitle}</i>\begin{institution}\format[RemoveLatexCommands]{\institution}, \end{institution}\begin{journal}\format[RemoveLatexCommands]{\journal} \end{journal}\begin{volume}(\format[RemoveLatexCommands]{\volume}).\end{volume}\begin{address} \format[RemoveLatexCommands]{\address}.\end{address}<br>
`
In my Test case, the same definitions can be used to setup a proper html export filter. So I suppose its not about depreceated fields that are being used. 

Could there be a problem in the test routine when a style file is checked? =||= Thanks for the feedback, default is required since a while  (since 5.0-beta)
Edit::// At least one line has to be of type default
Refs PR #5471

The dialog should ideally show the reason why the style is invalid =||= @Siedlerchr your comment did help to dig a bit deeper. I think, I was able to identify the problem:
""Export-Filter-Editor"" does put default always at the beginning. JabRef, however, seems to assume default has to be the last type!

**The following jstyle works:**

`NAME
Documentation of jstyle (describing additional options):
http://jabref.sourceforge.net/OOPlugin-jabref.php

PROPERTIES
Title=""Literatur""
IsSortByPosition=false
IsNumberEntries=false
ReferenceParagraphFormat=""bibliografie""
ReferenceHeaderParagraphFormat=""Standard""


CITATION
MaxAuthors=3
MaxAuthorsFirst=3
AuthorSeparator=""/""
AuthorLastSeparator=""/""
EtAlString="" u.a.""
CitationSeparator=""; ""
MultiCiteChronological=true
BracketBefore=
BracketAfter=
BracketBeforeInList=""[""
BracketAfterInList=""]""
MinimumGroupingCount=3
CitationCharacterFormat=""Standard""
FormatCitations=true
GroupedNumbersSeparator=""-""
UniquefierSeparator="",""
InTextYearSeparator="" ""
YearSeparator="" ""

LAYOUT

article=\begin{author}\format[Authors(LastFirst,Fullname,sep=/,LastSep=/,EtAl= u.a.,3,3),]{\author} \end{author}\begin{year}(\year\uniq), \end{year}<i>\begin{title}\format[RemoveLatexCommands]{\title}, \end{title}</i><i>\begin{booktitle}\format[RemoveLatexCommands]{\booktitle}, \end{booktitle}</i>\begin{institution}\format[RemoveLatexCommands]{\institution}, \end{institution}\begin{journal}\format[RemoveLatexCommands]{\journal} \end{journal}\begin{volume}(\format[RemoveLatexCommands]{\volume}).\end{volume}\begin{address} \format[RemoveLatexCommands]{\address}.\end{address}<br>

default=\begin{author}\format[Authors(LastFirst,Fullname,sep=/,LastSep=/,EtAl= u.a.,3,3),]{\author} \end{author}\begin{year}(\year\uniq), \end{year}<i>\begin{title}\format[RemoveLatexCommands]{\title}, \end{title}</i><i>\begin{booktitle}\format[RemoveLatexCommands]{\booktitle}, \end{booktitle}</i>\begin{institution}\format[RemoveLatexCommands]{\institution}, \end{institution}\begin{journal}\format[RemoveLatexCommands]{\journal} \end{journal}\begin{volume}(\format[RemoveLatexCommands]{\volume}).\end{volume}\begin{address} \format[RemoveLatexCommands]{\address}.\end{address}<br>
`

**The following jstyle file does not work. The only difference type=default & type=article are changed by order:**

`NAME
Documentation of jstyle (describing additional options):
http://jabref.sourceforge.net/OOPlugin-jabref.php

PROPERTIES
Title=""Literatur""
IsSortByPosition=false
IsNumberEntries=false
ReferenceParagraphFormat=""bibliografie""
ReferenceHeaderParagraphFormat=""Standard""


CITATION
MaxAuthors=3
MaxAuthorsFirst=3
AuthorSeparator=""/""
AuthorLastSeparator=""/""
EtAlString="" u.a.""
CitationSeparator=""; ""
MultiCiteChronological=true
BracketBefore=
BracketAfter=
BracketBeforeInList=""[""
BracketAfterInList=""]""
MinimumGroupingCount=3
CitationCharacterFormat=""Standard""
FormatCitations=true
GroupedNumbersSeparator=""-""
UniquefierSeparator="",""
InTextYearSeparator="" ""
YearSeparator="" ""

LAYOUT

default=\begin{author}\format[Authors(LastFirst,Fullname,sep=/,LastSep=/,EtAl= u.a.,3,3),]{\author} \end{author}\begin{year}(\year\uniq), \end{year}<i>\begin{title}\format[RemoveLatexCommands]{\title}, \end{title}</i><i>\begin{booktitle}\format[RemoveLatexCommands]{\booktitle}, \end{booktitle}</i>\begin{institution}\format[RemoveLatexCommands]{\institution}, \end{institution}\begin{journal}\format[RemoveLatexCommands]{\journal} \end{journal}\begin{volume}(\format[RemoveLatexCommands]{\volume}).\end{volume}\begin{address} \format[RemoveLatexCommands]{\address}.\end{address}<br>

article=\begin{author}\format[Authors(LastFirst,Fullname,sep=/,LastSep=/,EtAl= u.a.,3,3),]{\author} \end{author}\begin{year}(\year\uniq), \end{year}<i>\begin{title}\format[RemoveLatexCommands]{\title}, \end{title}</i><i>\begin{booktitle}\format[RemoveLatexCommands]{\booktitle}, \end{booktitle}</i>\begin{institution}\format[RemoveLatexCommands]{\institution}, \end{institution}\begin{journal}\format[RemoveLatexCommands]{\journal} \end{journal}\begin{volume}(\format[RemoveLatexCommands]{\volume}).\end{volume}\begin{address} \format[RemoveLatexCommands]{\address}.\end{address}<br>
`

I think the best way to solve the problem is to improve the validity checker.

@DJuego: Could you open your jstyle with an text editor and put your ""default"" definition at the last position and try if it works (of course not with outdated files like BJAST)? =||= Hm, I took a quick look at the code, it should not matter where the default entry type is.
I checked using the default ones. Even at the first line it works.
The only other requirement is that stlye files must be in utf8 nowadays
https://github.com/JabRef/jabref/blob/master/src/main/resources/resource/openoffice/default_authoryear.jstyle =||= First; I am using the ""Export-Filter_Editor_Windows_V04b.exe"" in Windows 10 x64

Indeed. I can confirm that with the suggested modification of @teertinker  the file seems to load correctly in Jabref. I simply opened the file with the notepad and moved the default line in the LAYOUT section. 

However I am unable to apply the style over the references. But it probably has to do with my lack of knowledge about jabref, citations and styles.  :-( F9 changes the style between the default jabref style and the IEEE style. It never changes to the Sensors style I have loaded. :-?

DJuego


Don´t work
[https://paste.ofcode.org/7rkvn6KmxdaFSzrmD6KhcL](https://paste.ofcode.org/7rkvn6KmxdaFSzrmD6KhcL)

Work!
[https://paste.ofcode.org/35xVapJXTPmEr6btUhvDeZY](https://paste.ofcode.org/35xVapJXTPmEr6btUhvDeZY)
 =||= The jstyle we are talking about here, are for the usage in Open/Libre Office.

However, and that's a bit confusing, the layout part cansalso used for the Preview style in jabref (you can modify that in the preferences).
And for complete confusion the layout part can also be used to define custom export formats. It's the same functionality under the hood. Just three different functions  =||= @DJuego:
Your second style file works on my JabRef 5.0 without any problems.  A jstyle, however, does not affect your preview in JABREF as @Siedlerchr noted. But you can use the code within the LAYOUT section to modify your preview window.

@Siedlerchr:
The second layout file  of @DJuego  works immediatly. The first one gets refused. In both cases I saved the files with UTF-8. However, after registering the second layout file in JabRef I can modify the jstlye with an editor by pasting the code of the first layout file. The References are still parsed correctly in LibreOffice afterwards. 
There must be a problem with the integrity checker - most probably it has something to do with the order of Bibtex types. =||= Today I did double check an example style file with a minimal setup (only title and year used). I did check for all global Properties to be included in the current documentation. The file is saved as UTF-8 on my pc. The same pattern persists: 
1 If I put the \default definition at the last position the the jstyle file can be added 
2. If i put the \default position at the beginning the jstyl file gets refused.

See:

Working: https://pastebin.com/73kiGpk0
vs.
Not Working: https://pastebin.com/SA4kMSQJ

From my perspective this is a bug within JabRef, therefore it makes not much sense to update Export-Filter-Editor at the moment. =||= @teertinker  You are right, I debugged it and the problem is a boolean variable ""isDefaultLayoutPresent"" which gets overwritten every time a new line is read. That explains why it only works at the end. Will create a fix
 =||= Yuppie! Great to hear. =||= "Fix jstyle was invalid with default section at the start"Fixes #6303
Adapted the error message to give a hint what is probably missing.

I also noticed a problem in eclipse when executing the L10n test. It was missing an add-opens

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/02/20, 11:00:27 AM
6383.06389Recent Libraries list in File menu omits underscores in filenames"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0 on Windows 10 and Ubuntu 16.04

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ ] I have NOT tested the latest development version from http://builds.jabref.org/master/ but I have not found any other Bug report for this problem.

<!-- Add a clear and concise description of what the bug is. -->
The ""Recent libraries"" list within the File menu displays the filenames of recently opened .bib database files, but if any of those filenames include an underscore, the underscore is **not**  shown. 
For example, the database Bug_List.bib will be be displayed as BugList.bib.

Strangely, clicking on the entry BugList.bib within the Recent Libraries list will (correctly?) open the database file Bug_List.bib, so the problem must simply be related to how the filename is displayed within the Recent Libraries list.

I did not observe this problem with JabRef 4.3.1, or any earlier version.

Steps to reproduce the behavior:
1. Create a minimal .bib database file, and name it Bug_List.bib 
This .bib file need contain only a single entry.
2. Open Bug_List.bib within JabRef 5.0. 
The name in the Tab above the main table will correctly show the filename Bug_List.bib
3. Look at the entries in the File/Recent libraries menu. 
The most recent library will be listed as BugList.bib""By default `mnemonicParsingProperty` is set to `true` for MenuItem which parses the underscore character.
So setting it here to `false` would fix it.

https://github.com/JabRef/jabref/blob/2825c29ae797c2c1ff5e632152ac1b6280f7af40/src/main/java/org/jabref/gui/menus/FileHistoryMenu.java#L53_L58 =||= @MootezSaaD  Thanks for investigating, freel free to create a fix =||= Thanks to @MootezSaaD this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix underscore character being omitted from file name in Recent Libraries list"Fixes: #6383 

![image](https://user-images.githubusercontent.com/34676841/80824286-6b743580-8bde-11ea-8555-20569278d326.png)


- [X] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [X] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mootez SaadMootezSaaD05/01/20, 08:08:43 PM
6396.06398StartupWMclass org.jabref.JabRefMain vs org-jabref-JabRefMain"I installed JabRef 5.0 from the .deb package on Ubuntu 16.04.

JabRef is not correctly associated with the .desktop file, so it doesn't show the icon in the launcher (it shows the default ?-icon instead).

The StartupWMclass in the .desktop file is org-jabref-JabRefMain whereas the application seems to use org.jabref.JabRefMain.

Changing the line in the .desktop file to StartupWMClass=org.jabref.JabRefMain resolves the issue.""@HifeFish  Thanks for reporting that issue.  It would be nice if you could change that line here as well, this is the desktop file that gets copied over
https://github.com/JabRef/jabref/blob/master/buildres/linux/JabRef.desktop =||= "Fix StartupWMClass"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Changed StartupWMClass entry in /buildres/linux/JabRef.desktop from org-jabref-JabRefMain to org.jabref.JabRefMain.

Fixes #6396 


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."HifeFish05/03/20, 06:43:33 PM
6430.06402Menu View on empty file => Uncaught exception"JabRef 5.1--2020-05-04--b5599c9
Linux 4.9.0-12-amd64 amd64 
Java 14.0.1

- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When clicking on the menu item ""View"" with an empty library on focus, a message ""Uncaught exception"" is displayed.

Steps to reproduce the behavior:
1. Create a new BibTeX library
2. Click on menu View

A window pops-up, displaying the message ""Uncaught exception occurred in Thread[JavaFX Application Thread,5,main]
Afterwards, To be able to display the menu View on another file, JabRef needs to be re-opened.

Note: All the other menus are working as expected.

<details>
java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0
	at java.base/jdk.internal.util.Preconditions.outOfBounds(Unknown Source)
	at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source)
	at java.base/jdk.internal.util.Preconditions.checkIndex(Unknown Source)
	at java.base/java.util.Objects.checkIndex(Unknown Source)
	at java.base/java.util.ArrayList.get(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableListWrapper.get(Unknown Source)
	at org.jabref/org.jabref.gui.actions.ActionHelper.isFilePresentForSelectedEntry(Unknown Source)
	at org.jabref/org.jabref.gui.documentviewer.ShowDocumentViewerAction.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.JabRefFrame.lambda$createMenu$13(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Menu.setShowing(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Menu.show(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.MenuBarSkin.showMenu(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.MenuBarSkin.showMenu(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.skin.MenuBarSkin.lambda$rebuildUI$27(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

</details>""Funny coincidence, I recently discovered the bug as well and was already working on a fix (I just did not create an issue)
Refs #6402 =||= And before creating it, I looked only in the list of issues... :wink: 
Well, now the PR has a corresponding issue! =||= Should be fixed in master now. Just merged =||= I confirm this is fixed in:
JabRef 5.1--2020-05-22--ef2a31c
Linux 4.9.0-12-amd64 amd64 
Java 14.0.1

Thank you for the work. =||= "Fix action helper when no library is open"This fixes #6430 an exception when opening the View menu with an empty library

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/09/20, 06:33:24 PM
6403.06406Some keyboard shortcuts are no longer working."I'd sent a help message to the forum and Christoph Siedlerchr responded with a confirmation that it is still not working in the latest development version, and a request to post a bug report.

Some keyboard shortcuts are NOT Working:
e.g. (these are the only ones I checked, not sure about others)
Keyboard binding: Cntrl+shift+A Action: Create new article 
Keyboard binding: Cntrl+shift+B Action: Create new book
Keyboard binding: Cntrl+shift+I Action: Create new inbook
Keyboard binding: Cntrl+shift+M Action: Create new masterthesis
Keyboard binding: Cntrl+shift+T Action: Create new phdthesis
Keyboard binding: Cntrl+shift+P Action: Create new proceedings
Keyboard binding: Cntrl+shift+R Action: Create new report
Keyboard binding: Cntrl+shift+U Action: Create new unpublished

but 
other keyboard shortcuts ARE Working:
Keyboard binding: Cntrl+N  Action: Create new entry (brings up the menu to select type of entry)
Keyboard binding: Cntrl+shift+N  Action: Create new entry from plain text
Keyboard binding: Cntrl+E  Action: open editor of highlighted reference

JabRef version 
JabRef 5.0–2020-03-06–2e6f433
Windows 10 10.0 amd64
Java 13.0.2


""Thanks to a very quick fix by @MootezSaaD this should be working now in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Work great!
Thanks so much for such speedy work guys! :)

All the Best,
Jen

On Mon, May 4, 2020 at 4:15 AM Tobias Diez <notifications@github.com> wrote:

> Thanks to a very quick fix by @MootezSaaD <https://github.com/MootezSaaD>
> this should be working now in the latest development version. Could you
> please check the build from http://builds.jabref.org/master/. Thanks!
> Please remember to make a backup of your library before trying-out this
> version.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/6403#issuecomment-623323913>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/APN5PPKQVXOT3KJS7HRRFQDRPZ2R5ANCNFSM4MYE6AAQ>
> .
>
 =||= Forgot to include:

JabRef 5.1--2020-05-04--b5599c9
Windows 10 10.0 amd64
Java 14.0.1

On Mon, May 4, 2020 at 12:33 PM Jennifer Hsieh <humbleambition@gmail.com>
wrote:

> Work great!
> Thanks so much for such speedy work guys! :)
>
> All the Best,
> Jen
>
> On Mon, May 4, 2020 at 4:15 AM Tobias Diez <notifications@github.com>
> wrote:
>
>> Thanks to a very quick fix by @MootezSaaD <https://github.com/MootezSaaD>
>> this should be working now in the latest development version. Could you
>> please check the build from http://builds.jabref.org/master/. Thanks!
>> Please remember to make a backup of your library before trying-out this
>> version.
>>
>> —
>> You are receiving this because you authored the thread.
>> Reply to this email directly, view it on GitHub
>> <https://github.com/JabRef/jabref/issues/6403#issuecomment-623323913>,
>> or unsubscribe
>> <https://github.com/notifications/unsubscribe-auth/APN5PPKQVXOT3KJS7HRRFQDRPZ2R5ANCNFSM4MYE6AAQ>
>> .
>>
>
>
 =||= "Restore some missing keyboard shortcuts"Fixes #6403 

- [X] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mootez SaadMootezSaaD05/04/20, 08:14:09 AM
6297.06407Creating an new entry should clean up the filter"

When I filter the entries and open a new entry,
for example a TechReport,
the list of entries does not show the new entry.


Therefore I recommend:
  Creating a new entry should clean up the filter
because I prefer that a new entry is also immediately
reflected in the list of entries.

If the current behaviour is a feature,
please provide a possiblity to switch this feature on and off.

Thanks.


JabRef 5-0 2020-03-06
MacOS 10.15.4
Java 13.0.2""Hello,

I was looking for my first contribution to an open source project to get to know the fork-branch git workflow. I found this issue and even though it is not labeled as a good first issue I would like to try work on it. I will let you know if I made any progress!

Best regards
Niklas
 =||= Thanks to @nsmt09 this should be fixed now in the latest master.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fixed an issue where a new entry is not shown in the library if a filter/search is active"Fixes #6297 

I used the existing endSearch method of GlobalSearchbar to clear the search if a new entry is added.

Probably the solution is quite quick and dirty and I am not sure if it fits to your architecture and if I added it at the the right spot in the code.

I would be happy about feedback and advice for the future! 


- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? "Niklas Schmittnsmt0905/25/20, 05:39:54 PM
6180.06423Groups panel does not keep size when resizing window"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 
```
JabRef 5.1--2020-03-23--67daf36
Linux 5.4.0-4-amd64 amd64 
Java 14
```
Debian bullseye/sid with i3 window manager.

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Before, the groups panel would stay at it's size when the window is resized.
Now, it seems to scale proportionally with the whole window.
This is especially annoying when a tiling window manager is used and you open a PDF next to jabref: in this case the groups panel scales to about 50% of the whole window.

Steps to reproduce the behavior:
1. resize jabref window
2. groups panel scales proportionally instead of keep size""Thanks to @Hollyqqqqq this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= I tested with
```
JabRef 5.1--2020-05-16--cb50b50
Linux 5.6.0-1-amd64 amd64 
Java 14.0.1
```
and it seems to be fixed for me!
thanks you! =||= "Keep group pane size when resizing window (#6180)"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6180

Hello, I think I have fixed this bug. The main reason for this bug is group pane is resizable with parent(window size). I add one line in **JabRefFrame.java** to set group pane not resizable with parent. Thus it can keep size when resizing window. The following is manual test:

Before resizing window:
![image](https://user-images.githubusercontent.com/55199983/81079463-29225f80-8f22-11ea-9f09-86dfc36e2489.png)

After resizing window:
![image](https://user-images.githubusercontent.com/55199983/81079505-38091200-8f22-11ea-98f9-d914348e957d.png)




<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Hollyqqqqq05/16/20, 10:45:47 AM
6349.06426Sorting custom entry fields that contain numerical values"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0 on Ubuntu 16.04, and on Windows 10, both installed using the installation files (.deb or .msi) downloaded from the JabRef website. 
I assume the Java version will be that provided by the installer.
<!-- version as shown in the about box -->  <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ ] I have NOT tested the latest development version from http://builds.jabref.org/master/ as I do not have the capabilities needed to do this. I have searched for other related Bug reports. 
The most relevant seem to be:
#978 Field properties - future implementation
#2200 Sorting by title is broken
but both of these issues have been ""Closed""

<!-- Add a clear and concise description of what the bug is. -->
JabRef allows the user to add custom general entry fields that contain numerical values. All  versions of JabRef prior to 5.0 allowed the Entry Table to be sorted in the numerical order of the value of such a custom field, simply by clicking on the column header.

However, with JabRef 5.0, the numerical (integer) values in this column are sorted in alphabetical order instead!
This means, for example that the numbers 1,2,3,10,13, 21
are sorted into the order 1,10,13,2,21,3
This suggests the numerical values are being treated as plain text.
I did not observe this problem with JabRef 4.3.1 or earlier versions.

Steps to reproduce the behavior:
1. Add a custom entry field to a BibTeX database using a JabRef version earlier than 5.0.
2. Populate this field with a range of positive integer values.
3. Open the BibTeX database file with JabRef 5.0.
4. Sort the Entry Table by the values in the Custom Entry field, by clicking on the relevant column header. The Table rows will be sorted by the alphabetical order of the number, not the numerical value.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary></summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Hi, following #6222 i think we have to implemented a new Comparator for that field. If you agree with me I could contribute by fixing this issue. =||= @dextep that would be cool. I think we need to specify a case for numeric/non numeric cases here that work for unknown fields as well
 =||= If someone want to take this issue feel free because i have less time than previews i think.  =||= @Siedlerchr Hi, I think I can handle this issue! Do you want me to add a special field like in the issue mentioned above or do you want to add the case for numeric/non numeric cases somewhere else? =||= > @Siedlerchr Hi, I think I can handle this issue! Do you want me to add a special field like in the issue mentioned above or do you want to add the case for numeric/non numeric cases somewhere else?

If you want we can collaborate? I have a solution in mind (ofc if you don't mind) =||= > 
> 
> > @Siedlerchr Hi, I think I can handle this issue! Do you want me to add a special field like in the issue mentioned above or do you want to add the case for numeric/non numeric cases somewhere else?
> 
> If you want we can collaborate? I have a solution in mind (ofc if you don't mind)

Of course! That would be awesome! =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= "Sorting custom entry fields that contain numerical values"@MootezSaaD  and I have worked together and this pull request fixes #6349 
We added a new Comparator for numeric cases and now they are sorted as integers and not alphabetically. 

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."dimitra-karadima05/08/20, 09:04:05 PM
3915.06427Offer truncation of file names during file renaming"Previously I used `\bibtexkey\begin{title} - \format[Replace(""(.{90}).*,$1"", RemoveBrackets]{\title}\end{title}` for renaming pdf files when cleaning. But this does not work currently.
Found this [link.](http://discourse.jabref.org/t/file-rename-feature-broken-in-4-1/982)
i.e., `[bibtexkey] - [title]`. But how to truncate the filename up to certain length(number) (say `90` or `100`).
Basically, I want to replace the 1st expression to make things work, but not able to do it.""Hi, the format is now the same as for the bibtex key generator:
http://help.jabref.org/en/BibtexKeyPatterns#special-field-markers =||= Yes, I want like this: `[auth:lower][year][veryshorttitle:lower]:[title]`. But, in addition, I want to truncate the filename up to `100` and spacing. E.g.: For the `title`, _An awesome paper on JabRef_, say `bibtexkey` is _bibkey_, and want to truncate up to `25`. Then the file name I want is: `bibkey - An awesome paper.pdf` =||= Maybe relevant https://github.com/JabRef/help.jabref.org/issues/179. =||= Note that it currently seems to be impossible to truncate the result. If that is the only additional requirement to our formerly known ""label patterns"" (now ""Bibtex Key Patterns""), we maybe should offer a configuration option for that. =||= Is this included in version 5.x? =||= It doesn't seem like that. You're welcome to submit a pull request 😇 =||= I can take a look at this issue.

Would these steps make sense as a solution?
1. Add a field for replacing the filename with regex in Options -> Preferences -> Import, which would make similar to the BibTeX key generator. A pattern along the line of (?<=\A.{0,90}+).* should solve @pramitbiswas's issue in that case? (the pattern hopefully matches everything except the first 90 characters)
2. In the ""Cleanup entries"", update to show the regex along with the current pattern. =||= @k3KAW8Pnf7mkmdSMPHz27  The cleanup rename/moving takes two pattern, the fileDirPattern for naming the (sub)directory and the filenamePattern.  Both use the same syntax as the ones for the bibtexkeypattern.

I think I would decouple the cases here.
1. Generate the bibtex key using the defined pattern (independent of the cleanup, a user can already auto generate keys)
2. Create a filename pattern based on bibtexkey 

What's now missing is a TruncateModifier, which acts like the modifiers here:
https://docs.jabref.org/setup/bibtexkeypatterns#modifiers

In the end the filenamepattern could look like this:
`[bibtexkey:truncate(40)]`

 =||= @Siedlerchr, I'll get started on truncate, but I am not sure I understand what the use case is. I thought, perhaps erroneously, that pramitbiswas wanted to truncate the full filename (excluding the extension).
If this is not the use case, feel free to ignore everything below this line ^^

Everything from here on is under the assumption that the use case is to truncate the full filename. I can think of three approaches,

1. Just implementing :truncate(). However, I can't get ""stacked patterns"" to work, e.g., [[year][auth]:lower] does not produce the result that I expect. I am not a JabRef power user so perhaps there is an error with the human :P 
If ""stacked patterns"" are not supposed to work, should I attempt to add that feature?

2. Add the same replace with regex option that currently exists for BibTex key generation. But perhaps this is inconvenient to use.

3. As it currently is, only using the [bibtexkey] as a filepattern and ""pre-truncating"" it with regex in the BibTex key generation should work but it inconvenient and most definitively does not decouple the cases. =||= I would also go with the `truncate` modifier as @Siedlerchr suggests. Seems to be the most flexible solution from which also other users profit (although it might not be exactly what @pramitbiswas was suggesting).

The stacked pattern is a nice idea. I may warn you, however, that the code surrounding the pattern parser is really ugly / inflexible. So this might be hard to implement. =||= @tobiasdiez, I'd guess the consensus is that `:truncate` would ""solve"" this issue then?

I can have a look at the pattern parser while I am at it and see if I would enjoy/be able to change it. If that is the case, should I add a feature request and suggest myself to solve it later?

Meanwhile, perhaps using the regex and only [bibtexkey] as a filepattern works as a temporary ""fix"" for @pramitbiswas. =||= Good! There is no need to open a feature request. If you fell like implementing it, please go ahead and open a PR! =||= First of all, thank you very much for taking the issue forward.

Suppose for [this bib entry](https://scholar.googleusercontent.com/scholar.bib?q=info:rKykOSFZ7MoJ:scholar.google.com/&output=citation&scisdr=CgVeoeZDEKjOrFI3TjQ:AAGBfm0AAAAAXrQyVjQdcOrmOnmNQWGgqq3jHufYJ3YB&scisig=AAGBfm0AAAAAXrQyVpqrqm3SOLmpsep4X5rRqSEqdKQ-&scisf=4&ct=citation&cd=-1&hl=en)

- I rename the file name as: `davcev2018iot - IoT agriculture system based on LoRaWAN`. The first part is `davcev2018iot` is the `bibtexkey`. I have absolutely no issue with it. As [described here](https://github.com/JabRef/jabref/issues/3915#issuecomment-377950374), my problem is with final file name length (excluding extension, of course).

- Sometimes what happens was, due to either big title of the paper or very deep nested directory or both, I can not copy/move the file elsewhere due to path length (probably max is 255), this is the actual reason for truncating the file name to a low length.

I saw the description in PR, I think it will solve the issue for me. The solution to the mentioned problem is `[bibtexkey] - [title:truncateN]` =||= @pramitbiswas you get a ""java.nio.file.FileSystemException: "" ... ""File name too long"" error message from JabRef when the problem occurs? (That is what happens when I am trying to recreate the error on a FAT drive which is quite limited in path length) =||= Normally jabref auto truncates long file names. There is at least a method in FileUtil class  =||= I can't reproduce the error on what my system calls DOS_FAT_32 after applying the auto truncate to directory names (limiting them to a length of 255).
 =||= For reference: The PR where the system was changed is https://github.com/JabRef/jabref/pull/3238. =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27 this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Add truncate as a BibTex key modifier"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #3915. Adds a truncate modifier to the [available BibTex key modifiers](https://docs.jabref.org/setup/bibtexkeypatterns#modifiers). For ""A Title"" the bracketed pattern `[title:truncate3]` produces the result ""A T"".

- The syntax is `truncateN` (`[title:truncate5]`) to mimic the pattern of `authN` etc.

Remaining
- [x] See if layered expressions are reasonable to implement, e.g., [[auth][title]:truncate10]
- [x] Update changelog
- [x] Documentation

Things I am not sure about
- [x] Should `truncate` be a formatter(org.jabref/logic/formatter)? Currently, formatters does not accept arguments
- [x] The interaction between BibTex key generation and truncate might lead to unexpected results as whitespaces are removed after truncation. Unless this is considered obvious, it should perhaps be mentioned in the documentation of `truncate`. E.g., for ""A Title"", `[title:truncate3]` will lead to the `bibtexkey` ""AT""
- [x] Should this be included in the changelog?
- [x] There were a `BracketedPatternTest` in `org.jabref/logic/util/`. Is there a correct location for the `BracketedPatternTest`?

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->
Others
- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2705/13/20, 07:38:26 AM
6421.06438forward-delete key while editing author name"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

JabRef 5.0--2020-03-06--2e6f433
Mac OS X 10.15.4 x86_64 
Java 13.0.2

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. ...Enter the author name field
2. ...place the cursor
3. ...strike the forward-delete key to delete the char to the right of the cursor
3. ...A dialog pops up asking if I want to delete the record.

This is inappropriate behavior when editing a field. It should only act this way when a record is highlighted in the list AND the list has focus.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
 event log is empty

</details>""Interestingly, pressing the backspace key while editing a field does NOT attempt to delete the record. =||= I'd like to deal with this issue. =||= Thanks to @braincident  this issue should be fixed now in the latest master (build should be ready in roughly half an hour)

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.
 =||= "Fix the bug #6421"<!-- 
Describe the changes you have made here: check if the edit action is DELETE_ENTRY
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
In the text field, an edit action DELETE_ENTRY should do forward delete rather than do anything to the entry.
Fixes #6421 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."CAI Zhichunbraincident05/07/20, 10:41:49 AM
6146.06440can't jump in ordered author list by typing letters"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.0--2020-03-06--2e6f433
Mac OS X 10.14.6 x86_64 
Java 13.0.2

I updated today to the latest stable release.
I have my literature sorted by author (last) name, clicking on ""Author/Editor"" until the upwards-pointing triangle shows. Now I could just jump to anywhere by typing a letter, e.g. by typing ""e"" I would jump to the first author/editor startig with ""e"" or ""E"". Same for longer names.
As of version 5, this seems not to work anymore. For me, such jumping has become an elementary habit, as I typically don't remember the name fully and cannot search for it.
""Hello @cdormann , this issue should now be solved by @leitianjian in PR #6440. You can test the latest dev build in about an hour ( builds.jabref.org ), and we would appreciate if you can tell us if this solution works as you expect it to.
Please remember always to backup your database before using a dev build of JabRef. =||= Sorry for this extremely long lack of response. I had for the time being moved to BibDesk (which for various reasons I am not so fond of). I now tried the JabRef update and it works nicely, as it should. Happy to be back!
Carsten 

> On 11. May 2020, at 16:21, Carl Christian Snethlage <notifications@github.com> wrote:
> 
> 
> Hello @cdormann <https://github.com/cdormann> , this issue should now be solved by @leitianjian <https://github.com/leitianjian> in PR #6440 <https://github.com/JabRef/jabref/pull/6440>. You can test the latest dev build in about an hour ( builds.jabref.org ), and we would appreciate if you can tell us if this solution works as you expect it to.
> Please remember always to backup your database before using a dev build of JabRef.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub <https://github.com/JabRef/jabref/issues/6146#issuecomment-626731551>, or unsubscribe <https://github.com/notifications/unsubscribe-auth/ABZGVISFZWVVAX4NKQLHO6TRRACVRANCNFSM4LQGDOFA>.
> 

 =||= "Add support for jumping in ordered author list by typing letters"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #6146

I think I have added the support for jumping to the entry when typing letters.
Should I add some comments to the method I added?
Thanks :D

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tianjian leileitianjian05/11/20, 02:13:30 PM
6453.06455file save triggers error"JabRef 5.1--2020-05-08--d18ce55
Linux 5.6.8-200.fc31.x86_64 amd64 
Java 14.0.1

<!-- Add a clear and concise description of what the bug is. -->

When I edit text in the entry editor, I often get this exception, without further action. I suspected it might be related to autocompletion, but I read @Siedlerchr as this not being the case at https://github.com/JabRef/jabref/issues/6351. As you see at https://github.com/JabRef/jabref/issues/6351, I routinely faced this error for for 8 days now.

The bug issue heading might be equivalent to https://github.com/JabRef/jabref/issues/6102? - but I am not sure whether it is the same issue.

How to reproduce: edit any text field and after a few seconds the exception shows up. 



<details>
  <summary>Log File</summary>
  
java.lang.IllegalStateException: Task must only be used from the FX Application Thread
	at org.jabref.merged.module/javafx.concurrent.Task.checkThread(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.isRunning(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.onUserInputChanged(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.setUserInput(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.setUserInputText(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextArea$TextAreaContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.filterAndSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.doSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.callObservers(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.put(Unknown Source)
	at org.jabref/org.jabref.model.entry.BibEntry.setField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.dialogs.AutosaveUiManager.listen(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber$1.run(Unknown Source)
	at org.jabref.merged.module/com.google.common.util.concurrent.DirectExecutor.execute(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.EventBus.post(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.AutosaveManager.lambda$listen$0(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
</details>""It's all the same underlying issue. Problem which makes it hard to debug, is that it's not occuring on Windows. But only on linux.

```

at org.jabref/org.jabref.model.entry.BibEntry.setField(Unknown Source)
at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(Unknown Source)
at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(Unknown Source)
at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(Unknown Source)
at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(Unknown Source)
``` =||= Ok, thanks alot. Hm, I have no significant experience in tracing processes, neither in programming. In case you would recommend questions/debugging tasks, I would happily try to serve with relevant data.  =||= I have just prepared a fix version at  #6455  It would be nice if you could test that when it's ready
 =||= @ilippert  Would be nice if you could test this version:
https://builds.jabref.org/pull/6455/merge/
(I also enabled debug symbols, so we now see line numbers as well in a potential stacktrace) =||= the exception so far does not reoccur - in 10 minutes of testing. will report here if it does over the next days. =||= yeah, but got this now after saving and writing this line:
<details>
  <summary>Log File</summary>
  


```
org.jabref.logic.exporter.SaveException: Problems saving: java.nio.file.NoSuchFileException: /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib.tmp -> /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(SaveDatabaseAction.java:239)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:195)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:177)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:71)
	at org.jabref/org.jabref.gui.exporter.SaveAction.execute(SaveAction.java:39)
	at org.jabref/org.jabref.gui.actions.JabRefAction.lambda$new$2(JabRefAction.java:40)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Action.java:64)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Event.java:198)
	at org.jabref.merged.module/javafx.scene.control.MenuItem.fire(MenuItem.java:459)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ControlAcceleratorSupport.lambda$doAcceleratorInstall$1(ControlAcceleratorSupport.java:165)
	at org.jabref.merged.module/com.sun.javafx.scene.KeyboardShortcutsHandler.processAccelerators(KeyboardShortcutsHandler.java:382)
	at org.jabref.merged.module/com.sun.javafx.scene.KeyboardShortcutsHandler.dispatchBubblingEvent(KeyboardShortcutsHandler.java:162)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Event.java:198)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Scene.java:4098)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Scene.java:2157)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Scene.java:2625)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(GlassViewEventHandler.java:217)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(GlassViewEventHandler.java:149)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(GlassViewEventHandler.java:248)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:412)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(GlassViewEventHandler.java:247)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(View.java:547)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(View.java:971)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:277)
	at java.base/java.lang.Thread.run(Thread.java:832)
Caused by: java.nio.file.NoSuchFileException: /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib.tmp -> /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib
	at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
	at java.base/sun.nio.fs.UnixCopyFile.move(UnixCopyFile.java:415)
	at java.base/sun.nio.fs.UnixFileSystemProvider.move(UnixFileSystemProvider.java:267)
	at java.base/java.nio.file.Files.move(Files.java:1426)
	at org.jabref/org.jabref.logic.exporter.AtomicFileOutputStream.close(AtomicFileOutputStream.java:196)
	at java.base/sun.nio.cs.StreamEncoder.implClose(StreamEncoder.java:353)
	at java.base/sun.nio.cs.StreamEncoder.close(StreamEncoder.java:168)
	at java.base/java.io.OutputStreamWriter.close(OutputStreamWriter.java:255)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(BibDatabaseWriter.java:221)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(BibDatabaseWriter.java:161)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(SaveDatabaseAction.java:228)
	... 41 more
```

</details> =||= still on
JabRef 5.1-PullRequest6455.368--2020-05-09--fff4926
Linux 5.6.8-200.fc31.x86_64 amd64 
Java 14.0.1

Without me doing anything

<details>
  <summary>Log File</summary>

```
java.lang.RuntimeException: Bidirectional binding failed, setting to the previous value
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(BidirectionalBinding.java:619)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:360)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.fireValueChangedEvent(StringPropertyBase.java:104)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(StringPropertyBase.java:111)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:145)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(StringPropertyBase.java:50)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(StringProperty.java:65)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(StringProperty.java:57)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(BindingsHelper.java:254)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(BindingsHelper.java:247)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(ExpressionHelper.java:181)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(ObjectBinding.java:170)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(BindingHelperObserver.java:52)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(MapListenerHelper.java:320)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:169)
	at org.jabref/org.jabref.model.entry.BibEntry.setField(BibEntry.java:539)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(FieldFormatterCleanup.java:66)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(FieldFormatterCleanup.java:78)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(FieldFormatterCleanup.java:33)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(BibDatabaseWriter.java:78)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(BibDatabaseWriter.java:190)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(BibDatabaseWriter.java:161)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(SaveDatabaseAction.java:228)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:195)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:177)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:75)
	at org.jabref/org.jabref.gui.dialogs.AutosaveUiManager.listen(AutosaveUiManager.java:28)
	at jdk.internal.reflect.GeneratedMethodAccessor29.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:564)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Subscriber.java:87)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Subscriber.java:144)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber$1.run(Subscriber.java:72)
	at org.jabref.merged.module/com.google.common.util.concurrent.DirectExecutor.execute(DirectExecutor.java:30)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber.dispatchEvent(Subscriber.java:67)
	at org.jabref.merged.module/com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Dispatcher.java:108)
	at org.jabref.merged.module/com.google.common.eventbus.EventBus.post(EventBus.java:212)
	at org.jabref/org.jabref.logic.autosaveandbackup.AutosaveManager.lambda$listen$0(AutosaveManager.java:46)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:832)
Caused by: java.lang.StringIndexOutOfBoundsException: index 515, length 515
	at java.base/java.lang.String.checkIndex(String.java:3715)
	at java.base/java.lang.AbstractStringBuilder.charAt(AbstractStringBuilder.java:362)
	at java.base/java.lang.StringBuilder.charAt(StringBuilder.java:85)
	at org.jabref.merged.module/javafx.scene.control.TextArea$TextAreaContent.get(TextArea.java:133)
	at org.jabref.merged.module/javafx.scene.control.TextArea$TextAreaContent.get(TextArea.java:311)
	at org.jabref.merged.module/javafx.scene.control.TextArea$TextAreaContent.get(TextArea.java:88)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.get(TextInputControl.java:1365)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.get(TextInputControl.java:1349)
	at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(StringExpression.java:51)
	at org.jabref.merged.module/javafx.beans.binding.StringExpression.getValue(StringExpression.java:47)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:355)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(TextInputControl.java:1438)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(TextInputControl.java:1442)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(TextInputControl.java:1373)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(TextInputControl.java:1349)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(StringProperty.java:65)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(StringProperty.java:57)
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(BidirectionalBinding.java:601)
	... 47 more
```

</details> =||= Okay thanks that is a bit different now, but maybe related. Will look into it the next days  =||= Just to clarify, you have entry editor open, at which tab?  =||= I have the entry editor open at a custom tab ""annote"".

On 09.05.20 22:12, Christoph wrote:
> Just to clarify, you have entry editor open, at which tab?
>  =||= JabRef 5.1-PullRequest6455.368--2020-05-09--fff4926
Linux 5.6.8-200.fc31.x86_64 amd64 
Java 14.0.1

I have now been working in the entry editor on a range of tabs and fields and the exception did not reappear. =||= Does the exception occur when you hit save (ctr+s) repeatedly?  =||= I just tested a few times hitting ctrl+s, and also clicking on the buttons: so significant effect.
 =||= however, just before I read your question, I got this (I think similar to before)

<details>
  <summary>Log File</summary>
  
  ```
  org.jabref.logic.exporter.SaveException: Problems saving: java.nio.file.NoSuchFileException: /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib.tmp -> /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(SaveDatabaseAction.java:239)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:195)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:177)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(SaveDatabaseAction.java:71)
	at org.jabref/org.jabref.gui.exporter.SaveAction.execute(SaveAction.java:39)
	at org.jabref/org.jabref.gui.actions.JabRefAction.lambda$new$2(JabRefAction.java:40)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Action.java:419)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Action.java:64)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Event.java:198)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Node.java:8885)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Button.java:203)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:206)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Event.java:198)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Scene.java:3890)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Scene.java:1885)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2618)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:409)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:299)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:447)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:412)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:446)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(View.java:556)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(View.java:942)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:277)
	at java.base/java.lang.Thread.run(Thread.java:832)
Caused by: java.nio.file.NoSuchFileException: /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib.tmp -> /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib
	at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:92)
	at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)
	at java.base/sun.nio.fs.UnixCopyFile.move(UnixCopyFile.java:415)
	at java.base/sun.nio.fs.UnixFileSystemProvider.move(UnixFileSystemProvider.java:267)
	at java.base/java.nio.file.Files.move(Files.java:1426)
	at org.jabref/org.jabref.logic.exporter.AtomicFileOutputStream.close(AtomicFileOutputStream.java:196)
	at java.base/sun.nio.cs.StreamEncoder.implClose(StreamEncoder.java:353)
	at java.base/sun.nio.cs.StreamEncoder.close(StreamEncoder.java:168)
	at java.base/java.io.OutputStreamWriter.close(OutputStreamWriter.java:255)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(BibDatabaseWriter.java:221)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(BibDatabaseWriter.java:161)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(SaveDatabaseAction.java:228)
	... 60 more
  ```
</details> =||= Thanks, okay, this is a different error now which is related to our Backup-Manager. For some reason the tmp file cannot be renamed (moved) to the bib file, because it's not/no longer existing.

`Caused by: java.nio.file.NoSuchFileException: /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib.tmp -> /home/ilippert/Documents/Studies/Publications&Products/Resources/Literature-bibtex.bib `

Can you manually check if after hitting save, a bib.tmp file is created?

The Autocomplete error, however seems to be fixed.
 =||= Yeah, thanks for the autcomplete error fix!!!

on the `java.nio.file.NoSuchFileException`: a tmp file is briefly generated and then vanishing. Only occasionally, when I hit save, the error occurs. =||= Okay, thanks. That no such file exception is probably a timing problem and  might be related how unix handles files.
https://stackoverflow.com/a/31725384/3450689 =||= Hello,
I have an analogous problem with JabRef 5.1, under Windows 10.
I also had the proboem with JabRef 5.0 (I intalled JabRef 5.1 as with a large repositories JabRef 5.0 is very slow and I could not use it, a problem fixed in JabRef 5.1).
In particular the problem manifests when I type in a field, e.g. I tried in ""Abstract"" or ""Comment"" (the latter a custom field).
It also manifests with a brand new JabRef repository having just 1 entry.
Actually the problem is two-fold:
1) Sometimes I get the exception reported below (I report the log for both the exception when typing the Abstract field and when typing the Comment field).
2) Sometimes the cursor jumps at the beginning of the field. I released this happens each time I save, so a first bug is that the cursor jumps at the beginning of the field when saving, e.g. with the automatic saving, which is very annoying. I read above that the problem of the discussion thread might be related to saving, which would explain why the two errors seemed to me to be linked.

The two problems are so impairing that basically I cannot write text longer than few words in JabRef fields, so I have to write it in another editor and then copy-paste.

*******************************************************************
TEXT OF EXCEPTION WHEN TYPING IN FIELD ""ABSTRACT""
java.lang.IndexOutOfBoundsException
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceSelection(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextAreaBehavior.insertNewLine(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextAreaBehavior.lambda$new$13(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)


TEXT OF EXCEPTION WHEN TYPING IN FIELD ''COMMENT''
java.lang.IllegalStateException: Task must only be used from the FX Application Thread
	at org.jabref.merged.module/javafx.concurrent.Task.checkThread(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.isRunning(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.onUserInputChanged(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.setUserInput(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.setUserInputText(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextArea$TextAreaContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.filterAndSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.doSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.callObservers(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.put(Unknown Source)
	at org.jabref/org.jabref.model.entry.BibEntry.setField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.BackupManager.performBackup(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.BackupManager.lambda$startBackupTask$2(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

 =||= for the jumping cursor, see https://github.com/JabRef/jabref/issues/5904 - might that be it? =||= @gianlucabaldassarre  For the one error on saving please try this version:
https://builds.jabref.org/pull/6455/merge
The other cursor jumping is somehow related to the Autocomplete I think and I could reproduce that in #5904  =||= We merged the changes now in master =||= Thanks, the error causing the exception went away, but as a secondary
effect the ""content selectors"" are no more visible (but OK, this is better
than having the error).

The cursor jump is still there: I tried to follow the threads about it and
I understood it is a still an unsolved problem, right?

On Mon, 11 May 2020 at 13:59, Christoph <notifications@github.com> wrote:

> @gianlucabaldassarre <https://github.com/gianlucabaldassarre> For the one
> error on saving please try this version:
> https://builds.jabref.org/pull/6455/merge
> The other cursor jumping is somehow related to the Autocomplete I think
> and I could reproduce that in #5904
> <https://github.com/JabRef/jabref/issues/5904>
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/6453#issuecomment-626658086>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/ADNLQD3KOQ5AU2ZLVLK6DTLRQ7SDDANCNFSM4M4V5UVA>
> .
>


-- 
.|.CS...|.......|...............|..|......US.|||.|||||.||.||||..|...|.......
Gianluca Baldassarre, Ph.D.,
Laboratory of Computational Embodied Neuroscience,
Istituto di Scienze e Tecnologie della Cognizione,
Consiglio Nazionale delle Ricerche (LOCEN-ISTC-CNR),
Via San Martino della Battaglia 44, I-00185 Roma, Italy
Senior Researcher at the Research Institute ISTC-CNR (www.istc.cnr.it)
Coordinator of Research Group LOCEN (https://www.istc.cnr.it/it/group/locen)
President of Advanced School in AI (www.as-ai.org)
President of Associazione culturale science2mind (www.science2mind.org)
Founder of ST&M4Humanity (www.stem4humanity.org <http://stem4humanity.org/>)
E-mail: gianluca.baldassarre@istc.cnr.it
Web: http://www.istc.cnr.it/people/gianluca-baldassarre
Tel:  +39 06 44 595 231
Skype: gianluca.baldassarre
Motto: 'Learn from the past, live in(tensely) the present, dream for the
future'
Life mission statement: 'Serve humanity through core knowledge'
...CS.|||.||.|||.||..|.......|........|...US.|.|....||..|..|......|.........
 =||= For some the comment fields cursor jumping seems to be fixed. If not I maybe have another idea.
Regarding content selectors, do you  have some defined for multilne fields? I disabled the autompletion only for the multiline fields =||= My current system:
JabRef 5.1--2020-05-14--46777c2
Windows 10 10.0 amd64
Java 14.0.1

> For some the comment fields cursor jumping seems to be fixed. If not I
maybe have another idea.

Yes, the cursor still jumps (e.g. when typing in the fields 'Abstract' and
'Comment', the latter being a custom field).
In particular it jumps:
- when I save with Ctrl+s or File-->Save (with the icon-save it jumps to
nowhere)
- once in a while for no apparent reason

> Regarding content selectors, do you have some defined for multilne
fields? I disabled the autompletion only for the multiline fields

Yes, I was using the content selector for Comment (custom field) that is
multiline.
 =||= ...one temporary solution for users, to be able to edit the Comment field, and other more-than-one-line fields having the problem, is as follows:
- Put some text into the Comment field, so the system creates such field
- Select the tab ""{ } biblatex source"" of the entry editor, and edit the Comment field (and other fields) from there: this does not have the problem   =||= By the way, I recall the attention of the JabRef developers that this is a quite impairing problem of the software since it prevents users from manually changing the contents of more-than-a-line fields: this is a basic important functionality of the software!
Of course how much the problem affects the community also depends on how many systems/configurations have this same problem, a thing I do not know. =||= Hi @gianlucabaldassarre , I took a look into the issue. I was able to partly recreate the problematic behaviour of jabref on my linux machine, although it does not happen every time I'm saving. I made an attempt to fix it, but I'm not quite sure, if it really works. Would you be so kind to test this build here ( https://github.com/JabRef/jabref/suites/720256702/artifacts/7152221 ) and to report, if this problem still persists on your machine? =||= Hi, the link you sent (
https://github.com/JabRef/jabref/suites/720256702/artifacts/7152221) seems to
lead me to download a linux version of JabRef (after unzipping the file, I
got the files:
jabref_5.1-1_amd64.deb, jabref-5.1-1.x86_64.rpm,
JabRef-5.1-portable_linux.tar.gz),
while I am using now this system:
JabRef 5.1--2020-05-14--46777c2
Windows 10 10.0 amd64
Java 14.0.1



On Wed, 27 May 2020 at 12:01, Carl Christian Snethlage <
notifications@github.com> wrote:

> Hi @gianlucabaldassarre <https://github.com/gianlucabaldassarre> , I took
> a look into the issue. I was able to partly recreate the problematic
> behaviour of jabref on my linux machine, although it does not happen every
> time I'm saving. I made an attempt to fix it, but I'm not quite sure, if it
> really works. Would you be so kind to test this build here (
> https://github.com/JabRef/jabref/suites/720256702/artifacts/7152221 ) and
> to report, if this problem still persists on your machine?
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/6453#issuecomment-634559016>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/ADNLQDYQ6RJ4KQ7SLDHHTJLRTTQIVANCNFSM4M4V5UVA>
> .
>


-- 
.|.CS...|.......|...............|..|......US.|||.|||||.||.||||..|...|.......
Gianluca Baldassarre, Ph.D.,
Laboratory of Computational Embodied Neuroscience,
Istituto di Scienze e Tecnologie della Cognizione,
Consiglio Nazionale delle Ricerche (LOCEN-ISTC-CNR),
Via San Martino della Battaglia 44, I-00185 Roma, Italy
Senior Researcher at the Research Institute ISTC-CNR (www.istc.cnr.it)
Coordinator of Research Group LOCEN (https://www.istc.cnr.it/it/group/locen)
President of Advanced School in AI (www.as-ai.org)
President of Associazione culturale science2mind (www.science2mind.org)
Founder of ST&M4Humanity (www.stem4humanity.org <http://stem4humanity.org/>)
E-mail: gianluca.baldassarre@istc.cnr.it
Web: http://www.istc.cnr.it/people/gianluca-baldassarre
Tel:  +39 06 44 595 231
Skype: gianluca.baldassarre
Motto: 'Learn from the past, live in(tensely) the present, dream for the
future'
Life mission statement: 'Serve humanity through core knowledge'
...CS.|||.||.|||.||..|.......|........|...US.|.|....||..|..|......|.........
 =||= @gianlucabaldassarre  https://github.com/JabRef/jabref/suites/720256702/artifacts/7152223
This one should be the right one for windows =||= I'm confused. I thought this is a linux specific issue. Does this affect windows too?
 =||= System:
JabRef 5.1-PullRequest6528.455--2020-05-26--0965648
Windows 10 10.0 amd64 
Java 14.0.1

@Siedlerchr: the problem of the cursor jumping at the beginning of multi-line fields when saving is still there (with https://github.com/JabRef/jabref/suites/720256702/artifacts/7152223)

@calixtus: I confirm, the problem is also in Windows 10 system (see system features above).

 =||= Refs https://github.com/koppor/jabref/issues/390 =||= Options:

- Remove normaliaztion --> no, we need it
- Normalize field during save of text editor
 =||= The multiline comment issue just got merged. Please wait until the new development version is ready =||= "Fix autocomplete thread"
Fixes #6453
The autcomplete binding was triggered when a cleanup called setBibEntry from a background thread.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/12/20, 06:40:19 AM
6477.06478Libreoffice connection broken in 5.1"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.1--2020-05-13--98b62ba on Ubuntu 18.04.4 Linux 4.15.0-99-generic amd64 (Java 14.0.1)

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [X] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
I installed the latest dev version because it fixed another bug I was having (see https://discourse.jabref.org/t/scrolling-by-typing-a-name-does-not-work-in-5-x/1989). This bug is fixed but I noticed I cannot connect to LibreOffice anymore, while it was working just fine with my previous version (5.0–2020-03-06–2e6f433). 

Steps to reproduce the behavior:
1. Open a LibreOffice document, and the LibreOffice/OpenOffice connection panel in JabRef.
2. Click ""connect"" (clicking on ""manual connect"" gives the same thing, and the path is correct).
3. While the connection was almost immediate on the previous version, now it gets stuck on a window ""Autodetecting paths..."" until I hit cancel. I have not managed to get a libreoffice connection working.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
(log file was empty)
  ```
</details>""This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= I'm sorry, I just tried but the bug is still there. My version is now 
JabRef 5.1--2020-05-14--09111be
Linux 4.15.0-99-generic amd64 
Java 14.0.1
 =||= Thanks for reporting, I  just noticed that the build did not deploy correctly and therefore the fix was not yet included. I have triggered a new build https://github.com/JabRef/jabref/runs/674881288 
Should be read in  roughly half an hour. =||= OK this time it worked, thanks so much!!
(now on JabRef 5.1--2020-05-14--46777c2) =||= "Fix libre office connection and other progress dialogs"Fixes #6477

Error was introduced in #6443 with the ProgressDialog showAndWait 
I had to revert that. @btut 
The showAndWait broke all dialogs which used the dialog.  (E.g). also copy linked files)

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/14/20, 09:07:02 AM
6459.06479Generated Key contains 'null' when (corporate) author contains several special words after curly braces"JabRef version JabRef 5.0--2020-03-06--2e6f433 on Ubuntu 19.10

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists (JabRef 5.1--2020-05-08--40f908f on Ubuntu 19.10).

Steps to reproduce the behavior:
1. Add the attached reference to a database
2. Check database integrity
3. Get notified of difference (""BibTex key deviates from generated key"")
4. Go to mentioned key, click ""generate key""
5. The key will now be ""nullL2019"".

Sample Bibliography
```bibtex
@Online{TSoL2019,
  author    = {{The School of Life}},
  editor    = {Abbot, Jack},
  date      = {2019-10-08},
  title     = {What Is The Secret Of Happiness?},
  url       = {https://youtu.be/sBSwJ6HOBG4},
  urldate   = {2019-11-05},
}
```

<details>
  <summary>Log File</summary>

  No events were generated in the event log, even though I followed procedure according to [the docs](https://docs.jabref.org/general/commandline), and I ran both the `.deb` and Portable versions (the latter I ran with the following options: `./JabRef --console --debug`).

  This was the output on the terminal:

  ```
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.

(java:20862): Gdk-WARNING **: 18:01:46.992: XSetErrorHandler() called with a GDK error trap pushed. Don't do that.
  ```
</details>""Thanks for your report. It would be helpful if you could tell us which key pattern you have defined for the entry type or if you are using the default pattern =||= Hi @Siedlerchr ! Thanks for your reply!

I don't think I have modified the defaults;

![Screenshot from 2020-05-10 22-43-20](https://user-images.githubusercontent.com/12400926/81510135-e4c30500-930f-11ea-8f8e-02ceb3c9102b.png)

If I click on the 'reset' button on the entry, a value of `[auth][year]` appears, instead of a blank value... but the behaviour is the same: the entry's generated key still contains `null`.

This may or may not be helpful, but I noticed that most of the ""corporate"" authors are not displayed properly; here's a screenshot on how the column is displayed for the author `{Commission on Isotopic Abundances and Atomic Weights}`:

![Screenshot from 2020-05-10 22-50-44](https://user-images.githubusercontent.com/12400926/81510304-040e6200-9311-11ea-99e4-8befaaa7ad13.png)

I don't think I have any odd settings on the 'Entry Table' settings:

![Screenshot from 2020-05-10 22-48-02](https://user-images.githubusercontent.com/12400926/81510385-87c84e80-9311-11ea-8122-269155514200.png)

Just to be on the safe side, I reset all my preferences, restarted JabRef, modified the entry's key, re-generated it and got the same results; also the same problem was present with the format of the corporate author's name in the author's column.

![Screenshot from 2020-05-10 23-01-51](https://user-images.githubusercontent.com/12400926/81510508-729fef80-9312-11ea-94b5-cc948b3f1a84.png)

Tomorrow morning I'll try uninstalling, removing configuration files, and see if there are any different results. =||= Thanks for your feedback! Resetting preferences was enough as clarification. Looks really like a bug,  =||= I can take a look at this? =||= @k3KAW8Pnf7mkmdSMPHz27  Sure go ahead =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fixes generated bibtex key and display of institute authors"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6459. Fixes #6465 .

There are two parts of this issue,
1. A null is prepended to an abbreviated BibTeX key.
2. Curly brackets are not respected (in the maintable's author column?).

**1. Fix to the prepended null**
*What is going on?*
`BracketedPattern.generateInstitutionKey` gets called for any author enclosed in curly brackets (e.g., `""{The School of Life}""`). The method expects an institute of technology or university and appends its name to the key (e.g., null if there is no name).

*Why is it going on?*
Academic institutions can have long generated BibTeX keys unless abbreviated, e.g., `""Royal Institute of Technology: The School of Electrical Engineering and Computer Science""`, which `generateInstitutionKey` shortens to `RITEECS`.

*Fix*
Replace a null valued university with an empty string. The drawback is potentially very short BibTeX keys (e.g., `The School of Life` -> `L`).

*What are alternatives?*
1. Regex matching universities and technological institutions, which is hard to implement correctly. On the other hand, the drawback is an unexpected BibTeX key in a corner case. In the case of `The School of Life` would be abbreviated to `SL` instead of `L`.

**2. Fix to the author column**
When the list of authors gets converted to a latex-free version, all curly brackets are removed since the whole string is parsed as latex. When the latex-free string is used to create/fetch an `AuthorList` it will no longer contain any brackets, and the information needed to format the string is gone.

**3. What I think is left to do**
- [x] Find out why `{The School of Life}`  isn't respected in the author field of the GUI
- [x] ~~Attempt to match universities etc. with regex~~ Assume that names that have comma separated parts are universities
- [x] ~~Update `BibtexKeyGeneratorTest` as it makes heavy use of deprecated methods~~ the deprecated methods are essentially convenience methods so they have been moved inside the test file
- [x] See if the readability of `generateInstitutionKey` can be improved
- [x] ~~Change the key generator for institution/corporate names to a Formatter?~~ `generateInstitutionKey` should not be a separate Formatter, it is only called by `normalize`.

and

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2705/28/20, 03:27:16 PM
6465.06479Double bracketed author name shows wrong in author/editor column" JabRef 5.1–2020-04-14–e86d415 on Windows 10 10.0 amd64 with Java 14.0.1

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Even if an author name is protected with brackets, it appears only in part in the Author/Editor column.

Steps to reproduce the behavior:
1. Load the following entry:
```
@WWW{Apple2020,
  author  = {{Apple Inc.}},
  date    = {2020},
  title   = {Eseguire il backup dei file con Time Machine sul Mac},
  url     = {https://support.apple.com/it-ch/guide/mac-help/mh35860/mac},
  urldate = {2020-5-09},
  langid  = {italian},
}
```
2. (optional) Use this entry in a text (Latex or markdown) to verify the text reference and citation are correct
3. In JabRef Author/Editor column, the author is shown as “Inc.” when I expected ""Apple Inc.""
4.  Same problem for other compound names like {Quote Investigator} that shows “Investigator” and {The LOGO Foundation} that appear as “Foundation”.""Different issue, but similar topic: issue #6388 . =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Well, no change. Same as before for `{Apple Inc.}`. I used the version 
JabRef 5.1--2020-05-27--c119ca2
Windows 10 10.0 amd64 
Java 14.0.1
Downloaded right now from builds.jabref.org/master =||= @crystalfp the PR was merged 22 min ago. I don't know how long it takes to build a new development version but I'd guess it will be included in JabRef 5.1--2020-05-28. =||= @crystalfp  You were a bit too fast, the new version is still building. It should be ready in roughly 10 minutes or so: https://github.com/JabRef/jabref/runs/717321958 =||= Unfortunately this version (2020-05-28 21:01) does not start. No message, no error, nothing. Removed previous version and reinstalled. Nothing. Is there any debug flag to see what happens?
Thanks!
 =||= If I run the portable version it not starts. Putting command line option `-h` gives the following errors:
```

C:\Users\Mario Valle\Downloads\JabRef\runtime\bin>JabRef -h
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
%d [%thread] %-5level %logger - %msg%n java.lang.NullPointerException: null
        at org.jabref.preferences.JabRefPreferences.lambda$updateColumnSortOrder$16(Unknown Source) ~[org.jabref:?]
        at java.util.ArrayList.forEach(Unknown Source) ~[?:?]
        at org.jabref.preferences.JabRefPreferences.updateColumnSortOrder(Unknown Source) ~[org.jabref:?]
        at org.jabref.preferences.JabRefPreferences.createMainTableColumnSortOrder(Unknown Source) ~[org.jabref:?]
        at org.jabref.preferences.JabRefPreferences.loadTableSaveOrder(Unknown Source) ~[org.jabref:?]
        at org.jabref.preferences.JabRefPreferences.loadForExportFromPreferences(Unknown Source) ~[org.jabref:?]
        at org.jabref.preferences.JabRefPreferences.getCustomExportFormats(Unknown Source) ~[org.jabref:?]
        at org.jabref.preferences.JabRefPreferences.getExporterFactory(Unknown Source) ~[org.jabref:?]
        at org.jabref.JabRefMain.applyPreferences(Unknown Source) ~[org.jabref:?]
        at org.jabref.JabRefMain.start(Unknown Source) ~[org.jabref:?]
        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source) ~[org.jabref.merged.module:?]
        at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source) ~[org.jabref.merged.module:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
```
Could be an hint?
 =||= @crystalfp Try to reset your preferences, add the commandline swtich `-d all`
cc @calixtus  Related to your changes?  =||= I noticed this behaviour already before, I thought this was already reported as an issue. =||= Anyway, we are drifting to a different problem. I'll wait for another build to check the fix. Thanks!
FYI: `-d all` do nothing. Same error. =||= The newest portable version should start if you start JabRef with the mentioned commandline switch. But back to the main problem: Bracket names are not kept together as they are in biber and latex.

Could be related to the issue mentioned in the post merge discussion in #6479 ? =||= The original problem and the last no-start one have been solved in:
JabRef 5.1--2020-05-29--ed275b6
Windows 10 10.0 amd64 
Java 14.0.1
I'm going to close this issue.
Thanks!
mario =||= "Fixes generated bibtex key and display of institute authors"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6459. Fixes #6465 .

There are two parts of this issue,
1. A null is prepended to an abbreviated BibTeX key.
2. Curly brackets are not respected (in the maintable's author column?).

**1. Fix to the prepended null**
*What is going on?*
`BracketedPattern.generateInstitutionKey` gets called for any author enclosed in curly brackets (e.g., `""{The School of Life}""`). The method expects an institute of technology or university and appends its name to the key (e.g., null if there is no name).

*Why is it going on?*
Academic institutions can have long generated BibTeX keys unless abbreviated, e.g., `""Royal Institute of Technology: The School of Electrical Engineering and Computer Science""`, which `generateInstitutionKey` shortens to `RITEECS`.

*Fix*
Replace a null valued university with an empty string. The drawback is potentially very short BibTeX keys (e.g., `The School of Life` -> `L`).

*What are alternatives?*
1. Regex matching universities and technological institutions, which is hard to implement correctly. On the other hand, the drawback is an unexpected BibTeX key in a corner case. In the case of `The School of Life` would be abbreviated to `SL` instead of `L`.

**2. Fix to the author column**
When the list of authors gets converted to a latex-free version, all curly brackets are removed since the whole string is parsed as latex. When the latex-free string is used to create/fetch an `AuthorList` it will no longer contain any brackets, and the information needed to format the string is gone.

**3. What I think is left to do**
- [x] Find out why `{The School of Life}`  isn't respected in the author field of the GUI
- [x] ~~Attempt to match universities etc. with regex~~ Assume that names that have comma separated parts are universities
- [x] ~~Update `BibtexKeyGeneratorTest` as it makes heavy use of deprecated methods~~ the deprecated methods are essentially convenience methods so they have been moved inside the test file
- [x] See if the readability of `generateInstitutionKey` can be improved
- [x] ~~Change the key generator for institution/corporate names to a Formatter?~~ `generateInstitutionKey` should not be a separate Formatter, it is only called by `normalize`.

and

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2705/28/20, 03:27:16 PM
6487.06503Opening BibTex file (doubleclick) from Folder with spaces not working"When double click a BibTeX file in the file browser, then JabRef opens with message “File not found”.
The file opens only through the menu of Jabref: File–> Open…
That happens after the last upgrade.""Same problem, Windows 10, Jabref v5.0 cannot open .bib files with double-click. Only ""File->Open"" or drag-n-drop*.
Surprisingly, double-click always works if file is located on desktop (discovered by accident)!
Not opening behaviour depends on whether JabRef application was already launched or not when trying to open with double click:
1) not launched => I get an error message 
""Error opening file 'filename.bib'. 
File not found""
2) launched => I get NO error message and TWO tabs appear:
first one called ""untitled"", second called ""filename.bib"", but both are empty (""no content in table"")

(*) Maybe this should be a separate issue, but opening by drag-n-drop also has a problem, it works only if I drag file in the panel with tabs (see the screenshot below):
![image](https://user-images.githubusercontent.com/18900780/82221065-c8caef00-991f-11ea-81c3-95d3e6f899e4.png)
It means that I need to have at least one file already opened, otherwise there is no panel with tabs and this method will not work. 
![image](https://user-images.githubusercontent.com/18900780/82221552-72aa7b80-9920-11ea-9209-91fee71ede32.png)

I suggest to make empty JabRef window also active for drag-n-drop.
 =||= I have the exact same problem. I am also running Windows 10 and have the same behaviour as @mrjoposranchik and @cpsychal. =||= Regarding Drag and Drop: I think the Drag and drop listener is installed on the tab bar. That would explain at least the opening of files.  Must be probably moved to JabRefFrame or so. =||= Doube clicking on a bib file works and opens JabRef fine in the latest development version
@cpsychal  Can you please give us a bit more details, e.g. which OS you are using and if you have tested the latest development version? =||= JabRef 5.0--2020-03-06--2e6f433

Windows 10 10.0 amd64 

Java 13.0.2

 �

 �

From: Christoph <notifications@github.com> 
Sent: Tuesday, May 19, 2020 19:40
To: JabRef/jabref <jabref@noreply.github.com>
Cc: Costas Psychalinos <cpsychal@upatras.gr>; Mention <mention@noreply.github.com>
Subject: Re: [JabRef/jabref] Open BibTeX file through the file browser and Drag and drop on empty database not working (#6487)

 �

Doube clicking on a bib file works and opens JabRef fine in the latest development version
@cpsychal <https://github.com/cpsychal>  Can you please give us a bit more details, e.g. which OS you are using and if you have tested the latest development version?

—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub <https://github.com/JabRef/jabref/issues/6487#issuecomment-630940081> , or unsubscribe <https://github.com/notifications/unsubscribe-auth/AFLNQOBNZFQJSCWE3DNEHALRSKY4NANCNFSM4NDAHL6A> .  <https://github.com/notifications/beacon/AFLNQOCHUKWMBX65GNJJBLDRSKY4NA5CNFSM4NDAHL6KYY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOEWNWDMI.gif> 

 =||= > Doube clicking on a bib file works and opens JabRef fine in the latest development version
> @cpsychal Can you please give us a bit more details, e.g. which OS you are using and if you have tested the latest development version?

The behaviour I experience is that JabRef opens but it gives an error message. One can close this error message and the application does not close, but it does not load the bib file. One then has to go and open the bib file from within JabRef.

![Error](https://user-images.githubusercontent.com/41417622/82369460-5a695800-9a17-11ea-8505-e17980804a1f.png)
 =||= The drag and drop should be fixed by @MootezSaaD  now in the latest development version:
https://builds.jabref.org/master/

Edit// I could not reproduce the issue with the double clicking on Windows 10

Please remember to make a backup of your library before trying out the new version. =||= > Doube clicking on a bib file works and opens JabRef fine in the latest development version
> @cpsychal Can you please give us a bit more details, e.g. which OS you are using and if you have tested the latest development version?

I was checking the previous dev version for 5 minutes when a new update appeared.
In the previous version double click opened a .bib file for me once, but only for the case when app was not started. After that with running app double click resulted in a single ""untitled"" tab. (I didn't investigate much)
In the latest development version double click doesn't work. If app was not running - empty JabRef window opens. If app was already running - ""untitled"" tab.
If file is on the desktop - it works in both cases! (Why? Is it true for other people with the same issue?)

Drag and drop works well now! Thank you, @MootezSaaD ! =||= Could you please completey uninstall JabRef and then reinstall the new version? It might that the file asociation is somewhat broken =||= I have completely uninstalled JabRef and installed the latest development version at   [https://builds.jabref.org/master/](url). This is the behaviour I get now:

- If I double click on a .bib file while JabRef is NOT running then JabRef opens (it no longer gives me the error message). However, it does not open the file which I double clicked.

- If I double click on a .bib file while JabRef is running it opens a new library called ""untitled"" but not the file I double clicked.

- If I open JabRef first and then open a file using ""File"" → ""Open library"" it works fine. =||= > I have completely uninstalled JabRef and installed the latest development version at [https://builds.jabref.org/master/](url). This is the behaviour I get now:
> 
> * If I double click on a .bib file while JabRef is NOT running then JabRef opens (it no longer gives me the error message). However, it does not open the file which I double clicked.
> * If I double click on a .bib file while JabRef is running it opens a new library called ""untitled"" but not the file I double clicked.
> * If I open JabRef first and then open a file using ""File"" → ""Open library"" it works fine.

It seems that we have exactly the same symptoms. However, I didn't try to reinstall from scratch yet. May I kindly ask you to try to place a .bib file on Desktop and open it with double-click to confirm or disprove that Desktop location is somewhat special? =||= I tried opening a .bib file directly on the desktop but the behaviour I get is exactly the same as with a .bib file placed elsewhere on the system. So I don't seem to get the special behaviour you described @mrjoposranchik . =||= Same issue here. 

JabRef version 5.0 on Windows 10

Opening .bib files from within JabRef is fine but clicking on a .bib file in Windows Explorer results in a blank page on JabRef.

Steps to reproduce the behaviour: double click on a .bib file icon. =||= > Same issue here.
> 
> JabRef version 5.0 on Windows 10
> 
> Opening .bib files from within JabRef is fine but clicking on a .bib file in Windows Explorer results in a blank page on JabRef.
> 
> Steps to reproduce the behaviour: double click on a .bib file icon.

Same issue above  =||= I have exported my Windows 10 registry settings for the file association and open with application.
While I have the dev version installed it should theoretically also work with the 5.0
It assumes that JabRef is installed under C:\Program Files\JabRef 
Just remove the .txt file extension and execute it 

WARNING: TRY AT YOUR OWN RISK
[jabref_fileassociation.reg.txt](https://github.com/JabRef/jabref/files/4724736/jabref_fileassociation.reg.txt)

 =||= > I have exported my Windows 10 registry settings for the file association and open with application.
> While I have the dev version installed it should theoretically also work with the 5.0
> It assumes that JabRef is installed under C:\Program Files\JabRef
> Just remove the .txt file extension and execute it
> 
> WARNING: TRY AT YOUR OWN RISK
> [jabref_fileassociation.reg.txt](https://github.com/JabRef/jabref/files/4724736/jabref_fileassociation.reg.txt)

Tried that, didn't fix the issue with double-click. =||= I think I noticed something important:
double-click works for me not only from Desktop, but also from D:\biblio.bib and even e.g. D:\1\biblio.bib or D:\a\biblio.bib
BUT
if I try to open ""D:\1 1\biblio.bib"", it fails as usual (there is a space in the folder name)
I tried to replace all the spaces with underscores in the path to one of my .bib files and it also started to work.
Finally, I renamed it from ""biblio.bib"" to ""bib lio.bib"" and it started to fail again.
So any space in the path to file breaks it.

I hope this info will help to fix the issue! =||= Thanks! Indeed that information could be helpful.  =||= I did a test and got the same behavior as @mr-j-s . 

If the file path to the "".bib"" file has any spaces in it at any point, then when double clicking on the "".bib"" file JabRef opens to a blank page, but it does not open the "".bib"" file itself.

If there are no spaces in the file path. Then JabRef opens the "".bib"" file as would be expected.

This file path did **not** work: ""D:\New Folder\References.bib""
This file path did work: ""D:\References.bib"" =||= > I tried opening a .bib file directly on the desktop but the behaviour I get is exactly the same as with a .bib file placed elsewhere on the system. So I don't seem to get the special behaviour you described @mrjoposranchik .

I have a space in the path to my desktop which explains why this did not work for me earlier. =||= I could reproduce this as well using a space in the folder. I checked the registry,, there the open with is correctly wrapped in spaces. Maybe an issue with our commandline parser =||= If the path contains Chinese characters, it will have the same error.  =||= Same issue. Jabref 5.2 on Windows 10. Cannot open a bib file by double clicking on it when the full path of that file contains spaces. If is is copied to a location with no spaces in the path then it works fine. I hope this bug gets fixed soon as I remember experiencing this annoying behavior of Jabref for quite some time. =||= I'm trying to fix this. Got some clues already. =||= Thanks to @XDZhelheim this should now finally be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix Drag and Drop on empty database"Fixes #6487
Did as @Siedlerchr mentioned, I have added the drag and drop listeners to jabref's frame.
However, I could not reproduce the first part of the issue (double-clicking on the bib file), it works on my side, that is why I have opened a draft PR.

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mootez SaadMootezSaaD05/21/20, 05:34:04 PM
6507.06511InvalidPathException after right-click on entry with an eprint via arXiv fetcher"JabRef version JabRef 5.1--2020-05-21--950d9c0 on  Windows 10

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Go to the web search pane
2. Enter search keywords in the text field
3. Import entry
4. Right-click on the entry in the main table

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
 java.nio.file.InvalidPathException: Illegal char <:> at index 4: http://arxiv.org/pdf/1911.01235v1
	at java.base/sun.nio.fs.WindowsPathParser.normalize(Unknown Source)
	at java.base/sun.nio.fs.WindowsPathParser.parse(Unknown Source)
	at java.base/sun.nio.fs.WindowsPathParser.parse(Unknown Source)
	at java.base/sun.nio.fs.WindowsPath.parse(Unknown Source)
	at java.base/sun.nio.fs.WindowsFileSystem.getPath(Unknown Source)
	at java.base/java.nio.file.Path.resolve(Unknown Source)
	at org.jabref/org.jabref.model.util.FileHelper.find(Unknown Source)
	at org.jabref/org.jabref.model.util.FileHelper.lambda$find$0(Unknown Source)
	at java.base/java.util.stream.ReferencePipeline$7$1.accept(Unknown Source)
	at java.base/java.util.ArrayList$ArrayListSpliterator.tryAdvance(Unknown Source)
	at java.base/java.util.stream.ReferencePipeline.forEachWithCancel(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.copyIntoWithCancel(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.copyInto(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(Unknown Source)
	at java.base/java.util.stream.FindOps$FindOp.evaluateSequential(Unknown Source)
	at java.base/java.util.stream.AbstractPipeline.evaluate(Unknown Source)
	at java.base/java.util.stream.ReferencePipeline.findFirst(Unknown Source)
	at org.jabref/org.jabref.model.util.FileHelper.find(Unknown Source)
	at org.jabref/org.jabref.model.util.FileHelper.find(Unknown Source)
	at org.jabref/org.jabref.gui.actions.ActionHelper.lambda$isFilePresentForSelectedEntry$3(Unknown Source)
	at java.base/java.util.Optional.map(Unknown Source)
	at com.tobiasdiez.easybind/com.tobiasdiez.easybind.optional.PreboundOptionalBinding$1.computeValue(Unknown Source)
	at com.tobiasdiez.easybind/com.tobiasdiez.easybind.optional.PreboundOptionalBinding$1.computeValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.ObjectBinding.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.ObjectExpression.getValue(Unknown Source)
	at com.tobiasdiez.easybind/com.tobiasdiez.easybind.optional.PreboundOptionalBinding$3.computeValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.ObjectBinding.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.ObjectExpression.getValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanExpression$2.computeValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanBinding.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.Bindings$BooleanAndBinding.computeValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanBinding.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.ReadOnlyBooleanWrapper$ReadOnlyPropertyImpl.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.Bindings$52.computeValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanBinding.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.get(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanExpression.getValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanExpression.getValue(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanBinding.invalidate(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanBinding.invalidate(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.Bindings$ShortCircuitAndInvalidator.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.BooleanBinding.invalidate(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ModifiableObservableListBase.setAll(Unknown Source)
	at org.jabref/org.jabref.gui.StateManager.setSelectedEntries(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.lambda$createMainTable$1(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.scene.control.SelectedItemsReadOnlyObservableList.lambda$new$1(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.scene.control.ReadOnlyUnbackedObservableList._endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.control.MultipleSelectionModelBase$SelectedIndicesList._endChange(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.control.ControlUtils.updateSelectedIndices(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.control.TableView$TableViewArrayListSelectionModel.fireCustomSelectedCellsListChangeEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.control.TableView$TableViewArrayListSelectionModel.clearAndSelect(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.control.TableView$TableViewSelectionModel.clearAndSelect(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.scene.control.behavior.TableCellBehaviorBase.simpleSelect(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.scene.control.behavior.TableCellBehaviorBase.doSelect(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.scene.control.behavior.CellBehaviorBase.mousePressed(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.1.423/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.1.423/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>""Thanks for spotting the error. Is now fixed in latest dev.
 =||= "Return true in action helper if file is online link"otherwise it will be interpreted as path which obiously fails

Fixes #6507



<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

~~- [ ] Change in CHANGELOG.md described (if applicable)~~ Dev version only
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr05/22/20, 05:28:21 PM
6447.06516Changes in entry preview are not saved"JabRef 5.1--2020-05-04--b5599c9
Linux 4.9.0-12-amd64 amd64 
Java 14.0.1

Changes in the entry preview format are accounted for _only_ after restarting.

Note 1:  may seem similar to issue #5464, but the present issue is about _the content_ of the preview.
Note 2: issue is present with ""Show preview as tab in entry editor"" checked or unchecked.


Steps to reproduce the behavior:

1. Create a file with the following entry and save it
```
@Article{MyKey,
  author    = {Author1, Surname1 and Author2 Surname2},
  journal   = {The Journal title},
  title     = {The title of the article},
  year      = {2020},
  number    = {12},
  pages     = {1-100},
  volume    = {15},
 }
```
2. Go to Options -> Preferences -> Entry preview
3. Select ""Preview"" in the column ""Selected""
4. Click on the Edit tab
5. Change
`\begin{journal} <em>\format[HTMLChars]{\journal}, </em>\end{journal}`
into
`\begin{journal} <em>\format[HTMLChars]{\journal},HereIsMyChange </em>\end{journal}`
6. Go to the preview Tab.
    ==> The preview is updated accordingly.
7. Click on save
8. Edit the entry
The preview shows: 
![Capture du 2020-05-08 15-26-09](https://user-images.githubusercontent.com/6931104/81410004-5a787680-9140-11ea-9daa-228aeb24c57e.png)
   `HereIsMyChange` is not displayed ==> The preview is NOT updated.
8. Close and reopen JabRef
9. Edit the entry
The preview shows: 
![Capture du 2020-05-08 15-20-54](https://user-images.githubusercontent.com/6931104/81409511-8a734a00-913f-11ea-80b7-48a952885730.png)
     `HereIsMyChange` is displayed  ==> The preview is updated NOW.""Thanks for the report. Does the Preview update if you close and reopen the entry editor? =||= No.
And it does not update if I switch tabs (between already-open files).
But the preview get updated if I close and reopen a file (but only for this file. Not for the ones in the other tabs). =||= @Siedlerchr I am interested in this issue. Can you give me any suggestions or any relevant code where the bug might be? =||= @dimitra-karadima  Some points: PreviewTab (in the preferences) as well and for the entry editor it might be the PreviewPanel. Probably that the PreviewPreferences are not reloaded in the PreviewPanel when a new style or a modified style is saved

Maybe @leitianjian can help you a bit, she/he worked recently in that area  =||= @Siedlerchr thanks for the guidance! I will check it out. =||= My point of view was to find out where the new changes are being saved in order to update there the PreviewTab. I have found that this happens in https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/preferences/PreviewTabViewModel.java#L204 so I made an instance of PreviewPanel in order to update Layout, but it didn't work. I don't know if it is that I created a new Object or it was the wrong thought. @Siedlerchr or anyone else any thoughts? =||= Hi, I think this bug is hard to locate and has huge gaps between the previous bug I fixed and this one. I also stuck in it. If you don't mind and you don't work on it, I will fix this bug. If you are still working on it, keep going on, we can discuss it according to your progress. Sorry for my late reply. I do not receive any notification that I have been mentioned. Sorry again.   =||= @leitianjian I am not working on it because I am kinda stuck. All I have found was what I mentioned above. I am kind of busy so you can work on it if there are a lot of steps left, but if I am on the right path we can discuss it and try to find the solution together. =||= Thanks for your kindness. In fact, I find that your path is not exactly correct. We should not initialize another object of PreviewPanel which is JavaFX Vbox. I think we should modify some code to let the PreviewPanel content update after saving the preferences, which is a little difficult and deep tasks. The things I'm doing now is to figure out how the preview showing on the EntryEditor, and trying to give an elegant solution to update the preview. If you are still interested in it. Feel free to ask, we can work on this bug together. =||= Thanks to @leitianjian  this should be fixed =||= Sorry for the delay in testing the fix.
The behavior changed, but I am afraid **the issue is not fixed**.
Now (JabRef 5.1--2020-06-09--595f085), the preview cannot be redefined: The changes in the preview (carried out at step 5) are not saved (after step 7). When I go back to the preferences, my changes in the  preview code are not recorded. =||= ping @Siedlerchr @leitianjian  =||= Hello,
may it is helpful to change to topic of the bug. I just wanted to report a new bug and did find this one only by accident. Maybe something like ""Changes in entry preview are not saves"" =||= Still reproducible in the current dev version.  Problem was that the layout was not found due to incorrectly using a l10n value for comparison
 =||= The issue is now finally resolved in the latest master (currently building)

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Works in `5.2--2020-11-06--2f27dd3` and `5.2--2020-11-07--df80c13` (Win 10, `Java 1.8.0_271-b09`). Thanks for fixing! =||= Can also confirm that it works. =||= Fixed, indeed. Thank you @Siedlerchr! =||= Every time I open JabRef something in the customized entry preview style I have already changed many times is reset again.
- Instead of
`\begin{comment}<BR><BR><b>Comment: </b>\format[HTMLChars]{\comment}\end{comment}`
- the following reappears again:
`\begin{comment}<BR><BR><b>Comment: </b>\format[Markdown,HTMLChars]{\comment}\end{comment}`

So, `Markdown` keeps reappearing in the `\format[]` command. This causes an additional line break after ""Comment:"" which I don't want to have there. Where does that come from? If others discover the same problem I unfortunately consider the issue `not solved`. =||= @AtrusRiven Which version of JabRef are you using?
Note: the fix is in the development version (https://builds.jabref.org/master/) =||= I'm using the actual master build (`5.2--2020-11-10--f5c52a2`). =||= Indeed, can reproduce this. for some reason it's not saved after a restart or reset on a restart.  =||= @AtrusRiven  You have triggered an edge case, it's the Preferences Migration that is executed on startup that overwrites your changes. Just add a space after the HtnlChars Formatter Name : `\format[HTMLChars ]{\comment}` to prevent an exact match.

https://github.com/JabRef/jabref/blob/b9be53e056d92837d827efc2a70a06ff733ad0b7/src/main/java/org/jabref/migrations/PreferencesMigrations.java#L313-L319 =||= Thanks, now it works. What is this replacement for? =||= It's a migration if you come from a previous version. E.g. If some internal fields or prefs got renamed 
 Migrations are run on startup. As the newer versions support Markdown,the preview should show that as well. =||= At the moment, switched on Markdown results in a line break as I mentioned above. Would it be possible to remove that automated line break? =||= "Add some javadoc and fix the preview update issue"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6447 

I have taken a long time considering how to update the preview when preference change. After I found that the PreviewPanel will be bind to entry in FieldsEditorTab.java, then we can just update the layout in PreviewPanel.java#setEntry()

Some ideas:
Can we using observer pattern to refactor the code: JabRefPreferences as Observable object and component need preferences can register as Observer. If the preferences were changed, we can notify the affected component to do an update?

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tianjian leileitianjian05/25/20, 05:50:13 PM
6515.06518The maintable authors' column does not update on preference change"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

<!-- version as shown in the about box --> <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

In JabRef 5.0--2020-03-09--6bff936 changes in `preferences -> entry table -> Format of author and editor names` updates the column. E.g., changing from ""Firstname Lastname"" to ""Lastname, Firstname"" is immediately shown.

In the current master (built from Intellij on Mac OS 10.15.4 the 23rd of May) changes requires a restart before the author column updates.
It also does not work with
JabRef 5.1--2020-05-22--ef2a31c
Mac OS X 10.15.4 x86_64 
Java 14.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Attempt to change the style of the authors' column
2. Press save
3. Notice that the format of the authors' names are not changed
4. Easiest to spot with ""Firstname Lastname"" to ""Lastname, Firstname""

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Maybe I could try to check what differences are between these two version and find solution to enhance it ^_^ =||= Thanks for your interest, there recently have been some refactorings of the preferences, maybe that is related (@calixtus ) =||= Thanks for the bug report. In fact, this is related to a deeper issue with the preferences, which existed already before I started refactoring the preferences. In the long run, the refactorings target to provide a clean solution for this one besides others.

Possible workaround: close and reopen the library in JabRef.

I'll look for a temporary quick fix for this issue. =||= Funny, I already started to work on the main table preferences on friday, but did not yet create a pull request. 😄  =||= "Refactor main table preferences"Follow up to #6509 

Merged table preferences, see the screenshot.

![grafik](https://user-images.githubusercontent.com/50491877/82758371-7d648500-9de6-11ea-8e4e-4cd2c64823dc.png)

Fixes #6515 

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus05/28/20, 06:34:06 PM
5904.06528Cursors jumps to the beginning"Using JabRef 5.* dev (29th January 2020).

I intensivly use the ""comments"" field to add my own notes to the entries. So there is often a lot of text and lines in it.

While typing it often happens that the cursor jumps back to the first line and first column.""On Windows 10 I cannot reproduce the error. Could you also please try the latest snapshot and report your OS? =||= I am confused.
Somebody asked me (on a GitHub issue) to record a video about this behavior.
I did and uploaded it here/somehwere (?).

Maybe it was a forked repo? =||= I got it. I was totally stumped about reading to much Issues the same time. ;)
I posted the video on the wrong Issue.

[5904 - entry window - cursor jump.zip](https://github.com/JabRef/jabref/files/4177845/5904.-.entry.window.-.cursor.jump.zip)

The zip file contains an avi-file (recorded with MS PowerPoint 2016 and converted with Avidemux) and the bib-file generated while the recording. The video is recorded on Windows 10. But I can also reproduce the behaviour with Debian 10.

What you can see in the video: The first jumps of the cursors looks like that they are somehow connected to my Strg+S pressing. But later the jumps ocure also without saving. There is also a nice Exception.
btw: I totally ignore exceptions in the current state of JabRef because they appear so often in so many cases. =||= @Codeberg-AsGithubAlternative-buhtz Wasn't this meant as an answer to this question?

https://github.com/JabRef/jabref/issues/5079#issuecomment-581174352 =||= I do not understand your question. =||= I am referring to this:

> 
> I am confused.
> Somebody asked me (on a GitHub issue) to record a video about this behavior.
> I did and uploaded it here/somehwere (?).
> 
> Maybe it was a forked repo?

(https://github.com/JabRef/jabref/issues/5904#issuecomment-583892624)

and this:

> I got it. I was totally stumped about reading to much Issues the same time. ;)
> I posted the video on the wrong Issue.

(https://github.com/JabRef/jabref/issues/5904#issuecomment-583894638)

Isn't this video meant as a response to the question made here:
https://github.com/JabRef/jabref/issues/5079#issuecomment-581174352

?
 =||= Correct. The video was not an answer to #5079 . Because of that I removed the video and my comment from there.

I am not sure how this confusion could happened. ;)

The video is for this (#5904) Issue to demonstrate the problem. =||= Ah, cheers! Sorry for the confusion. =||= I can reproduce this issue if one places a whitespace at the end of the comment and saves the library with ctrl+s

**Edit:** This actually happens with every field =||= Can still reproduce with windows nightly from 24.02.2020 =||= I have the same issue on Windows 10 (10.0 amd64) with JabRef 5.0--2020-03-06--2e6f433 and Java 13.0.2.

On my system, the following approach reproduces the issue:
1. Create new entry
2. Go to 'Comments' field
3. Press `Enter` once
4. Keep pressing any key, e.g. `a`

After about 400 keystrokes (the number varies) the cursor jumps to the beginning of the comments field.

If I press `Spacebar` instead of `Enter` in Step 3, I get an uncaught exception, again after about 400 keystrokes:

```
java.lang.IndexOutOfBoundsException
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextAreaBehavior.replaceText(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.defaultKeyTyped(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.TextInputControlBehavior.lambda$keyMapping$62(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
``` =||= I have the same (or at least similar) issue. However there is a popup error too.

```
JabRef 5.0--2020-03-09--6bff936
Linux 5.3.0-51-generic amd64 
Java 13.0.2
```

Ubuntu 18.04.4 LTS
```
me@pc:~$ java --version
openjdk 11.0.7 2020-04-14
OpenJDK Runtime Environment (build 11.0.7+10-post-Ubuntu-2ubuntu218.04)
OpenJDK 64-Bit Server VM (build 11.0.7+10-post-Ubuntu-2ubuntu218.04, mixed mode, sharing)
```

<details>
  <summary>Content of the popup:</summary>
  
  ```
java.lang.IllegalStateException: Task must only be used from the FX Application Thread
	at org.jabref.merged.module/javafx.concurrent.Task.checkThread(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.isRunning(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.onUserInputChanged(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.setUserInput(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.setUserInputText(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextArea$TextAreaContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.filterAndSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.doSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.callObservers(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.put(Unknown Source)
	at org.jabref/org.jabref.model.entry.BibEntry.setField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.BackupManager.performBackup(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.BackupManager.lambda$startBackupTask$2(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)windows sometimes
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details> =||= I also know this popup error. But I wasn't able to reproduce it stable. So I did not report it here. =||= There have been multiple reports on the errors. They have more or less the same underlying reason (gui access from other thread). Comes from saving/backup manager.  =||= Could you all please try this version?  https://builds.jabref.org/pull/6455/merge/
I disabled autoconpletion for multiline fields as it appeared to be the reason for the error and the threading error is fixed as well.

 =||= I did a quick test and the issue seems to be fixed! Thanks :)

I'll keep using your build and let you know if any errors occur. =||= For me, there's no change in the ""cursor bouncing to top of comment window"" problem.

JabRef 5.1-PullRequest6455.385--2020-05-11--afc4fd7
Windows 10 10.0 amd64 
Java 14.0.1 =||= We merged the changes from the PR to master

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Still no change.  The cursor bounces to the top of the comment window.

JabRef 5.1--2020-05-12--ce49261
Windows 10 10.0 amd64 
Java 14.0.1 =||= I can confirm, that the problem of the bouncing cursor is still present. It is particularly tedious because it jumps while writing.

The Markdown feature is awesome, however! 
One slight problem I am experiencing with the Markdown extension is, that the symbol "">"" is not parsed and instead I get `&gt;`. This might be due to the German keyboard, though

JabRef 5.1--2020-05-18--a4f8ba3
Windows 10 10.0 amd64 
Java 14.0.1 =||= Internal idea: we check at the update of a field: if new text != old text then udpate (see binding) =||= Can confirm that the curors still jumps to the beginning when saving.

JabRef 5.1--2020-05-26--0d7156b
Windows 10 10.0 amd64 
Java 14.0.1 =||= Interestingly, the jumping to the start seems to have disappeared in
```
JabRef 5.1--2020-06-15--ed96faa
Linux 5.6.0-2-amd64 amd64 
Java 14.0.1
```
(But I'm not quite sure yet, it is hard to trigger on purpose...)
However, I still get a ""The library has been modified by another program"" warning which says the comment has changed:
![image](https://user-images.githubusercontent.com/431045/84735583-2c3e5000-afa4-11ea-82d2-160b9a6beca3.png)
 =||= @reox  We are currently investigating this issue and discovered that it has to do with different line break characters. See #6528   =||= Not disappeared by me. Cursor still jumps in 

```
JabRef 5.1--2020-06-22--403a47f
Windows 10 10.0 amd64 
Java 14.0.1
``` =||= JabRef 5.1--2020-06-25--d364ffb
Linux 5.6.19-300.fc32.x86_64 amd64 
Java 14.0.1

cursor still jumps =||= I think i fixed the issue with cursor jumping. This might also fix the library changed. 
Could you please test this version from here? https://builds.jabref.org/pull/6528/merge/ =||= thanks a lot!

JabRef 5.1-PullRequest6528.793--2020-07-11--93eaf4f
Linux 5.7.7-200.fc32.x86_64 amd64 
Java 14.0.1

seems to have fixed this, tells my 10 min testing. i would post it here, if it reappears anytime soon? =||= Yes, if you encounter the problem again with that version please let us know.
 =||= Can confirm the fix for this version
```

JabRef 5.1-PullRequest6528.793--2020-07-11--93eaf4f
Windows 10 10.0 amd64 
Java 14.0.1
```

https://github.com/JabRef/jabref/pull/6528 =||= I'm on
```
JabRef 5.1--2020-07-20--9cd9390
Linux 5.7.0-1-amd64 amd64 
Java 14.0.2
```
and still have this issue :(. On some occasions the cursor will  jump to the beginning of the comment field.
Should the fix be in that version already? Or do I need to fix the library file first or something like that? =||= Sorry; I am afraid the issue reoccurs:
JabRef 5.2--2020-11-23--350ec1f
Linux 5.9.9-200.fc33.x86_64 amd64 
Java 15.0.1

I use the Annote field to annotate the entry. And the cursor jumps occasionally back to the first line's beginning.

Should this be a new issue, or reopened here? =||= "Additional check if values have changed in bindToEntry"
Fixes  #5904

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus07/17/20, 03:23:35 PM
6527.06551Add more menu items to tab context menu"JabRef 3.8.2:

![grafik](https://user-images.githubusercontent.com/1366654/82867871-e3a6f000-9f2b-11ea-8cc7-031aceb5d115.png)

The old implementation is available at https://github.com/JabRef/jabref/commit/88bae8571a5afc0ba9967745f57d74347db112ad. Maybe, this some sort of inspiration.""Hi, I am interested in this issue. 
If no one is working on this issue, I'll try to work on it these two days.^_^ =||= Hi, I have add the menu items as following:
![image](https://user-images.githubusercontent.com/55199983/83178854-b6d52180-a153-11ea-9e26-b4bb2cec7d41.png)

Is it enough or it needs more other menu items? 
 =||= @Hollyqqqqq  Thanks, that looks good to me! That should be sufficient for the moment =||= OK^_^
I will try to write some tests, and then create pr. =||= Sorry, I got stucked into how to run tests although I have some ideas to write tests. There are always errors like ""Error(19, 33) java: program package org.jabref.logic.journals not exist"" when running both original tests and the tests I added. I have troubles to solve these errors.

Then, I will just create pr for codes that fix this issue and skip the tests codes for the moment. =||= Thanks to @Hollyqqqqq this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Add more menu items to library context menu"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6527 

Before fixed:

![image](https://user-images.githubusercontent.com/55199983/83242952-cabe6900-a1cf-11ea-84bb-aa9e937f948b.png)

After fixed:

![1](https://user-images.githubusercontent.com/55199983/83341853-b2a73080-a31a-11ea-9edf-130a156e8026.gif)


The following are relative codes. I just add some menu items and some relative action classes to perform actions.
https://github.com/Hollyqqqqq/jabref/blob/cd2fc42237242773685a3b38c2021e07cdbade39/src/main/java/org/jabref/gui/JabRefFrame.java#L1085-L1099

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Hollyqqqqq06/01/20, 04:55:06 AM
6244.06554Add disable/enable calculation of items in group (2)"Fixes #6042 

Additional code for issue 6042, based on comment from Tobiasdiez: 
[https://github.com/JabRef/jabref/pull/6233#issuecomment-609430247](url)

Now GroupNodeViewModel will be responsible for checking user preferences. If user wants to see items count in group - it will be shown. Otherwise - no.

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for bigger UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not: Issue created at <https://github.com/JabRef/user-documentation/issues>.""@calixtus 
Hello, I'm coming back to you regarding bug #6091. As we discussed on #6107, we agreed to start working on #6091 and download our draft in case of progress. Finally we managed to correct it with my colleagues, and now we don't know what the next step is, can you guide us please?
Thank you =||= Hi @Hugoo98 ,
you can now commit your changes to a new branch and push this branch via git to your origin repository. Then you should be able ot create a new pull request to JabRef on GitHubs Web-UI. Then we should be able to review and discuss your changes. =||= If you have general questions about JabRef development, please use the developers gitter chat, so we won't pollute this PR with our Off-Topic comments. =||= @Gena928 did you already found the time to look at the issue with the preferences? Do you have questions concerning it? =||= @tobiasdiez 
looks like we have misunderstanding. Sorry, but I was sure I don't have any unclosed issues.
Which one? =||= You are right, I guess this is indeed a misunderstanding. 
I was referring to
> Will commit today, when we find solution about PreferencesService in GroupNodeViewModel (see comment from calixtus).

So this is then ready for review? The build currently fails and there are merge conflicts. Could you have a look at this? Thanks! =||= @tobiasdiez 
yes, it's ready for review. I'll look at the conflict. =||= @tobiasdiez 
OK, looks like my old method is no longer valid, because it was refactored.
I updated `updateMatchedEntries` and now it's using new method - `findMatches`, according to your commit as of 28.04.2020. =||= I originally wanted to merge current master into this branch and merge it, but I kinda messed up the git history in this one. Sorry about that. Took the commits to PR #6554 . Maybe someone more experienced with git (@koppor ) can take a quick look at it, and merge it then. :see_no_evil: 
 =||= No clue. Good that you managed to create a ""good PR"" at https://github.com/JabRef/jabref/pull/6554. =||= "Fix Group hit counter calculation preferences"closes #6244 
fixes #6042

Created this PR because I kinda messed up the git history in PR 6244.
- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus06/02/20, 08:19:55 PM
6529.06558[Enhancement] Numbers in the file picker drop-down menu"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->
JabRef 5.1--2020-05-26--0d7156b
Linux 5.3.0-53-generic amd64 
Java 14.0.1

**Is your suggestion for improvement related to a problem? Please describe.**

When opening a recent library file, File/Recent libraries, the list of recent libraries is numbered.  

**Describe the solution you'd like**

I would expect that typing one of the displayed numbers would open that library.  That's the common behaviour in other programs that have numbered file lists  like this.

![image](https://user-images.githubusercontent.com/762246/82959229-74092300-9f74-11ea-80e8-a0ac9acddea6.png)""Thanks to @Hollyqqqqq  this is now implemented in the latest master version. (currently building).
When that menu is open, you will be able now open the libraries by using the number keys.- =||= "Use letters to acess recent libraries in menu"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6529 

After fix the issue: (I typed 1, then 2, then 2)

![K8XVNKFj8t](https://user-images.githubusercontent.com/55199983/83321605-57762f00-a283-11ea-8050-bbf5079d5ed4.gif)

It can open a database relative to typed key. And I also checked that when typing a letter not a num(eg, 'a'), there will be nothing to happen. And if type a num larger than the max index of history record, nothing will happen as well.


The main idea to solve this issue is to add key event listener in `JabRefFrame.java` and design relative handle function `openFileByKey()`.

![image](https://user-images.githubusercontent.com/55199983/83321745-4f6abf00-a284-11ea-838f-a73e34e7672d.png)


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Hollyqqqqq06/01/20, 02:46:51 PM
5815.06567Exception when importing certain unlinked local files"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 
JabRef 5.0-beta.1--2019-12-15--0b8b1d6
Linux 4.9.0-9-amd64 amd64 
Java 13.0.1 on Debian 9

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Seems to be related to #5128: a few specific pdf files cause an exception. It's not related to the filename. The misbehaving file in question [can be downloaded here.](https://drive.google.com/file/d/1SVGidF9i6K984al0qyXNWLvVzTkZAB1k/view?usp=sharing)

Steps to reproduce the behavior:
1. Open ""find unlinked files""
2. Search the folder containing ref_571.pdf or ref_375.pdf
3. Press import. Other files will import without difficulty, but when 571 is selected the exception will be thrown and the file is not imported.

Thanks! Awesome software, great work. 

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```

java.lang.StringIndexOutOfBoundsException: begin 0, end -1, length 2073
	at java.base/java.lang.String.checkBoundsBeginEnd(Unknown Source)
	at java.base/java.lang.String.substring(Unknown Source)
	at org.jabref/org.jabref.logic.xmp.XmpUtilReader.getXmpMetadata(Unknown Source)
	at org.jabref/org.jabref.logic.xmp.XmpUtilReader.readXmp(Unknown Source)
	at org.jabref/org.jabref.logic.importer.fileformat.PdfXmpImporter.importDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.externalfiles.ExternalFilesContentImporter.importXMPContent(Unknown Source) at org.jabref/org.jabref.gui.externalfiles.ImportHandler.importAsNewEntries(Unknown Source)
	at org.jabref/org.jabref.gui.externalfiles.FindUnlinkedFilesDialog.startImport(Unknown Source)
	at org.jabref/org.jabref.gui.externalfiles.FindUnlinkedFilesDialog.lambda$initialize$8(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.setResultAndClose(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.DialogPane.lambda$createButton$3(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.Application.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.EventLoop.enter(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module/javafx.stage.Stage.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.HeavyweightDialog.showAndWait(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.Dialog.showAndWait(Unknown Source)
	at org.jabref/org.jabref.gui.externalfiles.FindUnlinkedFilesAction.execute(Unknown Source)
	at org.jabref/org.jabref.gui.actions.JabRefAction.lambda$new$2(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details>""If the file is opened in Chrome and printed to PDF, it's imported correctly. Clearly something about these files causes the crash. =||= Sorry, overlooked that you already linked the file
  =||= The problem is in the class XMPUtilReader in the method  ` private static List<XMPMetadata> getXmpMetadata(PDDocument document) throws IOException { `

Debugigng shows, that the indexOf method return -1 which indicates that the tags are not found.
A fix would be to return the empty list when the indexOf method returns a value <0
 =||= I can confirm that this bug still persists in version:
```
JabRef 5.1--2020-05-17--a080191
Windows 10 10.0 amd64 
Java 14.0.1
```
Moreover, the behaviour is as follows.
- If the problematic file is in the scanned folder then the exception is thrown. [picture 1]
- If the problematic file is in a subfolder of the scanned folder, then the exception seems to be caught and suppressed, as the operation yields nothing (no bibtex entries are imported). [picture 2]
(Issue #4525 maybe related to the second scenario)

![jabref_error1](https://user-images.githubusercontent.com/52547519/82170749-5d3b4000-9893-11ea-9e9b-49a294f93ebd.png)
![jabref_error2](https://user-images.githubusercontent.com/52547519/82170760-61fff400-9893-11ea-8101-646bcd379e64.png)

 =||= I'd like try to solve it. =||= Thanks to @ZhouSky  this is now fixed in the latest master version (currently building)

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= This bug seems to have been fixed (at least, no exception pops up), thank you. Kudos to @ZhouSky ! =||= "Fix exception for unlinked files"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #5815 Exception when importing certain unlinked local files

1. For some certain files, they have metadata, but cannot find start or end tag, so cause exception. I added statements to check if can find start or end tag, and if the position of start tag before end tag in metadata.
2. Original `private List<Path> getFileListFromNode(CheckBoxTreeItem<FileNodeWrapper> node) ` method just can find children nodes, so causes that files under subfolder cannot be found, then cannot be imported. I modified this method to iterate find all selected leaf nodes.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ZhouSky06/02/20, 05:23:03 PM
6577.06578Invalid Bibtex records / DOI not extracted from imported PDF files"Observed behaviour:
Some PDF files are imported as invalid Bibtex records of type `@Misc` with empty Bibtexkey and with _only one_ field `file`. I suppose, this is caused the failure to extract DOI from the first page of a PDF file.  ([JabRef docs ](https://docs.jabref.org/collect/findunlinkedfiles) say ""In case a DOI is found on the first page, the DOI is used to generate the BibTeX information"")

Expected behaviour:
JabRef extracts DOI from the PDF and retrieves the necessary information from the internet. 

Steps to reproduce the observed behavior:
1. Download the [pdf file](https://link.springer.com/content/pdf/10.1007/s10237-008-0136-z.pdf)
2. In JabRef: **Lookup** -> **Search for unlinked local files**; scan the directory with the file, select the file, proceed to **Import**.
3. Observe a new record in the database, which looks as follows:
![image](https://user-images.githubusercontent.com/52547519/83600137-e6ad6c00-a53b-11ea-8f88-f7b21bea6ffc.png)

**JabRef version**
JabRef 5.1--2020-06-02--46fd96b
Windows 10 10.0 amd64 
Java 14.0.1

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists""Thanks for reporting that issue. JabRef first checks for XMP metadata to be present and then tries the ""magic"" PDF extraction. However, the XMP parser did not correctly indicate that the entry is empty (contains no fields) and therefore the PDF extractor was not called.

This should now be fixed in the latest master (currently building, ready in ~30min) =||= In addition, the docs are a bit outdated. Feel free to edit them! Just click on ""Edit at github""  =||= "Fix XMP Exctrator not returning empty optional"Fixes #6577

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr06/03/20, 04:57:22 PM
6420.06586"Creating or editing a group of cited entries triggers ""Library has been modified by another program."" whenever saving the library subsequently""Tested with the latest JabRef development version (master branch) on Ubuntu 16.04

<ins>Steps to reproduce the behavior (creating group):</ins>

1. Save current library (only needed, if the library is indicated as modified)
2. Create a group of cited entries with an attached `*.aux` file
    -  Side note: even without attaching an existing `*.aux` file and leaving this field empty allows reproducing it as well
3. The library has been modified, indicated by the star character (*) in the tab of the main table
4. Save library

*Observation:*

**After saving the library, the message ""Library has been modified by another program."" shows up, asking either to choose ""Dismiss changes"" or ""Review changes"". When such a group has been created (or updated), then this message appears whenever the library is changed and gets saved.**

<ins>Steps to reproduce the behavior (editing group):</ins>

After restarting JabRef and opening the previously opened library the aforementioned issue does not arise until one does the following (or one repeats the steps above):

1. Save current library (only needed, if the library is indicated as modified)
2. Edit an existing group of cited entries
3. Click ""OK"" to save the changes in the dialog for editing an existing group of cited entries (no changes need to be made in the dialog)
4. A dialog appears, asking ""Assign the original group's entries to this group?""
4.1. Either click ""Cancel"" or ""OK"" (it does not matter)
5. The library has been modified, indicated by the star character (*) in the tab of the main table
6. Save library

*Observation:*

**After saving the library, the same issue as described above arises.**

<ins>Remark:</ins>

As stated in #6394, groups of cited entries also have another issue.

<ins>Removal of issue:</ins>

1. Delete the group of cited entries or change the group type to something different than ""Cited entries"".

*Observation:*

The issue vanishes.""Maybe the color code changes upon saving? (I slightly remember there was something like that in the code...) =||= I've tried to find some differences in the variable `changes` in

https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/gui/collab/DatabaseChangeMonitor.java#L46

but there is quite a lot information contained. I could not find any differences, only things which are equal. =||= What I could find is that in ""metadata change"", the `originalMetaData` entry had subscribers, but the `newMetaData` entry doesn't. =||= @ https://github.com/JabRef/jabref/issues/6420#issuecomment-635943587
This looks like a bug. The change scanner should only return things that are different...

What you you mean by the ""subscribers"" for the metadata change? What's the content of 
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/logic/bibtex/comparator/MetaDataDiff.java#L35 ? =||= The content of `changes` at

https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/gui/collab/DatabaseChangeMonitor.java#L46

looks as follows:

![image](https://user-images.githubusercontent.com/3658393/83462926-c19df800-a46c-11ea-99b7-da6fb63db8db.png)

The content of `changes` at 

https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/logic/bibtex/comparator/MetaDataDiff.java#L35

is:

![image](https://user-images.githubusercontent.com/3658393/83463083-4426b780-a46d-11ea-8577-7d80885d6e6c.png)

The subscribers I was talking about were at (but probably irrelevant):

![image](https://user-images.githubusercontent.com/3658393/83463601-cd8ab980-a46e-11ea-94ef-1e082d028318.png)
 =||= ~~But I suspect properly fixing #6394 could fix this as well, because everything started with that.~~ =||= Thanks for the investigation. It's strange. I don't see any problems with the equals method of the groups:
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/groups/AbstractGroup.java#L58-L60
It's also strange that you experience this problem since https://github.com/JabRef/jabref/commit/bc57d22f2a4ae8912d263608cf0a606fbbecd43a, since this change doesn't touch anything that is relevant for the group diff.

Can you please have a closer look and see which groups fail the equality check (and why).
 =||= @tobiasdiez I have concretized the description and reproducibility of the issue in its description https://github.com/JabRef/jabref/issues/6420#issue-612206411. Can you reproduce it this way? =||= > It's also strange that you experience this problem since [bc57d22](https://github.com/JabRef/jabref/commit/bc57d22f2a4ae8912d263608cf0a606fbbecd43a), since this change doesn't touch anything that is relevant for the group diff.

@tobiasdiez You are right about commit bc57d22. It is not the cause of this issue. I have tested this issue before this commit now and it persists. (Sorry for the confusion.) =||= For the case, where an `*.aux` is attached and the group gets updated, the diff is caused by the following line:

https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/groups/GroupTreeNode.java#L134

where `Objects.equals(group, that.group)` is `false`.

```
group = 
TexGroup{filePath=/home/systemoperator/test/main.aux, keysUsedInAux=[Test2015, Test2018], auxParser=org.jabref.logic.auxparser.DefaultAuxParser@f972069, fileMonitor=org.jabref.gui.util.DefaultFileUpdateMonitor@1bb768ee} AbstractGroup{name='cited entries', context=INDEPENDENT, color=Optional[0x008000ff], isExpanded=true, description=Optional.empty, iconName=Optional.empty}

that.group = 
TexGroup{filePath=main.aux, keysUsedInAux=null, auxParser=org.jabref.logic.auxparser.DefaultAuxParser@4ded40, fileMonitor=org.jabref.model.util.DummyFileUpdateMonitor@29db0b7c} AbstractGroup{name='cited entries', context=INDEPENDENT, color=Optional[0x008000ff], isExpanded=true, description=Optional.empty, iconName=Optional.empty}
```

More concretely, it's finally the filePath which causes the problem at:


https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/groups/TexGroup.java#L94
 =||= ""Validates the file path of a TexGroup and fixes Texgroup's ""Library has been modified by another program""""Fixes #6420.
Fixes #6585.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."systemoperator06/17/20, 07:33:55 PM
6585.06586Exceptions occur when starting JabRef with an opened library which contains a group of cited entries"Exceptions occur when starting JabRef with an opened library which contains a group of cited entries and subsequently the group's content will not be reloaded on startup.

Will be partially fixed by #6584.""Validates the file path of a TexGroup and fixes Texgroup's ""Library has been modified by another program""""Fixes #6420.
Fixes #6585.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."systemoperator06/17/20, 07:33:55 PM
6530.06590DOI not imported from RIS file"JabRef 5.1--2020-05-23--03e3663
Windows 10 10.0 amd64 
Java 14.0.1

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Importing in a biblatex library the attached RIS file does not load the DOI field.

[PMC4756000.txt](https://github.com/JabRef/jabref/files/4686418/PMC4756000.txt)

Steps to reproduce the behavior:
1. Change the attached file extension back to RIS
2. Import it in a biblatex library
3. Notice the DOI field is empty, but the file contains a DO field.""Thanks for your report.
A quick look in the code revealed that the DOI only gets imported if it starts with doi;
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/logic/importer/fileformat/RisImporter.java#L314-L318

Seems like it's missing an else case. Ideally it would also be better to use our DOI class for ""parsing"" the DOI.

PS: Did you know that JabRef has the ability to import entries directly by PMID?
Just New Entry -> Pubmed/Medline -> enter the id =||= For me it seems not necessary to check if the DOI field exactly starts with ""doi:"", if it is listed in the RIS file, it should be already verified. So importing and loading will just be fine.
Even if the DOI is listed and imported in wrong format, users can still check and correct it in the APP. =||= This should be now fixed in the latest master (currently building, ready in roughly half an hour)
We know use our internal DOI parser to check for anything that looks like a valid doi (with or without prefix/url) and add the parsed DOI.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= On the build/master page there is still the JabRef 5.1--2020-06-04--7cc5747 that has not solved the problem. I'll wait for a new one. Thanks! =||= Thanks for the hint, the build got canceled by GitHub. I re triggered a new one just now.
https://github.com/JabRef/jabref/runs/745120654 =||= OK! Version JabRef 5.1--2020-06-06--5676d65 solved the problem. Thanks! =||= "FIX RIS DOI import"Use DOI parse and only add valid DOIs

Follow up from #6557

Fixes #6530

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr06/06/20, 11:52:57 AM
6591.06603Entry Preview Tab has no name in DropDown List"Current master 


![grafik](https://user-images.githubusercontent.com/320228/83944202-f067f580-a801-11ea-99d6-671be41f1d68.png)
"Fixed an issue where entry preview tab has no name in drop down list."Fixes #6591

I didn't add ""Preview"" to `JabRef_en.properties` because already exists.

![image](https://user-images.githubusercontent.com/20928760/84149544-ea238480-aa60-11ea-8280-74fd45f974b1.png)

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Grzegorz Popieldextep06/09/20, 02:27:06 PM
6589.06608Download of files put them in subfoldersJust a quick note for now: after downloading a linked online file, it was put in the folder `standardRoot/citationkey/`. Not sure why and under which conditions this is reproducible."Did you specify a file fit name or file dir pattern?  =||= I could reproduce it using some arxiv fulltext download from the General tab

 =||= The issue is here:
https://github.com/JabRef/jabref/blob/a080191bc07f51e0caa77e549c31be6ba0346786/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L451

If the parameter is empty string the citeky is returned.
https://github.com/JabRef/jabref/blob/7cc57474b7aa991ef6ea148d4030d4bb68ee69bf/src/main/java/org/jabref/logic/util/io/FileUtil.java#L283-L288 =||= @btut could you please have a look at this. If I'm not mistaken, then you added this in https://github.com/JabRef/jabref/pull/6381. Thanks! =||= Hi,
where was the file placed before my edits?
As far as I understand createDirNameFromPattern results in the citekey if no pattern is set. If this is not intended, I think it would be best to change that in createDirNameFromPattern. Is there any other place that method is used and the citekey being returned is the expected behaviour? =||= @btut  I think the original method looked like a copy paste thing of the FileName Method. 
So a fix would be to simply return empty string. 
Would be nice if you could do this. And just add a test case to one of those CleanupRename methods =||= Now fixed in latest master =||= Thanks! =||= "Fix downloaded files moved to citation key dir"Fixes #6589 
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr06/15/20, 05:41:18 AM
6541.06609Opening the menu 'Library properties' marks the database as modified"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.1--2020-05-26--0d7156b
Linux 4.9.0-12-amd64 amd64 
Java 14.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When opening the menu ""Library properties"", the database is instantaneously marked as modified (a star is displayed in the title of the tab).


Steps to reproduce the behavior:
1. Open a library 
2. Click on the menu Library -> Library properties
==> The window Library properties opens. And, simultaneously, the library is marked as modified.
3. Click on Cancel, and exit JabRef
==> The message ""Save before closing"" is displayed, confirming the database is considered as changed.
""I debugged it and found out that as soon as no saveActions are present for the current library metadata, then the default save actions are set for the current library metadata and a Changed-Event is posted which marks the library with an asterisk.

I think the line 131 is wrong here. Opening without changing anything should not have any effect, metadata should only be changed when I click save.  We need to think a bit about other side effects.

https://github.com/JabRef/jabref/blob/bb19d29abb3fabc29c2a9b5b8f7b4ded0085d00e/src/main/java/org/jabref/gui/libraryproperties/LibraryPropertiesDialogViewModel.java#L127-L131 =||= Should now be fixed in latest master (currently building, ready in roughly half an hour) =||= Thank you @Siedlerchr, this is fixed in JabRef 5.1--2020-06-16--bc63ccb. =||= "Fix library marked as changed when opening library properties"Fixes #6541 

Followup from #6570

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr06/13/20, 09:31:17 PM
6073.06637"Uncaught Exception: ""You need to start the file monitor before watching files"" when opening a file""JabRef Version 5.0--2020-03-06--b6d6b79 on Debian GNU/Linux 10 (buster)
(installed from .deb file)


- [x ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

**What happens:**
After a fresh restart jabref works fine. A few days later jabref refuses to open any bib file, producing an error message:
Uncaugh Exception
java.lang.NullPointerException: You need to start the file monitor before watching files 

After the next restart jabref works again.

I tracked this down to a restriction in the number of files that inotify can watch concurrently.

If that number is reached on a system, jabref wont open files anymore.

The default on debian is quite low...

Users may recognize this when they use ""tail -f"" and it says:
tail: inotify cannot be used, reverting to polling: Too many open files

Here is a blog-post that describes the mechanism and the fix
https://medium.com/@ivanermilov/how-to-fix-inotify-cannot-be-used-reverting-to-polling-too-many-open-files-bb1c1437dbf

**What should happen:**
Jabref should warn me, that it cannot detect changes to my .bib file by other programs
or even also revert to polling as tail does
but open the file anyway

It would be great if the warning would point me to the right solution

Steps to reproduce the behavior:
1. sudo sysctl -w fs.inotify.max_user_watches=1
2. sudo sysctl -w fs.inotify.max_user_instances=1
3. touch aNotExistingFile
4. tail -f aNotExistingFile &
5. start jabref
6. open a bib-file

<details>
  <summary>Full Backtrace</summary>
  java.lang.NullPointerException: You need to start the file monitor before watching files
	at java.base/java.util.Objects.requireNonNull(Unknown Source)
	at org.jabref/org.jabref.gui.util.DefaultFileUpdateMonitor.addListenerForFile(Unknown Source)
	at org.jabref/org.jabref.gui.collab.DatabaseChangeMonitor.lambda$new$0(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.collab.DatabaseChangeMonitor.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.resetChangeMonitorAndChangePane(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.setupMainPanel(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.addNewDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.lambda$openTheFile$1(Unknown Source)
	at org.jabref/org.jabref.gui.util.DefaultTaskExecutor.lambda$getJavaFXTask$3(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.EventHelper.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.setState(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.lambda$call$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

</details>""Hallo,

i get the same problem on Fedora Linux 23:

```
java.lang.NullPointerException: You need to start the file monitor before watching files
	at java.base/java.util.Objects.requireNonNull(Unknown Source)
	at org.jabref/org.jabref.gui.util.DefaultFileUpdateMonitor.addListenerForFile(Unknown Source)
	at org.jabref/org.jabref.gui.collab.DatabaseChangeMonitor.lambda$new$0(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.collab.DatabaseChangeMonitor.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.resetChangeMonitorAndChangePane(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.setupMainPanel(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.addNewDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.lambda$openTheFile$1(Unknown Source)
	at org.jabref/org.jabref.gui.util.DefaultTaskExecutor.lambda$getJavaFXTask$3(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.EventHelper.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.setState(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.lambda$call$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
```
My version information is:

```
JabRef 5.0--2020-03-06--2e6f433
Linux 5.6.15-300.fc32.x86_64 amd64 
Java 13.0.2
```

Mebus
 =||= Is there a workaround for this?

Mebus
 =||= I have same problem with Jabref.
It is possible to write clear solution about it? =||= Maybe rebooting your systems helps :-P

Mebus
 =||= > Maybe rebooting your systems helps :-P
> 
> Mebus
Thanks 
Yes, But the rebooting system is the final solution. I have several open application and I can not reboot my system for each time. =||= https://docs.jabref.org/faqgeneral#q-unable-to-monitor-file-changes-please-close-files-and-processes-and-restart-you-may-encounter-errors-if-you-continue-with-this-session =||= > https://docs.jabref.org/faqgeneral#q-unable-to-monitor-file-changes-please-close-files-and-processes-and-restart-you-may-encounter-errors-if-you-continue-with-this-session

thanks, Now Jabref work perfectly  =||= I just hit the problem again:

![Screenshot_20200822_104808](https://user-images.githubusercontent.com/271557/90952599-3b8abf80-e465-11ea-80aa-7bb4cd6c250c.png)

<code>
java.lang.NullPointerException: You need to start the file monitor before watching files
	at java.base/java.util.Objects.requireNonNull(Unknown Source)
	at org.jabref/org.jabref.gui.util.DefaultFileUpdateMonitor.addListenerForFile(Unknown Source)
	at org.jabref/org.jabref.gui.collab.DatabaseChangeMonitor.lambda$new$0(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.collab.DatabaseChangeMonitor.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.resetChangeMonitorAndChangePane(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.setupMainPanel(Unknown Source)
	at org.jabref/org.jabref.gui.BasePanel.<init>(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.addNewDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.importer.actions.OpenDatabaseAction.lambda$openTheFile$1(Unknown Source)
	at org.jabref/org.jabref.gui.util.DefaultTaskExecutor.lambda$getJavaFXTask$3(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.EventHelper.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.fireEvent(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.setState(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.lambda$call$1(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
</code>
 =||= "Fixes issue where Unix crashes when inotify is full"Previously, the program was crashing for Unix users when inotify had reached its max file limit. Since the only way to fix this seems to be to close applications or to edit privileged system files, the proposed solution is to notify the user of the issue and give them the option of continuing usage of the application. Fixes #6073
"Caleb Tillmancttillman07/01/20, 06:51:43 PM
6602.06641DOI fetcher for medra "<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**

A DOI I was searching for recently didn't work from within Jabref.   10.2143/JIABS.41.0.3285748

When I tried [Crossref.org](http://crossref.org) directly, it also didn't work. When I queried the publisher, they said they registered their DOIs with [Medra,](https://www.medra.org/) not Crossref, because they are a European publisher.  

I find this an inadequate answer from the publisher.  The whole point of DOIs is that they should be universal, not grouped in ghettos.


**Describe the solution you'd like**

Nevertheless, if that is how it is, could JabRef please also fallover to the Medra resolver if crossref doesn't work
""Thanks, yeah I always thought that all DOIs can be resolved from every register. But apparently not.
But this implementation should be straight forward as it supports content negotiation as well for bibtex
http://data.medra.org/ =||= Hi,
this could be my first time contribution. I've already set up the local project and worked on the issue by myself. 

I think I've made the modification needed to retrieve DOI metadata from mEDRA, but I'm facing an issue on several DOIs and I'm waiting an answer from mEDRA team. 
Some of their registered DOIs, queried through their content negotiation api at [https://data.medra.org/](https://data.medra.org/) return 500 internal server error. The same DOIs queried through Crossref API at [https://api.crossref.org/works/](https://api.crossref.org/works/) are correctly retrieved and the agency check at [https://api.crossref.org/works/{DOI}/agency](https://api.crossref.org/works/{DOI}/agency) correctly detects mEDRA as the owner.

As soon as I will have any more info I will update here. =||= @mind000  Welcome! That sounds already good! Thanks for taking this issue. If you don't mind, you can already create a PR so we can review your code changes =||= "mEDRA DOI fetcher implementation."fixes #6602 
I added the possibility to retrieve DOI metadata from mEDRA agency .
Some DOIs return 500 code even if they are correctly registered at mEDRA. I'm waiting for the mEDRA team to answer on that.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Giovanni Caldarolamind00007/09/20, 09:48:41 AM
6624.06642exception when filling new group dialog wrongly"JabRef 5.1--2020-06-17--ef0a6bb
Linux 5.6.18-300.fc32.x86_64 amd64 
Java 14.0.1


- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. add subgroup
2. collect by keywords
3. generate groups by ... enter ""field=specifier""

I recognise this may not be the content expected. 

Solution: An error message that tells the user what input would be ideal.

![Screenshot-20200620135115-620x495](https://user-images.githubusercontent.com/20518297/85201158-51f98b00-b2fd-11ea-8bde-506c6888c0cf.png)

<details>
  <summary>Log File</summary>
  
  ```
java.lang.StringIndexOutOfBoundsException: String index out of range: 0
	at java.base/java.lang.StringLatin1.charAt(Unknown Source)
	at java.base/java.lang.String.charAt(Unknown Source)
	at org.jabref/org.jabref.gui.groups.GroupDialogViewModel.resultConverter(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.control.Dialog.setResultAndClose(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.control.DialogPane.lambda$createButton$3(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.Application.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.EventLoop.enter(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.stage.Stage.showAndWait(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.control.HeavyweightDialog.showAndWait(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.control.Dialog.showAndWait(Unknown Source)
	at org.jabref/org.jabref.gui.JabRefDialogService.showCustomDialogAndWait(Unknown Source)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.lambda$addNewSubgroup$7(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.gui.groups.GroupTreeViewModel.addNewSubgroup(Unknown Source)
	at org.jabref/org.jabref.gui.groups.GroupTreeView.lambda$createContextMenuForGroup$20(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.1.628/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details>
""Hi, in this case, would it be a good idea to set delimiter and hierarchical delimiter to some default value (for example ',' and '>'), if none were specified by user? If so, I could probably fix this one.
I am new to open source and I'm just starting to explore JabRef codebase, so I wanted to double check if that adjustment would make sense overall. Thanks =||= "Fix for exception thrown if no delimiters were specified"Assigned default values for delimiters to fix the exception thrown
Fixes #6624 
<!-- 

-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."alex-petrov-vt07/05/20, 04:48:32 PM
6604.06643"Can't edit ""Set up general fields""""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

JabRef 5.1--2020-06-08--b810356
Linux 5.3.0-53-generic amd64 
Java 14.0.1

<!-- IMPORTANT NOTE ->

- [ x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Options/Set up general fields
2. Don't change anything.   (Or do.)
3. Hit OK
4. Error popup.

![image](https://user-images.githubusercontent.com/762246/84203676-117d5000-aa67-11ea-9bb9-34f1b1f505c1.png)



<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Thanks to @alex-petrov-vt  this should now be fixed in the latest master (currently building)
 =||= JabRef 5.1--2020-07-01--c83ea3f
Linux 5.4.0-39-lowlatency amd64 
Java 14.0.1

Confirming the fix.  Many thanks! =||= "Fixed error when specifying general fields by correcting unwanted characters list"Fixes #6604 by correcting the list of unwanted characters 

<!-- 

-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."alex-petrov-vt07/01/20, 06:24:32 AM
6638.06664"New fetcher: ""Collection of Computer Science Bibliographies""""> [The Collection of Computer Science Bibliographies](https://liinwww.ira.uka.de/bibliography/index.html)  is a collection of bibliographies of scientific literature in computer science from various sources, covering most aspects of computer science. The bibliographies are updated weekly from their original locations such that you'll always find the most recent versions here.
>
> The collection currently contains more than 7 millions of references (mostly to journal articles, conference papers and technical reports), clustered in about 1500 bibliographies, and consists of more than 2.3 GBytes (530MB gzipped) of BibTeX entries. More than 600 000 references contain crossreferences to citing or cited publications. 

Example query: 

http://liinwww.ira.uka.de/bibliography/rss?query=jabref&sort=score

Result: RSS

Example:

![grafik](https://user-images.githubusercontent.com/1366654/85585543-619c0b00-b640-11ea-8447-d20a0901a3ff.png)""@koppor Hello, I'd like to start working on this as my first issue.
I've already had a look at the contribution guide and set up the local project, and had a look at some of the other fetchers. =||= Thank you for choosing JabRef as project. - Just go ahead. You can create a draft pull request if you want to! =||= "Add Collection of Comp Sci Bibliographies fetcher"Fixes #6638

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Daniel Pricedaniel-price07/08/20, 10:05:14 AM
6625.06682Settings in Searching: suggest to separate these from autocompletion "JabRef 5.0 under Windows 10.

Usability of Jabref is reduced for me by the following issue related to searching (i.e. searching for  entries within the current library).

 The options for using RegEx or not and searching case-sensitive or not are only available via Auto-complete:
![Untitled](https://user-images.githubusercontent.com/20792626/85201098-03e48780-b2fd-11ea-83e3-03924edcdcf7.jpg)
. I don't see the logic behind that; having these available adjacent to the search bar, irrespective of using autocomplete or not, (as it used to be, see below) makes more sense to me. 

![search-bar](https://user-images.githubusercontent.com/20792626/85201115-25457380-b2fd-11ea-9886-6e1bed502e48.jpg)

 ""Thanks to @calixtus  this should be fixed now in the latest master


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= I am now testing the Portable version of:

- JabRef 5.1--2020-07-13--6344401
- Windows 10 10.0 amd64 
- Java 14.0.1

The GUI elements I would expect based on [Rework search bar #6682](https://github.com/JabRef/jabref/pull/6682) are not visible for me. 

![Capture](https://user-images.githubusercontent.com/20792626/87851013-0edb0980-c8f5-11ea-9d26-516b04eb861f.JPG)

Please let me know if I can do additional tests. 
 =||= @jhh931  Please install the latest version (18.07) =||= The buttons should be visible if you click on the search bar in the most recent development version.

Remember to always backup your data before using a development version. =||= Check: in V 18.07, the buttons appear when clicking on the search bar.
So on this point we're OK.

(This version does have another issue w.r.t. files linked to my entries; should I report this?) =||= Please open a new issue for the problem with the linked files  =||= Done: 
https://github.com/JabRef/jabref/issues/6698 =||= "Rework search bar"![picturemessage_3ata4qts chg](https://user-images.githubusercontent.com/50491877/87246991-42c7b200-c451-11ea-9a4d-2f5e11be92e8.png)

fixes #6625 

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus07/17/20, 03:15:36 PM
6692.06693Cannot build source code, com.tobiasdiez.easybind.EasyBind.listBind doesn't exist"

- [yes] : I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. clone JabRef github repository
2. try to gradle build
3. build fails: jabref/src/main/java/org/jabref/gui/JabRefFrame.java:992: error: cannot find symbol
            EasyBind.listBind(taskProgressView.getTasks(), stateManager.getBackgroundTasks());

It looks like the dependency has changed and listBind doesn't exist anymore""Thanks for mentioning, I just saw this at our CI server as well 
Ping @tobiasdiez  =||= should i make a pull request to update the function name to bindContent, i read it changed to this name in the EasyBind commit history =||= Yes, go ahead! =||= Thanks for reporting and fixing this @Vince250598! =||= "fixed issue 6692"Fixes #6692, renamed listBind to bindContent where it was used"Vincent GagnonVince25059807/17/20, 03:33:55 PM
3920.06706latex_to_unicode produces problematic filename"I encountered this when retrieving information for `doi:10.1088/1752-7155/7/1/017106`.
Which retrieves the authors: `Patrik {\v{S}}pan{\v{e}}l and Kseniya Dryahina and David Smith`.

A cleanup/rename pdf gives following filename: `S}pane{l}EtAl/Spanel2013 - A quantitative study.pdf` (note the braces are produced like this) which not only is wrong, but also gives an error: `Could not save file. Error in field 'file': Braces don't match.`

I have directory pattern set to: `[authEtAl:latex_to_unicode]` and file format pattern set to `[bibtexkey] - [shorttitle:latex_to_unicode]`. And bibtex key pattern is: `[auth:latex_to_unicode][year]`.  Also note that the bibtex key doesn't contain any `}`.
""I tried it locally and can confirm the behaviour. In fact it seems like the file directory pattern is not interpreted correctly.
```
        String fileNamePattern = ""[bibtexkey] - [shorttitle:latex_to_unicode]"";
        String directoryPattern = ""[authEtAl:latex_to_unicode]"";
```
1. Rename PDF is correct . Sample file ` Toot.pdf` ->  `Toot - A quantitative study.pdf`
2. Move Files Cleanup breaks it then -> `S}pan{e}lEtAl/Toot - A quantitative study.pdf`

 =||= Okay, the problem is not the latex2unicode itself, but our Authorlist parser.  =||= @JabRef/developers  Does anyone of you know why the first brace is removed?
That actually is the underlying  root problem here:

https://github.com/JabRef/jabref/blob/0c34fa4ba99821570dbf04e22d6f749a9c1b2456/src/main/java/org/jabref/model/entry/Author.java#L370-L386 =||= Probably to sort `{{JabRef}}` under `J` and not `{`. =||= This should not be done in the model, but only inside the model for the UI, so we need to move this part of the code @Siedlerchr 
Or at least the filename generation should not depend on it. =||= Tests:

```
    @Test
    public void testAuthEtAlBraces() {
        assertEquals(""{\v{S}}pan{\v{e}}l"",
                BibtexKeyGenerator.authEtal(""Patrik {\\v{S}}pan{\\v{e}}l and Kseniya Dryahina and David Smith"", """", ""EtAl""));
        assertEquals(""\\v{S}pan\\v{e}lEtAl"",
                BibtexKeyGenerator.authEtal(""Patrik \\v{S}pan\\v{e}l and Kseniya Dryahina and David Smith"", """", ""EtAl""));
    }
```

It is actually problemetic what to expect here.
- Making the braces unbalanced is leading to problems in any code except sorting!
- Keeping the braces produces problematic output for cases like key generation imho (not sure if key generation should only produce alphanumeric keys?!) =||= FWIW - as user I would expect the first.  Or one using the correct unicode symbols.   =||= DevCall:

- AuthorClass: Strangest method to get names is taken. 
- Remove non-ASCII characters to ensure compatibility with `pdflatex` =||= Still present in 5.0 dev =||= I can try to fix this one. =||= This is a hard one, but just goahead! =||= @koppor **right now** directory names are allowed to contain unicode. Unless there have been complaints, shouldn't that remain the case?

I currently believe there are two issues the solution depends on
1. Is unicode allowed in the directory path?
2. Is it too much of a performance hit to call the `LatexToUnicodeAdapter` on **all** `auth...` patterns? (the ""latex-free"" string will not have been cached)

I prefer to use the `LatexToUnicodeAdapter` because I think it is a better user experience if both `Gödel` and `G{\""o}del` generate the same directory name, and changing the directory structure is an infrequent event. I'd guess that it would be very hard to generate the same directory name for both Gödels without using `LatexToUnicodeAdapter`. =||= Unicode path names are perfectly valid.
you can even use emoji on windows 10.

https://docs.microsoft.com/en-us/windows/win32/fileio/naming-a-file#file-and-directory-names

Regarding performance. Don't know but I would also go for the latex2unicode adapter. Seems reasonable to me. Don't you have the latex free author already in the author list class? 
The author patterns are just equivalent to methods for getting the authors 
 =||= @Siedlerchr , @koppor earlier pointed out that,
> * Remove non-ASCII characters to ensure compatibility with `pdflatex`

but perhaps that is only relevant for the bibtex key? I am not entirely sure about the use case (except for organizing pdfs). Does people use it to organize plots, etc. that they later import into a .tex file?

> Don't you have the latex free author already in the author list class?

No, the latex-free methods cache full ""patterns"" (e.g., `authorsLastOnly`), unfortunately not individual authors or this particular pattern. =||= Actually, you could use `AuthorList#getAsLastNamesLatexFree` and split that string. That would remove the performance bottle-neck at the cost of having a ""hacky"" solution. =||= Never mind. Unless the user has the exact right preferences `AuthorList#getAsLastNamesLatexFree` would amount to the exact same solution, with an extra split operation at the end.

`Author`s fields are currently not latex-free. I'd consider it an option to change that, and cache latex-free `Author`s instead of `AuthorList`s. =||= "Readability for citation key patterns"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #3920. 

The issue is that `AuthorList#fixAuthorForAlphabetization` is used to create a `String` representation of authors' names. This can leave unbalanced brackets if a name piece starts with a latex command, as it is not the intended use of the method.

The suggested fix is to resolve latex in the name of an author and then remove any illegal characters in the post-processing (which is dependent on if it is going to be used as a file path or citation key). As Unicode characters are already allowed in the name of an author, this change should not affect users too much. It will, however,
* have slower performance, as all authors are being processed as if they contain latex
* **in almost all cases that contain latex, it will produce different output than the previous solution**

**As always, these are only suggestions. Any comments and criticism are encouraged!**
The ""intuition"" behind the suggestion is that latex in Strings will always be hard to deal with, and I think most users expect a pattern to resolve to something as similar as possible to what is shown in the main table.

**What remains**
- [x] verify that the `CitationKeyGenerator` does not output Unicode keys
- [x] ~remove the `latex_to_unicode` modifier as it should not be used~
- [x] change access modifiers for methods in `BracketedPattern`, I'd suggest that most should be private or protected
- [x] ~change how arguments are parsed for `auth.../ed...` patterns (readability)~
- [x] add test cases for this issue
- [x] test for character classes in regexp
- [ ] Fix parsing of bracketed patterns
- [ ] Fix the conversion of unicode to characters allowed in bibtex keys in `CitationKeyGenerator`

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2709/21/20, 05:39:32 PM
6699.06708Using master of forks is dangeours"1. We update `master` in a GitHub actions ""cron job"".
2. The `master` of forks is also updated
3. The updates of the forks do NOT happen at the same time 
4. That leads to **different** commit ids at each `master` branch
5. That leads to strange pull requests, when conributors merge `master` instead of `upstream/master` (strange behavior e.g. at https://github.com/JabRef/jabref/pull/6641#issuecomment-652620709 and https://github.com/JabRef/jabref/pull/6687#pullrequestreview-448887911)

Solution possibilities:

1. Guard the GitHub action by checking whether we are on JabRef/jabref
2. Have the CSL update happening at another branch and merge the branch using a pull request to our GitHub repository
3. Ensure that all documantation says `upstream/master` - also in our manual pull request comments.

Think, we should go for option 1, since we cannot ensure that all references to `master` are prefixed by `upstream/master`."Something like this should work:` if: github.repository == ‘JabRef/jabref’` =||= Update CSL only on master"Fixes #6699

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr07/27/20, 08:01:29 PM
6639.06719Enable one column libreoffice panels"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
I am using jabref with LibreOffice, the connect panel is 3x3 grid with small icons on top. It is very inconvenient when citing references because the 3x3 grid makes the main panel of jabref narrower.

**Describe the solution you'd like**
would it be possible that this LibreOffice plugin is 1 column, i.e., a side panel.

**Additional context**
![jabref](https://user-images.githubusercontent.com/171338/85707492-cffecd00-b715-11ea-9f57-858f8794eb98.png)




"Instead of using a fixed grid, a more flexible layout in forn of a Flowpane should be used. In this way the buttons can still be aligned in rows if there is enough space but move to the next row if the width is decreased. http://www.java2s.com/Code/Java/JavaFX/FlowPanepreferredwidthallowsfortwocolumns.htm =||= I can make this change if that's alright. =||= @ddunig2  Sure, go ahead =||= Thanks to the quick initiative of @ddunig2 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Glad I can help! @tobiasdiez why check the build? Is there something else I need to do for this issue? =||= This was directed to @liubenyuan, so that he/she can verify that the fix indeed works as expected. No further action required from your side, except for looking for your next issue that you want to fix ;-). =||= Sure, I will download the test version and try it. =||= Fix for issue 6639"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

-Changed the layout of the side panel to flow layout to keep some of its items from readable.
-fixes #6639 

![image](https://user-images.githubusercontent.com/36016544/88580920-5f034b80-d01a-11ea-9d95-04a813f59eba.JPG)


- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Lugduni Desrosiersddunig207/28/20, 07:48:27 AM
6588.06723Delete online link after download"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
When downloading an linked online file, the online link is kept.

**Describe the solution you'd like**
Automatically delete online link. Since some people might prefer to keep the link, a new preference option would be good I guess.

"Delete link after download"Fixes #6588.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tobias Dieztobiasdiez08/04/20, 10:14:03 PM
5790.06725Allow to load customized css"Would reducing the height of the part shown in the figure below make appearance more coordinated?

<img width=""958"" alt=""Capture"" src=""https://user-images.githubusercontent.com/17105777/71543784-2df26800-29b2-11ea-900c-fac6c9533b80.PNG"">
""Thanks for your suggestion. What do you mean in detail: reduce the size of the icons, or remove them completely?  =||= Sorry for the confusion. What I mean is to reduce the height as shown in the figure below. 

<img width=""846"" alt=""ccc"" src=""https://user-images.githubusercontent.com/17105777/71551507-3aafa400-2a24-11ea-947d-3e9e655b357d.PNG"">

A comparison with the height of Google Chrome.  Thanks for your work.

<img width=""334"" alt=""Capture1"" src=""https://user-images.githubusercontent.com/17105777/71551528-a98cfd00-2a24-11ea-9aa9-bf9764a558d9.PNG"">

 =||= small detail but I agree with @thanever  =||= Decision: 

- [ ] Offer editing of CSS
- [x] Offer importing / exporting of CSS

We will tag as good first issue for newcomers and hope for contributions. =||= In a bit more detail, the following needs to be done:
- Add a possibility to specify a custom css file in the preference dialog.
https://github.com/JabRef/jabref/blob/2a5507fd3cb789398f66769bb6202bb450fb219d/src/main/java/org/jabref/gui/preferences/AppearanceTab.fxml#L30-L31
- The following code needs to be slightly modified to allow loading of external css files:
https://github.com/JabRef/jabref/blob/b6c266377ae157f0c922eda418c2c8a367c68fb2/src/main/java/org/jabref/gui/util/ThemeLoader.java#L62-L70

As a workaround, it is already possible to specify the css as a command line argument as described here:
https://github.com/JabRef/jabref/blob/b6c266377ae157f0c922eda418c2c8a367c68fb2/src/main/java/org/jabref/gui/util/ThemeLoader.java#L24-L35
This method should be properly documented by adding it with a bit more details to http://devdocs.jabref.org. =||= Hey, I would like to try to solve this issue 😃  =||= I have implemented the requested feature and created a pull request #6036  =||= Thank you for submitting a PR. While seeing the solution, we improved our specification. Maybe, you can work on finalizing the PR? =||= "Add CSS Customisation"This PR continues the abandoned PR #6036
As discussed in the DevCall, we are now aggressivly finishing those PRs we would like to include in JabRef.
Works so far, yet I still want to make some changes with the optics...
Introduces also AppearancePreferences

(Screenshots are out of date, see below)

fixes #5790

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus08/31/20, 02:56:34 PM
6739.06740unable to delete an entry"JabRef 5.1--2020-08-05--3d68514
Windows 10 10.0 amd64 
Java 14.0.2

With the latest development builds it is not possible to delete an entry. Neither ""del"" key nor right-click-menu ""delete"" do anything. This does not even work for a single entry in a newy created library."Duplicate of #6738  =||= Wokaround should be trash icon in the toolbar. This issue is a side effect of a mac bug.  Fix is on its way =||= Fix copy pasting and delete via menu or key"Add hack for OSX.
Caveat: Prevents pasting using Cmd+V on an empty library. Menu pasting however works.

Fixes #6739 
Fixes #6738 
Fixes #6293 

Would be nice if someone could test this for windows/linux as well

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr08/06/20, 03:07:25 PM
6738.06740Delete and Cut functionalities do not work anymore"JabRef development Release as of August 5, 2020, on Windows 10

Issue: Delete and Cut functionalities do not work anymore

I was not able to delete an entry. I have tried Delete from Edit menu, Delete icon, Cut from Edit Menu""Duplicate of #6293 This is a side effect of my recent mac fix. Will try to add a workaround.
Keyboard shortcuts do work fine =||= "Fix copy pasting and delete via menu or key"Add hack for OSX.
Caveat: Prevents pasting using Cmd+V on an empty library. Menu pasting however works.

Fixes #6739 
Fixes #6738 
Fixes #6293 

Would be nice if someone could test this for windows/linux as well

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr08/06/20, 03:07:25 PM
6405.06746Entry is missing after sublibrary is generated from aux file"JabRef version 5.0 on Windows 10

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. The test package is available at https://github.com/xx256xx/test, including a tex file, the original bib **my.bib**, a aux file **report.aux**.
2. I attempt to generate a sub library using **report.aux** from **my.bib**. 
3. In Jabref window, the sub library succeeds to generate the sub library. See ![jabref](https://user-images.githubusercontent.com/62489740/80926118-bf0b8e00-8d5a-11ea-99dc-36e24ce265d8.png)
4. However, this entry is not found in the saved bib file ( you can check it at my repo, named by **sub.bib**). ![jabref2](https://user-images.githubusercontent.com/62489740/80926150-f712d100-8d5a-11ea-8b8b-e6c26a2667dc.png)
5. If I fill in the ""date"" field and save again, the resultant bib is correct.


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

No log available.

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""The zip file is upload a test repo for the security purpose. You can find all the files at https://github.com/xx256xx/test. Run **test.bat** to quickly reproduce the issue. =||= I could confirm this issue. You are right, for some reason the entry gets deleted.
When I do this manually in JabRef and try to save the new library, I get the ""Review changes"" dialog which states that the entry got deleted.

![grafik](https://user-images.githubusercontent.com/320228/81437372-57df4680-916b-11ea-918d-37dc71ce575b.png)
 =||= Okay, this seems to be a bit weird. I debugged a bit further and found out that the problem lies in the following lines when saving:
https://github.com/JabRef/jabref/blob/7cc57474b7aa991ef6ea148d4030d4bb68ee69bf/src/main/java/org/jabref/logic/bibtex/BibEntryWriter.java#L58-L62

The second entry, the one with ""lichman"" has the flag changed = false and the getParsedSerialization() returns an empty string.
I don't know that much about the internal stuff and no idea when this flag or the serialization should be set
@koppor  @tobiasdiez  Any idea? I only noticed that the AuxParser ""clones"" the BibEntry before inserting into the database. But no idea if this affects the serialization =||= The code at hand ensures that entries are only written in JabRefs cool new ""layout"" if there is a change. This was a year-long discussion before you joined JabRef. - The idea is that JabRef stores the characters as they are read when reading the file. It writes out the characters as is when writing - except the user has changed something. - This is what the if condition states.

Now to the issue: I think, the code creating entries from the aux file just does not set the `reformat` flag correctly. I could also argue that we need a BibEntry clone method also cloning the serialization. - I did not look into the code how the aux part generates BibEntries. That the problem is hidden there, I am sure. =||= @koppor  Thanks for the explanation. That was indeed very helpful and let me to the root issue, that the clone method does not set the changed flag when the entry type is Misc and therefore equals the default entry type. =||= @xx256xx  This issue is now  fixed in the latest master


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix entry gets deleted after aux import"Set changed flag on clone also for Misc entry type, because otherwise it equals the default entry type and no change is triggered which results in the entry not beeing written to the database on save
Fixes  #6405

Simplify gui code

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr08/18/20, 06:22:04 AM
6574.06747Add support for biblatex-software"See https://www.softwareheritage.org/2020/05/26/citing-software-with-style/

> [biblatex-software](https://ctan.org/pkg/biblatex-software) is actually a bibliography **style extension**, which means that one can add support for these four software entry types to any other BibLaTeX style used in documents typeset in LaTeX, like [the biblatex styles for ACM](https://ctan.org/tex-archive/macros/latex/contrib/acmart) articles. It requires the Biber back end, though, so do not try it with pure BibTeX.

We should add the new types and fields in BibLaTeX mode.""Hi @koppor 
Is this issue available, for me to work on ? =||= Sure, shouldn't be too hard. - The hard part is to understand the style and the idea/implementation of JabRef's pre-defined types. The code itself will be may be 10 to 50 LOC. =||= Cool,

> The hard part is to understand the style and the idea/implementation of JabRef's pre-defined types

I was just going through the code at avery high level,  figured adding the new _biblatex-software_ entries to the `StandardField`  enum would make it available for `BibEntry.java` 
Am I on the right track ? =||= Does the GUI behave differently then? - This is a good first issue, because one needs to go through the code and understand, what's happening why. And why somewthing does not happen if one changes something. I assume, you know the ""call hierarchy"" feature etc? Ctrl+Mouse-click =||= > Does the GUI behave differently then?

Ah it did not ,so I was wrong ! I think I am getting the hang of it , I was looking at the code , so a new entry for each of  `biblatex-software` extension's 

- software
- software versions
- software modules 
- code fragments
Need to appear in the `New Entry` pane , With the corresponding fields from the style documentation. An entry for Software is already there , the others need to be added to the BibLatex entry definitions along with their fields and types. The GUI renders all that is defined . I'll go ahead and add/make those changes , along with unit tests ?

> This is a good first issue, because one needs to go through the code and understand,

Agreed , I am new to JabRef and oss contribution . Hopefully I am in the right path getting know the codebase.

EDIT: The Software entry that is in existence does not seem to be the same entry as in biblatex-software (the fields vary) , what do we do here =||= The ""Software"" might come from the IEEE style. Could you make a table showing the different fields. Column A: field name; column B field in IEEE present (exiting in jabref), column C field present in biblatex-software. Then a cross if it exists, empty else?

It would be helpful if the examples of https://packages.oth-regensburg.de/ctan/macros/latex/contrib/biblatex-contrib/biblatex-software/sample-use-sty.pdf were included in the tests. Maybe as a bib file in https://github.com/JabRef/jabref/tree/master/src/test/resources/testbib?

I think, we need a divider in the menu (as we have for IEEE, don't we?) Screenshots should be at https://docs.jabref.org/collect/add-entry-manually, but we currently don't have one.

The other alternative is to add refine the howto for [customize entry types](https://docs.jabref.org/setup/customentrytypes) and ship a .bib file with the customization included so that each user can load it if he wants to use biblatex-software.

I find software that important so that we should ship support with JabRef as default.

If possible, could you also add an [ADR](https://adr.github.io/madr/) containing the options ""Native support in JabRef"" and ""Support via customized entry types""? =||= Comparison of the both : 
| Column        | JabRef-Software | biblatex-software |
|---------------|-----------------|-------------------|
| AUTHOR/EDITOR |:heavy_check_mark:|:heavy_check_mark:                   |
| TITLE         |:heavy_check_mark:|:heavy_check_mark:                   |
| DATE          |:heavy_check_mark:|:heavy_check_mark:                   |
| SUBTITLE      |:heavy_check_mark:| :heavy_check_mark:                  |
| TITLEADDON      |:heavy_check_mark:                 |:x:               |
| HOWPUBLISHED      |:heavy_check_mark:                 |:x:                   |
| DOI      |:heavy_check_mark:                 |:x:                   |
| EPRINT      |:heavy_check_mark:                 |:x:                   |
| EPRINTCLASS      |:heavy_check_mark:|:heavy_check_mark:|
| EPRINTTYPE      |:heavy_check_mark:                 |:heavy_check_mark:                   |
| URL      |:heavy_check_mark:                 |:heavy_check_mark:                   |
| URLDATE      |:heavy_check_mark:                 |:heavy_check_mark:                   |
| HALID      |:x:                 |:heavy_check_mark:                   |
| HALVERSION      |:x:                 |:heavy_check_mark:                   |
| INSTITUTION      |:x:                 |:heavy_check_mark:                   |
| INTRODUCEDIN      |:x:                 |:heavy_check_mark:                   |
| LICENSE      |:x:                 |:heavy_check_mark:                   |
| MONTH      |:x:                 |:heavy_check_mark:                   |
| NOTE      |:x:                 |:heavy_check_mark:                   |
| ORGANIZATION      |:x:                 |:heavy_check_mark:                   |
| PUBLISHER      |:x:                 |:heavy_check_mark:                   |
| RELATED      |:x:                 |:heavy_check_mark:                   |
| RELATEDTYPE      |:x:                 |:heavy_check_mark:                   |
| RELATEDSTRING      |:x:                 |:heavy_check_mark:                   |
| REPOSITORY      |:x:                 |:heavy_check_mark:                   |
| SWHID      |:x:                 |:heavy_check_mark:                   |

> I think, we need a divider in the menu

What should be the text overlay on the divider ? BibTex has IEEETran

> ship a .bib file with the customization included so that each user can load it if he wants to use biblatex-software.

Is this a current functionality(if so can you point to an example) or something that we are trying to build with this issue ? If its new , does this mean a new UI component(dropdown?) in the Customized Entry Type dialog to specify which type the new entry inherits from ? 
 

> could you also add an ADR

   Yes , sure =||= Thanks to @hemantgs  this issue is now resolved =||= " [6574] Added support for biblatex-software"Added change to changelog
Fixes #6574 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
This PR is in reference to #6574 
Added the new biblatex software entries under a new divider like the below image

![biblatex-software](https://user-images.githubusercontent.com/13389954/89727491-13ea2f00-da43-11ea-8705-7773fc349a0d.png)

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."hemantgs08/22/20, 02:33:16 PM
6753.06760Problems for preview of an entry with % sign in title"JabRef version 5.1-PullRequest6152.694--2020-06-28--314bc7d\
Windows 10 10.0 amd64 \
Java 14.0.1

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
In the preview of an entry containing % sign in the title these disappear.

Steps to reproduce the behavior:
1. Load the following entry in a biblatex library:
```
@WWW{Thalheimer2006,
  author  = {Will Thalheimer},
  date    = {2006-05-01},
  title   = {{People remember 10\%, 20\%…Oh Really?}},
  url     = {https://www.worklearning.com/2006/05/01/people_remember/},
  urldate = {2020-05-23},
  langid  = {english},
}
```
2. Select the entry and look at the preview (the standard one):
```
WWW (Thalheimer2006)
Thalheimer, W.
People remember 10 20Oh Really? 
2006
```
Notice the % sign and the three dots are missing.
3. Now switch the Preview to IEEE. The title is correct:
```
[1]
W. Thalheimer, “People remember 10%, 20%…Oh Really?,” 2020-05-23. https://www.worklearning.com/2006/05/01/people_remember/.
```

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->""The problem is in the class HTMLChars in the format method. The case '\%' falls under the last else of the method where there's a TODO. I added 2 small modifications so it works with this case but i didn't do extensive testing.

````
@Override
    public String format(String inField) {
        int i;
        String field = inField.replaceAll(""&|\\\\&"", ""&amp;"") // Replace & and \& with &amp;
                              .replaceAll(""[\\n]{2,}"", ""<p>"") // Replace double line breaks with <p>
                              .replace(""\n"", ""<br>"") // Replace single line breaks with <br>
                              .replace(""\\$"", ""&dollar;"") // Replace \$ with &dollar;
                              .replaceAll(""\\$([^$]*)\\$"", ""\\{$1\\}""); // Replace $...$ with {...} to simplify conversion

        StringBuilder sb = new StringBuilder();
        StringBuilder currentCommand = null;

        char c;
        boolean escaped = false;
        boolean incommand = false;

        for (i = 0; i < field.length(); i++) {
            c = field.charAt(i);
            if (escaped && (c == '\\')) {
                sb.append('\\');
                escaped = false;
            } else if (c == '\\') {
                if (incommand) {
                    /* Close Command */
                    String command = currentCommand.toString();
                    String result = HTML_CHARS.get(command);
                    sb.append(Objects.requireNonNullElse(result, command));
                }
                escaped = true;
                incommand = true;
                currentCommand = new StringBuilder();
            } else if (!incommand && ((c == '{') || (c == '}'))) {
                // Swallow the brace.
            } else if (Character.isLetter(c) /*I removed "" || c == '% ""*/
                    || StringUtil.SPECIAL_COMMAND_CHARS.contains(String.valueOf(c))) {
                escaped = false;

                if (!incommand) {
                    sb.append(c);
                } else {
                    currentCommand.append(c);
                    testCharCom:
                    if ((currentCommand.length() == 1)
                            && StringUtil.SPECIAL_COMMAND_CHARS.contains(currentCommand.toString())) {
                        // This indicates that we are in a command of the type
                        // \^o or \~{n}
                        if (i >= (field.length() - 1)) {
                            break testCharCom;
                        }

                        String command = currentCommand.toString();
                        i++;
                        c = field.charAt(i);
                        String commandBody;
                        if (c == '{') {
                            String part = StringUtil.getPart(field, i, false);
                            i += part.length();
                            commandBody = part;
                        } else {
                            commandBody = field.substring(i, i + 1);
                        }
                        String result = HTML_CHARS.get(command + commandBody);

                        sb.append(Objects.requireNonNullElse(result, commandBody));

                        incommand = false;
                        escaped = false;
                    } else {
                        // Are we already at the end of the string?
                        if ((i + 1) == field.length()) {
                            String command = currentCommand.toString();
                            String result = HTML_CHARS.get(command);
                            /* If found, then use translated version. If not,
                             * then keep
                             * the text of the parameter intact.
                             */
                            sb.append(Objects.requireNonNullElse(result, command));
                        }
                    }
                }
            } else {
                if (!incommand) {
                    sb.append(c);
                } else if (Character.isWhitespace(c) || (c == '{') || (c == '}')) {
                    String command = currentCommand.toString();

                    // Test if we are dealing with a formatting
                    // command.
                    // If so, handle.
                    String tag = getHTMLTag(command);
                    if (!tag.isEmpty()) {
                        String part = StringUtil.getPart(field, i, true);
                        i += part.length();
                        sb.append('<').append(tag).append('>').append(part).append(""</"").append(tag).append('>');
                    } else if (c == '{') {
                        String argument = StringUtil.getPart(field, i, true);
                        i += argument.length();
                        // handle common case of general latex command
                        String result = HTML_CHARS.get(command + argument);
                        // If found, then use translated version. If not, then keep
                        // the text of the parameter intact.

                        if (result == null) {
                            if (argument.isEmpty()) {
                                // Maybe a separator, such as in \LaTeX{}, so use command
                                sb.append(command);
                            } else {
                                // Otherwise, use argument
                                sb.append(argument);
                            }
                        } else {
                            sb.append(result);
                        }
                    } else if (c == '}') {
                        // This end brace terminates a command. This can be the case in
                        // constructs like {\aa}. The correct behaviour should be to
                        // substitute the evaluated command and swallow the brace:
                        String result = HTML_CHARS.get(command);
                        // If the command is unknown, just print it:
                        sb.append(Objects.requireNonNullElse(result, command));
                    } else {
                        String result = HTML_CHARS.get(command);
                        sb.append(Objects.requireNonNullElse(result, command));
                        sb.append(' ');
                    }
                } else { // HERE '\%'
                    sb.append(c); //This line was added
                    /*
                     * TODO: this point is reached, apparently, if a command is
                     * terminated in a strange way, such as with ""$\omega$"".
                     * Also, the command ""\&"" causes us to get here. The former
                     * issue is maybe a little difficult to address, since it
                     * involves the LaTeX math mode. We don't have a complete
                     * LaTeX parser, so maybe it's better to ignore these
                     * commands?
                     */
                }

                incommand = false;
                escaped = false;
            }
        }

        return sb.toString().replace(""~"", ""&nbsp;""); // Replace any remaining ~ with &nbsp; (non-breaking spaces)
    }`
``` =||= @Vince250598  Thanks for looking into it. It would be really cool if you could create a PR with your changes. That helps us to better see the differences. Regarding tetsts, we already have automated tests (HTMLCharsTest) for this class so your changes can easily be tested. =||= Thanks  to @Vince250598  this issue should now be fixed in the latest master (currently building, ready in approx 30 min)
http://builds.jabref.org/master/ =||= The latest master fixed it. Thanks! =||= "Fix HTML chars formatter for percent sign"Fixes #6753 

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Vincent GagnonVince25059808/15/20, 06:50:10 PM
6175.06768Group color, only display identical colors once"Suppose i have the following Categories and Subcategories
Category: Food: Subcategory: Nuts
Category: Trees: Subcategory: Nut trees

Now it is possible (and makes sense) to assign a single colour to both subcategory Nuts and Nut trees.  Some papers however, will naturally be categorized in both groups. In such instances, Jabref currently displays twice the colour in the main table (in the column group color). Would it be possible to only display the unique colours?

I hope this (rather contrived) example is clear.  Please let me know if not!""Hi, I'd like to contribute to this issue. =||= I were not intending to contribute to this issue.  I am just wondering if it makes sense to have some kind of sort based on color as distinct() and similar solutions are not stable? =||= I am wondering the meaning of this issue because I think it is reasonable to display multiple colors if this paper belongs to multiple subgroups. If you want to display only one color, how to choose the color from multiple groups it is in? =||= If I understand @Yery correctly multiple different colors should be displayed, as long as they are distinct? =||= @k3KAW8Pnf7mkmdSMPHz27   
Thanks, yes, that is what I meant. It is of course good to see different colours, the issue is on merging  multiple identical colours.  =||= @k3KAW8Pnf7mkmdSMPHz27 @Yery  Thanks for your explanations, but since it is possible that users give identical colors to two groups which are not relevant, I think it is troublesome to distinguish which identical colors should be merged and which should not.  =||= To me it simply doesn't make sense to have two or three times the same colour, and these should always be merged, otherwise the user should use different colours. The example I gave illustrates a situation where a user would want to chose the same colour (and would like to have them merged). For my user case, I would use this feature a lot.
 =||= So, can I combine all colors together and provide a new color if it has multiple colors? I'm a little confused about the above discussion. =||= I think the main point is that we are talking about subgroups =||= Sorry this is confusing, but this issue is just about merging identical colours (so not displaying them twice, which looks silly), so:

red | red = red
red |  green | blue = red |  green | blue
red | green | red = red | green =||= "Merge identical group color indicators"fixes #6175 

This PR finishes the PRs of @WangAooa (see #6566 ) and does some cleanup in the MainTableColumnFactory: LinkedIdentifierColumn, FileColumn and SpecialFieldColumn is now extracted in separate classes.


- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus08/19/20, 04:57:02 PM
6351.06769autocompletion always turned on; cannot be disabled"JabRef 5.1--2020-04-23--bbea7df
Linux 5.5.17-200.fc31.x86_64 amd64 
Java 14.0.1

I am using a custom field in the entry editor. Until recently this field was not assigned autocompletion for the phrases in the field. I did not turn on autocompletion for the field.

The bug consist of unwanted autocompletion that I cannot turn off.""This exception, occurring now every 2 minutes or so, might be related

JabRef 5.1--2020-04-30--862078a
Linux 5.6.7-200.fc31.x86_64 amd64 
Java 14.0.1

<details>
  <summary>Log File</summary>
  
  java.lang.IllegalStateException: Task must only be used from the FX Application Thread
	at org.jabref.merged.module/javafx.concurrent.Task.checkThread(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.isRunning(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.onUserInputChanged(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.setUserInput(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.setUserInputText(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.filterAndSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.doSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.callObservers(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.put(Unknown Source)
	at org.jabref/org.jabref.model.entry.BibEntry.setField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.BackupManager.performBackup(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.BackupManager.lambda$startBackupTask$2(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

</details>
 =||= https://github.com/JabRef/jabref/issues/6344 might well be related =||= JabRef 5.1--2020-05-02--1d9957b
Linux 5.6.7-200.fc31.x86_64 amd64 
Java 14.0.1

By now I detect autocompletion to affect also normal fields, like abstract or title. 

Turning autocompletion an/off in the Preferences does not make a difference. =||= Does this relate to https://github.com/JabRef/jabref/issues/6025? =||= JabRef 5.1--2020-05-03--b472942
Linux 5.6.8-200.fc31.x86_64 amd64 
Java 14.0.1

just opened an entry, started to edit my annote field and got this

<details>
  <summary>Log File</summary>
java.lang.IllegalStateException: Task must only be used from the FX Application Thread
	at org.jabref.merged.module/javafx.concurrent.Task.checkThread(Unknown Source)
	at org.jabref.merged.module/javafx.concurrent.Task.isRunning(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.onUserInputChanged(Unknown Source)
	at org.jabref.merged.module/org.controlsfx.control.textfield.AutoCompletionBinding.setUserInput(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.setUserInputText(Unknown Source)
	at org.jabref/org.jabref.gui.autocompleter.AutoCompletionTextInputBinding.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.controlContentHasChanged(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.lambda$new$0(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextField$TextFieldContent.insert(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.replaceText(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl.filterAndSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.doSet(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.scene.control.TextInputControl$TextProperty.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BidirectionalBinding$TypedGenericBidirectionalBinding.changed(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringPropertyBase.set(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref.merged.module/javafx.beans.property.StringProperty.setValue(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.updateLocked(Unknown Source)
	at org.jabref/org.jabref.gui.util.BindingsHelper$BidirectionalBinding.changedB(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/javafx.beans.binding.ObjectBinding.invalidate(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.callObservers(Unknown Source)
	at org.jabref.merged.module/com.sun.javafx.collections.ObservableMapWrapper.put(Unknown Source)
	at org.jabref/org.jabref.model.entry.BibEntry.setField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupSingleField(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanupAllFields(Unknown Source)
	at org.jabref/org.jabref.model.cleanup.FieldFormatterCleanup.cleanup(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.applySaveActions(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.savePartOfDatabase(Unknown Source)
	at org.jabref/org.jabref.logic.exporter.BibDatabaseWriter.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.saveDatabase(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.exporter.SaveDatabaseAction.save(Unknown Source)
	at org.jabref/org.jabref.gui.dialogs.AutosaveUiManager.listen(Unknown Source)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber.invokeSubscriberMethod(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber$SynchronizedSubscriber.invokeSubscriberMethod(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber$1.run(Unknown Source)
	at org.jabref.merged.module/com.google.common.util.concurrent.DirectExecutor.execute(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Subscriber.dispatchEvent(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.Dispatcher$PerThreadQueuedDispatcher.dispatch(Unknown Source)
	at org.jabref.merged.module/com.google.common.eventbus.EventBus.post(Unknown Source)
	at org.jabref/org.jabref.logic.autosaveandbackup.AutosaveManager.lambda$listen$0(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
</details> =||= It's a save action which triggers the errors =||= thanks, ok, so, the autocompletion is independent from the exceptions. 

to illustrate, then, the autocompletion issue, see below:
![Screenshot-20200503171713-753x583](https://user-images.githubusercontent.com/20518297/80917879-ff223f00-8d61-11ea-840d-cacc1694cfa7.png)
 =||= Actually, I think save action is fine. It needs restart to come into work. But is it the correct logic? =||= "Add restart warning for autocompletion in preferences"Fixes #6351

Finishes the work of @ShiquingLiu in #6564, only some typos and the strings had to be put in the l10n resource.

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus08/19/20, 02:37:25 PM
6470.06773Unclear function of preference “Default bibliography mode”"**Is your suggestion for improvement related to a problem? Please describe.**

Under Options → Preferences → General, there is a preference “Default bibliography mode”:

![Screenshot from 2020-05-12 16-30-41](https://user-images.githubusercontent.com/1915511/81704569-413c3680-946e-11ea-8f88-f6ed36e9979c.png)

However, it’s unclear what the effect of this setting is (if any). When creating a library, one of the two (BibTeX, biblatex) must be chosen anyway, so the setting seems redundant. But the phrase “bibliography mode” is unclear, so perhaps it doesn’t even refer to libraries.

**Describe the solution you'd like**

The preference “Default bibliography mode” should probably either be documented (including adding an “Online help” button next to it in the preferences), renamed (e. g. “Default library type” if it does, in fact, refer to libraries), or removed (if it has no effect in the first place).""Hello, I feel that I can handle this possibly. I will try to write a reasonale description for this ^_^ =||= Hi, after investigating this issue. I found some confusing thing. After I set the ""default bibliography mode"" to biblatex in the preference dialog, I create a new library whose library mode in the library property is still BibTex. Did I misunderstand something?

Followings are related screenshots:

 ""default bibliography mode"" in the preference dialog:
![image](https://user-images.githubusercontent.com/38714962/83013497-b5223580-a04f-11ea-9781-b8f153cf82b2.png)
library mode in the library property :
![image](https://user-images.githubusercontent.com/38714962/83013477-ad629100-a04f-11ea-8b19-d9c72b1a8185.png)
  =||= If I don't misunderstand anything, I think the related setting in the dialog should be removed? I will appreciate it very much if you could give me some guidances ^_^ @Siedlerchr  =||= @LuckyOne09  It's a bit confusing indeed.
Historically, in older JabRef versions there was only one option ""New library"" with the ""global"" default mode you selected in the settings.  
Default biblatex -> New library would have created biblatex library.
Default BibTeX-> New library would have created bibtex library.

At some point in history this has been changed to have both options in the menu.
And you can always change your library mode afterwards in the library properties
Theoretically it could be removed, but I am not sure, if this setting has an influence on the ""import into new library"" function or the Tools-> New library from aux file.
It would be nice if you could investigate if this setting (stored somewhere in the JabRefPreferences) is used at other places
 =||= Thanks to @LuckyOne09  and @calixtus  this issue is now fixed.
The new library is now dependenent on the confgured library mode in the preferences.
We also renamed the bibliopgraphy mode to library mode =||= "Streamline new library command"fixes #6470 
closes #6539 

This PR implements the changes, which were decided in the devcall in early june about the PR (https://github.com/JabRef/jabref/pull/6539#issuecomment-641056536)
It merges the new library command in the toolbar and the file menu to always create a new library in the current default library mode and changes the label in the preferences.

![grafik](https://user-images.githubusercontent.com/50491877/90682332-14659f80-e265-11ea-8a1c-426b1d378951.png)

![grafik](https://user-images.githubusercontent.com/50491877/90682490-50990000-e265-11ea-8bbe-77da34f2bba1.png)


- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus08/22/20, 02:38:31 PM
6539.06773Fix Unclear function of preference “Default bibliography mode”"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
For fixing https://github.com/JabRef/jabref/issues/6470
I used the safe-delete in IDEA to help me delete the ""Default bibliography mode"" in preference dialog.
And I feel that there are no influence on other functionality in displaying result.
If you think there are something inappropriate in my PR, please let me know ^_^

The preference/general tab is like this screenshot now:
![image](https://user-images.githubusercontent.com/38714962/83029748-9b8be880-a065-11ea-86f9-6b58b383bfd7.png)


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x]Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.""Unfortunately, as I suspected it's still used in some contexts.
JabRefPreferences has a method which is used for things like the shared databse functionality

if you look at the usage of this method you will see that it's still used in many plaes.
` public BibDatabaseMode getDefaultBibDatabaseMode(`

=> So we have to just rename or clarify the option in the preferences
 =||= > Unfortunately, as I suspected it's still used in some contexts.
> JabRefPreferences has a method which is used for things like the shared databse functionality
> 
> if you look at the usage of this method you will see that it's still used in many plaes.
> ` public BibDatabaseMode getDefaultBibDatabaseMode(`
> 
> => So we have to just rename or clarify the option in the preferences

Thank you for your suggestions.

But just in my opinion, I feel it is not a serious problem that there are some methods like getDefaultBibDatabaseMode(). Since there is always a default value for BibDatabaseMode. Therefore, it won't cause any exception at least.

And for the changing part in my PR. These codes are only related to general tab. Therefore, I feel it is enough to maintain correctness by guaranteeing the biblatexmode no change.

I don't know if I misunderstand something. If any, please let me know ^_^ =||= Okay, I will try to explain what I mean, it was maybe not that clear with all the preferences.

The value selected in the combobox is stored in the GeneralPreferences, part of JabRefPreferences under the key `BIBLATEX_DEFAULT_MODE` and converted to a boolean, true for biblatex, false for bibtex.
See `storeGeneralPreferences`.

The stored value is then converted from boolean getDefaultBibDatabaseMode to the Mode again.

This value is checked in several other , for example in the BibTexKeyPatternPanel to determine which fields to show.
https://github.com/JabRef/jabref/blob/62c8bf1a526802f16f524b31e57ab2859ce449d2/src/main/java/org/jabref/gui/preferences/BibtexKeyPatternTabView.java#L41

It's also used to set the library mode when you connect to a shared SQL database. So if you set it to bibtex in the preferences and connect to a shared library , the library will be automatically in bibtex node. 
And it's used to check when you open a bib file without JabRef-metadata and for custom entry types.  see `CheckForNewEntryTypesAction`. 
I fear if we remove this completely, we will make some users unhappy.

PS: Some History on the two modes:
The reason for these two modes is that back in the days when Tex was created there was only bibtex, it was created around 1988 and it was not further developed.
So some people decided to create biblatex meant to be the successor. However, still today many journals still only accept the plain old bibtex in their submissions.  That's why JabRef has both.
 =||= > Okay, I will try to explain what I mean, it was maybe not that clear with all the preferences.
> 
> The value selected in the combobox is stored in the GeneralPreferences, part of JabRefPreferences under the key `BIBLATEX_DEFAULT_MODE` and converted to a boolean, true for biblatex, false for bibtex.
> See `storeGeneralPreferences`.
> 
> The stored value is then converted from boolean getDefaultBibDatabaseMode to the Mode again.
> 
> This value is checked in several other , for example in the BibTexKeyPatternPanel to determine which fields to show.
> https://github.com/JabRef/jabref/blob/62c8bf1a526802f16f524b31e57ab2859ce449d2/src/main/java/org/jabref/gui/preferences/BibtexKeyPatternTabView.java#L41
> 
> It's also used to set the library mode when you connect to a shared SQL database. So if you set it to bibtex in the preferences and connect to a shared library , the library will be automatically in bibtex node.
> And it's used to check when you open a bib file without JabRef-metadata and for custom entry types. see `CheckForNewEntryTypesAction`.
> I fear if we remove this completely, we will make some users unhappy.
> 
> PS: Some History on the two modes:
> The reason for these two modes is that back in the days when Tex was created there was only bibtex, it was created around 1988 and it was not further developed.
> So some people decided to create biblatex meant to be the successor. However, still today many journals still only accept the plain old bibtex in their submissions. That's why JabRef has both.

@Siedlerchr  Thank you for your patience. I think I understand your worries. So how should I do now? Just change the name to ""Default library type"" or something else? =||= >Thank you for your patience. I think I understand your worries. So how should I do now? Just change the name to ""Default library type"" or something else?

@LuckyOne09  Yes, change it to Default library type and maybe a help tool tip like ""Default library mode for shared or imported libraries""  =||= With view towards what we discussed in the last dev call, I would propose to use this preference option also for the ""New library"" command. That is, remove the submenus ""Bibtex"" and ""Biblatex"" which are currently shown and always create a new library with the option specified in the preferences.

@JabRef/developers what do you think? =||= @tobiasdiez  I'm strongly against removing this selection from the menu. I remember in the past we only had one button ""New bibtex library"" and then we added ""New biblatex"" as well. For me it's still important to have this selection at the beginning. Otherwise it requires extra work changing it in the library properties. And I guess this is a tradeoff vs pro users and normal users
 =||= Mhhh...it's like 4 clicks to change the library type and then also only if it's not your usual default type. Given the fact that the discourse question concerning the difference of bibtex and biblatex is the one with the most hits, I guess quite a few users might be irritated what to choose - and this for the very first interaction with JabRef 😞
I really think we should streamline the process of creating a new library as much as possible. =||= +1 for streamling.

At a fresh installation, the format still should be ""BibTeX"". - Improved: If pdflatex.exe exists, choose BibTeX at first startup, otherwise BibLaTeX.

Since 5.0, we do not show the mode any more. I am working to reintroduce it at Fix setting of title (and remove obsolete comments) by koppor · Pull Request #6129 · JabRef/jabref
https://github.com/JabRef/jabref/pull/6129. =||= I would then vote to have biblatex as default mode. As it's the defacto modern foimat we should make it our default as well. Despite that, if you still need bibtex for some journals there are tools for an automatic conversion.
Refs: https://github.com/plk/biblatex/issues/292
https://gitlab.com/Nickkolok/biblatex2bibitem =||= In the context of computer science, I have **huge** difficulties with BibLaTeX as default mode. In our main publishers: Springer and ACM, there is no proper BibLaTeX style. ([BibLaTeX LNCS flawed](https://tex.stackexchange.com/a/508842/9075), [IEEE has one](https://ctan.org/pkg/biblatex-ieee?lang=de), for ACM there is a [workaround](https://tex.stackexchange.com/q/172147/9075))

Thus, the proposal for checking of presence of `pdflatex.exe`. The main latex users at PhD level will use bibtex (in the field of computer science and most likely also other natural science fields). The main latex users at student level will use biblatex. The non-latex users will use most likely happpy with BibLaTeX since they will use it with OpenOffice, Word, ...

This text is based on my 12+ years experience in research+teaching, publishing 100+ papers with different co-authors using LaTeX, and maintaining improved templates for [LNCS](https://latextemplates.github.io/LNCS/), [IEEE](https://latextemplates.github.io/IEEE/) and contribution to [Gesellschaft für Informatik e.V. (GI)'s template](https://github.com/gi-ev/LNI).
 =||= > Despite that, if you still need bibtex for some journals there are tools for an automatic conversion.
> Refs: [plk/biblatex#292](https://github.com/plk/biblatex/issues/292)
> [gitlab.com/Nickkolok/biblatex2bibitem](https://gitlab.com/Nickkolok/biblatex2bibitem)

Are these tools better than JabRef in their conversion? JabRef also offers a conversion! See [Cleanup entries](https://docs.jabref.org/finding-sorting-and-cleaning-entries/cleanupentries). Needs to be documented though.  =||= Seems to be a topic for our next devcall!  =||= > > Thank you for your patience. I think I understand your worries. So how should I do now? Just change the name to ""Default library type"" or something else?
> 
> @LuckyOne09 Yes, change it to Default library type and maybe a help tool tip like ""Default library mode for shared or imported libraries""

Thank you for your guidances.
I am trying to do this. But I found that I can not 
change```<Label text=""%Default bibliography mode"" GridPane.rowIndex=""2""/>``` in ```GeneralTab.fxml```
to ```<Label text=""%Default library type"" GridPane.rowIndex=""2""/>```
directly. IDEA ask me to change the content of build.property and  I think it is inappropriate.

I found that I could write like this:
```
        <Label GridPane.rowIndex=""2"">
            <text>Default library type</text>
        </Label>
```
But I think it is inconsistent with other code.
So could you give me some hints for this, in fact, I did not use this kind of advanced syntax in JavaFX. Sorry for this.

And another question is that could you give me some samples/screenshots of help tool tips showed in jabref. I didn't find some sample for this, so I can't know what the help tool tip should look like.

 =||= DevCall decision: Remove sub menu at new database and create in default mode.

![grafik](https://user-images.githubusercontent.com/1366654/84112810-be38dc80-aa29-11ea-821a-78b39fa7062e.png)
 =||= @LuckyOne09  It would be really cool if you could implement the changes from our devCall decision.
So the preferences stay as they are and  you just rename them to Default library type.
You then need to adjust the l10n/en.properties file  =||= This is a good start. Since there was no activity since a few weeks and we would like to get this in, we take over at this point. =||= > This is a good start. Since there was no activity since a few weeks and we would like to get this in, we take over at this point.


Oh, I am so sorry about forgetting this issue totally. It is nice that you can take it over since you are much more professional. Thank you for your guidance again. Looking forward to new JabRef version  🥇 👍 
 =||= Hi @LuckyOne09 I implemented the changes we have decided in the devcall, to clean up a bit in the PRs, but I did it in this case from a fresh start. I hope you don't mind. Thanks anyways for your work and interest in JabRef. Don't let this closed PR bring you down, maybe it's our fault, that we failed to communicate our roadmap and design principles for JabRef. Sorry.

We would be very happy, if you decide to think about working on another issue. Maybe you would like to take a look on the good first issues list again? https://github.com/JabRef/jabref/issues?q=is%3Aissue+is%3Aopen+good+label%3A%22good+first+issue%22 or here: https://github.com/koppor/jabref/issues?q=is%3Aissue+is%3Aopen+good+label%3A%22good+first+issue%22 =||= I don't mind absolutely, thank you for your guidance, I will take a look again and see what I can help for JabRef😁. =||= "Streamline new library command"fixes #6470 
closes #6539 

This PR implements the changes, which were decided in the devcall in early june about the PR (https://github.com/JabRef/jabref/pull/6539#issuecomment-641056536)
It merges the new library command in the toolbar and the file menu to always create a new library in the current default library mode and changes the label in the preferences.

![grafik](https://user-images.githubusercontent.com/50491877/90682332-14659f80-e265-11ea-8a1c-426b1d378951.png)

![grafik](https://user-images.githubusercontent.com/50491877/90682490-50990000-e265-11ea-8bbe-77da34f2bba1.png)


- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus08/22/20, 02:38:31 PM
6787.06788"Settings in ""Enable field formatter"" in ""Cleanup entries"" do not work""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version jabref_5.1-1_amd64.deb (build 2020-08-22) <!-- version as shown in the about box --> on Linux (Ubuntu 20.04) <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Settings in ""Enable field formatter"" in ""Cleanup entries"" do not work at all. 

Steps to reproduce the behavior:
1. create new entrytype book with the following info.
    + title: test for title case
    + url: any url address
2. In ""Enable field formatter"" in ""Cleanup entries"", set the following:
    + title: Title case
    + url: Clear 
3. When click the cleanup entry button (or from Quality menu), title should be formatted as Title case (change to: Test for Title Case) and url field should be empty. However, nothing is changed: title is still in all lower case and url is still there.

My actual setting is much more complicated with much more fields and other settings but none of them works. 

I like the new version with filter group on top since I have several thousands of entries in my database and the list of group is very long. Hpefully it would be an easy fix otherwise I'll be forced to install the stable version since I use the ""cleanup entry"" tool very frequently.  

Is there anything you can do to help?  Thanks.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Thanks for reporting. I could confirm this bug and I prepared a fix.
If you disable the checkbox ""Enable field formatters"" it should work. The logic is apparently the wrong way. =||= "Fix cleanup Field formatters not working when enabled"Fixes #6787

The problem orginally comes from here:
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/gui/commonfxcontrols/FieldFormatterCleanupsPanel.java#L109

Unfortuantely it's not possible to add a not() there directly
The method bindBidirectional(Property<Boolean>) in the type BooleanProperty is not applicable for the arguments (BooleanBinding)



<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr08/26/20, 08:02:58 PM
6697.06825Failing architecture tests"Just as to remind that this is known, but not yet fixed.

We cannot fix it today, but hopefully a PR will come in soon.

```text
Test 10 -- is org.jabref.model independent of org.jabref.logic? FAILED

  org.opentest4j.AssertionFailedError: The following classes are not allowed to depend on org.jabref.logic ==> expected: <[]> but was: <[src/main/java/org/jabref/model/cleanup/NormalizeNewlinesFormatter.java]>
      at org.jabref@100.0.0/org.jabref.architecture.MainArchitectureTests.firstPackageIsIndependentOfSecondPackage(MainArchitectureTests.java:110)
```""It depends on OS.newline which is in logic. Need to move OS to model as well =||= Argh. It depends on l10n which is also in logic. Should I add an exception for this case?
I know the reason for our architecture, but due to one instanceof check I already had to move OS and NormalizeCleanupFormatter down to model.

Edit// I can get rid of the l10n. It's an internal formatter only
 =||= Please try to keep model with inbound dependencies only. This allows for offering JabRef as a programming library.  =||= I tried to dig down the root cause:

- 1a43290a5e306a4ceb2c58d2d01ec9bca4163516 move formatter down to model. Did this happen directly in the master branch? There is no PR linked from the commit.
- The call to `NormalizeNewlinesFormatter` was introduced in #6528 by @calixtus to fix https://github.com/JabRef/jabref/issues/5904.

## Notes

- `public abstract class Formatter {` was always in `org.jabref.model.cleanup`. I always felt is trange that the abstract interface is is model, but the implementation in logic. There is no ADR for this
- `FieldFormatterCleanup` seems to be in the model packge sind ages. =||= https://github.com/JabRef/jabref/pull/6717#issuecomment-664556955 =||= "Architecture fix by re-sorting the classes"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

To be merged after JabCon. Fixes #6697

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tobias Dieztobiasdiez09/02/20, 11:40:53 AM
6039.06828Font size increase does not increase preferences font size"![grafik](https://user-images.githubusercontent.com/1366654/75488915-7ed20d00-59b1-11ea-9d83-80e76e90b355.png)""Hi, I found something strange when I try to reproduce this bug. If I increase the font size too large, then the UI will be like this: 
![bug_related_font_size](https://user-images.githubusercontent.com/38714962/77840262-ed280c00-71b7-11ea-8122-b0b98aac5022.JPG)
You can see when font size is too large, there is no menu displaying above. Hence, it will be very difficult to find what I want(In fact, I spent long time to try to find preference tab again.). So I guess that it may be another bug?
 =||= Hi，@koppor 

I have been working on this for a long time. I feel that I have found some useful things. But I am still confused about some implementations of JabRef. 
I found that in the ThemeLoader.java, there are codes that are responsible for changing the font-size according to JabRefPreferences.
 
https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/util/ThemeLoader.java#L75-L84

I guess that the cause of this bug is that these codes only change the font size of elements in root. But like elements in Apperance tab, they are in other more specific style class.

https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/preferences/AppearanceTab.fxml#L17-L19

Therefore, I think that is why the font size change in root can't affect the preferences font size. (By the way, except preferences dialog, nearly every dialog suffer this bug.)
![bug1](https://user-images.githubusercontent.com/38714962/81041860-70d4c700-8ee1-11ea-96f3-72ffd6864981.jpg)

I tried to get the specific style class of preferences dialog,so I added codes in Themeloader.java to solve this problem like that:

![solution](https://user-images.githubusercontent.com/38714962/81042054-e2ad1080-8ee1-11ea-8f9a-9a57491a50cd.JPG)

Unluckily, it didn't work.

I am wandering now...... So I will appreciate you very much if you could give me some hints or suggestions.  =||= Hi, maybe that helps: The PreferencesDialog has it's own CSS file, I am not sure how it's overriden or related to the main file
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/preferences/PreferencesDialog.css =||= Hi,@Siedlerchr
Thanks for your help.
But I found that there are no invocation to add PreferencesDialog.css to any scene.

![screenShot](https://user-images.githubusercontent.com/38714962/81048520-117db380-8eef-11ea-8b01-bec8701b43e4.png)

And in the PreferencesDialog, there are no settings about font size. Therefore, it seems that it is not useful for fixing this bug?

 =||= Now, we guess that maybe the cause is that when click Preferences.
many scenes will be created according to the codes:

https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/preferences/PreferencesDialogViewModel.java#L39-L61

And we guess that these new scenes don't install css. Therefore we add some codes in 
https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/preferences/PreferencesDialogView.java#L113

we change it to this:

```
    @FXML
    void showAllPreferences() {
        preferenceTabList.getItems().forEach(tab -> Globals.getThemeLoader().installCss(tab.getBuilder().getScene(), Globals.prefs));
        viewModel.showPreferences();
    }
``` 

But it does not work again.  So, I  want to ask if there are some misunderstanding I have here?

Thanks very much for your patience and kindness =||= "Apply css files correctly to dialogs"Fixes #6039. Doesn't work in all cases (for some strange reason), but in most it does.

Continuation of #6429, so please add LuckyOne09 as co-author.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Tobias Dieztobiasdiez09/01/20, 10:36:39 AM
6532.06833New entry from DOI, entries always for bibtex not biblatex"JabRef 5.1--2020-05-23--03e3663
Windows 10 10.0 amd64 
Java 14.0.1

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
At least importing an entry from a DOI fills the Bibtex fields and not, as the library is defined, the biblatex ones.

Steps to reproduce the behavior:
1. Set the Default bibliographic mode to biblatex
2. Library > New entry for DOI 10.1126/science.1188363
3. Fields Date and Journaltitle are empty and Year (month) and Journal are filled 
"Fix/use format conversion for all imports"This PR adds conversion of entries into the desired format for all imports.
Fixes #6532. 

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Dominik VoigtDominikVoigt09/02/20, 06:51:56 PM
6560.06838Connection Check for HTTP Proxy"Hi there, I would like to request a feature for HTTP Proxy connection check. Unlike some IDE such as IntelliJ IDEA, there do not have a check button for proxy connection. I would like to have a URL written, and verify if a connection via proxy to that URL is ok. A dialog box shown said that ""Connected successfully"" or ""Connection failed"". Thx"This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Add connection check to NetworkTab in preferences"This PR finished the work of @chenyuheng , which we took over in PR #6565 
fixes #6560 

![grafik](https://user-images.githubusercontent.com/50491877/91917583-a7202880-ecc0-11ea-8cc4-f4eb0e0cc311.png)


- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus09/02/20, 12:05:33 AM
6621.06846"""Printed"" and ""Readstatus"" are not remembered, when removed from ""Keywords""""JabRef 5.0--2020-03-06--2e6f433
Windows 10 10.0 amd64 
Java 13.0.2

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

**The special fields _Printed_ and _Readstatus_ do not work independently of the _Keywords_ field:**

I added the _Printed_ field to show up in the main table. If I click the printer icon next to an ""article"" entry, JabRef adds the word ""printed"" to the _Printed_ and the _Keywords_ fields. Because I would like to use my _Keywords_ field for other purposes, I delete the word ""printed"" from the _Keywords_ field.

If I now close the file and re-open it, the ""printed"" entry is lost from the _Printed_ field. But only if the _Keywords_ field contains other entries. If _Keywords_ is empty, ""printed"" is not lost!

(The same is true, I noticed, for the _ReadStatus_ field - I haven't tested any other fields.)

Steps to reproduce the behavior:
1. Make sure to have a database entry with non-empty _Keywords_ field.
2. Set ""printed"" status to true.
3. Remove ""printed"" from the _Keywords_ field.
4. Save file.
5. Reopen file.
""Hi there is a setting in the preferences, sync special fields to keywords. I guess this setting is enabled and causes the behavior  =||= Shouldn't the checkbox ""sync special fields to keywords"" be unchecked by default?
It is not obvious for a user that special fields and keywords are/should/need to be linked, and this leads to confusion. 
My guess is that the principle of least surprise would recommend not to link by default these two features.
Another to tackle th issue:
- why do they need to be linked?
- why do they need to be linked by default?

 =||= I remember our internal discussion, that we should migrate the functionality to the groups feature. Therefore tagging as ""jabcon"".

The development history is that at the introduction of the feature, the developer was not sure what's best: keywords or seperate fields. Some were arguing that ""keywords"" should be the ones provided by the **publisher** and not be modified (at all costs). Others were arguing that keywords are the sole realm of the user.

To the concerete case: The preferences allow only one of the two cases:

![grafik](https://user-images.githubusercontent.com/1366654/85798542-ed479180-b73d-11ea-9ae0-0ad9d2001fcf.png)

Thus, this really seems to a bug. =||= Decision: 

- For JabRef 5.2, we change the default to ""not sync"".
- We will offer a migration from keywords to special fields

@StephanJohn May I ask how you configured JabRef?
 =||= @koppor: I hadn't been aware of the ""sync keywords to special fields"" option, so this had been set to ""enabled"" by default. =||= "No sync of specialfields to keywords as default"fixes #6621 

Proof of concept for future refactorings to reduce the calls to `JabRefPreferences.get()` and `.put()`

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus09/03/20, 10:26:12 AM
6841.06854Module error in chipview in entry editor"When running from Eclipse
Introduced in #6228 

<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 
java.lang.IllegalAccessError: class com.jfoenix.controls.JFXAutoCompletePopup (in module com.jfoenix) cannot access class com.sun.javafx.stage.PopupWindowHelper (in module javafx.graphics) because module javafx.graphics does not export com.sun.javafx.stage to module com.jfoenix



JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. ...
2. ...
3. ...

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>"Update run configuration for IDE"Fixes #6841

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr09/02/20, 08:25:44 PM
6834.06858New DOI icon is confusing and inconsistent"The new icon used for DOIs is confusing since the chain icon is crossed out.
Furthermore, the DOI icon in the entries is inconsistent with the DOI icon in the header.

Suggestion: Either revert the icon back or use a normal chain icon.
Furthermore, make the DOI icon used in the header and entries consistent.

![image](https://user-images.githubusercontent.com/43381984/91891570-8ee4e500-ec91-11ea-9844-52f478103f9b.png)""Since this is an external link, the icon should be the normal link icon - not crossed out =||= It seems the chain is crossed out when there is no information from the URL or the DOI. When the information is available, the chain is a regular one (not crossed out). Finally, when both are missing, no icon is shown. Is this behavior correct?  =||= In JabRef 5.2:
- the chain is crossed out when there is only one link identifier.
- the chain is not crossed out when there are several link identifier.
- no symbol when there is no link identifier

To me it looks fine, except for the crossed out chain: I do not understand the rationale.
 =||= Crossed out is crossed out. Thus, interpretation as ""one"" is strange.

Can we create a custom icon?

## Alternative 1

- chain with a small one - having one entry attached
- chain with a small * - for more than one entry (or the real number of links showing)

## Alternative 2

- single chain - having one entry attached
- two chains overlapping - having multiple links attached

## Discusion

I am or alternative 2, because two same icons denote multiplicity =||= For Alternative 2 
- single chain: there is an icon called ""link"" available immediately in the library. 
- two chains: keep the ""link_variant"" that has two chains overlapping.

Do you agree?

 =||= "Fix icon issue"Fixes #6834

Changed the link used when we have only one entry to a single chain.

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

![image](https://user-images.githubusercontent.com/34105280/92061703-cd3eda80-ed4b-11ea-9a6c-da306cf58bd3.png)"Fabio Marcosfabiojavamarcos09/03/20, 10:36:17 AM
6855.06861On start, JabRef should show the main table only (and no entry editor)"> For all JabRef-5.x versions, when I start the application it displays the
> entry details for the first document in the database rather than displaying
> only the database entries. Is there a way for me to turn this off?

As user, when starting JabRef, I want to get an overview on all my references. All entries are equally important at first. Thus, when starting JabRef, the entry editor should not be opened.

We accept that the rendered view of the selected entry won't shown any more."Don't show entry editor on startup"Fixes #6855

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr09/03/20, 09:29:35 AM
5835.06871Menu item 'Copy DOI link' no more visible/accessible"JabRef version JabRef 5.0-beta.342--2020-01-15--58709e7 Linux 5.3.0-26-generic amd64 Java 13.0.2 on Ubuntu 19.10

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. The ""Copy DOI link"" (actually the whole context menu for the URL column) is no more visible/accessible in  the entry list
2. Also can't find this menu item under ""Copy ..."" (where I thought it went after migrating from JR 4 to 5)
3. The menu entry ""Copy -> Copy bibtex key and link"" does not seem to copy anything to the clipboard. The validation message anyway shows that only the key was copied.

This is probably not a bug but I thought it is tiny enough to include it as an issue."Hi, I would like to try and fix this.  =||= fixed 'copy key and link'"'copy key and link' from right-click menu creates a string that is not a url. it includes the url, but it also includes the key.
setHtmlContent() was not appropriate.

Fixes  #5835
https://github.com/JabRef/jabref/issues/5835

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Nikolaus KoopmannPremKolar09/29/20, 06:54:23 AM
6878.06879Paste in Bibtex Source field does not work"JabRef version 5.1 on OSX

- [ x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->


Steps to reproduce the behavior:
1. Use the + button to add new article
2. attempt to paste a bibtex item
3. observe that paste fails



""Paste the bibtex on the maintable instead. Jabref will automatically create a new entry. Also works for DOIs =||= I see so is the paste functionality deliberately disabled in the bibtex source panel? Paste seems to work in other panels. =||= Normally it should work as well, but we had to implement a workaround for a bug in jdk which would paste things twice in the other input fields. 
This is probably a consequence of that
We need to check if we can tweak the work around for the source field. =||= "Fix pasting in CodeArea under mac"CodeArea does not implement TextInputControl


Fixes #6878

It would be if someone could test this under linux and windows
1. Copy bibtex entry
2. paste in source code editor in entry editor
3. Pasting works and no duplicates on the maintable

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr09/15/20, 06:55:16 AM
6707.06897Improvement of Duplicate Detection"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

Please see the original write-up for this on the features request page: https://discourse.jabref.org/t/more-control-on-the-duplicate-finder/120/8

Adding the issue here based on the recommendation of Chirstoph's response to the above.""Hi. Can I start working on this? =||= @KunAndrew  Sure, go ahead! To get started check out the [Contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md)
As I outlined in the forum answer already, the code for the Duplication algorithm is located in this class:
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/bibtex/DuplicateCheck.java

One first easy step would be the comparison of the Identifier Objects, by using the classes from the Identifier package and calling parse, like DOI or ArXIV or ISBN. It might be useful to add the parse method to the interface. 
https://github.com/JabRef/jabref/blob/ba68c09765d1cf7a7b90fec4c78924243210b1dc/src/main/java/org/jabref/model/entry/identifier/DOI.java#L133

A second good thing would also to reduce the weighting of the entry type and to exclude or reduce the weighting of some fields like note or comment.
 =||= @Siedlerchr @mattys101  Should I do ""option to mark the entries as not duplicates"" within this pull request?
Pull request unit test failed. I can not define this related with my code or not, because when i running test without my changes they failed too.
Second problem: when I run scripts/generate-authors.sh. for update  AUTHORS. It add my name to the list but reduce list from 401 to 48 peoples.
https://github.com/JabRef/jabref/pull/6756 =||= @mayrmt  Thanks to the groundwork by @KunAndrew  and the finishing of us, we could merge it
Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "DOI matching in duplicate check"Fixes #6707 

Follow up from #6756

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr09/29/20, 06:06:57 AM
6880.06920"Cleanup entry ""Move DOIs from note and URL field to DOI field and remove http prefix"" incorrectly recognizies urls ending with ""2010/stuff"" as DOIs""JabRef version 5.2--2020-09-06--c0b139a on Windows 10 10.0 amd64, Java 14.0.2

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Save the file
```bibtex
@Misc{TrustedSlind,
  author   = {Konrad Slind},
  title    = {Trusted Extensions of Interactive Theorem Provers: Workshop Summary},
  date     = {2010-08},
  location = {Cambridge, England},
  url      = {http://www.cs.utexas.edu/users/kaufmann/itp-trusted-extensions-aug-2010/summary/summary.pdf},
}
```
  as a `.bib` file.

2. Open this file in JabRef
3. Click on the one entry to select it
4. Click Quality -> Cleanup entries / Alt+F8
5. Ensure that only the first item (""Move DOIs from note and URL field to DOI field and remove http prefix"") is checked
6. Click OK
7. Double-click on the entry and click ""BibTeX source""

Note that the new source is
```bibtex
@Misc{TrustedSlind,
  author   = {Konrad Slind},
  title    = {Trusted Extensions of Interactive Theorem Provers: Workshop Summary},
  date     = {2010-08},
  doi      = {10/summary},
  location = {Cambridge, England},
}
```

This url is not a DOI link, though!  Presumably this is because the matcher code at https://github.com/JabRef/jabref/blob/ba68c09765d1cf7a7b90fec4c78924243210b1dc/src/main/java/org/jabref/model/entry/identifier/DOI.java#L30-L77
considers all non-space text starting with `http://` or `https://`, followed by `10/` followed by any non-space text, to be a DOI.  This is absurd.  The character immediately preceding the `10`, `doi:`, or `urn:` should at the very least be required to be a url separator character such as `/`, `:`, `?`, `&`, or `=`.""Can I please do this??
Looks like fun! :)
PLease! =||= @PremKolar  Sure, go ahead!  =||= This is not as straight forward as I thought.
The problem is with the _short_ dois. These can look like

- 10/1234
- doi:10/1234
- 10/2021
- 10/d8dn
- https://doi.org/d8dn
- etc..

I don't think there is a way to safely detect these in a url or in some other field. My only idea was to not delete the entry in respective original field in the case of a found short doi, so as not to lose the information in case of ambiguity. But this would inevitably result in wrong data in the _doi_ field sometimes, when the _url_ field is eg **https://www.abc.de/10/abcd** or when the field _Note_ reads eg **01/10/2012**.

Anyone willing to share their thoughts?

http://shortdoi.org/ =||= > https://doi.org/d8dn

This one isn't matched because there's no 10, though, right?

I think that detecting what comes before the 10 and ensuring that it's a valid separator would already be a great improvement.

Another option is to query doi validity (I think there's already something like this in automatically searching for dois for an entry).  If the matched doi isn't valid (I don't think 10/summary is, for example), then it shouldn't move it to the doi field. =||= >   https://doi.org/d8dn
This one isn't matched because there's no 10, though, right?

Exactly! that's the 2nd Problem.

Ok yes, validating the doi is of course the obvious solution to this problem.. thanks for the idea!
I have quite a busy week ahead, but I should have found some time by the end of the week! :) =||= Please keep in mind that the Cleanup actions can be executed for all entries in your library. So if you have thousands of entries you would generate 1000 requestss to the DOI resolver =||= right..
I will test scalability and limit the validations to ambiguous cases only! =||= "Improve parsing of short DOIs"Fixes #6880

no more erroneous interpretation as short DOI of url's/notes like:
- ""http://www.cs.utexas.edu/users/kaufmann/itp-trusted-extensions-aug-2010/summary/summary.pdf""
- ""abc.com/20/10/something/whatever""

still correct detection of short DOIs hidden in url's as long as _doi_ is part of subdomain, eg:
- ""www.doi.xyz.com/10/abc123""

correct detection of short DOIs like:
- ""doi.org/ab123""
- ""https://doi.org/ab123""

added respective tests.

added entry to CHANGELOG 

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Nikolaus KoopmannPremKolar09/20/20, 08:09:27 PM
6863.06928External files do not open anymore (Windows 10)"JabRef version 5.1--2020-08-30--e023aa0
Windows 10 10.0 amd64, Java 14.0.2

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

After updating JabRef from 5.0 to the newest version downloaded from here: https://www.fosshub.com/JabRef.html (""JabRef Windows Installer""), external files linked to the bibliography entries do not open anymore. Everything worked with the same bib file in the previous JabRef version.
* ""Linked files"" icons are still shown near entries. However when clicking on such an icon, JabRef opens my default documents folder. 
* Context menu items ""Open folder"" and ""Open file"" are dimmed. 
* In the entry editor / ""General"" pane, when hovering over the file name element, a tooltip appears with the text ""Could not find file ..."".
* When adding a link to a pdf file using the entry editor (by navigating to the file), the path do the pdf file does not become relative path, as in the previous JabRef version.
 
The same behavior was also observed for latest development version (JabRef-5.2.msi, 2020-09-03 13:04, 178.9 MB, JabRef 5.2--2020-09-03--1283f9f).

Steps to reproduce the behavior:
1. Create any bibliography entry
2. In the entry editor / ""General"" pane, click ""+"" icon on the right of the ""File"" field, and select a pdf file
The file name appears in the ""File"" field, the ""Open file"" icon appears near the entry, but the corresponding functionality does not work as described above.

Below is an example of a bibliography entry (among tens of entries in my bibliography file, all having links to pdf files, none of them work). The entry has two links to a same pdf file. The first one is relative, it was added in a previous version of JabRef, and worked as expected in the previous version. The second link is absolute, it was added in the current version of JabRef. None of the links work; the described behavior applies to both of them.

```
@Article{Monkk2013,
  author    = {Mikko M{\""o}nkk{\""o}nen and Artti Juutinen and Adriano Mazziotta and Kaisa Miettinen and Dmitry Podkopaev and Pasi Reunanen and Hannu Salminen and Olli-Pekka Tikkanen},
  title     = {Spatially dynamic forest management to sustain biodiversity and economic returns},
  doi       = {http://dx.doi.org/10.1016/j.jenvman.2013.12.021},
  issn      = {0301-4797},
  number    = {0},
  pages     = {80--89},
  url       = {http://www.sciencedirect.com/science/article/pii/S030147971300769X},
  volume    = {134},
  abstract  = {Removed for shortening},
  file      = {:Papers/Optimization_and_Decision_Making/Forest_Management/Spatially_dynamic_forest_management_to_sustain_biodiversity_and_economic_returns_2014.pdf:PDF;:C\:/Mytemp/dropbox/Bibliography/Papers/Optimization_and_Decision_Making/Forest_Management/Spatially_dynamic_forest_management_to_sustain_biodiversity_and_economic_returns_2014.pdf:PDF},
  journal   = {Journal of Environmental Management},
  keywords  = {Biodiversity; Cost-effectiveness; Forest management; Land use planning; Multi-objective optimization},
  timestamp = {2014.01.29},
  year      = {2014},
}
```""I can confirm all of the above.

JabRef 5.1--2020-08-30--e023aa0
Windows 10 10.0 amd64 
Java 14.0.2 =||= Check your settings for the file directories.  =||= The settings for default file directories were empty. Setting general or user-specific file directory worked. I can open files directly from JabRef again. =||= It's a nasty bug which somehow slipped into the 5.1 release.  =||= @Bassbiest 
> The settings for default file directories were empty. Setting general or user-specific file directory worked. I can open files directly from JabRef again.

Can you please specify, which settings are you talking about?
 =||= @podkop  See the help on the file directories: https://docs.jabref.org/finding-sorting-and-cleaning-entries/filelinks#directories-for-files =||= @Siedlerchr Thanks a lot, got it. I guess it is clear that option ""_Search and store files relative to library file location_"" should be switched on by default for compatibility with previous versions.

There is a related issue. Links to files where the absolute path is given do not work. I guess they worked before 5.0. Maybe this functionality was removed intentionally. However, I know a use case where having absolute links to files would be convenient.  

In order to make absolute links work, it would be enough to check if the full file name starts with the drive letter or slash, and do not prepend the main directory if yes. Do you think it is worth creating new issue?
 =||= ""Changed default value of ""search and store files relative to bibtex file"" to true""Fixes #6863

~I think the problem was: If isBibLocationAsPrimary is not set, the bib file dir has not been added to the list of searcheable directories at all. If set, it should be the first one to look up, if not, the last.~

See https://github.com/JabRef/jabref/pull/6928#issuecomment-697410826

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus09/25/20, 09:39:51 PM
6906.06933Cannot delete standard entry types"Ubuntu 20.04, JabRef 5.1
The following image shows the dialog to customize entry types. I want to delete the entry ""Patent"" because I never use it. I click on the trash icon. ""Patent"" disappears. I accept changes. I open the entry type dialog again.

Result:
""Patent"" appears again

Expected behavior: 
""Patent"" is deleted

Alternative behavior:
""Patent"" is a standard field in bixtex, the trash icon shouldn't only appear for user defined entry types.

![grafik](https://user-images.githubusercontent.com/8830305/92999845-7fcd2500-f524-11ea-8ee7-cfa0e7026ca6.png)
""Thanks for the report. Actually, you cannot delete the standard entry types. They are always recreated.
However, you can remove/modfiy the fields of the entry type.

=> We should show the trash icon only for custom entry types =||= "Fix remove actions for entry types in the editor"fixes #6906
* Created separate view models for standard and custom entry types, adding remove icon only for the custom ones
* Updated CHANGELOG.md

It's working solution, but please take a look whether the implementation is good. I will modify the user doc if it's accepted.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Dawid Motykadawidm09/24/20, 11:22:49 AM
6583.06938Bibtex citekey has non-ASCII letters"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.0, MacOS 10.14.16

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

I added a citation, and autogenerated a cite key, it contains a non-ASCII letter. 

According to a 7-year old issue:
> The key generator handles accented and other non-ASCII characters by replacement with ASCII characters deemed equivalent. If you have issues where this is not working properly, we'd be happy to look into it.
https://sourceforge.net/p/jabref/bugs/155/

![image](https://user-images.githubusercontent.com/61575/83737883-e607f900-a653-11ea-8a90-6c315bb95028.png)

```
@InProceedings{bakki2018modèle,
  author = {Aïcha Bakki},
  date   = {2018},
  title  = {Modèle et outil pour soutenir la scénarisation pédagogique de MOOC connectivistes},
  file   = {:/Users/stian/Downloads/Thèse_BAKKI_AICHA_Version_F.pdf:PDF},
  year   = {2018},
}
```""Just a quick question: Have you actually tested the issue using the current dev version? You have ticked the field, but the version you report above (5.0) does not represent the current latest development version (see https://builds.jabref.org/master/).

If you have not used the latest development version, always remember to make a backup of your JabRef database, before installing the dev version.

If you have used the latest dev version, you can ignore this post. =||= 5.0 is my installed version but I did download and test the latest
development version today.

On Thu, 4 Jun 2020 at 17:39, AEgit <notifications@github.com> wrote:

> Just a quick question: Have you actually tested the issue using the
> current dev version? You have ticked the field, but the version you report
> above (5.0) does not represent the current latest development version (see
> https://builds.jabref.org/master/).
>
> If you have not used the latest development version, always remember to
> make a backup of your JabRef database, before installing the dev version.
>
> If you have used the latest dev version, you can ignore this post.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/6583#issuecomment-638931602>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AAAPBB54TSJNC5FNOS5SDYTRU654HANCNFSM4NSNXRRQ>
> .
>
-- 
https://networkedthought.substack.com <http://networkedthought.substack.com> --
Networked Thoughts and Learning newsletter
 =||= I reckon, the behaviour in the latest dev version is the same, isn't it? =||= Indeed

On Thu, 4 Jun 2020 at 18:30, AEgit <notifications@github.com> wrote:

> I reckon, the behaviour in the latest dev version is the same, isn't it?
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/6583#issuecomment-638966594>, or
> unsubscribe
> <https://github.com/notifications/unsubscribe-auth/AAAPBB3ES5KY4ONYLHM3GY3RU7D2FANCNFSM4NSNXRRQ>
> .
>
-- 
https://networkedthought.substack.com <http://networkedthought.substack.com> --
Networked Thoughts and Learning newsletter
 =||= Cheers, ok, so this is something that needs to be fixed then. =||= Hmm. Maybe the Characters are not in the unwanted chars list in the preferences  =||= Maybe the simplest solution would be to create new formatter that converts everything to ASCII (and maybe activate it by default).
https://github.com/JabRef/jabref/blob/7cc57474b7aa991ef6ea148d4030d4bb68ee69bf/src/main/java/org/jabref/logic/formatter/Formatters.java#L43-L50 =||= Didn't we recently had the change to the illegal and unwanted characters? @koppor  =||= Yes we have, but I don't think unicode characters are illegal (at least not for biblatex). Moreover, illegal characters would be simply removed, but here we would like to replace them by their asci equivalent.
 =||= 'è' and 'é' are legal characters but they should be replaced by 'e' (because of bibtex).

[Normalizing](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/text/Normalizer.html#normalize(java.lang.CharSequence,java.text.Normalizer.Form)) with NFC fixes the issue for me.

I agree with @tobiasdiez that there should be a formatter, as it would allow users to remove Unicode from file/dir names if they want to (since it will be included by default among modifiers, so `[title:UnicodeTo...]` is valid). It can be done by wrapping `StringUtils#replaceSpecialCharacters`.

Should I take a look at it? =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27  this should be fixed now in the latest development version.

The new version is currently building and approx ready in half an hour


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.
 =||= "Fix for some Unicode characters in citation keys"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6583 . Some unicode characters can be encoded in multiple ways, and the mapping that `StringUtil#replaceSpecialCharacters` relies on does not contain all cases. The proposed solution uses [NFC](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/text/Normalizer.Form.html#NFC) to re-encode the characters so that these characters can be found.
There exists more information on [Unicode normalization in the Java API](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/text/Normalizer.Form.html#NFC).

My subjective opinion is that most people expect Unicode to work similar to NFC, i.e., if characters looks the same, it is likely that they are equivalent. Hence, if someone debugs issues in the `UNICODE_CHAR_MAP`, they will expect NFC.
A more holistic approach should likely start with the [compatibility equivalence](http://unicode.org/reports/tr15/#Compatibility_Equivalence_Figure), which will require larger changes, and there does not seem to be any bugs/issues that requires these larger changes.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] ~Change in CHANGELOG.md described (if applicable)~
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2709/26/20, 03:56:08 PM
6934.06941In entry types editor selected field is not removed after first click "<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.2--2020-09-22--129c36e
Ubuntu 20.04 (Linux 5.4.0-42-generic amd64)
Java 15
<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When a field is selected, it's not removed after the first click on it's remove icon. Doesn't happen for the fields that are not selected.

Steps to reproduce the behavior:
1. Open entry types editor
2. Select one of available entry type fields
3. Click on remove icon for it - the field is not removed
4. Click on the icon again - the field is removed

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->"Fix: in entry types editor selected field is not removed after first click "fixes #6934

The issue is happening because cells with delete icon are set editable (because the whole table is set editable).

https://github.com/JabRef/jabref/blob/129c36e24bbd3332832728124ebf27d2462a0300/src/main/java/org/jabref/gui/customentrytypes/CustomizeEntryTypeDialogView.java#L111-L112

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Dawid Motykadawidm09/24/20, 02:36:53 PM
6866.06946Preferences: Search: Many items are not found"JabRef 5.2--2020-09-03--1283f9f
Linux 4.9.0-13-amd64 amd64 
Java 14.0.2

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

In the preferences window, the search feature misses many (existing) items.

Steps to reproduce the behavior:
1.Options -> Preferences
2. In the search field, type in *mark*.
-> ""Mark new entries with addition date"" is found.
But ""Mark new entries with owner name"" (two lines above) is not.

Many other items cannot be found (Language; special fields; fit; filename; etc.), without any apparent logic between the found/not found items.

PS: I have just discovered the Preferences search. Great feature!
"I am using JabRef version 5.0 with MacOS 10.14.6 and java OpenJDK 14.0.2 2020-07-14 and I saw the same behavior. I am going to take a look. =||= I found the problem. Trying to fix it. =||= Fixed. Submitting the PR soon. =||= @fabiojavamarcos I have just tested the feature. It works like a charm now! Thanks a lot for your contribution to JabRef development. That will make life easier for many people! =||= It is a pleasure to help!  =||= Fix Preferences Search"Updated fxml files from the preferences package to appear in preference search.

The preferences search was unable to find some visual components because they are not a direct child from one of the preferences tab. 
So, the method getPrefsTabLabelMap in PreferencesSearchHandler cannot find them. I moved some components that were inside  <HBox> tags to let them ""visible"" to their parents in the mentioned method. It does not change the UI. Most of the components could be moved. Some could not because they have many parents until the tab and it could impact the UI. 

Fixes #6866


- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

![image](https://user-images.githubusercontent.com/34105280/94328986-0bef3b80-ff6c-11ea-9b03-be3ac24c3638.png)"Fabio Marcosfabiojavamarcos09/28/20, 05:07:45 PM
6867.06960Double key binding for inserting new TechReport and pulling changes from shared database"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.2 on openSUSE Leap 15.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Open a shared database.
2. Press ""Ctrl+Shift+R"".
3. Changes from shared database are pulled **and** a new TechReport is inserted.

Maybe this is quickly done... ;)""Just realised this bug does not depend on Shared Database.
I.e. you can open any library, press ""Ctrl+Shift+R"" and a new TechReport will be inserted. 

I'll try to fix that. =||= @tobiasdiez 
need an advice. ))) Looks like there are 2 actions on ""ctrl+shift+R"" key combination:
- pull changes from shared database;
- create new technical report;

I see it in `KeyBinding.java` file. Which one is better to change? 
I propose to change keybinding for `NEW_TECHREPORT` constant from `ctrl+shift+R` to `ctrl+alt+R`. =||= I would do it the other way because there are a lot of 'New' key bindings on `ctrl+shift+...` (e.g. New Book, New Proceedings,...). =||= OK, the followed combinations are already assigned:
ctrl+shift+(A, C, D, E, I, K, L, M, N, O, P, R, S, T, U)

ctrl+shift+W?
ctrl+shift+J?


 =||= Personally, I would remove the default keybinding for ""new techreport"". I don't think that many people use that regularly to justify having a keybinding for it (but keep it as an option for people to set it later).

It may be a good idea to revise the keybindings in general, and come up with a consistent layout. Most of the current bindings are a result of step-by-step additions, instead of having a general idea. Some pointers for best practices: https://docs.microsoft.com/en-us/previous-versions/windows/desktop/dnacc/guidelines-for-keyboard-user-interface-design#assigning-shortcut-keys =||= OK, I'll look into Microsoft guidelines.
Meanwhile, @m-mauersberger what do you think about removing hotkey for ""Pull changes from shared database"" ? =||= I think the hotkey for pulling changes is important for Databases that do not support pushing =||= For me the same, I would keep it. Mh, what about `strg+alt+R` or `alt+shift+R` for pull changes? =||= Looks like `alt+shift+R` can be used.
I'll test it tomorrow on Mac & Windows.  =||= Seems like `alt+shift+R` is OK.
In case if no more comments, I'll create a pull request. =||= Ouch ))
I've created a pull request and it shows 56 commits and 2 files change. Looks like this is because I created the branch from my Master, but it should be created from JabRef/Master. 

Is that a problem? If yes, I will create a new commit.
 =||= "Corrected shortcut"Fixes #6867 
A new shortcut combination added for ""Pull changes from shared database"", because current ctrl+shift+R is already assigned for ""Create tech report"" command.

- [X] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."GennadiyGena92810/18/20, 09:50:20 PM
6964.06965Cannot add special characters like curley brackets or copy/pase in Bibtex source entry"Dear community and developers,

I recently downloaded version 5.1 of JabRef for macOS (Catalina).  If I open an entry and go to the ""Bixtex source"" tab I cannot insert any special characters like { or [. Furthermore I cannot copy paste using the usual shortcuts like cmd + c and cmd + v, this only works if I right click. It was possible to do all this in version 5.0

Steps to reproduce the behavior:
1. Download version 5.1 for macOS
2. open or add a new entry
3. go to ""Bibtex source"" and try to add any special characters e.g. {""Thanks for your report. 
Copy pasting works again in the latest development version  from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version.
You can also paste bibtex directly on the maintable without creating a new entry first.

The entering of the curly braces seems to be a bug in the external library.  I locally tested it with a downgrade and that seems to work. I will investigate further.
 =||= "downgrade richtextfx to fix entering of curly braces in mac in code area"Fixes #6964 

Refs: https://github.com/FXMisc/RichTextFX/issues/967

TODO: Investigate/report bug
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr10/03/20, 08:26:54 PM
6936.06976irregularly losing ability to edit data in biblatex source tab"JabRef 5.2--2020-09-21--0da0f0c
Windows 10 10.0 amd64 
Java 14.0.2
[Yes ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Having difficulty identifying trigger to reproduce problem.  

When adding to / editing database, I sometimes lose the ability to edit any of the data in the biblatex source tab.  I can switch to the tab, highlight / copy anything in the tab, switch to other tabs and make entries in the different entry fields.  those changes show up in the biblatex source tab, but no cursor appears when clicking into the the source tab text field.  things that are highlighted can't be deleted.  the only way to get direct editing ability back is by closing Jabref.  Upon restarting, everything works as expected. can go in and manually edit within the source tab.  

realize this one might have to sit until somehow able to reliably reproduce, but wanted to document it here. 

<details>
Log file always blank, nothing to copy.

contents of console below, but I'm not certain any of the messages are related. The StatusLogger messages appear on start, and the immediately following ANTLR messages all appear the first time sort the list or edit an item in it:

```
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
ANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.2 used for parser compilation does not match the current runtime version 4.8ANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.2 used for parser compilation does not match the current runtime version 4.8%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%nANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.2 used for parser compilation does not match the current runtime version 4.8ANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.2 used for parser compilation does not match the current runtime version 4.8%d [%thread] %-5level %logger - %msg%n java.lang.IndexOutOfBoundsException: Index 3 out of bounds for length 3
        at jdk.internal.util.Preconditions.outOfBounds(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.checkIndex(Unknown Source) ~[?:?]
        at java.util.Objects.checkIndex(Unknown Source) ~[?:?]
        at java.util.ArrayList.get(Unknown Source) ~[?:?]
        at de.undercouch.citeproc.csl.internal.format.HtmlFormat.doFormatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.csl.internal.format.BaseFormat.formatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.BackgroundTask$1.call(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source) ~[org.jabref:?]
        at javafx.concurrent.Task$TaskCallable.call(Unknown Source) ~[org.jabref.merged.module:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.IndexOutOfBoundsException: Index 3 out of bounds for length 3
        at jdk.internal.util.Preconditions.outOfBounds(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.checkIndex(Unknown Source) ~[?:?]
        at java.util.Objects.checkIndex(Unknown Source) ~[?:?]
        at java.util.ArrayList.get(Unknown Source) ~[?:?]
        at de.undercouch.citeproc.csl.internal.format.HtmlFormat.doFormatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.csl.internal.format.BaseFormat.formatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.BackgroundTask$1.call(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source) ~[org.jabref:?]
        at javafx.concurrent.Task$TaskCallable.call(Unknown Source) ~[org.jabref.merged.module:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.IndexOutOfBoundsException: Index 3 out of bounds for length 3
        at jdk.internal.util.Preconditions.outOfBounds(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.checkIndex(Unknown Source) ~[?:?]
        at java.util.Objects.checkIndex(Unknown Source) ~[?:?]
        at java.util.ArrayList.get(Unknown Source) ~[?:?]
        at de.undercouch.citeproc.csl.internal.format.HtmlFormat.doFormatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.csl.internal.format.BaseFormat.formatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.BackgroundTask$1.call(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source) ~[org.jabref:?]
        at javafx.concurrent.Task$TaskCallable.call(Unknown Source) ~[org.jabref.merged.module:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.IndexOutOfBoundsException: Index 3 out of bounds for length 3
        at jdk.internal.util.Preconditions.outOfBounds(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.checkIndex(Unknown Source) ~[?:?]
        at java.util.Objects.checkIndex(Unknown Source) ~[?:?]
        at java.util.ArrayList.get(Unknown Source) ~[?:?]
        at de.undercouch.citeproc.csl.internal.format.HtmlFormat.doFormatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.csl.internal.format.BaseFormat.formatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.BackgroundTask$1.call(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source) ~[org.jabref:?]
        at javafx.concurrent.Task$TaskCallable.call(Unknown Source) ~[org.jabref.merged.module:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.IndexOutOfBoundsException: Index 3 out of bounds for length 3
        at jdk.internal.util.Preconditions.outOfBounds(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.checkIndex(Unknown Source) ~[?:?]
        at java.util.Objects.checkIndex(Unknown Source) ~[?:?]
        at java.util.ArrayList.get(Unknown Source) ~[?:?]
        at de.undercouch.citeproc.csl.internal.format.HtmlFormat.doFormatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.csl.internal.format.BaseFormat.formatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.BackgroundTask$1.call(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source) ~[org.jabref:?]
        at javafx.concurrent.Task$TaskCallable.call(Unknown Source) ~[org.jabref.merged.module:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.IndexOutOfBoundsException: Index 3 out of bounds for length 3
        at jdk.internal.util.Preconditions.outOfBounds(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Unknown Source) ~[?:?]
        at jdk.internal.util.Preconditions.checkIndex(Unknown Source) ~[?:?]
        at java.util.Objects.checkIndex(Unknown Source) ~[?:?]
        at java.util.ArrayList.get(Unknown Source) ~[?:?]
        at de.undercouch.citeproc.csl.internal.format.HtmlFormat.doFormatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.csl.internal.format.BaseFormat.formatBibliographyEntry(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at de.undercouch.citeproc.CSL.makeBibliography(Unknown Source) ~[org.jabref.merged.module:?]
        at org.jabref.logic.citationstyle.CSLAdapter.makeBibliography(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitations(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStyleGenerator.generateCitation(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.citationstyle.CitationStylePreviewLayout.generatePreview(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.preview.PreviewViewer.lambda$update$3(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.BackgroundTask$1.call(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source) ~[org.jabref:?]
        at javafx.concurrent.Task$TaskCallable.call(Unknown Source) ~[org.jabref.merged.module:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) ~[?:?]
        at java.util.concurrent.FutureTask.run(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[?:?]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[?:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
```
</details>""@NRJank Thanks for this bug report. I'm actually a bit curious, why the antlr parser is complaining. Please report back, if you can find a way to reproduce the bug. =||= haven't found anything consistent yet. couple other times it happens I tried repeating the previous few actions after reopening and it didn't happen. since I'm not always working in that biblatex source tab, its hard to tell when the problem kicks in.

regarding the ANTLR error in the log, consistently the first time I open Jabref I get the Statuslogger errors.  just clicking on any item in the database (no editing, sorting, anything, just clicking on one of the items), Jabref pauses for 5 seconds or so (other clicks do nothing during this time) after which the following appears in the console:

`ANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.2 used for parser compilation does not match the current runtime version 4.8ANTLR Tool version 4.7.2 used for code generation does not match the current runtime version 4.8ANTLR Runtime version 4.7.2 used for parser compilation does not match the current runtime version 4.8`

after that, it's fully responsive and doesn't do this again.  I don't usually get the much longer set of messages as in the original report.  not sure what created those.  =||= Thank you for the quick response. I believe we need to wait, until some regular reproducibility can be seen or another user is affected by this issue. We'll keep it open.
The antlr issue seems to be another problem. I'll ask @tobiasdiez , if hes got an idea, since he is - I believe - the most experienced one of us with the external dependency resolution in github. =||= The antlr dependency is defined in 
https://github.com/JabRef/jabref/blob/18371b51187890fca1437a8382b806f4c3c27f6c/build.gradle#L137-L138
and it looks like 4.8 should be used for the generation as well as for the runtime. Anyway, I don't think this warning is really related to this issue, and I also wouldn't spent time fixing ANTLR 4 since this only used for the search syntax and we wanted to switch to lucene for this anyway.

(ANTLR 3 should also be removed along with the BST feature, but then we have to look for a new Vorsitzender, @koppor 🦊 ) =||= I have noticed the same thing with my BibTeX database.
It is a recent problem. It happens from time to time (like once per hour)
Nothing in the log.

JabRef 5.2--2020-09-29--8a44d41
Linux 4.9.0-13-amd64 amd64 
Java 15 =||= I have also noticed this problem since JabRef 5.0. I think I could create an example to reproduce the error.

1. Select an entry. You may access the ""BibTeX source"" tab to verify that you can edit the entry.
2. Modify any field, adding some symbol that would make the entry invalid. For instance, you can add a '{' in any field.
3. Save the database. An error will be shown (as expected).
4. Fix the error (by removing the invalid symbol). 
5. Save the database.
6. Access the ""BibTeX source"" tab. You cannot edit its content anymore.

Looking at the source code, I believe the problem is at SourceTab.updateCodeArea(). This is the only method that changes the codeArea status (codeArea.setEditable(false). It's kinda trick to run updateCodeArea: any error done when directly editing the code in the ""BibTeX source"" tab is captured by ""SourceTab.storeSource()"". To trigger the method 'updateCodeArea', we must create an event that will trigger its listeners (entry.typeProperty() and entry.getFieldsObservable()). That's why I forced an invalid symbol in step 2.
 =||= This patch seems to do the trick. It re-enables codeArea as editable if the source code is correct (we cannot fix the error introduced in step 2 by directly editing the source area, but we can fix it by editing the field, which will trigger the listener and call the `updateCodeArea()` method, which will enable `codeArea` if the source of the BibTeX entry is syntactically correct).

```
diff --git a/src/main/java/org/jabref/gui/entryeditor/SourceTab.java b/src/main/java/org/jabref/gui/entryeditor/SourceTab.java
index aba1aca53..d16fe52e6 100644
--- a/src/main/java/org/jabref/gui/entryeditor/SourceTab.java
+++ b/src/main/java/org/jabref/gui/entryeditor/SourceTab.java
@@ -224,6 +224,7 @@ public class SourceTab extends EntryEditorTab {
             codeArea.clear();
             try {
                 codeArea.appendText(getSourceString(currentEntry, mode, fieldWriterPreferences));
+                codeArea.setEditable(true);
                 highlightSearchPattern();
             } catch (IOException ex) {
                 codeArea.setEditable(false);
``` =||= @magsilva  Would you be so kind to submit a PR? That would be really great!  =||= I don't understand yet, why the code area is disabled at all... =||= Thanks to @magsilva  this issue should now be resolved in the latester development version (currently building). =||= After using JabRef for several days, the issue did not occur. So, I guess it is solved! ;-)
Thank you @magsilva! =||= ""Fix ""irregularly losing ability to edit data in biblatex source tab""""Fixes #6936 is about the source tab (BibTeX source) losing the ability to be editable (https://github.com/JabRef/jabref/issues/6936#issuecomment-703110024). This happens because `codeArea` can be disabled, but there is no code path that re-enables it.

This patch re-enables `codeArea` as editable if the BibTeX entry's source code is correct. Although the source tab cannot be used by the user to fix any syntax error in BibTeX fields (source tab will be disabled if there are syntactic errors introduced by editing the fields in the other tabs), such error can be fixed by editing the field, which will trigger `SourceTab`'s listener and call the `updateCodeArea()` method, which will enable codeArea if the source of the BibTeX entry is syntactically correct.


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Marco Aurélio Graciotto Silvamagsilva10/04/20, 06:01:13 PM
6796.06982Dark theme: Entry table: Header of index without the proper color"JabRef 5.1--2020-08-26--fd5bc52
Linux 4.9.0-13-amd64 amd64 
Java 15-ea

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

A tiny issue: the header of the index column (with the symbol #) does not follow the color scheme of the dark theme. The symbol is black while it should be gray.
See top left-hand corner:
![Capture du 2020-08-27 08-22-02](https://user-images.githubusercontent.com/6931104/91399849-01436880-e83f-11ea-972c-5ced8435c880.png)""Our team @ISD14-LNMIIT wants to work on this issue. Please assign this issue to us!
@Siedlerchr  =||= Thanks for taking this issue! At the same time you could also take a look at #6791 also an issue with the dark theme. Probably some color definitions confused. 

For getting started please read through our [Contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) 
Codewise the DarkTheme is located here:
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/Dark.css =||= Surely, our team will loook into this issue too =||= @Siedlerchr,
if possible, I would like to offer 2 solutions for this issue:
1) Convert column into ""field column"". 
Column header will change its color as required. But we are loosing a tooltip - ""Index"". I noticed, that all other columns with text in header do not contain tooltips. So, maybe it's OK.

2) Change column header from ""#"" into an icon. 
In this case we are not loosing tooltip. Example:
<img width=""359"" alt=""Screenshot 2020-09-29 at 13 24 41"" src=""https://user-images.githubusercontent.com/20572030/94547263-b78fd880-0257-11eb-8ff3-5e8627b6fb37.png"">

Unfortunately I can't keep the header text ""#"" AND tooltip at the same time. ))) 

 =||= @Gena928  Thanks for taking this.
I am actually not that deep into the main table column model. Maybe @calixtus or @tobiasdiez  can say more =||= Another idea would be to add a style class to the node in https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/maintable/MainTableColumnFactory.java#L132 which sets the right font color. =||= @tobiasdiez 
thanks for Idea. I found a stylesheet `Dark.css` and feel like `.text-unchanged` is what we need.
`header.getStyleClass().add(""text-unchanged"");`

<img width=""403"" alt=""Screenshot 2020-09-29 at 17 46 57"" src=""https://user-images.githubusercontent.com/20572030/94574473-d99b5200-027b-11eb-8840-fdb577ebbbb6.png"">

Can I create a pull request?
 =||= @Gena928  Sure, go ahead! Another issue with the Dark Theme was reported here, maybe you can also take a look at that #6791 =||= Are there any examples where ""text-unchanged"" is also used? =||= I found only one more entry in package `org.jabref.gui.mergeentries`.  
Class `DiffHighlighting`.
Method `public static Text forUnchanged(String text)` =||= I was able to solve the same issue with these small changes to:
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/maintable/MainTableColumnFactory.java#L132
and
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/icon/IconTheme.java

![Screenshot from 2020-09-29 15-55-19](https://user-images.githubusercontent.com/71780917/94609598-0431de80-026d-11eb-8979-d27b61a26546.png)
![Screenshot from 2020-09-29 15-23-03](https://user-images.githubusercontent.com/71780917/94609603-05fba200-026d-11eb-8fb4-5e5cb797897c.png)

I'm not sure which is the better solution.

The methods createIndexColumn and createGroupColumn work very differently from the other column creation methods (for example createFilesColumn). They should possibly be reworked completely to be more consistent with the rest of the design. 
 =||= > I found only one more entry in package `org.jabref.gui.mergeentries`.
> Class `DiffHighlighting`.
> Method `public static Text forUnchanged(String text)`

Thank you all for your proposals, but I don't think that either one is a real solution for this issue.

As the css-class text-unchanged for the header is used for something completly unrelated to the header text color, following this proposal would result in strange behaviour, if someone later decides to change the color of text-unchanged to something else, if he want's to change the color of unchanged texts in the diff/merge dialog. I think a better solution would then either be to introduce another css-class for main table headings or to debug, why the standard color is not applied in the main table headers.

The other solution to use an icon would work in this case, but I think it's more a workaround but a solution. We would end up again in this issue as soon as someone tries to add another column with a text header.

> The methods createIndexColumn and createGroupColumn work very differently from the other column creation methods (for example createFilesColumn). They should possibly be reworked completely to be more consistent with the rest of the design.

In fact they work pretty much the same, but a few columns were outsourced (in the literal meaning) to new packages, to make the factory class a bit more easy to read. But you can move the the logic of createIndexColumn and the createGroupColumn to their own packages / classes, if you think it's worth it. Should be a nice little programming exercise. =||= I agree completely with @calixtus. I think, a new css class for the header would be the best solution. =||= Good day everyone.
If possible, I would like to get your advice, before creating a pull request.
I've added CSS class to `Dark.css` & `Base.css`:
```
.mainTable-header{
    -fx-fill: -fx-mid-text-color;
}
```
Then I added this css class to [MainTableColumnFactory.java After line 132](https://github.com/JabRef/jabref/blob/1caaadd2f576d2f4843e398c7cf5d8d4ffcc1886/src/main/java/org/jabref/gui/maintable/MainTableColumnFactory.java#L132)

`header.getStyleClass().add(""mainTable-header"");`

So does it looks like correct solution?


 =||= Sounds reasonable. Does it work?
If it's the same for dark.css and for base.css it should be sufficient to add it to base.css, as dark.css only makes some modification to the base.css, which is always loaded. =||= @calixtus 
thanks for comment. I removed CSS class from `Dark.css` and the picture is still OK.
<img width=""561"" alt=""Screenshot 2020-10-05 at 09 21 34"" src=""https://user-images.githubusercontent.com/20572030/95046183-51d69d00-06ec-11eb-8349-77f4eef39335.png"">

<img width=""561"" alt=""Screenshot 2020-10-05 at 09 16 04"" src=""https://user-images.githubusercontent.com/20572030/95046190-59964180-06ec-11eb-8607-22daf9c3bbe2.png"">

So now I have only this in `Base.css`
```
.mainTable-header{
    -fx-fill: -fx-mid-text-color;
}
```
and this in `MainTableColumnFactory.java`
`header.getStyleClass().add(""mainTable-header"");`


 =||= @Gena928  Yes, that's good, so go ahead and crate your PR! =||= Looks good. Can you please also check some of the dialogs that use a table that they are fine too? =||= Sorry, can't find them. )) I see that `MainTable` can be created only via `BasePanel.getMainTable`. 
When I trace usage of `BasePanel.getMainTable` I see that only 2 methods are using it: 
- PreferencesDialogViewModel (refresh method of `MainTable`)
- GlobalSearchBar (selectFirst method of `MainTable`);

Sorry, are there any dialogs, that use `MainTable`?
 =||= > Sorry, can't find them. )) I see that `MainTable` can be created only via `BasePanel.getMainTable`.
> When I trace usage of `BasePanel.getMainTable` I see that only 2 methods are using it:
> 
>     * PreferencesDialogViewModel (refresh method of `MainTable`)
> 
>     * GlobalSearchBar (selectFirst method of `MainTable`);
> 
> 
> Sorry, are there any dialogs, that use `MainTable`?

Ooops, did not think before writing. Sorry. :-D =||= @Gena928 Thank you for fixing this! =||= "Fixed incorrect color of identity column header"Fixes #6796 

Added style for identity column header. 
See column with ""#"". Previously it had different colour. 

<img width=""561"" alt=""Screenshot 2020-10-05 at 09 16 04"" src=""https://user-images.githubusercontent.com/20572030/95049286-1b038580-06f2-11eb-88a2-3f453d475d37.png"">

<img width=""561"" alt=""Screenshot 2020-10-05 at 09 21 34"" src=""https://user-images.githubusercontent.com/20572030/95049299-1fc83980-06f2-11eb-90dd-a4e81ad412af.png"">

- [X] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [X] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."GennadiyGena92810/05/20, 12:35:56 PM
6957.06985Enable Auto Sync per default for Open/LibeOffice "<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.1--2020-08-30--e023aa0
Ubuntu 18.04.3 LTS 
Java 14.0.2
Libreoffice 6.0.7.3

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Instead of showing a Number in brackets as citation when using the ""default [Number] style file"" a minus sign with space ""- "" is printed when citing in LibreOffice. The ""default [Author] style file"" works as expected though.

Steps to reproduce the behavior:
1. Connect to LibreOffice Document
2. Select citation style ""Default [Number] style file""
3. Cite a reference by clicking on ""cite"" or ""cite in text""
4. The citation in Libreoffice will only contain a ""- "" and no Number or brackets

The bug can be reproduced with any reference I choose. I also tried to define my own copy of the default number style file from this file src/main/resources/resource/openoffice/default_numerical.jstyle but I get the same output (minus sign with space instead of Number in brackets).

""Thanks for the report. Indeed, I could reproduce this with the latest dev version and LO 6.4.x =||= I digged into it and it's correct. The ""magic"" happens when you press the sync button manually or enable Auto Sync.
Then the ""-"" will be replaced by numbers

Maybe one could add a section to the help here:
https://docs.jabref.org/cite/openofficeintegration#using-the-openoffice-libreoffice-interface
![grafik](https://user-images.githubusercontent.com/320228/94459066-21a47100-01b7-11eb-813d-de7b9b7e9d4a.png)
 =||= > I digged into it and it's correct. The ""magic"" happens when you press the sync button manually or enable Auto Sync.
> Then the ""-"" will be replaced by numbers
> 
> Maybe one could add a section to the help here:
> https://docs.jabref.org/cite/openofficeintegration#using-the-openoffice-libreoffice-interface
> ![grafik](https://user-images.githubusercontent.com/320228/94459066-21a47100-01b7-11eb-813d-de7b9b7e9d4a.png)

Thank you for diving into the details and finding a solution for the problem! This also works when ""- "" citations are already inserted into the document, which get exchanged for the correct citations when enabling ""automatically sync"". I think updating the help/documentation is not enough, as the ""author/year"" citation styles are correctly inserted into the document without enabling ""auto sync"" or performing a manual sync. As this is intransparent behavior for the user I recommend both citation styles should function identically: either one has to perform a auto/manual sync or the correct citation gets inserted directly without further user interaction. =||= @mwittchen I think the difference is that JabRef recalculates the numbers, let's say you have citation A [1] and citation B [2] and you now insert citation C after citation A,  JabRef needs to recalculate the numbers. So that citation B now becomes [3].
If you don't have sync enabled it would become confusing if you have [3] before [2] =||= @Siedlerchr I understand the underlying technical problem when using the number citation style. Nevertheless I guess that the average JabRef user is not aware of this and might come to the conclusion that JabRef is not working properly. Maybe the best ""bug fix"" is to activate auto sync as a default regardless of the chosen citation style and the user has to turn auto sync off manually if he does not want to use it. =||= I've edited the title and added it as feature request =||= Thanks! =||= I am interested in solving this issue if you want to assign it to me. I am looking for a good first issue to solve. =||= Thanks for your interest. This issue is a good opportunity to understand the project. To get started follow our contribution guide  https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md
And just create a PR 
 =||= "Enable auto sync per default for Open/Libre Office"Enabling Automatically sync bibliography when inserting citations as the default for Open/Libre Office integrations
Fixes #6957 

![Pic 1](https://user-images.githubusercontent.com/71780917/95115048-dcca8e00-0712-11eb-9af1-eb83fb9b0cf7.png)

I have also made changes to the OpenOffice/LibreOffice integration documentation and will submit a pull request for those changes.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

"Isaac RolesIsaacRoles10/12/20, 09:26:47 PM
6892.06989Key generator regex() function not handling character classes"## Summary

the `regex()` operator in the citation key generator is not handling character classes (`[<characters>]`) correctly.

## JabRef Version

JabRef version 5.1--2020-08-30--e023aa0 on Windows 10 10.0 amd64 with Java 14.0.2

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

## Description

<!-- Add a clear and concise description of what the bug is. -->

When the regular expression in the `regex()` operator includes a character class (`[<characters>]`), the operator returns an empty string instead of replacing matched expressions with the replacement string.

Steps to reproduce the behavior:

Consider this entry:
```
@Article{gilligan:2020:Wickedness.ManagingComplex,
  author       = {Gilligan, Jonathan M. and Vandenbergh, M. P.},
  date         = {2020},
  journaltitle = {Vanderbilt Law Review},
  title        = {Beyond Wickedness: Managing Complex Systems and Climate Change},
}
```

1. Set the default citation key generator expression in Options/Preferences to 
    ```
    [auth:(anon):lower]:[year:lower]:[shorttitle:regex("":+"",""."")]
    ```
    and leave the generators for specific types blank.
2. Regenerate the key. It gives the key as above: `gilligan:2020:Wickedness.ManagingComplex`, 
3. Now change set the default key generator expression in Options/Preferences to
    ```
    [auth:(anon):lower]:[year:lower]:[shorttitle:regex(""[:]+"",""."")]
    ```
    or 
    ```
    [auth:(anon):lower]:[year:lower]:[shorttitle:regex(""[^A-Za-z0-9]+"",""."")]
    ```
4. Regenerate the key again. It gives `gilligan:2020:` (the `title` portion is empty).



<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

When I look at the JabRef event log, it's empty.""Thank you for the very detailed description @jonathan-g !
I'll look into this but I don't think the main issue is with the regex modifier.

@Siedlerchr , I believe this will be fixed in #6706 (because `CitationKeyGenerator` doesn't parse brackets correctly). [This is the relevant test case in the PR that fails](https://github.com/JabRef/jabref/pull/6706/commits/bde630394b942fe896c2e7eb8ba7e64d3fd449dc#)

I can add a PR for this particular issue anyway, since there should have been an error message in the log and without looking at it in more detail I don't know why there isn't. =||= @k3KAW8Pnf7mkmdSMPHz27  Is this issue now fixed? =||= @Siedlerchr no, not yet. I have not published a branch for this issue yet =||= "Merge parsing of bracketed patterns"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6892.
Character classes (regex expressions in brackets, e.g., `[a-zA-Z]`) should be usable with the regex modifier, but it currently isn't for citation keys.

Bracketed patterns are parsed using several different methods in `CitationKeyGenerator.java`, `BracketedPattern.java` and `AbstractCitationKeyPattern`. This PR aims to merge all parsing code into `BracketedPattern.java` to make it easier to modify bracketed patterns without breaking the citation key generator.

Currently BracketedPattern's parser can parse expressions containing the regex modifier using character classes.

**Todo**
- [x] ~What are `AbstractCitationKeyPattern` and `GlobalCitationKeyPattern` used for, and should they be removed?~
- [x] ~Why are both `GlobalCitationKeyPattern` and `CitationKeyPatternPreferences`  needed to create a `CitationKeyGenerator`?~

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->
**Checklist**
- [x] ~Change in CHANGELOG.md described (if applicable)~
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] ~[Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.~"Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2710/13/20, 01:01:42 PM
6848.06993"Search for unlinked local files: ""collapse all"" button expands tree""JabRef 5.2--2020-09-02--5c9edc9
Linux 4.9.0-13-amd64 amd64 
Java 14.0.2

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

In the window ""Search for unlinked local files"", after scanning the directory, a click on ""Collapse all"" does not collapse the tree. But this button can be used to expand the tree.

Steps to reproduce the behavior:
1. Lookup -> Search for unlinked local files
2. scan directory
3. click on ""Collapse all"". Nothing happens.
4. collapse the tree manually by clicking on the triangle at the root.
5. click on ""Collapse all"". The tree is expanded.

The ""Collapse all"" button works the same way as the ""Expand all"" button.""Hi, I would like to try to fix this as my first issue :) =||= I think there is no bug actually..
When you hit Collapse all, every directory **except** the root one gets collapsed. Expand all, _expands all_...
I think it makes sense and works well.. There is no use of collapsing the root level.
 =||= @PremKolar Well, maybe the issue is limited to:
When everything is collapsed (only the root directory is shown), ""Collapse all"" should not expand the tree. =||= Hi, I would like to work on that issue. =||= Thanks to @skeric  this issue should now be fixed =||= It works now! Thank you @skeric! =||= @Siedlerchr and @mlep, you're welcome =||= "6848 fixed the issue of clicking collapse all expanding tree"Fixes #6848 
When clicking Collapse All button in the Search for Unlinked Local Files, it expands the directory structure erroneously.

- Please don't remove any items, just leave them unchecked if they are not applicable.

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."skeric10/13/20, 06:15:36 AM
6974.07007Alternative serialization format as core data file (e.g. YAML in addition to BibTeX)"Alternative serialization format support (e.g. YAML in addition to BibTeX)

Probably many use cases where `JabRef`'s data file is used include `Pandoc`. Although it is common to use `BibTeX` as input into `pandoc-citeproc`, `YAML` serialized `BibTeX` (citeproc YAML) is also an option. When using `Pandoc`'s flavour of `markdown`, `YAML` is also the format of the metadata block.

It would be fantastic if `JabRef` could read and write `YAML` serialized `BibTeX`. In addition YAML is also less cumbersome to deal with when one needs to do some manual editing of the data file.

Furthermore by supporting `YAML` there is also a possibility of directly copy pasting selected references from `JabRef` data file into the `markdown`'s metadata segment (in addition to the possibility of using external references file exclusively).

Bellow is an example of currently the only `JabRef`'s option and under it what would be great to see `JabRef` also supporting.

Original in `BibTeX`:

```bib
% Encoding: UTF-8
@Misc{id_doc,
    author = {{John Doe}},
    title  = {{Doc Title}},
    date   = {2020-10-03},
    url    = {http://www.example.com}
}
```

Converted to YAML that is recognized by `Pandoc` / `pandoc-citeproc`:

```yaml
---
references:
- id: id_doc
  type: no-type
  author:
  - literal: John Doe
  title: Doc Title
  issued: [[2020,10,3]]
  URL: http://www.example.com
...
```""Thanks for your suggestion. JabRef is based on bibtex and therefore bibtex/biblatex will always be the main format. However, those functionality could be made avaiable as importer/exporter. JabRef support already several export and import formats.

With JabRef's custom exporter capabilitles it should also be possible to manually build the format for the yaml exporter.
https://github.com/JabRef/jabref/tree/master/src/main/resources/resource/layout =||= @mjfs with the pullrequest #7007 by @joethei YAML export will be possible in the next version. It would be nice if you could assist @joethei and other users by adding a documentation for working with markdown and bibtex at docs.jabref.org. For example, describe how it works with `pandoc-citeproc` and also with the new YAML export.

By the way, I can strongly recommend Zettlr for scientific markdown documents. It has built-in support for bibtex citations! =||= "Support for exporting to YAML format"- Support for exporting to YAML , fixes #6974 
- Fixed deleteBlankLines parameter in TemplateExporter not working.
- Enabled deleteBlankLines for the RIS Exporter, which used to have that enabled.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Johannes Theinerjoethei10/22/20, 01:13:12 AM
6890.07008Icon doesn't show in Start menu | JabRef.exe does not start (JRE15 issue)"JabRef 5.2--2020-09-07--aa14db9
Windows 10 10.0 amd64 
Java 14.0.2

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
On the Start menu the JabRef icon is substituted with the icon of a generic file.

Steps to reproduce the behavior:
1. Disinstall JabRef
2. Install official version (5.1) or the one from master
3. Look at the Start menu. The icon is not the one from JabRef

![image](https://user-images.githubusercontent.com/865866/92445554-cdf4c800-f1b4-11ea-9c7b-390a373f8852.png)""If I open the shortcut I see the cause of the problem:

![image](https://user-images.githubusercontent.com/865866/92449872-f5e72a00-f1ba-11ea-935a-a1a8eb080ed6.png)

Manually changing the icon to `JabRef.ico` solved the problem.
 =||= DId you encounter this problem again? =||= Deinstalled an installed from http://builds.jabref.org/master/
Now JabRef does not start anymore, but the icon is present.
What I don't know is if the icon has been installed by the installer or is a relic of my previous setting it manually.
Now trying to make JabRef working again...
Thanks!
mario =||= Well, removing the shortcut from the Start menu, after reinstallation nothing appears in the start menu. No JabRef folder containing JabRef link to the program, nothing in the ""Recently added"" section of the start menu.
I cannot get the program version because it does not start. But it is the version downloaded today at 4.42 CET
 =||= Temporary made JabRef start by running runtime/bin/JabRef.bat

JabRef 5.2--2020-10-04--31f894c
Windows 10 10.0 amd64 
Java 15
 =||= Thanks for the feedback. That's odd. We will investigate that =||= @crystalfp  Can you please test to start the Jabref.exe from the cmd? Do you get any errors? =||= I have to run JabRef.bat from runtime\bin, the JabRef.exe in the installation directory does nothing.
```
PS C:\Program Files\JabRef> .\JabRef.exe
PS C:\Program Files\JabRef> .\JabRef.exe --debug
PS C:\Program Files\JabRef> cd .\runtime\bin\
PS C:\Program Files\JabRef\runtime\bin> .\JabRef.bat --debug
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [d]
ERROR StatusLogger Unrecognized conversion specifier [d] starting at position 16 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [thread]
ERROR StatusLogger Unrecognized conversion specifier [thread] starting at position 25 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [level]
ERROR StatusLogger Unrecognized conversion specifier [level] starting at position 35 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [logger]
ERROR StatusLogger Unrecognized conversion specifier [logger] starting at position 47 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [msg]
ERROR StatusLogger Unrecognized conversion specifier [msg] starting at position 54 in conversion pattern.
ERROR StatusLogger Unrecognized format specifier [n]
ERROR StatusLogger Unrecognized conversion specifier [n] starting at position 56 in conversion pattern.
%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n java.net.SocketTimeoutException: Connect timed out
        at sun.nio.ch.NioSocketImpl.timedFinishConnect(Unknown Source) ~[?:?]
        at sun.nio.ch.NioSocketImpl.connect(Unknown Source) ~[?:?]
        at java.net.SocksSocketImpl.connect(Unknown Source) ~[?:?]
        at java.net.Socket.connect(Unknown Source) ~[?:?]
        at org.jabref.logic.remote.client.RemoteClient.openNewConnection(Unknown Source) ~[org.jabref:?]
        at org.jabref.logic.remote.client.RemoteClient.ping(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.JabRefMain.handleMultipleAppInstances(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.JabRefMain.start(Unknown Source) ~[org.jabref:?]
        at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$10(Unknown Source) ~[org.jabref.merged.module:?]
        at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
        at com.sun.javafx.application.PlatformImpl.lambda$runLater$11(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source) ~[org.jabref.merged.module:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n%d [%thread] %-5level %logger - %msg%n
```
The same problem happened before, unfortunately I don't remember how I had solved it.
Thanks!
mario  =||= Forgot to add the Java Error log:
[hs_err_pid5340.log](https://github.com/JabRef/jabref/files/5331222/hs_err_pid5340.log)
 =||= @crystalfp  Thanks. Could you please try this version? if the exe starts?
https://builds.jabref.org/pull/6988/
I changed the jdk =||= No, it does not start. But creates the following error log:
[hs_err_pid11668.log](https://github.com/JabRef/jabref/files/5338099/hs_err_pid11668.log)
And the installation does not put the JabRef icon in the start menu. =||= Is it true that latest build (JabRef 5.2--2020-10-12--46cc82c, Windows 10 10.0 amd64, Java 15) does not put an entry in Start menu and does not associate .bib to JabRef? Before downgrading to the latest official version, I want to be sure it is not a problem from my side.
Thanks! =||= Normally it should work. I will check that. 
@crystalfp  Can you please test if this version starts with the exe?  https://builds.jabref.org/pull/7008/merge/
If not, please post the log here =||= Deinstalled and rebooted before installing 7008/merge.
It does not start, nor it adds icons in Start Menu.
Here is the error log file: [hs_err_pid3296.log](https://github.com/JabRef/jabref/files/5369737/hs_err_pid3296.log)
I don't know if it is relevant, but the Java I have installed is 32bits: ""C:\Program Files (x86)\Java\jre1.8.0_261\bin\java.exe"" and the JabRef one (from the log file) seems 64bits: Java VM: OpenJDK 64-Bit Server VM 
Next, maybe not relevant info: During tests, before rebooting, the windows protection dialog appears asking if I want to run this unknown executable. Deinstalling and reinstalling it does not appear again.
Confused
Thanks for your investigative job!
mario =||= In reference to https://discourse.jabref.org/t/5-2-dev-do-not-start/2344/6?u=buhtz
pull 7008 from 13.10.2020 08:19

The msi-version still do not start, no error output or any log.

The portable-version do not start but create a log. See attachment.
[hs_err_pid13436.log](https://github.com/JabRef/jabref/files/5369807/hs_err_pid13436.log)
 =||= The Java 32bits was a red herring. Installed JRE 64bits and nothing changed.
@Codeberg-AsGithubAlternative-buhtz if you run from a writable directory the error log will be created. If you simply double click on the exe file, nothing appears because the directory under C:/Program Files/ is protected  =||= > @Codeberg-AsGithubAlternative-buhtz if you run from a writable directory the error log will be created. If you simply double click on the exe file, nothing appears because the directory under C:/Program Files/ is protected

Than you should fix JabRef to write its log in the appropriated directory and also create a usefull output on stderr. I did not double click. I started via command line.

https://stackoverflow.com/q/1572934/4865723 =||= Thanks all for the testing, I am in contact with the official Java Development Team regarding the error, because it's an error coming from the JDK itself. I will keep you updated.
@crystalfp  JabRef ships with it's own version of the jdk.
@Codeberg-AsGithubAlternative-buhtz  The crash happened in the JAVA VM  out of scope for any logging from our side.
 =||= A member of the Java development Team could reproduce the issue. In the meantime you can use the bat to start JabRef or we need to downgrade on Windows back to jdk14
FYI the bug is reported here: https://bugs.openjdk.java.net/browse/JDK-8254697 =||= > FYI the bug is reported here: https://bugs.openjdk.java.net/browse/JDK-8254697

Useless because the bug ticket can not be monitored because the system is restricted to high level users. No way to create an account for normal persons like me. Thanks Oracle. ;)

 =||= We downgraded the windows version back to java 14, so the exe issue should not be longer a problem.
 =||= Can confirm that this version is running with Windows 10

JabRef 5.2--2020-10-14--a768f6e
Windows 10 10.0 amd64 
Java 14.0.2

Thanks a lot. =||= This development build is running under Windows. However, the ""Check Integrity"" option does not work anymore under the development build for the last few days =||= @AlexPars  Works fine for me. Can you please open a new issue with some details e.g. what exactly is not working. =||= Sure, will open a new issue. The problem is the following: I can run ""Check integrity"" (Quality -> Check Integrity) , and at the end of run I am getting a pop-up message ""Error occurred: Integrity check failed"" , with no other details =||= Yea! This version JabRef 5.2--2020-10-14--a768f6e starts from the exe! Thanks!
Unfortunately installation elicit the classical Windows protection dialog:

![image](https://user-images.githubusercontent.com/865866/96144942-00f15080-0f05-11eb-8607-c23c645dea87.png)

and does not put an entry in the Start menu, but correctly associates JabRef to .bib files.

We are almost there!
Thanks for your efforts
mario =||= @crystalfp The Windows protection dialog will always come because we don't have a code signing certificate yet (that costs money). We tried to buy one but it was not successful. We will probably try this again once our non profit org is officially registered.

I just merged a change which should now create a start menu folder as well. Should be ready in half an our so. =||= I confirm that JabRef 5.2--2020-10-15--13a80ba solved all problems.
If you don't mind, I close this issue.
Thanks again for your work!
mario =||= "try to fix DEP issue with official jdk"fixes #6890 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr10/14/20, 08:06:39 PM
6991.07009"UI: two menus for ""Manage external file types"" ""There is two ways to access the window ""Manage external file types"":
1. Options -> Manage external file types
2. Options -> Preferences, tab External programs, button ""Manage external file types""

Considering the management of external file types is seldom, I suggest to keep only the second way. Moreover, it helps in having  all the preferences in the Preferences window.

JabRef 5.2--2020-10-07--4b1b7b4
Linux 4.9.0-13-amd64 amd64 
Java 15""is this problem still relevant? would like to work on it if so.
 =||= The menu is not here anymore, making the UI more consistent. Thank you @schrothbn! =||= "Removed menu entry for 'Manage external file types'"Fixes #6991 
Removed the menu entry to only have one way to access 'Manage external file types' in the Preferences Dialog

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

![screenshot-6991](https://user-images.githubusercontent.com/68321970/95766022-f8094080-0cb2-11eb-9ddc-3b51295cb79f.png)"Benjamin Schrothschrothbn10/18/20, 06:20:54 PM
6691.07014"Groups: ""All entries"" not highlighted on start-up""JabRef 5.1--2020-07-13--6344401
Linux 4.9.0-12-amd64 amd64
Java 14.0.1

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

A minor UI inconsistency:
On start-up, JabRef displays all entries, but the group ""All entries"" is not highlighted.

""@sumitsantape30  Hi welcome to JabRef!
For getting started please read through our [Contribution](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) Guide It explains also how to setup your workspace
Codewise the solution would be to add a call to select first here:
https://github.com/JabRef/jabref/blob/5540b93caf05b165ab12dee5ad8991e4065285b6/src/main/java/org/jabref/gui/groups/GroupTreeView.java#L83

https://openjfx.io/javadoc/12/javafx.controls/javafx/scene/control/SelectionModel.html#selectFirst()

 =||= Trying the development version, I confirm that this issue is solved. Congratulation @Niffler, and many thanks! =||= "Add selection of 'All Entries' group on start-up"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6691

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Niffler10/18/20, 06:27:39 PM
7017.07018Update to JavaFX 15Update to javafx15"I did not test all dialogs but most of the thing seeemed to work.
Changelog: https://github.com/openjdk/jfx/blob/jfx15/doc-files/release-notes-15.md
Fixes #7017 

Fixes #4947 

Probably also fixes #6086 
Probably also fixes #5866
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr10/15/20, 04:09:57 PM
4947.07018Drag and drop PDF import not working"From MacOS, it does not seem possible to drag-and-drop a PDF to link the file to an entry.

JabRef 5.0-dev--snapshot--2019-05-01--master--f1b4b5be3
Mac OS X 10.14.4 x86_64 
Java 1.8.0_212
""Is working fine on Win10. 

@LinusDietz Can you check it with MacOS? =||= I can now confirm that _sometimes_ it works. When JabRef is first launched, it works. Then, after multiple drag-and-drops, it stops working. Eventually I get this exception:

<img width=""859"" alt=""image"" src=""https://user-images.githubusercontent.com/290205/57202343-50d29680-6f61-11e9-8c1b-29dcf525a19f.png"">

There is another, fully reproducible UI bug. When the PDF is first dragged on the main panel, one of the entries is highlighted. Then as the PDF is moved up or down, the highlighted entry will not change.

Thank you.

 JabRef 5.0-dev--snapshot--2019-05-03--master--99d99cf02
Mac OS X 10.14.4 x86_64 
Java 1.8.0_212 =||= Thanks for the follow-up information. 
By just looking on the stacktrace I fear that this is another bug in Java on MacOS X as there is nothing JabRef specific showing up... 😥 =||= I didn't realize these were Java bugs, that's a pity.

I would like to test JabRef with the latest version of Java

I downloaded JRE 12 from Oracle. When I type `java -version` I correctly see `java version ""12.0.1"" 2019-04-16` as expected. However, JabRef still wants to use the old (system installed, 1.8) version of Java, and I can't figure out how to get JabRef to use the newly installed version.

I was hoping to be able to do something like `java -jar JabRef.jar` but that won't work directly.

Is there a way I can test JabRef with a newer JRE on Mac? =||= JabRef currently only runs with Java 8, we are however trying to get it working with Java 11. But this might take some time  =||= The latest development version works with java 11. Could you please check if this issue is fixed now. Thanks! =||= Hello. I'm reporting here, as the issue is still open, and it's somewhat related to the bug, but it might be Linux-version specific or it might belong to a different component.

For context, my configuration is as follows: I've set up the `Copy, rename and link file` option for `Default drag & drop action` and the `External file links`'s `Main file directory` set.

Basically, I drag & drop, but the copied file is the original file, and the renamed copy is left in the original folder.

Here's an example of the behaviour (as I understand it should behave), for clarity, after Drag & Dropping.

**Expected:**

```
+-- $HOME
|   +-- Downloads
|   |   +-- articles 
|   |   |   +-- article.pdf
|   +-- References
|   |   +-- AuthorYear - Title.pdf
```

**Actually occurring:**

```
+-- $HOME
|   +-- Downloads
|   |   +-- articles 
|   |   |   +-- AuthorYear - Title.pdf
|   +-- References
|   |   +-- article.pdf
```

Here's my current version info (running on Ubuntu 19.04 at the moment):

```
JabRef 5.0.0-dev--2019-11-10----de4a1ae88
Linux 5.0.0-32-generic amd64 
Java 12.0.2
```

Should I report this as a new bug? =||= On MacOS Catalina running Java 13.0.1 I was able to replicate the issue with the same stacktrace. It's intermittent, and from googling the stacktrace it looks like an issue that happens across javaFX programs on Mac =||= This issue should now finally be solved! (A new build is currently on the way)

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Update to javafx15"I did not test all dialogs but most of the thing seeemed to work.
Changelog: https://github.com/openjdk/jfx/blob/jfx15/doc-files/release-notes-15.md
Fixes #7017 

Fixes #4947 

Probably also fixes #6086 
Probably also fixes #5866
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr10/15/20, 04:09:57 PM
6086.07018Adjust scaling of JabRef for high-resolution displays"I am facing a problem with the display resolution of Jabref I could not resolve yet. I am working on a high resolution monitor (2560x1440), but JabRef scales everything too big for me (see image). Ex-/ and Re-importing the settings while changing the ""mainWindowSizeX/Y"" fields have no effect at all. Is there a way to force Jabref to a smaller rendering?

This might be related to #5498, although changing the settings of resolution and scaling of my window manager have no effect, either. 

I am using LinuxMint 19.3 with the cinnamon desktop.

![Bildschirmfoto vom 2020-03-09 14-08-37](https://user-images.githubusercontent.com/12495347/76215858-e25d0580-620f-11ea-925e-1f197c0c8123.png)""You could try to apply these scale tips here in the sh startup file of JabRef:
https://wiki.archlinux.org/index.php/HiDPI#JavaFX =||= Thank you @Siedlerchr . I could resolve the issue by adding
-Dglass.gtk.uiScale=1.4
in the file JabRef.cfg (for me located at /opt/JabRef/lib/app/JabRef.cfg) in the section [JavaOptions]
The file looks now like this. 

> [Application]
> app.name=JabRef
> app.version=5.0.30001
> app.runtime=$ROOTDIR/lib/runtime
> app.identifier=org.jabref
> app.classpath=
> app.mainmodule=org.jabref/org.jabref.JabRefLauncher
> 
> [JavaOptions]
> --module-path
> $ROOTDIR/lib/app/mods
> -Dglass.gtk.uiScale=1.4
> [ArgOptions]
> 
>  =||= @xolotl90  Glad that it works! It would be nice if you could add a section to the FAQ with your configuration tips, so others with a similar problem can look there
https://docs.jabref.org/faq/faqs-on-operating-systems/faqlinux (Click on Edit on Gitbub) =||= I added a small paragraph about this and made a pull request. [260](https://github.com/JabRef/user-documentation/pull/260)  =||= "Update to javafx15"I did not test all dialogs but most of the thing seeemed to work.
Changelog: https://github.com/openjdk/jfx/blob/jfx15/doc-files/release-notes-15.md
Fixes #7017 

Fixes #4947 

Probably also fixes #6086 
Probably also fixes #5866
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr10/15/20, 04:09:57 PM
5866.07018Crash pango with italic characters"JabRef 5.0-beta.360--2020-01-21--7ddfd9f
Java(TM) SE Runtime Environment (build 13.0.2+8)
pango-1.44.7 
Fedora Linux 31

When I open jabref with the attached bib file, it opens ok but when I try to use the scroll bar to scroll down about half way through jabref crashes with the message:

Pango:ERROR:../pango/pango-context.c:1434:itemize_state_process_run: assertion failed: (state->run_end != state->run_start)
Bail out! Pango:ERROR:../pango/pango-context.c:1434:itemize_state_process_run: assertion failed: (state->run_end != state->run_start)
Aborted (core dumped)

[JacekD.bib.gz](https://github.com/JabRef/jabref/files/4112115/JacekD.bib.gz)""I am not a LInux expert and on Windows I cannot encounter a problem, but it might be related to Font stuff. E.g. Maybe there is a problem with the font or the Unicode-italic rendering in the form here.
Maybe one of the other fedora users can reproduce this problem. 
But I would close this issue as it seems to be some javafx/linux problems which we can't do anything about here =||= It is related to unicode characters. I am not sure why you closed it since it core dumps jabref on a stable Linux distribution and core dump is always a bug! =||= Well, the problem is not in JabRef itself I think, but either in JavaFX or the pango library.
You better should report this bug to the pango team as this error dump is clearly related to pango.
https://gitlab.gnome.org/GNOME/pango/issues

You could try to change the Font in settings and see if that helps.



 =||= Hi, I narrowed it down to a single reference. The attached bib file crashes jabref every time. It seems like the latex sequence in Garc\'{\i}a-Recio crashes jabref.

[crash.bib.gz](https://github.com/JabRef/jabref/files/4125547/crash.bib.gz)
 =||= NOTE: Look at the actual bib file since the pasting into message missed a \ =||= It is \'{\i} that is making jabref coredump. Removing the slash works ok \'{i} =||= @sambo57u  Yes, that's what I suspected as well. It's the latex command for displaying text in italics.
Could you try to convert it using the latex2unicode formatter and test if that works? =||= Yes, using http://latex2unicode.herokuapp.com/ for interactive testing produces the correct dotless i
with French accent. =||= I guess this is passed to Pango after conversion that somehow leads to jabref coredump. Pango I have is the latest one. And as jabref I am using today's rpm build. =||= I think this issue is not in JabRef's , it's beyond our realm and we cannot do anything about this. Therefore I'm closing this issue. =||= Has anyone reported this issue to Pango? If so, can you please provide a link to it? =||= It might be fixed in javafx 15 (we plan to use that soon), at least there was something I read about pango  =||= I just merged in the new javafx version. According to the changelog https://github.com/openjdk/jfx/blob/jfx15/doc-files/release-notes-15.md
this issue might be finally fixed =||= I can confirm that it is fixed! Thanks. =||= "Update to javafx15"I did not test all dialogs but most of the thing seeemed to work.
Changelog: https://github.com/openjdk/jfx/blob/jfx15/doc-files/release-notes-15.md
Fixes #7017 

Fixes #4947 

Probably also fixes #6086 
Probably also fixes #5866
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr10/15/20, 04:09:57 PM
6456.07023fetcher isbn exception when including linebreak"JabRef 5.1-PullRequest6455.368--2020-05-09--fff4926
Linux 5.6.8-200.fc31.x86_64 amd64 
Java 14.0.1



When I add a linebreak (enter) to an ISBN field and then click onto retrieve metadata, i get the exception

Steps to reproduce the behavior:
1. use isbn number with linebreak
2. retrieve metadata


Suggestion:
- before fetching isbn data, remove linebreaks
- isbn number followed by pressing enter should not generate linebreak but open the isbn (or alternatively ask whether to open or retrieve metadata).


<details>
  <summary>Log File</summary>
  
org.jabref.logic.importer.FetcherException: Could not 
	at org.jabref/org.jabref.logic.importer.fetcher.IsbnViaOttoBibFetcher.performSearchById(IsbnViaOttoBibFetcher.java:58)
	at org.jabref/org.jabref.logic.importer.fetcher.IsbnFetcher.performSearchById(IsbnFetcher.java:55)
	at org.jabref/org.jabref.gui.mergeentries.FetchAndMergeEntry.lambda$fetchAndMerge$0(FetchAndMergeEntry.java:65)
	at org.jabref/org.jabref.gui.util.BackgroundTask$1.call(BackgroundTask.java:47)
	at org.jabref/org.jabref.gui.util.DefaultTaskExecutor$1.call(DefaultTaskExecutor.java:142)
	at org.jabref.merged.module/javafx.concurrent.Task$TaskCallable.call(Task.java:1425)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)
	at java.base/java.lang.Thread.run(Thread.java:832)
Caused by: java.net.MalformedURLException: Illegal character in URL
	at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.checkURL(HttpsURLConnectionImpl.java:70)
	at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.<init>(HttpsURLConnectionImpl.java:81)
	at java.base/sun.net.www.protocol.https.Handler.openConnection(Handler.java:62)
	at java.base/sun.net.www.protocol.https.Handler.openConnection(Handler.java:57)
	at java.base/java.net.URL.openConnection(URL.java:1101)
	at org.jabref.merged.module/org.jsoup.helper.HttpConnection$Response.createConnection(HttpConnection.java:892)
	at org.jabref.merged.module/org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:729)
	at org.jabref.merged.module/org.jsoup.helper.HttpConnection$Response.execute(HttpConnection.java:707)
	at org.jabref.merged.module/org.jsoup.helper.HttpConnection.execute(HttpConnection.java:297)
	at org.jabref.merged.module/org.jsoup.helper.HttpConnection.get(HttpConnection.java:286)
	at org.jabref/org.jabref.logic.importer.fetcher.IsbnViaOttoBibFetcher.performSearchById(IsbnViaOttoBibFetcher.java:56)
	... 11 more
</details>"Thankst to @joethei this should now be fixed in the latest development version =||= remove any newlines and spaces in isbn when fetching"Remove any newlines and spaces in isbn when fetching.

Fixes #6456

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Johannes Theinerjoethei10/17/20, 03:41:15 PM
7019.07025Add Cleanup for copying over physcial review article id as the page number (revtex)"[Background, Request from the forum](https://discourse.jabref.org/t/page-number-in-physical-review-entries/2247/5):
> I import papers from the APS Physical Review journals using the “Library -> New Entry -> DOI” feature. It looks something like this:
```
    @Article{Stenzel2020,
    author = {L. Stenzel and A. L. C. Hayward and U. Schollwöck and F. Heidrich-Meisner},
    journal = {Physical Review A},
    title = {Topological phases in the Fermi-Hofstadter-Hubbard model on hybrid-space ladders},
    year = {2020},
    month = {aug},
    number = {2},
    volume = {102},
    doi = {10.1103/physreva.102.023315},
    publisher = {American Physical Society ({APS})},
    }

```
>Notice that there is no page number. But it is standard for APS journals to set the page number to the article ID, here “023315”. In fact, setting the page number to the article ID is necessary to get the right output from the APS Revtex document class in LaTeX.

>I was wondering if it would be possible or desirable to add back the page number in Physical Review imports. It would make life much easier for everyone who uses APS journals and Revtex.

> Thank you.
-------
Idea for solution: Implement a CleanUp, simliar to the DOI Cleanup: https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/cleanup/DoiCleanup.java

1. Access the BibEntry object
2. Check for existence of field DOI
3. extract the article id from it
4. set the value of the Field Page to the extracted article id

That should be sufficient and relatively easy to implement. Of corse otherwise the action/class has to be added to the list of possible cleanups.""We need this badly....I wish I could program in java but can't. I have been suffering from this for a long time and have to do it
by hand after every import. =||= Note that there is a subtlety here. The Physical Review journals changed their article numbering at the end of the 20th century. For instance:

https://journals.aps.org/pra/edannounce/PRAv60i4.html
https://journals.aps.org/prb/edannounce/PRBv62i17.html

Before, they had normal page numbers. They then moved to electronic article IDs.

So I think it's really necessary to check if a page number already exists before executing your suggestion. =||= Hello
I'd like to work on this if that's okay. =||= That would be great! (cok memnun olurum!) =||= @tmrd993 go ahead, just create a PR withyour changes =||= @Siedlerchr Okay, I'll probably have a PR ready by tomorrow at the earliest.

I looked around and I'm not 100% sure where the article id is found for every case. For example, in the case above, it's the last number and it's seperated from the preceding string with a dot. However in this case:
`10.1093/ajae/aaq063`
There is no dot to seperate the id. Is the id only composed of digits? Is it `aaq063` or `063`?

According to https://en.wikipedia.org/wiki/Digital_object_identifier, The DOI is composed of a prefix and a suffix like this `PREFIX/SUFFIX` and the suffix is called `item id` and identifies a single object.
So can I assume that the article id is contained in the suffix and is the last encountered digit sequence?

For example, here `10.1103/physreva.102.023315` it is `023315`
and here, `10.1371/journal.pgen.1001111` it's `1001111` =||= @tmrd993  No need to hurry. I asked the people in the forum if they can help you answering your question. 
Sponatenously, I would have guessed the last encountered digit sequence but no idea if it can be alphanumeric  as well. =||= Yes, for APS journals (Physical Review A,B,C, etc) the id is the numerical stuff after the last dot in doi. In citation this is cited
as the page number in the official citation. Only when pulled from doi.org it does not pull the page. 

The others may be working correctly when pulled. So far the only journals I had this happen are the APS journals. =||= I confirm, the article ID is the number after the last dot in the DOI. That's what should be put in the page number field.

The general format of APS doi is https://doi.org/10.1103/[journal].[volume].[articleID].

As I said before, the page number should not be changed if it already exists. There were proper page numbers in APS journals before around 1998-1999.

Best =||= Actually I just double checked and even old articles use the number of the first page as article ID in the DOI. So if you take the number after the last dot in the DOI, it's either the first page (for old articles) or the article ID (for new articles).

Nowadays, people usually only put the first page in the citation. So if you put the number after the last dot in the DOI as page number, that would be enough for most purposes.

Best =||= I also confirm that for all APS journals the page number is the last number after the last dot in the DOI. There is only one exception when the article is Rapid (e.g Physical Review B: Rapid Communications) then we need to add (R) after the page number which I think we will have to do it manually since it is not contained in the DOI. For example this article https://doi.org/10.1103/PhysRevB.102.081104
the page number is `081104`, but since it is Rapid we have to cite the page number as  `081104(R)`. =||= In addition to the great PR from @tmrd993 that implements this, could you (@alshehab211 @sambo57u @BenjaminDAnjou) please also contact APS and/or Crossref and notify them that the information that they provide is incorrect/incomplete. Thanks! =||= @tobiasdiez That is a great idea. I will contact them regarding the issue, Thanks a lot for the effort, @Siedlerchr ,  @tobiasdiez , and @tmrd993  =||= I would gladly contact them. But just to make sure I get this right, could you tell me exactly what I need to inform them about? What information do they not provide and more importantly where do they fail to provide it?

I am not sure I understand the issue completely on a technical level, so I'd appreciate some directions.

Best =||= They should simply provide the article ID in the field ""pages"" in the bibtex data that is returned when acessing the DOI with the ""application/x-bibtex""  HTTP Accept header.
Background: JabRef calls for example the url dx.doi.org/10.123456 with a specifid HTTP reader that indicates that we want to get bibtex data back. So it would be the easiest if the response from the server contains the ""pages"" field. =||= I have contacted the APS about this issue two years ago. I got a response saying they are working on it as a high priority issue, but nothing happened. It is best to fix it assuming that APS will not do anything. =||= I have contacted them Hopefully getting many messages will get them to think about it again. =||= Thanks to @tmrd993 this is now implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version.

Please let us know if you here something from APS or crossref.  =||= @Siedlerchr @tobiasdiez @tmrd993 Thanks a lot for your help!
I will check it and let you know =||= It is perfectly working now! Thanks again =||= "add Cleanup for copying over physcial review article id as the page n…"Fixes #7019 

Added a cleanup to copy over the article id as the page number for APS journals. This only happens if the page number doesn't exist already.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Timucin Merdintmrd99310/20/20, 10:55:03 AM
7000.07036Nothing happens creating entry from specific ISBN"JabRef 5.2--2020-10-07--4b1b7b4
Windows 10 10.0 amd64 
Java 15

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Creating entry from ISBN do nothing without any message stating the reason.

Steps to reproduce the behavior:
1. Open the new entry dialog
2. Select ID type: ISBN and enter the following ID: 88-17-21041-2
3. Push Generate, nothing happens and no error message appears
4. Same result from the newer ISBN: 9788817210416

The two ISBN are copied directly from the cover of the book. If for some reason they are invalid or not existent, I expect at least an error messages stating the reason. For other errors (I tried removing a digit and changing a digit) an error popup appears.

I search these ISBN on [bookfinder.com](https://www.bookfinder.com/) and the book indeed exists.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->
Here is the full entry:
```
@Book{Sagan1985,
	author    = {Carl Sagan},
	title     = {Contact},
	date      = {1997-09},
	origdate  = {1985},
	publisher = {Rizzoli},
        location  = {Milano},
	isbn      = {88-17-21041-2},
        langid    = {italian},
}
```""The same problem for ISBN: 9788845253119
 =||= As far as I know, JabRef has two sources for ISBN fetching. This behaviour happens if the ISBN is valid, but the actual book isn't available at any of the two sources. An invalid ISBN actually has an exception thrown, that's what you are seeing when you remove or add digits to the ISBN. =||= https://github.com/JabRef/jabref/blob/4cf2fb06d3d876d2043f65ca0e51c3c4185fd05c/src/main/java/org/jabref/logic/importer/fetcher/IsbnFetcher.java#L44-L60

I think we could throw a FetcherException here if the bibEntry is still empty after trying ottobib? That more or less fixes it in my code. =||= Any feedback to the user instead of nothing is a sorely needed thing =||= "Added error msg when isbn entry was not found"Fixes #7000 
Added an error message that gets shown when the entered ISBN leads to no results on ebook.de and ottobib.

Screenshot of change:
![errormessage](https://user-images.githubusercontent.com/47194464/96875310-5da9b980-1477-11eb-8aee-5af3cd7c5c95.png)


- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Timucin Merdintmrd99310/22/20, 11:05:43 PM
6579.07039Custom export format biblatex date field to bibtex year, month and day ones."Hello, I see date processing is still in the pipes ! (See issues #1249 and #6224)

Almost two years ago (see [here](https://discourse.jabref.org/t/custom-export-filter-month-field/1214)), I asked for a way to write a custom export with dates from the biblatex `date` field to bibtex `year`, `month` and `day` fields with an emphasis on the `month` field (I am not the first one, see [here](https://discourse.jabref.org/t/date-eventdate-dateformatter/330)).
I tried using the [DateFormatter](https://docs.jabref.org/collaborative-work/export/customexports#built-in-export-formatters) but an error is still raised when the `date` field doesn't resolve as a full ISO date (`YYYY-MM-DD`), and even if it worked, it would only output the month number, and not the bibtex equivalent.

Any clue on how to solve this ?""Well, in fact, it is very easy to solve now as all fields seem well treated as valid aliases now.

The custom export filter as
```
\begin{year}  year = \year\end{year}\begin{month},
  month = \month\end{month}\begin{day},
  day = \day\end{day}
```
will now output entries as
```
  year = 2018,
  month = May,
``` =||= Well, in fact, it only works for the month of May because it is already a 3 characters long string, but for January for instance, the full month name will be output, instead of `Jan`.
So my initial problem is still not solved :(
There is no formatter documented to output the month in the same format as the bibtex field !
Even the undocumented [RisMonth](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/layout/format/RisMonth.java) format makes the assumption of a short name for the month. =||= Have you seen the DateFormatter? https://docs.jabref.org/collaborative-work/export/customexports#built-in-export-formatters

edit// I saw that it requires valid iso date.
 =||= Yeah, I tried but it doesn't work, as you saw (I added an explicit mention about it in the first message of this issue). =||= I currently see no existing solution, so you would need to write your own Formatter which can format Months.
/Edit: That should not be that difficult as we already have a Month class which is able to do some month parsing and probably formatting as well.
 =||= Thanks to @joethei there's now a new Short Month Formatter 

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. 
.
 =||= "add short date formatter"Add formatter that can format the month field to use the shorthand abbreviation .
fixes #6579



- [X] Change in CHANGELOG.md described (if applicable)
- [X] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [X] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Johannes Theinerjoethei10/29/20, 08:32:00 PM
6862.07040Fix shared database tests"Currently, in the latest master version the SharedDatabaseTests are failing with the following error

```
org.jabref.logic.shared.SynchronizationTestSimulator

  Test simulateUpdateOnNoLongerExistingEntry() FAILED

  org.opentest4j.AssertionFailedError: expected: not <null>
      at org.jabref.logic.shared.SynchronizationTestSimulator.simulateUpdateOnNoLongerExistingEntry(SynchronizationTestSimulator.java:140)

  Test simulateEntryChangeConflicts() FAILED

  org.opentest4j.AssertionFailedError: expected: not <null>
      at org.jabref.logic.shared.SynchronizationTestSimulator.simulateEntryChangeConflicts(SynchronizationTestSimulator.java:165)

```

To execute the tests locally you need to setup a shared SQL Databse, PostgresSQL 
The postgresSQL must run on localhost with the following setup:
DBname: postgres
User: postgres
Pasword: postgres

Alternatively change the values in the class `TestConnector`, method  `DBMSConnectionProperties getTestConnectionProperties()`

""I digged a bit into this.
The problem occurs here. Somehow the SharedEntryNotPresent should have been filled.
It's only posted  in the `removeNotSharedEntries` from synchronizeLocalDatabase 
Maybe there is some timing/call order issue

```
 // client B tries to update the entry
        BibEntry bibEntryOfClientB = clientContextB.getDatabase().getEntries().get(0);
        bibEntryOfClientB.setField(StandardField.YEAR, ""2009"");

        // here a new SharedEntryNotPresentEvent has been thrown. In this case the user B would get an pop-up window.
        assertNotNull(eventListenerB.getSharedEntriesNotPresentEvent());
        assertEquals(List.of(bibEntryOfClientB), eventListenerB.getSharedEntriesNotPresentEvent().getBibEntries());
``` =||= Okay, I think I found the underlying issue: 
1. A FieldChangedEvent is triggered due to 
`bibEntryOfClientB.setField(StandardField.YEAR, ""2009""); `
2. The FieldChangeEvent calculates the delta
https://github.com/JabRef/jabref/blob/a0ca87530991900db5b34df3683aa010dffe97c8/src/main/java/org/jabref/model/entry/event/FieldChangedEvent.java#L61-L70

3. Delta is 0 because the length of the field is the same when it gets replaced.
4.  The property filteredOut is set to true 
https://github.com/JabRef/jabref/blob/a0ca87530991900db5b34df3683aa010dffe97c8/src/main/java/org/jabref/logic/util/CoarseChangeFilter.java#L43-L57
5.  No DB synchro is triggered 
https://github.com/JabRef/jabref/blob/a0ca87530991900db5b34df3683aa010dffe97c8/src/main/java/org/jabref/logic/shared/DBMSSynchronizer.java#L98-L100

**Solution**: The idea would be to check if when the lenghts is the same then check if the content differs.
@koppor  FYI
 =||= "Fix Shared Database Tests"Fix FieldChangeEvent Delta computation

The CoarseChangeFilter only reports delta >0 as Major change.
The problem is that when you codewise set new field content with the same exact length as before, but not the same content it still has a delta of 0 and therefore no DB sync is triggered. 
A more detailed explanation is https://github.com/JabRef/jabref/issues/6862#issuecomment-716028639

Fixes #6862 


<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr11/03/20, 06:54:55 PM
7032.07043"Extra character added to bib field ""file"" when adding an arXiv article""This is the cause of issue [7021 ](https://github.com/JabRef/jabref/issues/7021) that was closed.

This is run under Windows 10

JabRef 5.2--2020-10-19--af203b6
Windows 10 10.0 amd64 
Java 14.0.2

Extra character is automatically added by Jabref to bib field ""file"" when an arXiv article was added to bib file using the ID ""arXiv"" option in ""New entry"". This caused errors when running ""Check integrity"" (Quality -> Check Integrity). Also, sometimes it causes errors when saving the bib file in JabRef, and thus I need to manually remove it when adding an arXiv article

Minimally reproducible example:
1) Add the arXiv article https://arxiv.org/abs/2010.08497v1 to a bib file
2) The automatically created content for field ""file"" is  file         = {:http\://arxiv.org/pdf/2010.08497v1:PDF},
"Add online-link detection to FileFieldParser"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #7032. The FileFieldParser did not detect an URL and created a LinkedFile object with the URL as a local file path, which caused an error when running ""Check integrity"".

I'm not sure if the unit test is in the right class.
If this change requires a changelog entry, I'm happy to add one.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Niffler10/28/20, 09:34:15 AM
7068.07071The entry preview window does not load my customized visual theme "JabRef 5.2--2020-10-15--13a80ba
Windows 10 10.0 amd64 
Java 14.0.2

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
The entry preview window does not load my customized visual theme as the rest of the GUI. I loaded my customized visual theme (copy of the source `Dark.css` file) but was not able to change colors of the preview textarea to match the dark theme of the rest of the GUI. Instead selecting ""Dark theme"" from Options > Appearance correctly makes the background dark.

![image](https://user-images.githubusercontent.com/865866/97967068-01229480-1dbd-11eb-8699-58a3d43e5549.png)

Steps to reproduce the behavior:
1. From the source tree take the `Dark.css` file
2. Open Options > Appearance and select this file as ""Custom theme""
3. Restart JabRef and double click on an entry. The preview textarea has a white background
4. If you select instead ""Dark theme"" the background is correctly dark.

I suspect the problem is in file: `jabref-master\src\main\java\org\jabref\gui\preview\PreviewViewer.java` where I don’t see any reference to theme in JS_HIGHLIGHT_FUNCTION definition or in setPreviewText() function, so the `#previewBody` block in `Dark.css` has no effect.""The file is right, but the highlight function is only used for highlighting search results in the preview.
The real problem lies here. Should be enough to modify the condition
https://github.com/JabRef/jabref/blob/6dec1747d8a1c89f6c62fc1d1939d88411f17eba/src/main/java/org/jabref/gui/preview/PreviewViewer.java#L119-L129 =||= Maybe simply adding a toggle ""The custom theme is a dark theme"" to pass the test `if (theme.getType() == Theme.Type.DARK) {` is sufficient. =||= I would just change the condition and replace it with != Theme.Type.LIGHT
 =||= Eagerly waiting for this change. Thanks! =||= "Fix custom theme styles not applied to the entry preview"Make comment more precise
Fixes #7068 


<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr11/04/20, 07:38:28 AM
6777.07073regexp search throws exception when entering slash"JabRef 5.1--2020-08-22--dc55a76
Linux 5.4.19-050419-generic amd64 
Java 14.0.2

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Open bib file
2. Switch to regexp search
3. Enter something with a ""/"" in it, e.g. bla/bla
4. For each matching entry you get an exception (see details below) thrown. I had once about 50 results, so 50 windows with an exception trace opened.  

Maybe the regular expression could be checked and an exclamation mark icon shown as long as it is incomplete or not escaped before it's executed. Or, one could employ some automatic escaping. 

<details>
  <summary>Log File</summary>
  
 netscape.javascript.JSException: SyntaxError: Invalid regular expression: missing )
	at org.jabref.merged.module@5.1.876/com.sun.webkit.dom.JSObject.fwkMakeException(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.webkit.WebPage.twkExecuteScript(Native Method)
	at org.jabref.merged.module@5.1.876/com.sun.webkit.WebPage.executeScript(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.scene.web.WebEngine.executeScript(Unknown Source)
	at org.jabref@5.1.876/org.jabref.gui.preview.PreviewViewer.highlightSearchPattern(Unknown Source)
	at org.jabref@5.1.876/org.jabref.gui.preview.PreviewViewer.lambda$new$0(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.beans.property.ObjectPropertyBase.set(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.beans.property.ObjectProperty.setValue(Unknown Source)
	at org.jabref@5.1.876/org.jabref.gui.StateManager.setSearchQuery(Unknown Source)
	at org.jabref@5.1.876/org.jabref.gui.search.GlobalSearchBar.performSearch(Unknown Source)
	at org.jabref.merged.module@5.1.876/org.reactfx.util.FxTimer.lambda$restart$0(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.scenario.animation.shared.TimelineClipCore.visitKeyFrame(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.scenario.animation.shared.TimelineClipCore.playTo(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.animation.Timeline.doPlayTo(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.animation.AnimationAccessorImpl.playTo(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.scenario.animation.shared.SingleLoopClipEnvelope.timePulse(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.animation.Animation.doTimePulse(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.animation.Animation$1.lambda$timePulse$0(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.1.876/javafx.animation.Animation$1.timePulse(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.scenario.animation.AbstractMasterTimer.timePulseImpl(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.scenario.animation.AbstractMasterTimer$MainLoop.run(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.javafx.tk.quantum.QuantumToolkit.pulse(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.javafx.tk.quantum.QuantumToolkit.pulseFromQueue(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.javafx.tk.quantum.QuantumToolkit.lambda$runToolkit$11(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(Unknown Source)
	at org.jabref.merged.module@5.1.876/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.1.876/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
</details>""Thanks for the report. From the log it seems like an error in the highlighting script for the entry preview.  =||= I just realised I don't know how the regexp search is supposed to work.... Is it correct that regexp should only works for fields (e.g., `citationkey = Turing\d[0-9]*`) which in turn does not get highlighted in the preview?

Right now, if I were to search for `Turing\d[0-9]*` everything contained in a preview matching the regexp would be highlighted, while only entries containing a literal match would be shown in the search results. Have I missed something? =||= Regarding the search, have you enabled the regex mode? 
https://docs.jabref.org/finding-sorting-and-cleaning-entries/search#regular-expressions-and-casing
(the search is actually based on an Antlr4 grammar, you find that in buildres) 

The highlight function is pretty simple, it does not work with JabRef's search grammar. It's just for highlighting search words. 
It's based on https://markjs.io/  =||= I believe so 😬 
Note the ""no results found"".

<img width=""642"" alt=""Skärmavbild 2020-11-04 kl  16 32 47"" src=""https://user-images.githubusercontent.com/2598631/98170430-f995e500-1ebb-11eb-9f0d-9a923f7f1b22.png"">

I have ogled Antlr4 a bit, the issue is that I don't know what should happen. In my opinion, the search shown above should return some result.

Preventing the exception can either be done by escaping the slash or using `new RegExp` (which is what I tried out in #7073). =||= You are right that should show results.
try Debugging if the correct mode is correctly activated (class is GlobalSearchBar) 
Might also be an issue with multiple open libraries. That can cause quirks  =||= Ok, in that case I will include it in the PR for this issue. =||= @k3KAW8Pnf7mkmdSMPHz27  I did a quick test and it seems like the regex search only works in combination with a field:
e.g. `author=Liu.*`
See: 
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/search/rules/SearchRules.java#L7 =||= @Siedlerchr as far as I can tell that is the case. Note that `Liu.*` is a `GrammarBasedSearchRule`. I am using a break-point at https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/search/rules/SearchRules.java#L16
while debugging.

But, right now I believe
https://github.com/JabRef/jabref/blob/fcbe9c52e099a783a67b1445e2b9bb6f4c485fa0/src/main/java/org/jabref/model/search/rules/GrammarBasedSearchRule.java#L235
should be using
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/search/rules/SearchRules.java#L34

However, my experience of debugging Antlr consists of this issue 😀 
I'll put some more time into this and see if I can find the ""correct"" solution. =||= Ah yes you are right regarding the simple search. Overlooked that.
You might want to ask @tobiasdiez what he did there 4 years ago :-P 
https://github.com/JabRef/jabref/pull/1995

Edit// I think your approach seems to be correct. I looked at that, that does make indeed more sense =||= Please don't put much energy in the ANTLR code. It is obsolete and should be replaced by Lucene: https://github.com/JabRef/jabref/issues/1975 =||= @Siedlerchr @tobiasdiez Ok, in that case I will try to ""patch"" the issue(s) rather than delving deeper into it. =||= I think you just need to add and addtional if check for regex and then call either the regex rule  or the contains. That looks like the simples way
https://github.com/JabRef/jabref/blob/4e220f618a755cb7dc18882653ea46e3ed049c9e/src/main/java/org/jabref/model/search/rules/GrammarBasedSearchRule.java#L234-L235 =||= @ytzemih Thanks to @k3KAW8Pnf7mkmdSMPHz27  this issue is now fixed. We also fxed another issue where regex search did not find some entries =||= @Siedlerchr @k3KAW8Pnf7mkmdSMPHz27 Nice to hear. Thanks for the effort. Will try it out as soon as it is in the build. =||= The new dev version should be already avaiable. =||= @Siedlerchr Brilliant, just downloaded it, tried it, and it seems to work properly for me. Thanks, again. =||= "Fixes exception in preview using regexp search and regexp search without specified field"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6777 . The issue originates in how the JavaScript regexp is created in `PreviewViewer#highlightSearchPattern`.

1. Fixes the use of regexp while searching for one term (e.g., `Liu.*`)
2. Fixes exception in the preview when forward slash is used in the regexp

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] ~Change in CHANGELOG.md described (if applicable)~
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2711/21/20, 05:42:33 PM
7053.07095"Saving new library still shows ""untitled*"" in the tab bar""Latest master version,

![grafik](https://user-images.githubusercontent.com/320228/97678707-8ee84200-1a94-11eb-9cd7-8731b4cd9d21.png)

1. open an existing library
2. create a new empty library 
3. import one entry in the new library
4. Press ctrl + s, enter name of library
5. Tab bar does not update. still shows the star and no title of the library

Maybe coming from  #6129
 "Fixed setting title of saved new library"follow up to #6129 
fixes #7053 

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus11/14/20, 03:49:18 PM
6431.07097Update gradle from 6.3 to 6.5.1"See https://docs.gradle.org/6.4/release-notes.html and https://docs.gradle.org/6.5/release-notes.html for the release notes.

Not sure how following impacts us:

> With this release, Gradle supports the Java Module System with everything you need to compile and execute tests for Java modules. You can also build Javadoc and run applications.

We need to fix our build file (?)

```terminal
Execution failed for task ':generateBstGrammarSource'.
 
Caused by: java.lang.IllegalStateException: The value for task ':generateBstGrammarSource' property 'mainClass' is final and cannot be changed any further.
```""https://docs.gradle.org/6.4/userguide/upgrading_version_6.html#new_properties_may_shadow_variables_in_build_scripts =||= The issue seems to be here: https://github.com/JabRef/jabref/blob/2af41eb82353e37e2a6730485dc76276457fd4af/buildSrc/src/main/groovy/org/jabref/build/antlr/AntlrTask.groovy#L28

We need this special plugin as we use both ANTLR3 and ANTLR4. We cannot udpate our ANTLR3 grammar to ANTLR4. This is more than one hour effort since ANTLR changed consideradibly. =||= According to https://docs.gradle.org/6.4/userguide/java_library_plugin.html#declaring_package_visibility_and_services
> The Java module system supports additional more fine granular encapsulation concepts than Gradle itself currently does. For example, you explicitly need to declare which packages are part of your API and which are only visible inside your module. Some of these capabilities might be added to Gradle itself in future versions.

Until this is implemented, there is no real hope for us to use these new module system features of gradle. =||= Regarding the grammar task, would it be sufficient to change the variable name?
from what I understand the problem is that the variable name main has to be changed  =||= Idea: Extend from a general gradle task and instantiate JavaExec internally (and do not inherit from it anymore) =||= I maybe found a solution, the ""="" has to  be changed to set.
See: 
https://github.com/gradle/gradle/issues/12841
And https://github.com/franzbecker/gradle-lombok/pull/77/files for an implementation =||= Unfortunately my fixes didn't work, they compile, but afterwards the path is not found. Fck gradle.
Edit// Maybe this helps? https://github.com/liquibase/liquibase-gradle-plugin/pull/71/files =||= Still errors with our plugins. My changes didn't work. =||= Still does not work with gradle 6.7 , however I noticed that they reworked the plugin:
I don't know much of this gradle stuff, but maybe this helps?

https://github.com/gradle/gradle/blob/fa4d3ad3ffd3ec3c321e5715879cecbb85a2aebd/subprojects/antlr/src/main/java/org/gradle/api/plugins/antlr/AntlrPlugin.java#L53-L57 =||= "Update antlr task + gradle"Fixes #6431 
Fixes koppor/Jabref#440

I finally found the solution.
Get rid of our AntlrPlugin and follow the idea from here:
https://stackoverflow.com/a/56029522/3450689

Update to gradle 6.6 and newer is not yet possible due to https://github.com/openjfx/javafx-gradle-plugin/issues/89
Make @koppor happy :)

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr11/16/20, 08:02:14 AM
7114.07115NPE in groups panel opening "@Siedlerchr I still have the issue with the group panel with the version
JabRef 5.2--2020-11-21--6f35c36
Linux 4.19.0-12-amd64 amd64 
Java 15.0.1

Some details: 
With the group panel initially closed,
- if no file is opened on startup, the group panel opens and closes fine.
- if a file (like https://github.com/JabRef/jabref/blob/master/src/test/resources/testbib/jabref-authors.bib) is already opened at startup, opening the group panel raises an exception:

Uncaught exception occurred in Thread[JavaFx Application Thread,5,main]
Cannot load org.jabref.gui.groups.grouptree
java.lang.IllegalStateException: Cannot load org.jabref.gui.groups.grouptree
	at org.jabref.merged.module@5.2.288/com.airhacks.afterburner.views.ViewLoader.load(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupSidePane.createContentPane(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.SidePaneComponent.getContentPane(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.SidePane.setComponents(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.SidePaneManager.updateView(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.SidePaneManager.show(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.SidePaneManager.toggle(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.SidePaneComponent$ToggleCommand.execute(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.actions.JabRefAction.lambda$new$3(Unknown Source)
	at org.jabref.merged.module@5.2.288/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module@5.2.288/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.2.288/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: 
/org.jabref/org/jabref/gui/groups/GroupTree.fxml

	at org.jabref.merged.module@5.2.288/javafx.fxml.FXMLLoader.constructLoadException(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.fxml.FXMLLoader.loadImpl(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.fxml.FXMLLoader.loadImpl(Unknown Source)
	at org.jabref.merged.module@5.2.288/javafx.fxml.FXMLLoader.load(Unknown Source)
	... 52 more
Caused by: java.lang.reflect.InvocationTargetException
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
	at com.sun.javafx.reflect.Trampoline.invoke(Unknown Source)
	at jdk.internal.reflect.GeneratedMethodAccessor6.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.base/java.lang.reflect.Method.invoke(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.reflect.MethodUtil.invoke(Unknown Source)
	at org.jabref.merged.module@5.2.288/com.sun.javafx.fxml.MethodHelper.invoke(Unknown Source)
	... 55 more
Caused by: java.lang.NullPointerException: Cannot invoke ""javafx.scene.control.TreeItem.getValue()"" because ""<parameter1>"" is null
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupTreeView.getTreeItemByValue(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupTreeView.getTreeItemByValue(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupTreeView.selectNode(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupTreeView.selectNode(Unknown Source)
	at java.base/java.lang.Iterable.forEach(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupTreeView.lambda$initialize$0(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.util.BindingsHelper.bindContentBidirectional(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.util.BindingsHelper.bindContentBidirectional(Unknown Source)
	at org.jabref@5.2.288/org.jabref.gui.groups.GroupTreeView.initialize(Unknown Source)
	... 65 more

_Originally posted by @mlep in https://github.com/JabRef/jabref/issues/7105#issuecomment-731626000_""@mlep can you send us the bib file? (developers@jabref.org)  =||= Well, the bib file is in JabRef repository! ;-)
https://github.com/JabRef/jabref/blob/master/src/test/resources/testbib/jabref-authors.bib =||= already found a solution, bug was introduced #7014 
Fix incoming =||= @calixtus Ohhh, that was fast! =||= I just encountered this problem while refactoring some code. It was pure coincidence. 😄  =||= And it should be fixed now =||= Indeed, I can confirm this issue is fixed in JabRef 5.2--2020-11-21--b0af521
Linux 4.19.0-12-amd64 amd64 
Java 15.0.1

Thanks! =||= "Fixes NPE on opening GroupPanel"Fixes #7114 

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus11/21/20, 09:31:40 PM
6622.07116file save does not work when editing bib code in entry editor"JabRef 5.1--2020-06-13--0432100
Linux 5.6.18-300.fc32.x86_64 amd64 
Java 14.0.1


Steps to reproduce the behavior:
1. edit an entry in the source field within the entry editor
2. press ctrl+s
3. close file
4. open file

Effect: the final change was not saved.
it gets saved when the user shifts to another field of the entry editor and then presses ctrl+2. ""Has anyone picked this issue up? If not I'd like to give it a try. =||= @DaniloMurer  You can take a look at it. But be warned that the source code editor tab is a complex issue and modications can produce nasty side effects. The code is in gui/entryeditor/SourceTab,java.
I guess it's related to the focusedPropertyListener which store the source when the focus is changed
 =||= Ok thanks for the advice and the warning. I'm going to try my best maybe I can find a solution to this. =||= Feel free to ask here or in the developer gitter channel. You might want to read the contribution guide for our contribution process 
https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md =||= Ok thank you very much. I got it how to make the branch so that's not a problem anymore.

Greetings =||= Is this still a problem? =||= Will take some days until I can check. Thanks for asking!

On 31 August 2020 21:52:48 CEST, Christoph <notifications@github.com> wrote:
>Is this still a problem?
>
>-- 
>You are receiving this because you authored the thread.
>Reply to this email directly or view it on GitHub:
>https://github.com/JabRef/jabref/issues/6622#issuecomment-684002357

-- 
Sent from my LineageOS device with K-9 Mail. Please excuse my brevity. =||= Hello, yes the issue does still persist and I'm not sure if I've got enough free time to fix this issue.

Regards =||= JabRef 5.2--2020-09-01--35f5078
Linux 5.8.4-200.fc32.x86_64 amd64 
Java 14.0.2

problem persists. =||= JabRef 5.2--2020-11-21--b0af521
Linux 5.9.8-200.fc33.x86_64 amd64 
Java 15.0.1

problem persists. =||= This issue should now be resolved in latest master.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.2--2020-11-23--350ec1f
Linux 5.9.9-200.fc33.x86_64 amd64 
Java 15.0.1

Hi, in this version, when I edit the bib code directly, it takes some seconds until the `*` appears next the the library's name, indicating the unsaved change of the file. =||= But saving now works- thanks! =||= "Fix saving in codeArea without leaving the field"Refactor  globals

fixes #6622

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr11/23/20, 07:41:39 PM
6417.07119Improve responsiveness of library loading"When JabRef opens a library, it opens a file, runs the database parser, and after everything is done, creates a new tab in the frame with the contents of the open database.

An improvement would be to first create a tab in the frame, display a loading animation, and after the parser has finished, display all entries (or display every entry as soon as it is parsed).""I am gonna check this. =||= This is too complex for me...Sorry. =||= It seems that the function ""open a library"" involves many classes and files without a top level file controlling them. =||= There should be two entry points for this: `JabRefGUI::openDatabases` for autoloading in the startup process, and `OpenDatabaseAction::openFiles` for the menu command.
The basic idea would probably to move e.g. the `OpenDatabaseAction::loadDatabase` method into the BasePanel class, maybe called as a background process by a constructor, and bind the workDonePercentageProperty of the Task to some loading animation in the `BasePanel`... =||= Thanks for your suggestion, I will try it. =||= @sustcstar Hi, do you still work on this issue? My teamate and I want to try this issue if you are not doing it now.  ^_^ =||= Yeah, I have been doing this for two days.
If finally I give up, I will tell you. =||= OK, best wishes! =||= I give up on this issue, everyone please feel free to take it =||= Is anyone actively working on this? I'd like to work on it but I don't want to step on anyones toes. =||= Feel free to take this issue.
Be aware that recently part of our architecture changed.
BasePanel is now Library tab.
Have fun coding and don't hesitate to ask for help in the gitter chat, if you don't understand something. =||= I'd like to work on this, @tmrd993 If you're still working on it tell me =||= Hi @HoussemNasri , have fun coding. Maybe @tmrd993 can show what he already did and you both can join forces?
Don't forget to ask, if you encounter a problem or need help in our gitter jabref developer chat https://gitter.im/JabRef/jabref
 =||= > 
> 
> @tmrd993 If you're still working on it tell me

No, you can go ahead and work on it.

I only skimmed over the files but I am pretty sure you need to look at https://github.com/JabRef/jabref/blob/1dc91ca3083a25e69516a1d0c71fc876ddb665aa/src/main/java/org/jabref/gui/importer/actions/OpenDatabaseAction.java#L39

This is the action that gets executed when the user loads a database from the menu.

When a database wasn't closed, the program opens it on startup from here https://github.com/JabRef/jabref/blob/1dc91ca3083a25e69516a1d0c71fc876ddb665aa/src/main/java/org/jabref/gui/JabRefGUI.java#L121
 =||= For now, I am trying to deal with opening the database using action and these are the steps I am following

1. open a ~~empty tab~~ placeholder tab without starting the loading process yet
2. start loading the data on a background thread and with it a progress bar 
3. when data loaded stop the progress bar and ~~load data into the tab we opened~~ close the placeholder tab and start the real tab

~~My current issue is the following, with the current `LibraryTab`, opening an empty tab is challenging because you need to pass a `BibDatabaseContext` at initialization and it can't be null, I can create a `BibDatabaseContext` with no data by just passing an empty list of entries to `Database` and pass the context to `LibraryTab`, but this will leave us with no information about the database we are trying to open, I tried to change the title of the tab using `setText()` but for some reason, it gets back to ""untitled""~~
I created an instance of `BibDatabaseContext` then i `setDatabasePath()` and it worked

~~My current task is to refactor `LibraryTab` so it's easy to create an empty tab while keeping the information of the database we're trying to open(name, path...) and define a method inside `LibraryTab` of the name for example `loadData()` that will load a list of entries into the tab and update the UI~~
Refactoring LibraryTab wasn't an easy job as i thought, I tried refactoring it so i can create a tab then feed data later but there was some edge cases where the sidebar doesn't update and random crashes. 

- Some Progress
![](https://media.giphy.com/media/mcf9jWOvhttbsUTfmm/giphy.gif)

- There was an issue when opening multiple databases simultaneously they will appear sorted by who loaded first, for example when you open database1  then database2, if database2 loaded before database1 you'll notice that database2 tab is before database1
- I fixed it with setting the position of each tab to their placeholder position, this way it doesn't matter when tab finishes loading it will reposition itself in the correct position.
![](https://media.giphy.com/media/aPEiHEPWYYbBjMXjo8/giphy.gif)
Next step is to apply the same behavior on startup. =||= Can anyone explain to me what this code is doing
https://github.com/JabRef/jabref/blob/0412684218478d90e0a41d2a3c4be0a84af2793c/src/main/java/org/jabref/gui/JabRefGUI.java#L149-L171 =||= This code should autoload the databases on startup.
First if block handles the shared databases (like Overleaf or some sql database), second if block handles, if someone uses the command line to merge some other database into the currently opened database, third block is the very simple autoload last opened files on startup. =||= @calixtus Thank you for responding, but I have another question, my code will close tabs automatically so to achieve this I copied this method from `JabRefFrame` and called it whenever I close a tab
https://github.com/JabRef/jabref/blob/b0af521e3173e4b55673cd27563ca981ad607e8b/src/main/java/org/jabref/gui/JabRefFrame.java#L1157-L1162

The tab disappear indeed, The problem is when I close the app it keeps running in the background, After some investigation, I found out this was happening because `AutosaveManager` and `BackupManager` still attached to the tab so to solve this I need to call
 ```java 
AutosaveManager.shutdown(context);
BackupManager.shutdown(context);
```
My question is it ok if I added this snippet into the `cleanup()` method in `LibraryTab`
https://github.com/JabRef/jabref/blob/b0af521e3173e4b55673cd27563ca981ad607e8b/src/main/java/org/jabref/gui/LibraryTab.java#L586-L588
 =||= Can you make a pull request with your changes so far? Then we can discuss this more easily. About autosave: @Siedlerchr is most experienced with this part of the code. =||= @HoussemNasri  The autosave / tab shutdown closing seems plausible and should be done.A tab has an attach bibdatabasecontext so this is correct =||= I am trying a new approach by adding a new tab with 0 entries then when data is ready I call a method from LibraryTab to update BibdatabaseContext but the problem is that Groups Pane doesn't update and keep showing 0 entries although when I navigate away from the tab and come back it updates just fine.
This is the method in LibraryTab to update BibdatabaseContext 
```java
public void feedData(BibDatabaseContext bibDatabaseContext){
        cleanUp();

        this.bibDatabaseContext = Objects.requireNonNull(bibDatabaseContext);

        bibDatabaseContext.getDatabase().registerListener(this);
        bibDatabaseContext.getMetaData().registerListener(this);

        this.sidePaneManager = frame.getSidePaneManager();

        this.tableModel = new MainTableDataModel(getBibDatabaseContext(), preferencesService, Globals.stateManager);

        citationStyleCache = new CitationStyleCache(bibDatabaseContext);
        annotationCache = new FileAnnotationCache(bibDatabaseContext, preferencesService.getFilePreferences());

        setupMainPanel();
        setupAutoCompletion();

        this.getDatabase().registerListener(new SearchListener());
        this.getDatabase().registerListener(new EntriesRemovedListener());

        // ensure that at each addition of a new entry, the entry is added to the groups interface
        this.bibDatabaseContext.getDatabase().registerListener(new GroupTreeListener());
        // ensure that all entry changes mark the panel as changed
        this.bibDatabaseContext.getDatabase().registerListener(this);

        this.getDatabase().registerListener(new UpdateTimestampListener(preferencesService));

        this.entryEditor = new EntryEditor(this, externalFileTypes);

        Platform.runLater(() -> {
            EasyBind.subscribe(changedProperty, this::updateTabTitle);
            Globals.stateManager.getOpenDatabases().addListener((ListChangeListener<BibDatabaseContext>) c ->
                    updateTabTitle(changedProperty.getValue()));
        });

         //I took some code from add() method in JabRefFrame to reinitialize Backup and Autosave.
        if (readyForAutosave(bibDatabaseContext)) {
            AutosaveManager autosaver = AutosaveManager.start(bibDatabaseContext);
            autosaver.registerListener(new AutosaveUiManager(this));
        }

        BackupManager.start(this.bibDatabaseContext, Globals.entryTypesManager, Globals.prefs);

        trackOpenNewDatabase(this);

    }
``` =||= "Improve library loading UX"When JabRef opens a library, it opens a file, runs the database parser, and after everything is done, creates a new tab in the frame with the contents of the open database.

An improvement would be to first create a tab in the frame, display a loading animation, and after the parser has finished, display all entries (or display every entry as soon as it is parsed).

there is a bug that I couldn't fix, even after data is loaded the group pane will keep showing 0 entry, you need to navigate away from the tab and back to get the real number of entries

about applying the improvement on startup, I think having a splash screen will look better something like a blocking dialog that displays a ProgressIndicator

Closes #6417
![im1](https://imgur.com/fAyMdUX.jpg)
![im2](https://imgur.com/FvDHIwM.jpg)
![im3](https://imgur.com/7juc16x.jpg)
![im4](https://imgur.com/8NLHA2q.jpg)
- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Houssem NasriHoussemNasri12/06/20, 05:48:15 PM
6791.07131Dark theme: Search: case sensitive is case insensitive (and vice-versa)"JabRef 5.1--2020-08-25--2ce90ad
Linux 4.9.0-13-amd64 amd64 
Java 15-ea

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

With the dark theme, if the ""case sensitive"" button is activated in the search bar, the search is case unsensitive.
And if the ""case sensitive"" button is deactivated in the search bar, the search is case sensitive. 
Note: It works as expected in the light mode.

Steps to reproduce the behavior:

0. activate the light theme (and restart)
1. open  https://github.com/JabRef/jabref/blob/master/src/test/resources/testbib/jabref-authors.bib
2. in the search bar, type ""garrido""
3. if ""case sensitive"" is activated (i.e. ""abc"" is bold in the button), ""No result found"".
   if ""case sensitive"" is deactivated (i.e. ""abc"" is light in the button), ""9 results found"".
       (as expected)
4. now activate the dark theme (and restart)
5. in the search bar, type ""garrido""
6. if ""case sensitive"" is activated (i.e. ""abc"" is bold in the button), ""9 results found""
![Dark-CaseSensitiveActivated](https://user-images.githubusercontent.com/6931104/91191782-7dca3000-e6f5-11ea-9ed9-ca0a028fba4a.png)
   if ""case sensitive"" is deactivated (i.e. ""abc"" is light in the button), ""No result found""
![Dark-CaseSensitiveDeactivated](https://user-images.githubusercontent.com/6931104/91191789-80c52080-e6f5-11ea-83d0-c89b2b58ad22.png)

So, in the dark theme:
1) the behavior is opposite to the one of the light theme
2) search is visually case sensitive when, in fact, it is not.

""The same goes with the button for regular expression search: when supposedly activated (i.e. button in bold), search works like if the button is not activated. And vice-versa:

- `title=modeling`  ==> ""Found 7 results.""
- `title=modelling`  ==> ""Found 5 results.""
- `title=modell?ing`  and regular expression button bold ==> ""No result found.""
- `title=modell?ing`  and regular expression button dimmed ==> ""Found 12 results.""
 =||= Thanks for the investigation, seems like the the CSS colors/highlighing are wrong in the Dark.css 
Maybe sth with the active/armed.
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/Dark.css =||= Our team @ISD14-LNMIIT wants to work on this issue. Please assign this issue to us!
@Siedlerchr @mlep  =||= We are a team of college undergrads and we have to solve an issue on Github as our project. We are following the team software process and as such it will take about 2 weeks for us to resolve the issue and we will ensure high-quality work. @Siedlerchr @mlep  =||= We (ISD14-LNMIIT) had been assigned a different issue on jabref but one of the team members got COVID-19 and we also had our mid-term exams because of which we didn't make a pull request and when we were about to make a pull request we saw that the issue has been closed. This is a very important project and we will ensure that this issue will be resolved as soon as possible. Please consider this team as it is very important for our grades. @Siedlerchr @mlep  =||= @Siedlerchr Can you assign @ISD14-LNMIIT this issue as I'm a part of this team? =||= I can only assign persons. =||= @Siedlerchr Is there any acceptance test for the issue? if there is then could you tell us about that as we will run it and provide a quality solution =||= Just test it manually, create a PR, then we will review the code changes and merge if all is good.
See also our https://devdocs.jabref.org for getting started. 

As I outlined earlier, the issue is probably a CSS issue in the Dark.css. The dark theme can be enabled in the preferences of JabRef. 
The dark.css just overwrites some properties of the Base.css 


 =||= @Siedlerchr ok thank you!
 =||= For referenes:
The ToggleButton Style in the css applies to both the regex and the case sensitvy button, e.g. both are defined as ToggleButton
The properties of the toggle button:
https://openjfx.io/javadoc/14/javafx.graphics/javafx/scene/doc-files/cssref.html#togglebutton =||= I believe the classes are set to `icon-button` in https://github.com/JabRef/jabref/blob/350ec1f1ba4dc13c3e9f5a07f4fac801e85a93dc/src/main/java/org/jabref/gui/icon/IconTheme.java#L339-L344 =||= Thanks to @kingmanas and his team, this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= This is now working as expected. Thank you @kingmanas! =||= "Fixing glyph icon colors in Search Bar in Dark Mode" ##<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #6791 "".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #6791 

This pull request is on behalf of team ISD14-LNMIIT

Case Sensitive
![dark_case_sensitive](https://user-images.githubusercontent.com/39790333/100469139-bcf48c80-30fb-11eb-876f-2d389c5ef16b.png)
Case Insensitive
![dark_case_insensitive](https://user-images.githubusercontent.com/39790333/100469173-c7af2180-30fb-11eb-99de-61fde6193eae.png)

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Manas Singhkingmanas11/29/20, 04:01:17 PM
7108.07132Document Viewer do not show all pages"The document viewer started with the second page instead of the first page.


[https://discourse.jabref.org/t/document-viewer-do-not-show-all-pages/2421](Link)
""Yep, I could confirm this in the 5.2-dev.
The page iterating happens here:
https://github.com/JabRef/jabref/blob/8777c16a99bd83e4a30ddafc859c0c2208b68733/src/main/java/org/jabref/gui/documentviewer/PdfDocumentViewModel.java#L22-L31 =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix document viewer not showing first page"Turned out it was an off by one error.

<img width=""746"" alt=""Bildschirmfoto 2020-11-27 um 20 43 23"" src=""https://user-images.githubusercontent.com/320228/100480364-4ce10900-30f1-11eb-8061-65fbd688e9f7.png"">


Fixes #7108 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr11/29/20, 04:04:53 PM
6959.07151"Exception when ""pulling changes"" from local database""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.2--2020-09-29--2d92025
Linux 4.12.14-lp151.28.67-default amd64 
Java 15

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Load a local database.
2. Click on ""Pull changes from shared database""
3. Exception has been thrown.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.NullPointerException: Cannot invoke ""org.jabref.logic.shared.DatabaseSynchronizer.pullChanges()"" because ""<local1>"" is null
        at org.jabref.gui.shared.PullChangesFromSharedAction.lambda$execute$0(Unknown Source) ~[org.jabref:?]
        at java.util.Optional.ifPresent(Unknown Source) ~[?:?]
        at org.jabref.gui.shared.PullChangesFromSharedAction.execute(Unknown Source) ~[org.jabref:?]
        at org.jabref.gui.actions.JabRefAction.lambda$new$2(Unknown Source) ~[org.jabref:?]
        at org.controlsfx.control.action.Action.handle(Unknown Source) ~[org.jabref.merged.module:?]
        at org.controlsfx.control.action.Action.handle(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at javafx.scene.control.MenuItem.fire(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at javafx.scene.Scene$MouseHandler.process(Unknown Source) ~[org.jabref.merged.module:?]
        at javafx.scene.Scene.processMouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source) ~[org.jabref.merged.module:?]
        at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
        at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.View.handleMouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.View.notifyMouse(Unknown Source) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
        at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source) ~[org.jabref.merged.module:?]
        at java.lang.Thread.run(Unknown Source) [?:?]
  ```
</details>""The solution would be to create another BooleanExpression in the ActionHelper class, e..g needsSharedDatabase
filter there
And in the action you can then bind it, e..g:
this.executable.bind(ActionHelper.needsEntriesSelected(stateManager)); =||= Hi! Can I work on this? =||= Sure. Go ahead, if you have any questions ask here or in our gitter channel  =||= Hello I'm back. I think I have a solution almost worked out but I need a little help.

I added the binding in `PullChangesFromSharedAction.java`
```java
    public PullChangesFromSharedAction(StateManager stateManager) {
        this.stateManager = stateManager;

        this.executable.bind(ActionHelper.needsDatabase(stateManager));
        this.executable.bind(ActionHelper.needsSharedDatabase(stateManager)); //new
    }
```

The problem is I'm still not sure how to make the validation in the `ActionHelper.java`. So far my approach is something like this:
```java
    public static BooleanExpression needsSharedDatabase(StateManager stateManager){
        return stateManager.activeDatabaseProperty().isEqualTo(""shared"");
    }
```
The problem is that in the `.isEqualTo` I'm not sure with what I should compare it to detect when the user is not using a shared database.

I would really appreciate some help to make my first contribution! =||= Idea is good so far, for checking if it's a shared database you better check the bibdatabasecontect e.g
databaseContext.getLocation() == DatabaseLocation.SHARED)
                     =||= `Bindings.createBooleanBinding` is probably your friend here. Be aware that you can combine two Bindings with `.and()` =||= Update:

I came up with this solution:
```java
    public static BooleanExpression needsSharedDatabase(StateManager stateManager) {
        BibDatabaseContext databaseContext = stateManager.activeDatabaseProperty().orElse(null).get();
        return Bindings.createBooleanBinding(() -> databaseContext != null && databaseContext.getLocation() == DatabaseLocation.SHARED);
    }
```
But now the problem is that the validation is only being done at the start when I run the program. I'm guessing It's related to the `StateManager.java` but I'm fairly new to JavaFX so I'll keep looking into it. =||= You need to add the check for the active database property in the booleanBinding itself. The Bindings are wrapper around Observables. Observables update whenever their values changes.
Some background info: https://docs.oracle.com/javase/8/javafx/properties-binding-tutorial/binding.htm

I think something like this could work:
you may need to add some null checks
```java
     var binding = Bindings.createBooleanBinding(()->
        stateManager.activeDatabaseProperty().getValue().filter(context->context.getLocation() == DatabaseLocation.SHARED).isPresent(),
        stateManager.activeDatabaseProperty());
  
        return BooleanExpression.booleanExpression(binding);
``` =||= Thanks a lot @Siedlerchr I really appreciate your help. I'll look into it. =||= orElse(null) is always a bad idea...
Try using .isEmpty() inside the lambda expression.  =||= "Fix for issue 6959"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6959 implementing the method `needsSharedDatabase` in the `ActionHelper` and then binding it in the class `PullChangesFromSharedDatabase`. This solution prevents the user from clicking ""Pull changes from database"" if a shared database is not present.

When the DatabaseLocation is **local**:
<img width=""635"" alt=""Screen Shot 2020-12-02 at 5 13 49 PM"" src=""https://user-images.githubusercontent.com/23217708/100947116-31e01180-34c2-11eb-8148-8697adc0227a.png"">
 
When the DatabaseLocation is **shared**:
<img width=""711"" alt=""Screen Shot 2020-12-02 at 5 19 30 PM"" src=""https://user-images.githubusercontent.com/23217708/100947288-969b6c00-34c2-11eb-804e-13a5fb0289c8.png"">

When there is **no library open**:
<img width=""632"" alt=""Screen Shot 2020-12-03 at 1 06 53 PM"" src=""https://user-images.githubusercontent.com/23217708/101082308-7de59180-3568-11eb-865b-1f7d197df4ea.png"">

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Luis Valdezluis-valdez12/04/20, 08:51:28 AM
6869.07154Password for shared PostgreSQL database will not be remembered"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.2--2020-09-03--1283f9f on openSUSE Leap 15.1.

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Open a shared (PostgreSQL) database and tick ""Remember Password"" (without ""Use SSL"").
2. Reopen the database.
3. The password has not been remembered and there are `TimeOut` messages for SSLSocket on the console (see log files).

Do you have an idea where the problem is?

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Credentials input pane</summary>
  
  ```
 %d [%thread] %-5level %logger - %msg%n javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.
	at com.sun.crypto.provider.CipherCore.unpad(Unknown Source) ~[?:?]
	at com.sun.crypto.provider.CipherCore.fillOutputBuffer(Unknown Source) ~[?:?]
	at com.sun.crypto.provider.CipherCore.doFinal(Unknown Source) ~[?:?]
	at com.sun.crypto.provider.AESCipher.engineDoFinal(Unknown Source) ~[?:?]
	at javax.crypto.Cipher.doFinal(Unknown Source) ~[?:?]
	at org.jabref.logic.shared.security.Password.decrypt(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.shared.SharedDatabaseLoginDialogViewModel.applyPreferences(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.shared.SharedDatabaseLoginDialogViewModel.<init>(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.shared.SharedDatabaseLoginDialogView.initialize(Unknown Source) ~[org.jabref:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:?]
	at java.lang.reflect.Method.invoke(Unknown Source) ~[?:?]
	at com.sun.javafx.reflect.Trampoline.invoke(Unknown Source) ~[org.jabref.merged.module:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[?:?]
	at java.lang.reflect.Method.invoke(Unknown Source) ~[?:?]
	at com.sun.javafx.reflect.MethodUtil.invoke(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.fxml.MethodHelper.invoke(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.fxml.FXMLLoader.loadImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.fxml.FXMLLoader.loadImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.fxml.FXMLLoader.load(Unknown Source) ~[org.jabref.merged.module:?]
	at com.airhacks.afterburner.views.ViewLoader.load(Unknown Source) ~[org.jabref.merged.module:?]
	at org.jabref.gui.shared.SharedDatabaseLoginDialogView.<init>(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.shared.ConnectToSharedDatabaseCommand.execute(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.actions.JabRefAction.lambda$new$2(Unknown Source) ~[org.jabref:?]
	at org.controlsfx.control.action.Action.handle(Unknown Source) ~[org.jabref.merged.module:?]
	at org.controlsfx.control.action.Action.handle(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.MenuItem.fire(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$MouseHandler.process(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene.processMouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source) ~[org.jabref.merged.module:?]
	at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.handleMouseEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.notifyMouse(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source) ~[org.jabref.merged.module:?]
	at java.lang.Thread.run(Unknown Source) [?:?]

  ```
</details>


<details>
  <summary>When running (every 500 ms as defined in `PostgresSQLNotificationListener`)</summary>
  
  ```
javax.net.ssl|WARNING|21|JabRef CachedThreadPool|2020-09-04 10:39:24.818 CEST|null:-1|handling exception (
""throwable"" : {
  java.net.SocketTimeoutException: Read timed out
  	at java.base/sun.nio.ch.NioSocketImpl.timedRead(Unknown Source)
  	at java.base/sun.nio.ch.NioSocketImpl.implRead(Unknown Source)
  	at java.base/sun.nio.ch.NioSocketImpl.read(Unknown Source)
  	at java.base/sun.nio.ch.NioSocketImpl$1.read(Unknown Source)
  	at java.base/java.net.Socket$SocketInputStream.read(Unknown Source)
  	at java.base/sun.security.ssl.SSLSocketInputRecord.read(Unknown Source)
  	at java.base/sun.security.ssl.SSLSocketInputRecord.readHeader(Unknown Source)
  	at java.base/sun.security.ssl.SSLSocketInputRecord.bytesInCompletePacket(Unknown Source)
  	at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(Unknown Source)
  	at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(Unknown Source)
  	at org.jabref.merged.module@5.2.60/org.postgresql.core.VisibleBufferedInputStream.readMore(Unknown Source)
  	at org.jabref.merged.module@5.2.60/org.postgresql.core.VisibleBufferedInputStream.ensureBytes(Unknown Source)
  	at org.jabref.merged.module@5.2.60/org.postgresql.core.PGStream.hasMessagePending(Unknown Source)
  	at org.jabref.merged.module@5.2.60/org.postgresql.core.v3.QueryExecutorImpl.processNotifies(Unknown Source)
  	at org.jabref.merged.module@5.2.60/org.postgresql.jdbc.PgConnection.getNotifications(Unknown Source)
  	at org.jabref.merged.module@5.2.60/org.postgresql.jdbc.PgConnection.getNotifications(Unknown Source)
  	at org.jabref@5.2.60/org.jabref.logic.shared.listener.PostgresSQLNotificationListener.run(Unknown Source)
  	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
  	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
  	at java.base/java.lang.Thread.run(Unknown Source)}

)
  ```
</details>


[socketTimeOut_SSL.log](https://github.com/JabRef/jabref/files/5173682/socketTimeOut_SSL.log)""My idea won't help you much: Somewhere in the preferences. I think, it is `org.jabref.logic.shared.prefs.SharedDatabasePreferences`.

The JabRef team decided to remove any preference storing related tests, because tests should not change the developer's productive settings.

Are the connection properties themselves remembered?

I see following in the code - it could be that while switching from Java 8 to a higher version, the encryption algorithms might have get lost. - Do you see something in the log file?

```java
        try {
            setPassword(new Password(properties.getPassword().toCharArray(), properties.getUser()).encrypt());
        } catch (GeneralSecurityException | UnsupportedEncodingException e) {
            LOGGER.error(""Could not store the password due to encryption problems."", e);
        }
``` =||= Maybe because of the changes at https://github.com/JabRef/jabref/pull/6853? =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= This still was an issue in the latest release, should be finally fixed with https://github.com/JabRef/jabref/pull/7364 =||= "Fix remembering password for sql db"Fixes #6869

A binding was missing 🤦 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr12/03/20, 08:22:22 PM
6394.07173Main table: Coloured group indicator for cited entries does not show up consistently anymore"Tested with the latest JabRef development version (master branch) on Ubuntu 16.04

Unfortunately, the colored group indicator for cited entries does not show up consistently anymore in the main table: The badge icon with the number of cited entries works, but the colored group indicator in the main table does not show up for most of the cited entries. Sometimes only one, two or four indicators show up. (Updating the group repeatedly or restarting JabRef does not help either.)

@tobiasdiez I strongly suspect that the cause of this issue is connected with the recently conducted performance optimizations of the group functionality (faster group calculations). When reverting back for two weeks, this problem vanishes.

Steps to reproduce the behavior:
1. Create group of cited entries by linking the corresponding `.aux` file
1. Cite entries in a tex file and build the pdf file
2. Update group of cited entries
3. Observation: Not all indicators show up""The issue is caused by commit bc57d22f. =||= #6586 slightly reduced the problem, since when the library gets reopened or JabRef gets restarted, then all groups are freshly parsed and properly created now, but the underlying problem still persists in all other cases. =||= I'll start looking at this =||= ~Should an entry's group(s) always show in `StandardField.GROUPS`? I haven't been able to find any discussion regarding this topic.~ =||= What is the expected behaviour for when you have a group selected, so that only entries in the .aux file is shown, and a change occur so that an entry is added/removed?
I am ok with an entry not being *removed* from the view (as it is indicated by the group color anyway, as shown in the screenshot below), but what about when they are *added*?

<img width=""323"" alt=""Skärmavbild 2020-12-16 kl  14 35 40"" src=""https://user-images.githubusercontent.com/2598631/102397557-07a34f00-3fac-11eb-88b3-db944d131127.png"">
 =||= I am assuming that it should behave in the same way as for searches (the bib entry gets added/removed immediately but the entry editor still show the entry if it was selected) =||= According to the documentation (at https://docs.jabref.org/finding-sorting-and-cleaning-entries/groups#using-the-cited-entries-of-a-latex-document), the `.aux` file is hot reloaded. Since the group changed, I would like to see all changes in the maintable, too. Which means: removal causes removal and addition causes addition. 😇  =||= Removed from the milestone as we are going to release v5.2 today - and there is the PR https://github.com/JabRef/jabref/pull/7173 opened working on fixing the issue. =||= Sorry about the delay, hopefully it means it gets ""right"" in the end! =||= No problem, we just wanted to release today, no matter if it's done or not. Will probably create another release afterwards more soon =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Updates to colored group indicator for cited entries"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6394.

An entry can belong to a specific group depending on,
1. Field or type in the `BibEntry`
2. The settings of the specific group

Hence, ~any changes in a field or type in the `BibEntry`, or~ any change in the groups should reevaluation wether or not the entry is still in any given group.

I am not very comfortable with the JavaFX/MVVC structure yet, so I have attempted an approach with as few structural changes as possible.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Keep the count ""badge"" is up-to-date
- [x] Refresh the selected groups
  - [x] Deal with `ConcurrentModificationException`
  - [x] ~Fix performance bottleneck~
    - [x] ~Occurs when switching library and the group is selected~
- [x] Check for potential memory leaks,
  - [x] caused by extending `Observable` in `TexGroup.java` (how should the listeners be stored?)
  - [x] dependence on deprecated method `GroupTreeNode#setGroup(AbstractGroup newGroup)`
  - [x] use of `EventBus` without unregistering listener
    - [x] Make a WeakInvalidationListener adapter?
- [x] JabRef believes the .bib file has changed when the .aux file changes
  - [x] Check if the `isFilteredOut` attribute of `BibDatabaseContextChangedEvent` is used to prevent saving
    - [x] Add JavaDoc
- [x] ~How does the current `GroupInvalidationEvent` affect the hierarchical group structure? (should it be fired from elsewhere so that only partial recalculations of group colors are necessary)~
- [x] Replace unnecessary adapter class

---

- [x] Change in CHANGELOG.md described (if applicable)
- [x] ~Tests created for changes (if applicable)~
- [x] Manually tested changed features in running JabRef (always required)
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2701/13/21, 09:08:55 AM
5777.07174Context menu of linked file not updated after downloading"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Add online link to a pdf to some entry
2. Right-click pdf > Download
3. Wait until downloaded.
4. Right-click pdf again. Most of the options are still grayed-out, probably because JabRef still thinks that this is an online pdf and not a local pdf.

Relevant code:
context menu: https://github.com/JabRef/jabref/blob/fc4201d6dffe16d2d3a820bd1200c4256c9c3e02/src/main/java/org/jabref/gui/fieldeditors/LinkedFilesEditor.java#L215-L267
download: https://github.com/JabRef/jabref/blob/fc4201d6dffe16d2d3a820bd1200c4256c9c3e02/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L407-L410

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Mac OS X 10.14.4
Java 13.0.1

 I can’t recreate this bug.
 
1) I clicked general and added the link http://www.africau.edu/images/default/sample.pdf to URL
2) Then I right-clicked  “Open URL or DOI”(I did this because Open File was grayed-out despite adding the URL
3) I downloaded the pdf but Open File was still grayed - out.
    
<img width=""1440"" alt=""Screen Shot 2019-12-31 at 12 24 04 AM"" src=""https://user-images.githubusercontent.com/12687673/71611051-1824a480-2b64-11ea-84e4-5172287b1a3a.png"">





 Then I tried to download from URL. I didn't get the same grayed out the issue.

<img width=""841"" alt=""Screen Shot 2019-12-31 at 12 26 52 AM"" src=""https://user-images.githubusercontent.com/12687673/71611071-47d3ac80-2b64-11ea-9e25-00422cee6c00.png"">

What am I missing to recreate this bug?
 =||= @kevone123 Thanks for your interest! The entry context menu of the main table is working fine, but the context menu of the file is the problem (right click on ""PDF"" in your last screenshot). Sorry for being imprecise.  =||= @tobiasdiez I'm still unable to recreate this bug. 

  1) Added the link to an entry

<img width=""420"" alt=""Screen Shot 2020-01-06 at 1 04 42 PM"" src=""https://user-images.githubusercontent.com/12687673/71837748-25babc80-3085-11ea-9077-2755a8183e85.png"">

  2) Downloaded the pdf

<img width=""1154"" alt=""Screen Shot 2020-01-06 at 12 49 20 PM"" src=""https://user-images.githubusercontent.com/12687673/71837079-8e089e80-3083-11ea-8dad-8b015fd8acc6.png"">

3) When I right-clicked the pdf it isn't grayed out.

<img width=""601"" alt=""Screen Shot 2020-01-06 at 12 50 53 PM"" src=""https://user-images.githubusercontent.com/12687673/71837150-b85a5c00-3083-11ea-9b6e-68bb01cdaac3.png"">

However it is greyed out when I clicked the empty grayed line after it.
<img width=""597"" alt=""Screen Shot 2020-01-06 at 12 51 09 PM"" src=""https://user-images.githubusercontent.com/12687673/71837178-cc9e5900-3083-11ea-90d3-83ee962564ef.png"">

Thank you for your response.
 =||= This is very strange. For me, the context menu looks like the one on your last screenshot. Only after I switch between entries, the context menu is updated correctly. =||= Hi, we are a team of 5 students, and we are interested in working on this issue. 

Firstly, we had reproduced this bug. Thanks for your tips, we understand the reason. In our opinion, we find that only after downloading completed, ```LinkedFile``` object’s link attributes will update, and content menu will consequently update, making some options not grayed out. 

We guess that it can’t immediately update for it not renews content menu, and can only reinitialize after switch between entries.

We consider whether it is possible to renew the content menu immediately after downloading complete, that is after ```onSuccess``` function. But we are a little confused about the ```onSuccess``` function, it seems like a blocking, which can make the program continue to do other things. And we have no ideas on where to add operation after this function. Therefore, we are stucking at this.

We would sincerely appreciate it if you could give us some hints or suggestions.

https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L415-L420 =||= Thanks for your interest!

Updating the context menu manually would be one option. However, the ""proper"" JavaFX way would be to listen to the changes in the linked files. However, this automatic update should work in principle - but it doesn't for some reason.
I would start investigating this issue by debugging how often/ when https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/fieldeditors/LinkedFilesEditor.java#L217 is called. Then go up the chain and check when these methods are called:
https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/util/ViewModelListCellFactory.java#L190
https://github.com/JabRef/jabref/blob/7cb7ea60324932723db22fcd1964e26f73f7d9b4/src/main/java/org/jabref/gui/util/ViewModelListCellFactory.java#L161 =||= Many thanks for your guidance, we understand this issue better.

After re-syncing today, we find this bug seems to be solved due to issue [# 6381](https://github.com/JabRef/jabref/pull/6381). After downloading completed, the context menu will update immediately. And a new entry will be added but not overwrite. Sorry for not syncing this project in time. 

Please point out if there is any misunderstanding. Thanks a lot!
 =||= I think @btut still noticed some issues in his comment https://github.com/JabRef/jabref/pull/6381#discussion_r420556932
Maybe you can work together on the remaining issues? =||= We will try to work on the remaining issues. Thanks. =||= I'd be happy to!
The issue that I am having is that it would be nice to somehow let the user know that the file is still being downloaded. Otherwise people may wonder why the file entry is missing while actually the file is not downloaded yet.
@Xuanxuan-Zou feel free to join the discussion in #6381  =||= I noticed that the ContextMenu for the FileEditor is not using the factory methods, we normally use for JabRef menus.
Take a look at `gui/maintable/RightClickMenu.java` for an example. Maybe this is worth some programming time. 😉  =||= Thanks for your reminder！We will try to. 😃  =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= "Fixed context menu of linked files not updated"Fixes #5777 
This should hopefully fix the bug about the context menu.
Can someone please test it with a file download. I just now don't have a proper file link at hand.

![grafik](https://user-images.githubusercontent.com/50491877/101564948-53faf780-39cc-11eb-8267-e0ed6670f779.png)

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus12/09/20, 08:28:11 AM
7176.07178Shared Databases: creating new entries does not work, importing existing libraries does"Disclaimer: I hope I do not missed important information within the tutorials...

Setup:
- OS: Windows10 64-Bit
- JabRef version tested: 5.1 and 5.2 (09.12.2020) against PostgreSQL
- PostgreSQL: 12 and 13
- Java 1.8.0_261-b12

Steps done:
- starting the postgreSQL service -> creating database ->creating user for database (all done by pgadmin4, localhost)
- starting JabRef -> open shared database -> save to local backup -> changing standard file directory -> start creating entries with""plus""-button (articles)

Expected behaviour:
Two new entries are created and I filled in the minimal needed information for articles. Both are shown correctly within JabRefs UI. I saved the entries and closed JabRef. There were no error messages shown. Expected behaviour: after reopneing the shared database my entries are loaded and presented and the backup-file is written accordingly.

What happened:
After restarting JabRef automatically connected to the PostgreSQL server. However: there are no entries inside the shared database as well as the backup-file.

What I tried:
I tried importing a locally stored database into the shared one. This worked as expected. After closing and opening the shared-database all imported entries are shown and can be edited. However still no new single entries can be created or edited.

I checked the PostgreSQL databases content and had the following findings:
At the first connection between JabRef and PostgreSQL three tables are created

- public.ENTRY (shared_id | type | version)
- public.FIELD (entry_shared_id | name | value
- public.METADATA (key  value)

METADATA is written and restored correctly (database type and fileDirectory).
ENTRY is written correctly, if the ""plus""-button is used shared_id is increased by one, type is updated and version is set to one. Works with import feature to.
FIELD is written correctly if the import to database feature is used: entry_shared_id equals  ENTRY.shared_id and the entries are created. However, if ""create new entry"" is used nothing is written to FIELD, but only to ENTRY. The import feature respects the shared_ids and numerates according to ENTRY.

In consequence this leads to empty databases and backup-files if the import local database feature is not used.

Maybe this is connected to #7159 or the Java version? It is still unclear to me, why it works using the import feature but does not when creating single entries.

I am unsure where to get the logfile if no error is given.""Thanks for the issue report. I will look into this later. =||= @ksos01  Thanks for the report. I could reproduce it and fix it.
Can you please test this version?
https://builds.jabref.org/pull/7178/merge/ =||= @Siedlerchr Hi, I tested the linked build against PostgreSQL 12 and 13. Adding new entries now works from importing as well as the ""plus"" button. I tested it for multiple entry types as well after disconnecting and reconnecting to the database.

Thank you very much for your efforts! I will further test it the coming weeks, if I find something strange I will let you know. =||= "Fix newly added entry not synced to db"Fixes #7176 
Should also fix #6944 

Newly added entries have empty fields; don't update the field table to prevent SQL Exception
Fix shared entry not found by id
use left outer join for this




<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr12/14/20, 07:17:25 PM
7127.07191Additional Short DOI fatal exception cases: java.lang.IllegalArgumentException: <string> is not a valid DOI/Short "```
JabRef 5.2--2020-11-26--f1a2fa7
Windows 10 10.0 amd64 
Java 14.0.2
```

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Summary
---------

JabRef produces fatal exceptions for files containing non-DOI-related strings such as `10:51` (a timestamp) and `10/B(C)/15` (an arbitrary designation/ID)

The ShortDOI parsing subsystem was improved in #6920 to fix failure cases, but it appears there are additional cases and strings (probably an arbitrarily high number) that produces fatal exceptions.

Given the issues associated with arbitrary strings in arbitrary documents, I suspect it is unlikely sustainable in the long-term to fixed pattern match, particularly if the behaviour of the system for failing cases, remains a fatal exception from which the user must manually recover (ie: identify the document containing the string, and exclude it from import).

I propose the behaviour be changed to fall-through (not fail). If it is desirable to not lose the failing semantics, files/entries may potentially be with a note or status that the parsing resulted in a null result, though I'm not sure that is particularly valuable.

Steps to reproduce the behavior
---------------------------------
1. Prepare local PDF files with contents that contain strings that produce exceptions (see below)
2. Create `New library`
3. Run `Tools` -> `Search for unlinked local files`
4. `Browse` to folder containing local files -> `Scan` -> `Import`

Log Files
---------

<details>
  <summary>Log File</summary>
  
```
java.lang.IllegalArgumentException: 10/B(C)/15 is not a valid DOI/Short DOI.
	at org.jabref@5.2.298/org.jabref.model.entry.identifier.DOI.<init>(Unknown Source)
	at org.jabref@5.2.298/org.jabref.model.entry.identifier.DOI.findInText(Unknown Source)
	at org.jabref@5.2.298/org.jabref.logic.importer.fileformat.PdfContentImporter.importDatabase(Unknown Source)
```
</details>

<details>
  <summary>Log File</summary>
  
```
java.lang.IllegalArgumentException: 10:51 is not a valid DOI/Short DOI.
	at org.jabref@5.2.298/org.jabref.model.entry.identifier.DOI.<init>(Unknown Source)
	at org.jabref@5.2.298/org.jabref.model.entry.identifier.DOI.findInText(Unknown Source)
	at org.jabref@5.2.298/org.jabref.logic.importer.fileformat.PdfContentImporter.importDatabase(Unknown Source)
```
</details>""Hi,
I wrote the short-doi improvement you mentioned.
The strings _10/B(C)/15_ and _10:51_ by themselves should not be interpreted as short dois anymore. I will look into it and try to find out what's wrong.
 =||= I have detected the problem. Line 78 in DOI.java:

`+ ""(?:\\s/?)""                       //   /10/ab12 or  10/ab12  (but not eg ""2020/10/ab12"")`

I will create a pull request... =||= Thank you @PremKolar, I'll test latest master with #7191 applied to confirm resolution =||= "Fix Short DOI error"
Fixes #7127 

In issue #6920 the detection of exact short dois was improved. This was relevant where short dois were misplaced under the wrong field of an entry. This did not affect the method `public static Optional<DOI> findInText(String text)`, which looks for dois _within_ text (not exact matches). 
With this commit, I have carried the improvements over to the _within-text_ detection. I had to make the detection more stringent, to avoid mis-detections for cases like _bla bla 10:30 bla bla_ or _bli blubb 10/12/2020 blibb blabb_ etc. Short dois within text will now only be detected if there is any _doi_ or _urn_ within the substring. E.g. any of the following will be detected:

- doi:10/12ab
- /urn:doi:10/12ab
- doi.org/10/1234
- doi.org/ab123 (shortcut doi)
- etc..

I also introduced the concept of _shortcut dois_ to the in-text detection. (e.g. _doi.org/xyz123_)

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Nikolaus KoopmannPremKolar12/14/20, 09:45:31 PM
7203.07207PdfContentImporter: java.lang.StringIndexOutOfBoundsException: String index out of range: 3"### JabRef Version

```
JabRef 5.2--2020-12-14--e9be339
Windows 10 10.0 amd64 
Java 14.0.2
```

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

### Summary

JabRef PDF Importer crashes attempting to process a PDF file

 * PDF Source: [21Lucy Anna Smith MSc Thesis 2015.pdf](https://github.com/JabRef/jabref/files/5713479/21Lucy.Anna.Smith.MSc.Thesis.2015.pdf)

### Additional Details (if relevent, obtained via Adobe  Acrobat)

 * PDF Producer: GPL Ghostscript 8.70 
 * PDF Version: 1.3 (Acrobat 4.x)
 * Tagged PDF: No

### Steps to Reproduce

1. `Lookup` -> `Search for unlinked local files`
2. Select PDF file attached to this issue -> `Import`

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
java.lang.StringIndexOutOfBoundsException: String index out of range: 3
	at java.base/java.lang.StringLatin1.charAt(Unknown Source)
	at java.base/java.lang.String.charAt(Unknown Source)
	at org.jabref@5.2.343/org.jabref.logic.importer.fileformat.PdfContentImporter.getEntryFromPDFContent(Unknown Source)
	at org.jabref@5.2.343/org.jabref.logic.importer.fileformat.PdfContentImporter.importDatabase(Unknown Source)
	at org.jabref@5.2.343/org.jabref.logic.externalfiles.ExternalFilesContentImporter.importPDFContent(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.externalfiles.ImportHandler.importAsNewEntries(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.externalfiles.FindUnlinkedFilesDialog.startImport(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.externalfiles.FindUnlinkedFilesDialog.lambda$initialize$8(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.control.Dialog.setResultAndClose(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.control.DialogPane.lambda$createButton$3(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.win.WinApplication._enterNestedEventLoopImpl(Native Method)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.win.WinApplication._enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.Application.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.EventLoop.enter(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.stage.Stage.showAndWait(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.control.HeavyweightDialog.showAndWait(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.control.Dialog.showAndWait(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.externalfiles.FindUnlinkedFilesAction.execute(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.actions.JabRefAction.lambda$new$3(Unknown Source)
	at org.jabref.merged.module@5.2.343/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module@5.2.343/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.control.MenuItem.fire(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.doSelect(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.scene.control.ContextMenuContent$MenuItemContainer.lambda$createChildren$12(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>"Fix pdf content importer exception if DOI is empty"Fixes #7203 
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr12/19/20, 01:50:43 PM
3925.07208"Integrity check should not list ""abbreviation detected""""Issue persists in latest dev master.

JabRef version 4.1 on Windows 7


Steps to reproduce:

1. Perform integrity check on database with abbreviated (MEDLINE or ISO) journal entries
2. There will be a warning for every abbreviated journal entry found

This should not be listed as an integrity problem since the current way JabRef handles common journal abbreviations is exactly by replacing the entire string in the Bib(La)Tex entry with the abbreviated one, so this behavior is expected.

Suggested solution: Scratch the integrity warning and replace the yellow warning icon when editing such entries with an info icon.""Hello if this is up for grabs I would like to tackle it. Is there any more documentation on the issue that I can familiarize myself with? =||= Hi, thanks for your interest!
You can have a look here to set up your workspace and the general workflow:
https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md

If you have futher questions, just ask us here or in our gitter chat at https://gitter.im/JabRef/jabref =||= An additional issue which could be tackled in the same fix are journals where name and abbreviation are the same. For example the journal ""Science"" as abbreviated ""Science"" and therefore always gets listed as a problem during integrity check. =||= Since I just wanted to file an issue, but found this one here: Has there been any progress made on this issue? =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Science still gets a yellow warning mark in Jabref 5.1, issue not resolved. =||= Confirming issue on latest master

```
JabRef 5.2--2020-12-19--5aa896a
Windows 10 10.0 amd64 
Java 14.0.2
```
For the following `journaltitle`s: Wear, Chemosphere, Energy Procedia, Aquaculture, Zebrafish =||= This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= @tobiasdiez #6502 may be a dupe of this issue and/or #7208 may resolve it. =||= @tobiasdiez Confirming resolution (see screenshot) on:

```
JabRef 5.2--2020-12-20--84c8504
Windows 10 10.0 amd64 
Java 14.0.2
```

![2020-12-22 11_38_17-Integrity check should not list _abbreviation detected_ · Issue #3925 · JabRef_j](https://user-images.githubusercontent.com/1011612/102835243-15af0080-43ee-11eb-88ca-01579a257faa.png)
 =||= "Remove field check for journal abbrev in entry editor"Fixes #3925 

<img width=""513"" alt=""grafik"" src=""https://user-images.githubusercontent.com/320228/102718699-c8e20180-42e9-11eb-89ea-888cde1a8bb7.png"">

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr12/20/20, 05:23:33 PM
6942.07210Regex of University Institution too broad for citekey generation"```
JabRef 5.2--2020-09-22--129c36e
Windows 10 10.0 amd64 
Java 15
```

- [x]  **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

- **Steps to reproduce the behavior:**
    - Add an entry where the author is an institution (other than an university) and contains a term beginning with `uni` (see below for example)
    - Enclose the institution in {}
    - Let Jabref generate the `citekey` as an institution with default settings

- **Expected Behavior**
Generate the `citekey` as a regular institution abbrevation

- **Observed Behavior**
`citekey` is generated as a ""University"" citekey beginning with `Uni` and adding a short form of the abbrevation afterwards

- **Alternative Behavior**
Make use of the `shortauthor` field if present for that entry. `biblatex-apa` for example uses this field as the institution abbrevation, so if wished, one can add the shortauthor field to the respective entrytypes.


**Longer description:**
I tried to add the following two entries and let Jabref generate the `citekey` automatically. 

```
% Encoding: UTF-8

@Report{ICAO2013,
  author      = {{International Civil Aviation Organization}},
  date        = {2013},
  institution = {{International Civil Aviation Organization}},
  location    = {Montréal, Quebec},
  publisher   = {International Civil Aviation Organization},
  shortauthor = {ICAO},
  title       = {Foo},
  type        = {resreport},
}

@Report{UniEuropeanAviationSafetyAgency2019,
  author       = {{European Union Aviation Safety Agency}},
  date         = {2019-12-18},
  institution  = {{European Union Aviation Safety Agency}},
  title        = {Bar},
  type         = {resreport},
  shortauthor  = {EASA},
  organization = {{European Union Aviation Safety Agency}},
}
@Comment{jabref-meta: databaseType:biblatex;}
```

I did not understand why the automatically generation would work for the ICAO entry but would not work for the EASA field (I would have been okay with having EUASA as the `citekey`, as I was aware that the automatic abbrevation would have used the U in the initials of the name). Insted, a completely different key was generated.
I tried to pinpoint the issue and stumbled upon this Regex in the key generation for institutions in brackets.
https://github.com/JabRef/jabref/blob/129c36e24bbd3332832728124ebf27d2462a0300/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L70-L79
To me, the Regex seems a bit broad but maybe this was on purpose. If so, I would be happy if there was an option to somehow have a setting to use the optional shortauthor field if present.
Unfortunately, I'm not skilled enough to implement a fix in a PR but I wanted to point out that this might be an issue.

If someone asks: I do not use the suggested institution abbrevation mentioned [here](https://docs.jabref.org/advanced/fields) as this messes with the institution abbrevation in the `biblatex-apa` package which uses the shortauthor. And even with an added abbrevation behind the full name, the citekey is still wrong.""The regex matches anything that starts with `uni`. This regex would fix your example `(?<![\w\d])(University|Uni)(?![\w\d])` but it only works for the two terms in the middle (university, uni) which means it would only work for institutions written in english. Using a hardcoded list with translations of `university` would work better in this case. We could parse the institution and check if the term `university` is present in any language. Maybe the devs have a better method of solving this? =||= I am by no means an expert on these issues, but my thoughts are,

1. Regarding `shortauthor`, I don't have much of an opinion. Since the institution key, to the best of my understanding, is a heuristic/convenience feature, I don't see the drawback of using it.
2. I'd agree that the regex is a bit on the broad side.

> And even with an added abbrevation behind the full name, the citekey is still wrong.

Oupsie. That is my fault,
https://github.com/JabRef/jabref/blob/c22553352de5e252740f1c8efb728e13fb552995/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L466-L470
the LatexToUnicodeAdapter will interpret the `{(...)}` as a code-block, which gets resolved to `(...)`, which is likely what is going wrong, as it won't be detected as an abbreviation anymore.

> We could parse the institution

I believe the name is being parsed around `,` and later through,
https://github.com/JabRef/jabref/blob/c22553352de5e252740f1c8efb728e13fb552995/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L1241

> (?<![\w\d])(University|Uni)(?![\w\d])

I'd be hesitant against making it too specific as well. I don't really know what a good solution to this is. I'd consider `^univ.*` a possible ""solution"" as well (unless there is an argument for only matching ""Uni""?). Based on https://www.indifferentlanguages.com/words/university it matches in almost the same number of languages. I don't really have an opinion regarding having a hardcoded list. =||= @tmrd993 are you looking into this issue? =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Updates to institution citation keys"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6942. Fixes #7199.

#### TL;DR
Authors only having a last name are abbreviated. #6942 is miss-abbreviated because name parts containing `uni` are assumed to be universities, e.g., `United Airlines`. #7199 is triggers the abbreviation method because, from BibTeX´s point-of-view, the author only has a last name. The name is later removed because Java does not classify the first character as an uppercase letter, hence the heuristic assumes it is an insignificant word. E.g., `{eBay}` gets removed, `{JabRef}` doesn't.

#### Background
Authors that are institutions can have very lengthy citation keys unless they are abbreviated in some fashion. The abbreviations are generated in

https://github.com/JabRef/jabref/blob/6718c08cf5ace13365da2ce4c1509e4817eb34bc/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L1243

which is based on a heuristic that tries to determine a suitable abbreviation based on the content of the specific author.

Issue #6942 is due to a regexp being overly broad when determining if an author is a university.

Issue #7199 was created from #6706 where I changed how a company/institute is identified. In previous versions of JabRef, an author is an institute if it is enclosed in curly brackets (e.g., `{JabRef}`), and I changed it to also include authors' who only have a last name (e.g., `JabRef`), which means that the author in issue #7199 is treated as an institution.
This would not have been an issue if it wasn't because the heuristic for creating a citation key identifies words starting with a lowercase letter in the author's name as an invalid part of an institute abbreviation. Think of the ""and"" in ""National Aeronautics and Space Administration""). Since the author's name only consist of one ""word"", it is removed. (this is why the workaround @tobiasdiez mentioned does not work, even if it should)

#### Changes for
#6942
1. Identifying universities in the authors' names is arbitrary. The new regexp matches `^uni(v|b|$).*` instead of `^uni`. There are other suggestions in #6706 that can be implemented instead.
2. The inline institute abbreviation should now work again (e.g., `{JabRef ({JB})}` should produce `JB`)
3. I am ignoring the `shortauthor` field, because I find it unclear how and when to use the field (e.g., for multiple authors).

#7199 
1. I'll change how institutes are identified, so that the `Author` must only have a last name and that last name must contain a space. This should only happen if the `Author` originally were enclosed in brackets. In all other cases I'd argue it is acceptable to not abbreviate the author since the name is only one word.
    1. Drawbacks to this approach is that I am using the LatexToUnicodeAdapter to remove braces, and it doesn't like unbalanced ones.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

#### Todo

- [x] Log a warning for unbalanced brackets in `Author`s
- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2712/28/20, 12:20:34 PM
7199.07210Chinese author of essay reference section displays extra space"Hi, i am using JabRef (JabRef 5.2--2020-12-14--e9be339 Linux 5.9.0-4-amd64 amd64 Java 15.0.1) on Debian sid.

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

- [ ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

After importing the Chinese essay, manually insert a space or comma, such as 杨 秀群, the citationkey will generate successfully, but the Reference section of essay will display ""杨 秀群 ""(there is a space between杨 and 秀群) , not ""杨秀群"".
How could you resolve this problem, thanks!

![image](https://user-images.githubusercontent.com/20276890/102434509-db410e80-404f-11eb-9dfd-b30176ad962b.png)
The JabRef screenshot.
![image](https://user-images.githubusercontent.com/20276890/102434584-00ce1800-4050-11eb-9154-5223bd731e88.png)
The corresponding pdf file screenshot.
And the bibliography file is 
![image](https://user-images.githubusercontent.com/20276890/102434748-573b5680-4050-11eb-93b6-219aee066216.png)""Hi @xiaodongcentury! I just have some follow up questions,

> citationkey will generate successfully

You mean without space/comma?

> Reference section of essay will display

1. Do you mean the preview section in JabRef?
2. Do you mean the citation key?

> comma

Are you referring to an [ideographic comma](https://en.wiktionary.org/wiki/ideographic_comma)? Should it not be included? =||= Thanks.
Without space/comma, the citationkey will not generate successfully. 
What i mean is for most Chinese article, the author name of reference section will be a whole, such as ""杨秀群"", but not ""杨 秀群"". For example:
![image](https://user-images.githubusercontent.com/20276890/102621902-3facbc80-417b-11eb-83d0-b6715445cc1b.png)

But now, I insert the citation item to a tex file from the JabRef, the pdf file generated will display""杨 秀群"", but not ""杨秀群"", the former has a space between last name and first name of a Chinese name. =||= If it is the author's name in the pdf file that has an extra space, I don't think there is anything you can do in JabRef. The reason why you need that space/comma in the authors' name field has to do with how BibTeX/biblatex handles name (there are a lot of post/discussions on the topic, e.g., https://nwalsh.com/tex/texhelp/bibtx-23.html) and cannot be changed by JabRef.

In theory the gb7714 package should deal with this situation correctly, but I can't find enough English documentation to say for sure. I'd recommend that you ask in a TeX/LaTeX/Biblatex forum regarding the usage of xeCJK/gb7714 because I am not familiar enough with their use to help you out =/ =||= A potential workaround could be to remove the space after generating the key or to use a different citation key pattern but I'd guess that might lead to further issues later on. =||= Thanks!
From the https://www.fosshub.com/JabRef-old.html, i download the jar file ([v5.0-alpha] JabRef Platform independent runnable JAR),
![image](https://user-images.githubusercontent.com/20276890/102679434-db294600-41ea-11eb-823e-4b2e15706725.png)
then open it.
Although there is no space/comma in Chinese author name, the citationkey is successfully generated, and the pdf file generated displays correctly according to gb7714-2015.
![image](https://user-images.githubusercontent.com/20276890/102679646-0b251900-41ec-11eb-8696-20da095577f7.png)
I just change ""韦金育"", but do not the other author names.  =||= Good that you got it to work! In the interest of keeping it working for future releases, I hope you don't mind answering some further questions?

* You are using the default citation key pattern `[auth][year]`?
* The correct citation key should be `秀群2020` (**not** `杨秀群2020`)?
* When the citation key does not generate successfully, do you mean that the resulting key is `2020`? =||= Thank you!
The old version ([v5.0-alpha] JabRef Platform independent runnable JAR) works, but not the newer master version (JabRef 5.2-1).
1. yes, i am using default citation key patter.
2. the citation key of old version is 杨秀群2020, and the pdf file generated displays correctly. While the mater version is 秀群2020, and the pdf file generated displays incorrectly.
3. If there is no space/comma between first name and last name of Chinese author in Required field, the resulting key is 2000, the [auth] doesn't display. If add a space/comma to author name, the resulting key is 秀群2020, but the generated pdf file displays"" 杨 秀群"", there is a space in the author, which is not correct according to gb7714-2015, in that Chinese author name has no space. =||= I did a bit of research, but it seems there is no agreed standard of how to put Chinese names in bibtex. By default the naming parsing of biblatex and JabRef assume that name parts are separated by space. Maybe the strategy outlined at
https://github.com/plk/biblatex/issues/416#issuecomment-738335693 works for you. =||= Thanks!
But the older version ([v5.0-alpha] JabRef Platform independent runnable JAR) does works.
I'll check your solution whether it works. =||= We have improved the author parsing from 5.0 to 5.1, and made it align better with biblatex. So the reason why it works in the alpha is actually a bug that was fixed later (unfortunately it leads to problems for chinese names).

Another idea would be to put the name (or parts of it?) in braces, e.g. `{杨秀群}` or `杨{秀群}`. That's actually a syntax used for organizations (e.g. `{United Nations}`) but maybe it works for your case as well. =||= Ah, that's a lot of work to do.
Anyway, thank you. =||= I don't have time to write a full answer to this right now but you both are right.
The handling was improved but there is a bug because the name in this specific instance is considered by Java to start with a lower case letter (and therefore gets removed).
I'll submit a PR for this and another issue in ≈ 8 hours. =||= @k3KAW8Pnf7mkmdSMPHz27 Thanks =||= @tobiasdiez it seems like the {} doesn't work, whether whole name or part of it.
![image](https://user-images.githubusercontent.com/20276890/102713849-e0c77e80-4305-11eb-8afc-1b04a02cbfb6.png)
The generated key only contain year, there is no author.
 =||= Thanks to @k3KAW8Pnf7mkmdSMPHz27  this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= Thank you ALL!
The JabRef 5.3--2020-12-28--78b08b5 works perfectly with Chinese names.
Thanks again.
And i believe this issue will be closed. =||= "Updates to institution citation keys"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #6942. Fixes #7199.

#### TL;DR
Authors only having a last name are abbreviated. #6942 is miss-abbreviated because name parts containing `uni` are assumed to be universities, e.g., `United Airlines`. #7199 is triggers the abbreviation method because, from BibTeX´s point-of-view, the author only has a last name. The name is later removed because Java does not classify the first character as an uppercase letter, hence the heuristic assumes it is an insignificant word. E.g., `{eBay}` gets removed, `{JabRef}` doesn't.

#### Background
Authors that are institutions can have very lengthy citation keys unless they are abbreviated in some fashion. The abbreviations are generated in

https://github.com/JabRef/jabref/blob/6718c08cf5ace13365da2ce4c1509e4817eb34bc/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L1243

which is based on a heuristic that tries to determine a suitable abbreviation based on the content of the specific author.

Issue #6942 is due to a regexp being overly broad when determining if an author is a university.

Issue #7199 was created from #6706 where I changed how a company/institute is identified. In previous versions of JabRef, an author is an institute if it is enclosed in curly brackets (e.g., `{JabRef}`), and I changed it to also include authors' who only have a last name (e.g., `JabRef`), which means that the author in issue #7199 is treated as an institution.
This would not have been an issue if it wasn't because the heuristic for creating a citation key identifies words starting with a lowercase letter in the author's name as an invalid part of an institute abbreviation. Think of the ""and"" in ""National Aeronautics and Space Administration""). Since the author's name only consist of one ""word"", it is removed. (this is why the workaround @tobiasdiez mentioned does not work, even if it should)

#### Changes for
#6942
1. Identifying universities in the authors' names is arbitrary. The new regexp matches `^uni(v|b|$).*` instead of `^uni`. There are other suggestions in #6706 that can be implemented instead.
2. The inline institute abbreviation should now work again (e.g., `{JabRef ({JB})}` should produce `JB`)
3. I am ignoring the `shortauthor` field, because I find it unclear how and when to use the field (e.g., for multiple authors).

#7199 
1. I'll change how institutes are identified, so that the `Author` must only have a last name and that last name must contain a space. This should only happen if the `Author` originally were enclosed in brackets. In all other cases I'd argue it is acceptable to not abbreviate the author since the name is only one word.
    1. Drawbacks to this approach is that I am using the LatexToUnicodeAdapter to remove braces, and it doesn't like unbalanced ones.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

#### Todo

- [x] Log a warning for unbalanced brackets in `Author`s
- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2712/28/20, 12:20:34 PM
7200.07224Exception upon copy (org.jabref.preferences.PreferencesService.getFieldWriterPreferences())"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.2--2020-12-14--e9be339
Linux 5.9.13-200.fc33.x86_64 amd64 
Java 15.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. select entry
2. press `CTRL+C` to copy / alternatively, use context menu to copy

The entry is not copied - cannot paste it anywhere. 
However, copying the raw bibtex code works.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
java.lang.NullPointerException: Cannot invoke ""org.jabref.preferences.PreferencesService.getFieldWriterPreferences()"" because ""this.preferencesService"" is null
	at org.jabref@5.2.343/org.jabref.gui.ClipBoardManager.setContent(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.maintable.MainTable.copy(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.LibraryTab.copy(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.edit.EditAction.lambda$execute$0(Unknown Source)
	at java.base/java.util.Optional.ifPresent(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.edit.EditAction.execute(Unknown Source)
	at org.jabref@5.2.343/org.jabref.gui.maintable.MainTable.lambda$setupKeyBindings$11(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene$KeyHandler.process(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene.processKeyEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/javafx.scene.Scene$ScenePeerListener.keyEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler$KeyEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleKeyEvent$1(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.View.handleKeyEvent(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.View.notifyKey(Unknown Source)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.2.343/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>"Encountered this issue as well. Reason is that at when Globals.ClipboardManager gets initialized in Globals before the JabRefPreferences are initialized.  =||= Fix ClipboardManager <-> Prefs ordering"Fixes #7200

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Oliver Koppkoppor12/21/20, 08:28:38 PM
5833.07228"""New Group"" > ""Specified keywords"" > ""Generate groups for author last names"" not working properly""When selecting ""New Group"" > ""Specified keywords"" > ""Generate groups for author last names"", providing any group name, entering ""author"" in the field ""Field to group by"" and clicking ""OK"", then hardly any (or even none) of the generated groups with the authors' last names have entries in it. Most badges have the value 0.

I'm using the latest JabRef 5 master build on Ubuntu 16.04.

![image](https://user-images.githubusercontent.com/3658393/72471460-050c0880-37e3-11ea-972b-953820fb8631.png)""This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= Issue still persists. Description has been updated. =||= Seems like JabRef creates group for the first name as well, but only fills the ones for the last names. I don't really understand how it's working  =||= Should I look at it as part of the solution to #6394? I haven't looked at the details of this one but it would surprise me if it does not have overlap with the issues I am having updating the count badge and refreshing the content.

The scope of #7173 keeps expanding ""naturally"" anyway 😧  =||= @k3KAW8Pnf7mkmdSMPHz27 If you find some time, it would be great. =||= ~There are multiple issues with getting this working properly and they are unfortunately not connected to #6394 so I won't continue with it for now, but these are my notes for now~

1. The first problem is the use of `KeywordListSearchStrategy` in `WordKeywordGroup`, this means that any author with a "","" before/after the last name is ignored (e.g., `Turing, Alan` should not be listed under ""Turing"")
    1. This particular issue can be relieved by using `StringSearchStrategy` but then other parts of the name will be matched as well, not only last names
    2. I believe there are issues where names containing latex also doesn't work, but I have not confirmed it (e.g., `Gödel` ≠ `G{\""{o}}del`)
        3. Is there a drawback to `KeywordList` being latex-free? (I don't remember how the global search deals with this issue)
2. The use of `BibEntry#getLatexFreeField` is not going to work in all cases (e.g., institutes)
3. #7129 should also be a problem in this issue (I have not confirmed this either)

If there is a point to making the ""groups for author last names"" slightly more accurate, switching to ""StringSearchStrategy"" is done by changing a boolean value. But it does not make the group work ""properly"". =||= "Fixes miss-parsed names in `AutomaticPersonsGroup`"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #5833.

This fixes the parsing and matching of authors' last names. It is much slower than the previous solution, and uses more RAM, but I think that is hard/impossible to avoid. However, it is possible that the caching solution can be made smarter, but I leave the decision if it should, to the reviewers 😁 

An alternative solution is moving the caching to `AuthorList`, it will make it easier to modify/improve at a later point in time. ~It will make this PR take quite a bit of more time as I'd like to make `AuthorList` extend `List` in that case. See https://github.com/JabRef/jabref/pull/6552#issuecomment-641377508 for a much longer discussion on that topic.~
Given that the only thing that should be cached are the last names (and always latex-free), perhaps it has more in common with the autocomplete functionality. I have not looked into that.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2701/18/21, 07:48:13 PM
7197.07232"Modify the ""Directory not found"" alert to show a more descriptive path ""### Problem Description
When you try to download a pdf (`Lookup -> Search full documents online `) and you don't have a file directory set, an alert tells you that you should follow a path to set your file directory:` Preference -> File`. But that path is not correct because to set the file directory you need to follow this path: `Options -> Preference -> Linked Files -> Main File Directory`

### Suggested solution
Change the text in the alert to show a more descriptive path
Path suggested:  `Options -> Preference -> Linked Files -> Main File Directory`

### Additional context
How to make the alert to appear: `Lookup -> Search full documents online ` (Be sure that you don't have a file directory set)
![issue1](https://user-images.githubusercontent.com/32725639/102267344-fe947e00-3ed6-11eb-9374-69e5f9175883.png)
![issue2](https://user-images.githubusercontent.com/32725639/102267348-005e4180-3ed7-11eb-8305-1495482cd856.png)


If you follow the path that the alert suggests to set the file directory you will not find that option
![issue3](https://user-images.githubusercontent.com/32725639/102267352-018f6e80-3ed7-11eb-9db0-fc4183f565e2.png)


 You need to follow this path to change the file directory: `Options -> Preference -> Linked Files -> Main File Directory`
![issue4](https://user-images.githubusercontent.com/32725639/102267359-03593200-3ed7-11eb-8e0f-11995685db91.png)
""Please be aware that a main file directory can be empty and you can add relative paths in the library properties. https://docs.jabref.org/setup/databaseproperties#override-default-file-directories =||= Is this up for grabs? I would like to contribute @Siedlerchr 😄  =||= @devjuliet Welcome to JabRef, feel free to work on that issue!
see our contribution.md for getting started.
If you have any questions, just ask here or in our gitter channel =||= "Add a more descriptive path when Directory cannot be found"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
**Issue problem:** When you try to download a pdf (Lookup -> Search full documents online ) and you don't have a file directory set, an alert tells you that you should follow a path to set your file directory: Preference -> File. But that path is not correct because to set the file directory you need to follow this path: Options -> Preference -> Linked Files -> Main File Directory

**Suggested changes:** change the message to: **_Main file directory not set! Check the Preferences (Linked files) or the Library properties._**

Screenshots:
<img width=""517"" alt=""Screen Shot 2020-12-23 at 7 55 15 PM"" src=""https://user-images.githubusercontent.com/33851952/103056159-6b53ec00-4559-11eb-9f94-194f162a4d47.png"">

Fixes #7197

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Julieta Navarrodevjuliet01/11/21, 06:45:41 PM
7237.07240Translation of Traditional Chinese"I would like to translate the JabRef user interface into Traditional Chinese. Could you please add the new language on Crowdin for me?

I have tried to contact @koppor on Crowdin but don't get response.""We have four choices in crowdin for it

* Chinese Traditional
* Chinese Traditional, Hong Kong
* Chinese Traditional, Macau
* Chinese Traditional, Singapore

I opted for the first one!

Looking forward for your contribution! ✌️ =||= I think we need to add the new language also to the jabref language enum  =||= https://github.com/JabRef/jabref/blob/d83ef740486dc2f1b72f7e625ad2a22b019280de/src/main/java/org/jabref/logic/l10n/Language.java =||= @Hsins I added Traditional Chinese now as well to the user Interface language selector and configured the crowdin sync correctly. The next (developer) version will then contain this changes. =||= "Add Traditional Chinese"Fixes #7237
https://www.oracle.com/java/technologies/javase/jdk8-jre8-suported-locales.html

Need to look into crowdin how to map it

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr12/25/20, 03:51:26 PM
7239.07243Export to MODS format fails (wrong dash in pages field)"JabRef 5.2--2020-12-24--6a2a512
Windows 10 10.0 amd64 
Java 14.0.2

- [ ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

This error happens on the v5.2 stable.

Steps to reproduce the behavior:
1. Export to MODS xml
2. error (see below)

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.NumberFormatException: For input string: ""R404–R405""
	at java.base/java.lang.NumberFormatException.forInputString(Unknown Source)
	at java.base/java.lang.Integer.parseInt(Unknown Source)
	at java.base/java.math.BigInteger.<init>(Unknown Source)
	at java.base/java.math.BigInteger.<init>(Unknown Source)
	at org.jabref@5.2.60000/org.jabref.logic.exporter.ModsExporter.addPages(Unknown Source)
	at org.jabref@5.2.60000/org.jabref.logic.exporter.ModsExporter.export(Unknown Source)
	at org.jabref@5.2.60000/org.jabref.gui.exporter.ExportCommand.lambda$export$2(Unknown Source)
	at org.jabref@5.2.60000/org.jabref.gui.util.BackgroundTask$1.call(Unknown Source)
	at org.jabref@5.2.60000/org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source)
	at org.jabref.merged.module@5.2.60000/javafx.concurrent.Task$TaskCallable.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)

  ```
</details>""Can you please paste the bibtex entry?
it seems like you have a non number in the page field  =||= Hm, that might be difficult, it is my whole bibtex library (1000+ records). 

That being said, why JabRef requires numbers in the page field? It is often the case that some introduction chapters are using roman numbering (distinguishable from the rest of the manuscript)... =||= Good question. Need to look which field exactly is producing the error. 
Maybe you can paste the entry with the field pages containing the value 
R404–R405?
 =||= This was helpful, the article is this: [https://www.sciencedirect.com/science/article/pii/S0960982216303189](https://www.sciencedirect.com/science/article/pii/S0960982216303189). The PDF is accessible, and indeed it is pages R404–R405.

My biblatex source looks (as a result of parsing from Scopus) as follows:

```
@Article{hodgson_best_2016,
  author       = {Hodgson, J.C. and Koh, L.P.},
  date         = {2016},
  journaltitle = {Current Biology},
  title        = {Best Practice for Minimising Unmanned Aerial Vehicle Disturbance to Wildlife in Biological Field Research},
  doi          = {10.1016/j.cub.2016.04.001},
  number       = {10},
  pages        = {R404–R405},
  url          = {https://www.scopus.com/inward/record.uri?eid=2-s2.0-84969917083\&partnerID=40\&md5=abcc0a0b0b1dabb6993e963deb1e5073},
  volume       = {26},
  abstract     = {The use of unmanned aerial vehicles (UAVs), colloquially referred to as 'drones', for biological field research is increasing [1-3]. Small, civilian UAVs are providing a viable, economical tool for ecology researchers and environmental managers. UAVs are particularly useful for wildlife observation and monitoring as they can produce systematic data of high spatial and temporal resolution [4]. However, this new technology could also have undesirable and unforeseen impacts on wildlife, the risks of which we currently have little understanding [5-7]. There is a need for a code of best practice in the use of UAVs to mitigate or alleviate these risks, which we begin to develop here. © 2016 Elsevier Ltd.},
  file         = {:article/hodgson_best_2016.pdf:PDF},
  groups       = {Drones},
  keywords     = {Scopus,dbsearch},
  timestamp    = {2018-11-02},
}
```

 =||= Note: the field `pages` contains an utf8 en-dash (–) and not a LaTeX en-dash (--). =||= Thanks for the hint @mlep. 
@DOFfactory 
It works fine if you replace the dash by either a minus `-` or a double minus `--`.
Normally, the Normalize page numbers (Quality, Cleanup)  should take care of the replacement, but I discovered that there is a bug. The replaced value never got returned.
 =||= Cool, thanks! =||= "Fix Normalize pages formatter not replacing dashes"Fixes #7239

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr01/04/21, 04:37:24 PM
7226.07258Style of checkboxes while searching in preferences"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.2--2020-12-22--d83ef74
Mac OS X 10.15.7 x86_64 
Java 15.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
When searching for an option in JabRef preferences, the checkbox has incorrect styling. The ""unchecked"" behaviour, while distinct from the ""checked"", is confusing since it still has a checkmark in it. This is a visual bug, the behaviour is still correct.

Steps to reproduce the behavior:
1. Open Preferences
2. Search for an option that uses checkbox (e.g. autosave)
3. Observe a checkbox highlighted in red, check/uncheck it

**Highlighted unchecked box**
<img width=""901"" alt=""Highlighted unchecked box"" src=""https://user-images.githubusercontent.com/2598631/102887013-28442c80-4424-11eb-873f-c6538a11e83a.png"">
**Highlighted checked box**
<img width=""901"" alt=""Highlighted checked box"" src=""https://user-images.githubusercontent.com/2598631/102887023-2bd7b380-4424-11eb-9dde-b5747348c6f3.png"">""Hi, I would like to help contribute to fixing this issue. Thanks. =||= @faeludire  Welcome to JabRef. I suggest you take a look at the PreferencesSearchHandler and the PreferencesDialog.css
You probably need to adjust the rule for the searchHighlight in the css or define a more specific one for checkboxes
The checkbox style schema is explained here: 
https://stackoverflow.com/a/44889214
 =||= Thanks to @faeludire  this is now fixed. =||= It is appreciated @faeludire ! =||= "Fix style of highlighted checkboxes while searching in preferences"<!--
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support auto-linking there.
-->
What:
- Fix style of checkboxes while searching in preferences

Why:
- The ""unchecked"" behaviour, while distinct from the ""checked"", is confusing since it still has a checkmark in it. This is a visual bug, the behaviour is still correct.

Fixes #7226 

<img width=""1104"" alt=""Screenshot 2020-12-28 at 12 24 14"" src=""https://user-images.githubusercontent.com/17176053/103214862-9055af80-4909-11eb-8baf-f2bd3a389a42.png"">

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Fiyinfolu Eludirefaeludire12/28/20, 02:18:48 PM
7194.07269Move file to file directory ceased working"JabRef 5.2--2020-12-13--931c4cb
Linux 5.9.13-200.fc33.x86_64 amd64 
Java 15.0.1

I have attached files in the entry editor. I should be able to use the contextual menu to move the file into the ""file directory"". But that moving is disabled. I did not change my settings.

But note, drag&drop file on entry table line still works.""JabRef 5.2--2020-12-24--6a2a512
Linux 4.15.0-126-generic amd64 
Java 15.0.1

Same problem. =||= still a problem in
JabRef 5.3--2020-12-28--020cc97
Linux 5.9.16-200.fc33.x86_64 amd64 
Java 15.0.1

@Siedlerchr, sorry I presume far too many issues are calling for attention. However, I allow myself to mention you here because I  think this issue should be given some priority because it affects file handling, which I presume to be quite key for users. Now that 5.2 is out (congratulations!), this issue might be considered as very relevant for a fix for 5.3. =||= Thanks for mentioning this issue. Slipped through the attention. Fortunately, it was only a simple issue. Fix is on it's way =||= This is now fixed in the latest master version. =||= confirmed.
JabRef 5.3--2020-12-30--afdb194
Linux 5.9.16-200.fc33.x86_64 amd64 
Java 15.0.1 =||= "Only disable  move to file dir when path equals"Fix equals in path method
Fixes #7194

The dialog is now only disable when the file is already in the file directory

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr12/30/20, 12:43:04 PM
7272.07273Application Dialogs Open on Wrong Display"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.2 on Windows 10

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Open JabRef on a system with at least two displays
2. Move the application main window to a non-primary display (as far as I can tell, JabRef always opens on the primary display on launch)
3. Perform an activity spawning a dialog (tested: *Help*->*About*, *New entry*, and a few others, but I'm suspecting that it works for all dialogs)
4. The dialog will always appear on the primary display, regardless of the position of the application main window (My suspicion is that the `initOwner(Window)` method is never called when initializing new dialogs. This usually results in the new window appearing on the display the application opened at startup.)

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->"Thanks to @faeludire  this is now  fixed in the latest master version. =||= Fix for application dialogs opening in wrong displays"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
What:
- Fix for issue with application dialogs opening in the wrong display

Why:
- Dialog opens in the display the application opened at startup (usually the primary display), regardless of the current position of the application main window

- This is a draft to discuss the approach taken.

Fixes #7272 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Fiyinfolu Eludirefaeludire01/02/21, 04:34:40 PM
7177.07292Java Exception when trying to open the preferences with missing custom theme"> `JabRef 5.2--2020-12-09--d1fb9e2`

When trying to open the preferences dialogue a java exception occurs:
`Cannot load org.jabref.gui.preferences.preferencesdialog`""Could solve the problem: Obviously, a broken path of the custom theme CSS (due to a change of the name of the folder containing the custom theme CSS) caused the exception. After reinstalling the release version, having been able to change all paths in this version (this version didn't have the custom theme feature) and reinstalling the current master branch version, all works again. Maybe a better handling of broken paths could prevent such exceptions? =||= We'll will take a look at this. Unfortunately, I believe this problem may sit deeper in the javafx library, since the css' are handled there... We will see. =||= I'm having a look at this as a first contribution attempt.

I was able to reproduce the issue as reported:

1. Made up a nonsense path in the custom theme text box of the preferences dialog.
2. Restarted app successfully.
3. Clicked again on menu Options -> Preferences
4. Dialog box pops up with uncaught exception in JavaFX application thread including stack trace.

Observation: the bad CSS path does not affect the application overall. Only previews are impacted (and the preference dialog has a preview tab).

After some code inspection and debugging, I can see the reason for this. JabRefPreferences has logic to check if the custom css file exists, and store it as a URL if it does, otherwise no URL is stored in the Optional value. This is what the application uses in general. However, the preview viewer bypasses this logic, and directly parses the path, which is exposed by a getter.

That getter is also used for saving the settings, so I think it should stay.

I successfully tried out a tentative fix: adding a second getter that exposes the URL as processed by JabRefPreferences. Only if this URL is set, will the preview viewer use it. However, I would like to take a bit more time to consider if there is a better solution, and get my head around the contribution guidelines, before I submit a PR.

One final thought. I think that the preferences tab should show a validation hint when the file is missing. It wouldn't have prevented this case, because as I understand it, the path was correct at the time of configuration and changed only later. Still, I think it would help the user when their CSS file is moved or mistyped. I am happy to create a separate issue for this and give it a go; I don't think it should block the fix of the uncaught exception. =||= Hi @docrjp , thank you very much for diving into the code and creating a fix. Can you please create a pull request with your changes, so it's somewhat easier to discuss them?
 =||= "Fixed exception about missing custom css file"Fixes #7177 ""Java Exception when trying to open the preferences with missing custom theme""

After some testing I found that there two main paths that could result in the same failure: the CSS file being missing before application start, and changing the name of the CSS file while the application is running. To resolve the latter, I think the best approach is to check the custom CSS file exists.

This is already done for the Theme as used for most of the application, however the Preview Viewer has it's own CSS URL logic.

Rather than add file checking logic to the Preview Viewer, I have refactored and moved the theme logic of Preview Viewer into Theme, so that all CSS URL logic is encapsulated in that class. I have also put the logic that checks that the URL is valid and filters it to an Optional.empty() into one new method, additionalCssToLoad(), in place of the field of the same name. This ensure that the file existence check is performed in all cases, rather than just at construction of the Theme object.

I have kept the Optional<URL> field so there should be no overhead to this approach for the built in themes, and only the minor and necessary overhead of file existence checking for the custom theme.

For manual testing I checked:

- previews and overall appearance for default theme are correct, after restart
- previews and overall appearance for dark theme are correct, after restart
- previews and overall appearance with a custom theme with a valid name are correct, after restart
- live changes to the custom theme still work, in general and for preview
- rename custom theme so that the configured theme is no longer correct, **before application start**. The preview is no longer themed but there is no error.
- the preview theme is restored when the filename is restored to the configured value, without restarting the application
- Restart. Rename custom theme so that the configured theme is no longer correct, **while application is running**. The preview remains themed (typically sized CSS themes are data URL embedded and so survive file removal).

These tests were run both with the Gradle run task, and on the built binary (rationale: gradle presents the dark theme as a file, while the binary has it built in on a jrt: URL, so the results could be different).

PR tasks:

- [X] Change in CHANGELOG.md described (if applicable)
- [X] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [X] ~~Screenshots added in PR description (for UI changes)~~ (N/A)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Rob Plattdocrjp01/10/21, 03:38:33 PM
7291.07296Rendering/conversion of π in Abstract/preview panel"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->
JabRef 5.3--2021-01-04--eff250b
Linux 5.4.0-58-generic amd64 
Java 15.0.1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [X ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

In the abstract and comment fields, the LaTeX command $\pi$ renders ""pi"" rather than the expected ""π"" (lower case pi) in the preview panel. However, the LaTeX form of all other Greek letters, including Π (upper case pi) renders correctly in the preview panel. If ""π"" is present in the abstract field and Convert -> ""Unicode to LaTeX"" is used, ""π"" is converted to ""$\phi$"" and is rendered as ""φ"" in the preview panel.

Note: While I tested the rendering of all LaTeX Greek letters I did not test the conversion of all Greek letters from Unicode to LaTeX

Steps to reproduce the behavior:
1. Enter ""$\pi$ in Abstract field.
2. Observe ""pi"" in preview panel.

Steps to reproduce the behavior:
1. Paste π into Abstract field.
2. Select Convert -> ""Unicode to LaTeX"" in context menu
3. Observe ""$\phi$"" in Abstract field.
4. Observe ""φ"" in preview panel."Thanks for reporting that issue. Thanks to @k3KAW8Pnf7mkmdSMPHz27 it's now fixed in the latest development version (available in approx 30 minutes)  =||= Thanks for the quick response, this fixed the issue! =||= Thank you for the detailed description, it makes it easier to narrow things down 😉 =||= Fix typo in conversion for small pi"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #7291. There is a typo in the unicode <-> latex <-> HTML conversion.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] ~Change in CHANGELOG.md described (if applicable)~
- [x] ~Tests created for changes (if applicable)~
- [x] Manually tested changed features in running JabRef (always required)
    - [x] Enter ""$\pi$ in Abstract field.
    - [x] Convert -> ""Unicode to LaTeX"" in context menu
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] ~[Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.~"Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2701/04/21, 09:50:03 PM
7202.07298Add support to add an entry from zbmath.org via its zbMATH id"JabRef supports adding entries via different kind of ids (https://docs.jabref.org/collect/add-entry-using-an-id). Right now, it is not possible to add an entry from [zbmath.org](https://zbmath.org) via its zbMATH id, however it is possible to add entries by searching its database (https://docs.jabref.org/collect/import-using-online-bibliographic-database). 

I would like to implement the possibility to add entries directly via their zbMATH id. I think this can be done quite easily by adjusting the zbMATH-Fetcher. I think this would be interesting as zbmath will become open access from January 2021 and thus no subscribtion for it is needed anymore.""Welcome! I think this will be a really cool thing for JabRef to have.
For getting started check out our [contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) 
The existing zbMath fetcher is here https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/importer/fetcher/ZbMATH.java

You probably just need  to implement the IDBasedFetcher /IdBasedParserFetcher  interface to make it work.

We're looking forward for a PR from you :) =||= Thank you for the information. I already had a look at the code and found the zbMath fetcher :-) I won't have that much time this year but I will work on the fetcher the first week of January. =||= Hi, 
I implemented the IdBasedParserFetcher interface for the zbmath fetcher and it worked on my Computer (with `gradlew run.`)
However, I have a problem testing jabref. Even on the master branch (without my changes) neither `gradlew test `nor `gradlew check` work. The ""How to test"" (https://devdocs.jabref.org/getting-into-the-code/testing) did not help me. What do I have to do in order to be able to test jabref?
Best
Isabel =||= Hi, it should be fine to just run the specific test for the fetcher from your IDE. 
The Github Actions automatically execute the tests when you create the PR, so you can see the results there
 =||= "Adjust zbmath fetcher"I implemented an IdBasedParserFetcher for the zbMATH fetcher [#7202]. 

fixes #7202 

![zbMATHidfetcher](https://user-images.githubusercontent.com/68125288/103646573-303eb900-4f5a-11eb-8c0b-a2454137a8cf.png)


Running tests with gradle does not work locally on my computer, thus I create a draft pull request to run the tests. As I only changed the zbMATH fetcher, only zbMATHTest.java should be affected 

- [ x] Change in CHANGELOG.md described (if applicable)
- [ x] Tests created for changes (if applicable)
- [ x] Manually tested changed features in running JabRef (always required)
- [ x] Screenshots added in PR description (for UI changes)
- [ x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository. -> Will create a pull request to update documentation."ibe-31401/07/21, 12:17:45 PM
7264.07302Missing Key Bindings"JabRef 5.2--2020-12-24--6a2a512
Windows 10 10.0 amd64
Java 14.0.2

- [ ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

This issue is present on the v5.2 stable.

Steps to reproduce the behavior:
1. Open Edit > Read Status > ...
2. Open Options > Customize key binding > Edit
3. One cannot edit the key bindings present in the menu

It would be great if all the menu options could be bound to a keystroke combination

![image](https://user-images.githubusercontent.com/10846169/103234481-1260cb00-4940-11eb-90a1-e57ca9f32d04.png)
![image](https://user-images.githubusercontent.com/10846169/103234634-74213500-4940-11eb-8390-2f56318c326a.png)
"Thanks to @Shadow-Devil  this is now implemented in the latest master. You can now define custom keybindings for these actions =||= Added Keyboard shortcuts (clear/set read status)"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

 Added Keyboard shortcuts with defaults for 
 - Clear read status (alt+C)
 - Set read status to read (alt+R)
 - Set read status to skimmed (alt+S)

Fixes #7264

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Felix SchnabelShadow-Devil01/07/21, 12:12:29 PM
4342.07338Finding files with non-alphabetical characters in title"JabRef version 4.3.1 on Windows 10 64-bit (I don't have administrative rights to install developer snapshots, e.g. version 5.0)


I like to use regular expression search when linking local files and use the following:
**/.*[title].*\\.[extension]

As far as I know, that should search in the directory and subdirectories of the main file directory for files that contain the title and the proper extension (.pdf). Contain, right? The file name does not need to start with the title.

However, choosing an article in my bibliography and pressing F7 does nothing (status bar simply tells that it finished and found nothing).

What does F7 (Automatically set file links) do? I've tested with many files and get the same result, even when making sure the file name contains no special characters or anything like that.""Okay, after a bit more playing around, it seems that a regular dash is a character that makes F7 fail. In fact, it seems characters in the title (in the file name) that are not regular letters make F7 fail.
__________
Example 1
File: **BEEMAN & PINCUS - PHYS REV 1968 - Nuclear Spin-Lattice Relaxation in Magnetic Insulators.pdf**

Title in JabRef:
**Nuclear Spin-Lattice Relaxation in Magnetic Insulators**

F7 does not find the file, _**unless**_ I change the filename to
**BEEMAN & PINCUS - PHYS REV 1968 - Nuclear Spin Lattice Relaxation in Magnetic Insulators.pdf**.
(Removing the dash in ""Spin-Lattice"".)
__________
Example 2
File: **GUO ea - INORG CHEM COMMUN 2010 - Ferroelectric Metal Organic Framework (MOF).pdf**

Title in JabRef:
**Ferroelectric Metal Organic Framework (MOF)**

F7 does not find the file, _**unless**_ I change the filename to
**GUO ea - INORG CHEM COMMUN 2010 - Ferroelectric Metal Organic Framework MOF.pdf**.
(Removing the parentheses around ""MOF"".)
__________
Note: in both cases, I did not need to change the title in JabRef, only in the filename. =||= Could you check, if it was really a `-`? Perhaps it was one of the UTF-8 symbols similar to `-`. =||= I did by removing it and then retyping with the regular dash. No change. F7 only linked when I removed the dash completely. And in my second example, there is no dash in the title, but parentheses. =||= I installed the 5.0-dev--snapshot on my personal computer (also Win10-64) and repeated the process. Same thing happens. F7 can't find the file unless I remove the dash (or the parentheses in my second example). =||= Out of curiosity, I tested to instead link using the bibtexkey, i.e., using **/.[bibtexkey].\.[extension] as the regular expression. I chose to invoke dashes in my bibtexkeys so the examples above got the key Beeman-PR-1968 and I also renamed the local pdf file to this (Beeman-PR-1968.pdf).

No issue in finding the file this time when invoking ""Automatically set file links"" (F7) even though it contains a dash.

So... why can't a title search handle dashes and other characters but a bibtexkey search can? =||= An update to this two years old issue;

I have recently come back to JabRef and this issue still persisted in 5.1. Since I had over a 1000 files that were unlinked, I decided to revert to an old version to try things.

Recap of issue: I use the Regular Expression `**/.*[title].*\\.[extension]` to link files. In the versions since September 2018, JabRef could not find files that contained non-alphabetical (and non-numerical? not sure...) characters in the title. See examples above. Even a simple dash could not be handled.

I removed 5.1 and found and installed JabRef version 3.6.

Marking all of my over 2000 entries and hitting F7 (Automatically set file links), it worked like a charm! Suddenly, my list of over a 1000 unlinked files was down to less than 200! The remaining unlinked files were easily fixed (e.g., title has a colon but filename has a semicolon since Windows don't allow colons in filenames, or filename was truncated due to a very long title, stuff like that).

I don't know what changed between version 3.6 and (presumably) version 4.x to hinder a regular expression search containing non-alphabetical characters in the title (it didn't have an issue with such characters in the bibtexkey then but I didn't test it now).

Now that my entire library is linked, I'll happily come back to the latest version 5.2.

I'll change the title of this issue to a better description. =||= May I ask whether there is test data for this somewhere?

- .bib file
- .pdf files with the filenames

Maybe, three BibTeX entries and three unlinked files. =||= [bib_pdfs.zip](https://github.com/JabRef/jabref/files/5169896/bib_pdfs.zip)
I hope uploading a ZIP with PDFs and a .bib file works.

One of the files (YOUNG ea ...) has numbers in the title. I tried F7 with it and it worked, so numbers should not be an issue. =||= @tb77phd  I could reproduce the issue and it seems it's done on purpose. The ""dash"" character, addtional whitespace and other unwanted latex chars
https://github.com/JabRef/jabref/blob/e955c46850e4738830198a889c3f09870b88ab30/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L570-L573 =||= Is the issue that the title is needed unchanged? As @Siedlerchr says, `[title]` makes modifications to the title, `[TITLE]` should not, so perhaps that works? (note that it does not ""resolve"" latex)  =||= Actually, would `[TITLE:latex_to_unicode:regex("":"","";"")]` work? =||= Huh, I was not aware of a difference between [title] and [TITLE]. I tried right now and it worked when the issue was a dash in the filename. It did not work when the issue was parentheses. Thanks for the suggestion! =||= 🤦 that does make sense, I missed that. If I am not mistaken, the expanded bracket will be interpreted as regexp, so parenthesis will be seen as a regexp matching groups and probably you won't get any result at all if they are unmatched.

~In your current version you **might** be able to solve it using either ""\\\\Q...\\\\E"" or ""\Q...\E"" (match the content between literally instead of as a regexp), e.g., `\\Q[TITLE:latex_to_unicode:regex("":"","";"")]\\E`, see https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/util/regex/Pattern.html#quote for more details. Even if this workaround works (which I am not completely sure of),~ I believe this must be changed in the code.
You can escape parenthesises and brackets `()[]` using the `:regex("""","""")` modifier, but I would not recommend it as it'll stop working as soon as this is fixed (a couple of days). =||= > Huh, I was not aware of a difference between [title] and [TITLE]

I am not sure if it was supposed to be a difference, but it is. And I am trying to make it official by sneakily making people use it 🤫  =||= >> Huh, I was not aware of a difference between [title] and [TITLE] 
> I am not sure if it was supposed to be a difference, but it is. 

This is NOT in our documentation. See https://docs.jabref.org/setup/citationkeypatterns.

> A field marker generally consists of the field name enclosed in square braces, e.g., `[title]`

I know at https://docs.jabref.org/setup/citationkeypatterns#bibentry-fields, we use upper case letters. IMHO this is wrong. It should be `[title]`, `[date]` there, too.

The implementation having a difference between `title` and `TITLE` comes from following feature:

https://docs.jabref.org/setup/citationkeypatterns#title-related-field-markers

> `[title]`: Capitalize all the significant words of the title, and concatenate them. For example, An awesome paper on JabRef becomes AnAwesomePaperonJabref
> `[fulltitle]`: The title with unchanged capitalization.

This was introduced **before** https://github.com/JabRef/jabref/pull/3670. Via https://github.com/JabRef/jabref/pull/3238, I could track some hint at b1a9593f1d7ae969f66dc5dde18db4d878676170.

> To satisfy the old behaviour without breaking the makeLabel code, it was
> necessary to introduce the '[fulltitle]' field, which leaves the title
> unchanged, and to change the test for '[title]' expansion, which now
> removes hyphens (""-"").

I could not find the original commit.

Nevertheless, this behavior is really odd.

I see a mixture of ""special"" field names, which should not appear in normal BibTeX. However, `authors` is very close to `author` in BibTeX.

## Solution options

Option A: Maybe, we should convert **all** field markers to modifiers. We can keep the ""old"" behavior for compatibility reasons.

Option B: In case we do not want to change the whole behavior, we should solve the ""overlapping"" behavior at `title`/`TITLE`. We should rename `title` to `sigtitle` (""significant title""), use the current `title` magic.

Option C: In addition to Option B, we should remove **all** non-signifcant words. IMHO `AnAwesomePaperonJabRef` is wrong, because the capital letters do not help here.

## Side notes

- At https://github.com/JabRef/jabref/pull/3238 one sees our ""old"" file format pattern, before we decided to use the (easier) BibTeX key patterns for filenames, too.
- It is not clear to me whether our documentation is wrong, I think ""For an entry with the title An awesome paper on JabRef, the citation key pattern Title[title:abbr] will provide the key TitleAAPoJ."" is wrong, it is `[TITLE:abbr]`, isn't it?


 =||= > I know at https://docs.jabref.org/setup/citationkeypatterns#bibentry-fields, we use upper case letters. IMHO this is wrong. It should be `[title]`, `[date]` there, too.

Imo, the motivation for keeping the difference between `title` and `TITLE` is that a user doesn't necessarily expect, nor can deal with, a raw bibentry field. \_**I**\_ have tripped on the difference between [authors] and [author], and given how much time I have spent in that part of the source code, that is saying something. `[authors]` vs `[AUTHOR]` on the other hand.

> * It is not clear to me whether our documentation is wrong, I think ""For an entry with the title An awesome paper on JabRef, the citation key pattern Title[title:abbr] will provide the key TitleAAPoJ."" is wrong, it is `[TITLE:abbr]`, isn't it?

* `Title[title:abbr]` -> `TitleAAPoJ`
* `Title[TITLE:abbr]` -> `TitleAapoJ` (raw field, capitalization is kept)

> I could not find the original commit.

I believe it is https://github.com/JabRef/jabref/pull/2610 =||= Summary: Documentation is wrong. Only upper case field names are used to access the fields of the Bibentry directly. Thus, I updated the documentation accordingly:


![grafik](https://user-images.githubusercontent.com/1366654/105100654-e1daff80-5aad-11eb-8431-24b45cc1158c.png)


Long answer:


>> I know at [docs.jabref.org/setup/citationkeypatterns#bibentry-fields](https://docs.jabref.org/setup/citationkeypatterns#bibentry-fields), we use upper case letters. IMHO this is wrong. It should be `[title]`, `[date]` there, too.
> Imo, the motivation for keeping the difference between `title` and `TITLE` is that a user doesn't necessarily expect, nor can deal with, a raw bibentry field. _**I**_ have tripped on the difference between [authors] and [author], and given how much time I have spent in that part of the source code, that is saying something. `[authors]` vs `[AUTHOR]` on the other hand.

Thefore, I raised Option A in my last comment, which I would prefer for strong typing. (This probably also raised https://github.com/JabRef/jabref/pull/2610#issuecomment-285385425).

![grafik](https://user-images.githubusercontent.com/1366654/105099464-059d4600-5aac-11eb-8af5-9c63de6fb6d8.png)

The case sensitivity of the field name drives me mad somehow. - Sinse I don't see another solution and I think, the lower case fields are used more often then the plain ones, it is OK to go ahead.

Question: I can also use `[year]` as there is a fallback on the Bibentry plain fields, isn't it?

> I believe it is #2610

Yeah, that's it.

With my doc update, the related issue https://github.com/koppor/jabref/issues/237 can be closed.
 =||= > Question: I can also use `[year]` as there is a fallback on the Bibentry plain fields, isn't it?

Yes. The ""special field markers"" are matched case-sensitive, while ""bibentry plain fields"" are matched case-insensitive. What you are seeing with upper case fields is the fallback, because it does not match a “special field marker” (yes, it is ugly).

> Only upper case field names are used to access the fields of the Bibentry directly. Thus, I updated the documentation accordingly:

My bad, and thank you for the update. I guess I wanted to keep the original vocabulary that a ""special field marker"" is a ""field marker"" even if it is not a bibentry field, just based on a bibentry field. =||= > Thefore, I raised Option A in my last comment, which I would prefer for strong typing. (This probably also raised [#2610 (comment)](https://github.com/JabRef/jabref/pull/2610#issuecomment-285385425)).

I don't understand ""Option A"". Do I interpret you correctly as in that all ""special field markers"" should be (re)implemented as a ""field marker"" followed by modifiers?

---

> > Huh, I was not aware of a difference between [title] and [TITLE]
> 
> I am not sure if it was supposed to be a difference, but it is. And I am trying to make it official by sneakily making people use it 🤫

Imho opinion, the current behavior isn't great, but I can't think of a better one. JabRef's purpose, in my opinion, is to hide the ugly truth of BibTeX/biblatex/latex from their users. Auto-generated filenames should be using latex-free Unicode whenever it is possible, and if the user doesn't want that, they should be able to access the text-fields themselves and do whatever they want with them. Therefore I view all lower-case field markers as ""nicely behaved ones"" and upper-case ones as ""don't use unless you have to"".

Long term, I'd like to break the behavior of `[title]`, and replace it with `[TITLE:latex_to_unicode:title_case]` when it is used for file names. This will break the behavior of almost all the current bracketed patterns (because they don't resolve latex). I just haven't had time to submit any PR regarding this because my priorities regarding JabRef contributions are,
1. Overleaf
2. Update Groups for JavaFX
3. Update BracketedPattern =||= > > Thefore, I raised Option A in my last comment, which I would prefer for strong typing. (This probably also raised [#2610 (comment)](https://github.com/JabRef/jabref/pull/2610#issuecomment-285385425)).
> I don't understand ""Option A"". Do I interpret you correctly as in that all ""special field markers"" should be (re)implemented as a ""field marker"" followed by modifiers?

That's what I meant. 

> Imho opinion, the current behavior isn't great, but I can't think of a better one. JabRef's purpose, in my opinion, is to hide the ugly truth of BibTeX/biblatex/latex from their users. Auto-generated filenames should be using latex-free Unicode whenever it is possible, and if the user doesn't want that, they should be able to access the text-fields themselves and do whatever they want with them. Therefore I view all lower-case field markers as ""nicely behaved ones"" and upper-case ones as ""don't use unless you have to"".

We should put your text in the documentation 👍. I could only write it shorter (but deleted it after reading your text).

> Long term, I'd like to break the behavior of `[title]`, and replace it with `[TITLE:latex_to_unicode:title_case]` when it is used for file names.

Random thoughts on that: Maybe, it will difficult to maintain if it behaves differently than when used at BibTeX keys. However, I think, it is good that BibTeX keys are not automatically Unicode. Because of bibtex. Maybe, the user has to do use `:unicode_to_latex` somehow... This somehow refs: https://github.com/JabRef/jabref/issues/160

All in all: Go ahead :)

Nevertheless, I would like to discuss `title` vs. `camel` with you. As programmer, I find it strange that ""filler words"" are just appended. In case they would be deleted, that would make sence. But just appended. Why not removing it at `[title]`? 😇 

>     1. Overleaf

This is nearly done. I was nearly finishing it. Please investigate https://github.com/koppor/jabref/pull/445. The main think, I was working on, is this comment: https://github.com/JabRef/jabref/pull/2866#issuecomment-388264343. - We can surely have a chat on that (gitter, skype, ..., ?) =||= Count me in for sharelatex,/overleaf I can help as well. I wrote most of the code back int the days. =||= Regarding the bracketed patterns/citationkeys etc., my take-away is that when I can find the time for it (not anytime soon), I'll open up a PR expanding on what I think is reasonable, why, and what I'd like to do about it. I don't think there's much more to say that does not lead to needless details that might suit better in the context of an actual PR.

> Nevertheless, I would like to discuss `title` vs. `camel` with you. As programmer, I find it strange that ""filler words"" are just appended. In case they would be deleted, that would make sence. But just appended. Why not removing it at `[title]`? 😇

I am not sure of what you are referring to. I believe both `[title]` and `[camel]` only remove things. Could you give an example or context?

> We should put your text in the documentation 👍. I could only write it shorter (but deleted it after reading your text).

Regarding default/ADVANCED field usage? In my opinion, shorter text tend to be better. 😛  =||= >> Nevertheless, I would like to discuss `title` vs. `camel` with you. As programmer, I find it strange that ""filler words"" are just appended. In case they would be deleted, that would make sence. But just appended. Why not removing it at `[title]`? 😇 
> I am not sure of what you are referring to. I believe both `[title]` and `[camel]` only remove things. Could you give an example or context?

Sure. Do you know the term `paperon`?

> `[camel]`: Capitalize and concatenate all the words of the title. For example, An awesome paper on JabRef becomes AnAwesomePaperOnJabref
> `[title]`: Capitalize all the significant words of the title, and concatenate them. For example, An awesome paper on JabRef becomes AnAwesomePaperonJabref

I find `AnAwesomePaperOnJabref` much more readble. For me, `AwesomePaperJabref` would also be OK. But not `AnAwesomePaperonJabref`. What is `Paperon` for a word?
 =||= > What is `Paperon` for a word?

Fair enough. We can look at this now or when/if I get time to address the bracketed pattern class. I don't really have a preference regarding it 😛 

> For me, `AwesomePaperJabref` would also be OK

Perhaps one could change the documentation/default to use `[shorttitle]` for citation keys? Perhaps implement `[shorttitleN]` where `N` is the number of words, and the default is 3 to maintain compatibility with the current use?

> Nevertheless, I would like to discuss `title` vs. `camel` with you.

I am not very well versed on camel case/proper case/title case and their ilks. I think in this instance [""proper case""](https://www.oracle.com/webfolder/technetwork/data-quality/edqhelp/Content/processor_library/transformation/proper_case.htm) would make us both happy-ish.
It would become `An Awesome Paper On Jabref` when used to generate a file name, and since all spaces are removed for citation keys, it would automatically be converted to camel case.
 The issue would be honoring protective brackets, `{JabRef}`. =||= "Fix expansion of bracketed expressions in RegExpBasedFileFinder"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
#### Fixes #4342

#4342 contains two issues.
1. The bracketed pattern `[title]` does not refer to the StandardField title, but a ""special"" pattern intended to give nicer output (this is why dashes don't work, see https://github.com/JabRef/jabref/issues/4342#issuecomment-742722875). It is intended and can be **avoided** by using `[TITLE]`.
2. An expanded bracketed pattern is interpreted as a regexp (which it should not). This is why parenthesizes doesn't work. A pattern that expands into `(abc)` will match `abc`, but not `(abc)`.
 
If the expanded bracketed pattern contains characters that have a special meaning in regexp (such as a parenthesis and brackets), it becomes a problem.
An entry with the title `Regexp from [A-Z]` and the bracketed expression `[TITLE]` would match a file titled `Regexp from B`, but not a file named `Regexp from [A-Z]`.

#### The goal of this PR

Match files whose expanded bracketed pattern includes symbols that can be miss-interpreted.

1. **Regex**: All expanded brackets will match literally,  using `Pattern.quote`. I don't see a reasonable use-case for allowing a bracket to expand into an actual regex.
2. **Cleaned filenames** _In addition_ to matching the regularly expanded brackets, they will also match cleaned file names (it will find files containing both `ACM/IEEE-CS` and `ACM_IEEE-CS`).

**Note**: Regex can still be used outside of the bracketed patterns. (except for character classes, since they will be interpreted as a bracketed pattern)

#### Issues neither addressed in this PR nor the current master
1. Files that get truncated due to length
2. Character classes in the RegExpBasedFileFinder. In the following pattern, `**/.*[title][a-z]+.*\\.[extension]`, `[a-z]` is treated as if it is a bracketed pattern
3. BracketedExpressions are only expanded in the file name, **not in the directory name**.

#### Checklist

- [x] ~Check if parts can be replaced by a glob (<a href=""https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/nio/file/FileSystem.html#getPathMatcher(java.lang.String)"">getPathMatcher</a>)~
- [x] Improve finding and parsing bracketed expressions?
- [x] Fix this particular use case using regexp literals (\Q\E in the regexp)
    - [x] ~Add type-safety to the expanded bracket (return a compiled Pattern when it is supposed to be a RegularExpression)~
- [x] Check that the expanded bracketed expression result in a correct filename, and/or convert it into one. (avoid issues finding JabRef generated filenames 😱 )
    - [x] ~Add test case for an expression that would result in a JabRef corrected filename (""ACM/IEEE-CS Information Technology Curriculum"" -> ""ACM_IEEE_CS Information Technology Curriculum"")~ I don't think this can be done reliably within the scope of this PR
    - [x] ~Make sure a warning appears in the debug log if a filename/dirname is expected to be too long~
    - [x] ~Refactor `FileUtil.createFileNameFromPattern` so the same code is used~ I don't think this can be done reliably within the scope of this PR
- [x] Add JavaDoc, improve variable names and comments 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required) **The manual test was only performed with the example given in https://github.com/JabRef/jabref/issues/4342#issuecomment-686606696**
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2701/24/21, 07:53:45 PM
7344.07352Unhandled exception when searching with regular expression"JabRef version 5.2 on Windows 10, Ubuntu 20.04.1, Mac OS Catalina 10.15.7

Steps to reproduce the behavior:
1. Open some library with several entries.
2. Click on first article.
3. Set on regular expresion checking in the search field.
4. Paste this **10.1126/science.1188363** or **13.155//1313** or 13/ input value in search field.


![JAB-98](https://user-images.githubusercontent.com/61587204/104621514-7c8fa480-5690-11eb-9736-09c0403d0c49.jpg)

![JAB-99](https://user-images.githubusercontent.com/61587204/104621577-8d401a80-5690-11eb-8030-8eb00ea74c62.jpg)

![JAB-101](https://user-images.githubusercontent.com/61587204/104621547-85807600-5690-11eb-8ea7-a720ba9f8b37.jpg)

""Thanks to @k3KAW8Pnf7mkmdSMPHz27  This should now be fixed in the latest development version (ready in roughly half an hour)

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Yeah, in the newest build it works. =||= "Fixes regex (again) in PreviewViewer"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #7344.

Apparently I did not pay enough attention while copy-pasting in Intellij, or checking the method again afterward. See https://github.com/JabRef/jabref/pull/7073#pullrequestreview-526937823 for the original regex. Note that to reproduce it in the current JabRef you need to have the preview pane open while searching.

Sorry about this one. 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2701/15/21, 07:58:11 PM
4508.07355"export to Harvard/RTF incorrect when name contains (properly escaped) ""and""""JabRef version 3.2

- [x] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists (JabRef-5.0-dev--snapshot--2018-11-23--master--742cfce7e.jar)

The export filter interprets all ""and""s in name fields as breaking multiple names even when the author is properly escaped with curly braces.

Steps to reproduce the behavior:
1. consider the bibtex
```bibtex
@article{test,
  author = {{Organization for Economic Cooperation and Development}}
}
```
2. verify that latex+biber properly output ""Organization for Economic Cooperation and Development"" as author
3. export with Harvard filter and find ""Organization for Economic Cooperation & Development"".
4. change name to {{Organization for Economic Cooperation and Development and other stuff}} and rejoice at ""for Economic Cooperation, O.; Development & other stuff""

Clearly, the export plugin does not honor the double curly braces that should prohibit breaking names.

I haven't found any other way of quoting the ""and"" to avoid breaking the name into multiple names that are then recombined, either.""Probably related to the latex to Unicode converter which kills the braces  =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= the problem persists exactly as before. =||= @Siedlerchr , @github-actions , can you please re-open this? apparently us standard humans can't re-open our own issues in the github tracker... thanks. =||= @timobaumann  So the problem exists in the latest development version 5.x? =||= yes. Downloaded most recent:
JabRef 5.3--2021-01-13--4d8e4f0
Linux 5.4.0-53-generic amd64 
Java 15.0.1 
JavaFX 15.0.1+1

put the bibtex from above, export to Harvard. =||= Okay, thanks for the feedback. I think I found the problem.
The RTFChars kills the extra braces and it's called before the authors formatter. That's why the authors formatter treats this as two different authors and cuts it at the ""and""
 =||= @k3KAW8Pnf7mkmdSMPHz27  I just debugged this and found out that the  AuthorLastFirst formatter somehow kills the braces for corporate authors `{Organization for Economic Cooperation and Development}` is turned into `Organization for Economic Cooperation and Development` and the AuthorAbbreviator then think it's two different authors.
`\format[AuthorLastFirst,AuthorAbbreviator,RTFChars]{\author} (\year),` 

Do you have any idea why the AuthorsFormatter does remove the braces? =||= In theory `Author.java` should kill the braces. I have considered extending it with an `Author.isInstitute` method. Perhaps that would work? (assuming that is the issue for you)
Is it a similar issue to
https://github.com/JabRef/jabref/blob/e173764f2ee6ac17cad359935bf57cfa4bef85ea/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L493-L510
?

My best guess is that it is being removed because there is no-where in JabRef's code-base where it is explicit what the use of the String is (e.g., should it be viewed by the user -> remove braces, should it be exported or used by bracketed patterns -> keep braces). =||= I am sorry, I don't have more time to look at it today. I can take a closer look tomorrow. https://github.com/JabRef/jabref/pull/7301#discussion_r555309584 might also relate to the issue. =||= @k3KAW8Pnf7mkmdSMPHz27  Yes, there needs to be a kind of check for institution that is  the problem here. =||= I don't understand what the correct output format should be for this issue. Should the output contain curly braces?

If I understand `\format[AuthorLastFirst,AuthorAbbreviator,RTFChars]{\author}` correctly It will call both `AuthorLastFirst` and `AuthorAbbreviator` (left to right?)?
~Barring the problem with wether or not this should be possible, they are both based on `Author.getLastFirst` so calling them in a row shouldn't be done (perhaps there is a different LayoutFormatter that does the trick or maybe it is time for a new LayoutFormatter for this circumstance?).~

~Regarding what to do about the braces being removed, is in my opinion, a different and much longer discussion. Whether or not the braces should be removed is dependent on what the resulting String is supposed to be used for afterwards.~ =||= My current belief regarding the formatters and `AuthorList.parse` is that
1. Formatters always output in a way that can be shown to the user (no BibTeX formatting)
2. `AuthorList.parse` only supports BibTex formatting (with one small extension to allow comma separated authors) =||= Ah okay thanks for the insight. So I will try with only one author formatter and the rtfchars I think the layout file hasn't been touched for years...  =||= @timobaumann This issue is now resolved in the latest master. For other layout based exporters see issue #7356. They need to be adapted to the new AuthorsFormatter Syntax as well =||= Thanks @Siedlerchr ! =||= "Fix harvard exporter by changing AuthorsFormatter"The layout files were still using the old formatter chaining for authors and therefore were responsible for removing braces 
Also fix extension.

Fixes #4508 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr01/18/21, 05:27:58 PM
7354.07357"Field ""urldate"" does not become YearAccessed, MonthAccessed, DayAccessed when exporting to MSWord""JabRef 5.2 2020-12-24
Windows 10 10.0 amd64
Java 14.0.2

- [Yes] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists


Steps to reproduce the behavior:
1. Add online source to library (BiBlaTeX mode on, I couldn't find online or electronic on the default mode)
2. Add urldate using calendar selector
3. Export selected items to MS Word format
4. Import to MS Word, YearAccessed, MonthAccessed, DayAccessed are all empty and I have to manually input the date

I notice in the exported XML, the date I chose earlier is nowhere to be found, so it must be an Export issue.""This should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= It works as intended now, thanks! 

However, MonthAccessed needs to be exported to text rather than numbers. For example instead of ""01"" it should be converted to ""January"". This is standard practice for academic referencing styles, to write out the full month. MS Word also states ""Example: January"" when Month Accessed is selected.

Should I open a separate issue? =||= @Fantazstic  I've just created a follow up fix. It's a simple line change and changing some test files. =||= This should be fixed now as well. Thanks for the report @Fantazstic  =||= I can confirm these bugfixes are working on the master branch, thanks again! =||= "Export urldate to MSOffice"Fixes #7354 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr01/16/21, 07:22:30 PM
6840.07368Offer migration from special fields in keywords to special fields as fieldsRefs https://github.com/JabRef/jabref/issues/6621"Devcall decision: Agenda for 5.3:
- [x] Set default sync to keywords to disabled #6846 
- [x] Understand problems with synchronisation 
- [x] Create migration for keywords =||= @DominikVoigt I have some detailed information in this. Should be a ""Fingerübung"", because of your experience at https://github.com/JabRef/jabref/pull/7334 =||= "Add migration to special field"This PR migrates all occurrences of special field values in the keywords into their respective special fields.
Fixes #6840.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Dominik VoigtDominikVoigt01/19/21, 10:07:18 PM
6994.07379Menu View: Alt+ keyboard shortcuts do not work."JabRef 5.2--2020-10-07--4b1b7b4
Linux 4.9.0-13-amd64 amd64 
Java 15

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

The View menu lists the following shortcuts (among others):
- 'Alt+3' for Groups interface
- 'Alt+0' for OpenOffice/Libreoffice
- 'Alt+4' for Web search

None of them are working.
I am using the default key bindings (and, to make sure, I reset them in the Key binding window).

So, the issue is more general than described in #6646""Hi, I am insteresting in fixing this bug. Can I assign this issue? =||= @Fu188  Sure, go ahead! Make sure to read the [Contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) =||= hanks to @Fu188 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= @tobiasdiez Please, could you re-open the issue?

@Fu188 Thank you for your effort. Unfortunately, the issue continues on my computer.
Let me know if you need additional testing.


JabRef 5.3--2021-02-01--8c3424c
Linux 4.19.0-14-amd64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1 =||= ""fix ""Alt + keyboard shortcuts do not work""""<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
User can use CheckMenuItem shortcut only when they click the tab. That is because the event will not be created until user click the menu in original version. Such that, I create the event when we intial the GUI. In this case, the issue is fixed. Fixes #6994

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Weibao FuFu18801/31/21, 07:56:15 PM
7356.07380Convert layout resources to new authors formatter "While fixing the Harvard exporter, I noticed that all layout files still use the old AuthorsFormatter chaining:

https://github.com/JabRef/jabref/tree/master/src/main/resources/resource/layout

The format for author formatting has changed to https://docs.jabref.org/collaborative-work/export/customexports
 it's now seomthing like `\format[Authors(LastFirst,....),HTMLChars]`

<!-- 

Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <!-- version as shown in the about box --> on <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

All layout files must be checked and the Author and Editor Formatter changed"Replace old AuthorsFormatters with the correct new ones"Fixes #7356

TODO: Add tests 


@k3KAW8Pnf7mkmdSMPHz27  Would be nice if you could take a look if I replaced them correctly

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr02/01/21, 08:36:44 PM
7349.07391"When typing a ""-"" after a long title into web search the application freezes""JabRef 5.3--2021-01-14--e66f5be
Windows 10 10.0 amd64 
Java 14.0.2 
JavaFX 15.0.1+1

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

The following also works with other titles containing ""-"". And also with other search engines. The below example triggers the bug every time:

Steps to reproduce the behavior:
1. Under Web Search -> Select DBLP
2. Type ""Collecting Performance Data with PAPI"" into the web search field
3. Type a ""-"" afterward and now the app does not respond anymore.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  I did not find any log file or information in the event log.
  ```
</details>""JabRef 5.3--2021-01-24--ae43548
Linux 5.10.9-201.fc33.x86_64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1

Weirdly, I get the `unsupported syntax` note even when just typing out `Collecting Performance Data with`. Might be related to https://github.com/JabRef/jabref/issues/7277

![Screenshot from 2021-01-26 17-41-32](https://user-images.githubusercontent.com/20518297/105875483-2579c000-5ffe-11eb-8861-0f88a827f458.png) =||= "Remove unuseful search syntax feedback"This PR removes unuseful feedback from the web search text field, as it is not necessary and provides no advantage.
With the introduction of transformers in #7350, the syntax feedback will be adapted  and provide adequate and useful feedback.

Fixes #7349, addresses #7277.

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Dominik VoigtDominikVoigt02/01/21, 08:42:11 PM
7382.07396Dark Theme visibility of File path"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.3 on Windows 10
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. open the subwindow(?) by double-clicking any item with a working file attachment (indicated with `file = {...}` in bib).
2. Go to the `General` tab and look at the `File` field.
    <img width=""504"" alt=""2021-01-25 00_12_49-test bib – JabRef"" src=""https://user-images.githubusercontent.com/53798617/105648267-842a2700-5ea2-11eb-83cf-f5e7a6c22f99.png"">

Related to #5522 I presume?""It seems that I cannot reproduce the behaviour. The file path is visiable
![image](https://user-images.githubusercontent.com/57991879/106095664-1d8d5d80-616f-11eb-9e84-b305f39bad4a.png)
 =||= Hi,

The orange highlight you have indicating the file cannot be found. Could you please try again with a valid file? =||= "Fixed invisible file path in the dark theme"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
In the original version, the file path is not visually good due to its font color. After a hard debuging process, I find that we don't bind the property of text with ""css"" and then the text color is black by default. Such that, I bind them and change the color the text and it looks wonderful now. Fixes #7382 
<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

**Light Theme**
![image](https://user-images.githubusercontent.com/57991879/106352720-56206900-6320-11eb-93e1-7aa94994cf51.png)

**Dark Theme**
![image](https://user-images.githubusercontent.com/57991879/106352743-8bc55200-6320-11eb-8455-074dd861be0e.png)"Weibao FuFu18801/30/21, 11:22:03 AM
7085.07398Changing font size makes font size field too small"JabRef 5.2--2020-11-04--fcbe9c5
Windows 10 10.0 amd64 
Java 14.0.2

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->
Changing font size makes font size field too small (see screenshot below) 

Steps to reproduce the behavior:
1. Go to Preferences > Appearance and tick ""Override default font setting""
2. Set font size to 12
3. Save and reenter JabRef
4. The font size field show only the ""1"" of the ""12"".

Note that sometime the font size is not changed for the preference dialog and sometime the bug does not appear, but was unable to determine under which conditions this happens.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->
![image](https://user-images.githubusercontent.com/865866/98495306-212fd900-223f-11eb-9521-a0e56da8168a.png)""JabRef is internally using pixels to define widths. A solution would be to change every width indication to 'em'. =||= Is this something that I can change in a custom theme? =||= I was just taking a note for ourself or somebody, who wants to work on this issue. The em indications are dependend on the font size an should automatically scale. There should be plenty of examples on the web about this (eg https://stackoverflow.com/questions/32999605/how-can-i-change-the-base-font-size-in-javafx-8-modena-theme-that-would-cascade#33001277 )
To solve this issue a lot can be done by editing the base.css theme file, but some things are somewhat hardwired in the fxml files and the ui Java sources in the codebase. That's one bad thing about the somewhat old codebase of JabRef, we are working on since some years, to modernize, sort and simplify everything.
If you like to give it a shot make a pull request with your changes. The PR does not have to be perfect and cover everything (although it would be very cool), but we can talk about it as soon it exists or work together on it. =||= There're other similar problems in the preferences, due to the fixed prefWidth. Like in the Entry table, the Colums will be hard to see and set.
![Size_pr](https://user-images.githubusercontent.com/52154597/99199106-0dfa9d00-275a-11eb-9488-190ffc9c62b4.png)
 =||= By the way, in the latest master version this only happens if you leave the preferences window briefly and reopen it, without closing JabRef. That's because when restarting JabRef, the preferences window no longer respects the custom font size.
Is there already an issue for that separate bug? =||= "Fixes issue of Changing font size makes font size field too small"# Description:
As the preferred width for the fontsize spinner under prefrences/appearence was set to a fixed pixel size, I changed it to use the `em` measure instead. A style class called `fontsizeSpinner` was added to `Base.css` with this change. 
Fixes #7085.


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

# Screenshots:
![Skærmbillede fra 2021-01-31 02-33-56](https://user-images.githubusercontent.com/25526684/106372153-19c72a00-636d-11eb-9c4f-e2e0441c55b9.png)"Landi2902/01/21, 07:45:58 AM
7015.07409Secondary sorting: not working for some special fields"JabRef 5.2--2020-10-13--fdaf25a
Linux 4.9.0-13-amd64 amd64 
Java 15

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

In the entry table, entries can be sorted by clicking on the column title (primary sorting). By holding the SHIFT key, a second sorting criteria can be used.
It works with a primary sorting and a secondary sorting on fields like ""Year"", ""Title"", ""Author"", etc.
But if the primary sorting is done on the special field ""Relevancy"", ""Quality"" or ""Print status"", the marked entries are not sorted based on the second sorting criteria. Only the entries that are not marked are sorted.

Steps to reproduce the behavior:
1. open the file jabref-authors.bib (https://github.com/JabRef/jabref/blob/master/src/test/resources/testbib/jabref-authors.bib)
2. display the columns of the specials fields (options -> preferences, tab Entry table)
3. mark a small set of entries with ""Relevancy"", ""Quality"" and ""Print status""
4. sort entries by ""Relevancy"" (or ""Quality"" or ""Print status"") by clicking on the column title, so that the marked entries are at the top of the entry table
5. hold SHIFT and click on the ""Year"" column title (or ""Author"", or ""Title"", etc.)
==> Only the entries that are not marked with the primary sorting criteria are ordered according to the second sorting criteria.

Note: it works for special fields ""Read status"", ""Rank"", and ""Priority"".""@Fu188 : Thank you for fixing this issue and making JabRef a better software. Now, it works as expected!

JabRef 5.3--2021-02-01--66a771c
Linux 4.19.0-14-amd64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1 =||= "Fixed secondary sorting not working for some special fields"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Since we do not set compartor if the special field is ""Relevancy"" or ""Quality"" or ""Print status"", it would not work for secondary sorting. To deal with it, I add a file called ""ToggleFieldComparator"" to be these three toggle special field as their comparator. And it works now. Fixes #7015 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

**Example: Set ""Relevancy"" as the first criteria and ""Year"" as the second.**

Ascending
![image](https://user-images.githubusercontent.com/57991879/106427532-8b54c480-64a2-11eb-94cf-1b90cac6882a.png)

Descending
![image](https://user-images.githubusercontent.com/57991879/106427561-93146900-64a2-11eb-8b93-1eb61e770fa7.png)"Weibao FuFu18802/01/21, 07:04:28 PM
7414.07417Keyboard shortcut for merging entries"When merging many entries a keyboard shortcut for merging entries would instead of right-click actions.

I'm attaching a patch here.

BR

[0001-Added-keyboard-shortcut-for-merging-entries.txt](https://github.com/JabRef/jabref/files/5909607/0001-Added-keyboard-shortcut-for-merging-entries.txt)
"Thanks for your contribution? Would you mind creating a Pull Request? =||= Thanks, this is now included.  =||= Added keyboard shortcut for merging entries"Fixes #7414 

User submitted a patch

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr02/02/21, 08:41:07 PM
7387.07419epsilon symbol in unicode-to-latex not supported"JabRef version 5.1 on MacOs 11.1

If 𝜖 in title of a reference, it is not converted to \epsilon when selecting ""cleanup"" and ""unicode-to-latex""

Steps to reproduce the behavior:
1. Get reference from doi-fetcher
2. cleanup
3. unicode-to-latex""Does anything happen? (I get some issues when I try to copy-paste the 𝜖 into JabRef, so I can't test it myself) =||= Hm, your Epsilon is somehow the wrong char or is it written in italics?
Greek Small Letter Epsilon `ε` is coverted to `$\epsilon$ ` =||= I believe it is [Mathematical Italic Epsilon Symbol 𝜖](https://www.compart.com/en/unicode/U+1D716). I am getting graphical issues when I am copying it into JabRef and non-sense if I try to convert it to latex. =||= Yes, it is originally the $\epsilon$ symbol from LaTeX, see

https://www.overleaf.com/learn/latex/List_of_Greek_letters_and_math_symbols =||= @k3KAW8Pnf7mkmdSMPHz27  Yes, mac has a problem with displaying italic, I see the same issue.
@salmma  You said you imported from DOI, can you paste the DOI here?
 =||= https://doi.org/10.1145/3412451.3428498 =||= For me, it converts `About a criterion of successfully executing a circuit in the NISQ era: what wd ≪ 1/𝜖 eff really means` to: `About a criterion of successfully executing a circuit in the NISQ era: what wd $\ll$ 1/휖� eff really means`

Is this the behaviour you are seeing? I think this is caused by the [UnicodeToLatexFormatter](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/formatter/bibtexfields/UnicodeToLatexFormatter.java).

https://github.com/JabRef/jabref/blob/c4220988b74d822c260c4b6ed74e9f470dcc1a3b/src/main/java/org/jabref/logic/formatter/bibtexfields/UnicodeToLatexFormatter.java#L37-L42

As you can see, we are explicitly converting the codepoint to a char. Italic epsilon however has a codepoint of (decimal) 120598 which can't be represented by a java char. Another problem is that italic epsilon is not a bmp codepoint. it is represented by a surrogate pair so the actual length of the character italic epsilon is 2 which is why it converts it into 2 separate characters above.

This fixes the issue.
```java   
int cpCurrent = result.codePointAt(i);
Integer cpNext = result.codePointAt(i + 1);
String code = HTMLUnicodeConversionMaps.ESCAPED_ACCENTS.get(cpNext);
if (code == null) {
    // skip next index to avoid reading surrogate as a separate char 
    if (!Character.isBmpCodePoint(cpCurrent)) {
        i++;
    }
    sb.append(new String(Character.toChars(cpCurrent)));
} else {
```

This doesn't fix the actual issue though since italic epsilon can't be converted to latex without the amsmath latex package. I am not too sure about that though since I am not familiar with latex.
 =||= > Is this the behaviour you are seeing? I think this is caused by the [UnicodeToLatexFormatter](https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/logic/formatter/bibtexfields/UnicodeToLatexFormatter.java).

Yup that is what I am getting ^^
I am not completely sure what the original intent of the cast to char is. Does replacing them with [StringBuilder's appendCodePoint](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/StringBuilder.html#appendCodePoint(int)) also work? It would be good to get that fixed as well.

> ... since italic epsilon can't be converted to latex without the amsmath latex package. I am not too sure about that though since I am not familiar with latex.

I don't know what is the correct conversion. Other conversions suggest AMS font symbols so that in itself should not be an issue, see
https://github.com/JabRef/jabref/blob/8c3424c79d64f887b6205a63e29c6dea52f33f26/src/main/java/org/jabref/logic/util/strings/HTMLUnicodeConversionMaps.java#L700 =||= > 
> I am not completely sure what the original intent of the cast to char is. Does replacing them with [StringBuilder's appendCodePoint](https://docs.oracle.com/en/java/javase/14/docs/api/java.base/java/lang/StringBuilder.html#appendCodePoint(int)) also work? 

Yep! That works. Good catch.

> 
> I don't know what is the correct conversion. Other conversions suggest AMS font symbols so that in itself should not be an issue, see
> 
> https://github.com/JabRef/jabref/blob/8c3424c79d64f887b6205a63e29c6dea52f33f26/src/main/java/org/jabref/logic/util/strings/HTMLUnicodeConversionMaps.java#L700

Alright, I guess it's ok to just add another entry for the epsilon (U+1D716) in that case? =||= > Alright, I guess it's ok to just add another entry for the epsilon (U+1D716) in that case?

I am having issues reproducing the correct character, what do you convert it to in latex? =||= > 
> 
> > Alright, I guess it's ok to just add another entry for the epsilon (U+1D716) in that case?
> 
> I am having issues reproducing the correct character, what do you convert it to in latex?

`$\mathit{\epsilon}$`

EDIT: This works but the dependency used for converting latex to unicode (https://github.com/tomtung/latex2unicode) can't handle that expression for some reason. It converts it to a ""smallest element of"" character https://www.fileformat.info/info/unicode/char/220a/index.htm. =||= I am not sure of what is the right answer here.
I'd argue that it is better that it does not remain a Unicode character, even if it doesn't strictly produce the right characters in all circumstances. Otherwise, I'd guess it can create problems if Unicode characters are not supported.
But it will also prevent the user from reverting to Unicode at a later point. Any idea @Siedlerchr?

> `$\mathit{\epsilon}$`

AMS math convert it to `U+1D716` and not `U+1D700`? =||= > > `$\mathit{\epsilon}$`
> 
> AMS math convert it to `U+1D716` and not `U+1D700`?

Yes, U+1D716 is the correct character.
 =||= Refs #3644 and https://github.com/JabRef/jabref/pull/6155 =||= > Yes, U+1D716 is the correct character.

I am sorry, but could you give me some more information regarding how you produce this? I am having issues reproducing it outside of an ACM template, where`$\epsilon$` is sufficient. Perhaps it is related to that I am using Overleaf, but in both Mac OS X and Windows 10 amsmath + `$\mathit{\epsilon}$`, outside of the previously mentioned template, I don't get the correct result.
What packages are you including, and is `$\epsilon$` sufficient?
Perhaps it would be a good idea to go ahead with this anyway. The only alternative I can think of is to display a warning/fix dialog to the user when an error of this type occurs. And that I am having issues producing this particular symbol might not be important. =||= > 
> 
> > Yes, U+1D716 is the correct character.
> 
> I am sorry, but could you give me some more information regarding how you produce this? I am having issues reproducing it outside of an ACM template, where`$\epsilon$` is sufficient. Perhaps it is related to that I am using Overleaf, but in both Mac OS X and Windows 10 amsmath + `$\mathit{\epsilon}$`, outside of the previously mentioned template, I don't get the correct result.
> What packages are you including, and is `$\epsilon$` sufficient?
> Perhaps it would be a good idea to go ahead with this anyway. The only alternative I can think of is to display a warning/fix dialog to the user when an error of this type occurs. And that I am having issues producing this particular symbol might not be important.

I am also using Overleaf on Windows 10. I just include amsmath and use`$\mathit{\epsilon}$` but `$\epsilon$` produces the same result for some reason. =||= > but `$\epsilon$` produces the same result for some reason.

I'd say `$\epsilon$` seem to be the way to go in that case. =||= "Fix wrong conversion of unicode chars"Fixes #7387
Fixed the wrong conversion of unicode characters with a codepoint higher than the max value of the primitive type char in the unicode to latex formatter.

- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Timucin Merdintmrd99302/03/21, 06:03:18 PM
6962.07421"Adding simple ""Copy"" in addition to ""Copy preview"" to right-click menu of preview""Perhaps it would be worth to add a simple ""Copy"" in addition to ""Copy preview"" to right-click menu of preview pane. Sometimes it is convenient to copy just a part of preview (selected beforehand), and to use right-click menu for that, as in many other programs. But in JabRef (version 5.1) right-click menu only allows one to copy the whole preview. By the way, Ctrl-C still works, and thus is a workaround.""I would find this feature also very useful! Especially when one wants to copy only a part of the preview (e.g. without abstract) =||= Is this the proposed behaviour?

![selectioncopy](https://user-images.githubusercontent.com/47194464/106932123-a2501c80-6717-11eb-97de-e5fc90860f3f.gif)
 =||= Yes! that is the desired behavior! =||= @mpatas  Thanks to @tmrd993  this issue is now fixed in the latest master!

We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.3--2021-03-22--8fe77dd
Linux 5.4.0-67-generic amd64 
Java 15.0.2 
JavaFX 16+8

I now use the new ""Copy Preview"" feature *all* the time.  Several times every day.

Thank you!

https://user-images.githubusercontent.com/762246/112078421-030aab80-8b44-11eb-848a-bb27dc2749a7.mp4


 =||= "add selection copy to preview window"Fixes #6962 
Added a feature that allows users to copy highlighted text in the preview window

Screenshot:

![100c67ff4e73c1cb3ea8e4385da41cdd](https://user-images.githubusercontent.com/47194464/106947983-7179e280-672b-11eb-8a7c-4eef008ab992.png)


- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Timucin Merdintmrd99302/05/21, 06:45:29 PM
7058.07424Switch from FontAwesomeFX to Ikonli"As FontAwesomeFX doesn't seem to be updated anymore and also doesn't include the latest 5.0 icons, we should switch to [Ikonli](https://kordamp.org/ikonli/). They have native JavaFX support as well.

I'll mark this as good-first-issue, because the code changes should be relative localized. However, there are changes required to many files, including grade build resources - so this task is perhaps a bit more complex than our average good first issues.""I was looking into solving this issue and was hoping you could clarify something. Are you looking to switch to the Material Design icon pack from Ikonli (https://kordamp.org/ikonli/cheat-sheet-materialdesign.html) or the Fontawesome/Fontawesome5 packs (https://kordamp.org/ikonli/cheat-sheet-fontawesome.html, https://kordamp.org/ikonli/cheat-sheet-fontawesome5.html)? 

I ask because it seems that the Material Design icon pack is more in line with the current look of the icons used in Jabref and the pack seems to offer equivalents to all the icons used in Jabref. The Fontawesome packs however have a slightly different look and are missing a few equivalents to the icons already found in Jabref.

I apologize if this is a silly question, but I want to be sure I am looking at the right options. =||= Good that you ask! I was mislead by the name of the library and thought we were currently using Fontawesome (the font). But you are right, it's Material Design. So I'd say migrate to the Material Design icon pack from Ikonli for now. Except if you strongly prefer the Fontawesome5 icons, then we can discuss to change them. =||= Thanks for getting back so quickly! I'll stick to Material Design for now. I think it would be better to maintain the current look. It should be relatively easy to switch to any other icon pack from Ikonli in the future should things change. =||= Yes, Material Design Icons are the ones we currently use. (see IconTheme.java)
Just a note, because it's confusing of the name, The MDI = Material Design Icons contain material design from google  and many more community created icons
https://kordamp.org/ikonli/#_materialdesign =||= Which version are you using? I cannot use the brain icon (number 389 in https://kordamp.org/ikonli/cheat-sheet-materialdesign2.html) =||= "Switch to Ikonli"Fixes #7058 


<img width=""1378"" alt=""grafik"" src=""https://user-images.githubusercontent.com/320228/107146314-9e0a4600-6947-11eb-8153-31d44b3be23d.png"">

Group with `quadcopter` icon
<img width=""871"" alt=""grafik"" src=""https://user-images.githubusercontent.com/320228/107154585-fbb48780-6973-11eb-9889-ab2f42d885d2.png"">


Remaining Issue:

- [x] Fix Lookup in GroupNodeViewModel
- [x] Fix GlyphSize setting 




<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr02/23/21, 09:56:42 PM
7415.07438Non valid number as font size results in an uncaught exception."<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

Latest JabRef version build on Ubuntu 20.04.1 LTS.

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

If you enter a non valid value such as a character to the font size spinner under the appearances tab in the preference dialog and press enter, 2 exception dialogs will appear.
Steps to reproduce the behavior:
1. Open JabRef.
2. Click on Options
3. Click on Preferences
4. Click on Appearance.
5. In the ""size"" box, enter a char such as `a`.
6. Press the <kbd>Enter</kbd> key. Two uncaught exception dialogs will appear.
7. Pressing on the preferences dialog after pressing ok to the two exception dialogs, a third exception dialog will appear.

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  java.lang.NumberFormatException: For input string: ""a""
	at java.base/java.lang.NumberFormatException.forInputString(NumberFormatException.java:68)
	at java.base/java.lang.Integer.parseInt(Integer.java:652)
	at java.base/java.lang.Integer.valueOf(Integer.java:983)
	at javafx.base/javafx.util.converter.IntegerStringConverter.fromString(IntegerStringConverter.java:49)
	at javafx.base/javafx.util.converter.IntegerStringConverter.fromString(IntegerStringConverter.java:35)
	at javafx.controls/javafx.scene.control.Spinner.commitValue(Spinner.java:460)
	at javafx.controls/javafx.scene.control.Spinner.lambda$new$3(Spinner.java:168)
	at javafx.base/com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(ExpressionHelper.java:348)
	at javafx.base/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)
	at javafx.base/javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:72)
	at javafx.graphics/javafx.scene.Node$FocusedProperty.notifyListeners(Node.java:8155)
	at javafx.graphics/javafx.scene.Node.setFocused(Node.java:8208)
	at javafx.graphics/javafx.scene.Scene$KeyHandler.setWindowFocused(Scene.java:4032)
	at javafx.graphics/javafx.scene.Scene$KeyHandler.lambda$new$0(Scene.java:4054)
	at javafx.base/com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(ExpressionHelper.java:136)
	at javafx.base/com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(ExpressionHelper.java:80)
	at javafx.base/javafx.beans.property.ReadOnlyBooleanPropertyBase.fireValueChangedEvent(ReadOnlyBooleanPropertyBase.java:72)
	at javafx.base/javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(ReadOnlyBooleanWrapper.java:103)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.markInvalid(BooleanPropertyBase.java:111)
	at javafx.base/javafx.beans.property.BooleanPropertyBase.set(BooleanPropertyBase.java:145)
	at javafx.graphics/javafx.stage.Window.setFocused(Window.java:674)
	at javafx.graphics/javafx.stage.Window$1.setFocused(Window.java:149)
	at javafx.graphics/com.sun.javafx.stage.WindowHelper.setFocused(WindowHelper.java:112)
	at javafx.graphics/com.sun.javafx.stage.WindowPeerListener.changedFocused(WindowPeerListener.java:64)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassWindowEventHandler.run(GlassWindowEventHandler.java:126)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassWindowEventHandler.run(GlassWindowEventHandler.java:40)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassWindowEventHandler.lambda$handleWindowEvent$4(GlassWindowEventHandler.java:176)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:412)
	at javafx.graphics/com.sun.javafx.tk.quantum.GlassWindowEventHandler.handleWindowEvent(GlassWindowEventHandler.java:174)
	at javafx.graphics/com.sun.glass.ui.Window.handleWindowEvent(Window.java:1351)
	at javafx.graphics/com.sun.glass.ui.Window.notifyFocus(Window.java:1330)
	at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication.enterNestedEventLoopImpl(Native Method)
	at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication._enterNestedEventLoop(GtkApplication.java:347)
	at javafx.graphics/com.sun.glass.ui.Application.enterNestedEventLoop(Application.java:509)
	at javafx.graphics/com.sun.glass.ui.EventLoop.enter(EventLoop.java:107)
	at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.enterNestedEventLoop(QuantumToolkit.java:635)
	at javafx.graphics/javafx.stage.Stage.showAndWait(Stage.java:465)
	at javafx.controls/javafx.scene.control.HeavyweightDialog.showAndWait(HeavyweightDialog.java:162)
	at javafx.controls/javafx.scene.control.Dialog.showAndWait(Dialog.java:346)
	at org.jabref@100.0.0/org.jabref.gui.JabRefDialogService.showErrorDialogAndWait(JabRefDialogService.java:192)
	at org.jabref@100.0.0/org.jabref.gui.FallbackExceptionHandler.lambda$uncaughtException$0(FallbackExceptionHandler.java:26)
	at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)
	at java.base/java.security.AccessController.doPrivileged(AccessController.java:391)
	at javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)
	at javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)
	at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at javafx.graphics/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(GtkApplication.java:277)
	at java.base/java.lang.Thread.run(Thread.java:832)

  ```
</details>""Interesting, I thought that a Spinner was already restricted to numbers, but turns out it's not https://stackoverflow.com/a/36749659
spinner.getEditor() returns the textfield =||= So did I at first, but you can specify the datatype of the Spinner in the declaration.  As it appears in the log, an `uncaughtException` is raised because the thread hits an exception that is not caught (i.e. a number format exception since we parse a char). Debugging the application, I can see that the exception is thrown by the java thread library (which makes sense), but I cannot see where we should catch it. Note here that exception handling is already added when we click the save button (i.e. the check for an integer that is larger than 8 for the font size) but this bug happens before this step. Other possible fixes could however include:
* Change the editable property to false. This would however mean that the user needs to press the up and down buttons multiple times.
* Change the spinner to a simple text field. Then we can perform all the exception handling in the view/view model.

I think it will be great if we can fix it without changing the GUI, so if anyone has any comments or might want to work on this issue, just mention it here.  =||= I have found a fix where you bind an event handler directly to the `TextField` of the Spinner as returned by `fontSize.getEditor()`. The event handler is called when the <kbd>Enter</kbd> key is pressed. I know however that doing event handling directly on the controls can be a bit problematic, since it is not reusable code. A pull request will follow after I add some comments. =||= I think I have found a solution based on the TextFormatter the trick is to not return null:
Freel free to improve this
 ```
TextFormatter<Integer> formatter = new TextFormatter<>(
                                                               new IntegerStringConverter(),
                                                               9,
                                                               c -> {
                                                                   if (Pattern.matches(""\\d*"", c.getText())) {
                                                                       return c;
                                                                   }
                                                                   c.setText(""0"");
                                                                   return c;
                                                               });
        fontSize.getEditor().setTextFormatter(formatter);
```

When you enter a char it will return 0. Returning null results in an exception as well =||= I will try it and see if it works.  =||= Could using ControlsFX (which jabref apparently uses?) [Validation library](https://controlsfx.github.io/javadoc/11.0.3/org.controlsfx.controls/org/controlsfx/validation/package-summary.html) help here? =||= @koobs  There is already a validation for that control, but that doesn't prevent the exception =||= ""Fixes the issue ""Non valid number as font size results in an uncaught exception.""""<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes  #7415


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in CHANGELOG.md described (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Landi2902/15/21, 07:44:15 PM
7437.07440Enhance bibliographic information with data from zbmath.org"It is possible to enhance bibliographic information with data from some public databases via the ""Update with bibliographic information from the web"" button in the editor. I would like to add zbmath to the list of databases (right now one can choose between Crossref, DOI, ISBN, MathSciNet and SAO/NASA ADS). I think it would be helpful for mathematical users to have the possibility to update their bib entries with information from zbmath. 

I already worked on the zbMathFetcher [#7202] and I could implement the EntryBasedParserFetcher for the zbMathFetcher."Sounds like a good idea! Go ahead! =||= Thanks again for your contribution! I merged now =||= Zbmath fetcher"Add zbmath to the public databases which can be chosen when updating an entry with bibliographic information from the web. See Fixes #7437.

![Screenshot (3)](https://user-images.githubusercontent.com/68125288/107381280-fb8cc700-6aee-11eb-9098-7fed664ccad9.png)

![Screenshot (4)](https://user-images.githubusercontent.com/68125288/107381331-05aec580-6aef-11eb-9715-94142f03c825.png)


- [x] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ibe-31402/15/21, 02:25:38 PM
7420.07443Citation keys are always overwritten when importing through web search"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 
The citation key generator **never** preserves citation keys while importing from sites such as INSPIRE HEP. The citation keys are overwritten even if ""Overwrite existing keys"" is disabled in preferences and always without warning.


JabRef version
```
JabRef 5.3--2021-02-03--242a494
Mac OS X 10.15.7 x86_64 
Java 15.0.2 
JavaFX 15.0.1+1
```

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

#### Relevant links
1. [JabRef renaming keys?!](https://discourse.jabref.org/t/jabref-renaming-keys/1900) (I don't think these options exist anymore)
2. [InspireHEP and SAO/NASA ADS Bibtex Key Catch (feature request)](https://discourse.jabref.org/t/inspirehep-and-sao-nasa-ads-bibtex-key-catch/2453)
3. [Can I use Inspire citation keys when importing via jabref?](https://discourse.jabref.org/t/can-i-use-inspire-citation-keys-when-importing-via-jabref/2530)
4. There is a mention of unwanted key formatting in #7274

#### Temporary workaround
It is possible to keep citation keys by using the [citation key pattern `[CITATIONKEY]`](https://discourse.jabref.org/t/can-i-use-inspire-citation-keys-when-importing-via-jabref/2530/2?u=k3kaw8pnf7mkmdsmphz2) during the import.
`:` must also be removed from the ""Remove the following characters"" field in preferences.
It should be possible to use the regexp in https://github.com/JabRef/jabref/issues/7111#issuecomment-731763262 to create a workaround where a different pattern is used when there is no citation key in the imported entry. (If someone manages with this approach, feel free to add a comment and perhaps others will also find it useful)

#### Steps to reproduce the behavior:
1. Unmark ""Overwrite existing keys"" <img width=""888"" alt=""Skärmavbild 2021-02-03 kl  15 41 33"" src=""https://user-images.githubusercontent.com/2598631/106808091-f257b200-6637-11eb-8e66-7e26c5ff17e7.png"">
2. Make a web-search on INSPIRE and import any entry <img width=""618"" alt=""Skärmavbild 2021-02-03 kl  15 43 47"" src=""https://user-images.githubusercontent.com/2598631/106807983-cccaa880-6637-11eb-864b-1f43f2e61c30.png"">
3. Note that the citation key is overwritten
 <img width=""618"" alt=""Skärmavbild 2021-02-03 kl  15 47 36"" src=""https://user-images.githubusercontent.com/2598631/106808003-d2c08980-6637-11eb-9ebc-39a325f16b01.png"">

""Same issue for me. I always manually rewrite bibtex-key which i fetch from inspire or ads =||= @bulmust, the workaround(s) work for now? =||= No, still problematic. Bibtex-key is not fetched from Inspire.
![1](https://user-images.githubusercontent.com/19466488/107000896-b8062600-6799-11eb-9c9e-617462e481ce.gif)

My configs and version are:
![2](https://user-images.githubusercontent.com/19466488/107000911-be949d80-6799-11eb-944c-6f897c25e524.gif)



 =||= I meant using the citation key pattern `[BIBTEXKEY]` or `[CITATIONKEY]` while importing. (discussed [here on discourse](https://discourse.jabref.org/t/can-i-use-inspire-citation-keys-when-importing-via-jabref/2530/5?u=k3kaw8pnf7mkmdsmphz2))
However, that might not be convenient for you unless you always want to keep the imported keys. =||= I debugged a bit and the problem seems to be that this import handler doesn't check the preferences if the key should be overwritten or not. And further down there isn't any check either.

So the solution would be to add a check for the setting from the CitationKeyPrefereces.

https://github.com/JabRef/jabref/blob/86d52cd6468335d9e460aaacc870aa5088c62431/src/main/java/org/jabref/gui/externalfiles/ImportHandler.java#L196-L210 =||= > I meant using the citation key pattern `[BIBTEXKEY]` or `[CITATIONKEY]` while importing. (discussed [here on discourse](https://discourse.jabref.org/t/can-i-use-inspire-citation-keys-when-importing-via-jabref/2530/5?u=k3kaw8pnf7mkmdsmphz2))
> However, that might not be convenient for you unless you always want to keep the imported keys.

Thank you. It is solved. 

Before Jabref 5.x versions, this option was default.  Solution is following:

![Peek 2021-02-06 19-02](https://user-images.githubusercontent.com/19466488/107123313-e7a65280-68ad-11eb-9b68-026df924045d.gif) =||= Hey, I've (possibly) been able to fix this, but I'm not sure if it's according to JabRefs intended behaviour for this feature (more details on that can be found in the Pull Request). =||= "Fix citation keys unintentionally being overwritten on import"Fixes #7420 

Hello JabRef-Team, 
I've attempted to create a fix for issue 7420. I'm not sure if it's done as expected though, please let me know if I need to change/update anything.

The 'fixed' version behaves like this:
If 'Preferences' > 'Citation key patterns' > 'Overwrite existing keys' is unchecked, `generateKey()` in `CitationKeyGenerator`: 
* overwrites the default `citationKey` with an newly generated one only, if it is blank
* the default `citationKey` is not overwritten anymore (and therefore stays the same), if it is not blank

Behaviour remains unchanged if 'Overwrite existing keys' is checked.
(Let me know if I misunderstood how this feature was supposed to work in general and I'll adapt the behaviour accordingly)

Fixes #7420

- [ ] Change in CHANGELOG.md described (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."LucasFLucasF-4203/26/21, 01:39:07 PM
7454.07455Openoffice / Merge citations is a trap, Unmerge is missing"Clicking on ""Merge citations""  under Openoffice/Libreoffice
can only be undone by removing the merged versions
and inserting its parts individually."Unmerge LO citations"Implemented ""Unmerge citations"" in the Openoffice/Libreoffice
integration panel. 
Fixes #7454(https://github.com/JabRef/jabref/issues/7454)


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
      No, tests were not created.  Do you have GUI tests?

      There is a known problem: ""Merge citations"" does not save the information needed
      to find the optional extra info (like page reference) stored in document properties.
      When reestablishing the individual references in unCombineCiteMarkers,
      getUniqueReferenceMarkName() may or may not return the original name.
      When it does not, the extra info may be lost, or even taken from another entry.

      A solution could be to encode the number making the originals unique
      in the merged name: in stead of  ""JR_cite_1_XX2000a,YY2010"" it would be e.g.
      ""JR_cite_1_XX2000a,1_YY2010"". Apart from construction and parsing,
       probably marking (or calulating) the originals as ""in use"" for getUniqueReferenceMarkName()
       would be needed.

       Another problem: combineCiteMarkers orders the merged entries by year  (I am not sure why).
       The original order is lost.

       In summary, the presented solution, although improves the situation, does not cover
       all aspects.

- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)

![jabref-Unmerge-citations](https://user-images.githubusercontent.com/15824666/108429997-fc390200-7240-11eb-9d4c-2766b8342997.png)

- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

https://docs.jabref.org/cite/openofficeintegration does not mention the ""Merge citations"" button.
The most appropriate addition would probably go under the ""Known issues"" section,
describing the two problems above (or the original, if the proposed changes are not applied)
"antalk203/02/21, 08:20:59 PM
3791.07458No order of items in content selectors"<!-- Note: Please use the GitHub Issue tracker only for BugReports. 
Feature requests,  questions and general feedback is now handled at http://discourse.jabref.org 
Thanks! --> 

- [x] I have tested the latest master version from http://builds.jabref.org/master/ and the problem persists


JabRef version 4.1

Steps to reproduce:

1. Add a number of entries to JabRef
2. Go to General > Keyword and type
3. You'll see a list of unsorted keywords that make it hard to pick a particular one

![jabref4-1_selectors](https://user-images.githubusercontent.com/1692563/36835993-4707a054-1d38-11e8-9d26-a44ad67b47f8.png)

Alphabetical order would be great.""@JabRef/developers @Holzhauer This is auto-completion functionality? Or are you using the the manage keywords functionality? Btw: this is neatly hidden in edit. i didn't find it without searching the source code. Expected it under options as the other manage dialogs =||= Ok this keyword manage dialog does not dunction as exptected. Shows different keywords for different selected entries sometimes non. adding does only partially work for me... =||= I just updated to a newer JabRef version on my new Mac (4.3.1). I think the problem still exists and it's horrible! I have over 100 passwords, so it's very time-consuming to add new entries to the database now. With the (very) old version I was using on my old mac it worked fine and I also found it much easier to add new keywords (you could do it from the entry).  =||= Could you please try 5.0 alpha? We reworked the UI quite a bit; maybe, also
your issue is resolved?

jkrenz <notifications@github.com> schrieb am Do., 19. Sep. 2019, 15:54:

> I just updated to a newer JabRef version on my new Mac (4.3.1). I think
> the problem still exists and it's horrible! I have over 100 passwords, so
> it's very time-consuming to add new entries to the database now. With the
> (very) old version I was using on my old mac it worked fine and I also
> found it much easier to add new keywords (you could do it from the entry).
>
> —
> You are receiving this because you are on a team that was mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/JabRef/jabref/issues/3791?email_source=notifications&email_token=AAKNU7R6VZERIIGUQGFNG23QKOABVA5CNFSM4ES74KK2YY3PNVWWK3TUL52HS4DFVREXG43VMVBW63LNMVXHJKTDN5WW2ZLOORPWSZGOD7DRQJQ#issuecomment-533141542>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAKNU7R3D32TWMHHFH7PBATQKOABVANCNFSM4ES74KKQ>
> .
>
 =||= JabRef 5.0-dev
Linux 5.0.0-29-generic amd64 
Java 11.0.4

Cannot confirm this issue for the current dev snap version. No selection menu at all is shown (indeed, I thought the autocompletion feature had been removed for the time, because it caused too many issues?). =||= Problem still persists in JabRef 5.0 for Mac. Keywords not in alphabetical order, neither when I want to add a new keyword (""Manage content selectors"") nor when I want to choose a keyword for an entry. 

![Bildschirmfoto 2019-09-23 um 10 20 22](https://user-images.githubusercontent.com/37696037/65411159-723afe80-ddec-11e9-95fb-0d27696b8dff.png)
![Bildschirmfoto 2019-09-23 um 10 21 41](https://user-images.githubusercontent.com/37696037/65411166-77984900-ddec-11e9-9158-c8bc50dc415d.png)
 =||= Can anyone tell me which Jabref (for mac) version was the last one where the alphabetical order worked and where I can find it?  =||= I was not able to confirm the issue when selecting a keyword for an entry - the list seems to be in alphabetical order whether the autocomplete is on or off. It is true however, that the keywords were stored in Content Selectors and displayed in Content Selector Manager in the order in which they were added rather than the alphabetical one. I fixed that by simply sorting the list whenever new entry is added. Additionally, I wrote tests for both ContentSelectorSuggestionProvider and ContentSelectorDialogViewModel (as they did not exists) that check among other things that the keywords are in alphabetical order. Is it OK for me to create a pull request? =||= Thanks for taking a look and fixing this issue! Go ahead with a pull request, so we can have a look at your fix.  =||= "Sorted list of content selectors"List of keywords added in ""Manage content selectors"" is now always displayed in alphabetic order. Also added tests for ContentSelectorSuggestionProvider and ContentSelectorDialogViewModel classes which include asserting alphabetical order in suggestions affected by content selectors as well.
Fixes #3791.

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

![mcs_sorted_image](https://user-images.githubusercontent.com/54515221/108607933-c53f2980-73c3-11eb-95a6-5cd1786dfc58.jpg)"BJaroszkowski02/22/21, 12:07:17 PM
7464.07470Drag-and-drop of a bib file generate a loop of exceptions"```
JabRef 5.3--2021-02-08--8a95a82
Linux 4.19.0-14-amd64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1
```
_But already present in:_
```
    JabRef 5.2--2020-12-24--6a2a512
    Linux 4.19.0-14-amd64 amd64 
    Java 15.0.1
```


- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

If no database is displayed, dragging-and-dropping a database (i.e. a .bib file) on the main JabRef window causes an ""infinite"" (at least quite long) loop of exception windows to be displayed. Application has to be killed.

Steps to reproduce the behavior:
1. Open JabRef.
2. Close all databases.
3. Drag-and-drop a .bib file.

Note: A drag-and-drop problem was previously reported for PDF files (issue #7072)

<details>
  <summary>Exception details</summary>
java.lang.ClassCastException: class javafx.scene.control.Tab cannot be cast to class org.jabref.gui.LibraryTab (javafx.scene.control.Tab is in module org.jabref.merged.module@5.3.127 of loader 'app'; org.jabref.gui.LibraryTab is in module org.jabref@5.3.127 of loader 'app')
	at org.jabref@5.3.127/org.jabref.gui.JabRefFrame.lambda$init$8(Unknown Source)
	at com.tobiasdiez.easybind@2.1.0/com.tobiasdiez.easybind.MappedList.get(Unknown Source)
	at java.base/java.util.AbstractList$Itr.next(Unknown Source)
	at java.base/java.util.AbstractList$SubList$1.next(Unknown Source)
	at java.base/java.util.AbstractList.addAll(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ModifiableObservableListBase.addAll(Unknown Source)
	at com.tobiasdiez.easybind@2.1.0/com.tobiasdiez.easybind.ListContentBinding.onChanged(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at com.tobiasdiez.easybind@2.1.0/com.tobiasdiez.easybind.MappedList.sourceChanged(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.transformation.TransformationList.lambda$getListener$0(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.WeakListChangeListener.onChanged(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ObservableListBase.fireChange(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ListChangeBuilder.commit(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ListChangeBuilder.endChange(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ObservableListBase.endChange(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.collections.ModifiableObservableListBase.add(Unknown Source)
	at java.base/java.util.AbstractList.add(Unknown Source)
	at org.jabref@5.3.127/org.jabref.gui.JabRefFrame.lambda$initDragAndDrop$1(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.scene.Scene$DnDGesture.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.scene.Scene$DnDGesture.processTargetEnterOver(Unknown Source)
	at org.jabref.merged.module@5.3.127/javafx.scene.Scene$DropTargetListener.dragEnter(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.lambda$handleDragEnter$0(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.handleDragEnter(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleDragEnter$9(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleDragEnter(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.glass.ui.View.handleDragEnter(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.glass.ui.View.notifyDragEnter(Unknown Source)
	at org.jabref.merged.module@5.3.127/com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.3.127/com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
</details>
<details>
  <summary>First messages displayed in the command line</summary>
%d [%thread] %-5level %logger - %msg%n java.lang.ClassCastException: class javafx.scene.control.Tab cannot be cast to class org.jabref.gui.LibraryTab (javafx.scene.control.Tab is in module org.jabref.merged.module@5.3.127 of loader 'app'; org.jabref.gui.LibraryTab is in module org.jabref@5.3.127 of loader 'app')
	at org.jabref.gui.JabRefFrame.lambda$init$9(Unknown Source) ~[org.jabref:?]
	at java.util.Optional.map(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$init$10(Unknown Source) ~[org.jabref:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression$2.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$52.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Node$MiscProperties.isDisable(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Node.isDisable(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Node.updateDisabled(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Node$MiscProperties$9.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.set(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$0(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.WeakListChangeListener.onChanged(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.fireChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.commit(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ModifiableObservableListBase.add(Unknown Source) ~[org.jabref.merged.module:?]
	at java.util.AbstractList.add(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$initDragAndDrop$1(Unknown Source) ~[org.jabref:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DnDGesture.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DnDGesture.processTargetEnterOver(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DropTargetListener.dragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.lambda$handleDragEnter$0(Unknown Source) ~[org.jabref.merged.module:?]
	at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleDragEnter$9(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.notifyDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source) ~[org.jabref.merged.module:?]
	at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.ClassCastException: class javafx.scene.control.Tab cannot be cast to class org.jabref.gui.LibraryTab (javafx.scene.control.Tab is in module org.jabref.merged.module@5.3.127 of loader 'app'; org.jabref.gui.LibraryTab is in module org.jabref@5.3.127 of loader 'app')
	at org.jabref.gui.JabRefFrame.lambda$init$9(Unknown Source) ~[org.jabref:?]
	at java.util.Optional.map(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$init$10(Unknown Source) ~[org.jabref:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression$2.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$BooleanAndBinding.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.StringFormatter.extractValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.StringFormatter$2.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$62.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.When$StringCondition.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at org.controlsfx.control.action.ActionUtils$5.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at org.controlsfx.control.action.ActionUtils$5.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.Control$3.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.When$WhenListener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$ShortCircuitAndInvalidator.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.set(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$0(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.WeakListChangeListener.onChanged(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.fireChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.commit(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ModifiableObservableListBase.add(Unknown Source) ~[org.jabref.merged.module:?]
	at java.util.AbstractList.add(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$initDragAndDrop$1(Unknown Source) ~[org.jabref:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DnDGesture.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DnDGesture.processTargetEnterOver(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DropTargetListener.dragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.lambda$handleDragEnter$0(Unknown Source) ~[org.jabref.merged.module:?]
	at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleDragEnter$9(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.notifyDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source) ~[org.jabref.merged.module:?]
	at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.ClassCastException: class javafx.scene.control.Tab cannot be cast to class org.jabref.gui.LibraryTab (javafx.scene.control.Tab is in module org.jabref.merged.module@5.3.127 of loader 'app'; org.jabref.gui.LibraryTab is in module org.jabref@5.3.127 of loader 'app')
	at org.jabref.gui.JabRefFrame.lambda$init$9(Unknown Source) ~[org.jabref:?]
	at java.util.Optional.map(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$init$10(Unknown Source) ~[org.jabref:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression$2.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$BooleanAndBinding.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.StringFormatter.extractValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.StringFormatter$2.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$62.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.When$StringCondition.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.Tooltip$1.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.When$WhenListener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$ShortCircuitAndInvalidator.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.set(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$0(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.WeakListChangeListener.onChanged(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.fireChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.commit(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ModifiableObservableListBase.add(Unknown Source) ~[org.jabref.merged.module:?]
	at java.util.AbstractList.add(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$initDragAndDrop$1(Unknown Source) ~[org.jabref:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.event.Event.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DnDGesture.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DnDGesture.processTargetEnterOver(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.Scene$DropTargetListener.dragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.lambda$handleDragEnter$0(Unknown Source) ~[org.jabref.merged.module:?]
	at java.security.AccessController.doPrivileged(Unknown Source) ~[?:?]
	at com.sun.javafx.tk.quantum.GlassSceneDnDEventHandler.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleDragEnter$9(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.tk.quantum.GlassViewEventHandler.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.handleDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.View.notifyDragEnter(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication._runLoop(Native Method) ~[org.jabref.merged.module:?]
	at com.sun.glass.ui.gtk.GtkApplication.lambda$runLoop$11(Unknown Source) ~[org.jabref.merged.module:?]
	at java.lang.Thread.run(Unknown Source) [?:?]
%d [%thread] %-5level %logger - %msg%n java.lang.ClassCastException: class javafx.scene.control.Tab cannot be cast to class org.jabref.gui.LibraryTab (javafx.scene.control.Tab is in module org.jabref.merged.module@5.3.127 of loader 'app'; org.jabref.gui.LibraryTab is in module org.jabref@5.3.127 of loader 'app')
	at org.jabref.gui.JabRefFrame.lambda$init$9(Unknown Source) ~[org.jabref:?]
	at java.util.Optional.map(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$init$10(Unknown Source) ~[org.jabref:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at org.jabref.gui.util.OptionalObjectProperty$2.computeValue(Unknown Source) ~[org.jabref:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression$2.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$BooleanAndBinding.computeValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.tobiasdiez.easybind.EasyBind$3.computeValue(Unknown Source) ~[com.tobiasdiez.easybind:?]
	at javafx.beans.binding.ObjectBinding.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper$ReadOnlyPropertyImpl.get(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.StringExpression.getValue(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyStringWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.StringPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyBooleanWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.BooleanPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.Bindings$ShortCircuitAndInvalidator.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.BooleanBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase$Listener.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$SingleInvalidation.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.binding.ObjectBinding.invalidate(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.BindingHelperObserver.invalidated(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.binding.ExpressionHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectPropertyBase.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ReadOnlyObjectWrapper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.markInvalid(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.beans.property.ObjectPropertyBase.set(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.SelectionModel.setSelectedItem(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.select(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.findNearestAvailableTab(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.scene.control.TabPane$TabPaneSelectionModel.lambda$new$0(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.WeakListChangeListener.onChanged(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper$Generic.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.fireChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.commit(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ListChangeBuilder.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ObservableListBase.endChange(Unknown Source) ~[org.jabref.merged.module:?]
	at javafx.collections.ModifiableObservableListBase.add(Unknown Source) ~[org.jabref.merged.module:?]
	at java.util.AbstractList.add(Unknown Source) ~[?:?]
	at org.jabref.gui.JabRefFrame.lambda$initDragAndDrop$1(Unknown Source) ~[org.jabref:?]
	at com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source) ~[org.jabref.merged.module:?]
	at com.sun.javafx.event.EventUtil.fireEvent(Unknown Source) ~[org.jabref.merged.module:?]


</details>""The problem is here https://github.com/JabRef/jabref/blob/5a114125362bd74415ec59d57fac874896460ac1/src/main/java/org/jabref/gui/JabRefFrame.java#L578
In JabRefFrame initDragAndDrop we add a new nromal Tab which indicates loading 

https://github.com/JabRef/jabref/blob/5a114125362bd74415ec59d57fac874896460ac1/src/main/java/org/jabref/gui/JabRefFrame.java#L205

@tobiasdiez  Is there a method in EasBind where we can add a filter before? e.g. check if it's actually a librarytab instanCE =||= https://github.com/JabRef/jabref/blob/94f4c1ebba44e0bfceb6867938b116f0cadbbcce/src/main/java/org/jabref/gui/maintable/MainTableDataModel.java#L46-L49 =||= I confirm this is fixed. Great, thank you!

JabRef 5.3--2021-02-27--c7f2671
Linux 4.19.0-14-amd64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1

 =||= "Fix drag and drop of bib files "Fixes #7464

When loading/opening a bib file a new ""normal"" Tab is inserted to indicate loading. That is later removed again and it's not an instanceof our LibraryTab

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr02/27/21, 06:47:28 AM
7020.07471Error message before starting new entry from ID"JabRef 5.2-PullRequest7008.168--2020-10-12--67c873b
Windows 10 10.0 amd64 
Java 15

The new entry dialog has always the ID field marked with red corner and red ""!"". But this error message makes sense only if I push Generate without putting anything in the ID field and without pushing any of the predefined entry types. But in this case the Generate button is correctly disabled. So the message can be removed because signal something that could not happen.

Steps to reproduce:

1. Start JabRef
2. Go to Library > New Entry
3. The following sign appears:
![image](https://user-images.githubusercontent.com/865866/96142639-9c34f680-0f02-11eb-9a53-693c3ea7caa4.png)
The sign remains even if I change the ID Type."Similar issue and proposed solution: https://github.com/JabRef/jabref/pull/6418#issuecomment-645950155 =||= Fixed validation before typing in new entry dialog #7020"Do not show an error message if there is no error
Fixes #7020 "AliAli96kz03/05/21, 12:02:02 AM
7452.07474PDF Downloader downloads HTML source code instead if no access"JabRef 5.2--2020-12-24--6a2a512
Linux 5.4.0-59-generic amd64 
Java 15.0.1

- [ ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Import an entry via Browser extension for which one does not have acces rights for the PDF (e.g. https://onlinelibrary.wiley.com/doi/abs/10.1002/0470862106.ia615)
2. JabRef automatically downloads the PDF (or rather it tries to do so)
3. Instead of the PDF it downloads the HTML webpage that would pop up if I was to try to download the paper manually. Thus my ""PDF"" now only contains HTML source code

I have encountered this a few times by now and in all cases the downloaded ""PDF"" was a plain text file containg the HTML source code.
My suggestion for a mitigation would be to check the downloaded file and if it starts with plain text `<!DOCTYPE html>`, then assume the download has failed and remove the ""PDF"" again (restoring the file link with the download URL in JabRef).""Me and a few friends, @kittytinythai, @keivanm, @binsu-kth and @Kayi1500, would like to resolve this issue for a course project in DD2480 Software Engineering Fundamentals at KTH Royal Institute of Technology. Do you have any suggestions or things we need to know before we get started?  =||= Welcome to JabRef! As a starting point make sure to follow our [conribution](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md)

Codewise the functionality of file downloading is handled here 
https://github.com/JabRef/jabref/blob/60cc355b0d397011ff475a947f2ee43dd5e3f4c2/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L416 =||= I have looked into this and I can confirm that there is an issue with how downloading files via URL is handled. Basically, `FileDownloadTask` does not throw an exception if the destination extension does not match the type of the file to be downloaded and not even when the URL is valid but does not exist. In the latter case `URLDownload` returns an empty input stream which is then copied to a destination file leaving us with an empty file in the file system.

The question is how to deal with that. The proposed solution would lead to the cases when after mistyping the URL the download process would fail silently without informing the user about what happened. A quick and dirty fix that I have implemented is to do a check within the `FileDownloadTask` that looks something like:

```
        URLDownload download = new URLDownload(source);
        if (!download.canBeReached() || (destination.toString().endsWith("".pdf"") && !download.isPdf()) ) {
            throw new IOException(""The provided URL is inaccessible or does not exist"");
        }
```

This of course would only work for downloading files with .pdf extension. I think a better idea would be to do a similar check within `prepareDownloadTask` method of `LinkedFileViewModel` where we actually detect file extension. I can work on that but I would rather have one of the devs weigh in first. =||= >I think a better idea would be to do a similar check within prepareDownloadTask method of LinkedFileViewModel where 
we actually detect file extension. I can work on that but I would rather have one of the devs weigh in first.

Thanks for looking into it, UrlDownload has a method for detecting the mime type of the file. Maybe you can use that in addition for checking with the empty File stream. Having empty files is not useful. It could be checked if a) is reachable and maybe give a warning if the mime type is HTML
But keep in mind that some users might want to save a snapshot of a website (e.g. for online sources from websites).
 =||= We have now produced a draft PR for this (#7474), and we would appreciate any feedback. It seems much of the logic for saving the file as an html file was already implemented, but the problem was that the `getExternalFileTypeByMimeType` method ignored the optional parameter part of the mime type string:   https://github.com/JabRef/jabref/blob/1f775d7c5585bf7d9036e4fe55ebd2fb99b1e22a/src/main/java/org/jabref/gui/externalfiletype/ExternalFileTypes.java#L51-L64
This solution does not deal with the case of empty files as discussed by @BJaroszkowski, but this could of course be included (or addressed in a separate issue). We plan to add appropriate unit tests before a merge.  =||= "PDF Downloader downloads HTML source code instead if no access "Adds ignore parameter to `mimeType` and notify the user if the downloaded file is of HTML type, fixes #7452.
  
In the method `ExternalFileTypes::getExternalFileTypeByMimeType`, we added a feature to remove the parameters part
of the `mimeType`, this is allowed in mimeType-specification [link](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types). The previous code didn't consider the parameter part of the mimeType, thus not conforming to the correct enum type in `StandardExternalFileType.java`.

We also added a feature to notify the user if the downloaded link is a HTML file, via the ""status bar"", because the user might think they have downloaded a PDF while this isn't the case.


<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

### Screenshot 1: The downloaded file from the issue example is downloaded as a HTML file instead of a HTML-file disguised as a PDF-file.
![image](https://user-images.githubusercontent.com/78534231/109424586-6e011080-79e4-11eb-89e3-6eb25bb6e150.png)

#### Screenshot of importing the article in the issue
![Screenshot from 2021-03-03 14-57-15](https://user-images.githubusercontent.com/37085022/109816481-13102900-7c31-11eb-82da-3db82fcd434e.png)

#### Screenshot of notification/warning that the link is downloaded as an HTML file after the import is complete
![Screenshot from 2021-03-03 14-57-25](https://user-images.githubusercontent.com/37085022/109816546-291de980-7c31-11eb-8e97-f5981e84b3d9.png)

#### Screenshot showing that the file downloaded is now a local HTML file
![Screenshot from 2021-03-03 14-58-34](https://user-images.githubusercontent.com/37085022/109816678-494da880-7c31-11eb-95d1-05f744383372.png)"binsu-kth03/14/21, 10:13:31 PM
3607.07484Improve display of automatically found file links in editor"Triggered by [a question in the forum](http://discourse.jabref.org/t/problem-with-file-field/993) and a few other related questions lately. A lot of users seem to be irritated that JabRef display files although they are not linked. Thus we should improve the UI to make this feature self-explanatory. I suggest to:
- Set the description of automatically found files to be ""(auto)"" or ""(automatically found)"".
- Change the font color of automatically found files to be grayish ""See also:
https://github.com/JabRef/jabref/issues/5105 =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= Hi we are a group of five university students (@davyie, @KallePettersson, @LukasGutenberg and @martinfalke) who would like to work on this issue as part of the course DD2480 Software Engineering Fundamentals at KTH Royal Institute of Technology. Is there anything in particular we should know about? =||= "Improve user friendliness of automatically linked files"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
We have implemented a new textfield for files that are automatically detected by JabRef and listed as files in the general tab of the entry editor. We also changed the icon for automatically linked files from a BRIEFCASE_CHECK to LINK_PLUS, since we found it more intuitive. This fixes #3607.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

We thought that creating an issue would be redundant if our changes weren't accepted, so we have not completed the documentation task. The [documentation](https://docs.jabref.org/finding-sorting-and-cleaning-entries/filelinks#auto-linking-files) refers to the icon as a ""suitcase"", which would not be accurate, were these changes to be accepted. Instead it should be referred to as a link with a plus sign.

## Screenshots
### Before changes
#### File not linked
![Before changes, file not added](https://user-images.githubusercontent.com/64270456/109797452-cb31d780-7c19-11eb-9143-c0ab53921b53.png)
#### File linked
![Before changes, file added](https://user-images.githubusercontent.com/64270456/109797517-e0a70180-7c19-11eb-8c1e-bcdf35ceca05.png)

### After changes
#### File not linked
![After changes, file not added](https://user-images.githubusercontent.com/64270456/109797681-0f24dc80-7c1a-11eb-8197-2f3c91235bb6.png)
#### File linked
![After changes, file added](https://user-images.githubusercontent.com/64270456/109797708-18ae4480-7c1a-11eb-9fc7-ae7138b2cba7.png)"Oscar Lindgrenosclind03/09/21, 02:19:07 PM
6730.07485User interface: Simplify Select Entry type form"Coming from 10+ years in Zotero and then Mendeley where I've always used the web scrappers of the applications, JabRef's Select Entry Type forms seems overwhelming at first sight with all the different article types. A new user wants to create his new entry as simple as possible, and looking at that form gives them the feeling that they have to study these article types first. If a user has trouble to carry out the most basic operation in a program, they will probably abandon it, even if the program has all the features the user needs.

Since in the vast majority of the cases all the data related to an article is already on the web Web search or DOI is used, and probably should be used to avoid typos. 

**My proposal**: by default hide the different entry types and leave only the ID type and ID fields. The rest can be blended out with a radio box, or these could be put into another tab, or put below the ID field and be separated in a visually strong way. This would make it clear that entry through the ID is the best, and advised method for creating entry for an already existing publication.""Thanks for your suggestions, We always have to keep the balance between power users and newcomers.

1. If you have an DOI you can simply paste it on the table and JabRef will automatically create an entry, For other there is already a suggestion: #4183
2. We have another button in the toolbar which  is called New article. Our telemetry data showed that 90% of the entry types are  articles so we added that.
A third option is to use the JabRef Browser extension to import directly stuff from the web into the library.
4. All those entry types in the dialog already have a  tooltip explaining their usage (This is a new feature in the current dev version) And the difference between an article and a book should be already n the knowledge domain of the user.
And it doesn't matter which type you choose at first. You can always do a right clik on the entry and change the type or manually change it in the bibtex source code.

I personally see no reason for further  =||= Thanks for the prompt answer. There were some new and useful information to me, though I've used jabref a few times and searched and googled how to use it.

Your reply *might* indicate that there is only article and book type, but I've 19 different document types in the new entry form. Although the entry type can be changed, it is not 100% straightforward which one to choose. Proceedings, inProceedings, inCollection, and Conference are not clearly different, but the latex template might handle them differently. I remember spending few hours to figure out why do I have different typesetting in the bibliography for a paper. Sure, one can look it up in some hard to find bibtex reference, but I do not suggest manual entry to nobody. Also, most of the users are not bibtex/biblatex experts, they just want to ease their reference management for their papers, or just to have a collection. I still think that my original proposal would be useful. 

Call me old-fashioned, but I expect to find all functionality of a program in the menus :) I did not spend too much time to familiarize myself with the toolbars yet. About the toolbar text though: I would change ""new article"" to ""new article entry"" to emphasize that it is entry as well. Of course you can expect from the reader to figure it out, but it does not require any more space.

These all were feedback about the program. I've used it regularly in the last months, so this was not based on a short 2 minute usage. It is your call as developers whether to change the program. =||= The user interface is indeed way too complicated for the normal workflow. I would suggest to split the entry types into two categories: ""common"" (or ""often used"", ""recommended"") and ""others"".  =||= > often used

I like the ""often used"" and ""other/more"".
Now the question is, who defines often? I suggest the following:
for a new library, we define a default recommendation. For an existing library, automatise a scan, once a month, to count which entry types are most used in this library and offer the top 5 entry types. And/or, allow to define in the Preferences which entry types to ""promote"" to be ""recommended"".
 =||= Here is the data from our analytics:
![image](https://user-images.githubusercontent.com/5037600/89318764-85ab2d00-d67f-11ea-9e52-e387688f98ce.png)
I would simply take the top 5 as ""often used"". In the order they appear there, maybe put ""Mics"" at the end of the list because that should be the last resort and it is generally recommended to choose more specialized types. =||= Thanks a lot for the statistics. good to know. I think this is a good start. Still, as a researcher in a specific field, with specific conventions of which literature gets published/referenced, I still think, that it would be amazing if we could adapt such a list individually. Of course, this is not a priority. =||= Is anyone working on this? I'd like to give this a go.  =||= > 
> 
> The user interface is indeed way too complicated for the normal workflow. I would suggest to split the entry types into two categories: ""common"" (or ""often used"", ""recommended"") and ""others"".

Like this? Entry type information (Bibtex or IEEETran) is lost though, is that okay?
![newentrywindow](https://user-images.githubusercontent.com/47194464/109689291-72186400-7b85-11eb-9b0e-2c77f8061397.png)

When expanding others:
![newentryexpanded](https://user-images.githubusercontent.com/47194464/109689365-80ff1680-7b85-11eb-8e4c-441ce115d24a.png)

I can't seem to get the window to resize properly though.

 =||= This looks like a nice improvement indeed. Can you open a PR for it, then we can have a look at the resize issue. =||= @tmrd993 Thank you for your contribution in the redesign of the window. The redesign is effective in BibTeX mode (and is great). Could you contribute to the same redesign but for the biblatex mode?

@tobiasdiez or @calixtus: please, could you reopen this issue?

For your information, currently, the window looks like this in biblatex mode:
![ksnip_20210305-104554](https://user-images.githubusercontent.com/6931104/110098103-1970e300-7da0-11eb-886f-c0a02384a7e7.png)

 =||= > 
> 
> @tmrd993 Thank you for your contribution in the redesign of the window. The redesign is effective in BibTeX mode (and is great). Could you contribute to the same redesign but for the biblatex mode?
>

Sure! Are the top 5 entry types the same for both bibtex and biblatex mode?
 =||= > Are the top 5 entry types the same for both bibtex and bitlatex mode?

Yes! =||= Works great. Thank you @tmrd993! =||= "Simplify select entry type form"Fixes #6730 
We split the select entry type form into two categories based on internal usage data

Screenshots:
![selectFormNonExpand](https://user-images.githubusercontent.com/47194464/109831118-6be6be00-7c3f-11eb-95a8-d53619bb5d98.png)

expanded:
![selectFormExpand](https://user-images.githubusercontent.com/47194464/109831148-75702600-7c3f-11eb-82bf-a5ef74ad9504.png)

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Timucin Merdintmrd99303/04/21, 01:55:14 PM
6818.07507When enlarging JabRef window, columns shrink in width"JabRef 5.1--2020-08-30--e023aa0
Linux 5.4.0-42-generic amd64 
Java 14.0.2

Steps to reproduce the behavior:
1. Resizing JabRef window works fine on opening, scaling column width with window size.
2. Have more than 2 files/tabs open.
3. Change the width of a column (e.g., Year).
4. **Enlarge** the JabRef window width.
5. JabRef responsively **shrinks** all the columns, except the rightmost (as if you were reducing window width).
""Similar to #6690.
@serialc: My temporary solution was to open two files maximum. =||= Thanks @mlep. I had three files open, now with two files it no longer happens.
I've added that to the OP. I think you're right that it's likely the same issue as #6690. =||= See also https://github.com/JabRef/jabref/issues/5872 =||= JabRef 5.3--2021-01-24--ae43548
Linux 5.4.0-62-generic amd64 
Java 15.0.2 
JavaFX 15.0.1+1

Columns have a life of their own!



https://user-images.githubusercontent.com/762246/105756372-bfac0c00-5f09-11eb-84dc-02ca1618f69a.mp4

 =||= > Columns have a life of their own!
> cinnamon-20210125-1.mp4

see https://github.com/JabRef/jabref/issues/6626#issuecomment-712705920 ;) =||= Thanks!  I'm so grateful to all the JabRef developers.
 =||= "Fixed columns shrink in width when enlarging the JabRef window"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

In method 'resize', in order to make sure that we are staying under the total table width, the program used to reduce the newSize by two for every column. Cause the method will be call for many times, that will occur the problem which shown in the video in issue 6818. I do a little bit modify for this implement of controlling width, which is reduce the width only if the current width exceed the total width and only reduce for the surplus part.
Fixes #6818 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

Before:

https://user-images.githubusercontent.com/60515999/110437190-12273d80-80f0-11eb-966c-4797901d20a9.mp4



After:

https://user-images.githubusercontent.com/60515999/110437211-19e6e200-80f0-11eb-830e-922142c4a7f3.mp4

"Peiqi Yinyinpeiqi03/11/21, 06:07:16 PM
7517.07518"UI: ""Export order"" --> ""Save order""""For JabRef 5.3--2021-03-11--8bb7668,
in Options -> Preferences, Tab File, there is a section entitled ""Export sort order"":
![JabRef-Pref-SortOrder](https://user-images.githubusercontent.com/6931104/110918869-ee483f80-831b-11eb-9503-96f42cf9b2db.png)

Same in Library -> Library properties:
![JabRef-Library-SortOrder](https://user-images.githubusercontent.com/6931104/110918961-05872d00-831c-11eb-975c-0456e26feb06.png)


**Is your suggestion for improvement related to a problem? Please describe.**
Currently, these items do not affect the sort order when _exporting_ entries (like using File -> Export).
They alter the sort order when _saving_ the library.

**Describe the solution you'd like**
Make clear that these items affect the saving order by changing ""Export [...]"" into ""Save [>...]""""I took a deeper lok at the code, they are both the save order for the library and for the export.
The savePreferences contain the sort Order 
https://github.com/JabRef/jabref/blob/7f4c36c03629498db8e56281906241a82846e1e3/src/main/java/org/jabref/logic/exporter/TemplateExporter.java#L232
 =||= I think I found a bug with regard to the export, theredfore I close this issue =||= I would say ""Save order"" is still better since it then includes the normal file save as well as export. Maybe even make it very explicit and say ""Save and export order""? =||= I second @tobiasdiez about ""Save and export order""! =||= I would suggest to have separate options for saving the library and exporting (selected entries). The reason ist that I use SVN to follow changes of the libraray that is used by many members of our institute. Changing the save order always confuses the file versioning... =||= For me - complete screenshots to understand the issue

Export is correct:

![grafik](https://user-images.githubusercontent.com/1366654/112886213-e802e300-90d1-11eb-8e44-82495fcaa142.png)

Library properties incorrect:

![grafik](https://user-images.githubusercontent.com/1366654/112886270-fc46e000-90d1-11eb-8ba6-b8f4583e78c3.png)
 =||= Yes, that would be perfect! =||= Now merged. Please note that the latest branch is now called ""main"" instead of master
 =||= Works fine, great! =||= "Change export to save"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

fix for 7517, change Export to Save
Fixes #7517 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Peiqi Yinyinpeiqi04/05/21, 09:15:20 PM
7515.07519Snap build fails"I noticed that the snapcraft build fails:


Maybe related to https://github.com/JabRef/jabref/pull/7447 ?

@LyzardKing  any idea?
```
The interpreter 'python3' for 'lib/jabrefHost.py' was resolved to '/usr/bin/python3'.
The command 'lib/jabrefHost.py' has been changed to '/usr/bin/python3 $SNAP/lib/jabrefHost.py' to safely account for the interpreter.
Failed to generate snap metadata: The specified command '/usr/bin/python3 $SNAP/lib/jabrefHost.py' defined in the app 'browser-proxy' does not match the pattern expected by snapd.
The command must consist only of alphanumeric characters, spaces, and the following special characters: / . _ # : $ -
Build failed
```""That might be the issue... if it worked previously.
It ""should"" find the correct python path in the snap as well, and from a first quick test it seems to work...
but I'll try and debug the new snap as soon as possible =||= I removed the env declaration from the snap and it seems to work.
I assume the problem is with the fact that the python location is not in the jabref snap but in the base snap.. =||= "Revert env path in snap python"Fixes #7515 
The snap cannot correctly unpack the env declaration, since python is not contained in the snap but is in a base snap (core18)
This fix reverts only the version in the snap, so the other builds still work with the env variables.

The flatpak needs checking.

- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Galileo SartorLyzardKing03/12/21, 11:50:24 AM
7481.07520"The ""custom colors"" window for group color selection loads theme partially""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.3--2021-03-01--cfb504c <!-- version as shown in the about box --> on Windows 10 10.0 amd64 <!-- Windows 10|Ubuntu 14.04|Mac OS X 10.8|... -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Create new group
2. Under ""Color"", choose ""Custom Color...""
3. And we see the mix-theme window
![2021-03-01 22_44_58-_Mendeley-link bib – JabRef](https://user-images.githubusercontent.com/53798617/109569470-6888f080-7ae0-11eb-82af-a3218aae60b4.png)


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

""Thanks for the report. The Dark.css needs to be modified to add css for the ColorPicker dialog.
I used scenic view to display the hierarchy, the style class is  `controls-pane`
<img width=""1734"" alt=""grafik"" src=""https://user-images.githubusercontent.com/320228/109864980-cd208880-7c63-11eb-81d8-418f329f9c42.png"">
 =||= May I have this one? And is this the preferred way to request an issue? =||= "Extends dark theme to group custom-color-picker"fixes  #7481
Color fix

Dark.css update to extend to the custom color picker
Custom-color-picker background was white instead of dark

Custom-color-picker background is now dark and matches dark theme


- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

<img width=""625"" alt=""Screen Shot 2021-03-12 at 1 49 24 PM"" src=""https://user-images.githubusercontent.com/56512349/110991076-c2d44d80-8339-11eb-80bb-9979d7b53387.png"">"t.pettytp-100003/13/21, 03:54:04 PM
7465.07523Double-click onto PDF in file list should just open the file"Right now, when a file associated to an entry under the 'General' tab is double-clicked, a prompt opens which asks for changing the file location, description or type. 
As this operation is usually done not more than once, a more convenient behavior would be just to open the file. ""Good idea, the dialog should then become available through a new right-click > Edit option. =||= @tobiasdiez In fact, that option already exists. Only the change of the double-click would be necessary.  =||= Is this issue still open to submissions? I would like to take a crack at it
 =||= @divyanshmishra19  Sure, go ahead! Make sure to follow our [contribution guide](https://github.com/JabRef/jabref/blob/master/CONTRIBUTING.md) =||= "Fix double-click onto file in file list to just open the file"Fixes #7465

Now double click onto the file just open the file and edit prompt can be accessed through a new right-click > Edit option.



- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mohitmohit03803/13/21, 04:15:55 PM
5522.07547Dark theme: Visibility problems with current colouring scheme (group colouring and scroll bars)"JabRef 5.0.0-dev--2019-10-26----9fd49bcb2
Windows 10 10.0 amd64 
Java 12.0.2

The current colour scheme employed for the Dark Theme, has a few problems (see also https://github.com/JabRef/jabref/issues/5516). Among those are that the group colouration (indicating that the selected item was assigned to the coloured group) makes it sometimes impossible to see the number of assigned group items: Basically the green colour makes it impossible to see the underlying greyish to whitish colour of the item number.

Furthermore, the better visibility of scroll bars which was recently introduced (https://github.com/JabRef/jabref/issues/5374; https://github.com/JabRef/jabref/pull/5515) does not apply to the current dark theme (again due to the colouring scheme used for the scroll bars).

The following screenshots exemplify both problems. Maybe it would be worthwhile to have a separate label for problems that specifically just relate to the dark theme (since I reckon many users might not even be affected by them, since they use the default light theme).

![Untitled](https://user-images.githubusercontent.com/12767489/67626158-5093c380-f83f-11e9-860e-343469364b18.png)


![Untitled1](https://user-images.githubusercontent.com/12767489/67626176-9cdf0380-f83f-11e9-9a23-a89a80dac849.png)


""Preview Panel in OpenOffice styles needs also to be adapted.  Refs #5463 
Select  View -> OpenOffice/LibreOfice  ->  Select style

![grafik](https://user-images.githubusercontent.com/320228/67701004-6d4f0900-f9af-11e9-94e2-b08e0ed7de62.png)
 =||= Preview in the preferences is also affected:

![grafik](https://user-images.githubusercontent.com/320228/68050724-12d2e700-fce6-11e9-9566-13f7458c6082.png)
 =||= And there is another issue: Some textfields show the text with black color, but only white on hovering.
e.g. in the import tab =||= Thanks to @ageofadz this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= JabRef 5.0.0-dev--2019-11-24----8780a5632
Windows 10 10.0 amd64 
Java 13.0.1

While there have been changes, these have not addressed the issues reported here (completely):

1) The group colouration (indicating that the selected item was assigned to the coloured group) makes it still impossible to see the number of assigned group items. The colour has changed from green to greyish-white, but since the font colour is white, the numbers are still barely visible.

2) Similarly, the scroll bar is still basically invisible.

For 1) and 2) see:
![Untitled](https://user-images.githubusercontent.com/12767489/69500702-60153380-0ef5-11ea-8007-a0d833dd11f2.png)


3) The problem reported in https://github.com/JabRef/jabref/issues/5522#issuecomment-548920940 also persists.


It should be relatively (?) straight-forward to fix problem (1) and (2): Just use a different colour for the group colouration and the scroll bars and the problem should be solved. Problem (3) might involved a bit more coding (?). =||= Note, that there is another colouring problem. When you try to assign an item to a new group, using drag'n'drop, the respective group is coloured in pink, which also makes it nearly impossible to see the name of the group.

![Untitled2](https://user-images.githubusercontent.com/12767489/69500820-78398280-0ef6-11ea-8cda-6a753557b3b7.png)

 =||= @tobiasdiez I think this issue needs to be re-opened (see problems reported above). =||= @ageofadz do you have time to create a follow-up PR, which also fixes the remaining issues? That would be great! Let me know in case you are hitting a wall and need help navigating the code (although by now you should know where to look more or less). =||= An overview of the solved problems:
- [x] merge dialog
- [x] group indicator in the groups list
- [x] preview panel in OO style selection
- [ ] OO manage citations dialog
- [x] entry preview in preferences
- [ ] [textfields black/only on hover](https://github.com/JabRef/jabref/issues/5522#issuecomment-548921233)
- [x] scrollbars (maybe on purpose not fixed?) Fixed by #6368.
- [x] drag'n'drop text on pink background. Fixed by #6368. =||= Since you are in the process of improving the dark theme, you may also consider issue #5699. =||= No, I wasn't really fixing the dark theme right now, I was just doing a little bit housekeeping. Try'n'error with JavaFX CSS gives me always a headache.
But thanks for the note on the other glitch with the dialogs. This is probably a bit more complicated to fix. =||= @mlep If you like, you can give it a shot. If you are quick, we can probably include the fix in the 5.0 release. =||= I would need to learn Java very quickly!  :wink:  =||= I love the dark theme but cannot use it since the scroll bar slider is not visible at all. This is with 5.0 and 5.1 (daily updated). Is this very hard to fix? Is there a way to define colors
for window elements externally? Thanks =||= Still persists...such a pitty that the beautiful dark theme is unusable due to the invisible scroll bar. I am not a java programmer but is this really that difficult to fix? =||= @sambo57u You don't have to be a java programmer. It's just styling via css. The base theme:
https://github.com/JabRef/jabref/blob/master/src/main/java/org/jabref/gui/Base.css

The dark theme:
https://github.com/JabRef/jabref/blob/eccfb577b7dc29e55ece8acbfe02bf6895408e39/src/main/java/org/jabref/gui/Dark.css

CSS Reference Guide.
https://openjfx.io/javadoc/13/javafx.graphics/javafx/scene/doc-files/cssref.html
 =||= Sorry, I am 62 year old user. All this stuff is unfamiliar to me. I had seen a related issue to
this earlier #5646. =||= Thanks to @MootezSaaD the dark theme got some love and many issues are now fixed. In particular, the scrollbar should be now more visible. 

I've updated https://github.com/JabRef/jabref/issues/5522#issuecomment-589744221 accordingly. =||= Thanks to @dextep  the Preview in the preference is now also fixed. 
From the comment this leaves us with:
 
- [ ] OO manage citations dialog 
- [x] [textfields black/only on hover](https://github.com/JabRef/jabref/issues/5522#issuecomment-548921233) =||= > And there is another issue: Some textfields show the text with black color, but only white on hovering.
> e.g. in the import tab

Can you explain how to reproduce this issue?  =||= OO manage citations dialog seems to be also done

![image](https://user-images.githubusercontent.com/20928760/84570990-de9dc980-ad90-11ea-9583-98824acb5fdf.png)
 =||= @dextep  Yes, thanks, the style selection was probably fixed with your preview changes.

The only other dialog is Manage citations:
1. Open new Libre Office writer document
2 Connect to LibreOffice from JabRef
3. Insert some citations/references
4. Open Manage citations

The relevant code is here:
https://github.com/JabRef/jabref/blob/8520833e684aa9e305dd8745e45696ffd6d984fb/src/main/java/org/jabref/gui/openoffice/ManageCitationsDialogView.java#L79-L91



![grafik](https://user-images.githubusercontent.com/320228/84571005-0c830e00-ad91-11ea-8f97-3bb436ccb06a.png)

 =||= JabRef 5.1--2020-06-13--be30871
Windows 10 10.0 amd64 
Java 14.0.1

Cheers for the improvements. Well done!

Note, however, that the issue with the group coloration and the item number persists, if an item is assigned to a new group (https://github.com/JabRef/jabref/issues/5522#issuecomment-557922759), i. e. you get a grey background colour with a white item count.

Furthermore, the current chosen colour to reflect group assignment (which works, if items are NOT assigned to new groups), is difficult to discern in the dark theme, especially if the item count is turned off. You basically have an olive-brownish colour indicating group assignment on a dark background. While I appreciate this was done to follow certain style guidelines (?), it makes it difficult to see whether an item belongs to a group or not. A more prominent colour should be chosen instead. =||= @Siedlerchr unfortunately I can't connect JabRef with OpenOffice, because connecting process doesn't stop. =||= You need at least Version 5.x or newer of Libre Office. And you need to open a (new). document in writer 
For Linux you need libre office common Java library  =||= refs #6353 #6562  =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= JabRef 5.2--2020-12-14--e9be339
Windows 10 10.0 amd64 
Java 14.0.2

The issues mentioned in https://github.com/JabRef/jabref/issues/5522#issuecomment-643632385 persist in the current dev version. =||= JabRef 5.3--2021-03-17--d190268
Windows 10 10.0 amd64 
Java 14.0.2 
JavaFX 16+8

As far as I can tell, all issues mentioned in https://github.com/JabRef/jabref/issues/5522#issuecomment-557922759 have been fixed. Well done!

Note, however, that the issue mentioned in https://github.com/JabRef/jabref/issues/5522#issuecomment-643632385 still persists:

>Furthermore, the current chosen colour to reflect group assignment (which works, if items are NOT assigned to new groups), is difficult to discern in the dark theme, especially if the item count is turned off. You basically have an olive-brownish colour indicating group assignment on a dark background. While I appreciate this was done to follow certain style guidelines (?), it makes it difficult to see whether an item belongs to a group or not. A more prominent colour should be chosen instead.

Below I provide a screenshot to visualize this problem:
![Untitled](https://user-images.githubusercontent.com/12767489/111493567-f6e6ae80-873d-11eb-9b8c-05cfcd3e4057.png)


 =||= "Fix for issue 5522 and some UI changes."Fixes #5522 

1. Adding patterns to the entries background in dark theme.
<img width=""1440"" alt=""Screenshot 2021-03-16 at 8 39 32 PM"" src=""https://user-images.githubusercontent.com/62339705/111332392-c0565880-8697-11eb-9bac-1236aa7f44c3.png"">

2. Visibility issue with the group item number coloration when an item is assigned to a new group as mentioned in https://github.com/JabRef/jabref/issues/5522#issuecomment-643632385
<img width=""640"" alt=""Screenshot 2021-03-16 at 8 52 01 PM"" src=""https://user-images.githubusercontent.com/62339705/111334434-900fb980-8699-11eb-8cdc-ee7602ffc7a9.png"">




- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mohitmohit03803/17/21, 11:50:21 AM
7525.07548File renaming functions are greyed out (deactivated) for unclear reasons"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.2, 5.3 and 100.0.0 (commit 0dd4de752) on Linuxmint-20.1 and LinuxMint-19.3.

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

File rename commands are greyed out and not active, and the reason is not clear for the user. Moreover, these commands are inactivated at the moments when they are badly needed!

Steps to reproduce the behavior:
1. Start the relevant version of the JabRef; 
2. Load some .bib library; the file used for testing is in the .zip below:
[new.zip](https://github.com/JabRef/jabref/files/6134973/new.zip)
3. Populate directory ""new/"" with some OA PDFs having the same names as in the .bib file;
4. For testing, the following settings were used:
    -- Autolink files: use regular expression `**/[year]_[auth].*\\.[extension]`;
    -- File format pattern: `[year]_[auth]_[firstpage]`;
    -- File directory pattern: `by-author/[authIni1]/[auth]`;
5. Right-click on the file linkage box in the entry editing window;
6. For version 5.2, both ""Move to file directory..."" are always disabled, but ""Rename to a defined pattern"" is active and works: 
![Screenshot from 2021-03-13 15-37-22](https://user-images.githubusercontent.com/10668420/111034169-fb008c80-841c-11eb-8201-55c06b54cc5e.png)
7. In 5.3 and 100.x (the current master tip), the ""Rename to a defined..."" and ""Move to file directory and rename..."" are enabled at the beginning, but are disable after the first rename, with now means to reenable them except shutting down the whole JabRef and starting it again. Changing the BibTeX entry (e.g. adding page numbers, that potentially change the ""defined name pattern"") does not re-enable these fields:
![Screenshot from 2021-03-13 15-48-56](https://user-images.githubusercontent.com/10668420/111034459-71ea5500-841e-11eb-8a79-b818a419f01a.png)

Either the commands should be re-enabled after edit, or not disabled at all; otherwise the renaming feature (which I use a lot!) becomes next to unusable...""Hi @sauliusg , I think I located the problem and fixed it. Would you be so kind to test the build at https://builds.jabref.org/pull/7548/merge/ if this works for you? Be aware that this is a development build, so please backup your database first.

Also I saw that changing the default file link name pattern in the preferences requires a restart to take effect. This is probably a bug for later - since refactoring the preferences is a major background issue. But the menu entry should be enabled again if you change the entry. 

Most important is that you can continue to work with your library. =||= Dear calixtus,

thank you for the quick fix!

> Hi @sauliusg , I think I located the problem and fixed it. Would you be so kind to test the build at https://builds.jabref.org/pull/7548/merge/ if this works for you? Be aware that this is a development build, so please backup your database first.

I can confirm that 'JabRef-5.3-portable_linux.tar.gz' from the above directory works as expected. The file renaming functions are active; renaming or renaming and moving to the destination directory work as expected. After that they are greyed out, but editing the entry (changing page numbers or author name) re-enables them again. So far everything fine.

> Also I saw that changing the default file link name pattern in the preferences requires a restart to take effect. This is probably a bug for later - since refactoring the preferences is a major background issue. 

I tested with my pre-configured patterns from JabRef-5.2 configuration, and it works. I'll check later how changing the pattern(s) influences the functionality.

> But the menu entry should be enabled again if you change the entry.

Indeed, it is.

> Most important is that you can continue to work with your library.

With this change I can work fine! =||= "Fixed missing trigger for linked file operations"Fixes #7525

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus03/18/21, 12:32:49 PM
4129.07552Replace default group icon by small circle"The current triangle has the disadvantage of being to small to show color and, moreover, can easily be mistaken for the arrow symbol that expands/collapses a group hierarchy. 

Material design icons provide a full circle but this one is slightly to large. 

@halirutan may I assign you this issue since you are our expert in creating custom font-based icons (e.g. a smaller circle or whatever you think is suitable)?""I might be mistaken, but I believe this is not possible. When I encode the SVG's into a TTF, only their shapes, but not their absolute size is taken into account. They are all resized according to the font settings. To give an example, the [VSCode icon](https://upload.wikimedia.org/wikipedia/commons/2/2d/Visual_Studio_Code_1.18_icon.svg) I added recently has itself a size of 260pt x 260pt.

<img width=""793"" alt=""screen shot 2018-06-14 at 15 56 20"" src=""https://user-images.githubusercontent.com/511683/41416809-00516846-6fec-11e8-8e22-cb331837952e.png"">

I did not change anything in this icon and directly imported it into the TTF where it was rescaled to match the size of the other glyphs. As you can imagine, creating a smaller circle would be useless, as it would be resized to the original glyph-size.

What you can try is to use a font-size that is larger for the group-icons.

 =||= Just a guess, but what happens if you add transparent space around the icon?  =||= Just another Idea: Styling the standard ""middle dot' (\u00B7 or ·) is not doing the Trick? I think it should be part of most standard fonts, but have not checked it... =||= @tobiasdiez That might work but it depends on the tool that builds the font from the SVG. Some tools simply grab all paths and put them into the icon. Currently, I don't have that much time at hand as building and updating the TTF is not an automatic process at the moment. Maybe someone can check if using the normal circle we already have in a different size works too. =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= Maybe one can also use a scaling of the materialdesign dot (or maybe they provide in the meantime a different dot). =||= Thanks to @mohit038 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "UI: Fix for group icon"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #4129

Replaced the default group play icon by small circle.

<img width=""640"" alt=""Screenshot 2021-03-20 at 4 13 02 PM"" src=""https://user-images.githubusercontent.com/62339705/111866991-30662680-8997-11eb-8e94-15405cb0459b.png"">


I think this also fixes #7550.

<img width=""640"" alt=""Screenshot 2021-03-20 at 4 59 33 PM"" src=""https://user-images.githubusercontent.com/62339705/111868243-d5383200-899e-11eb-8350-d05285ed782b.png"">

<img width=""640"" alt=""Screenshot 2021-03-20 at 5 07 50 PM"" src=""https://user-images.githubusercontent.com/62339705/111868277-044ea380-899f-11eb-8b1f-71685c6da22e.png"">

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mohitmohit03803/20/21, 11:36:23 PM
7550.07552Monocolor for icons "<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version

JabRef 5.3--2021-03-17--d190268
Linux 5.8.18-050818-generic amd64 
Java 15.0.2 
JavaFX 16+8

on Ubuntu 20.04

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Steps to reproduce the behavior:
1. Set either the priority or read status, the icons are mono-color and the same all options, making them indistinguishable visually. (But the status in the source file is correctly set)""I will take a look if it's alright. =||= @tp-1000  Sure, that would be great. You find the corresponding Icons in the JabRefIcons Enum in IconTheme.java
You can show the columns in the main table by adding the column in the preferences -> Entry Table -> Enable special fields 
Then you can add:
Read status, Priority, Relevance to the list =||= I might be able to do something about this, if it's alright. =||= I'm pretty sure it will be resolved by #7552 and #7550 requires no further action. =||= Yep. The group ui PR fixes this as will. 
However, thanks for your interest. There are still enough other open issues... =||= Thanks to @mohit038 this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "UI: Fix for group icon"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #4129

Replaced the default group play icon by small circle.

<img width=""640"" alt=""Screenshot 2021-03-20 at 4 13 02 PM"" src=""https://user-images.githubusercontent.com/62339705/111866991-30662680-8997-11eb-8e94-15405cb0459b.png"">


I think this also fixes #7550.

<img width=""640"" alt=""Screenshot 2021-03-20 at 4 59 33 PM"" src=""https://user-images.githubusercontent.com/62339705/111868243-d5383200-899e-11eb-8350-d05285ed782b.png"">

<img width=""640"" alt=""Screenshot 2021-03-20 at 5 07 50 PM"" src=""https://user-images.githubusercontent.com/62339705/111868277-044ea380-899f-11eb-8b1f-71685c6da22e.png"">

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Mohitmohit03803/20/21, 11:36:23 PM
6851.07555Drag & drop of PDF: not on empty library"JabRef 5.2--2020-09-02--5c9edc9
Linux 4.9.0-13-amd64 amd64 
Java 14.0.2

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

Drag & drop of a PDF file (to create a new entry) does not work if the library file has no entry.

Steps to reproduce the behavior:
1. Menu File --> New library (the table entry space displays ""No content in table"")
2. Drag & drop a pdf file in the entry table space.
Nothing happens""The Drag and Drop listener operate on the TableRow, that means you need at least one entry.
Solution: Add drag and drop handler for tableView as well in MainTable.java =||= I'll take a look. =||= Hey can i work on this issue?
 =||= @aakarshvats638 I'll let you know if I need a hand. =||= @Siedlerchr  I wanted to check on this issue, but the last version on https://builds.jabref.org/master/ was published on March 22. Is there a problem? =||= @mlep  Yep, our Apple developer account expired, we have to renew it to build for mac again. However, you can use the artifact download https://github.com/JabRef/jabref/actions/runs/687970576  (contains all Linux versions)  =||= @tp-1000 Thank you for solving this issue. It now works as expected!
@Siedlerchr Thank you for the pointer. =||= "Fix drag and drop into empty library"fixes #6851
Drag & Drop into empty library

	Fixes issue preventing files from being ""dragged & dropped"" into an
	empty library

	Added a drag/drop handlers on the table-view to allow for files
	to be drag & drop into an empty library

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."t.pettytp-100003/24/21, 06:57:11 PM
7554.07558Duplicate groups in an input file are not detected"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.2, 5.3, master commit 049acb9 on Linuxmint-20.1.

JabRef 100.0.0
Linux 5.8.0-45-generic amd64
Java 14.0.2
JavaFX 16+8

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the behaviour persists

Duplicated groups in different branches of the group tree are not detected when a database that contains them is read in. 

But on a second thought, and after playing a bit with JabRef 5.x master branch, I start thinking that this is not a bug but actually a very useful feature! I've opened a detailed discussion in https://discourse.jabref.org/t/hierarchical-groups-with-duplicated-names-are-actually-working-in-jabref-5-x/2619. So don't fix it!

Steps to reproduce the behavior:
1. Start a new JabRef process, create a new library, add an entry, save the database as 'new.bib' (see the attached 'biblio.zip');
2. Show the groups interface, create two groups 'Human' and 'Computer', create a subgroup 'Languages' in 'Human', save over the 'new.bib';
3. Assign the new entry to 'Human/Languages';
4. Copy 'new.bib' to 'new-duplicate-group.bib';
5. Open the 'new-duplicate-group.bib' with a text editor, and duplicate the 'Languages' group in the 'Computer' branch:
```
saulius@starta duplicate-groups-created-by-hand-are-not-detected/ $ diff -u new.bib new-duplicate-group.bib 
--- new.bib	2021-03-20 14:13:07.189182296 +0200
+++ new-duplicate-group.bib	2021-03-20 13:35:47.348262111 +0200
@@ -17,4 +17,5 @@
 1 StaticGroup:Human\;2\;1\;0x8a8a8aff\;\;\;;
 2 StaticGroup:Languages\;0\;1\;0x8a8a8aff\;\;\;;
 1 StaticGroup:Computer\;0\;1\;0x8a8a8aff\;\;\;;
+2 StaticGroup:Languages\;0\;1\;0x6a7a9aff\;\;\;;
 }
```
The resulting BibTeX files are attached in 'biblio.zip': 
[biblio.zip](https://github.com/JabRef/jabref/files/6175830/biblio.zip)

6. Load the edited file into JabRef; no error report is produced, both groups are shown (correctly?), even though the GUI would not allow me to create such situation; the entry is reported to belong to both groups: 
![Screenshot from 2021-03-20 13-37-01](https://user-images.githubusercontent.com/10668420/111869982-aca63d00-898a-11eb-8d5c-abfd571bc3c8.png)

The manually created duplicate is used only to reproduce a minimal example of this behaviour; in real life large number of duplicates emerged when porting previous group trees from the previous revisions of my database.

This behaviour actually seems to be very useful, since it allows me to create (once again!) groups with identical names in different places of the group hierarchy, and assignment to one such group adds the same entry to all such groups, which might be very useful (detailed discussion in https://discourse.jabref.org/t/hierarchical-groups-with-duplicated-names-are-actually-working-in-jabref-5-x/2619 ).

This is how it looks after some editing of the database:
![Screenshot from 2021-03-20 16-38-55](https://user-images.githubusercontent.com/10668420/111873846-feef5a00-899a-11eb-9cc1-1241f07c17c9.png)

The resulting bibtex file is added in 'experimets-with-group-hierarchy.zip'.
[experimets-with-group-hierarchy.zip](https://github.com/JabRef/jabref/files/6175825/experimets-with-group-hierarchy.zip)


<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""We disallowed to have two groups with the same name (even in different hierarchical levels / subtrees), because they would contain exactly the same entries (as you have remarked). This lead to many confusions for users, so we prevented it. See https://github.com/JabRef/jabref/issues/1495 for details.

I'm not sure if we really need a warning message. The only way to get duplicate names is by manually editing the bib file (or upgrading from an older version). I would say that's pretty rare. =||= > We disallowed to have two groups with the same name (even in different hierarchical levels / subtrees), because they would contain exactly the same entries (as you have remarked). This lead to many confusions for users, so we prevented it. See #1495 for details.

I think the bibliography tool should allow to do what users want, and not to ""disallow"" something. JabRef supports a lot of very different bibliography management styles, which is its big advantage, but the block in the GUI that inhibits creation of groups with the same name, even in different parts of the hierarchy, is a serious usability issue, and in this particular respect JabRef clearly looses to Zotero :( (even thougt the general policy of JabRef is so much superior of what other bibliography managers offer!)

> I'm not sure if we really need a warning message. The only way to get duplicate names is by manually editing the bib file (or upgrading from an older version). I would say that's pretty rare.

If a group with the same name in different places of the hierarchy (or even in the same group) is being created, it would be nice if the GUI would issue a warning here, not a blocking error. The warning would explain that the group with the same name already exists (and mention its places in the hierarchy), but let the user do what he/she wants. Explicit and complete information wold remove most of confusion, IMHO. The GUI could even suggest a unique group name based on its current place in the group hierarchy.
 =||= > The only way to get duplicate names is by manually editing the bib file (or upgrading from an older version). I would say that's pretty rare.

In my case, it is not rare but *ubiquitous*, and judging from other responses in #1495 and other related posts many users miss the group hierarchy with arbitrary group names. I tried to use a workaround in #1495, like ""Diabetes > Treatment"", and with the current implementation it is very, very inconvenient. =||= So lets sum up the current situation:

1. The current group implementation has useful features (nicely summarised in #629: independence of BibTeX entries, possibility to manually edit BibTeX file for grouping, among the others);
2. Users want flexible hierarchy and want to be able to create groups with whatever names they want, without a tool standing in their way;

A possible (easy?) way to reconcile these two requirements could be:

- JabRef supports (as it already does now!) groups with *identical* names anywhere in the hierarchy; no changes is needed here, just the promise that the future versions of JabRef will not ""disallow"" such use of JabRef :);
- The GUI allows creating such groups if the user wants to (so that we do not have to save the database, close JabeRef, edit the file by hand, restart Jabref every time I want the group that has a name already in the hierarchy). For this and the following functionality, a change would be needed in JabRef but the change will be small and localised (affecting, presumably, only the group creation dialogue).
- The GUI *warns* the user that the group already exists elsewhere in the hierarchy, and that of created this group will contain *the* *same* entries as all other groups with the same name (I estimate that 50% cases this is what is actually needed);
- The GUI *suggests* a unique name based on the hierarchy, by appending previous levels of the tree, and possibly numbering, until the name becomes unique; a user can chose that name by a single click or can continue using the duplicated name (with merged entries.

Example:
```
Groups:
Bioinformatics
- Drug design
-- Diabetes
--- Treatment
Medicine
- Diabetes mellitus
-- Treatment
- Diabetes
-- Treatment
- Asthma
```
When creating a subgroup called `Treatment` in `Asthma`, the GUI could respond:
```
Warning:
A group named 'Treatment' already exists in 'Medicine/Diabetes/Treatment', 'Medicine/Diabetes mellitus/Treatment'. 
If you create the group 'Treatment' here, it will contain entries from all mentioned groups.
[x] Use a unique name 'Treatment (Asthma)'
[OK] <- the button is *always* active!
```
I deliberately suggest using 'Treatment (Asthma)' instead of 'Asthma/Treatment' to avoid impression that the group name is strictly bound to group's position in the hierarchy. It is not; so moving group 'Treatment (Asthma)', say, one level up to 'Medicine' would not make its name ""incorrect"", in the sense that the group still contains papers about asthma treatment no matter where in the hierarchy it resides. This also means that JabRef does not need to bother about renaming groups when their position in the hierarchy changes (as is implemented now).

The suggested change would:
- mostly solve most peoples problems with the current group implementation;
- make the suggested workaround for group uniqueness more usable;
- Add *additional* capability to JabRef (at no or very little implementation cost!) that would allow the same group to be placed in different parts of the hierarchy; a use case demonstrated by my SQL example shows that this can be very useful.
- Explicit warnings in group creation dialogue and complete information about the same group names wold remove (most of) the confusion. =||= PS. If the developers agree on such (or similar) design I would take a the issue and offer a PR :) =||= > The only way to get duplicate names is by manually editing the bib file (or upgrading from an older version). I would say that's pretty rare.

Another use case for groups with the same name – have a look at the screenshot example with computer/human languages:
The groups 'Language' in different branches of hierarchies are union groups, and contain (under the current implementation!) different sets of papers, since they contain different subgroups (Programming/Languages – 17 papers; Data description/Languages – 13 papers). As expected. These groups have no papers assigned to them directly; this is not needed since the purpose of these groups is to *summarise* all papers assigned to their subgroups, which they do nicely.

In this setting there is no need to name the 'Language' groups differently, that would be very awkward. Also, the group's semantics will not change if I move them to different location in the tree (with all their subgroups), for example into 'Computers/Software' as opposed to 'Computers/Hardware' at some stage. =||= A logic (classification) case for non-unique group names:

- currently, a paper can belong to several different groups (of course :);
- but, by the same token, a *subgroup* can also belong to several different super-groups (together with all papers assigned to it)! =||= > I'm not sure if we really need a warning message.

If you mean a warning when opening file with duplicated group names, then I agree, there is not need for the warning there. Which just means that it is a legit situation :) =||= I agree with you that it sometimes could be advantages to have the same group in two different places. However, 
>  subgroup can also belong to several different super-groups (together with all papers assigned to it)

is a highly unusual concept from a user-interface perspective. For example, files with the same name but in different folders don't automatically sync their content. I think we should really stick to the tree nature of the group interface, meaning that groups are independent. 

As a way forward, I would propose the following:
- Allow to have groups with the same name in different positions. I.e. properly fix https://github.com/JabRef/jabref/issues/1495. Warning: this is might be very complicated. 
- Once this is done, we can think about adding a ""symlink"" group that acts as a copy of a different group.

What do you think? Help on this of course very much appreciated. =||= > I agree with you that it sometimes could be advantages to have the same group in two different places.

ACK.

> However,
> 
> > subgroup can also belong to several different super-groups (together with all papers assigned to it)
> 
> is a highly unusual concept from a user-interface perspective. 

I was thinking about this. It could be that we see the concept as unusual only because we are so much used to the file system tree structure. But file system tree is a *bad* tool for bibliography management (tried it, switched to JabRef :) ), precisely because we can not place the same file in several different directories (or rather we can, but this is not very convenient).

Groups in bibliography managers have the advantage that we can place the *same* file (or the *same* subgroup) in different hierarchies. In this case groups serve as a sort of ""canned queries"" on the database.

When one gets used to the current implementation of JabRef groups, one starts thinking that the group tree and the group assignments are actually disjoint features. A tree is described in `@Comment{jabref-meta: grouping:` element, no matter how the entries are assigned to grops; the group assignments is written in entries, no matter how the groups are moved around in the tree. Orthogonality of these two features is nice. Once you realise this, the uniqueness of group name no longer seems important or necessary, and synonymous groups can have many uses.

> For example, files with the same name but in different folders don't automatically sync their content.

Well, this is not always true. On Unix (and Unix-like systems like Linux and probably on Mac), a hard-linked file will be ""syncronised"" across two directories. Viz.:

```
saulius@tasmanijos-velnias hl-demo/ $ mkdir folder1
saulius@tasmanijos-velnias hl-demo/ $ mkdir folder2
saulius@tasmanijos-velnias hl-demo/ $ echo ""Initial content."" > folder1/file.txt
saulius@tasmanijos-velnias hl-demo/ $ ln -v folder1/file.txt folder2
'folder2/file.txt' => 'folder1/file.txt'
saulius@tasmanijos-velnias hl-demo/ $ head folder?/*
==> folder1/file.txt <==
Initial content.

==> folder2/file.txt <==
Initial content.
saulius@tasmanijos-velnias hl-demo/ $ echo ""Replacing content in folder1..."" > folder1/file.txt
saulius@tasmanijos-velnias hl-demo/ $ head folder?/*
==> folder1/file.txt <==
Replacing content in folder1...

==> folder2/file.txt <==
Replacing content in folder1...
```

So the concept of writing things into one place and finding the change in another place is not that foreign, even if sometimes different to trace.

The concept of ""same group in different tree branches"" is quite similar to hard links in Unix (not soft links).

> I think we should really stick to the tree nature of the group interface, meaning that groups are independent.

Here more input from users would be very welcome. I and you can see the situation one way, but it is hard to see how other users who did not see the code internals (or even the BibTeX database internals) will perceive the situation. I have started a discussion on https://discourse.jabref.org/t/hierarchical-groups-with-duplicated-names-are-actually-working-in-jabref-5-x/2619, as was advised in JabRef instructions, but so far it did not attract much comments or voting (well, it's weekend...). Maybe some feedback can be collected there?

I am, personally, currently very enthusiastic about just allowing duplicate group names, with a warning, and start using them. I'm right now playing with the JabRef tip, and all functions with duplicate group names seem to work as expected.

I must admit that I experienced several mysterious ""index out of bound"" exceptions, but they are very difficult to reproduce, and they seem to happen also with unique group names, so I do not know if this is connected with the groups. But in all in all having same-name groups does not seem to cause any bug trouble and works as expected.

> As a way forward, I would propose the following:
> 
>  Allow to have groups with the same name in different positions. I.e. properly fix #1495. Warning: this is might be very complicated.

I would be very happy with such solution. However, as you say, the fix might be very complicated, so it makes sense to see what can be done with _simple_ means, even if functionality is not ideal.

An astonishingly simple fix is in my PR https://github.com/JabRef/jabref/pull/7558 .

Of course, we (I) can try to implement the true group hierarchy, naming groups 'Computers/Programming/Languages' and 'Human/Languages', as suggested as a workaround in #1495, and showing just the leaf names in the group tree. I do not think that renaming a group or moving it in the hierarchy will cause big performance issues; groups tend to be small on average, I trust they are in dictionaries (so finding a group is constant time op), and renaming the group has exactly the same performance overhead even with the current implementation (since all entries belonging to the group must be updated when the group is renamed). So this sounds doable.

But, as said, maybe a ""lazy"" solution proposed in the above PR is just good enough? If so we can have it as a semi-permanent solution and move on. At my site, many other things preclude migration to JabRef 5.4 (from 5.2), for example timestamp issue (https://github.com/JabRef/jabref/issues/7527), file parsing issue (https://github.com/JabRef/jabref/issues/7553).

>     * Once this is done, we can think about adding a ""symlink"" group that acts as a copy of a different group.

Currently entry assignments to groups works as hard links, and this seems to be enough. If the full power of tree hierarchy is implemented (i.e. we can assign whatever names we want to groups in different tree branches), then symlinks no longer seem necessary. Probably they will be an overkill, IMHO.

> What do you think? Help on this of course very much appreciated.

I'll be more than happy to give any help I can, in implementation or otherwise; just my time resources are not always abundant (but I understand that everyone's time is precious :), so I'll do my best).
 =||= > As a way forward, I would propose the following:
> 
>  Allow to have groups with the same name in different positions. I.e. properly fix #1495. Warning: this is might be very complicated.

One more thought about a possible fix:

1. Let's add a unique ID field, an integer, to each group described in `@Comment{jabref-meta: grouping:`. This field shall be unique within the BibTeX file/database, and shall be assigned by JabRef;

E.g.:

```
-----------------vvv----------- The group ID
1 StaticGroup:sg\;1\;2\;1\;0x8a8a8aff\;\;\;;
2 StaticGroup:Bibliometrics\;2\;0\;1\;\;\;\;;
2 StaticGroup:Biochemistry\;3\;0\;1\;\;\;\;;
3 StaticGroup:Carbonic anhydrases\;4\;0\;1\;\;\;\;;
... and so on
````

2. The uniqueness of the group shall be decided not based on its name, but on its ID;
3. In each entry, the `group = {...}` list shall contain group names with IDs appended;
E.g.:

```
group = {Carbonic anhydrases(4), Biochemistry(3)},
```
4. For the user, in the GUI only group names will be displayed, not the IDs.
5. Multiple groups with the same name shall be allowed as per PR https://github.com/JabRef/jabref/pull/7558 (I know, I am biased ;) ); these names can be distinguished by different group IDs assigned automatically by JabRef;

In this way, we will have a unique group `name(id)` string identifying each group for each entry, and the current group implementation remains as it is. From the user's perspective, however, groups can be given any names, even overlapping with other names in the hierarchy. Each entry will be assigned to precisely one unique group, and no ambiguity (or multiple assignments) will emerge.

6. Symlinks to identical groups can be implemented by duplicating the group name+ID, if a user wishes so, in different places of the group hierarchy;
7. When copying an entry to another BibTeX database, old IDs would be discarded and new matches will be created based on names and possibly on user feedback (No. 7 is a future enhancement).

Since the ID is always added as a fixed format numeric suffix, no ambiguity ever arises. For instance, if a user names her group ""slaughterhouse(5)"", and JabRef assigns ID 1024 to this group, then the JabRef entries will identify this group as `slaughterhouse(5)(1024)`, and only the last braced number will be interpreted as an ID.

When groups are moved around the tree, or even renamed, no changes need to be done to the BibTeX entries, since groups IDs do not change. Group names and/or IDs no longer need to reflect group's position in the group hierarchy.

There will be hardly more than 10000 groups in a typical database, so the IDs will be comfortable 1 to 4 digit numbers, manageable also by humans.

What is your opinion about such design? =||= The id solution would be the best from an implementation point of view (since then we indeed have an unique identifier). However, the idea was that users can also edit the groups directly by changing the `groups` field. That's no longer possible (without looking up the id of the group...).

The only way I see for this is to use the complete path from the root to the group and save this in the groups field. But then you have to worry about migration... =||= > The id solution would be the best from an implementation point of view (since then we indeed have an unique identifier). However, the idea was that users can also edit the groups directly by changing the `groups` field. That's no longer possible (without looking up the id of the group...).

Thought about that. Editing a BibTeX file is in fact possible, at least as good as it is now:

1. In the current setup, you *have* look up the group name anyway: how do you know otherwise if your group is named ""Asthma>Treatment', 'Treatment (Asthma)' or 'Treatment of asthma'? Capitalisation also matters (checked), so you need to look up if it was 'Treatment' or 'treatment' or 'TREATMENT'. If you do this, you will also find out that it was actually 'treatment(23)' or similar. A command can be as simple as `grep 'group.*=' biblio.tex | grep -i treatment', of 'Edit|Find' in a GUI text editor. And if you mistype, the entry will not show up in any group of your tree, so once again you either need to know your group name precisely by heart or yo need to look it up...
2. Since IDs, as mentioned, will be small integer numbers, and stay stable, they are mildly manageable by humans. When I talk about TCP ports 80 and 22, you do not need to look up in /etc/services to figure out what I am talking about, do you? :) The same will happen for most popular groups.
3. We will have to be able to import entries that do not yet have IDs assigned (e.g. when importing an old style database), or assigned in a different namespace/database (when pasting). In that case, JabRef will have to look up the ID using group name and either use its ID (if the name is unique), create a new ID (if the group did not yet exist) or ask user which group or groups in the hierarchy do they want to put the entry into. Very natural, IMHO.

In short, when editing, the ID number will be a natural extension of the group's name, and can handled together with the name. In JabRef internally ID will be the sole unique index identifying the group.

There is a topic to think – whether just the ID needs to be unique or the combination 'name(ID)', and if just ID is unique then what should JabRef do when it encounters the same ID on the other group... But this is solvable, I believe. =||= > The only way I see for this is to use the complete path from the root to the group and save this in the groups field. But then you have to worry about migration...

Indeed, if you have the full path in the group name, then you need to update it each time the group is moved in the tree. You also need to cope with errors when incorrect path is edited in manually. I think this is a complex solution, and complexity arises from severe denormalisation (in database sense).

In case you have just an ID, you only need to update entries when you rename groups – which you also have to do in the current implementation, and I believe it is working (need to check ;). Moving groups in a tree around does not affect the entries. I would thus favour the 'name(ID)' solution. =||= But finding the name is easy: I just look at the left side bar for the group, and put exactly what I see in the `groups` field and it works. That's harder for the id-based solution (you could add a tooltip but yeah...).

Yes, the ""complete path"" solution also has disadvantages... =||= > But finding the name is easy: I just look at the left side bar for the group, and put exactly what I see in the `groups` field and it works. That's harder for the id-based solution (you could add a tooltip but yeah...).

True, I somehow overlooked this. But then you can not simply copy that text with a mouse :) (or can you?).

But I agree that having no IDs is simpler. This brings us again to a simple implementation with the current group code that just adds possibility to create identically named groups. I have hacked also the delete group possibility, without removing entries from other groups that have the same name (see the updated PR #7558), and it works OK for ""Delete group and subgroups"" command. For just ""Delete subgroups"" command I have troubles (entries are left with the deleted group name), but this behaviour may be related to #7556. =||= Just as a comment from my side: As mentioned by @tobiasdiez you have to be very careful if you allow users to have duplicate groups. Problems I remember from the past (I am afraid, cannot find the respective bug reports anymore, except for https://github.com/JabRef/jabref/issues/1495):

1) In JabRef 3.8.2 all hell broke loose if you had two groups with the same name (inadvertently created!) at the same hierarchy level: when scrolling through the groups tree, you would reach these groups at some point - when that happened, the whole group tree disappeared/was no longer visible and you had to force-quit JabRef to make it usable again (and then manually edit the respective groups names in a text editor, to avoid this from happening again).

2) If you had duplicated group names, removing items from groups could have side-effects that were not obvious to the user. The user might have forgotten that they had these duplicate group names (especially at the time, when no (stable) group name check was implemented in JabRef). Removing the item from one group would also remove it from the group with the duplicated name - even though that was not the intention of the user.

Now, I am not saying, that this will happen with the current JabRef version as well. But I just want to raise awareness, that these decisions can have major implications downstream. =||= Dear @AEgit, thank you very much for the comment.

> Just as a comment from my side: As mentioned by @tobiasdiez you have to be very careful if you allow users to have duplicate groups. Problems I remember from the past (I am afraid, cannot find the respective bug reports anymore, except for #1495):
> 
>    In JabRef 3.8.2 all hell broke loose if you had two groups with the same name (inadvertently created!) at the same hierarchy level: when scrolling through the groups tree, you would reach these groups at some point - when that happened, the whole group tree disappeared/was no longer visible and you had to force-quit JabRef to make it usable again (and then manually edit the respective groups names in a text editor, to avoid this from happening again).

I have checked with my group tree, with all disambiguation prefixes removed: the problem is no longer there in the current master tip and in the suggested PR #7558. The groups, also with duplicated names, can be scrolled and used without problems.

>   If you had duplicated group names, removing items from groups could have side-effects that were not obvious to the user. The user might have forgotten that they had these duplicate group names (especially at the time, when no (stable) group name check was implemented in JabRef).

Sure, the user will not keep in mind all possible configurations and duplications of all groups...

> Removing the item from one group would also remove it from the group with the duplicated name - even though that was not the intention of the user.

I agree. Therefore I suggest in the PR #7558 make a very simple check – the group is only removed from the group list in the entries if there are no more groups with that name left in the group tree.

In this way, as long as the deleted group exists somewhere in the tree (possibly in multiple places), the entries stay assigned to these groups.

I have just noticed that when I *rename* one of the dupliactes, its entries are reassigned to the new group and vanish from all old group duplicates. This is not what I (and probably most other users) would expect; the fix should be easy – if the group(s) with the original name exist somewhere in the tree, the old group name should be retained in the entries. The entries will thus belong to two groups if one of the duplicates is renamed. Only of the group name vanishes from the tree, it should be removed from the entries as well.

I'll amend the PR to fix this.

> 
> 
> Now, I am not saying, that this will happen with the current JabRef version as well. But I just want to raise awareness, that these decisions can have major implications downstream.

My intuition is that as long as group objects inside JabRef are identified by, say, their index in an array or by their position in an internal tree structure, and not by their (external!) names, no big problems should arise.

I agree that the behaviour that emerges on the duplicate group names is somewhat unusual, but it is now quite clear to me, and as long as it is consistent and no group information loss arises when manipulating groups, this might actually be an *advantage* of Jabref :).

The most important issue is to preserve group information without information loss when importing old group files. As @swekia wrote in the recent issue #7442, creating a good grouping for yourself is ""many, many hours of manual work"" (which I can confirm from my side).

To import groups created in the pre-JabRef 3.x version, when the group structure changed to unique (and so duplicates where very likely present in the input databases), a following *import* strategy might help:

a) if a group name is unique leave its name as it is;
b) if an old group name is a duplicate, postfix it with the position in the tree (e.g. in braces, 'Treatment (Medicine/Asthma)'); in this way a unique name is created with all old entries assigned to it (no info loss). A user can then rename or retain the names, as they wish;

If at some point it is decided that the groups in distinct parts of the tree should be distinct (either by appending group ID or by some other mechanism), importing from the *current* JabRef group tree (with *possible* duplicates, which, recall, can be made by manual editing of the file!) should assign the same entries to all new groups, make groups ""synchronised"" if syncrinisation is supported, and if not – issue a warning that this function is lost. IMHO this would very much ease the pain of upgrading and make work experience with JabRef much smoother :).

Note that import of previous databases is a separate issue from the current behaviour of the JabRef group system at any implementation point, and it should be addressed separately.

Seems like the road ahead is pretty save with these considerations... Or are there any dragons ahead which I have overlooked? =||= @sauliusg : Thank you for this extensive explanation.
I think I would be happy if:
1) There is always a warning when a new group is created who's name is NOT unique (as proposed here before).
2) There is a warning when a (previous) JabRef database is imported which does not contain unique groups. It would be best, if the position of these groups in the group tree could be indicated. Note, that this is of relevance for users with many groups - I am using thousands of manually created groups (so, yes, I would agree that creating a good grouping takes ""many, many hours of manual work"", if not more ;)).
3) You suggested that when importing old group names the name of non-unique groups could be fixed with the position in the tree. While I agree, that this sounds like a reasonable quick fix/workaround, I wonder, what effect this will have on databases with thousands of groups and a large group tree depth. Again, in my example, I have a group tree depth of up to 26 - if my database were to contain any non-unique groups, your solution would result in groups with VERY VERY long names. I wonder, whether those names would then exceed some threshold for character limits in group names and what that effect could have (in either saving this modified group trees or the display of them). =||= > I think I would be happy if:

>  There is always a warning when a new group is created who's name is NOT unique (as proposed here before).

Agreed; a possible implementation is in the suggested in the PR #7558 (and a screenshot is present demonstrating the look-n-feel). Please have a look at the branch/screenshot how you find it.

>  There is a warning when a (previous) JabRef database is imported which does not contain unique groups. It would be best, if the position of these groups in the group tree could be indicated. Note, that this is of relevance for users with many groups - I am using thousands of manually created groups (so, yes, I would agree that creating a good grouping takes ""many, many hours of manual work"", if not more ;)).

I'm very glad that you confirm the importance of grouping for the users of JabRef, and your info volumes are impressive :).

Several ideas how JabRef could highlight duplicated groups in a convenient way:

1. For groups that are encountered more than once in the tree, show a small bubble (as a superscript, for instance) with a number of repetitions; e.g. ""My Groups/Computers/Programming/Languages³/SQL²"";
2. A tool tip could be displayed for that bubble explaining that ""The group 'SQL' is present 2 times in the group tree. All its copies will always have exactly the same entries"" (or similar text);
3. The duplicated group name could be written in italics, to highlight its peculiar character.

Which of the display features, or which combination you think are most usable?

I think, however, that it would be very inconvenient if JabRef would pop up a warning box each time a database with duplicated groups is read in. The duplicates should be accepted and dealt with as the user wishes.

> You suggested that when importing old group names the name of non-unique groups could be fixed with the position in the tree. While I agree, that this sounds like a reasonable quick fix/workaround, I wonder, what effect this will have on databases with thousands of groups and a large group tree depth. Again, in my example, I have a group tree depth of up to 26 - if my database were to contain any non-unique groups, your solution would result in groups with VERY VERY long names. I wonder, whether those names would then exceed some threshold for character limits in group names and what that effect could have (in either saving this modified group trees or the display of them).

Indeed, deep trees like yours will have problems. A further refinement of the ""tree prefix"" method would be to use only as many levels of the tree as is needed for disambiguation. For instance, if two of your no-synonymous groups would be at level 26, but they would differ at the 24-th level, only two extra group prefixes would  be needed ('Leaf Group (branch24/branch25)').

If even this is too long (one would set some limit, as you suggest), one could resort to middle character contraction (as in 'i18n') and/or to plain numbering ('i18n, 2nd group'). Of course this is only the import behaviour, the user can then rename the groups as one wishes.

Note that in my suggestion this would only be relevant for _importing_ old group trees that gad synonymous but different groups. If your group has no synonyms, or if you synonyms follow the suggested behaviour (i.e. they are intended to always keep the same entries), no transformation of your tree would be necessary.

So, are we going for it? :)

NB. The PR #7558 does not contain import functionality, it only contains changes in new format group handling. =||= So far sounds this good to me. The import should not matter too much in my personal case (hopefully) since I tried to make sure, that all my group names were unique (I am still forced to use 3.8.2 since I cannot use JabRef before the following feature request is implemented: https://github.com/JabRef/jabref/issues/4237).
But I thought, I should mention these issues, since other users might not have given that much attention to this.

So here my take on the import feature (which might be added later?):
1) The user should be able to turn on/off the warning when dealing with a database, that contains non-unique group names. I see your point that it can be inconvenient for users who have decided to accept the duplicates. But for ?most users (including myself) it is essential that it is clear, that the database contains non-unique group names that must be dealt with. Those should be able to see this every time they have to deal with such a database. Therefore the warning needs to be a feature that guarantees to find the duplicates and it needs to be available to those who require it. Therefore maybe a switch to turn on/off this warning message could be a solution (but maybe there is a better one)?
2) You suggest various ways on how JabRef could highlight duplicated groups. All of them seem reasonable to me, but they have one flaw. They do not work well, if you have very large group trees, i. e. thousands of groups. A user is not going to scroll through the whole group tree to find all the duplicates. Instead, JabRef should tell the user directly, where to find those groups. Two things come to my mind:
a) Either the groups filtering can be used to display all non-unique groups
AND/OR
b) a separate list is shown, that tells the users exactly where to find the non-unique groups by giving the full group path for each affected group
There might be a better way to do this, but these are the two options that come to my mind at the moment, that deal with the problem of non-unique groups within massive group trees.

Thanks for your help! =||= > * The user should be able to turn on/off the warning when dealing with a database, that contains non-unique group names. I see your point that it can be inconvenient for users who have decided to accept the duplicates. But for ?most users (including myself) it is essential that it is clear, that the database contains non-unique group names that must be dealt with. Those should be able to see this every time they have to deal with such a database. Therefore the warning needs to be a feature that guarantees to find the duplicates and it needs to be available to those who require it. Therefore maybe a switch to turn on/off this warning message could be a solution (but maybe there is a better one)?

In the PR that I suggest groups with repeated names should become, once again, a normal situation in JabRef databases. Thus making a popup window each time you start JabRef, even if you can ""configure it away"", looks like an inconsistent behaviour (why should a program stop your workflow to warn about a feature which it created itself and which fully supports?) See below for a possible idea.

> * You suggest various ways on how JabRef could highlight duplicated groups. All of them seem reasonable to me, but they have one flaw. They do not work well, if you have very large group trees, i. e. thousands of groups. A user is not going to scroll through the whole group tree to find all the duplicates. Instead, JabRef should tell the user directly, where to find those groups. Two things come to my mind:
>   a) Either the groups filtering can be used to display all non-unique groups
>   AND/OR
>   b) a separate list is shown, that tells the users exactly where to find the non-unique groups by giving the full group path for each affected group
>   There might be a better way to do this, but these are the two options that come to my mind at the moment, that deal with the problem of non-unique groups within massive group trees.

A quick indication of whether the current database contains groups with repeated names would be a dashboard-style indicator that says:
```
There are 8 groups with _repeated_ names in the database.
```
This announcement could be added right below the ""Filter groups"" input field, and above the ""All entries"" group.
Optionally, to could contain number of all groups as well (and so it would be displayed always, not only when groups with repeated names are present).
Also optionally, there could be 3-state switch next to the announcement: ""show only repeated groups/show only unique groups/show all groups"", so that you can locate such groups fast (and rename them if you wish).

""Optionally"" in this context means that, IMHO, JabRef group interface both with and without these features would be very usable, so maintainers/community should consider whether the benefits of adding extra these features justifies extra work and code increase.

If the group count and duplicated groups are not displayed in JabRef itself, they are still possible to find quickly with some command-line magic :):
1. Display all groups with repeated names:
```
saulius@starta multipl-groups/ $ awk -F: '$1~/ StaticGroup$/{print $2}' c-standard-test.bib | awk -F'\' '{print $1}' | sort | uniq -c | sort -nr -k1,1 | awk '$1>1'
      2 Ontologies
      2 MOFs
      2 Languages
      2 Databases
      2 Data
      2 Crystallography
      2 COD
      2 CIF
```
2. Could how many such groups you have:
```
saulius@starta multipl-groups/ $ awk -F: '$1~/ StaticGroup$/{print $2}' c-standard-test.bib | awk -F'\' '{print $1}' | sort | uniq -c | sort -nr -k1,1 | awk '$1>1' | wc -l
8
```
These `bash` commands were run on Linux, but should work on MaOS and on Windows with CygWin as well; they can be defined as short commands such as 'bibtex-count-goups' or similar.

From a perspective of Unix principles as I understand them, a function that can be conveniently factored out into a separate, independent program should be factored out and not clutter the main tool. But this might be a different philosophy from what Windows/Mac users are used to... :) =||=  
> A quick indication of whether the current database contains groups with repeated names would be a dashboard-style indicator that says:
> 
> ```
> There are 8 groups with _repeated_ names in the database.
> ```
> 
> This announcement could be added right below the ""Filter groups"" input field, and above the ""All entries"" group.

If the ""repeated"" names are mentioned in the announcement, then this would indeed already improve the situation. Note, that with the current JabRef version not having the full path is less of a problem, since you can easily filter the groups using the groups filter if you know, which groups are affected.
With the old JabRef (e.g., 3.8.2) this was not possible, since there was no such filter.
Yet, having the direct path or automatically filtering the respective groups (as you propose in the options) would be even better, since it is not intuitive to the user, that one has to find the duplicated groups by themselves.

Maybe I should explain further, why this can be a problem: If you have a database with thousands of groups, it might not be obvious when creating a new group, that it already exists somewhere in the database (you will not notice this immediately just by looking at the groups panel). If a user wants to avoid having unique groups (there are domain-specific reasons for this, which I won't go into), not knowing about the existence and the location of these non-unique group names can be an issue.

As for the command-line magic: Yes, that would be a workaround and I appreciate you sharing the respective scripts. But I would argue, that this is detrimental to the user experience. People will want to have a simple reference does-it-all-for-you tool.
Further: If we were to go by a strict reading of Unix principles, then one shouldn't even use JabRef in the first place. It is definitely not a simple tool for a single use, but a quite complex piece of software. If you wanted to, you could also emulate most (all?) functions of JabRef using Emacs + various scripts (in fact I know people, that do that) - but for most people that would just be inconvenient and I do not think that is the goal of JabRef. =||= Thanks for the ongoing discussion. The twitter poll clearly showed that many users would like to have groups with the same name. However, it became also clear that it might be confusing if the entries are automatically shared. In the devcall we also discussed that there are also scenarios where the groups with the same name actually don't show the same entries (e.g. if one uses the hierarchical modifiers), potentially leading to even more confusion.

For this reason I would strongly propose to go the id-based solution:
- Each group gets an unique identifier
- The identifier is stored in the groups field (and no longer the name of the group)
- Users can create completely independent groups with the same name (even in the same hierarchy level if they desire, although a warning should be shown in this case)
- In case, they want to have a mirror group they can use an automatic keyword group pointing to the `groups` field and searching for the identifier of the other group.

This unique identifier will also be very helpful for other scenarios. For example, we are planning a new feature in connection with JabRef Online, where users can share a group. For this a unique identifier is essential, since one needs to a way to identify the group even for different users.

@sauliusg your work here in this PR is very much appreciated. But I think the id-based system is the more universal way forward. Would you be interested in implementing it? We core developers help of course where we can! =||= > @sauliusg your work here in this PR is very much appreciated. But I think the id-based system is the more universal way forward. Would you be interested in implementing it? We core developers help of course where we can!

Let me think if the PR can be extended, with reasonable effort, to handle uniquely identified groups.

I'm a bit worried that the full unique group ID solution, while I agree that it is cleaner, but is at the same time more complicated, will take more time to implement, may introduce new bugs; whereas we need badly to continue working with our bibliographies, and the limitation on group names makes this cumbersome... =||= > For this reason I would strongly propose to go the id-based solution:
> 
>     * Each group gets an unique identifier

I agree that this is a more universal and more usual solution.

But then, more questions arise:

- what identifiers should be used? There are several options:

1. UUIDs. They are world unique (alowing users to share their grouped data without interferences), but not easily human readable, so manual editing of a BibTeX file would become cumbersome;
2. Numeric group IDs (1,2,3,...,999). Small numbers would be easier to handle, but would only be meaningful within one database;
3. Group names+IDs ( Languages(15), Languages(16), Treatment(4), Treatment(7) ) – both unique and human-readable, but more complicated to handle (one needs to decide what to do when names match but number's don't, etc.)
4. Group names+UUID? (Languages(6153c16e-93d1-11eb-b0a3-73a851179dd4), Languages(782c5ea0-93d1-11eb-8716-8bccdb471bb8) ) – unique, user-readable and editable, but long.
5. UUID sha1 or md5 hash fragments? Sorter but higher risk of collision.
6. Names + option 5?
7. Anything else?

Technically, (4) will probably be the easiest to handle both manually and in JabRef code, but will bloat the files.

Your ideas?

>     * The identifier is stored in the groups field (and no longer the name of the group)
> 
>     * Users can create completely independent groups with the same name (even in the same hierarchy level if they desire, although a warning should be shown in this case)

True.

>     * In case, they want to have a mirror group they can use an automatic keyword group pointing to the `groups` field and searching for the identifier of the other group.

Or create a duplicate manually, using a text editor :). The bottom line is that JabRef, IMHO, will have to deal with such situations anyway.
 =||= > For example, we are planning a new feature in connection with JabRef Online, where users can share a group. For this a unique identifier is essential, since one needs to a way to identify the group even for different users.

In that case UUID or UUID+Group name seems the best suitable solution. =||= > Maybe I should explain further, why this can be a problem: If you have a database with thousands of groups, it might not be obvious when creating a new group, that it already exists somewhere in the database (you will not notice this immediately just by looking at the groups panel). If a user wants to avoid having unique groups (there are domain-specific reasons for this, which I won't go into), not knowing about the existence and the location of these non-unique group names can be an issue.

This is actually handled in the proposed PR: when you try to create a group with the name that already exists in your tree, a yellow exclamation mark appears, and a tool-tip explains what would happen if you go for it. This is proposed instead of bluntly forbidding such groups. You can decide whether you want a duplicated group name, or whether you add more charters for disambiguation. =||= > The identifier is stored in the groups field (and no longer the name of the group)

1. Does this have any unwanted side effects when using the article search function, i. e. will ""groups = Temperature"" (assuming you have a group named ""Temperature"") still work? Or does the user now need to know the unique identifier?
2. Similar question: Will the group filtering be unaffected by this change? =||= > In the devcall we also discussed that there are also scenarios where the groups with the same name actually don't show the same entries (e.g. if one uses the hierarchical modifiers), potentially leading to even more confusion.

Since a user would be warned when creating groups with the repeated name, the confusion should be minimised.

I have experimented for a while with the code in the PR #7558 branch, and to my taste no confusion ensues; more confusion actually arises from the Issue #7576, IMHO... :)

But sure, I agree that the proposed behaviour would be unusual (how is it in German? Gewöhnungsbedürftig?) =||= > 
> 
> > Maybe I should explain further, why this can be a problem: If you have a database with thousands of groups, it might not be obvious when creating a new group, that it already exists somewhere in the database (you will not notice this immediately just by looking at the groups panel). If a user wants to avoid having unique groups (there are domain-specific reasons for this, which I won't go into), not knowing about the existence and the location of these non-unique group names can be an issue.
> 
> This is actually handled in the proposed PR: when you try to create a group with the name that already exists in your tree, a yellow exclamation mark appears, and a tool-tip explains what would happen if you go for it. This is proposed instead of bluntly forbidding such groups. You can decide whether yo want a duplicated group name, or whether you add more charters for disambiguation.

Ok, if this works rock-solid, then there should be no problems, except for (a) older databases, as discussed before, or (b) users that change their opinion in regards to unique groups.
(a) So basically only someone, who has an older database, requires unique groups, but is not aware that the older database currently does not meet the requirements, would need help from JabRef in finding those or (b) people who later on realise that they prefer unique groups. =||= > > The identifier is stored in the groups field (and no longer the name of the group)
> 
> 1. Does this have any unwanted side effects when using the article search function, i. e. will ""groups = Temperature"" (assuming you have a group named ""Temperature"") still work? Or does the user now need to know the unique identifier?

This is a actually a good question: when I search for ""Temperature"", should *all* entries in *all* groups called ""Temperature"" be included?

> 2. Similar question: Will the group filtering be unaffected by this change?

Hmmm... Probably groups should still be filtered by names, not by IDs? =||= > This unique identifier will also be very helpful for other scenarios. For example, we are planning a new feature in connection with JabRef Online, where users can share a group. For this a unique identifier is essential, since one needs to a way to identify the group even for different users.

What if we look at the situation at the different angle (and this is probably a more correct description):

under the proposed PR #7558, the group names are *still* unique, but you are allowed to have the same group in different parts of the tree :). As a in the Unix hard link example.

This, for sure, dos not hold for non-leaf groups of the ""union"" type, but for me this is desired behaviour. =||= > 
> 
> > > The identifier is stored in the groups field (and no longer the name of the group)
> > 
> > 
> > 
> > 1. Does this have any unwanted side effects when using the article search function, i. e. will ""groups = Temperature"" (assuming you have a group named ""Temperature"") still work? Or does the user now need to know the unique identifier?
> 
> This is a actually a good question: when I search for ""Temperature"", should _all_ entries in groups called ""Temperature"" be included?

I think so, but since I intend to keep unique group names, I am not so sure about what people want with the actual user case. I reckon if you want both options, you could have one groups field and one ID field. People who want to find all entries in groups called ""Temperature"" search for groups, others use the ID (problem there is still that users will need to know the ID).

> 
> > 1. Similar question: Will the group filtering be unaffected by this change?
> 
> Hmmm... Probably groups should still be filtered by names, not by IDs?

Agree, should be filtered by group names. =||= I suggest we accept that we loose manual editing and would go for uuid's. The user experience can be improved afterwards by using a tag-based interface, for easy management of groups from the entry editor.

I'm not sure why you would like to search for `groups = ...`. In this case it's probably easier to just select the group in the tree... Let's not worry about this too much until users report they use this often for reason xyz. (Except if I'm missing an important use case)

> Or create a duplicate manually, using a text editor :). The bottom line is that JabRef, IMHO, will have to deal with such situations anyway.

Just issue a warning in this case. The point is that groups have unique identifiers, if you mess with this then it's not Jabref's job to fix it for you. =||= > I'm not sure why you would like to search for `groups = ...`. In this case it's probably easier to just select the group in the tree... Let's not worry about this too much until users report they use this often for reason xyz. (Except if I'm missing an important use case)

Well, I use this all the time, since finding the group in the tree takes much longer if you have to go through thousands of groups. So, this is a real use case. =||= > I suggest we accept that we loose manual editing and would go for uuid's. The user experience can be improved afterwards by using a tag-based interface, for easy management of groups from the entry editor.

This does not sound good at all:
1. The 'group = ...' searches will no longer be meaningful or easy – a use case demonstrated by AEgit;
2. This would essentially revert a design decision taken in #629 and negate the very first advantage listed there: ""One could easily see the groups an entry belongs to and could change them by hand. Related [SF 868](https://sourceforge.net/p/jabref/feature-requests/868/) and [SF 750](https://sourceforge.net/p/jabref/feature-requests/750/)""
3. The entries would no longer be usable outside the original bibtex file – yes, you would know the identity of the group, but without consulting the original 'jabref-meta: grouping:' comment you would loose all metadata – group's name, its position in the tree, and with this all hints as to what this group is supposed to mean are gone. One can end up assigning totally unrelated papers to the group but confusing its UUID, IMHO this defies the very purpose of exchanging bibtex records with groups for collaboration.
4. This would (once again!) make and incompatible change in the group encoding within bibtex files – not pleasant thing for users...
5. The change could make it harder to process the resulting bibtex files with external tools.
 =||= > This unique identifier will also be very helpful for other scenarios. For example, we are planning a new feature in connection with JabRef Online, where users can share a group. For this a unique identifier is essential, since one needs to a way to identify the group even for different users.

A a side note: as far as group/file sharing goes, this problem we solved at my site once and for all, by simply using an SVN repo for storing bibliographies. This solution works perfectly since 2008, and Subversion gives numerous advantages: a) unlimited undo b) full history of changes c) synchronisation (with automatic merges) on different computers, for different users, and even in different directories of the same computer d) easy and informative diff's... and many more bonuses.

What makes it *difficult* to share data is namely the decision to *forbid* (in the GUI) groups with identical names. It is all that natural that I (as a user sg) will want to have group ""Languages"", and my colleague also wants to have group ""Languages"". Why not? If the same papers land into that group, this is on one hand a benefit for us, on the other hand easy to sort out afterwards if we decide to split the group. =||= > > This is actually handled in the proposed PR: when you try to create a group with the name that already exists in your tree, a yellow exclamation mark appears, and a tool-tip explains what would happen if you go for it. This is proposed instead of bluntly forbidding such groups. You can decide whether yo want a duplicated group name, or whether you add more charters for disambiguation.
> 
> Ok, if this works rock-solid, then there should be no problems,

Well, I can not promise that it is ""rock-solid"" (""no warranty"" disclaimer, as always :); but I have now tested my branch for quite a while and things work as expected; I also do not see any big dangers ahead since, as I have mentioned, the proposed PR #7558 is a conservative extension, it does not change the current design of the groups, just allows to use more features in it.

> except for (a) older databases, as discussed before, or (b) users that change their opinion in regards to unique groups.
> (a) So basically only someone, who has an older database, requires unique groups, but is not aware that the older database currently does not meet the requirements, would need help from JabRef in finding those or (b) people who later on realise that they prefer unique groups.

People who read old databases with unique groups will not be affected at all, since the extension leaves all old functions intact.

People who wish to maintain unique groups in their databases are in the position to do so easily; essentially they get the same message as before if they try to create group with a duplicated name. The only difference is that in the proposed PR #7558, you are no longer left with the disabled ""OK"" button, but you have a explanation and a choice. In addition, several small fixes take care that group renaming and deleting does not loose information when you have duplicated groups. Since you can have duplicated groups anyway (disabling ""OK"" button in the GUI does *not* ensure that program invariant – unique group names – is maintained in a database), the fixes are needed regardless to how GUI behaves.

People (like me) who want to reuse group names are in a position to do so conveniently. 

People who later want to make groups unique can do so by renaming one or several groups; the code fixes in the PR #7558 take care that the entries stay assigned to the old group when a duplicated group is renamed, and to the new group if you select ""assign all entries to the new group"". So the system is very flexible in what you do.

Seems like everyone-wins situation, doesn't it? =||= > @sauliusg your work here in this PR is very much appreciated. But I think the id-based system is the more universal way forward. Would you be interested in implementing it? We core developers help of course where we can!

@tobiasdiez These are hard choices. May I suggest the following roadmap for group interface:

1. We take, as a quick temporary fix, the PR #7558 , *with* the enhancements suggested by @AEgit , namely with a dashboard line indicating how many repeated (duplicated) groups are there in the database, and possibly with a button to show all these groups. I take responsibility to enhance the PR #7558 in the suggested way; of course the help and hints from the developers are extremely appreciated since I am not (yet) very familiar with the GUI code of the JabRef source;
2. We then move to fix the bibtex parser/writer (issue #7010 (rediscovedred in #7553)) and time stamps (issue #7351 (redicovered in #7527)); IMHO these are really stumbling blocks to migrate to a new version of JabRef (at least at our site); I am ready to contribute on these fixes as well, if needed;
3. We then deliberate how to make transition to truly unique groups in JabRef, without breaking what people have already built for themselves using the current JabRef implementations, and considering all possible use scenarios (sharing groups on a central JabRef server, sharing groups via version control, etc.). I could give a helping and here as well, but, as said, time is scarce so this will not happen instantly. Also, a broader discussion with users is probably needed to design (3) in a best way.

With (1) and (2) in place, people (including me) can go on migrating to new JabRef (I would do this in my branch and start using it on the spot, and the switch to >= version 5.4 when this comes out; I can not use 5.2 since it still has #7548 PR not merged and I can not use 5.3 since it corrupts my database (issue #7010). Those who use unique group names within their databases, as @AEgit described it in detail, would continue to have full functionality available to them. Their databases would continue to work as before.

Unique shared groups and collaboration scenarios are nice to have; however, these features are trickier to implement and needs careful design and more time; they could come somewhat later. Their introduction would be compatible with changes in (1) *if* it is compatible with the current JabRef group implementation.

Would you (developers) agree on such process?

Update: actually, after reading discussion in #7010 I found a workaround for my database: setting ""Resolve strings for all fields except: url;abstract;not"" saves and reads the database correctly again, without touching the abstract field. =||= > I suggest we accept that we loose manual editing and would go for uuid's. The user experience can be improved afterwards by using a tag-based interface, for easy management of groups from the entry editor.

On a third thought, it seems that there is a way to introduce UUIDs without loosing editability:

1. UUIDs *and* group names are added to ' StaticGroup:' lines;
2. Bibtex entries retain names; if names are unique, they are not changed (UUID is not appended);
3. If names in entries are not unique, they are disambiguated automatically using UUID appended in braces (e.g. `Languages(36592084-944f-11eb-b17a-5fe0541bb1b3)`);
4. If user maintains a database with duplicated group names, functionality of PR #7558 handles the situation properly.

This would ensure smooth migration from the current group implementation and to the future eventual sharing of groups on a server. =||= https://github.com/JabRef/jabref/issues/7554#issuecomment-812814351 These are all valid concerns. But most of these disadvantages can be taken care of by a more advanced implementation. For example, search for `groups = ...` can look up the groups by name, and then search for the entries that have the corresponding group-identifier. Similarly, before sharing (e.g. export) one could replace the group name by the identifier. 

https://github.com/JabRef/jabref/issues/7554#issuecomment-812825202 The problem I see with this approach is that there is a time where people may create groups with duplicate names. This makes the migration a lot harder. Thus I would prefer to sort this out before. =||= > [#7554 (comment)](https://github.com/JabRef/jabref/issues/7554#issuecomment-812825202) The problem I see with this approach is that there is a time where people may create groups with duplicate names. This makes the migration a lot harder. Thus I would prefer to sort this out before.

If people will create groups with duplicate names, even after being warned, this means that they need such groups. Why not supporting this workflow?

For eventual migration to groups with IDs, I have outlined one of the possible migration strategies above; it seems to be simple and to maintain smooth transition. Sure one needs to be cautious, but there seems to no unsurmountable difficulties on this path. =||= > [#7554 (comment)](https://github.com/JabRef/jabref/issues/7554#issuecomment-812814351) These are all valid concerns. But most of these disadvantages can be taken care of by a more advanced implementation. For example, search for `groups = ...` can look up the groups by name, and then search for the entries that have the corresponding group-identifier. Similarly, before sharing (e.g. export) one could replace the group name by the identifier.

More advanced implementation inevitably means more complicated, has chances to more bugs, and takes more time to implement.

As you surely know: the cheapest, fastest and most reliable software components are those that are absent :) =||= > If people will create groups with duplicate names, even after being warned, this means that they need such groups. Why not supporting this workflow?

I really would like people to have groups with duplicate names. It's just that I feel this should be properly implemented instead of using a temporary workaround that makes the proper implementation harder. =||= > I really would like people to have groups with duplicate names. It's just that I feel this should be properly implemented instead of using a temporary workaround that makes the proper implementation harder.

My argument would be that, on one hand, the proper implementation will not be made (much) harder by the suggested change; on the other hand, a quick fix now would enable users to continue working on their databases, while at the same time developers could design and implement group update without hectic, in parallel, and have enough time to consider multiple possibilities and multiple scenarios. =||=  > @tobiasdiez These are hard choices. May I suggest the following roadmap for group interface:
> 

From a user perspective this roadmap sounds like a good plan. =||= > 
> 
> > [#7554 (comment)](https://github.com/JabRef/jabref/issues/7554#issuecomment-812825202) The problem I see with this approach is that there is a time where people may create groups with duplicate names. This makes the migration a lot harder. Thus I would prefer to sort this out before.
> 
> If people will create groups with duplicate names, even after being warned, this means that they need such groups. Why not supporting this workflow?
> 

I reckon one problem here could be, that user initially (mistakenly) ignore the warning and only later on realize, that they actually wanted unique groups. Yes, that would be a user mistake - but it is something to think about. Fortunately, you already outlined an approach to deal with this issue: If the non-unique groups are flagged and the groups can be filtered to show the non-unique ones, then the user can easily solve this problem within JabRef.

 =||= > > > [#7554 (comment)](https://github.com/JabRef/jabref/issues/7554#issuecomment-812825202) The problem I see with this approach is that there is a time where people may create groups with duplicate names. This makes the migration a lot harder. Thus I would prefer to sort this out before.
> > 
> > 
> > If people will create groups with duplicate names, even after being warned, this means that they need such groups. Why not supporting this workflow?
> 
> I reckon one problem here could be, that user initially (mistakenly) ignore the warning and only later on realize, that they actually wanted unique groups. Yes, that would be a user mistake - but it is something to think about. Fortunately, you already outlined an approach to deal with this issue: If the non-unique groups are flagged and the groups can be filtered to show the non-unique ones, then the user can easily solve this problem within JabRef.

Correct, the non-unique groups should be indicated, and I would implement this in the PR #7558 if we get a go from developers :).

When discovered, duplicated groups can be renamed without loss of information – this already works in the current PR (tested in several different situations). Entries assigned to the original group stay in that group, and you have a choice whether to include the same entries into the newly renamed group or not. Here the existing JabRef functionality (a popup that asks whether the modified group should receive the entries of the original group) turned out very useful. =||= > 
> 
> > I really would like people to have groups with duplicate names. It's just that I feel this should be properly implemented instead of using a temporary workaround that makes the proper implementation harder.
> 
> My argument would be that, on one hand, the proper implementation will not be made (much) harder by the suggested change; on the other hand, a quick fix now would enable users to continue working on their databases, while at the same time developers could design and implement group update without hectic, in parallel, and have enough time to consider multiple possibilities and multiple scenarios.

I would agree with that - people, who already need this functionality, would have immediately access to it. Given, that as @sauliusg points out, this is technically already part of JabRef (it is just the GUI that forbids creating non-unique groups), the resulting changes to JabRef appear minor.
At a later stage, an improved solution as proposed by @tobiasdiez could be implemented - but this might take some time during which the users which requires this feature are left without options.
Note also, that by allowing this minor fix, experience can be gained regarding the pros and cons of allowing non-unique group names. Maybe there are some hidden drawbacks that are not obvious at the moment.

Finally, if that is not convincing. maybe a compromise could be a solution. Implement the fix as described by @sauliusg but add an additional setting option to the preferences, where the user can actively control whether non-unique groups should be allowed in the GUI or not. Set the default to not allowing the creation of non-unique groups in the GUI (the current default). Add a description/tooltip indicating, that the user has to know, what he is doing if he wishes to allow non-unique groups and maybe call this a BETA feature (given that a later point in time this implementation might be replaced by a more sophisticated one). I reckon this should address the possible concerns and hopefully not be too much more work to implement? =||= @tobiasdiez Regarding migration plan to truly unique groups with names in the entries (i.e. user-editable):

> * If names in entries are not unique, they are disambiguated automatically using UUID appended in braces (e.g. `Languages(36592084-944f-11eb-b17a-5fe0541bb1b3)`);

The UUID would always be a *suffix* with distinct syntax. Therefore, it is always possible to include a name that *looks* like it has UUID at the end – just add the true UUID as a suffix. E.g.:
`Uuid like group name (68a0a878-950d-11eb-b17b-ef8af80ecb58)(63f1d8d9-7505-4dde-af90-8a83642fbc33)`

Here ``Uuid like group name (68a0a878-950d-11eb-b17b-ef8af80ecb58)` is a *group* *name* (which does not contain UUID, although it looks superficially like containing UUID), and `63f1d8d9-7505-4dde-af90-8a83642fbc33` is the UUID for that group.

Thus even in the very unlikely event of the user generating such strange UUID-like names, JabRef would be able to handle them, and still stay compatible with the current `group = {Group Name}` implementation. The only limitation would be that for such crazy names (names that end in a UUID-like string) you will *have* to include UUID (while you can skip it in the rest of the cases). I strongly suspect that the only place in the world where such group names will be used will be JabRef test cases that check the functionality :D. So this seems very safe and usable. =||= > I suggest we accept that we loose manual editing and would go for uuid's. The user experience can be improved afterwards by using a tag-based interface, for easy management of groups from the entry editor.

This only came to my mind later on and it is not directly related to the problem at hand (so, if this goes too much off-topic, maybe we should bring this discussion elsewhere): but, does a tag-based interface reflect the hierarchy that groups provide?
E.g., let's say I have the main group ""Physics"" and the subgroups ""Temperature"" and ""Mass"". If an article is assigned to ""Temperature"", I reckon its tag would be ""Temperature"". But how would a tag-based system reflect the fact, that within the groups hierarchy it is the subgroup of ""Physics"". You cannot just add the tag ""Physics"" since it is not part of the group, it is only found lower in the hierarchy. Would you need separate tags for the actual group assignment and for the position within the hierarchy? That would result in many ""subtags"" if you have a deep groups tree (unrelated to this, but also to consider - if an item is assigned to many groups, it will also have many tags).
And yes, the position in the groups hierarchy is relevant (I can provide an actual example, if necessary).
These are just things, that came to my mind, while thinking about the tags-feature. =||= > E.g., let's say I have the main group ""Physics"" and the subgroups ""Temperature"" and ""Mass"". If an article is assigned to ""Temperature"", I reckon its tag would be ""Temperature"". But how would a tag-based system reflect the fact, that within the groups hierarchy it is the subgroup of ""Physics"". You cannot just add the tag ""Physics"" since it is not part of the group, it is only found lower in the hierarchy. Would you need separate tags for the actual group assignment and for the position within the hierarchy? That would result in many ""subtags"" if you have a deep groups tree (unrelated to this, but also to consider - if an item is assigned to many groups, it will also have many tags).

A very good point – and fortunately, the current JabRef group design handles this nicely.

No, you do not need to assign sub-tags :). What you need to is to declare the ""Physics"" group to be a ""union"" group (i.e. set ""Hierarchical context"" to ""union"" (see the attached image)). Then you can create groups ""Temperature"" and ""Mass"", and place them as subgroups of ""Physics"". This latter fact is recorded *only* in the JabRef `jabref-meta: grouping:` comment at the end of the file, not in the entries. The entries will contain only `group = {Temperature}` tag if assigned to the ""Temperature"" group.
If you now click on the ""Physics"" group in the JabRef group GUI, you will get entries from *both* ""Temperature"" and ""Mass"" subgroups, as expected for a 'union' group. If you add more subgroups to ""Physics"", entries from the new groups will be displayed in ""Physics"" as well. If you reorganise your tree and move the Temperature group elsewhere, this will be automatically reflected in the display of ""Physics"" and all other 'union' (and, I suppose, 'intersection') groups.
![Screenshot from 2021-04-04 09-35-18](https://user-images.githubusercontent.com/10668420/113500929-8b1c8800-952a-11eb-8463-f8e524b6b660.png)

In this way you can quickly navigate in the group hierarchy and have papers assigned to only ""Temperature"", ony ""Mass"", or to ""Physics"" which contains both entries from the ""Temperature"" and ""Mass"" subgroups.

If you have two 'Physics' groups in two distinct places of the tree, each of them will show entries (possibly different ones) from their respective subgroups, in addition to identical papers directly assigned to the ""Physics"" group. I plan to keep non-leaf groups ""empty"", i.e. not having papers assigned directly to them but only to their leaf subgroups, but of course nothing prevents me at the moment from adding papers directly to ""Physics"" if I wish so, so that they appear in *all* ""Physics"" groups in my tree – might be useful if I wan to have some important papers always at my mouse click, no matter what else I select on the topic. =||= Sorry, I might not have explained this well. I had the impression that @tobiasdiez was planning to add a tag-based feature which should replace the current groups hierarchy. That is where my questions are coming from.

What I have been using so far, was the global union/intersection settings (they were available in 3.8.2 so - I hope - they are still available in the current version 5).
This allows the following:
a) If I select only the group ""Mass"", I will only see the articles assigned to ""Mass"". The same applies to an example where I only select the group ""Temperature"" or I only select the group ""Physics"".
b) If I select the groups ""Mass"" and ""Temperature"", I will see the articles assigned to both groups (depending on the global setting I chose).
c) If I select the groups ""Mass"", ""Temperature"", and ""Physics"" I will see the articles assigned to all three groups.

That is exactly, what I want - if I select ""Physics"" I only want to see articles, that have directly been assigned to ""Physics"". I do not want to see articles, that are part of subgroups of ""Physics"" UNLESS I explicitly select those subgroups as well.
This is all possible with JabRef 3.8.2 (and hopefully also with version 5 - would need to test that) - but I am not so sure, how you would provide this functionality with a newly introduced tag-based system. =||= > Sorry, I might not have explained this well. I had the impression that @tobiasdiez was planning to add a tag-based feature which should replace the current groups hierarchy. That is where my questions are coming from.

Oh I see! I misunderstood you, sorry. No, the group tree is implemented in 5.x, and, AFAIU, there are not plans to remove it... (are we right, @tobiasdiez ?)

> What I have been using so far, was the global union/intersection settings (they were available in 3.8.2 so - I hope - they are still available in the current version 5).
> This allows the following:
> a) If I select only the group ""Mass"", I will only see the articles assigned to ""Mass"". The same applies to an example where I only select the group ""Temperature"" or I only select the group ""Physics"".

Works in 5.x and in PR #7558.

> b) If I select the groups ""Mass"" and ""Temperature"", I will see the articles assigned to both groups (depending on the global setting I chose).

Works as above, except for a ""union/intersection"" toggle bug (you need to restart the JabRef for your change to take effect).

> c) If I select the groups ""Mass"", ""Temperature"", and ""Physics"" I will see the articles assigned to all three groups.

Works, depending on the global settings and on the ""Physics"" ""Hierarchical context"" setting, I guess.

> That is exactly, what I want - if I select ""Physics"" I only want to see articles, that have directly been assigned to ""Physics"". I do not want to see articles, that are part of subgroups of ""Physics"" UNLESS I explicitly select those subgroups as well.
> This is all possible with JabRef 3.8.2 (and hopefully also with version 5 - would need to test that) - but I am not so sure, how you would provide this functionality with a newly introduced tag-based system.

As of current, in my tests, the 5.x supports all functionality what you described.

In the suggested roadmap above, all this functionality could be (hopefully) retained, plus group disambiguation UUID cold be added. If I correctly understand, unique unambiguous group IDs and the current group hierarchy is in the plans, isn't it,  @tobiasdiez ? =||= The groups tree stays of course! My idea was to replace the `groups` field in the entry editor (which right now is only a text box) by tags that show the group name and on hover the complete path of the group.

Concerning the future steps, how would the migration to an id-based system look like after we allowed groups with duplicate names? Right now we can assume that the information in the groups field uniquely identifies a group (the only way to not have this unique identifier is by either migrating from a very old JabRef or manually editing the groups tree - in both cases we can simply issue a warning and take the first group matched by the name). Thus the migration is very easy, one simply needs to replace the group name by its id. But once it is officially allowed to have groups with the same name, this identification breaks down.

Moreover, I don't really see a reason for urgency right now. The serialization of groups in the groups field has been done 5 years ago, and shortly thereafter the restriction in the ui was added. So this is in place for quite some time. A few months more doesn't change much in the grand scheme of things, and I actually don't think that a proper solution takes so long to implement. The changes should be comparable to the changes in the linked PR, plus some additional tests. =||= > Concerning the future steps, how would the migration to an id-based system look like after we allowed groups with duplicate names? Right now we can assume that the information in the groups field uniquely identifies a group (the only way to not have this unique identifier is by either migrating from a very old JabRef or manually editing the groups tree - in both cases we can simply issue a warning and take the first group matched by the name). Thus the migration is very easy, one simply needs to replace the group name by its id. But once it is officially allowed to have groups with the same name, this identification breaks down.

Migration after the proposed PR will be just as easy as in the case of ""unique"" group names. The point is that the groups with identical names are still *unique*, in the sense that they contain, by definition, the same entries. So you have two options when migrating:
1. either add the *same* UUID to the ""duplicated"" groups (or, rather, the same group represented in multiple place in the group tree); or
2. Add different UUIDs to such groups, and assign all entries in the original ""duplicated"" group to all such groups; issue a warning that from now on, handling of group synonyms in different tree branches has changed.

In both cases the users' group assignments will not change, and their work will be preserved. The different behaviour will have to be made explicit, but, once understood, it can either can be used. Also, nothing prevents me from adding the *same* group with the *same* UUID to *multiple* branches in the tree, so the functionality of PR #7558 is still needed, in one way or another, even when you transition to a new group implementation.

Moreover, as you say yourself, ""the /only/ way to not have this unique identifier is by either migrating from a very old JabRef or manually editing the groups tree - in both cases we can simply issue a warning and take the first group matched by the name"" – which means that JabRef *will* have to deal with duplicated group names, no matter what. Thus one can not ""officially allow"" or ""disallow"" duplicated groups – the bibtex file is an external input for JabRef, managed at the users' discretion, and it can be processed by many external tools, many of which we don't even know. So asking whether ""one should allow duplicates"" is a wrong question based on unsatisfyable assumptions; what could be asked instead is ""how do we deal with duplicated groups in the way that is most convenient for the users, and reasonably easy to implement/support for developers""?

@AEgit has a very good point: ""experience can be gained regarding the pros and cons of allowing non-unique group names. Maybe there are some hidden drawbacks that are not obvious at the moment."" Or maybe the user will like the feature and start using it. I definitely see the use for this feature for myself.

So the bottom line would be: migrating to group names based on UUIDs will be as easy with PR #7558 as it is now, since the groups *essentially* continue to be unique, in the sense that there is only one set of entries assigned to each named group.
 =||= > The groups tree stays of course! 

That's very reassuring! :)

> My idea was to replace the `groups` field in the entry editor (which right now is only a text box) by tags that show the group name and on hover the complete path of the group.

This can be done in any group representation, even after the PR #7558 – for groups that are present several times in the group tree you could just show all their locations, one location per line :) =||= > either add the same UUID to the ""duplicated"" groups (or, rather, the same group represented in multiple place in the group tree); or

That's not gona work. The point of having id's was that they uniquely identify a group...otherwise what's the point?

> Add different UUIDs to such groups, and assign all entries in the original ""duplicated"" group to all such groups; issue a warning that from now on, handling of group synonyms in different tree branches has changed.

That's my point: we allow now duplicate group names, but they will behave differently (and more correctly in my opinion) after the migration to the id approach. Sorry, but I don't see the advantages. To be honest, in the we now spent discussing this, one could have easily implemented the solution for id-based groups.
 =||= > Moreover, I don't really see a reason for urgency right now. The serialization of groups in the groups field has been done 5 years ago, and shortly thereafter the restriction in the ui was added. 

To me, this was a very unfortunate decision. It rendered the group mechanism unusable for my purposes (lost all group assignments that I had), and I am very upset each time when I see the deactivated OK button in the group creation dialogue, even more so since I know that this restriction is completely unnecessary, and even checked this statement in practice on my JabRef clone :).

> So this is in place for quite some time. A few months more doesn't change much in the grand scheme of things, and I actually don't think that a proper solution takes so long to implement. The changes should be comparable to the changes in the linked PR, plus some additional tests.

May I quote another related Issue (#7442): ""To be honest, I'm really angry at the moment as I'm not using JabRef for fun but really need it for work and I cannot waste that much time on recreating tagging, grouping etc. over and over again"". It is actually a big praise to JabRef that it is used in professional environment, but also adds certain constraints on what changes and timings the users can tolerate – we need to have the work done, and hope that the tool will help us and spare us time – provided we can give due support to your guys who develop JabRef :).

As a matter of fact, for me the issue is rather urgent. For 5 years, we could not use the group interface, so my colleagues abandoned JabRef grouping in favour of CLI tools; some neighbouring labs switched to completely different solutions; in case you are interested I have currently my grouping tree in Zotero (which does not put any restrictions on my group names) and do some command-line fiddling to sync the two repos, my bibtex file which I manage in JabRef and the Zotero DB. But this year I have started a new course in our university and have new students who need to manage bibliographies for their theses. I need to recommend them a good tool for managing bibliographies. I can not offer them a pure command line or dual tool solution, they have still many things to learn. JabRef would be a candidate no. 1 if it had an arbitrary (including duplicated) group name support and would not crash too often. I need to make the recommendation in the next weeks; two or three months are way too long to wait, by that time the students need to have their thesis well advanced, and definitely all literature overview done.

So if we find a solution how to handle multiple duplicated group names into JabRef, for example as my suggested PR or in some other way, I would pull or write fixes/workarounds for #7010, #7442, #7351 and #7606 into my branch; if I know that these fixes will be in the next official JabRef release, we (I and my students) can then start working next week with my branch and switch back to mainstream when the JabRef release is out (no hurry there, then). I would sync my Zotero tree with JabRef, *finally* have my groups assigned and continue working on my main subjects :).

As quick fix for grouping now is much much more important for us than a ""correct"" solution in tree months... =||= > > either add the same UUID to the ""duplicated"" groups (or, rather, the same group represented in multiple place in the group tree); or
> 
> That's not gona work. 

It will work the same way as it works now. It will work the same way as it works now. In the essence, the current JabRef code *handles* multiple groups with the same name :) I understand that this was not planned, but it can be viewed as an emergent phenomenon :).

> The point of having id's was that they uniquely identify a group...otherwise what's the point?

The point in having UUIDs would be to help users have truly different groups in different parts of the tree that have identical names. This feature can be added later, as you say, in two or three months if timing permits.
 =||= > The groups tree stays of course! My idea was to replace the `groups` field in the entry editor (which right now is only a text box) by tags that show the group name and on hover the complete path of the group.

Cheers, that is re-assuring. I am still not sure, as to how this is going look and/or what the benefits are (the good thing at the moment is, that groups can easily be modified in any text editor), but probably this is something the user needs to see in action to understand the advantages. =||= >  Sorry, but I don't see the advantages. 

The advantage is outlined in my timeline description above.

> To be honest, in the we now spent discussing this, one could have easily implemented the solution for id-based groups.

Could be, but I do not see how. When I claimed three weeks ago that I think one can allow identical group names safely and conveniently in just a few lines of code, I then made code that demonstrates this (#7558). I do not see how I can make an UUID based solution in a comparable time with a comparable effort. You know JabRef code much better, so maybe for you it is easer to implement, but for me it would definitely take more time and effort; on the months range, actually, compatible with your estimate.

ALso, as you said, the full UUID solution needs to be thought through. Leaving just UUIDs in bibtex entries and eliminating names is not a good option, as I have mentioned before...

 =||= > That's my point: we allow now duplicate group names, but they will behave differently (and more correctly in my opinion) after the migration to the id approach. Sorry, but I don't see the advantages. To be honest, in the we now spent discussing this, one could have easily implemented the solution for id-based groups.

I reckon @sauliusg point is that his solution will just enable something, that is already implicitly possible with the current JabRef version (either by using old databases or by editing the database manually in a text editor). As such, it does not pose a major change in the implementation of JabRef. The ID based approach, on the other hand, requires major thinking on its potential downstream effects and thus will not be that easy to implement. If this more sophisticated ID approach is implemented without much thought, it could lead to much more problematic situations then the available simple approach (which only enables something that is already possible without using the GUI).

I am only a user and I will probably also not use non-unique group names, so I am in no position to demand anything - take my input here just as thoughts on the topic. Having said that and given these different opinions on the topic, would it be worthwhile to have a sort of a BETA version of Jabref (similar to a separate branch on Github, but I have something more stable in mind), which allows users to use features, which the main developers of JabRef do not think should currently appear in the main/stable version? It could either be a separate version (though I think that would just make things more complicated) or the currently used developer version, but with an additional preference window, which allows the user to enable certain BETA features, e.g. the creation of non-unique groups. =||= > but with an additional preference window, which allows the user to enable certain BETA features, e.g. the creation of non-unique groups.

I think, our different branches should cover that request. We aim for reducing the number of preferences and keep the number testing candidates small. We even cannot catch up with the current PRs; thus there IMHO is no chance to maintain a beta version. Maybe, if some developer jumps in ^^ =||= "Allow identical group names"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Allow creation of groups with names that already exist somewhere in the group hierarchy.

This in the essence fixes #7554 by making repeated group names ""first class citizens"" in JabRef, allowing to create them in the GUI (with a warning, of course). It seems suitable for many users (as judged by group interface discussions) and does not bring any undesired consequences (I played for a while with it, everything works as expected, assuming you are fine with the fact that two groups with the same names contain always the same entries. For me this seems OK.).

I offer this PR since the fix was *very* simple (SEH == Sunday Evening Hack ;) ), and brings a lot of useful functionality IMHO. The alternative name suggestions are possible but will need considerably more effort...

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

![Screenshot at 2021-03-21 17-56-22](https://user-images.githubusercontent.com/10668420/111911840-c0779f00-8a6f-11eb-92e8-cc51efb63d5e.png)

- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable – not yet but will do later -- S.G.)
- [ ] Tests created for changes (if applicable – seems not, all tests pass S.G.)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository (S.G. -- not yet but will do later)."Saulius Gražulissauliusg04/12/21, 06:13:08 PM
7337.07569Custom web address for accessing articles through DOIWhen I click on the `Open` button next to the DOI of an entry it opens a web browser to the address `https://doi.org/[DOI]`, which then redirects to the article website. In order to access articles in subscription-based journals, my institution has a shortcut that involves modifying the address to the doi site (e.g. for my institution it is `https://doi-org.ezproxy.lib.uts.edu.au/[DOI]`). It would be great if the address used to access the articles through the DOI could be modified in the preferences."I am a newbie to jabref, could you please provide an instruction on how to find that button  =||= Add a new entry with a DOI, you can then find the button next to the DOI field.
<img width=""939"" alt=""grafik"" src=""https://user-images.githubusercontent.com/320228/109426715-52e7ce00-79ef-11eb-8050-b8b58b5684ea.png"">


What needs to be done:
- Add a preference for specifying a custom DOI base url in the preferences
- Use that preferences value when opening the URL of the DOI
- Maybe also use that preferences value for downloading full text? =||= Started working on it =||= Thanks to @BJaroszkowski  this issue is now resolved. There is now an option in the preferences.


We would like to ask you to use a development build from https://builds.jabref.org/master and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= @Siedlerchr @Ali96kz Thanks for getting this done. I tried it out, but I think the feature is not complete yet. Currently, it only works when I click the `Open` button from the entry editor window. However, if I click on the `Linked identifiers` button from my entry list, or if I right-click an entry and choose `Open URL or DOI` (or hit `F3`), it does not use the customised URL base.

Hope the explanation is clear, if it's not I can add some screenshots. =||= @jpdehollain It's not me. That task was already in development when I wanted to start @BJaroszkowski  =||= Yes, the explanation is clear and it is something that I overlooked - opening DOI URI from `LibraryTab` and `IdentifierEditor` was handled differently. I will be shortly submitting PR to address that issue. =||= This is now fixed in the latest development version (note that the newest version is now always under ""main"")

We would like to ask you to use a development build from https://builds.jabref.org/main and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= Works great! Thanks for implementing this @BJaroszkowski  and @Siedlerchr  =||= "Custom DOI base address fix"As mentioned in 
Fixes #7337 the option to choose custom DOI base address did not propagate to `LibraryTab` and this PR aims to solve exactly that. In the process I refactored `LinkedIdentifierColumn` so that it uses `OpenUrlAction` as well.

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."BJaroszkowski04/08/21, 04:50:02 PM
7524.07573Column sort order not properly stored"There is somehow a bug in storeColumnPreferences 

Even when I change the sort oder of one column


From debugging I noticed it's always empty  and this is the root issue why the export does not take into account the current table order 
https://github.com/JabRef/jabref/blob/2c7715cf0476d504475cde7b5e23c4bff677036b/src/main/java/org/jabref/preferences/JabRefPreferences.java#L1932-L1935""Debugged a bit more, it's odd: Sometimes the mainTable.getSortOrder() returns an empty list. 
I could reproduce it as follows.  Sort by year DESC, e.g. click on the table header for the YEAR column.

https://github.com/JabRef/jabref/blob/c8f7be89ad704065474decb61851e42416caf88d/src/main/java/org/jabref/gui/maintable/PersistenceVisualStateTable.java#L36-L41


@calixtus  I remember that you worked on this. Any idea?
 =||= I took a quick look into it. I honestly have no idea why. mainTable.getSortOrder refs directly to the javafx-implementation of a TableView. =||= Hi, i'm a software engineering student and I'm really looking forward to solve this issue if possible. It will be really appreciated to get some guidance or help since i'm new to the project. Thanks! =||= 
@Siedlerchr i can propose the idea of adding a change listener to the mainTable.getSortOrder that will basically detect whenever there's a change in the sorting order we want ASC or DESC and in a case of DESC order the event will be handled. If it's a good solution i can manage to solve it directly. Thanks in advance ! =||= Thanks for your interest,  but the underlying problem is a bit more complicated and we already have listeners in place if you look closely in the  PersistenceVisualStateTable

https://stackoverflow.com/questions/52255126/javafx-tableview-why-does-the-sortorder-listener-does-not-fire-when-i-sort-desc

The question is rather: Why is the getSortOrder list sometimes empty and sometimes not when a listener is triggered? =||= Hello @Mehdi-Ayadi nice to hear, that you took interest in JabRef.
To get started, I would suggest you take a look at our developer documentation and start by solving some ""good first issues"" in our issue tracker to become familiar with the code base of JabRef.
Please note that you have to distinguish in JavaFX between to column sort order and the sort type of a column. Both are stored in JavaFX in separate variables. Right now we are using a changelistener (in PersistentVisualState), but somehow the JavaFX framework does not provide any sort order at all in certain cases. A first step towards a solution would be to debug the ChangeListener and to get an understanding, in which situations it does not work and in which it does. =||= @Siedlerchr  @calixtus  thank you for your fast replies and for the clarifications ! it's really appreciated. I will take a look a bit more into the details and do my best to come up with a solution. =||= Idea for debugging: Split each listener to call a separate method so it's easier to see what listener is when called =||= "Fix column sort order gets overwritten"Fixes #7524

The problem was that mainTable.getSortOrder is only filled when there is a change. However, updateColumnPreferences was also called when just the width changed and then getSortOrder was empty and was always overwritten. 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr03/29/21, 06:49:52 PM
7590.07600Uncaught exception when long pages in key"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef 5.3--2021-03-29--2948e6d
Windows 10 10.0 amd64 
Java 14.0.2 
JavaFX 16+8

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

Steps to reproduce the behavior:
1. Set the Citation key generator pattern to: `[auth][year][pageprefix][firstpage][pageprefix][lastpage]`
2. Add to a library or autogenerate the key for an entry with [PMID 32528990](https://pubmed.gov/32528990)
3. `Uncaught Exception occurred in Thread[JavaFX Application Thread,5,main]`

<details>
  <summary>BibTeX Source</summary>

  ```bibtex
% Encoding: UTF-8
% Grabbed with ZoteroBib (https://zbib.org/)

@article{ellis_descriptive_2020,
	title = {Descriptive {Epidemiology} of {Adolescent} {Clavicle} {Fractures}: {Results} {From} the {FACTS} ({Function} after {Adolescent} {Clavicle} {Trauma} and {Surgery}) {Prospective}, {Multicenter} {Cohort} {Study}},
	volume = {8},
	issn = {2325-9671},
	shorttitle = {Descriptive {Epidemiology} of {Adolescent} {Clavicle} {Fractures}},
	doi = {10.1177/2325967120921344},
	abstract = {Background: The majority of previous investigations on operative fixation of clavicle fractures have been related to the adult population, with occasional assessments of the younger, more commonly affected adolescent population. Despite limited prospective data for adolescents, the incidence of operative fixation of adolescent diaphyseal clavicle fractures has increased.
Purpose: To detail the demographic features and descriptive epidemiology of a large pooled cohort of adolescent patients with diaphyseal clavicle fractures presenting to pediatric tertiary care centers in the United States through an observational, prospective, multicenter cohort study (Function after Adolescent Clavicle Trauma and Surgery [FACTS]).
Study Design: Cross-sectional study; Level of evidence, 4.
Methods: Patients aged 10 to 18 years who were treated for a diaphyseal clavicle fracture between August 2013 and February 2016 at 1 of 8 geographically diverse, high-volume, tertiary care pediatric centers were screened. Treatment was rendered by any of the pediatric orthopaedic providers at each of the 8 institutions, which totaled more than 50 different providers. Age, sex, race, ethnicity, fracture laterality, hand dominance, mechanism of injury, injury activity, athletic participation, fracture characteristics, and treatment decisions were prospectively recorded in those who were eligible and consented to enroll.
Results: A total of 545 patients were included in the cohort. The mean age of the study population was 14.1 ± 2.1 years, and 79\% were male. Fractures occurred on the nondominant side (56\%) more frequently than the dominant side (44\%). Sport was the predominant activity during which the injury occurred (66\%), followed by horseplay (12\%) and biking (6\%). The primary mechanism of injury was a direct blow/hit to the shoulder (60\%). Overall, 54\% were completely displaced fractures, defined as fractures with no anatomic cortical contact between fragments. Mean shortening within the completely displaced group was 21.9 mm when measuring the distance between fragment ends (end to end) and 12.4 mm when measuring the distance between the fragment end to the corresponding cortical defect (cortex to corresponding cortex) on the other fragment (ie, true shortening). Comminution was present in 18\% of all fractures. While 83\% of all clavicle fractures were treated nonoperatively, 32\% of completely displaced fractures underwent open reduction and internal fixation.
Conclusion: Adolescent clavicle fractures occurred more commonly in male patients during sports, secondary to a direct blow to the shoulder, and on the nondominant side. Slightly more than half of these fractures were completely displaced, and approximately one-fifth were comminuted. Within this large cohort, approximately one-third of patients with completely displaced fractures underwent surgery, allowing for future prospective comparative analyses of radiographic, clinical, and functional outcomes.},
	language = {eng},
	number = {5},
	journal = {Orthopaedic Journal of Sports Medicine},
	author = {Ellis, Henry B. and Li, Ying and Bae, Donald S. and Kalish, Leslie A. and Wilson, Philip L. and Pennock, Andrew T. and Nepple, Jeffrey J. and Willimon, Samuel C. and Spence, David D. and Pandya, Nirav K. and {FACTS Study Group} and Kocher, Mininder S. and Edmonds, Eric W. and Farley, Frances A. and Gordon, J. Eric and Kelly, Derek M. and Busch, Michael T. and Sabatini, Coleen S. and Heyworth, Benton E.},
	month = may,
	year = {2020},
	pmid = {32528990},
	pmcid = {PMC7263158},
	keywords = {adolescent, clavicle fixation, clavicle fracture, pediatric},
	pages = {2325967120921344},
}
  ```
</details>

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

<details>
  <summary>Log File</summary>
  
  ```
 java.lang.NumberFormatException: For input string: ""2325967120921344""
	at java.base/java.lang.NumberFormatException.forInputString(Unknown Source)
	at java.base/java.lang.Integer.parseInt(Unknown Source)
	at java.base/java.lang.Integer.parseInt(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.BracketedPattern.firstPage(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.BracketedPattern.getFieldValue(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.CitationKeyGenerator.lambda$expandBracketContent$2(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.BracketedPattern.expandBrackets(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.CitationKeyGenerator.createCitationKeyFromPattern(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.CitationKeyGenerator.generateKey(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.citationkeypattern.CitationKeyGenerator.generateAndSetKey(Unknown Source)
	at org.jabref@5.3.229/org.jabref.gui.citationkeypattern.GenerateCitationKeySingleAction.execute(Unknown Source)
	at org.jabref@5.3.229/org.jabref.gui.actions.JabRefAction.lambda$new$3(Unknown Source)
	at org.jabref.merged.module@5.3.229/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module@5.3.229/org.controlsfx.control.action.Action.handle(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.scene.Node.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.scene.control.Button.fire(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.scene.control.inputmap.InputMap.handle(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventUtil.fireEventImpl(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.event.EventUtil.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.event.Event.fireEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.scene.Scene$MouseHandler.process(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.scene.Scene.processMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.scene.Scene$ScenePeerListener.mouseEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(Unknown Source)
	at java.base/java.security.AccessController.doPrivileged(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.glass.ui.View.handleMouseEvent(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.glass.ui.View.notifyMouse(Unknown Source)
	at org.jabref.merged.module@5.3.229/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
	at org.jabref.merged.module@5.3.229/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
  ```
</details>"Fix NumberFormatException in BracketedPattern"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Fixes #7590. The error occurs because the size of the integer is too large to be contained in an `int`. The suggested changes use `BigInteger` and `Stream` instead of `int` and for-loops.

This is mostly an excuse to verify my setup after the `master` -> `main` branch name change.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] ~Screenshots added in PR description (for UI changes)~
- [x] ~[Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.~"Jonatan Asketorpk3KAW8Pnf7mkmdSMPHz2703/31/21, 09:21:59 AM
7366.07602Add duplicate count/progress to Possible Duplicates dialog"Summary
---------

As a user, when finding/managing duplicates, it is not possible to know how far through the process you are, or how many entries are left to be processed. The requisite information is apparently already available, but it is only shown *after* closing the `Possible duplicate entries` dialog (see screenshot below)

![2021-01-19 18_04_32-](https://user-images.githubusercontent.com/1011612/104999738-43a35700-5a25-11eb-9f77-02a65151baa8.png)

Improvement
--------------

In the `Possible duplicate entries` dialog, display the `current (entry) number` and `total possible duplicate count` to the dialog.

This may be in the form of:

Where `X` is **current entry cursor value** and `Y` is the **total possible duplicate count** ...

 * Updating the Dialog window title, appending ""Entry X of Y"" to the title, that updates each time the entry cursor is updated or moved to the ""next item"".
 * Add ""Entry X of Y"" to the right of the diff display multi-select control

![2021-01-19 18_04_25-Possible duplicate entries](https://user-images.githubusercontent.com/1011612/105000962-f88a4380-5a26-11eb-8c9f-63a1821e625d.png)""Unless someone says otherwise, I would like to work on this. =||= Thanks to @tp-1000 this is now implemented in the latest **main**  
https://builds.jabref.org/main and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Adds progress count to Possible Duplicates dialog"resolves #7366

When processing duplicate entries,
Possible Duplicates dialog gave no indication as to progress.

To address this lack of feedback,
a progress counter was added to the title bar.

The title property now contains two updatable properties:
1) A total count of all duplicates
2) a count of how many duplicates have already been addressed

They are updated with listeners and bindings to
provide real time feedback.

--- 

Note: because of the use of different threads, the total-count could not be directly bound so an extra variable and listener are required. Also line 88 was removed and `duplicateCount.getAndIncrement()` was changed from `getAndIncrement()` to `incrementAndGet()` so returned value could be used.

--- 
<img width=""675"" alt=""Screen Shot 2021-03-30 at 4 16 45 PM"" src=""https://user-images.githubusercontent.com/56512349/113058351-a32f8880-9173-11eb-826d-760170b39a67.png"">



- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."t.pettytp-100004/12/21, 08:14:07 PM
5850.07639Journal abbreviations in UTF-8 not recognized"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

<!-- Add a clear and concise description of what the bug is. -->
When running an integrity check, Jabref complains about non-ASCII characters in the journal title. However, changing UTF-8 to ASCII generates the error: ""Journal not found in abbreviation list"".

Since the journal abbreviation lists are encoded in UTF-8, it would be nice if Jabref recognizes both formats and treats them equally.""this is most probably related to https://github.com/JabRef/jabref/issues/5562 =||= Hi, I am interested in this issue, but I can not reproduce this bug.

@jorgman1 Can you give the example of a Journal name containing UTF-8 characters and briefly describe how you change UTF-8 to ASCII?

Thanks! =||= E.g. a lot of German journals: `Zeitschrift für Meteorologie`. If I use the Convert Unicode to LaTeX tool, it gets converted to `f{\""{u}}r`. I've noticed that many such journals are in the built-in abbreviation list with `fur`, but that is wrong. The German convention is to put `fuer`. =||= @jorgman1  Have you tested the latest development version?
There have been recently some major changes to the storage/and import of journals and their abbreviation
https://builds.jabref.org/master/ =||= In the newest version (JabRef 5.1--2020-05-04--b5599c9; Windows 7 6.1 amd64; Java 14.0.1) still see in the quality check either ""non-ASCII error"" or ""journal not in abbreviation list error"".

How should I put the journal name? =||= This issue will be closed in 7 days due to inactivity :zzz: Please provide the requested information if the problem persists. =||= This behaviour still persist in the latest version (JabRef 5.1--2020-05-04--b5599c9; Windows 7 6.1 amd64; Java 14.0.1).

How should I put the journal name? =||= This issue will be closed in 7 days due to inactivity :zzz: Please provide the requested information if the problem persists. =||= This has not been solved. Why do we get this status: stale messages. It is very annoying.
  =||= Hi, I'm interested in this issue, and I think I have reproduced this bug. 

The main reason for this bug is the check-tools `Check integrity` only accept the charset ASCII. It works well in English citations, but  **jabref** has users worldwide and has different charsets. Here are Steps to reproduce:

1. New library

2. New article

3. BibeTx source adds the following:

   ```
   @article{杨芙清2005软件工程技术发展思索,
     title={软件工程技术发展思索},
     author={杨芙清},
     journal={软件学报},
     volume={16},
     number={1},
     year={2005},
     publisher={Citeseer}
   }
   ```

4. click ""check integrity."" 

I want to fix this issue, and our goal is to check integrity only by warning the charset, which is not UTF-8. To meet this need, maybe I need an external jar to detect which charset does this string use. I'm trying to fix this issue by this method right now. =||= @MrGhabi  Thanks for your interest. JabRef fetches the journals from the https://github.com/JabRef/abbrv.jabref.org repo which are then assembled to a MV database 
https://github.com/JabRef/jabref/blob/main/buildSrc/src/main/groovy/org/jabref/build/JournalAbbreviationConverter.groovy =||= > @MrGhabi Thanks for your interest. JabRef fetches the journals from the https://github.com/JabRef/abbrv.jabref.org repo which are then assembled to a MV database
> https://github.com/JabRef/jabref/blob/main/buildSrc/src/main/groovy/org/jabref/build/JournalAbbreviationConverter.groovy

Thank you~ =||= Thanks for the fix! =||= "Fix for issue 5850: Journal abbreviations in UTF-8 not recognized"Fixes #5850

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

### Reproduce the issue:
1. New library
2. New article
3. BibeTx source adds the following:
   ```
   @article{杨芙清2005软件工程技术发展思索,
     title={软件工程技术发展思索},
     author={杨芙清},
     journal={软件学报},
     volume={16},
     number={1},
     year={2005},
     publisher={Citeseer}
   }
   ```
4. click ""check integrity"" 

The main reason for this bug is the check-tools `Check integrity` only accept the charset ASCII. It works well in English citations, but  **jabref** has users across the world and they have different charsets. 

### The screenshot:
1. before:
![before](https://user-images.githubusercontent.com/71220965/115108177-93040f80-9fa1-11eb-99c3-6754a5e82120.jpg)

2. after
![intigrity-check](https://user-images.githubusercontent.com/71220965/115108181-9ac3b400-9fa1-11eb-8dc1-dbad6a5a82e8.jpg)

### The way to fix:
1. First I find the bug related to the class `ASCIICharacterChecker.java`
2. In this class 
```
boolean asciiOnly = CharMatcher.ascii().matchesAllOf(field.getValue());
```
any non-ASCII encoded characters will be warned.
3. Then I remove the steps in `IntegrityCheck` .

And still, I want to give a warning about non-UTF8 encoded characters.
1. I get the default encoding from the system (Since we need to give a warning when the field cannot be decoded in UTF-8. And this may happen when users' default encoding charset is non-UTF-8)
2. check whether the value of fields(string) can be decoded in UTF-8
3. if not, just give a warning about ""Non-UTF-8 encoded found""

To check this, we need first set out the default charset(for example GBK) in the whole environment. 
Then we can get the following warning when using Integrity check:
![image](https://user-images.githubusercontent.com/71220965/115108584-e11a1280-9fa3-11eb-843f-b3f3a65857e6.png)


"MrGhabi04/23/21, 07:36:19 AM
7195.07655Unselect entries in the main table and opacity of disabled icon-buttons"<!--
Please use the GitHub issue tracker only for bug reports and smaller suggestions for improvements.
Requests for completely new features, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks!
-->

**Is your suggestion for improvement related to a problem? Please describe.**
1. At the moment you can't unselect bib entries in the main table. This is perhaps a useless feature but it is part of my ""default behaviour"". If I am editing a bib entry in a small library, and I want to close the entry tab I click on an empty row in the main table, and I expect the bib entry to be unselected and the entry tab to hide (since there is no longer a selected entry to edit). Am I the only one that repeatedly does this ? 😬 
2. On a related note, should disabled icon-buttons change opacity, e.g., if no bib entry is selected.

**Additional context**
Regarding disabled icon-buttons,
```css
.icon-button:disabled {
    -fx-opacity: 0.4;
}
```
Looks good to me.
<img width=""367"" alt=""Skärmavbild 2020-12-15 kl  09 12 29"" src=""https://user-images.githubusercontent.com/2598631/102226012-dc3e3880-3eb5-11eb-8c93-eefb5f10b1b8.png"">
vs
<img width=""367"" alt=""Skärmavbild 2020-12-15 kl  09 12 33"" src=""https://user-images.githubusercontent.com/2598631/102225927-c16bc400-3eb5-11eb-9d9b-1b4943206f75.png"">""I think both ideas are good. Would you mind creating PRs for them? (we already have ActionHelper.needsEntriesSelected so this should be straigthforward) =||= Great! 
I'll split it over two PRs. One dealing with the opacity/disabled, which should be finished quicker, and one trying to figure out when it is reasonable to ""lose"" a selection. =||= Hi! Does this issue still accept pull request? =||= @JavuesZhang, if it is still a problem in the latest version, yes. I unfortunately haven't had time to look at the issue. =||= "Fix#7195 partly Opacity of disabled icon-buttons"Fixes #7195 
Opacity of disabled icon-buttons

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Add the disabled icon style in `Base.css`

- No tabs opened:
![i1](https://user-images.githubusercontent.com/48386227/115385506-cc8b8380-a20a-11eb-9cd6-bb2b9adbf331.png)

- Open a tab and do not select any entry:
![i2](https://user-images.githubusercontent.com/48386227/115385596-e3ca7100-a20a-11eb-9e88-391a824a0e80.png)

- Select an entry in the opened tab:
![i3](https://user-images.githubusercontent.com/48386227/115385630-edec6f80-a20a-11eb-95b5-a15a8deeddd6.png)


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jiayu ZhangJavuesZhang04/23/21, 12:38:42 PM
7016.07656Toggle of special fields does not work for sorted entries"JabRef 5.2--2020-10-13--fdaf25a
Linux 4.9.0-13-amd64 amd64 
Java 15

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

When entries are marked and sorted by a special field, ""toggling"" the special field of these entries does not work.

Steps to reproduce the behavior:
1. open the file jabref-authors.bib (https://github.com/JabRef/jabref/blob/master/src/test/resources/testbib/jabref-authors.bib)
2. display the columns of the specials fields (options -> preferences, tab Entry table)
3. mark a small set of entries as ""Relevant""
4. sort entries by ""Relevance"" (by clicking on the column title), so that the marked entries are displayed at the top of the entry table
5. select the entries marked as ""Relevant""
6. right-click and select ""Toggle relevancy"". 
==> Only a portion of the selected entries have their ""Relevance"" status toggled.

Note: same faulty behavior with the other special fields (Read status, Rank, Quality assured, Priority, Print status)""Can I do this? =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= > This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.
> 
> As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:
> 
> * If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
> * Provide further steps or information on how to reproduce this issue.
> * Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
> * If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.
> 
> Thank you for your contribution!

Hi, I think I have reproduced this problem. Could I have a try to fix it? =||= Sure that would be neat  =||= @JavuesZhang I can confirm this is now fixed. Thank you for improving JabRef!

JabRef 5.3--2021-04-26--add694a
Linux 4.19.0-16-amd64 amd64 
Java 15.0.2 
JavaFX 16+8 =||= "Fixes #7016 toggle of special fields does not work for sorted entries"Fixes #7016 
Make a copy of selected entries and change field in the copy so that the sort strategy will not influence the result.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
The original version used for-each on the selected entry list but ConcurrentModificationException happened. Then I tried to replace it with normal for loop but the toggle problem still exist, though the exception did not occur any more. By checking the list in each loop I found that the order of the items in this list was changed during the for loop. Not exactly knowing how the sorting strategy is performed, I make a copy of the list and do field change on the copied list. Finally the toggle action performs correctly.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jiayu ZhangJavuesZhang04/26/21, 06:54:01 PM
7616.07657SSLHandshakeException"JabRef 5.3--2021-03-29--2948e6d
Linux 5.11.11-200.fc33.x86_64 amd64 
Java 15.0.2 
JavaFX 16+8


I asked an entry to download the file https://www.serbski-institut.de/os/dnlarchiv/Kleine_Reihe_27_web.2217.pdf and got this error message.

for SSL certificate issues, I would suggets allow the user to add an exception, like a browser would do?

<details>
  <summary>Log File</summary>
  
  ```
javax.net.ssl.SSLHandshakeException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at java.base/sun.security.ssl.Alert.createSSLException(Unknown Source)
	at java.base/sun.security.ssl.TransportContext.fatal(Unknown Source)
	at java.base/sun.security.ssl.TransportContext.fatal(Unknown Source)
	at java.base/sun.security.ssl.TransportContext.fatal(Unknown Source)
	at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.checkServerCerts(Unknown Source)
	at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.onCertificate(Unknown Source)
	at java.base/sun.security.ssl.CertificateMessage$T12CertificateConsumer.consume(Unknown Source)
	at java.base/sun.security.ssl.SSLHandshake.consume(Unknown Source)
	at java.base/sun.security.ssl.HandshakeContext.dispatch(Unknown Source)
	at java.base/sun.security.ssl.HandshakeContext.dispatch(Unknown Source)
	at java.base/sun.security.ssl.TransportContext.dispatch(Unknown Source)
	at java.base/sun.security.ssl.SSLTransport.decode(Unknown Source)
	at java.base/sun.security.ssl.SSLSocketImpl.decode(Unknown Source)
	at java.base/sun.security.ssl.SSLSocketImpl.readHandshakeRecord(Unknown Source)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
	at java.base/sun.security.ssl.SSLSocketImpl.startHandshake(Unknown Source)
	at java.base/sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)
	at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(Unknown Source)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(Unknown Source)
	at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
	at java.base/java.net.HttpURLConnection.getResponseCode(Unknown Source)
	at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.net.URLDownload.openConnection(Unknown Source)
	at org.jabref@5.3.229/org.jabref.logic.net.URLDownload.asInputStream(Unknown Source)
	at org.jabref@5.3.229/org.jabref.gui.externalfiles.FileDownloadTask.call(Unknown Source)
	at org.jabref@5.3.229/org.jabref.gui.externalfiles.FileDownloadTask.call(Unknown Source)
	at org.jabref@5.3.229/org.jabref.gui.util.BackgroundTask$3.call(Unknown Source)
	at org.jabref@5.3.229/org.jabref.gui.util.DefaultTaskExecutor$1.call(Unknown Source)
	at org.jabref.merged.module@5.3.229/javafx.concurrent.Task$TaskCallable.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
	at java.base/java.util.concurrent.FutureTask.run(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
	at java.base/java.lang.Thread.run(Unknown Source)
Caused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at java.base/sun.security.validator.PKIXValidator.doBuild(Unknown Source)
	at java.base/sun.security.validator.PKIXValidator.engineValidate(Unknown Source)
	at java.base/sun.security.validator.Validator.validate(Unknown Source)
	at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(Unknown Source)
	at java.base/sun.security.ssl.X509TrustManagerImpl.checkServerTrusted(Unknown Source)
	... 31 more
Caused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target
	at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(Unknown Source)
	at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(Unknown Source)
	at java.base/java.security.cert.CertPathBuilder.build(Unknown Source)
	... 36 more

  ```
</details>""Reproducible. Browser does not complain. =||= Probably some certificates missing in the Java version  =||= I think for the SSL handshake issue, we can give the user some prompts like a browser and let the user choose whether to trust this site.
Either some certificates missing in the Java version or the certificate of that site has indeed expired. =||= > I think for the SSL handshake issue, we can give the user some prompts like a browser and let the user choose whether to trust this site.
> Either some certificates missing in the Java version or the certificate of that site has indeed expired.

Before downloading the file, check SSL Handshake, like
https://github.com/Ryyyc/jabref/blob/2b37ec73f876b964d69e585abe2b22d18a8bfb4e/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L473-L491

After the download task is completed, restore the original certificate verification settings
https://github.com/Ryyyc/jabref/blob/2b37ec73f876b964d69e585abe2b22d18a8bfb4e/src/main/java/org/jabref/gui/fieldeditors/LinkedFileViewModel.java#L493-L511 =||= @Ryyyc That looks already like a good idea. Would be cool if you could create a PR° =||= @Siedlerchr    All right, if there is any need to modify this PR #7657 , please contact me. =||= @Siedlerchr Hi, there seem to be some problems when making a pull request. 
Some test cases did not seem to pass, but I tested the code on the branch `main` on the local machine, and some test cases also failed. What should I do? =||= Thanks to @Ryyyc  this should now be fixed in the latest main (currently building) =||= "Fix SSLHandshake Exception by using bypass"Fixes #7616 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.


File download path: https://www.serbski-institut.de/os/dnlarchiv/Kleine_Reihe_27_web.2217.pdf

<br>

A valid authentication path cannot be found from the site where the downloaded file is located, prompting the user with the option of whether to continue the download.
![warning](https://user-images.githubusercontent.com/47767371/115521609-e4700f80-a2bd-11eb-81e1-847244f177a6.png)

<br>

The user chooses to cancel the download.
![canceled_tip](https://user-images.githubusercontent.com/47767371/115521968-416bc580-a2be-11eb-98ba-f2669356065e.png)

<br>

The user chooses to download anyway.
![download](https://user-images.githubusercontent.com/47767371/115522090-652f0b80-a2be-11eb-9dc0-49157e482c6d.png)
"RuanRyyyc04/22/21, 07:32:50 PM
7660.07663"Unable to download some arXiv links if the ""eprint"" field is missing""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.3 developmental portable JAR 

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/main
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/main and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

I am unable to automatically download some arXiv links if the ""eprint"" field is missing. For example, this BibTeX reference works:

```
@Article{booth_bayes-trex_2020,
  author        = {Serena Booth and Yilun Zhou and Ankit Shah and Julie Shah},
  journal       = {arXiv:2002.10248v4 [cs]},
  title         = {Bayes-TrEx: a Bayesian Sampling Approach to Model Transparency by Example},
  year          = {2020},
  month         = dec,
  archiveprefix = {arXiv},
  eprint        = {2002.10248},
  url           = {http://arxiv.org/abs/2002.10248v4},
}
```

but this one doesn't:

```
@Article{booth_bayes-trex_2020,
  author        = {Serena Booth and Yilun Zhou and Ankit Shah and Julie Shah},
  journal       = {arXiv:2002.10248v4 [cs]},
  title         = {Bayes-TrEx: a Bayesian Sampling Approach to Model Transparency by Example},
  year          = {2020},
  month         = dec,
  archiveprefix = {arXiv},
  url           = {http://arxiv.org/abs/2002.10248v4},
}
```

with the only thing different is the eprint field.

Interestingly this doesn't always happen; most of the time JabRef can fetch the arXiv PDF correctly without the eprint field, but for some reason JabRef fails to get other arXiv PDFs like the one above. I suspect it's a formatting issue similar to Issue #7633. It's not always consistent, but it feels like paper titles with colons appear to trigger this behavior more than others.

Perhaps it can be set when the url field is provided that JabRef could use that as a fallback to download the PDF.."This can be fixed by runing the [EprintCleanup](https://github.com/JabRef/jabref/blob/main/src/main/java/org/jabref/logic/cleanup/EprintCleanup.java) on a copy of the entry at https://github.com/JabRef/jabref/blob/2af578f6a9311dace0ec3270e678cc3ae31bad8e/src/main/java/org/jabref/logic/importer/fetcher/ArXiv.java#L118 before proceeding to get the arXiv id from the eprint field. =||= Hi, I think I have solved this problem with the help of @tobiasdiez . I will open a PR later. =||= Thanks to @JavuesZhang this should be fixed in the latest development version. Could you please check the build from http://builds.jabref.org/main/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fixes Jabref#7660 Unable to download some arXiv links if the ""eprint"" field is missing""Fixes #7660
## Brief summary
1. Run EprintCleanup on a copy of the entry the ArXiv fetcher is fetching before getting arXiv id from the eprint field;
2. Add two test method. One finds full text with title containing colon and journal, while another finds full text with title containing colon and url.

## Problem
When finding full text, this BibTeX reference works:
```
@Article{booth_bayes-trex_2020,
  author        = {Serena Booth and Yilun Zhou and Ankit Shah and Julie Shah},
  journal       = {arXiv:2002.10248v4 [cs]},
  title         = {Bayes-TrEx: a Bayesian Sampling Approach to Model Transparency by Example},
  year          = {2020},
  month         = dec,
  archiveprefix = {arXiv},
  eprint        = {2002.10248},
  url           = {http://arxiv.org/abs/2002.10248v4},
}
```
![#7660-0](https://user-images.githubusercontent.com/48386227/115873907-13c97c80-a476-11eb-821f-24598bd1a8a9.png)

But when `eprint` field is missing, no full text will be found:
```
@Article{booth_bayes-trex_2020,
  author        = {Serena Booth and Yilun Zhou and Ankit Shah and Julie Shah},
  journal       = {arXiv:2002.10248v4 [cs]},
  title         = {Bayes-TrEx: a Bayesian Sampling Approach to Model Transparency by Example},
  year          = {2020},
  month         = dec,
  archiveprefix = {arXiv},
  url           = {http://arxiv.org/abs/2002.10248v4},
}
```
![#7660-1](https://user-images.githubusercontent.com/48386227/115873922-188e3080-a476-11eb-80e7-222c58ee4e09.png)

## Solution
Since the title contains colon and arXiv uses colon to represent key and value, the title may be recognized mistakenly. So use other fields to get the eprint field to avoid this problem. Thanks to the advice from @tobiasdiez .

## Screenshots
After fix:
![#7660-2](https://user-images.githubusercontent.com/48386227/115873880-0f04c880-a476-11eb-9291-82e011f87ab3.png)


- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Jiayu ZhangJavuesZhang04/23/21, 08:08:03 PM
6199.07667EndNote .xml import to JabRef: PDF links are not imported correctly."<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version <JabRef 5.0--2020-03-06--2e6f433
Windows 10 10.0 amd64 
Java 13.0.2>

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [ x ] I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When importing an EndNote library in .xml format into JabRef, the PDF attachment links are not imported into JabRef correctly.

Steps to reproduce the behavior:

1. I followed instructions under ""Importing an EndNote library into JabRef"" at https://www.mcgill.ca/library/files/library/jabref_guide_2016.pdf, and exported the EndNote library as an .xml file (attached here as file ""My EndNote Library-Converted_xml.txt"") . See below snapshot (attached here as file ""EndNote Export settings = xml.PNG"") showing the export configuration of EndNote version X9.3.1 (Bld 13758).

2. I then imported the EndNote .xml library file into JabRef version 5.0.

3. The EndNote .xml library is imported into JabRef; however, the PDF file attachments are not imported automatically. 

4. It appears this is a bug because JabRef expects the pdf url to be encapsulated in a `style` span as this is the case for the other urls. As a temporary workaround, you can add the <style> ... </style> tag around the filename.pdf (i.e., filename.pdf  --> <style> filename.pdf </style>) yourself for the moment; this should work semi-automatically via a ""search and replace"" in your favorite text editor. Also, remember to replace the ""internal-pdf://"" before the filename.pdf with the correct path in your computer (e.g.,  ""internal-pdf://path_folder1/filename.pdf""  --> ""C:/EndNote/PDFs_Folder/path_folder1/filename.pdf"" in Windows, etc.).

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

![EndNote Export settings = xml](https://user-images.githubusercontent.com/40124922/77837920-af79a380-7123-11ea-852c-6e7192ae13bb.PNG)

[My EndNote Library-Converted_xml.txt](https://github.com/JabRef/jabref/files/4398179/My.EndNote.Library-Converted_xml.txt)

<details>
  <summary>Log File</summary>
  
  ```
  Paste an excerpt of your log file here
  ```
</details>""Relevant code: https://github.com/JabRef/jabref/blob/06e3b7259098f344606c8580fa4cd8feb3476ee9/src/main/java/org/jabref/logic/importer/fileformat/EndnoteXmlImporter.java#L263-L268 =||= @tobiasdiez , thank you for the hint for the relevant code. I am working on a fix but have an addition question. Should I post directly here, or can I send you an email? =||= @archeaopteryx  Please ask here so we all can help. Best is to create a draft PR and then ask a specific question about the code  =||= @Siedlerchr , thank you for the advice.
The problem is that I'm not sure how to to get the URL content. As stated by OP, it's fine to have an empty ```style``` span, but having no ```style``` span means that the unmarshaller returns a null object with no content.

My naive approach would be to change the behavior of the url class referenced when defining the unmarshaller context, but that isn't possible since the context is defined by generated files. Am I missing a better solution? And, if not, is it possible for me to change the generated files? =||= I came across this issue and it's inded a problem of the generated unmarshaller. I am not an expert in xml and those schema stuff. But from my opinion it should be necessary to adjust the xsd schema to add some kind of content attribute for the url attribute to represent the text without a style.

```
<urls>
				<related-urls>
					<url>
						<style face=""normal"" font=""default"" size=""100%"">&lt;Go to
							ISI&gt;://WOS:000377368200039</style>
					</url>
				</related-urls>
				<pdf-urls>
					<url>/Users/xxxx/_JABREFTEP/Menezes2018 - Map2Check Using LLVM and KLEE.pdf</url>
				</pdf-urls>
			</urls>
```
The xsd file is here:
https://github.com/JabRef/jabref/blob/master/src/main/resources/xjc/endnote/endnote.xsd =||= I am currently working on this issue, but I get a little lost  now. Could you give me some hints or start points on that issue @Siedlerchr? =||= @Aloofwisdom  Thanks for your interest. JabRef uses the xjc tool (which uses jaxb) to automatically generate java classes from an xsd/xml schema (see the gradle task generateSource).

The problem is that in the XSD defintion the element  `<pdf-urls>` contains a list of `<url> `with a style attribute. However, there can also be `<url>` without a style attribute.
However, as you see that actually xml file can also contain `<url>` without a style attribute.  

To ease your work, I already adjusted the xsd file for you. Replace the section in the` endnote.xsd` file under /`src/main/resouces/xjc/endote/` with the following.
Then do a ./gradlew clean and a ./gradlew run (or ./gradlew generate source first) to regenerate the new EndNote classes.

Then you can adjust the method in the java code @tobiasdiez showed above to take the new fact into account.

```xsd
<xs:element name=""url"">
		<xs:complexType>
			<xs:choice>
				<xs:sequence>
					<xs:element minOccurs=""0"" ref=""style"" />
				</xs:sequence>
				<xs:element name=""url"" type=""xs:string"" />
			</xs:choice>
			<xs:attribute name=""has-ut"">
				<xs:simpleType>
					<xs:restriction base=""xs:token"">
						<xs:enumeration value=""yes"" />
						<xs:enumeration value=""no"" />
					</xs:restriction>
				</xs:simpleType>
			</xs:attribute>
			<xs:attribute name=""ppv-app"" />
			<xs:attribute name=""ppv-ref"">
				<xs:simpleType>
					<xs:restriction base=""xs:token"">
						<xs:enumeration value=""yes"" />
						<xs:enumeration value=""no"" />
					</xs:restriction>
				</xs:simpleType>
			</xs:attribute>
			<xs:attribute name=""ppv-ut"" />
		</xs:complexType>
	</xs:element>
```

 =||= @Siedlerchr Your illustration is pretty clear, thanks. I will make a pull request as soon as I finish. =||= "Fix for issue 6199: EndNote .xml import to JabRef: PDF links are not imported corrected."
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

Fixes #6199  
- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

## Summary of Issue 6199
When users import EndNote type xml to Jabref, it always assumes that urls are warped inside a style tag. However,  some urls may not be wrapped in a style tag and as a result,  Jabref cannot parses them.

## Way to Fix
In the xsd file, I change the the complexType's attribute to `mix=""true""`, so that it can accept both vanilla text and subelements. Then I will check whether a style tag exists: if it does, use the text inside it; otherwise, use vanilla text instead."aloofluo04/26/21, 06:12:14 PM
7351.07671new time field creation date - missing possibility to read other field names; missing backup of old information"
JabRef 5.3--2021-01-14--e66f5be
Linux 5.10.6-200.fc33.x86_64 amd64 
Java 15.0.1 
JavaFX 15.0.1+1

In the past I set a field timestamp to all entries. And this JabRef version simply deleted that information!
that's a loss for users who actually use the timestamp information.  now I see a modificationdate field, but that simply tells me todays date, because I updated to this master version today. ""Refs : https://github.com/JabRef/jabref/pull/7334 =||= A brief consideration: if users seriously use the old timestamp information, then https://github.com/JabRef/jabref/pull/7334 renders their timestamp information useless. That's a shame. So, this issue should be fixed definitively before the next release. =||= I am now on JabRef 5.3--2021-02-05--93ad499
Linux 5.10.12-200.fc33.x86_64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1

And I note that my entries miss both timestamp fields and modificationdate fields.
 =||= Something goes wrong if data is lost without even informing or asking the user =||= Idea: Convert the migration to a cleanup action. Ask the user on startup, if he want's to convert the timestamp, provide ""do not ask me again"" checkbox. =||= DevCall result

- Migration has an issue @DominikVoigt.
- It seems that the entry is migrated ~~(some magic happens) --> we need to explain the migration proecure somewhere (or add a link here)~~
- ~~If the migration decides to put the last-updated date information, this information is overwritten, because the entry is modified during the migration. The migration MUST NOT flag the entry as modified to keep the original timestamp.~~ - The entry is NOT flagged as modified during migration, because the listener is added later

Update: Migration logic:

> If the old ""Update timestamp on modification"" option is active, the timestamp will be migrated to the modification field. Otherwise, it will be migrated to the creationdate field. =||= Note on the issue: When the date could not be parsed, the current date is taken.

@ilippert Could you provide us an example of the date entry used in your case? =||= I think the format was 
`  timestamp = {2017-04-28},` =||= And I used
`  date-added          = {2014-08-17 20:32:02 +0200},
  date-modified       = {2014-08-17 20:32:02 +0200},` =||= "migration of timestamp"This PR moves the migration of the timestamp field from a PostOpenMigration to mutually exclusive cleanup actions.
As this cleanup action migrates the timestamp field to the creationdate or modificationdate fields, 
the modificationdate of a BibEntry is not updated when this cleanup is conducted.
If the original timestamp field could not be parsed, the cleanup does not modify the BibEntry in any way to not lose data.
Fixes #7351.

Modified Cleanup dialog:
![image](https://user-images.githubusercontent.com/43381984/116080557-82d2eb00-a699-11eb-9285-4d7b64e5a9b8.png)

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Dominik VoigtDominikVoigt05/01/21, 04:06:19 PM
7606.07672Seaching for bibliographies and importing them triggers uncaught java.lang.IndexOutOfBoundsException"<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version 5.2, 5.3, commit badffe9ae in 'master' on LinuxMint-19.3, Linuxmint-20.1  -->

<!-- IMPORTANT NOTE ->
<!-- 
      Please always test if the bug is still reproducible in the latest development version.
      We are constantly improving JabRef and some bugs may already be fixed.
      You can download the development version at: http://builds.jabref.org/master/
      Please make a backup of your library before you try out this version.
      If you already use a development version, ensure that you use the latest one.
 -->
- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

<!-- Add a clear and concise description of what the bug is. -->

When search for literature (say in ArXiv) and the importing entries, an uncaught exception is triggered. This behaviour is not always present, but can be reproduced after searching and importing several times in the same session.

Steps to reproduce the behavior:
1. Start a JabRef session without any databases;
2. Create a new database;
3. Save it under some name (e.g. 'test.bib'); this is essential, otherwise different exception is triggered;
4. Open Groups interface (not clear if this is important, but I had it open during tests; also they are open in screens at #7343)
5. Open Web search interfacel
6. Select arXive (possibly other search source would give the same behaviour);
7. Search for ""Minkowski space"", receive 20 hits;
8. select them all and import;
9. If the exceeption is not trigegred immediately, repeat the steps 7-8  with other search terms, e.g. ""Kilogram definition"", ""Teaching Temperature"", etc.
10. At some stage an exception window pops up:
![Screenshot from 2021-04-04 10-04-44](https://user-images.githubusercontent.com/10668420/113503344-f6ba2180-9539-11eb-9846-40aa477ec5c8.png)

The bug might be related to #7343, but the exception is different (OutOfBounds instead NullPointer), and is not in the Dark mode.

Sometimes there are multiple exceptions happening opening multiple pop-up windows. The fate of JabRef after exception is different – sometimes it freezes and the process needs to be killed, sometimes one can still save the database after closing the exception popup. If JabRef can be closed via it interface, it reports numerous dowload threads still running in the bacground.

More screenshots with sporadic exceptions after the sequence of actions listed here are available in my server:
http://saulius-grazulis.lt/~saulius/JabRef/screenshots/

<!-- If applicable, add excerpt of the bibliography file, screenshot, and excerpt of log (available in the error console) -->

The log message, copied and pasted from the window, reads:

<details>
  <summary>Log File</summary>
  
  ```
java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0
	at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
	at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)
	at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248)
	at java.base/java.util.Objects.checkIndex(Objects.java:373)
	at java.base/java.util.ArrayList.get(ArrayList.java:427)
	at javafx.base/javafx.collections.ListChangeBuilder.insertUpdate(ListChangeBuilder.java:84)
	at javafx.base/javafx.collections.ListChangeBuilder.nextUpdate(ListChangeBuilder.java:467)
	at javafx.base/javafx.collections.ObservableListBase.nextUpdate(ObservableListBase.java:109)
	at javafx.base/com.sun.javafx.collections.ObservableListWrapper.access$100(ObservableListWrapper.java:45)
	at javafx.base/com.sun.javafx.collections.ObservableListWrapper$1$1.invalidated(ObservableListWrapper.java:72)
	at javafx.base/com.sun.javafx.collections.MapListenerHelper$SingleInvalidation.fireValueChangedEvent(MapListenerHelper.java:125)
	at javafx.base/com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)
	at javafx.base/com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)
	at javafx.base/com.sun.javafx.collections.ObservableMapWrapper.remove(ObservableMapWrapper.java:185)
	at org.jabref@100.0.0/org.jabref.model.entry.BibEntry.clearField(BibEntry.java:609)
	at org.jabref@100.0.0/org.jabref.model.entry.BibEntry.clearField(BibEntry.java:590)
	at org.jabref@100.0.0/org.jabref.logic.cleanup.ConvertToBibtexCleanup.lambda$cleanup$2(ConvertToBibtexCleanup.java:35)
	at java.base/java.util.Optional.ifPresent(Optional.java:176)
	at org.jabref@100.0.0/org.jabref.logic.cleanup.ConvertToBibtexCleanup.cleanup(ConvertToBibtexCleanup.java:25)
	at org.jabref@100.0.0/org.jabref.logic.importer.ImportCleanup.doPostCleanup(ImportCleanup.java:25)
	at org.jabref@100.0.0/org.jabref.logic.importer.ImportCleanup.lambda$doPostCleanup$0(ImportCleanup.java:36)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)
	at java.base/java.util.Spliterators$ArraySpliterator.forEachRemaining(Spliterators.java:948)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)
	at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290)
	at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:746)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1016)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1665)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1598)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)
  ```
</details>""Threading issue with the biblatex cleanup action which is run after import. It somehow triggers listener on ClearField in the UI which are not run on the FX thread  =||= Update: the exception is triggered stably only when searching ArXiv, both with and without file download.

Search other bibliography repositories (Medline, Crossref, DBLP, CiteSeerX) mostly goes without an exception. =||= I think I found the root cause:
The CompositeSearchBasedFetcher performs the ImportCleanup Operation, doPostCleanup which calls the coConvertToBibtexCleanup cleanup action which in turns calls entry.ClearField() and this triggers UI Bindings.

The key problem is that peformSearch is itself executed in a Background Thread.
The importCleanup has to be executed after the fetching in the onSucceeded. On a quick look, I think it must be placed in the ImportEntriesDialogViewModel as the BackgroundTasl from the WebSearchPane is passed to that class where finally the on Succeeded is called

 https://github.com/JabRef/jabref/blob/bb011c9313367a28990ae213b3920fe6cd10d1dc/src/main/java/org/jabref/logic/importer/fetcher/CompositeSearchBasedFetcher.java#L50-L64  =||= Hi, I think this problem is interesting, could I try to fix it? =||= "Fix threading cleanup in performSearch"Fixes #7606
Fixes #1018 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr04/27/21, 04:44:50 PM
1018.07672Importing to the correct mode when searching (BibTeX vs biblatex)"Most (all?) of the fetchers will now produce a BibTeX entry. When importing to a BibLaTeX database, this causes some issues, see e.g. #1015. It might make sense to add some mechanism to the search interface such that the correct format is returned. For example, this can be achieved by ""search formatters"", which will also remove some of the need of explicit cleanup code in the fetchers as well as some of the preference settings.""I don't think this should be classified as a bug.
The question here is, who is responsible for outputting the correct format?
- the fetcher
- Jabref itself

I think it should be the fetcher that must be aware of what to output because he is the only one that is able to produce correct entries?!
On the other hand, this would force the fetcher to know the current mode which adds another dependency or at least a parameter to the call.

If we transform entries after fetching to the correct format this could be a hard thing.
This can only work if we always fetch Biblatex and rearrange the fields and strip unsupported fields etc.
 =||= We discussed it in the DevCall: Fetcher should try to fetch in BibLaTex format, but can also return BibTex format. Afterwards JabRef should always run a converter which converts to the correct mode depending on user preferences (for this a BibLaTex > BibTex converter has to be written, based on the `BiblatexCleanup`).
 =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= This issue is now finally closed and fixed in the latest development snapshot 


We would like to ask you to use a development build from https://builds.jabref.org/main and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= "Fix threading cleanup in performSearch"Fixes #7606
Fixes #1018 

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [ ] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr04/27/21, 04:44:50 PM
7305.07674RFC fetcher compatibility with drafts"RFC fetcher does not process drafts IDs, because `prefixedIdentifier` does not begin with `rfc` prefix.

Example URL for draft's raw bibtex resource https://datatracker.ietf.org/doc/draft-ietf-sidrops-aspa-verification/bibtex 
URL structure is the same as in RFC resource, so no change in fetching part is required.


Ref: #3971 5d23970 @jacksonrya 

Thanks in advance. ""I'll take a look at this soon =||= @Siedlerchr Hi, I verified the download URL of the RFC resource.

There will be different URLs for different versions, the main difference is the official release version and the draft version.

For example, rfc1945
![rfc-bib](https://user-images.githubusercontent.com/47767371/115984860-b9e2c700-a5db-11eb-8f76-f9e16b3619e7.png)

It has three versions
+ draft-fielding-http-spec
+ draft-ietf-http-v10-spec
+ rfc1945

Their bibtex item download links are:

+ https://datatracker.ietf.org/doc/draft-fielding-http-spec/bibtex/
+ https://datatracker.ietf.org/doc/draft-ietf-http-v10-spec/bibtex/
+ https://datatracker.ietf.org/doc/rfc1945/bibtex/

For the official release version of RFC, visit the download link of the draft version, they will be redirected to the official release version. In other words, access to https://datatracker.ietf.org/doc/draft-ietf-http-v10-spec/bibtex/ will be redirected to https://datatracker.ietf.org/doc/rfc1945/bibtex/.

In JabRef, the download link format of the bibtex item is forced to https://datatracker.ietf.org/doc/rfc{number}/bibtex/.

https://github.com/JabRef/jabref/blob/4bf895b7519ca6544a5d4248d9d17cf7ea609871/src/main/java/org/jabref/logic/importer/fetcher/RfcFetcher.java#L45-L47

So for some bibtex items that only have a draft version, JabRef will not be able to download correctly. E.g https://datatracker.ietf.org/doc/draft-ietf-sidrops-aspa-verification/bibtex/. =||= So when the draft redirects to the ""release"" version, it should be sufficient to fetch the draft and follow any redirects? =||= The problem now is that for some bibtex items that do not have the ""release"" version,  JabRef will not be able to download correctly.
In other words, the current JabRef can only download the bibtex item with the ""release"" version and cannot download the draft version without the ""release"" version.  E.g https://datatracker.ietf.org/doc/draft-ietf-sidrops-aspa-verification/bibtex/.

We may need to add an option `RFC draft`, or use some logic to determine whether to add the prefix ""rfc"" in the construction of the item in the middle of the download link. =||= @Siedlerchr I think this bug can be solved by judging whether the identifier prefix contains ""draft"". I also added some testcases. See PR [7674](https://github.com/JabRef/jabref/pull/7674). =||= "Fixes Jabref#7305: the RFC fetcher is not compatible with the draftFix for issue 7305"Fixes #7305

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.


We can first determine whether the RFC ID contains the prefix ""draft "", if it is, we will not add the prefix ""RFC"".
Now, RFC fetcher can work well.

Try process drafts ID `draft-ietf-sidrops-aspa-verification`.

![ready](https://user-images.githubusercontent.com/47767371/116380328-7213a800-a846-11eb-842a-eb839df9019e.png)

Before fixing the bug:
![befor-fix](https://user-images.githubusercontent.com/47767371/116380361-7b9d1000-a846-11eb-94ca-194de7a2377a.png)

After fixing the bug:
![after-fixed](https://user-images.githubusercontent.com/47767371/116380441-8c4d8600-a846-11eb-8923-747f8f129fed.png)
"RuanRyyyc05/03/21, 08:26:29 PM
6267.07675DOI-Import-entries not converted to biblatex"```
JabRef 5.1--2020-03-23--67daf36
Windows 10 10.0 amd64 
Java 14
```

**Get BibTeX-Data from DOI does not work for bib_LA_tex**
If I get BibTeX-Data from doi into `@Comment{jabref-meta: databaseType:biblatex;}` it shows the entry in a different format (bibtex istead of biblatex), this is as stupid as comparing ris-files with bib-files (whithout converting)
![Screenshot 2020-04-10 07 46 17](https://user-images.githubusercontent.com/15687581/78967933-e24c7000-7b03-11ea-8d50-beed4a46fe75.png)


**Describe the solution you'd like**
If importing a different file-format (BibTeX) it first has to be converted, as you convert [ris2bib](https://www.bruot.org/ris2bib/).""I don't understand the issue.

Wild guessing:

1. open a bib library
2. add an entry
3. fetch the same entry via a DOI
4. see that the DOI fetch result is different from the entry inserted at 2?

@JoKalliauer It would be really helpful if you could invest time to describe the issue in a more understandable way. We are planning to craft issues for external contributors and this seems to be ones. The external contributors might have more knowledge in Java than working with RIS oder BibTeX. Thus, this issue is currently only understandable by JabRef power users, which in turn do not have time to contribute to JabRef's code. =||= @koppor biblatex (differently to bibtex) uses `journaltitle` instead of `journal`

How to fix this issue:
Since the DOI-database has imho bibtex, you need to convert them bevore importing/comparing using folloging option:

![2020-09-05 (1)blur](https://user-images.githubusercontent.com/15687581/92312443-d71d4380-efc0-11ea-9241-4c229ddb6ace.png)

 =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= ```bib
% Encoding: UTF-8

@String{apr        = {April}}
@String{aug        = {August}}
@String{dec        = {December}}
@String{feb        = {February}}
@String{jan        = {January}}
@String{jul        = {July}}
@String{jun        = {June}}
@String{mar        = {March}}
@String{may        = {May}}
@String{nov        = {November}}
@String{oct        = {October}}
@String{sep        = {September}}
@String{techreport = {Tech. Report}}

@Article{Ba_ant_2000,
  author       = {Bažant, Zdeněk P.},
  date         = {2000-01},
  journaltitle = {International Journal of Solids and Structures},
  title        = {Size effect},
  doi          = {10.1016/s0020-7683(99)00077-3},
  issn         = {0020-7683},
  number       = {1-2},
  pages        = {69--80},
  volume       = {37},
  publisher    = {Elsevier {BV}},
  timestamp    = {2020.01.10},
  urlx         = {http://www.sciencedirect.com/science/article/pii/S0020768399000773},
}

@Comment{jabref-meta: databaseType:biblatex;}
```

![Screenshot from 2021-03-07 09-50-13X](https://user-images.githubusercontent.com/15687581/110234556-6208d780-7f2b-11eb-9704-79441063ec9e.png)

The bibtex-doi-information dont get converted to biblatex, e.g. biblatex does not have a `journal` it has `journaltitle`.
 =||= Thank you for reporting this issue. We think, that is already fixed in our development version and consequently the change will be included in the next release.

We would like to ask you to use a development build from https://builds.jabref.org/main and report back if it works for you. Please remember to make a backup of your library before trying-out this version. =||= ```
JabRef 5.3--2021-04-27--d320975
Linux 5.11.15-100.fc32.x86_64 amd64 
Java 15.0.2 
JavaFX 16+8
```
![Screenshot from 2021-04-28 12-07-20](https://user-images.githubusercontent.com/15687581/116386683-4da1d680-a81a-11eb-86e6-bd56b04fddb6.png)


[6267.bib.txt](https://github.com/JabRef/jabref/files/6390979/6267.bib.txt)

![Screenshot from 2021-04-28 12-05-53](https://user-images.githubusercontent.com/15687581/116386624-4084e780-a81a-11eb-8526-c82517727654.png)

@Siedlerchr : The issue still persist.

 =||= Thanks, might have overlooked something will check it =||= I can confirm the issue is fixed. Thanks

```
JabRef 5.3--2021-04-29--cfb14b2
Linux 5.11.16-200.fc33.x86_64 amd64 
Java 15.0.2 
JavaFX 16+8
``` =||= "Fix cleanup run on wrong entry when fetching from DOI"Fixes #6267

Cleanup did use the wrong entry

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr04/29/21, 03:09:02 PM
7346.07705Some shortcuts are not working"JabRef version 5.2 on Windows 10, Ubuntu 20.04.1 and Mac OS Catalina 10.15.7

Some keyboard shortcuts are not working:
- Ctrl + E : open editor of highlighted reference
- Ctrl + Shift + U : create new unpublished
- Ctrl + Shift + R : create new report
- Ctrl + Shift + P : create new proceedings
- Ctrl + Shift + T : create new phdthesis
- Ctrl + Shift + M : create new masterthesis


Steps to reproduce the behavior:

1. Open the JabRef app
2. Open any library
3. Press shortcut on keyboard""@GreyCanis Do you by accident know the last version where it works? =||= We removed some default keybindings for them recently
 https://github.com/JabRef/jabref/blob/71ed32e4b2de69efa760f69d4a701a0055098fe7/src/main/java/org/jabref/gui/keyboard/KeyBinding.java#L68

Edit// On Mac Keybindings use cmd instead of control
 =||= At the PR https://github.com/JabRef/jabref/pull/6960 the discussion is included. =||= @GreyCanis Are all ""create new"" important for you? https://github.com/JabRef/jabref/pull/6960#issuecomment-700630352

We discussed an see that 4 out of the 5 mentioned key bindings lead to an entry not having a DOI. Thus, the DOI fetcher cannot be used. See https://docs.jabref.org/collect/add-entry-using-an-id for that functionality.

As workaround, you can change your key bindings. See https://docs.jabref.org/collect/add-entry-using-an-id.

Did you know that one can change the entry type by clicking on the left in the entry editor on the type label?

We still need a discussion whether we should re-add those key bindings. See that <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>R</kbd> was double bound to both new technical report and to fetch entries from shared database. See https://github.com/JabRef/jabref/issues/6867. I wonder whether you also stumbled on that issue. =||= @GreyCanis Can you refine your issue with <kbd>Ctrl</kbd>+<kbd>E</kbd>? It works with the latest build at https://builds.jabref.org/main/ =||= Refs https://github.com/JabRef/jabref/issues/6403 =||= "Added preset for new entry keybindings and reintroduced defaults"Added preset for new entry keybindings on public demand.

Fixes #7346
Fixes #7439

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus05/10/21, 08:20:10 PM
7439.07705Shortcut ctrl+shift+A not working"JabRef 5.2--2020-12-24--6a2a512
Windows 10 10.0 amd64 
Java 14.0.2

The shortcut of adding a new article, ctrl+shift+A, seems not working on my computer. Would you please see to it? What should I do with the issue?""Did you create a library before using the shortcut? I think it only works if you have a library tab open. =||= Yes I did. Not a total amateur. But a few minutes ago, it suddenly worked. Not sure what happened.  =||= Maybe a focus problem? =||= We removed ALL creation shortcuts in the last version. Maybe, we should re-add the existing ones and just remove the one and only conflicting one.

See https://github.com/JabRef/jabref/pull/6960#issuecomment-700630352 and https://github.com/JabRef/jabref/pull/6960#issuecomment-711428679

Maybe this issue is a duplicate of https://github.com/JabRef/jabref/issues/7346 =||= "Added preset for new entry keybindings and reintroduced defaults"Added preset for new entry keybindings on public demand.

Fixes #7346
Fixes #7439

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."Carl Christian Snethlagecalixtus05/10/21, 08:20:10 PM
7395.07708Possible Duplicates - Bibkey Comparison"The 'Possible Duplicates' has a 'strange' behavior when comparing the bibkeys.
If there are two papers of the same author (e.g. Mayer) and the bibkeys are Mayer2019 and Mayer2019a or Mayer2019 and Mayer2019b it would make sense from my point of view to have the 'first' bibkey selected in the mere view.
This would be Mayer2019 in the first case or Mayer2019a in the second case.
However, the later is always selected, i.e., Mayer2019a resp. Mayer2019b.""Not sure I completely understand this issue but I was wondering whether this is related to  https://github.com/JabRef/jabref/issues/7262#issuecomment-752943038

My suggestion would be to highlight _any_ duplicates (i.e. not the 1st occasion) in the Entry Table by making the font colour of the entry red by default. =||= The issue occurs in the merge view, when I merge the entries. Then the bibtexkey selected is the one of 'higher order'. =||= Refs https://github.com/koppor/jabref/issues/331 https://github.com/koppor/jabref/issues/110 =||= Hi, I am a software engineering student and interested in this issue. Is it better if the first entry always has a smaller dictionary order when merge two entries. Hope I understand the issue correctly. =||= "Select the entry which has smaller dictonary order when merge"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
Changed the selected entry when merge two entries:
if two entry's citation key are empty, the above one will be selected;
if only one entry has citation key, then it will be selected;
if two entries both have citation key, the one who has smaller dictionary order will be selected.
Fixes #7395 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->
The screenshot shows that the ""2021a"" is selected although it is below ""2021b"".
![test-for-7395](https://user-images.githubusercontent.com/54058357/117312265-7d567b80-aeb7-11eb-8a45-ea8edaa23cc8.png)

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."SuXiChangZhen05/10/21, 08:00:14 PM
6966.07709Bulk Copy/Open files"I would find it very helpful if it were possible to copy/open multiple attached files at once (after having selected multiple entries and having right-clicked and having selected from the context menu: ""copy/open all files attached to the selected entries"").""I'm not entirely sure what you exactly mean, but do you know about the Autolink files feature? 
Maybe that's what you wantto achieve 
https://docs.jabref.org/finding-sorting-and-cleaning-entries/filelinks 

 =||= Thanks for your reply!
In my case, multiple entries already have files attached to them. Be it that I want to give all PDFs (full texts) related/belonging to multiple entries to another person. At the moment, I have two possible workarounds:
- I have to pick and copy the files one by one by right-clicking on every entry and selecting ""Open folder"" by which the folder opens and the related file is selected.
- If I select all entries (whose attached files I want to copy in one step) and then right-click and select ""Open folder"", then one folder for each file is opened and I still have to copy all files one by one.
But it would be very helpful if I could copy (or at least: select) all files related to multiple entries in one single step.

Another use case would be to open (instead of copying) multiple files in one step, for example in order to analyse their relevance for me. I hope that was more comprehensible. Thanks! =||= @AtrusRiven  You are lucky, for the bulk copying/exporting there is already a feature in JabRef.
You select multiple entries and go to Tools -> Copy linked files to folder and JabRef will export all linked files from the entries to a folder you specify. Maybe that feature helps you already? =||= Thanks, @Siedlerchr! That does the trick for copying/exporting. I'd be glad if it were possible to add the feature ""open linked files"" (in addition / parallel to the bulk copy feature).
Thanks for your fast help! =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= - This issue is still relevant although not very urgent. Would be a »nice to have«.
- At the moment the context menu option `Open File` is greyed out when multiple entries are selected. It would be nice (in addition to the bulk copy option) to be able to open all files of multiple entries.
- Possible use case: Reviewing the content of multiple texts while looking for specific content.
![Screenshot](https://user-images.githubusercontent.com/29101440/116993767-32324200-acd8-11eb-8e55-05a78561f661.png)
 =||= Hello, I'm trying to work on this issue. So far I successfully added a new option in the right click menu. But when multiple entries selected, it is disabled, same as `Open file` option. Which part of codes should I modify to enable it? =||= Finally made it. There is a `needsEntriesSelected` condition.

I will draft a PR in the coming few days ASAP. =||= Thanks to @XDZhelheim this should be implemented in the latest development version. Could you please check the build from http://builds.jabref.org/master/. Thanks! Please remember to make a backup of your library before trying-out this version. =||= "Fix for issue 6966: open all files of multiple entries"Fixes #6966 

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

Added a new function to ""Open file"" option in the right-click menu.

Now we can open all linked files of the selected entries.

Test videos:

**Single entry selected: the behavior remains unchanged**

  

https://user-images.githubusercontent.com/57553691/117459616-2b2c5d80-af7e-11eb-8539-a4a7006711bf.mp4



**Multiple entries selected**

* All of them have linked files: open them all

    

https://user-images.githubusercontent.com/57553691/117459658-3a131000-af7e-11eb-8596-4f956ca09648.mp4



* Some have and some not: ~~pop out a dialog to ask the user whether to continue, if yes,~~ only open the former and skip the latter

    

https://user-images.githubusercontent.com/57553691/117459682-426b4b00-af7e-11eb-825e-de25510069a6.mp4



* None of them have any linked file: option will be disabled

    

https://user-images.githubusercontent.com/57553691/117459705-48612c00-af7e-11eb-8d47-99d72ed75a38.mp4





To implement these functions, I modified `OpenExternalFileAction` and added a new method `hasPresentFileForSelectedEntries` to check if at least one of the selected entries has linked files in `ActionHelper`."Zheng DongXDZhelheim05/13/21, 08:13:22 PM
7710.07711Cleanup action: some fields in random order"JabRef 5.3--2021-05-05--a3f093d
Linux 4.19.0-16-amd64 amd64 
Java 16.0.1 
JavaFX 16+8

- [X] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/main and the problem persists

In the cleanup actions (Menu `Quality -> Cleanup entries`, and Menu `Library -> Library properties`), most of the field values in the drop-down menu are in alphabetical order, but some are quite misplaced, making them difficult to find:
![ksnip_20210507-143014](https://user-images.githubusercontent.com/6931104/117450237-4167f880-af41-11eb-8564-3f7c6917f116.png)
It would be more convenient if these fields were listed in alphabetical order.

My understanding is that the first three in the list (see below) are voluntarily placed at the top because of their general purpose or their expected proeminent use. 
![ksnip_20210507-143040](https://user-images.githubusercontent.com/6931104/117450228-3dd47180-af41-11eb-8c9a-cd7ec087e8e0.png)
If so, a separator would be nice between `Citationkey` and `Abstract`.
"I think this is because `java.util.LinkedHashSet` is used to store these fields. I will new a pr about it. =||= I also worked on this issue, so I put my modification in my pr. But I am not sure if the separator should be added. =||= Thanks to  @dateri the fields are now sorted alphabetically again =||= Indeed, the issue is solved now. Thank you @dateri for your contribution to JabRef. I wish you can find other interesting issues to solve! =||= fix: make fields sorted by lexicographical order"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #7710 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->
We fix that some fields are in random order (issue #7710). We use `Treemap` which is ordered to replace `LinkedHashMap` and added a comparison function to the treemap to ensure that fields are ordered by lexicographical order.

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."dateri05/08/21, 09:17:58 AM
7716.07717Some more fields in random order"JabRef 5.3--2021-05-08--4f398d8
Linux 4.19.0-16-amd64 amd64 
Java 16.0.1 
JavaFX 16+8

- [x] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/main and the problem persists

I have found some other drop down menus where fields are not sorted (like in issue #7710):
- List of fields (i.e. exact same list as issue #7710):
    - Menu `Library -> Library properties`, in section `Save sort order`: Primary, secondary and tertiary sort criteria.
    - Menu `Options -> Preferences`, in tab `File`, section `Export sort order`: Primary, secondary and tertiary sort criteria.
    - Menu `Options -> Preferences`, in tab XMP metadata: drop-down list of the column `Field name`.

- List of actions:
    - Menu `Library -> Library properties`, in section `Save actions`, drop-down list of the column `Formatter name`.
    - Menu `Quality -> Cleanup actions`, in section `Enable field formatters`, drop-down list of the column `Formatter name`.

- Menu `Library -> New entry...`, drop-down list of `ID type`.

- Menu `Options -> Preferences`, in tab `General`, drop-down list of `Language`.

 


 
""Ping @dateri, maybe? =||= Yeah, I think they need be also sorted. I'll fix them soon. =||= I think for new entry the ID list should be ordered by things that are used the most first. Doi should be on top. 

Same applies to formatter. =||= @Siedlerchr maybe sort them by displayName is enough cause the number of types of formatter and ID list are not so large as the number of fields？And i have no idea about how to store the number of times they use (add a database?). =||= I took a look and actually the ID Fetcher list is already sorted by their localized Name 
    public static SortedSet<IdBasedFetcher> getIdBasedFetchers(ImportFormatPreferences importFormatPreferences) {
 =||= @Siedlerchr ID fetchers were mostly sorted (mEDRA is not) =||= @dateri Thank you for tackling this issue. I wish you will find some other interesting issues to solve in JabRef! =||= "fix: make more fields, fomatters, ids and languages sorted by alphabetical order"
<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #7716
We fix that more fields, fomatters, ids and languages sorted by alphabetical order. Solving them by either adding sort to relative property or using a `SortedList` to wrapper the ObservableList.

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."dateri05/10/21, 07:38:52 PM
7451.07726Saving library doesn't create .bib file but a file without ending"File > New library and then Save library > choose name > lower right corner choose BIBTEX_DB file (only option) > Save
or File > Save library as > choose name > lower right corner choose BIBTEX_DB file (only option) > Save
File is saved without any ending. Expected to be saved as .bib instead, as none(?) other file-endings are displayed when using File > Open library.

Workaround: add .bib manually when choosing name.

JabRef 5.2--2020-12-24--6a2a512
Linux 5.8.0-43-generic amd64 
Java 15.0.1""I cannot reproduce this isuse with the latest master version under Mac. Extension is added. Maybe some linux thing?
 =||= Well, easy to reproduce on Linux.

JabRef 5.3--2021-02-27--c7f2671
Linux 4.19.0-14-amd64 amd64 
Java 15.0.2 
JavaFX 15.0.1+1
 =||= Okay, this is weird. After a bit of googling I stumbled across this bug which says it's intended for GTK applications: (wtf?)
Some applications add the extension, other not (gedit) 
https://bugs.openjdk.java.net/browse/JDK-8123775

Well, the  fix would be easy:
Check if the file returned from the file extension dialog contains the extension
Check if the file with extension already exists -> 
 - Yes = > cancel/throw an error :
 - Not => save file with extension

@LyzardKing  Do you maybe know if there is a kind of ""flag"" to add or not add the extension? =||= I would like to work on this issue if it is reproducible on windows =||= > @LyzardKing Do you maybe know if there is a kind of ""flag"" to add or not add the extension?

Do you mean in the save dialog? I'm not sure... =||= I see this issue has been tagged with Linux, a small group of us from Adelaide University would love to contribute to this issue over the course of the coming weeks.  =||= I want to participate in GSOC 2021 , so would like to solve this issue as I have set up local workspace on Ubuntu 20.04 and successfully reproduced the issue @Siedlerchr  =||= The better solution here would be to fix it upstream in openjfx.
A quick fix in jabref would be trivial (as @Siedlerchr says), but not really solve the issue. =||= "Fix for issue 7451: Saving library doesn’t create .bib file but a file without ending"- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

Workaround for issue #7451 . Solution implemented with ryanhore23 based on Siedlerchr's suggested solution.

Fixes #7451 


Changes:

After file save dialog is completed, the filename is checked. If it already ends in "".bib"" (Case insensitive) it continues as previously. Otherwise it appends "".bib"" to the end of the selected path. It will return null if this file already exists to prevent any chance of data loss. In the event it cancels, it displays a notification through the dialogService that saving failed."guyf201005/17/21, 08:35:32 PM
5804.07733Rewrite ACM fetcher, because of ACM web site changes"Test query: https://dl.acm.org/exportformats_search.cfm?query=%28%25252Bjabref%2520%25252Barchitectural%2520%25252Bchurn%29&within=owners.owner%3DGUIDE&expformat=bibtex

![grafik](https://user-images.githubusercontent.com/1366654/71647570-5acbb580-2cf9-11ea-8212-5f89e18efd2d.png)

Asked on twitter: 

<blockquote class=""twitter-tweet""><p lang=""en"" dir=""ltr"">.<a href=""https://twitter.com/TheOfficialACM?ref_src=twsrc%5Etfw"">@TheOfficialACM</a> Your exportformats_search.cfm seems to be down. This feature was very useful and widely used in the web. Is it intended that it currently does not work? <a href=""https://twitter.com/hashtag/opencitations?src=hash&amp;ref_src=twsrc%5Etfw"">#opencitations</a> - example query: <a href=""https://t.co/TOf3sgqvL1"">https://t.co/TOf3sgqvL1</a></p>&mdash; Oliver Kopp (@koppor) <a href=""https://twitter.com/koppor/status/1212520118179311616?ref_src=twsrc%5Etfw"">January 1, 2020</a></blockquote> <script async src=""https://platform.twitter.com/widgets.js"" charset=""utf-8""></script> ""The fetcher has to be rewritten. See https://github.com/zotero/translators/pull/2101 vor some code ideas.

(Thank you @zuphilip for the pointer) =||= This issue has been inactive for half a year. Since JabRef is constantly evolving this issue may not be relevant any longer and it will be closed in two weeks if no further activity occurs.

As part of an effort to ensure that the JabRef team is focusing on important and valid issues, we would like to ask if you could update the issue if it still persists. This could be in the following form:

- If there has been a longer discussion, add a short summary of the most important points as a new comment (if not yet existing).
- Provide further steps or information on how to reproduce this issue.
- Upvote the initial post if you like to see it implemented soon. Votes are not the only metric that we use to determine the requests that are implemented, however, they do factor into our decision-making process.
- If all information is provided and still up-to-date, then just add a short comment that the issue is still relevant.

Thank you for your contribution! =||= We need the ACM fetcher - or we need to drop it. =||= Hello, is this issue still available? And if is available I would like to take it
 =||= Go for it! :-) If you have questions, don't hesitate to ask at our gitter dev chat ( https://gitter.im/JabRef/jabref ). If you want to learn more about JabRef-programming in general have a look at our dev docs ( https://devdocs.jabref.org/ )
 =||= Nice, I am gonna start working on it =||= ~~Internal reference for JabRef developers: Implementation using the screen-scraping technology is available (privately) at https://github.com/NatashaDudi/jabref/blob/develop/src/main/java/org/jabref/logic/importer/fetcher/ACMPortalFetcher.java?rgh-link-date=2020-12-21T19%3A46%3A53Z.~~ --> Now at https://github.com/koppor/jabref/pull/476

@JofielB How are your implementation efforts going? =||= @JofielB Happy new year. May I ask for some progress regarding that issue?

You can get some inspiration from https://github.com/koppor/jabref/pull/476 =||= @koppor Hello and Happy new year. I am sorry for taking me so long to respond to this. I wasn't able to have any kind of progress and I am not pretty sure that I will be able to keep working on this issue. =||= Hello, can I work in this issue ? I am new to open source software and want to contribute  =||= @jvera701 After checking @JofielB's reply, it is very OK for you to try. Always keep test-driven development in your mind and try to use the ""play"" button in IntelliJ. See <https://www.jetbrains.com/help/idea/performing-tests.html> for details. =||= I am sorry, I am replying this late but I couldn't make any substantial progress .and I am not sure I can continue working on this.. Writing this feature was harder than I first thought.  =||= I think I got some clues.

Referring to https://github.com/zotero/translators/pull/2101, there is an API to query `bibtex` with DOI.

The format of URL is: `https://dl.acm.org/action/exportCiteProcCitation?targetFile=custom-bibtex&dois=<doi1>,<doi2>,...` (and encode it).
For example: https://dl.acm.org/action/exportCiteProcCitation?targetFile=custom-bibtex&dois=10.1145%2F3129790.3129810%2C10.1145%2F1961189.1961199. It's OK to open with browser.

The query result is a JSON file. And the `""items""` field contains `bibtex` citation. (Last part of the JSON file.)
![query_result_json](https://user-images.githubusercontent.com/57553691/117096318-41c68f00-ad9b-11eb-81a2-5fa269e1a93f.png)

After that, we can extract all the information needed from JSON.
 
But in the original fetcher, we use keywords to search, such as `jabref architectural churn` in the example given by @koppor. Therefore, the question is how to get a paper's DOI by its title. I have no idea now.

Hope this can give help. =||= One solution is to get the DOI from the HTML results of the search page, then use the export interface to get the JSON format data, and finally parse them.

Search API: https://dl.acm.org/action/doSearch?AllField=<queryString>
Export API: https://dl.acm.org/action/exportCiteProcCitation?targetFile=custom-bibtex&format=bibTex&dois=<doi>,<doi>,... =||= > One solution is to get the DOI from the HTML results of the search page, then use the export interface to get the JSON format data, and finally parse them.
> 
> Search API: https://dl.acm.org/action/doSearch?AllField=
> Export API: https://dl.acm.org/action/exportCiteProcCitation?targetFile=custom-bibtex&format=bibTex&dois=,,...

Yes, I have tried. The difficulty is how to build a script to get DOI from the web page. ACM digital lib uses some anti-crawler techniques. =||= > Yes, I have tried. The difficulty is how to build a script to get DOI from the web page. ACM digital lib uses some anti-crawler techniques.

<br>

I used a browser and curl for testing. The browser access is all normal. The curl response requires cookies, so the cookie should be included in the request.

```bash
C:\Users\ruan>curl https://dl.acm.org/action/doSearch?AllField=lidar
The URL has moved <a href=""https://dl.acm.org/action/doSearch?AllField=lidar&cookieSet=1"">here</a>
```
 =||= Nice work.

But if I remember correctly, the old ACM fetcher searches in ""ACM Guide to Computing Literature"", which means the query URL is https://dl.acm.org/action/doSearch?AllField=lidar&expand=all =||= > Nice work.
> 
> But if I remember correctly, the old ACM fetcher searches in ""ACM Guide to Computing Literature"", which means the query URL is https://dl.acm.org/action/doSearch?AllField=lidar&expand=all

Thank you for your reminder, but I did not find this in the original code file.
Maybe we need a little help from @koppor . =||= "Fix for issue 5804: Rewrite ACM fetcher"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Fixes #5804 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.

<br>

From issue #5804, ACM Fetcher needs to be rewritten, because of ACM website changes.
One solution is to get the DOI from the HTML results of the search page, then use the export interface to get the JSON format data, and finally parse them.

Search API: https://dl.acm.org/action/doSearch?AllField=<query_string\>
Export API: https://dl.acm.org/action/exportCiteProcCitation?targetFile=custom-bibtex&format=bibTex&dois=<doi\>,<doi\>,...

What did I do:
1. Rewrited ACMPortalFetcher, added ACMPortalParser.
2. added Modified ACMPortalFetcherTest and ACMPortalParserTest.

Successfully get data from AMC Fetcher:
![ACM-Portal](https://user-images.githubusercontent.com/47767371/117985875-ad949300-b36b-11eb-9f90-d0da10ade6ea.png)
![ACM-Portal-3-imported](https://user-images.githubusercontent.com/47767371/117985880-af5e5680-b36b-11eb-938d-4b259eed7a1c.png)

"RuanRyyyc05/20/21, 10:41:54 PM
7111.07734Citation key, make it possible for an empty field to fall back to a custom field"Nowadays, most articles from online database already have their unique identifiers.
I personally prefer to use [authorsAlpha][eprint] as the default pattern for citation key. 
It expands the default [author][year] pattern (the information of [year] is already contained in [eprint]); moreover, it automatically avoid duplicate keys.
However, it is not compatible with old articles with no [eprint] field. So I hope that when [eprint] is empty, it automatically falls back to [year]. Currently JabRef has the feature to replace an empty field with a custom string, which is actually not informative at all and thus not practical. Also when [author] is empty then [editor] is automatically used. So why not make this available to all empty fields with customizable fallback field? The syntax may be simply [eprint:[year]].""This should be possible at least to define a fallback 
https://docs.jabref.org/setup/citationkeypatterns#citation-key-patterns

> :(x): The string between the parentheses will be inserted if the field marker preceding this modifier resolves to an empty value. The placeholder x may be any string. For instance, the marker [VOLUME:(unknown)] will return the entry's volume if set, and the string unknown if the entry's VOLUME field is not set

@k3KAW8Pnf7mkmdSMPHz27 Do you know if it's possible to define a fallback field? =||= > Nowadays, most articles from online database already have their unique identifiers.

You are referring to `eprint`?

> Currently JabRef has the feature to replace an empty field with a custom string,

It would be better if it supported fields/bracketed expressions as well, yup.

You might be able to workaround the issue using the [replace regular expression feature with an empty string](https://docs.jabref.org/setup/citationkeypatterns#replace-regular-expression). I am not familiar enough with regex and the `year`/`eprint` fields to come up with something good, but for the pattern `[author]|[eprint][year]` something along the lines of `(?<=|)\d\d\d\d$` (replace the last 4 digits if they are not preceded by `|`) might work (even if it doesn't give the exact results that you want)?

> So why not make this available to all empty fields with customizable fallback field?

I like the idea ``

> The syntax may be simply [eprint:[year]]

I'd recommend `[eprint:([year])]`, in that case, for consistency. I'd be happy to review/help out if you are interested in implementing this.

https://github.com/JabRef/jabref/blob/b0af521e3173e4b55673cd27563ca981ad607e8b/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L549-L553

Is the (current) replacement modifier. 

> Do you know if it's possible to define a fallback field?

As far as I know, no =/ =||= > Nowadays, most articles from online database already have their unique identifiers.

Yes, eprint or even doi. I don't like the [year] field because new articles tend to have both a preprint and a reprint with different [year]. When I update the reprint info from a preprint, the year changes, which then messes up the bibtex key and the pdf file names.  I then decided to use eprint instead of year which is unique and persistent.

I do have my personal workaround via regex.
I set the pattern [authorsAlpha]:[year]:[eprint], then replace :(.\*):$|:.\*:(\S) with $1$2.
So when [eprint] in not empty I get [authorsAlpha][eprint], otherwise I get [authorsAlpha][year].
Such hacking should work for customizing a fallback of any empty field.

However, I suppose that in the current version you can do regex replace **only once**. I would be already happy if it was allowed to add several regex replacement rules. =||= > Such hacking should work for customizing a fallback of any empty field.

Nice! Might be that others can use this meanwhile.

> However, I suppose that in the current version you can do regex replace **only once**. I would be already happy if it was allowed to add several regex replacement rules.

Agreed. =||= @k3KAW8Pnf7mkmdSMPHz27 Hi, I am interested in this issue. Where can I get started and What is the expected behavior of citation key generation? Thank you.  =||= Hello @SuXiChangZhen, thank you for your interest!

Pretty much all approaches start with the ""alternative text modifier"" as described above,
https://github.com/JabRef/jabref/blob/b0af521e3173e4b55673cd27563ca981ad607e8b/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L549-L553

It is listed as the last modifier in the [JabRef documentation](https://docs.jabref.org/setup/citationkeypatterns#modifiers).

There isn't necessarily one ""right"" answer to this issue. The code is old and has a few violations against good coding principles making it harder to deal with it. Mostly I'd advise against trying to refactor the whole `BracketedPattern` class because it would be very time-consuming. I'd guest the best effort/utility trade-off would be to extend the method injection code found among other places in,

https://github.com/JabRef/jabref/blob/807f85e4ab418b4398408e37f023ee09209b038a/src/main/java/org/jabref/logic/citationkeypattern/CitationKeyGenerator.java#L195-L220

so that 
https://github.com/JabRef/jabref/blob/807f85e4ab418b4398408e37f023ee09209b038a/src/main/java/org/jabref/logic/citationkeypattern/BracketedPattern.java#L537

can parse and expand whatever is between the parentheses, i.e., make the same type of call as in
https://github.com/JabRef/jabref/blob/807f85e4ab418b4398408e37f023ee09209b038a/src/main/java/org/jabref/logic/citationkeypattern/CitationKeyGenerator.java#L195

Does that sort of make sense?

You are also free to solve it in some completely different way.

> expected behavior of citation key generation

I am not sure that I understand your question. The bracketed patterns were originally intended to create a citation key from bibentries by accessing its fields, (e.g., `[TITLE]` accesses `StandardField.TITLE`) with some special keywords creating shorter/easier-to-read citation keys (e.g. `[title]`). The issue here is regarding accessing a different field if `[title]` resolves into an empty string. At the moment it is only possible to use a string instead, e.g., `[TITLE:(NoTitle)]`, to generate the citation key ""NoTitle"" if the bibentry has no title. But it would be good to be able to replace it with a different field instead (e.g., `[EPRINT:([YEAR])]`, if there is no `EPRINT` field, try to use the `YEAR` field instead),  =||= Thank you for your advice. I think I understand the need. I will make a pr soon. =||= "support fall back fields in citation key generation"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->
To support pattern like [field:[fall back field]], I first change `contentBetweenBrackets` because it did not support nested brackets. And in the `applyModifiers`, before it used `substring` to get the content inside parentheses, now I use `expandBrackets` to parse it. So theoretically, it can support many nested brackets, something like [author:([title:(year:...)])]. I also add the test case to test the fall back field.
Fixes #7111 

<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."SuXiChangZhen05/23/21, 02:27:22 PM
7737.07775"import hangs for ris files with ""ER  - "" field, also other bib files common from journal web sites""<!-- 
Note: Please use the GitHub issue tracker only for bug reports. 
Feature requests, questions and general feedback is now handled at http://discourse.jabref.org.
Thanks! 
--> 

JabRef version JabRef 5.3--2021-05-15--0a26d31
Windows 10 10.0 amd64 
Java 16.0.1 
JavaFX 16+8

- [X ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/main and the problem persists

Certain files I download from journals cause import to hang.  (I looked through other bug reports concerning ""import hangs"" and this seems to be different.  Apologies if duplicate.)  The problem was perfectly reproducible in 5.2.  In 5.3 some problem files **occasionally** load.  If you cannot reproduce the bug, please try opening the problem files 3 or 4 times.

With ris files the problem is clear.  When the ris file contains ""ER - "" as the last line, import (ctrl-I) hangs and I have to kill jabref and restart.  Removing the last line solves the problem.   This may be an illegal ris format, but many journal citation files end this way.  I have provided examples from J. Chem. Phys., J. Phys. Chem., WIREs Comput. Mol Sci., and Biophys. J.  It is interesting, but there is no problem opening such a file using right click, open with jabref.

Bib files from journals also give similar problems.  I delete portions of the file until jabref does not hang.  However, I have not pinned down the problem as I have with ris files.  Examples of both ris and bib problem files will be attached.

I cannot post a log file example.  When the import hangs and I have to ""close program"", the log is empty upon restart.

Several ris and bib files that cause problems are attached.  The ris files all contain the ""ER - "" last line.

[FilesThatCauseImportHangs.zip](https://github.com/JabRef/jabref/files/6488022/FilesThatCauseImportHangs.zip)

Thank you.


""I have reproduced this issue in the latest version . And I want try to fix it , could you give me some advise  , thank you @Siedlerchr 
 =||= @Noname690  I would take a look at the RIS Importer and debug what happenns when the importer cones to this line.
You can also start with a Unit test to reproduce this  =||= How can I do this?

From: Christoph ***@***.***>
Sent: Monday, May 17, 2021 4:27 PM
To: JabRef/jabref ***@***.***>
Cc: Singer, Sherwin ***@***.***>; Author ***@***.***>
Subject: Re: [JabRef/jabref] import hangs for ris files with ""ER - "" field, also other bib files common from journal web sites (#7737)


@Noname690<https://urldefense.com/v3/__https:/github.com/Noname690__;!!KGKeukY!g0ZyhezQd2W3VLpS5vfI2xylxSca86zln7hiwV1SF951JzfZ1h7GZfHEyibmAEIrTwWdrf2I5EA$> I would take a look at the RIS Importer and debug what happenns when the importer cones to this line.
You can also start with a Unit test to reproduce this

—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub<https://urldefense.com/v3/__https:/github.com/JabRef/jabref/issues/7737*issuecomment-842616711__;Iw!!KGKeukY!g0ZyhezQd2W3VLpS5vfI2xylxSca86zln7hiwV1SF951JzfZ1h7GZfHEyibmAEIrTwWd0oIZjBo$>, or unsubscribe<https://urldefense.com/v3/__https:/github.com/notifications/unsubscribe-auth/AJII6NESRXCEC3LDHLPJ2FTTOF3Z7ANCNFSM446EKA7A__;!!KGKeukY!g0ZyhezQd2W3VLpS5vfI2xylxSca86zln7hiwV1SF951JzfZ1h7GZfHEyibmAEIrTwWd8TLax28$>.
 =||= ![4T2~J6YMXU}9066${JQTB5G](https://user-images.githubusercontent.com/56827551/118786104-11671080-b8c4-11eb-8e80-85563cd06f29.png)
The entries after processing are like this , I think the problem may cause by that =||= Yes, for ris files the “ER – “ at the end is the problem.  If one removes that last line it’s OK.

I have not been able to determine which line causes problems in the bib file.  In the past, I removed all non-essential without isolating which one was the problem.  I will work on removing lines one by one and try to isolate the problem with bib files.

Thanks for your work on Jabref!
  Sherwin

From: Noname690 ***@***.***>
Sent: Wednesday, May 19, 2021 5:09 AM
To: JabRef/jabref ***@***.***>
Cc: Singer, Sherwin ***@***.***>; Author ***@***.***>
Subject: Re: [JabRef/jabref] import hangs for ris files with ""ER - "" field, also other bib files common from journal web sites (#7737)


[4T2~J6YMXU}9066${JQTB5G]<https://urldefense.com/v3/__https:/user-images.githubusercontent.com/56827551/118786104-11671080-b8c4-11eb-8e80-85563cd06f29.png__;!!KGKeukY!mzE5wcSrfsVeCKwJ2yD7uJkBjAinENDw0meOhBhl32QvPNwqUqh6UkWX6lhuEb2spwq-K-wTvpw$>
The entries after processing are like this , I think the problem may cause by that

—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub<https://urldefense.com/v3/__https:/github.com/JabRef/jabref/issues/7737*issuecomment-843906522__;Iw!!KGKeukY!mzE5wcSrfsVeCKwJ2yD7uJkBjAinENDw0meOhBhl32QvPNwqUqh6UkWX6lhuEb2spwq-o_HYwAY$>, or unsubscribe<https://urldefense.com/v3/__https:/github.com/notifications/unsubscribe-auth/AJII6NCK4CCMLPH6CZ7R3FTTON52LANCNFSM446EKA7A__;!!KGKeukY!mzE5wcSrfsVeCKwJ2yD7uJkBjAinENDw0meOhBhl32QvPNwqUqh6UkWX6lhuEb2spwq-5Jq8zRk$>.
 =||= @CodeSJS  Thanks to @Noname690 this issue is now fixed in the latest development build http://builds.jabref.org/main =||= Thanks!  I downloaded the latest build.  Jabref now imports every ris or bib file I saved as problem-causing.

Regards,
    Sherwin

From: Christoph ***@***.***>
Sent: Friday, June 4, 2021 2:18 AM
To: JabRef/jabref ***@***.***>
Cc: Singer, Sherwin ***@***.***>; Mention ***@***.***>
Subject: Re: [JabRef/jabref] import hangs for ris files with ""ER - "" field, also other bib files common from journal web sites (#7737)


@CodeSJS<https://urldefense.com/v3/__https:/github.com/CodeSJS__;!!KGKeukY!m1BIS6mnf2nPehJXHV-JtsL7GFgBGwhn9_IlGdYoQbhtfa72RSjOltSaESVFBowf8pafLmn-us4$> Thanks to @Noname690<https://urldefense.com/v3/__https:/github.com/Noname690__;!!KGKeukY!m1BIS6mnf2nPehJXHV-JtsL7GFgBGwhn9_IlGdYoQbhtfa72RSjOltSaESVFBowf8pafdO52fbU$> this issue is now fixed in the latest development build http://builds.jabref.org/main<https://urldefense.com/v3/__http:/builds.jabref.org/main__;!!KGKeukY!m1BIS6mnf2nPehJXHV-JtsL7GFgBGwhn9_IlGdYoQbhtfa72RSjOltSaESVFBowf8pafJDzxOpY$>

—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub<https://urldefense.com/v3/__https:/github.com/JabRef/jabref/issues/7737*issuecomment-854393336__;Iw!!KGKeukY!m1BIS6mnf2nPehJXHV-JtsL7GFgBGwhn9_IlGdYoQbhtfa72RSjOltSaESVFBowf8pafaFB7bTM$>, or unsubscribe<https://urldefense.com/v3/__https:/github.com/notifications/unsubscribe-auth/AJII6NFZGAYJ55U7HHTRGF3TRBV3JANCNFSM446EKA7A__;!!KGKeukY!m1BIS6mnf2nPehJXHV-JtsL7GFgBGwhn9_IlGdYoQbhtfa72RSjOltSaESVFBowf8pafM8B9WMo$>.
 =||= "Fix ris importer follow up"<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->

Follow up from #7755 
Fixes #7737 


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."ChristophSiedlerchr06/03/21, 10:38:21 PM
7267.07797Citation key generation on large number of entries not showing up in Background Tasks"JabRef 5.2--2020-12-24--6a2a512
Windows 10 10.0 amd64
Java 14.0.2

- [ ] **Mandatory**: I have tested the latest development version from http://builds.jabref.org/master/ and the problem persists

This issue is present on the v5.2 stable.

Steps to reproduce the behavior:
1. Select a large number of entries
2. Auto-generate citation keys based on presets
3. No background tasks shown

Would be great if such extensive tasks would show up in the Background task option.""Question for whenever someone gets to it. If I am understanding correctly the intention would be just to use the backgroundtask wrapper and have the task/progress show up in the task window. Does the wrapper also protect task from the being interrupted, It doesn't appear to work this way.

The reason I ask is related to the question below.
Should it take a long time to gen-keys for 10 entries of 100000? It's very fast for same selection size(10) with only 10 entries. The reason it's a concern is because currently the gen process can be interrupted without warning. So unless it's remains very quick and completes before a user can take action, it potentially can be interrupted with no notification nor indication where it left off.

Would it be better to block until complete? I don't know typical working numbers but 100000 entries seems like it would be a rarity, so maybe my understanding of the issues at hand are a bit skewed. But, maybe there is a better solution that addresses the potential for interruption.

I would like to add, someone probably wouldn't be requesting task progress-monitoring for something with a very quick resolution.

I would be interested to hear what someone else thought. =||= Hi,
`The reason it's a concern is because currently the gen process can be interrupted without warning`
Why would that be a problem? If the user wants to interrupt, why not interrupt? The question is if there is a need to revert all the entries that were assigned a new key to the old key in case of an interruption. =||= @btut 
I don't disagree, I think the process should be stopped if the user intends to stop it, but _**only**_ if they intend to stop it. 

It's been awhile since I've checked the issue out but what I'm remembering was starting the process and continuing to work (which I think was just clicking on entries to examine). This would stop the gen process and without notification. If more clarification would be helpful let me know and I can revisit to refresh my memory.


IMO:
Reverting sounds like an undo-state save. I have no experience implementing but it seems like it should be doable. There could be performance issues, I didn't dig too deeply, but noticed the time it takes for a set of only 10 to complete (quick) was much longer for that same 10 (slow) if they were included in the gen process for a very large set. =||= `but only if they intend to stop it`
so you suggest something like a confirmation dialogue on cancel?

`This would stop the gen process and without notification`
I see. I'd have to check that. The thing is I don't have a library large enough to test this. There is no way I'm fast enough to hit that cancel button before the operation is done... Do you know of any huge bib files available for download to test this out? Otherwise I may just generate one with random strings.

`Reverting sounds like an undo-state save`
exactly, but I don't have any experience there either. Do you think this is necessary? Is it a valid usecase to interrupt the key-generation and expect it to revert to the previous state?

`a set of only 10 to complete (quick) was much longer for that same 10 (slow) if they were included in the gen process for a very large set.`
I guess the non-linearity comes from JabRef making sure the keys are unique. =||= I think at very least a dialog asking if they want to stop the process. I don't know all conditions that could interrupt and it may make more sense to just block with a dialog? Again, as you found out its pretty quick if you aren't doing very many... but then the question became if its so quick the blocking dialog will not be seen, why bother having it display the progress.  

There are some script files you can use to build a lib with, look in the _scripts/_ directory. 
There are also some already made, I haven't looked at them, but they are buried in test/resources/testbib/

I think the undo would have been requested if users wanted to take advantage of something like that. To me, the undoing sounds like issue creep and should be its own separate issue.  =||= > a set of only 10 to complete (quick) was much longer for that same 10 (slow) if they were included in the gen process for a very large set.
>> I guess the non-linearity comes from JabRef making sure the keys are unique.

Yup. The implementation slows down significantly based on the number of entries in the library and the amount of duplicates of the particular key. Is this a problem that needs fixing?  =||= `Yup. The implementation slows down significantly based on the number of entries in the library and the amount of duplicates of the particular key. Is this a problem that needs fixing?`
I did not yet experience any performance issues since I never worked with huge libraries. Will try out in the next days.
Didn't yet check the implementation of the key-generator either, but this sounds like the generator checks against all generated keys on each entry, so maybe something like a key -> occurenceCount hashmap would be more efficient. =||= @btut it checks all keys on each entry and each collision. I think `occurenceCount` isn't used anymore and the method can be made slightly quicker (and more readable) by using `database.getEntryByKey` instead. You can use a hash set instead of `database.getEntryByKey` but I think you'd get a slight performance decrease because we don't expect many citation key collisions.

Additionally, it seems that we are assuming that any entry can be changed at any time during the key generation, which is why it is iterating through all bibentries. Creating a high-performing alternative while avoiding concurrency issues is probably not worth your time, [even if we are not doing XP](https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it). =||= `Additionally, it seems that we are assuming that any entry can be changed at any time during the key generation, which is why it is iterating through all bibentries. Creating a high-performing alternative while avoiding concurrency issues is probably not worth your time, even if we are not doing XP.`
Ah yes, that makes lots of sense! Let's leave it as-is then. =||= "Added auto-key-generation task to task-progress"Auto-key-generation tasks are now shown in the list of background tasks,
together with a progress representing entries done / entries.
Fixes #7267

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [x] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [x] Screenshots added in PR description (for UI changes)
- [ ] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.
![Screenshot from 2021-06-05 11-20-37](https://user-images.githubusercontent.com/10479048/120887475-69578400-c5f3-11eb-9e6d-9650fdae16a2.png)"Benedikt Tutzerbtut06/10/21, 09:14:11 PM
7768.07808Unittest: assure preamble parses with arbitrary brackets"The preamble part of the bibtext parser (logic/importer/fileformat/BibtextParser) has a `parseBracketedText` method that accepts any pairing of curly bracket and round bracket, for example
```
@preamble{ some (  { text ) } )
```
is acceptable.

I'm writing a new test case for that to indicate that this 'feature' is tested so that developers should know this is a feature not a bug.

I assume that this is designed as is, so that it won't break on opening current acceptable bibtex files. But if this is indeed a bug, please let me know so that I can get a PR for this.

- [ ] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [x] Tests created for changes (if applicable)
- [x] Manually tested changed features in running JabRef (always required)
- [ ] Screenshots added in PR description (for UI changes)
- [x] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository.""Regarding the preamble I found this Tex StackExchange answer which provides some more info of the preamble and the allowed format and how it's used in bibtex
 https://tex.stackexchange.com/a/468369

 =||= > Regarding the preamble I found this Tex StackExchange answer which provides some more info of the preamble and the allowed format and how it's used in bibtex
> [tex.stackexchange.com/a/468369](https://tex.stackexchange.com/a/468369)

Thank you for the link. The link should also be added to JabRef's preamble-parsing source.

JabRef should be able to parse even invalid files, because users want to edit their library using JabRef - and not fall back to other tools not having parsing issues.

@gwy15 Thank you for your contribution. Since we take each contribution serious, please also be reminded that this contribution causes us energy to think about it. Thus, these comments. Since you are also in the context of pre-amble-parsing, you can think of more on it. Can you, for instance, check whether the user documentation also has correct content for preamble handling? 

Other than that, I would not spend much more energy here. I do not know any user using the premable feature.
 =||= "Implemented a select all button for the library import function (issue #7786)"Fixes #7768

![SelectAllScreenshot](https://user-images.githubusercontent.com/55059816/121120358-3d462980-c7d2-11eb-9120-eebf3d5125c8.png)

We implemented a select all button for the library import function that fixes issue #7786. 
Added a new function selectAllEntires() to ImportEntriesDialog and a button to ImportEntriesDialog.fxml.
New localization String ""Select all entries"" also added to JabRef_en.properties.

<!-- 
Describe the changes you have made here: what, why, ... 
Link issues that are fixed, e.g. ""Fixes #333"".
If you fixed a koppor issue, link it, e.g. ""Fixes https://github.com/koppor/jabref/issues/47"".
The title of the PR must not reference an issue, because GitHub does not support autolinking there.
-->


<!-- 
- Go through the list below. If a task has been completed, mark it done by using `[x]`.
- Please don't remove any items, just leave them unchecked if they are not applicable.
-->

- [X] Change in `CHANGELOG.md` described in a way that is understandable for the average user (if applicable)
- [ ] Tests created for changes (if applicable)
- [X] Manually tested changed features in running JabRef (always required)
- [X] Screenshots added in PR description (for UI changes)
- [X] [Checked documentation](https://docs.jabref.org/): Is the information available and up to date? If not created an issue at <https://github.com/JabRef/user-documentation/issues> or, even better, submitted a pull request to the documentation repository."brapana06/09/21, 06:25:45 AM
